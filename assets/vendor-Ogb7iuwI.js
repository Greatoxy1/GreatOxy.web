var pO=Object.defineProperty;var vO=Object.getPrototypeOf;var yO=Reflect.get;var Rk=n=>{throw TypeError(n)};var EO=(n,e,t)=>e in n?pO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var tr=(n,e,t)=>EO(n,typeof e!="symbol"?e+"":e,t),E_=(n,e,t)=>e.has(n)||Rk("Cannot "+t);var qe=(n,e,t)=>(E_(n,e,"read from private field"),t?t.call(n):e.get(n)),cn=(n,e,t)=>e.has(n)?Rk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Tt=(n,e,t,r)=>(E_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),rr=(n,e,t)=>(E_(n,e,"access private method"),t);var xE=(n,e,t)=>yO(vO(n),t,e);function bO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var b_={exports:{}},hp={},T_={exports:{}},Nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk;function TO(){if(xk)return Nr;xk=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function p(Ne){return Ne===null||typeof Ne!="object"?null:(Ne=g&&Ne[g]||Ne["@@iterator"],typeof Ne=="function"?Ne:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,A={};function I(Ne,ze,st){this.props=Ne,this.context=ze,this.refs=A,this.updater=st||y}I.prototype.isReactComponent={},I.prototype.setState=function(Ne,ze){if(typeof Ne!="object"&&typeof Ne!="function"&&Ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ne,ze,"setState")},I.prototype.forceUpdate=function(Ne){this.updater.enqueueForceUpdate(this,Ne,"forceUpdate")};function P(){}P.prototype=I.prototype;function U(Ne,ze,st){this.props=Ne,this.context=ze,this.refs=A,this.updater=st||y}var M=U.prototype=new P;M.constructor=U,v(M,I.prototype),M.isPureReactComponent=!0;var B=Array.isArray,ie=Object.prototype.hasOwnProperty,L={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function O(Ne,ze,st){var Rt,jt={},Pe=null,Oe=null;if(ze!=null)for(Rt in ze.ref!==void 0&&(Oe=ze.ref),ze.key!==void 0&&(Pe=""+ze.key),ze)ie.call(ze,Rt)&&!w.hasOwnProperty(Rt)&&(jt[Rt]=ze[Rt]);var gt=arguments.length-2;if(gt===1)jt.children=st;else if(1<gt){for(var Q=Array(gt),J=0;J<gt;J++)Q[J]=arguments[J+2];jt.children=Q}if(Ne&&Ne.defaultProps)for(Rt in gt=Ne.defaultProps,gt)jt[Rt]===void 0&&(jt[Rt]=gt[Rt]);return{$$typeof:n,type:Ne,key:Pe,ref:Oe,props:jt,_owner:L.current}}function oe(Ne,ze){return{$$typeof:n,type:Ne.type,key:ze,ref:Ne.ref,props:Ne.props,_owner:Ne._owner}}function D(Ne){return typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===n}function ve(Ne){var ze={"=":"=0",":":"=2"};return"$"+Ne.replace(/[=:]/g,function(st){return ze[st]})}var Le=/\/+/g;function te(Ne,ze){return typeof Ne=="object"&&Ne!==null&&Ne.key!=null?ve(""+Ne.key):ze.toString(36)}function $e(Ne,ze,st,Rt,jt){var Pe=typeof Ne;(Pe==="undefined"||Pe==="boolean")&&(Ne=null);var Oe=!1;if(Ne===null)Oe=!0;else switch(Pe){case"string":case"number":Oe=!0;break;case"object":switch(Ne.$$typeof){case n:case e:Oe=!0}}if(Oe)return Oe=Ne,jt=jt(Oe),Ne=Rt===""?"."+te(Oe,0):Rt,B(jt)?(st="",Ne!=null&&(st=Ne.replace(Le,"$&/")+"/"),$e(jt,ze,st,"",function(J){return J})):jt!=null&&(D(jt)&&(jt=oe(jt,st+(!jt.key||Oe&&Oe.key===jt.key?"":(""+jt.key).replace(Le,"$&/")+"/")+Ne)),ze.push(jt)),1;if(Oe=0,Rt=Rt===""?".":Rt+":",B(Ne))for(var gt=0;gt<Ne.length;gt++){Pe=Ne[gt];var Q=Rt+te(Pe,gt);Oe+=$e(Pe,ze,st,Q,jt)}else if(Q=p(Ne),typeof Q=="function")for(Ne=Q.call(Ne),gt=0;!(Pe=Ne.next()).done;)Pe=Pe.value,Q=Rt+te(Pe,gt++),Oe+=$e(Pe,ze,st,Q,jt);else if(Pe==="object")throw ze=String(Ne),Error("Objects are not valid as a React child (found: "+(ze==="[object Object]"?"object with keys {"+Object.keys(Ne).join(", ")+"}":ze)+"). If you meant to render a collection of children, use an array instead.");return Oe}function Ue(Ne,ze,st){if(Ne==null)return Ne;var Rt=[],jt=0;return $e(Ne,Rt,"","",function(Pe){return ze.call(st,Pe,jt++)}),Rt}function Re(Ne){if(Ne._status===-1){var ze=Ne._result;ze=ze(),ze.then(function(st){(Ne._status===0||Ne._status===-1)&&(Ne._status=1,Ne._result=st)},function(st){(Ne._status===0||Ne._status===-1)&&(Ne._status=2,Ne._result=st)}),Ne._status===-1&&(Ne._status=0,Ne._result=ze)}if(Ne._status===1)return Ne._result.default;throw Ne._result}var Xe={current:null},Ye={transition:null},Ze={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Ye,ReactCurrentOwner:L};return Nr.Children={map:Ue,forEach:function(Ne,ze,st){Ue(Ne,function(){ze.apply(this,arguments)},st)},count:function(Ne){var ze=0;return Ue(Ne,function(){ze++}),ze},toArray:function(Ne){return Ue(Ne,function(ze){return ze})||[]},only:function(Ne){if(!D(Ne))throw Error("React.Children.only expected to receive a single React element child.");return Ne}},Nr.Component=I,Nr.Fragment=t,Nr.Profiler=i,Nr.PureComponent=U,Nr.StrictMode=r,Nr.Suspense=c,Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ze,Nr.cloneElement=function(Ne,ze,st){if(Ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ne+".");var Rt=v({},Ne.props),jt=Ne.key,Pe=Ne.ref,Oe=Ne._owner;if(ze!=null){if(ze.ref!==void 0&&(Pe=ze.ref,Oe=L.current),ze.key!==void 0&&(jt=""+ze.key),Ne.type&&Ne.type.defaultProps)var gt=Ne.type.defaultProps;for(Q in ze)ie.call(ze,Q)&&!w.hasOwnProperty(Q)&&(Rt[Q]=ze[Q]===void 0&&gt!==void 0?gt[Q]:ze[Q])}var Q=arguments.length-2;if(Q===1)Rt.children=st;else if(1<Q){gt=Array(Q);for(var J=0;J<Q;J++)gt[J]=arguments[J+2];Rt.children=gt}return{$$typeof:n,type:Ne.type,key:jt,ref:Pe,props:Rt,_owner:Oe}},Nr.createContext=function(Ne){return Ne={$$typeof:l,_currentValue:Ne,_currentValue2:Ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ne.Provider={$$typeof:o,_context:Ne},Ne.Consumer=Ne},Nr.createElement=O,Nr.createFactory=function(Ne){var ze=O.bind(null,Ne);return ze.type=Ne,ze},Nr.createRef=function(){return{current:null}},Nr.forwardRef=function(Ne){return{$$typeof:d,render:Ne}},Nr.isValidElement=D,Nr.lazy=function(Ne){return{$$typeof:m,_payload:{_status:-1,_result:Ne},_init:Re}},Nr.memo=function(Ne,ze){return{$$typeof:f,type:Ne,compare:ze===void 0?null:ze}},Nr.startTransition=function(Ne){var ze=Ye.transition;Ye.transition={};try{Ne()}finally{Ye.transition=ze}},Nr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Nr.useCallback=function(Ne,ze){return Xe.current.useCallback(Ne,ze)},Nr.useContext=function(Ne){return Xe.current.useContext(Ne)},Nr.useDebugValue=function(){},Nr.useDeferredValue=function(Ne){return Xe.current.useDeferredValue(Ne)},Nr.useEffect=function(Ne,ze){return Xe.current.useEffect(Ne,ze)},Nr.useId=function(){return Xe.current.useId()},Nr.useImperativeHandle=function(Ne,ze,st){return Xe.current.useImperativeHandle(Ne,ze,st)},Nr.useInsertionEffect=function(Ne,ze){return Xe.current.useInsertionEffect(Ne,ze)},Nr.useLayoutEffect=function(Ne,ze){return Xe.current.useLayoutEffect(Ne,ze)},Nr.useMemo=function(Ne,ze){return Xe.current.useMemo(Ne,ze)},Nr.useReducer=function(Ne,ze,st){return Xe.current.useReducer(Ne,ze,st)},Nr.useRef=function(Ne){return Xe.current.useRef(Ne)},Nr.useState=function(Ne){return Xe.current.useState(Ne)},Nr.useSyncExternalStore=function(Ne,ze,st){return Xe.current.useSyncExternalStore(Ne,ze,st)},Nr.useTransition=function(){return Xe.current.useTransition()},Nr.version="18.2.0",Nr}var Ck;function Lw(){return Ck||(Ck=1,T_.exports=TO()),T_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lk;function _O(){if(Lk)return hp;Lk=1;var n=Lw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(d,c,f){var m,g={},p=null,y=null;f!==void 0&&(p=""+f),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(y=c.ref);for(m in c)r.call(c,m)&&!o.hasOwnProperty(m)&&(g[m]=c[m]);if(d&&d.defaultProps)for(m in c=d.defaultProps,c)g[m]===void 0&&(g[m]=c[m]);return{$$typeof:e,type:d,key:p,ref:y,props:g,_owner:i.current}}return hp.Fragment=t,hp.jsx=l,hp.jsxs=l,hp}var Dk;function SO(){return Dk||(Dk=1,b_.exports=_O()),b_.exports}var $7=SO(),bi=Lw();const jr=bO(bi);var CE={},__={exports:{}},Za={},S_={exports:{}},A_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk;function AO(){return Nk||(Nk=1,function(n){function e(Ye,Ze){var Ne=Ye.length;Ye.push(Ze);e:for(;0<Ne;){var ze=Ne-1>>>1,st=Ye[ze];if(0<i(st,Ze))Ye[ze]=Ze,Ye[Ne]=st,Ne=ze;else break e}}function t(Ye){return Ye.length===0?null:Ye[0]}function r(Ye){if(Ye.length===0)return null;var Ze=Ye[0],Ne=Ye.pop();if(Ne!==Ze){Ye[0]=Ne;e:for(var ze=0,st=Ye.length,Rt=st>>>1;ze<Rt;){var jt=2*(ze+1)-1,Pe=Ye[jt],Oe=jt+1,gt=Ye[Oe];if(0>i(Pe,Ne))Oe<st&&0>i(gt,Pe)?(Ye[ze]=gt,Ye[Oe]=Ne,ze=Oe):(Ye[ze]=Pe,Ye[jt]=Ne,ze=jt);else if(Oe<st&&0>i(gt,Ne))Ye[ze]=gt,Ye[Oe]=Ne,ze=Oe;else break e}}return Ze}function i(Ye,Ze){var Ne=Ye.sortIndex-Ze.sortIndex;return Ne!==0?Ne:Ye.id-Ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var c=[],f=[],m=1,g=null,p=3,y=!1,v=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(Ye){for(var Ze=t(f);Ze!==null;){if(Ze.callback===null)r(f);else if(Ze.startTime<=Ye)r(f),Ze.sortIndex=Ze.expirationTime,e(c,Ze);else break;Ze=t(f)}}function B(Ye){if(A=!1,M(Ye),!v)if(t(c)!==null)v=!0,Re(ie);else{var Ze=t(f);Ze!==null&&Xe(B,Ze.startTime-Ye)}}function ie(Ye,Ze){v=!1,A&&(A=!1,P(O),O=-1),y=!0;var Ne=p;try{for(M(Ze),g=t(c);g!==null&&(!(g.expirationTime>Ze)||Ye&&!ve());){var ze=g.callback;if(typeof ze=="function"){g.callback=null,p=g.priorityLevel;var st=ze(g.expirationTime<=Ze);Ze=n.unstable_now(),typeof st=="function"?g.callback=st:g===t(c)&&r(c),M(Ze)}else r(c);g=t(c)}if(g!==null)var Rt=!0;else{var jt=t(f);jt!==null&&Xe(B,jt.startTime-Ze),Rt=!1}return Rt}finally{g=null,p=Ne,y=!1}}var L=!1,w=null,O=-1,oe=5,D=-1;function ve(){return!(n.unstable_now()-D<oe)}function Le(){if(w!==null){var Ye=n.unstable_now();D=Ye;var Ze=!0;try{Ze=w(!0,Ye)}finally{Ze?te():(L=!1,w=null)}}else L=!1}var te;if(typeof U=="function")te=function(){U(Le)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Ue=$e.port2;$e.port1.onmessage=Le,te=function(){Ue.postMessage(null)}}else te=function(){I(Le,0)};function Re(Ye){w=Ye,L||(L=!0,te())}function Xe(Ye,Ze){O=I(function(){Ye(n.unstable_now())},Ze)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ye){Ye.callback=null},n.unstable_continueExecution=function(){v||y||(v=!0,Re(ie))},n.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Ye?Math.floor(1e3/Ye):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Ye){switch(p){case 1:case 2:case 3:var Ze=3;break;default:Ze=p}var Ne=p;p=Ze;try{return Ye()}finally{p=Ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Ye,Ze){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var Ne=p;p=Ye;try{return Ze()}finally{p=Ne}},n.unstable_scheduleCallback=function(Ye,Ze,Ne){var ze=n.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ze+Ne:ze):Ne=ze,Ye){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Ne+st,Ye={id:m++,callback:Ze,priorityLevel:Ye,startTime:Ne,expirationTime:st,sortIndex:-1},Ne>ze?(Ye.sortIndex=Ne,e(f,Ye),t(c)===null&&Ye===t(f)&&(A?(P(O),O=-1):A=!0,Xe(B,Ne-ze))):(Ye.sortIndex=st,e(c,Ye),v||y||(v=!0,Re(ie))),Ye},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(Ye){var Ze=p;return function(){var Ne=p;p=Ze;try{return Ye.apply(this,arguments)}finally{p=Ne}}}}(A_)),A_}var Pk;function wO(){return Pk||(Pk=1,S_.exports=AO()),S_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function IO(){if(Mk)return Za;Mk=1;var n=Lw(),e=wO();function t(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,E=1;E<arguments.length;E++)h+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(u,h){l(u,h),l(u+"Capture",h)}function l(u,h){for(i[u]=h,u=0;u<h.length;u++)r.add(h[u])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function p(u){return c.call(g,u)?!0:c.call(m,u)?!1:f.test(u)?g[u]=!0:(m[u]=!0,!1)}function y(u,h,E,R){if(E!==null&&E.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return R?!1:E!==null?!E.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function v(u,h,E,R){if(h===null||typeof h>"u"||y(u,h,E,R))return!0;if(R)return!1;if(E!==null)switch(E.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function A(u,h,E,R,q,ue,De){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=R,this.attributeNamespace=q,this.mustUseProperty=E,this.propertyName=u,this.type=h,this.sanitizeURL=ue,this.removeEmptyString=De}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){I[u]=new A(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var h=u[0];I[h]=new A(h,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){I[u]=new A(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){I[u]=new A(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){I[u]=new A(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){I[u]=new A(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){I[u]=new A(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){I[u]=new A(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){I[u]=new A(u,5,!1,u.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function U(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var h=u.replace(P,U);I[h]=new A(h,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var h=u.replace(P,U);I[h]=new A(h,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var h=u.replace(P,U);I[h]=new A(h,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){I[u]=new A(u,1,!1,u.toLowerCase(),null,!1,!1)}),I.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){I[u]=new A(u,1,!1,u.toLowerCase(),null,!0,!0)});function M(u,h,E,R){var q=I.hasOwnProperty(h)?I[h]:null;(q!==null?q.type!==0:R||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,E,q,R)&&(E=null),R||q===null?p(h)&&(E===null?u.removeAttribute(h):u.setAttribute(h,""+E)):q.mustUseProperty?u[q.propertyName]=E===null?q.type===3?!1:"":E:(h=q.attributeName,R=q.attributeNamespace,E===null?u.removeAttribute(h):(q=q.type,E=q===3||q===4&&E===!0?"":""+E,R?u.setAttributeNS(R,h,E):u.setAttribute(h,E))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),L=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),ve=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),Ye=Symbol.iterator;function Ze(u){return u===null||typeof u!="object"?null:(u=Ye&&u[Ye]||u["@@iterator"],typeof u=="function"?u:null)}var Ne=Object.assign,ze;function st(u){if(ze===void 0)try{throw Error()}catch(E){var h=E.stack.trim().match(/\n( *(at )?)/);ze=h&&h[1]||""}return`
`+ze+u}var Rt=!1;function jt(u,h){if(!u||Rt)return"";Rt=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ut){var R=Ut}Reflect.construct(u,[],h)}else{try{h.call()}catch(Ut){R=Ut}u.call(h.prototype)}else{try{throw Error()}catch(Ut){R=Ut}u()}}catch(Ut){if(Ut&&R&&typeof Ut.stack=="string"){for(var q=Ut.stack.split(`
`),ue=R.stack.split(`
`),De=q.length-1,Qe=ue.length-1;1<=De&&0<=Qe&&q[De]!==ue[Qe];)Qe--;for(;1<=De&&0<=Qe;De--,Qe--)if(q[De]!==ue[Qe]){if(De!==1||Qe!==1)do if(De--,Qe--,0>Qe||q[De]!==ue[Qe]){var lt=`
`+q[De].replace(" at new "," at ");return u.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",u.displayName)),lt}while(1<=De&&0<=Qe);break}}}finally{Rt=!1,Error.prepareStackTrace=E}return(u=u?u.displayName||u.name:"")?st(u):""}function Pe(u){switch(u.tag){case 5:return st(u.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 2:case 15:return u=jt(u.type,!1),u;case 11:return u=jt(u.type.render,!1),u;case 1:return u=jt(u.type,!0),u;default:return""}}function Oe(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case w:return"Fragment";case L:return"Portal";case oe:return"Profiler";case O:return"StrictMode";case te:return"Suspense";case $e:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case ve:return(u.displayName||"Context")+".Consumer";case D:return(u._context.displayName||"Context")+".Provider";case Le:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Ue:return h=u.displayName||null,h!==null?h:Oe(u.type)||"Memo";case Re:h=u._payload,u=u._init;try{return Oe(u(h))}catch{}}return null}function gt(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(h);case 8:return h===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Q(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function J(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function F(u){var h=J(u)?"checked":"value",E=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),R=""+u[h];if(!u.hasOwnProperty(h)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var q=E.get,ue=E.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return q.call(this)},set:function(De){R=""+De,ue.call(this,De)}}),Object.defineProperty(u,h,{enumerable:E.enumerable}),{getValue:function(){return R},setValue:function(De){R=""+De},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function K(u){u._valueTracker||(u._valueTracker=F(u))}function Ee(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var E=h.getValue(),R="";return u&&(R=J(u)?u.checked?"true":"false":u.value),u=R,u!==E?(h.setValue(u),!0):!1}function ce(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function He(u,h){var E=h.checked;return Ne({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??u._wrapperState.initialChecked})}function ut(u,h){var E=h.defaultValue==null?"":h.defaultValue,R=h.checked!=null?h.checked:h.defaultChecked;E=Q(h.value!=null?h.value:E),u._wrapperState={initialChecked:R,initialValue:E,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Ve(u,h){h=h.checked,h!=null&&M(u,"checked",h,!1)}function Je(u,h){Ve(u,h);var E=Q(h.value),R=h.type;if(E!=null)R==="number"?(E===0&&u.value===""||u.value!=E)&&(u.value=""+E):u.value!==""+E&&(u.value=""+E);else if(R==="submit"||R==="reset"){u.removeAttribute("value");return}h.hasOwnProperty("value")?it(u,h.type,E):h.hasOwnProperty("defaultValue")&&it(u,h.type,Q(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(u.defaultChecked=!!h.defaultChecked)}function Ke(u,h,E){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var R=h.type;if(!(R!=="submit"&&R!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+u._wrapperState.initialValue,E||h===u.value||(u.value=h),u.defaultValue=h}E=u.name,E!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,E!==""&&(u.name=E)}function it(u,h,E){(h!=="number"||ce(u.ownerDocument)!==u)&&(E==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+E&&(u.defaultValue=""+E))}var Et=Array.isArray;function ot(u,h,E,R){if(u=u.options,h){h={};for(var q=0;q<E.length;q++)h["$"+E[q]]=!0;for(E=0;E<u.length;E++)q=h.hasOwnProperty("$"+u[E].value),u[E].selected!==q&&(u[E].selected=q),q&&R&&(u[E].defaultSelected=!0)}else{for(E=""+Q(E),h=null,q=0;q<u.length;q++){if(u[q].value===E){u[q].selected=!0,R&&(u[q].defaultSelected=!0);return}h!==null||u[q].disabled||(h=u[q])}h!==null&&(h.selected=!0)}}function xt(u,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},h,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function En(u,h){var E=h.value;if(E==null){if(E=h.children,h=h.defaultValue,E!=null){if(h!=null)throw Error(t(92));if(Et(E)){if(1<E.length)throw Error(t(93));E=E[0]}h=E}h==null&&(h=""),E=h}u._wrapperState={initialValue:Q(E)}}function tn(u,h){var E=Q(h.value),R=Q(h.defaultValue);E!=null&&(E=""+E,E!==u.value&&(u.value=E),h.defaultValue==null&&u.defaultValue!==E&&(u.defaultValue=E)),R!=null&&(u.defaultValue=""+R)}function fn(u){var h=u.textContent;h===u._wrapperState.initialValue&&h!==""&&h!==null&&(u.value=h)}function Ht(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nr(u,h){return u==null||u==="http://www.w3.org/1999/xhtml"?Ht(h):u==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var vr,Fr=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,E,R,q){MSApp.execUnsafeLocalFunction(function(){return u(h,E,R,q)})}:u}(function(u,h){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=h;else{for(vr=vr||document.createElement("div"),vr.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=vr.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;h.firstChild;)u.appendChild(h.firstChild)}});function Lr(u,h){if(h){var E=u.firstChild;if(E&&E===u.lastChild&&E.nodeType===3){E.nodeValue=h;return}}u.textContent=h}var mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ki=["Webkit","ms","Moz","O"];Object.keys(mr).forEach(function(u){ki.forEach(function(h){h=h+u.charAt(0).toUpperCase()+u.substring(1),mr[h]=mr[u]})});function $t(u,h,E){return h==null||typeof h=="boolean"||h===""?"":E||typeof h!="number"||h===0||mr.hasOwnProperty(u)&&mr[u]?(""+h).trim():h+"px"}function Bt(u,h){u=u.style;for(var E in h)if(h.hasOwnProperty(E)){var R=E.indexOf("--")===0,q=$t(E,h[E],R);E==="float"&&(E="cssFloat"),R?u.setProperty(E,q):u[E]=q}}var Pt=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(u,h){if(h){if(Pt[u]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,u));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function an(u,h){if(u.indexOf("-")===-1)return typeof h.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=null;function un(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var hn=null,Ot=null,Mt=null;function dn(u){if(u=ku(u)){if(typeof hn!="function")throw Error(t(280));var h=u.stateNode;h&&(h=rh(h),hn(u.stateNode,u.type,h))}}function ar(u){Ot?Mt?Mt.push(u):Mt=[u]:Ot=u}function Xt(){if(Ot){var u=Ot,h=Mt;if(Mt=Ot=null,dn(u),h)for(u=0;u<h.length;u++)dn(h[u])}}function Pn(u,h){return u(h)}function Jn(){}var $n=!1;function Yn(u,h,E){if($n)return u(h,E);$n=!0;try{return Pn(u,h,E)}finally{$n=!1,(Ot!==null||Mt!==null)&&(Jn(),Xt())}}function gr(u,h){var E=u.stateNode;if(E===null)return null;var R=rh(E);if(R===null)return null;E=R[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(u=u.type,R=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!R;break e;default:u=!1}if(u)return null;if(E&&typeof E!="function")throw Error(t(231,h,typeof E));return E}var Cn=!1;if(d)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{Cn=!1}function vt(u,h,E,R,q,ue,De,Qe,lt){var Ut=Array.prototype.slice.call(arguments,3);try{h.apply(E,Ut)}catch(yn){this.onError(yn)}}var on=!1,pn=null,Hn=!1,yr=null,Ur={onError:function(u){on=!0,pn=u}};function _r(u,h,E,R,q,ue,De,Qe,lt){on=!1,pn=null,vt.apply(Ur,arguments)}function Wr(u,h,E,R,q,ue,De,Qe,lt){if(_r.apply(this,arguments),on){if(on){var Ut=pn;on=!1,pn=null}else throw Error(t(198));Hn||(Hn=!0,yr=Ut)}}function Zr(u){var h=u,E=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(E=h.return),u=h.return;while(u)}return h.tag===3?E:null}function ri(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function Ua(u){if(Zr(u)!==u)throw Error(t(188))}function za(u){var h=u.alternate;if(!h){if(h=Zr(u),h===null)throw Error(t(188));return h!==u?null:u}for(var E=u,R=h;;){var q=E.return;if(q===null)break;var ue=q.alternate;if(ue===null){if(R=q.return,R!==null){E=R;continue}break}if(q.child===ue.child){for(ue=q.child;ue;){if(ue===E)return Ua(q),u;if(ue===R)return Ua(q),h;ue=ue.sibling}throw Error(t(188))}if(E.return!==R.return)E=q,R=ue;else{for(var De=!1,Qe=q.child;Qe;){if(Qe===E){De=!0,E=q,R=ue;break}if(Qe===R){De=!0,R=q,E=ue;break}Qe=Qe.sibling}if(!De){for(Qe=ue.child;Qe;){if(Qe===E){De=!0,E=ue,R=q;break}if(Qe===R){De=!0,R=ue,E=q;break}Qe=Qe.sibling}if(!De)throw Error(t(189))}}if(E.alternate!==R)throw Error(t(190))}if(E.tag!==3)throw Error(t(188));return E.stateNode.current===E?u:h}function ks(u){return u=za(u),u!==null?Ui(u):null}function Ui(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=Ui(u);if(h!==null)return h;u=u.sibling}return null}var na=e.unstable_scheduleCallback,ji=e.unstable_cancelCallback,wf=e.unstable_shouldYield,If=e.unstable_requestPaint,mi=e.unstable_now,kf=e.unstable_getCurrentPriorityLevel,Io=e.unstable_ImmediatePriority,fu=e.unstable_UserBlockingPriority,Kt=e.unstable_NormalPriority,An=e.unstable_LowPriority,Gn=e.unstable_IdlePriority,Er=null,lr=null;function Ri(u){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Er,u,void 0,(u.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Ar,kr=Math.log,Rr=Math.LN2;function Ar(u){return u>>>=0,u===0?32:31-(kr(u)/Rr|0)|0}var Mr=64,Ba=4194304;function xi(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function ss(u,h){var E=u.pendingLanes;if(E===0)return 0;var R=0,q=u.suspendedLanes,ue=u.pingedLanes,De=E&268435455;if(De!==0){var Qe=De&~q;Qe!==0?R=xi(Qe):(ue&=De,ue!==0&&(R=xi(ue)))}else De=E&~q,De!==0?R=xi(De):ue!==0&&(R=xi(ue));if(R===0)return 0;if(h!==0&&h!==R&&(h&q)===0&&(q=R&-R,ue=h&-h,q>=ue||q===16&&(ue&4194240)!==0))return h;if((R&4)!==0&&(R|=E&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=R;0<h;)E=31-Sr(h),q=1<<E,R|=u[E],h&=~q;return R}function ko(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rf(u,h){for(var E=u.suspendedLanes,R=u.pingedLanes,q=u.expirationTimes,ue=u.pendingLanes;0<ue;){var De=31-Sr(ue),Qe=1<<De,lt=q[De];lt===-1?((Qe&E)===0||(Qe&R)!==0)&&(q[De]=ko(Qe,h)):lt<=h&&(u.expiredLanes|=Qe),ue&=~Qe}}function Ro(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Ra(){var u=Mr;return Mr<<=1,(Mr&4194240)===0&&(Mr=64),u}function Rs(u){for(var h=[],E=0;31>E;E++)h.push(u);return h}function xo(u,h,E){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-Sr(h),u[h]=E}function Ka(u,h){var E=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var R=u.eventTimes;for(u=u.expirationTimes;0<E;){var q=31-Sr(E),ue=1<<q;h[q]=0,R[q]=-1,u[q]=-1,E&=~ue}}function hu(u,h){var E=u.entangledLanes|=h;for(u=u.entanglements;E;){var R=31-Sr(E),q=1<<R;q&h|u[R]&h&&(u[R]|=h),E&=~q}}var Or=0;function mu(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var gu,pu,Fd,vu,Ud,qr=!1,xs=[],qi=null,Ta=null,os=null,Hi=new Map,Co=new Map,zi=[],ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xf(u,h){switch(u){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Hi.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(h.pointerId)}}function Tl(u,h,E,R,q,ue){return u===null||u.nativeEvent!==ue?(u={blockedOn:h,domEventName:E,eventSystemFlags:R,nativeEvent:ue,targetContainers:[q]},h!==null&&(h=ku(h),h!==null&&pu(h)),u):(u.eventSystemFlags|=R,h=u.targetContainers,q!==null&&h.indexOf(q)===-1&&h.push(q),u)}function sy(u,h,E,R,q){switch(h){case"focusin":return qi=Tl(qi,u,h,E,R,q),!0;case"dragenter":return Ta=Tl(Ta,u,h,E,R,q),!0;case"mouseover":return os=Tl(os,u,h,E,R,q),!0;case"pointerover":var ue=q.pointerId;return Hi.set(ue,Tl(Hi.get(ue)||null,u,h,E,R,q)),!0;case"gotpointercapture":return ue=q.pointerId,Co.set(ue,Tl(Co.get(ue)||null,u,h,E,R,q)),!0}return!1}function zd(u){var h=Dl(u.target);if(h!==null){var E=Zr(h);if(E!==null){if(h=E.tag,h===13){if(h=ri(E),h!==null){u.blockedOn=h,Ud(u.priority,function(){Fd(E)});return}}else if(h===3&&E.stateNode.current.memoizedState.isDehydrated){u.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}u.blockedOn=null}function _l(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var E=wl(u.domEventName,u.eventSystemFlags,h[0],u.nativeEvent);if(E===null){E=u.nativeEvent;var R=new E.constructor(E.type,E);sn=R,E.target.dispatchEvent(R),sn=null}else return h=ku(E),h!==null&&pu(h),u.blockedOn=E,!1;h.shift()}return!0}function oy(u,h,E){_l(u)&&E.delete(h)}function ly(){qr=!1,qi!==null&&_l(qi)&&(qi=null),Ta!==null&&_l(Ta)&&(Ta=null),os!==null&&_l(os)&&(os=null),Hi.forEach(oy),Co.forEach(oy)}function Bd(u,h){u.blockedOn===h&&(u.blockedOn=null,qr||(qr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ly)))}function Sl(u){function h(q){return Bd(q,u)}if(0<xs.length){Bd(xs[0],u);for(var E=1;E<xs.length;E++){var R=xs[E];R.blockedOn===u&&(R.blockedOn=null)}}for(qi!==null&&Bd(qi,u),Ta!==null&&Bd(Ta,u),os!==null&&Bd(os,u),Hi.forEach(h),Co.forEach(h),E=0;E<zi.length;E++)R=zi[E],R.blockedOn===u&&(R.blockedOn=null);for(;0<zi.length&&(E=zi[0],E.blockedOn===null);)zd(E),E.blockedOn===null&&zi.shift()}var Al=B.ReactCurrentBatchConfig,Cf=!0;function VT(u,h,E,R){var q=Or,ue=Al.transition;Al.transition=null;try{Or=1,Lf(u,h,E,R)}finally{Or=q,Al.transition=ue}}function uy(u,h,E,R){var q=Or,ue=Al.transition;Al.transition=null;try{Or=4,Lf(u,h,E,R)}finally{Or=q,Al.transition=ue}}function Lf(u,h,E,R){if(Cf){var q=wl(u,h,E,R);if(q===null)Wd(u,h,R,$d,E),xf(u,R);else if(sy(q,u,h,E,R))R.stopPropagation();else if(xf(u,R),h&4&&-1<ay.indexOf(u)){for(;q!==null;){var ue=ku(q);if(ue!==null&&gu(ue),ue=wl(u,h,E,R),ue===null&&Wd(u,h,R,$d,E),ue===q)break;q=ue}q!==null&&R.stopPropagation()}else Wd(u,h,R,null,E)}}var $d=null;function wl(u,h,E,R){if($d=null,u=un(R),u=Dl(u),u!==null)if(h=Zr(u),h===null)u=null;else if(E=h.tag,E===13){if(u=ri(h),u!==null)return u;u=null}else if(E===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null);return $d=u,null}function og(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kf()){case Io:return 1;case fu:return 4;case Kt:case An:return 16;case Gn:return 536870912;default:return 16}default:return 16}}var ls=null,Qr=null,Il=null;function ra(){if(Il)return Il;var u,h=Qr,E=h.length,R,q="value"in ls?ls.value:ls.textContent,ue=q.length;for(u=0;u<E&&h[u]===q[u];u++);var De=E-u;for(R=1;R<=De&&h[E-R]===q[ue-R];R++);return Il=q.slice(u,1<R?1-R:void 0)}function yu(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function jd(){return!0}function lg(){return!1}function xa(u){function h(E,R,q,ue,De){this._reactName=E,this._targetInst=q,this.type=R,this.nativeEvent=ue,this.target=De,this.currentTarget=null;for(var Qe in u)u.hasOwnProperty(Qe)&&(E=u[Qe],this[Qe]=E?E(ue):ue[Qe]);return this.isDefaultPrevented=(ue.defaultPrevented!=null?ue.defaultPrevented:ue.returnValue===!1)?jd:lg,this.isPropagationStopped=lg,this}return Ne(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=jd)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=jd)},persist:function(){},isPersistent:jd}),h}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Df=xa(kl),Rl=Ne({},kl,{view:0,detail:0}),dy=xa(Rl),Nf,ug,qd,Pf=Ne({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ff,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==qd&&(qd&&u.type==="mousemove"?(Nf=u.screenX-qd.screenX,ug=u.screenY-qd.screenY):ug=Nf=0,qd=u),Nf)},movementY:function(u){return"movementY"in u?u.movementY:ug}}),Mf=xa(Pf),KT=Ne({},Pf,{dataTransfer:0}),cy=xa(KT),fy=Ne({},Rl,{relatedTarget:0}),Of=xa(fy),hy=Ne({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),YT=xa(hy),my=Ne({},kl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),gy=xa(my),py=Ne({},kl,{data:0}),dg=xa(py),cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WT(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=vy[u])?!!h[u]:!1}function Ff(){return WT}var yy=Ne({},Rl,{key:function(u){if(u.key){var h=cg[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=yu(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?fg[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ff,charCode:function(u){return u.type==="keypress"?yu(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?yu(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Ey=xa(yy),Eu=Ne({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),by=xa(Eu),Ty=Ne({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ff}),QT=xa(Ty),_y=Ne({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),XT=xa(_y),ZT=Ne({},Pf,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),JT=xa(ZT),hg=[9,13,27,32],mg=d&&"CompositionEvent"in window,bu=null;d&&"documentMode"in document&&(bu=document.documentMode);var e_=d&&"TextEvent"in window&&!bu,Tu=d&&(!mg||bu&&8<bu&&11>=bu),Uf=" ",gg=!1;function Hd(u,h){switch(u){case"keyup":return hg.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var _u=!1;function Sy(u,h){switch(u){case"compositionend":return pg(h);case"keypress":return h.which!==32?null:(gg=!0,Uf);case"textInput":return u=h.data,u===Uf&&gg?null:u;default:return null}}function t_(u,h){if(_u)return u==="compositionend"||!mg&&Hd(u,h)?(u=ra(),Il=Qr=ls=null,_u=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Tu&&h.locale!=="ko"?null:h.data;default:return null}}var Ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!Ay[u.type]:h==="textarea"}function wy(u,h,E,R){ar(R),h=Qd(h,"onChange"),0<h.length&&(E=new Df("onChange","change",null,E,R),u.push({event:E,listeners:h}))}var Su=null,Gd=null;function n_(u){Ny(u,0)}function Bf(u){var h=Ru(u);if(Ee(h))return u}function Iy(u,h){if(u==="change")return h}var $f=!1;if(d){var jf;if(d){var vg="oninput"in document;if(!vg){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),vg=typeof yg.oninput=="function"}jf=vg}else jf=!1;$f=jf&&(!document.documentMode||9<document.documentMode)}function Eg(){Su&&(Su.detachEvent("onpropertychange",qf),Gd=Su=null)}function qf(u){if(u.propertyName==="value"&&Bf(Gd)){var h=[];wy(h,Gd,u,un(u)),Yn(n_,h)}}function bg(u,h,E){u==="focusin"?(Eg(),Su=h,Gd=E,Su.attachEvent("onpropertychange",qf)):u==="focusout"&&Eg()}function r_(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Bf(Gd)}function ky(u,h){if(u==="click")return Bf(h)}function i_(u,h){if(u==="input"||u==="change")return Bf(h)}function Ry(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var us=typeof Object.is=="function"?Object.is:Ry;function Cs(u,h){if(us(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var E=Object.keys(u),R=Object.keys(h);if(E.length!==R.length)return!1;for(R=0;R<E.length;R++){var q=E[R];if(!c.call(h,q)||!us(u[q],h[q]))return!1}return!0}function Tg(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function _g(u,h){var E=Tg(u);u=0;for(var R;E;){if(E.nodeType===3){if(R=u+E.textContent.length,u<=h&&R>=h)return{node:E,offset:h-u};u=R}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Tg(E)}}function Sg(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?Sg(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function Ag(){for(var u=window,h=ce();h instanceof u.HTMLIFrameElement;){try{var E=typeof h.contentWindow.location.href=="string"}catch{E=!1}if(E)u=h.contentWindow;else break;h=ce(u.document)}return h}function Hf(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}function a_(u){var h=Ag(),E=u.focusedElem,R=u.selectionRange;if(h!==E&&E&&E.ownerDocument&&Sg(E.ownerDocument.documentElement,E)){if(R!==null&&Hf(E)){if(h=R.start,u=R.end,u===void 0&&(u=h),"selectionStart"in E)E.selectionStart=h,E.selectionEnd=Math.min(u,E.value.length);else if(u=(h=E.ownerDocument||document)&&h.defaultView||window,u.getSelection){u=u.getSelection();var q=E.textContent.length,ue=Math.min(R.start,q);R=R.end===void 0?ue:Math.min(R.end,q),!u.extend&&ue>R&&(q=R,R=ue,ue=q),q=_g(E,ue);var De=_g(E,R);q&&De&&(u.rangeCount!==1||u.anchorNode!==q.node||u.anchorOffset!==q.offset||u.focusNode!==De.node||u.focusOffset!==De.offset)&&(h=h.createRange(),h.setStart(q.node,q.offset),u.removeAllRanges(),ue>R?(u.addRange(h),u.extend(De.node,De.offset)):(h.setEnd(De.node,De.offset),u.addRange(h)))}}for(h=[],u=E;u=u.parentNode;)u.nodeType===1&&h.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<h.length;E++)u=h[E],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var xy=d&&"documentMode"in document&&11>=document.documentMode,Au=null,wg=null,wu=null,Gf=!1;function Ig(u,h,E){var R=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Gf||Au==null||Au!==ce(R)||(R=Au,"selectionStart"in R&&Hf(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),wu&&Cs(wu,R)||(wu=R,R=Qd(wg,"onSelect"),0<R.length&&(h=new Df("onSelect","select",null,h,E),u.push({event:h,listeners:R}),h.target=Au)))}function Vf(u,h){var E={};return E[u.toLowerCase()]=h.toLowerCase(),E["Webkit"+u]="webkit"+h,E["Moz"+u]="moz"+h,E}var Ya={animationend:Vf("Animation","AnimationEnd"),animationiteration:Vf("Animation","AnimationIteration"),animationstart:Vf("Animation","AnimationStart"),transitionend:Vf("Transition","TransitionEnd")},ua={},xl={};d&&(xl=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function ds(u){if(ua[u])return ua[u];if(!Ya[u])return u;var h=Ya[u],E;for(E in h)if(h.hasOwnProperty(E)&&E in xl)return ua[u]=h[E];return u}var Cy=ds("animationend"),kg=ds("animationiteration"),Ly=ds("animationstart"),Zs=ds("transitionend"),Dy=new Map,Kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(u,h){Dy.set(u,h),o(h,[u])}for(var Vd=0;Vd<Kf.length;Vd++){var Cl=Kf[Vd],Rg=Cl.toLowerCase(),Yf=Cl[0].toUpperCase()+Cl.slice(1);Js(Rg,"on"+Yf)}Js(Cy,"onAnimationEnd"),Js(kg,"onAnimationIteration"),Js(Ly,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(Zs,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function Kd(u,h,E){var R=u.type||"unknown-event";u.currentTarget=E,Wr(R,h,void 0,u),u.currentTarget=null}function Ny(u,h){h=(h&4)!==0;for(var E=0;E<u.length;E++){var R=u[E],q=R.event;R=R.listeners;e:{var ue=void 0;if(h)for(var De=R.length-1;0<=De;De--){var Qe=R[De],lt=Qe.instance,Ut=Qe.currentTarget;if(Qe=Qe.listener,lt!==ue&&q.isPropagationStopped())break e;Kd(q,Qe,Ut),ue=lt}else for(De=0;De<R.length;De++){if(Qe=R[De],lt=Qe.instance,Ut=Qe.currentTarget,Qe=Qe.listener,lt!==ue&&q.isPropagationStopped())break e;Kd(q,Qe,Ut),ue=lt}}}if(Hn)throw u=yr,Hn=!1,yr=null,u}function ii(u,h){var E=h[Dg];E===void 0&&(E=h[Dg]=new Set);var R=u+"__bubble";E.has(R)||(xg(h,u,2,!1),E.add(R))}function Qf(u,h,E){var R=0;h&&(R|=4),xg(E,u,R,h)}var Xf="_reactListening"+Math.random().toString(36).slice(2);function Yd(u){if(!u[Xf]){u[Xf]=!0,r.forEach(function(E){E!=="selectionchange"&&(Wf.has(E)||Qf(E,!1,u),Qf(E,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[Xf]||(h[Xf]=!0,Qf("selectionchange",!1,h))}}function xg(u,h,E,R){switch(og(h)){case 1:var q=VT;break;case 4:q=uy;break;default:q=Lf}E=q.bind(null,h,E,u),q=void 0,!Cn||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(q=!0),R?q!==void 0?u.addEventListener(h,E,{capture:!0,passive:q}):u.addEventListener(h,E,!0):q!==void 0?u.addEventListener(h,E,{passive:q}):u.addEventListener(h,E,!1)}function Wd(u,h,E,R,q){var ue=R;if((h&1)===0&&(h&2)===0&&R!==null)e:for(;;){if(R===null)return;var De=R.tag;if(De===3||De===4){var Qe=R.stateNode.containerInfo;if(Qe===q||Qe.nodeType===8&&Qe.parentNode===q)break;if(De===4)for(De=R.return;De!==null;){var lt=De.tag;if((lt===3||lt===4)&&(lt=De.stateNode.containerInfo,lt===q||lt.nodeType===8&&lt.parentNode===q))return;De=De.return}for(;Qe!==null;){if(De=Dl(Qe),De===null)return;if(lt=De.tag,lt===5||lt===6){R=ue=De;continue e}Qe=Qe.parentNode}}R=R.return}Yn(function(){var Ut=ue,yn=un(E),_n=[];e:{var vn=Dy.get(u);if(vn!==void 0){var zn=Df,Wn=u;switch(u){case"keypress":if(yu(E)===0)break e;case"keydown":case"keyup":zn=Ey;break;case"focusin":Wn="focus",zn=Of;break;case"focusout":Wn="blur",zn=Of;break;case"beforeblur":case"afterblur":zn=Of;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zn=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zn=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zn=QT;break;case Cy:case kg:case Ly:zn=YT;break;case Zs:zn=XT;break;case"scroll":zn=dy;break;case"wheel":zn=JT;break;case"copy":case"cut":case"paste":zn=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zn=by}var Xn=(h&4)!==0,$i=!Xn&&u==="scroll",wt=Xn?vn!==null?vn+"Capture":null:vn;Xn=[];for(var dt=Ut,Dt;dt!==null;){Dt=dt;var Rn=Dt.stateNode;if(Dt.tag===5&&Rn!==null&&(Dt=Rn,wt!==null&&(Rn=gr(dt,wt),Rn!=null&&Xn.push(Ll(dt,Rn,Dt)))),$i)break;dt=dt.return}0<Xn.length&&(vn=new zn(vn,Wn,null,E,yn),_n.push({event:vn,listeners:Xn}))}}if((h&7)===0){e:{if(vn=u==="mouseover"||u==="pointerover",zn=u==="mouseout"||u==="pointerout",vn&&E!==sn&&(Wn=E.relatedTarget||E.fromElement)&&(Dl(Wn)||Wn[Ls]))break e;if((zn||vn)&&(vn=yn.window===yn?yn:(vn=yn.ownerDocument)?vn.defaultView||vn.parentWindow:window,zn?(Wn=E.relatedTarget||E.toElement,zn=Ut,Wn=Wn?Dl(Wn):null,Wn!==null&&($i=Zr(Wn),Wn!==$i||Wn.tag!==5&&Wn.tag!==6)&&(Wn=null)):(zn=null,Wn=Ut),zn!==Wn)){if(Xn=Mf,Rn="onMouseLeave",wt="onMouseEnter",dt="mouse",(u==="pointerout"||u==="pointerover")&&(Xn=by,Rn="onPointerLeave",wt="onPointerEnter",dt="pointer"),$i=zn==null?vn:Ru(zn),Dt=Wn==null?vn:Ru(Wn),vn=new Xn(Rn,dt+"leave",zn,E,yn),vn.target=$i,vn.relatedTarget=Dt,Rn=null,Dl(yn)===Ut&&(Xn=new Xn(wt,dt+"enter",Wn,E,yn),Xn.target=Dt,Xn.relatedTarget=$i,Rn=Xn),$i=Rn,zn&&Wn)t:{for(Xn=zn,wt=Wn,dt=0,Dt=Xn;Dt;Dt=Iu(Dt))dt++;for(Dt=0,Rn=wt;Rn;Rn=Iu(Rn))Dt++;for(;0<dt-Dt;)Xn=Iu(Xn),dt--;for(;0<Dt-dt;)wt=Iu(wt),Dt--;for(;dt--;){if(Xn===wt||wt!==null&&Xn===wt.alternate)break t;Xn=Iu(Xn),wt=Iu(wt)}Xn=null}else Xn=null;zn!==null&&Xd(_n,vn,zn,Xn,!1),Wn!==null&&$i!==null&&Xd(_n,$i,Wn,Xn,!0)}}e:{if(vn=Ut?Ru(Ut):window,zn=vn.nodeName&&vn.nodeName.toLowerCase(),zn==="select"||zn==="input"&&vn.type==="file")var er=Iy;else if(zf(vn))if($f)er=i_;else{er=r_;var ur=bg}else(zn=vn.nodeName)&&zn.toLowerCase()==="input"&&(vn.type==="checkbox"||vn.type==="radio")&&(er=ky);if(er&&(er=er(u,Ut))){wy(_n,er,E,yn);break e}ur&&ur(u,vn,Ut),u==="focusout"&&(ur=vn._wrapperState)&&ur.controlled&&vn.type==="number"&&it(vn,"number",vn.value)}switch(ur=Ut?Ru(Ut):window,u){case"focusin":(zf(ur)||ur.contentEditable==="true")&&(Au=ur,wg=Ut,wu=null);break;case"focusout":wu=wg=Au=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,Ig(_n,E,yn);break;case"selectionchange":if(xy)break;case"keydown":case"keyup":Ig(_n,E,yn)}var dr;if(mg)e:{switch(u){case"compositionstart":var cr="onCompositionStart";break e;case"compositionend":cr="onCompositionEnd";break e;case"compositionupdate":cr="onCompositionUpdate";break e}cr=void 0}else _u?Hd(u,E)&&(cr="onCompositionEnd"):u==="keydown"&&E.keyCode===229&&(cr="onCompositionStart");cr&&(Tu&&E.locale!=="ko"&&(_u||cr!=="onCompositionStart"?cr==="onCompositionEnd"&&_u&&(dr=ra()):(ls=yn,Qr="value"in ls?ls.value:ls.textContent,_u=!0)),ur=Qd(Ut,cr),0<ur.length&&(cr=new dg(cr,u,null,E,yn),_n.push({event:cr,listeners:ur}),dr?cr.data=dr:(dr=pg(E),dr!==null&&(cr.data=dr)))),(dr=e_?Sy(u,E):t_(u,E))&&(Ut=Qd(Ut,"onBeforeInput"),0<Ut.length&&(yn=new dg("onBeforeInput","beforeinput",null,E,yn),_n.push({event:yn,listeners:Ut}),yn.data=dr))}Ny(_n,h)})}function Ll(u,h,E){return{instance:u,listener:h,currentTarget:E}}function Qd(u,h){for(var E=h+"Capture",R=[];u!==null;){var q=u,ue=q.stateNode;q.tag===5&&ue!==null&&(q=ue,ue=gr(u,E),ue!=null&&R.unshift(Ll(u,ue,q)),ue=gr(u,h),ue!=null&&R.push(Ll(u,ue,q))),u=u.return}return R}function Iu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Xd(u,h,E,R,q){for(var ue=h._reactName,De=[];E!==null&&E!==R;){var Qe=E,lt=Qe.alternate,Ut=Qe.stateNode;if(lt!==null&&lt===R)break;Qe.tag===5&&Ut!==null&&(Qe=Ut,q?(lt=gr(E,ue),lt!=null&&De.unshift(Ll(E,lt,Qe))):q||(lt=gr(E,ue),lt!=null&&De.push(Ll(E,lt,Qe)))),E=E.return}De.length!==0&&u.push({event:h,listeners:De})}var Py=/\r\n?/g,My=/\u0000|\uFFFD/g;function Oy(u){return(typeof u=="string"?u:""+u).replace(Py,`
`).replace(My,"")}function Zd(u,h,E){if(h=Oy(h),Oy(u)!==h&&E)throw Error(t(425))}function Zf(){}var Jf=null,Cg=null;function eh(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Lg=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,Uy=typeof Promise=="function"?Promise:void 0,zy=typeof queueMicrotask=="function"?queueMicrotask:typeof Uy<"u"?function(u){return Uy.resolve(null).then(u).catch(s_)}:Lg;function s_(u){setTimeout(function(){throw u})}function th(u,h){var E=h,R=0;do{var q=E.nextSibling;if(u.removeChild(E),q&&q.nodeType===8)if(E=q.data,E==="/$"){if(R===0){u.removeChild(q),Sl(h);return}R--}else E!=="$"&&E!=="$?"&&E!=="$!"||R++;E=q}while(E);Sl(h)}function eo(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return u}function By(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var E=u.data;if(E==="$"||E==="$!"||E==="$?"){if(h===0)return u;h--}else E==="/$"&&h++}u=u.previousSibling}return null}var cs=Math.random().toString(36).slice(2),fs="__reactFiber$"+cs,Jd="__reactProps$"+cs,Ls="__reactContainer$"+cs,Dg="__reactEvents$"+cs,nh="__reactListeners$"+cs,$y="__reactHandles$"+cs;function Dl(u){var h=u[fs];if(h)return h;for(var E=u.parentNode;E;){if(h=E[Ls]||E[fs]){if(E=h.alternate,h.child!==null||E!==null&&E.child!==null)for(u=By(u);u!==null;){if(E=u[fs])return E;u=By(u)}return h}u=E,E=u.parentNode}return null}function ku(u){return u=u[fs]||u[Ls],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Ru(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(t(33))}function rh(u){return u[Jd]||null}var Ng=[],xu=-1;function Do(u){return{current:u}}function oi(u){0>xu||(u.current=Ng[xu],Ng[xu]=null,xu--)}function Hr(u,h){xu++,Ng[xu]=u.current,u.current=h}var No={},da=Do(No),_a=Do(!1),Po=No;function Cu(u,h){var E=u.type.contextTypes;if(!E)return No;var R=u.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===h)return R.__reactInternalMemoizedMaskedChildContext;var q={},ue;for(ue in E)q[ue]=h[ue];return R&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=q),q}function Sa(u){return u=u.childContextTypes,u!=null}function ec(){oi(_a),oi(da)}function jy(u,h,E){if(da.current!==No)throw Error(t(168));Hr(da,h),Hr(_a,E)}function Pg(u,h,E){var R=u.stateNode;if(h=h.childContextTypes,typeof R.getChildContext!="function")return E;R=R.getChildContext();for(var q in R)if(!(q in h))throw Error(t(108,gt(u)||"Unknown",q));return Ne({},E,R)}function ih(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||No,Po=da.current,Hr(da,u),Hr(_a,_a.current),!0}function Mg(u,h,E){var R=u.stateNode;if(!R)throw Error(t(169));E?(u=Pg(u,h,Po),R.__reactInternalMemoizedMergedChildContext=u,oi(_a),oi(da),Hr(da,u)):oi(_a),Hr(_a,E)}var to=null,tc=!1,Og=!1;function Fg(u){to===null?to=[u]:to.push(u)}function qy(u){tc=!0,Fg(u)}function Mo(){if(!Og&&to!==null){Og=!0;var u=0,h=Or;try{var E=to;for(Or=1;u<E.length;u++){var R=E[u];do R=R(!0);while(R!==null)}to=null,tc=!1}catch(q){throw to!==null&&(to=to.slice(u+1)),na(Io,Mo),q}finally{Or=h,Og=!1}}return null}var Lu=[],Nl=0,ah=null,nc=0,Wa=[],$a=0,Pl=null,ja=1,hs="";function Ds(u,h){Lu[Nl++]=nc,Lu[Nl++]=ah,ah=u,nc=h}function Dr(u,h,E){Wa[$a++]=ja,Wa[$a++]=hs,Wa[$a++]=Pl,Pl=u;var R=ja;u=hs;var q=32-Sr(R)-1;R&=~(1<<q),E+=1;var ue=32-Sr(h)+q;if(30<ue){var De=q-q%5;ue=(R&(1<<De)-1).toString(32),R>>=De,q-=De,ja=1<<32-Sr(h)+q|E<<q|R,hs=ue+u}else ja=1<<ue|E<<q|R,hs=u}function sh(u){u.return!==null&&(Ds(u,1),Dr(u,1,0))}function oh(u){for(;u===ah;)ah=Lu[--Nl],Lu[Nl]=null,nc=Lu[--Nl],Lu[Nl]=null;for(;u===Pl;)Pl=Wa[--$a],Wa[$a]=null,hs=Wa[--$a],Wa[$a]=null,ja=Wa[--$a],Wa[$a]=null}var Ca=null,qa=null,li=!1,ms=null;function Ug(u,h){var E=zs(5,null,null,0);E.elementType="DELETED",E.stateNode=h,E.return=u,h=u.deletions,h===null?(u.deletions=[E],u.flags|=16):h.push(E)}function Hy(u,h){switch(u.tag){case 5:var E=u.type;return h=h.nodeType!==1||E.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(u.stateNode=h,Ca=u,qa=eo(h.firstChild),!0):!1;case 6:return h=u.pendingProps===""||h.nodeType!==3?null:h,h!==null?(u.stateNode=h,Ca=u,qa=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(E=Pl!==null?{id:ja,overflow:hs}:null,u.memoizedState={dehydrated:h,treeContext:E,retryLane:1073741824},E=zs(18,null,null,0),E.stateNode=h,E.return=u,u.child=E,Ca=u,qa=null,!0):!1;default:return!1}}function lh(u){return(u.mode&1)!==0&&(u.flags&128)===0}function zg(u){if(li){var h=qa;if(h){var E=h;if(!Hy(u,h)){if(lh(u))throw Error(t(418));h=eo(E.nextSibling);var R=Ca;h&&Hy(u,h)?Ug(R,E):(u.flags=u.flags&-4097|2,li=!1,Ca=u)}}else{if(lh(u))throw Error(t(418));u.flags=u.flags&-4097|2,li=!1,Ca=u}}}function no(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ca=u}function Ml(u){if(u!==Ca)return!1;if(!li)return no(u),li=!0,!1;var h;if((h=u.tag!==3)&&!(h=u.tag!==5)&&(h=u.type,h=h!=="head"&&h!=="body"&&!eh(u.type,u.memoizedProps)),h&&(h=qa)){if(lh(u))throw uh(),Error(t(418));for(;h;)Ug(u,h),h=eo(h.nextSibling)}if(no(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8){var E=u.data;if(E==="/$"){if(h===0){qa=eo(u.nextSibling);break e}h--}else E!=="$"&&E!=="$!"&&E!=="$?"||h++}u=u.nextSibling}qa=null}}else qa=Ca?eo(u.stateNode.nextSibling):null;return!0}function uh(){for(var u=qa;u;)u=eo(u.nextSibling)}function gs(){qa=Ca=null,li=!1}function dh(u){ms===null?ms=[u]:ms.push(u)}var Gy=B.ReactCurrentBatchConfig;function La(u,h){if(u&&u.defaultProps){h=Ne({},h),u=u.defaultProps;for(var E in u)h[E]===void 0&&(h[E]=u[E]);return h}return h}var Ol=Do(null),rc=null,ro=null,ch=null;function Bg(){ch=ro=rc=null}function fh(u){var h=Ol.current;oi(Ol),u._currentValue=h}function $g(u,h,E){for(;u!==null;){var R=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,R!==null&&(R.childLanes|=h)):R!==null&&(R.childLanes&h)!==h&&(R.childLanes|=h),u===E)break;u=u.return}}function Du(u,h){rc=u,ch=ro=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&h)!==0&&(Da=!0),u.firstContext=null)}function Ha(u){var h=u._currentValue;if(ch!==u)if(u={context:u,memoizedValue:h,next:null},ro===null){if(rc===null)throw Error(t(308));ro=u,rc.dependencies={lanes:0,firstContext:u}}else ro=ro.next=u;return h}var Fl=null;function hh(u){Fl===null?Fl=[u]:Fl.push(u)}function Vy(u,h,E,R){var q=h.interleaved;return q===null?(E.next=E,hh(h)):(E.next=q.next,q.next=E),h.interleaved=E,Ns(u,R)}function Ns(u,h){u.lanes|=h;var E=u.alternate;for(E!==null&&(E.lanes|=h),E=u,u=u.return;u!==null;)u.childLanes|=h,E=u.alternate,E!==null&&(E.childLanes|=h),E=u,u=u.return;return E.tag===3?E.stateNode:null}var Oo=!1;function ic(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jg(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function io(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function ao(u,h,E){var R=u.updateQueue;if(R===null)return null;if(R=R.shared,(wn&2)!==0){var q=R.pending;return q===null?h.next=h:(h.next=q.next,q.next=h),R.pending=h,Ns(u,E)}return q=R.interleaved,q===null?(h.next=h,hh(R)):(h.next=q.next,q.next=h),R.interleaved=h,Ns(u,E)}function ac(u,h,E){if(h=h.updateQueue,h!==null&&(h=h.shared,(E&4194240)!==0)){var R=h.lanes;R&=u.pendingLanes,E|=R,h.lanes=E,hu(u,E)}}function qg(u,h){var E=u.updateQueue,R=u.alternate;if(R!==null&&(R=R.updateQueue,E===R)){var q=null,ue=null;if(E=E.firstBaseUpdate,E!==null){do{var De={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};ue===null?q=ue=De:ue=ue.next=De,E=E.next}while(E!==null);ue===null?q=ue=h:ue=ue.next=h}else q=ue=h;E={baseState:R.baseState,firstBaseUpdate:q,lastBaseUpdate:ue,shared:R.shared,effects:R.effects},u.updateQueue=E;return}u=E.lastBaseUpdate,u===null?E.firstBaseUpdate=h:u.next=h,E.lastBaseUpdate=h}function mh(u,h,E,R){var q=u.updateQueue;Oo=!1;var ue=q.firstBaseUpdate,De=q.lastBaseUpdate,Qe=q.shared.pending;if(Qe!==null){q.shared.pending=null;var lt=Qe,Ut=lt.next;lt.next=null,De===null?ue=Ut:De.next=Ut,De=lt;var yn=u.alternate;yn!==null&&(yn=yn.updateQueue,Qe=yn.lastBaseUpdate,Qe!==De&&(Qe===null?yn.firstBaseUpdate=Ut:Qe.next=Ut,yn.lastBaseUpdate=lt))}if(ue!==null){var _n=q.baseState;De=0,yn=Ut=lt=null,Qe=ue;do{var vn=Qe.lane,zn=Qe.eventTime;if((R&vn)===vn){yn!==null&&(yn=yn.next={eventTime:zn,lane:0,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null});e:{var Wn=u,Xn=Qe;switch(vn=h,zn=E,Xn.tag){case 1:if(Wn=Xn.payload,typeof Wn=="function"){_n=Wn.call(zn,_n,vn);break e}_n=Wn;break e;case 3:Wn.flags=Wn.flags&-65537|128;case 0:if(Wn=Xn.payload,vn=typeof Wn=="function"?Wn.call(zn,_n,vn):Wn,vn==null)break e;_n=Ne({},_n,vn);break e;case 2:Oo=!0}}Qe.callback!==null&&Qe.lane!==0&&(u.flags|=64,vn=q.effects,vn===null?q.effects=[Qe]:vn.push(Qe))}else zn={eventTime:zn,lane:vn,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null},yn===null?(Ut=yn=zn,lt=_n):yn=yn.next=zn,De|=vn;if(Qe=Qe.next,Qe===null){if(Qe=q.shared.pending,Qe===null)break;vn=Qe,Qe=vn.next,vn.next=null,q.lastBaseUpdate=vn,q.shared.pending=null}}while(!0);if(yn===null&&(lt=_n),q.baseState=lt,q.firstBaseUpdate=Ut,q.lastBaseUpdate=yn,h=q.shared.interleaved,h!==null){q=h;do De|=q.lane,q=q.next;while(q!==h)}else ue===null&&(q.shared.lanes=0);mt|=De,u.lanes=De,u.memoizedState=_n}}function Hg(u,h,E){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var R=u[h],q=R.callback;if(q!==null){if(R.callback=null,R=E,typeof q!="function")throw Error(t(191,q));q.call(R)}}}var Ky=new n.Component().refs;function sc(u,h,E,R){h=u.memoizedState,E=E(R,h),E=E==null?h:Ne({},h,E),u.memoizedState=E,u.lanes===0&&(u.updateQueue.baseState=E)}var oc={isMounted:function(u){return(u=u._reactInternals)?Zr(u)===u:!1},enqueueSetState:function(u,h,E){u=u._reactInternals;var R=xn(),q=Tr(u),ue=io(R,q);ue.payload=h,E!=null&&(ue.callback=E),h=ao(u,ue,q),h!==null&&(zr(h,u,q,R),ac(h,u,q))},enqueueReplaceState:function(u,h,E){u=u._reactInternals;var R=xn(),q=Tr(u),ue=io(R,q);ue.tag=1,ue.payload=h,E!=null&&(ue.callback=E),h=ao(u,ue,q),h!==null&&(zr(h,u,q,R),ac(h,u,q))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var E=xn(),R=Tr(u),q=io(E,R);q.tag=2,h!=null&&(q.callback=h),h=ao(u,q,R),h!==null&&(zr(h,u,R,E),ac(h,u,R))}};function Gg(u,h,E,R,q,ue,De){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(R,ue,De):h.prototype&&h.prototype.isPureReactComponent?!Cs(E,R)||!Cs(q,ue):!0}function Yy(u,h,E){var R=!1,q=No,ue=h.contextType;return typeof ue=="object"&&ue!==null?ue=Ha(ue):(q=Sa(h)?Po:da.current,R=h.contextTypes,ue=(R=R!=null)?Cu(u,q):No),h=new h(E,ue),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=oc,u.stateNode=h,h._reactInternals=u,R&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=q,u.__reactInternalMemoizedMaskedChildContext=ue),h}function Vg(u,h,E,R){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(E,R),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(E,R),h.state!==u&&oc.enqueueReplaceState(h,h.state,null)}function Kg(u,h,E,R){var q=u.stateNode;q.props=E,q.state=u.memoizedState,q.refs=Ky,ic(u);var ue=h.contextType;typeof ue=="object"&&ue!==null?q.context=Ha(ue):(ue=Sa(h)?Po:da.current,q.context=Cu(u,ue)),q.state=u.memoizedState,ue=h.getDerivedStateFromProps,typeof ue=="function"&&(sc(u,h,ue,E),q.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(h=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),h!==q.state&&oc.enqueueReplaceState(q,q.state,null),mh(u,E,q,R),q.state=u.memoizedState),typeof q.componentDidMount=="function"&&(u.flags|=4194308)}function lc(u,h,E){if(u=E.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(t(309));var R=E.stateNode}if(!R)throw Error(t(147,u));var q=R,ue=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===ue?h.ref:(h=function(De){var Qe=q.refs;Qe===Ky&&(Qe=q.refs={}),De===null?delete Qe[ue]:Qe[ue]=De},h._stringRef=ue,h)}if(typeof u!="string")throw Error(t(284));if(!E._owner)throw Error(t(290,u))}return u}function uc(u,h){throw u=Object.prototype.toString.call(h),Error(t(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function Yg(u){var h=u._init;return h(u._payload)}function Ul(u){function h(wt,dt){if(u){var Dt=wt.deletions;Dt===null?(wt.deletions=[dt],wt.flags|=16):Dt.push(dt)}}function E(wt,dt){if(!u)return null;for(;dt!==null;)h(wt,dt),dt=dt.sibling;return null}function R(wt,dt){for(wt=new Map;dt!==null;)dt.key!==null?wt.set(dt.key,dt):wt.set(dt.index,dt),dt=dt.sibling;return wt}function q(wt,dt){return wt=Bu(wt,dt),wt.index=0,wt.sibling=null,wt}function ue(wt,dt,Dt){return wt.index=Dt,u?(Dt=wt.alternate,Dt!==null?(Dt=Dt.index,Dt<dt?(wt.flags|=2,dt):Dt):(wt.flags|=2,dt)):(wt.flags|=1048576,dt)}function De(wt){return u&&wt.alternate===null&&(wt.flags|=2),wt}function Qe(wt,dt,Dt,Rn){return dt===null||dt.tag!==6?(dt=h_(Dt,wt.mode,Rn),dt.return=wt,dt):(dt=q(dt,Dt),dt.return=wt,dt)}function lt(wt,dt,Dt,Rn){var er=Dt.type;return er===w?yn(wt,dt,Dt.props.children,Rn,Dt.key):dt!==null&&(dt.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===Re&&Yg(er)===dt.type)?(Rn=q(dt,Dt.props),Rn.ref=lc(wt,dt,Dt),Rn.return=wt,Rn):(Rn=TE(Dt.type,Dt.key,Dt.props,null,wt.mode,Rn),Rn.ref=lc(wt,dt,Dt),Rn.return=wt,Rn)}function Ut(wt,dt,Dt,Rn){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Dt.containerInfo||dt.stateNode.implementation!==Dt.implementation?(dt=m_(Dt,wt.mode,Rn),dt.return=wt,dt):(dt=q(dt,Dt.children||[]),dt.return=wt,dt)}function yn(wt,dt,Dt,Rn,er){return dt===null||dt.tag!==7?(dt=Ac(Dt,wt.mode,Rn,er),dt.return=wt,dt):(dt=q(dt,Dt),dt.return=wt,dt)}function _n(wt,dt,Dt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return dt=h_(""+dt,wt.mode,Dt),dt.return=wt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case ie:return Dt=TE(dt.type,dt.key,dt.props,null,wt.mode,Dt),Dt.ref=lc(wt,null,dt),Dt.return=wt,Dt;case L:return dt=m_(dt,wt.mode,Dt),dt.return=wt,dt;case Re:var Rn=dt._init;return _n(wt,Rn(dt._payload),Dt)}if(Et(dt)||Ze(dt))return dt=Ac(dt,wt.mode,Dt,null),dt.return=wt,dt;uc(wt,dt)}return null}function vn(wt,dt,Dt,Rn){var er=dt!==null?dt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return er!==null?null:Qe(wt,dt,""+Dt,Rn);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case ie:return Dt.key===er?lt(wt,dt,Dt,Rn):null;case L:return Dt.key===er?Ut(wt,dt,Dt,Rn):null;case Re:return er=Dt._init,vn(wt,dt,er(Dt._payload),Rn)}if(Et(Dt)||Ze(Dt))return er!==null?null:yn(wt,dt,Dt,Rn,null);uc(wt,Dt)}return null}function zn(wt,dt,Dt,Rn,er){if(typeof Rn=="string"&&Rn!==""||typeof Rn=="number")return wt=wt.get(Dt)||null,Qe(dt,wt,""+Rn,er);if(typeof Rn=="object"&&Rn!==null){switch(Rn.$$typeof){case ie:return wt=wt.get(Rn.key===null?Dt:Rn.key)||null,lt(dt,wt,Rn,er);case L:return wt=wt.get(Rn.key===null?Dt:Rn.key)||null,Ut(dt,wt,Rn,er);case Re:var ur=Rn._init;return zn(wt,dt,Dt,ur(Rn._payload),er)}if(Et(Rn)||Ze(Rn))return wt=wt.get(Dt)||null,yn(dt,wt,Rn,er,null);uc(dt,Rn)}return null}function Wn(wt,dt,Dt,Rn){for(var er=null,ur=null,dr=dt,cr=dt=0,ga=null;dr!==null&&cr<Dt.length;cr++){dr.index>cr?(ga=dr,dr=null):ga=dr.sibling;var Vr=vn(wt,dr,Dt[cr],Rn);if(Vr===null){dr===null&&(dr=ga);break}u&&dr&&Vr.alternate===null&&h(wt,dr),dt=ue(Vr,dt,cr),ur===null?er=Vr:ur.sibling=Vr,ur=Vr,dr=ga}if(cr===Dt.length)return E(wt,dr),li&&Ds(wt,cr),er;if(dr===null){for(;cr<Dt.length;cr++)dr=_n(wt,Dt[cr],Rn),dr!==null&&(dt=ue(dr,dt,cr),ur===null?er=dr:ur.sibling=dr,ur=dr);return li&&Ds(wt,cr),er}for(dr=R(wt,dr);cr<Dt.length;cr++)ga=zn(dr,wt,cr,Dt[cr],Rn),ga!==null&&(u&&ga.alternate!==null&&dr.delete(ga.key===null?cr:ga.key),dt=ue(ga,dt,cr),ur===null?er=ga:ur.sibling=ga,ur=ga);return u&&dr.forEach(function($u){return h(wt,$u)}),li&&Ds(wt,cr),er}function Xn(wt,dt,Dt,Rn){var er=Ze(Dt);if(typeof er!="function")throw Error(t(150));if(Dt=er.call(Dt),Dt==null)throw Error(t(151));for(var ur=er=null,dr=dt,cr=dt=0,ga=null,Vr=Dt.next();dr!==null&&!Vr.done;cr++,Vr=Dt.next()){dr.index>cr?(ga=dr,dr=null):ga=dr.sibling;var $u=vn(wt,dr,Vr.value,Rn);if($u===null){dr===null&&(dr=ga);break}u&&dr&&$u.alternate===null&&h(wt,dr),dt=ue($u,dt,cr),ur===null?er=$u:ur.sibling=$u,ur=$u,dr=ga}if(Vr.done)return E(wt,dr),li&&Ds(wt,cr),er;if(dr===null){for(;!Vr.done;cr++,Vr=Dt.next())Vr=_n(wt,Vr.value,Rn),Vr!==null&&(dt=ue(Vr,dt,cr),ur===null?er=Vr:ur.sibling=Vr,ur=Vr);return li&&Ds(wt,cr),er}for(dr=R(wt,dr);!Vr.done;cr++,Vr=Dt.next())Vr=zn(dr,wt,cr,Vr.value,Rn),Vr!==null&&(u&&Vr.alternate!==null&&dr.delete(Vr.key===null?cr:Vr.key),dt=ue(Vr,dt,cr),ur===null?er=Vr:ur.sibling=Vr,ur=Vr);return u&&dr.forEach(function(gO){return h(wt,gO)}),li&&Ds(wt,cr),er}function $i(wt,dt,Dt,Rn){if(typeof Dt=="object"&&Dt!==null&&Dt.type===w&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case ie:e:{for(var er=Dt.key,ur=dt;ur!==null;){if(ur.key===er){if(er=Dt.type,er===w){if(ur.tag===7){E(wt,ur.sibling),dt=q(ur,Dt.props.children),dt.return=wt,wt=dt;break e}}else if(ur.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===Re&&Yg(er)===ur.type){E(wt,ur.sibling),dt=q(ur,Dt.props),dt.ref=lc(wt,ur,Dt),dt.return=wt,wt=dt;break e}E(wt,ur);break}else h(wt,ur);ur=ur.sibling}Dt.type===w?(dt=Ac(Dt.props.children,wt.mode,Rn,Dt.key),dt.return=wt,wt=dt):(Rn=TE(Dt.type,Dt.key,Dt.props,null,wt.mode,Rn),Rn.ref=lc(wt,dt,Dt),Rn.return=wt,wt=Rn)}return De(wt);case L:e:{for(ur=Dt.key;dt!==null;){if(dt.key===ur)if(dt.tag===4&&dt.stateNode.containerInfo===Dt.containerInfo&&dt.stateNode.implementation===Dt.implementation){E(wt,dt.sibling),dt=q(dt,Dt.children||[]),dt.return=wt,wt=dt;break e}else{E(wt,dt);break}else h(wt,dt);dt=dt.sibling}dt=m_(Dt,wt.mode,Rn),dt.return=wt,wt=dt}return De(wt);case Re:return ur=Dt._init,$i(wt,dt,ur(Dt._payload),Rn)}if(Et(Dt))return Wn(wt,dt,Dt,Rn);if(Ze(Dt))return Xn(wt,dt,Dt,Rn);uc(wt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"?(Dt=""+Dt,dt!==null&&dt.tag===6?(E(wt,dt.sibling),dt=q(dt,Dt),dt.return=wt,wt=dt):(E(wt,dt),dt=h_(Dt,wt.mode,Rn),dt.return=wt,wt=dt),De(wt)):E(wt,dt)}return $i}var zl=Ul(!0),Wg=Ul(!1),Nu={},Ps=Do(Nu),dc=Do(Nu),Pu=Do(Nu);function Bl(u){if(u===Nu)throw Error(t(174));return u}function gh(u,h){switch(Hr(Pu,h),Hr(dc,u),Hr(Ps,Nu),u=h.nodeType,u){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:nr(null,"");break;default:u=u===8?h.parentNode:h,h=u.namespaceURI||null,u=u.tagName,h=nr(h,u)}oi(Ps),Hr(Ps,h)}function $l(){oi(Ps),oi(dc),oi(Pu)}function Qg(u){Bl(Pu.current);var h=Bl(Ps.current),E=nr(h,u.type);h!==E&&(Hr(dc,u),Hr(Ps,E))}function Xg(u){dc.current===u&&(oi(Ps),oi(dc))}var gi=Do(0);function ph(u){for(var h=u;h!==null;){if(h.tag===13){var E=h.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||E.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var cc=[];function vh(){for(var u=0;u<cc.length;u++)cc[u]._workInProgressVersionPrimary=null;cc.length=0}var yh=B.ReactCurrentDispatcher,Zg=B.ReactCurrentBatchConfig,jl=0,pi=null,Bi=null,ei=null,Mu=!1,fc=!1,Ou=0,o_=0;function ca(){throw Error(t(321))}function Jg(u,h){if(h===null)return!1;for(var E=0;E<h.length&&E<u.length;E++)if(!us(u[E],h[E]))return!1;return!0}function Eh(u,h,E,R,q,ue){if(jl=ue,pi=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,yh.current=u===null||u.memoizedState===null?d_:uE,u=E(R,q),fc){ue=0;do{if(fc=!1,Ou=0,25<=ue)throw Error(t(301));ue+=1,ei=Bi=null,h.updateQueue=null,yh.current=c_,u=E(R,q)}while(fc)}if(yh.current=Sh,h=Bi!==null&&Bi.next!==null,jl=0,ei=Bi=pi=null,Mu=!1,h)throw Error(t(300));return u}function ep(){var u=Ou!==0;return Ou=0,u}function Ms(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?pi.memoizedState=ei=u:ei=ei.next=u,ei}function Qa(){if(Bi===null){var u=pi.alternate;u=u!==null?u.memoizedState:null}else u=Bi.next;var h=ei===null?pi.memoizedState:ei.next;if(h!==null)ei=h,Bi=u;else{if(u===null)throw Error(t(310));Bi=u,u={memoizedState:Bi.memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},ei===null?pi.memoizedState=ei=u:ei=ei.next=u}return ei}function hc(u,h){return typeof h=="function"?h(u):h}function tp(u){var h=Qa(),E=h.queue;if(E===null)throw Error(t(311));E.lastRenderedReducer=u;var R=Bi,q=R.baseQueue,ue=E.pending;if(ue!==null){if(q!==null){var De=q.next;q.next=ue.next,ue.next=De}R.baseQueue=q=ue,E.pending=null}if(q!==null){ue=q.next,R=R.baseState;var Qe=De=null,lt=null,Ut=ue;do{var yn=Ut.lane;if((jl&yn)===yn)lt!==null&&(lt=lt.next={lane:0,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),R=Ut.hasEagerState?Ut.eagerState:u(R,Ut.action);else{var _n={lane:yn,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null};lt===null?(Qe=lt=_n,De=R):lt=lt.next=_n,pi.lanes|=yn,mt|=yn}Ut=Ut.next}while(Ut!==null&&Ut!==ue);lt===null?De=R:lt.next=Qe,us(R,h.memoizedState)||(Da=!0),h.memoizedState=R,h.baseState=De,h.baseQueue=lt,E.lastRenderedState=R}if(u=E.interleaved,u!==null){q=u;do ue=q.lane,pi.lanes|=ue,mt|=ue,q=q.next;while(q!==u)}else q===null&&(E.lanes=0);return[h.memoizedState,E.dispatch]}function np(u){var h=Qa(),E=h.queue;if(E===null)throw Error(t(311));E.lastRenderedReducer=u;var R=E.dispatch,q=E.pending,ue=h.memoizedState;if(q!==null){E.pending=null;var De=q=q.next;do ue=u(ue,De.action),De=De.next;while(De!==q);us(ue,h.memoizedState)||(Da=!0),h.memoizedState=ue,h.baseQueue===null&&(h.baseState=ue),E.lastRenderedState=ue}return[ue,R]}function Wy(){}function Qy(u,h){var E=pi,R=Qa(),q=h(),ue=!us(R.memoizedState,q);if(ue&&(R.memoizedState=q,Da=!0),R=R.queue,pc(Jy.bind(null,E,R,u),[u]),R.getSnapshot!==h||ue||ei!==null&&ei.memoizedState.tag&1){if(E.flags|=2048,mc(9,Zy.bind(null,E,R,q,h),void 0,null),On===null)throw Error(t(349));(jl&30)!==0||Xy(E,h,q)}return q}function Xy(u,h,E){u.flags|=16384,u={getSnapshot:h,value:E},h=pi.updateQueue,h===null?(h={lastEffect:null,stores:null},pi.updateQueue=h,h.stores=[u]):(E=h.stores,E===null?h.stores=[u]:E.push(u))}function Zy(u,h,E,R){h.value=E,h.getSnapshot=R,eE(h)&&tE(u)}function Jy(u,h,E){return E(function(){eE(h)&&tE(u)})}function eE(u){var h=u.getSnapshot;u=u.value;try{var E=h();return!us(u,E)}catch{return!0}}function tE(u){var h=Ns(u,1);h!==null&&zr(h,u,1,-1)}function rp(u){var h=Ms();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:u},h.queue=u,u=u.dispatch=u_.bind(null,pi,u),[h.memoizedState,u]}function mc(u,h,E,R){return u={tag:u,create:h,destroy:E,deps:R,next:null},h=pi.updateQueue,h===null?(h={lastEffect:null,stores:null},pi.updateQueue=h,h.lastEffect=u.next=u):(E=h.lastEffect,E===null?h.lastEffect=u.next=u:(R=E.next,E.next=u,u.next=R,h.lastEffect=u)),u}function ip(){return Qa().memoizedState}function bh(u,h,E,R){var q=Ms();pi.flags|=u,q.memoizedState=mc(1|h,E,void 0,R===void 0?null:R)}function gc(u,h,E,R){var q=Qa();R=R===void 0?null:R;var ue=void 0;if(Bi!==null){var De=Bi.memoizedState;if(ue=De.destroy,R!==null&&Jg(R,De.deps)){q.memoizedState=mc(h,E,ue,R);return}}pi.flags|=u,q.memoizedState=mc(1|h,E,ue,R)}function Xa(u,h){return bh(8390656,8,u,h)}function pc(u,h){return gc(2048,8,u,h)}function Fu(u,h){return gc(4,2,u,h)}function vc(u,h){return gc(4,4,u,h)}function Th(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function nE(u,h,E){return E=E!=null?E.concat([u]):null,gc(4,4,Th.bind(null,h,u),E)}function ap(){}function rE(u,h){var E=Qa();h=h===void 0?null:h;var R=E.memoizedState;return R!==null&&h!==null&&Jg(h,R[1])?R[0]:(E.memoizedState=[u,h],u)}function ps(u,h){var E=Qa();h=h===void 0?null:h;var R=E.memoizedState;return R!==null&&h!==null&&Jg(h,R[1])?R[0]:(u=u(),E.memoizedState=[u,h],u)}function _h(u,h,E){return(jl&21)===0?(u.baseState&&(u.baseState=!1,Da=!0),u.memoizedState=E):(us(E,h)||(E=Ra(),pi.lanes|=E,mt|=E,u.baseState=!0),h)}function l_(u,h){var E=Or;Or=E!==0&&4>E?E:4,u(!0);var R=Zg.transition;Zg.transition={};try{u(!1),h()}finally{Or=E,Zg.transition=R}}function iE(){return Qa().memoizedState}function aE(u,h,E){var R=Tr(u);if(E={lane:R,action:E,hasEagerState:!1,eagerState:null,next:null},sE(u))oE(h,E);else if(E=Vy(u,h,E,R),E!==null){var q=xn();zr(E,u,R,q),lE(E,h,R)}}function u_(u,h,E){var R=Tr(u),q={lane:R,action:E,hasEagerState:!1,eagerState:null,next:null};if(sE(u))oE(h,q);else{var ue=u.alternate;if(u.lanes===0&&(ue===null||ue.lanes===0)&&(ue=h.lastRenderedReducer,ue!==null))try{var De=h.lastRenderedState,Qe=ue(De,E);if(q.hasEagerState=!0,q.eagerState=Qe,us(Qe,De)){var lt=h.interleaved;lt===null?(q.next=q,hh(h)):(q.next=lt.next,lt.next=q),h.interleaved=q;return}}catch{}finally{}E=Vy(u,h,q,R),E!==null&&(q=xn(),zr(E,u,R,q),lE(E,h,R))}}function sE(u){var h=u.alternate;return u===pi||h!==null&&h===pi}function oE(u,h){fc=Mu=!0;var E=u.pending;E===null?h.next=h:(h.next=E.next,E.next=h),u.pending=h}function lE(u,h,E){if((E&4194240)!==0){var R=h.lanes;R&=u.pendingLanes,E|=R,h.lanes=E,hu(u,E)}}var Sh={readContext:Ha,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useInsertionEffect:ca,useLayoutEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useDeferredValue:ca,useTransition:ca,useMutableSource:ca,useSyncExternalStore:ca,useId:ca,unstable_isNewReconciler:!1},d_={readContext:Ha,useCallback:function(u,h){return Ms().memoizedState=[u,h===void 0?null:h],u},useContext:Ha,useEffect:Xa,useImperativeHandle:function(u,h,E){return E=E!=null?E.concat([u]):null,bh(4194308,4,Th.bind(null,h,u),E)},useLayoutEffect:function(u,h){return bh(4194308,4,u,h)},useInsertionEffect:function(u,h){return bh(4,2,u,h)},useMemo:function(u,h){var E=Ms();return h=h===void 0?null:h,u=u(),E.memoizedState=[u,h],u},useReducer:function(u,h,E){var R=Ms();return h=E!==void 0?E(h):h,R.memoizedState=R.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},R.queue=u,u=u.dispatch=aE.bind(null,pi,u),[R.memoizedState,u]},useRef:function(u){var h=Ms();return u={current:u},h.memoizedState=u},useState:rp,useDebugValue:ap,useDeferredValue:function(u){return Ms().memoizedState=u},useTransition:function(){var u=rp(!1),h=u[0];return u=l_.bind(null,u[1]),Ms().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,E){var R=pi,q=Ms();if(li){if(E===void 0)throw Error(t(407));E=E()}else{if(E=h(),On===null)throw Error(t(349));(jl&30)!==0||Xy(R,h,E)}q.memoizedState=E;var ue={value:E,getSnapshot:h};return q.queue=ue,Xa(Jy.bind(null,R,ue,u),[u]),R.flags|=2048,mc(9,Zy.bind(null,R,ue,E,h),void 0,null),E},useId:function(){var u=Ms(),h=On.identifierPrefix;if(li){var E=hs,R=ja;E=(R&~(1<<32-Sr(R)-1)).toString(32)+E,h=":"+h+"R"+E,E=Ou++,0<E&&(h+="H"+E.toString(32)),h+=":"}else E=o_++,h=":"+h+"r"+E.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},uE={readContext:Ha,useCallback:rE,useContext:Ha,useEffect:pc,useImperativeHandle:nE,useInsertionEffect:Fu,useLayoutEffect:vc,useMemo:ps,useReducer:tp,useRef:ip,useState:function(){return tp(hc)},useDebugValue:ap,useDeferredValue:function(u){var h=Qa();return _h(h,Bi.memoizedState,u)},useTransition:function(){var u=tp(hc)[0],h=Qa().memoizedState;return[u,h]},useMutableSource:Wy,useSyncExternalStore:Qy,useId:iE,unstable_isNewReconciler:!1},c_={readContext:Ha,useCallback:rE,useContext:Ha,useEffect:pc,useImperativeHandle:nE,useInsertionEffect:Fu,useLayoutEffect:vc,useMemo:ps,useReducer:np,useRef:ip,useState:function(){return np(hc)},useDebugValue:ap,useDeferredValue:function(u){var h=Qa();return Bi===null?h.memoizedState=u:_h(h,Bi.memoizedState,u)},useTransition:function(){var u=np(hc)[0],h=Qa().memoizedState;return[u,h]},useMutableSource:Wy,useSyncExternalStore:Qy,useId:iE,unstable_isNewReconciler:!1};function Uu(u,h){try{var E="",R=h;do E+=Pe(R),R=R.return;while(R);var q=E}catch(ue){q=`
Error generating stack: `+ue.message+`
`+ue.stack}return{value:u,source:h,stack:q,digest:null}}function yc(u,h,E){return{value:u,source:null,stack:E??null,digest:h??null}}function sp(u,h){try{console.error(h.value)}catch(E){setTimeout(function(){throw E})}}var dE=typeof WeakMap=="function"?WeakMap:Map;function cE(u,h,E){E=io(-1,E),E.tag=3,E.payload={element:null};var R=h.value;return E.callback=function(){rn||(rn=!0,pt=R),sp(u,h)},E}function op(u,h,E){E=io(-1,E),E.tag=3;var R=u.type.getDerivedStateFromError;if(typeof R=="function"){var q=h.value;E.payload=function(){return R(q)},E.callback=function(){sp(u,h)}}var ue=u.stateNode;return ue!==null&&typeof ue.componentDidCatch=="function"&&(E.callback=function(){sp(u,h),typeof R!="function"&&(Ce===null?Ce=new Set([this]):Ce.add(this));var De=h.stack;this.componentDidCatch(h.value,{componentStack:De!==null?De:""})}),E}function fE(u,h,E){var R=u.pingCache;if(R===null){R=u.pingCache=new dE;var q=new Set;R.set(h,q)}else q=R.get(h),q===void 0&&(q=new Set,R.set(h,q));q.has(E)||(q.add(E),u=br.bind(null,u,h,E),h.then(u,u))}function lp(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function hE(u,h,E,R,q){return(u.mode&1)===0?(u===h?u.flags|=65536:(u.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(h=io(-1,1),h.tag=2,ao(E,h,1))),E.lanes|=1),u):(u.flags|=65536,u.lanes=q,u)}var mE=B.ReactCurrentOwner,Da=!1;function fa(u,h,E,R){h.child=u===null?Wg(h,null,E,R):zl(h,u.child,E,R)}function gE(u,h,E,R,q){E=E.render;var ue=h.ref;return Du(h,q),R=Eh(u,h,E,R,ue,q),E=ep(),u!==null&&!Da?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~q,Y(u,h,q)):(li&&E&&sh(h),h.flags|=1,fa(u,h,R,q),h.child)}function up(u,h,E,R,q){if(u===null){var ue=E.type;return typeof ue=="function"&&!f_(ue)&&ue.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(h.tag=15,h.type=ue,pE(u,h,ue,R,q)):(u=TE(E.type,null,R,h,h.mode,q),u.ref=h.ref,u.return=h,h.child=u)}if(ue=u.child,(u.lanes&q)===0){var De=ue.memoizedProps;if(E=E.compare,E=E!==null?E:Cs,E(De,R)&&u.ref===h.ref)return Y(u,h,q)}return h.flags|=1,u=Bu(ue,R),u.ref=h.ref,u.return=h,h.child=u}function pE(u,h,E,R,q){if(u!==null){var ue=u.memoizedProps;if(Cs(ue,R)&&u.ref===h.ref)if(Da=!1,h.pendingProps=R=ue,(u.lanes&q)!==0)(u.flags&131072)!==0&&(Da=!0);else return h.lanes=u.lanes,Y(u,h,q)}return Ah(u,h,E,R,q)}function dp(u,h,E){var R=h.pendingProps,q=R.children,ue=u!==null?u.memoizedState:null;if(R.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(_t,ct),ct|=E;else{if((E&1073741824)===0)return u=ue!==null?ue.baseLanes|E:E,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null,transitions:null},h.updateQueue=null,Hr(_t,ct),ct|=u,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=ue!==null?ue.baseLanes:E,Hr(_t,ct),ct|=R}else ue!==null?(R=ue.baseLanes|E,h.memoizedState=null):R=E,Hr(_t,ct),ct|=R;return fa(u,h,q,E),h.child}function vE(u,h){var E=h.ref;(u===null&&E!==null||u!==null&&u.ref!==E)&&(h.flags|=512,h.flags|=2097152)}function Ah(u,h,E,R,q){var ue=Sa(E)?Po:da.current;return ue=Cu(h,ue),Du(h,q),E=Eh(u,h,E,R,ue,q),R=ep(),u!==null&&!Da?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~q,Y(u,h,q)):(li&&R&&sh(h),h.flags|=1,fa(u,h,E,q),h.child)}function yE(u,h,E,R,q){if(Sa(E)){var ue=!0;ih(h)}else ue=!1;if(Du(h,q),h.stateNode===null)W(u,h),Yy(h,E,R),Kg(h,E,R,q),R=!0;else if(u===null){var De=h.stateNode,Qe=h.memoizedProps;De.props=Qe;var lt=De.context,Ut=E.contextType;typeof Ut=="object"&&Ut!==null?Ut=Ha(Ut):(Ut=Sa(E)?Po:da.current,Ut=Cu(h,Ut));var yn=E.getDerivedStateFromProps,_n=typeof yn=="function"||typeof De.getSnapshotBeforeUpdate=="function";_n||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(Qe!==R||lt!==Ut)&&Vg(h,De,R,Ut),Oo=!1;var vn=h.memoizedState;De.state=vn,mh(h,R,De,q),lt=h.memoizedState,Qe!==R||vn!==lt||_a.current||Oo?(typeof yn=="function"&&(sc(h,E,yn,R),lt=h.memoizedState),(Qe=Oo||Gg(h,E,Qe,R,vn,lt,Ut))?(_n||typeof De.UNSAFE_componentWillMount!="function"&&typeof De.componentWillMount!="function"||(typeof De.componentWillMount=="function"&&De.componentWillMount(),typeof De.UNSAFE_componentWillMount=="function"&&De.UNSAFE_componentWillMount()),typeof De.componentDidMount=="function"&&(h.flags|=4194308)):(typeof De.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=R,h.memoizedState=lt),De.props=R,De.state=lt,De.context=Ut,R=Qe):(typeof De.componentDidMount=="function"&&(h.flags|=4194308),R=!1)}else{De=h.stateNode,jg(u,h),Qe=h.memoizedProps,Ut=h.type===h.elementType?Qe:La(h.type,Qe),De.props=Ut,_n=h.pendingProps,vn=De.context,lt=E.contextType,typeof lt=="object"&&lt!==null?lt=Ha(lt):(lt=Sa(E)?Po:da.current,lt=Cu(h,lt));var zn=E.getDerivedStateFromProps;(yn=typeof zn=="function"||typeof De.getSnapshotBeforeUpdate=="function")||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(Qe!==_n||vn!==lt)&&Vg(h,De,R,lt),Oo=!1,vn=h.memoizedState,De.state=vn,mh(h,R,De,q);var Wn=h.memoizedState;Qe!==_n||vn!==Wn||_a.current||Oo?(typeof zn=="function"&&(sc(h,E,zn,R),Wn=h.memoizedState),(Ut=Oo||Gg(h,E,Ut,R,vn,Wn,lt)||!1)?(yn||typeof De.UNSAFE_componentWillUpdate!="function"&&typeof De.componentWillUpdate!="function"||(typeof De.componentWillUpdate=="function"&&De.componentWillUpdate(R,Wn,lt),typeof De.UNSAFE_componentWillUpdate=="function"&&De.UNSAFE_componentWillUpdate(R,Wn,lt)),typeof De.componentDidUpdate=="function"&&(h.flags|=4),typeof De.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof De.componentDidUpdate!="function"||Qe===u.memoizedProps&&vn===u.memoizedState||(h.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||Qe===u.memoizedProps&&vn===u.memoizedState||(h.flags|=1024),h.memoizedProps=R,h.memoizedState=Wn),De.props=R,De.state=Wn,De.context=lt,R=Ut):(typeof De.componentDidUpdate!="function"||Qe===u.memoizedProps&&vn===u.memoizedState||(h.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||Qe===u.memoizedProps&&vn===u.memoizedState||(h.flags|=1024),R=!1)}return Ec(u,h,E,R,ue,q)}function Ec(u,h,E,R,q,ue){vE(u,h);var De=(h.flags&128)!==0;if(!R&&!De)return q&&Mg(h,E,!1),Y(u,h,ue);R=h.stateNode,mE.current=h;var Qe=De&&typeof E.getDerivedStateFromError!="function"?null:R.render();return h.flags|=1,u!==null&&De?(h.child=zl(h,u.child,null,ue),h.child=zl(h,null,Qe,ue)):fa(u,h,Qe,ue),h.memoizedState=R.state,q&&Mg(h,E,!0),h.child}function bc(u){var h=u.stateNode;h.pendingContext?jy(u,h.pendingContext,h.pendingContext!==h.context):h.context&&jy(u,h.context,!1),gh(u,h.containerInfo)}function EE(u,h,E,R,q){return gs(),dh(q),h.flags|=256,fa(u,h,E,R),h.child}var _={dehydrated:null,treeContext:null,retryLane:0};function b(u){return{baseLanes:u,cachePool:null,transitions:null}}function T(u,h,E){var R=h.pendingProps,q=gi.current,ue=!1,De=(h.flags&128)!==0,Qe;if((Qe=De)||(Qe=u!==null&&u.memoizedState===null?!1:(q&2)!==0),Qe?(ue=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(q|=1),Hr(gi,q&1),u===null)return zg(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((h.mode&1)===0?h.lanes=1:u.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(De=R.children,u=R.fallback,ue?(R=h.mode,ue=h.child,De={mode:"hidden",children:De},(R&1)===0&&ue!==null?(ue.childLanes=0,ue.pendingProps=De):ue=_E(De,R,0,null),u=Ac(u,R,E,null),ue.return=h,u.return=h,ue.sibling=u,h.child=ue,h.child.memoizedState=b(E),h.memoizedState=_,u):S(h,De));if(q=u.memoizedState,q!==null&&(Qe=q.dehydrated,Qe!==null))return C(u,h,De,R,Qe,q,E);if(ue){ue=R.fallback,De=h.mode,q=u.child,Qe=q.sibling;var lt={mode:"hidden",children:R.children};return(De&1)===0&&h.child!==q?(R=h.child,R.childLanes=0,R.pendingProps=lt,h.deletions=null):(R=Bu(q,lt),R.subtreeFlags=q.subtreeFlags&14680064),Qe!==null?ue=Bu(Qe,ue):(ue=Ac(ue,De,E,null),ue.flags|=2),ue.return=h,R.return=h,R.sibling=ue,h.child=R,R=ue,ue=h.child,De=u.child.memoizedState,De=De===null?b(E):{baseLanes:De.baseLanes|E,cachePool:null,transitions:De.transitions},ue.memoizedState=De,ue.childLanes=u.childLanes&~E,h.memoizedState=_,R}return ue=u.child,u=ue.sibling,R=Bu(ue,{mode:"visible",children:R.children}),(h.mode&1)===0&&(R.lanes=E),R.return=h,R.sibling=null,u!==null&&(E=h.deletions,E===null?(h.deletions=[u],h.flags|=16):E.push(u)),h.child=R,h.memoizedState=null,R}function S(u,h){return h=_E({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function k(u,h,E,R){return R!==null&&dh(R),zl(h,u.child,null,E),u=S(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function C(u,h,E,R,q,ue,De){if(E)return h.flags&256?(h.flags&=-257,R=yc(Error(t(422))),k(u,h,De,R)):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(ue=R.fallback,q=h.mode,R=_E({mode:"visible",children:R.children},q,0,null),ue=Ac(ue,q,De,null),ue.flags|=2,R.return=h,ue.return=h,R.sibling=ue,h.child=R,(h.mode&1)!==0&&zl(h,u.child,null,De),h.child.memoizedState=b(De),h.memoizedState=_,ue);if((h.mode&1)===0)return k(u,h,De,null);if(q.data==="$!"){if(R=q.nextSibling&&q.nextSibling.dataset,R)var Qe=R.dgst;return R=Qe,ue=Error(t(419)),R=yc(ue,R,void 0),k(u,h,De,R)}if(Qe=(De&u.childLanes)!==0,Da||Qe){if(R=On,R!==null){switch(De&-De){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(R.suspendedLanes|De))!==0?0:q,q!==0&&q!==ue.retryLane&&(ue.retryLane=q,Ns(u,q),zr(R,u,q,-1))}return ma(),R=yc(Error(t(421))),k(u,h,De,R)}return q.data==="$?"?(h.flags|=128,h.child=u.child,h=Na.bind(null,u),q._reactRetry=h,null):(u=ue.treeContext,qa=eo(q.nextSibling),Ca=h,li=!0,ms=null,u!==null&&(Wa[$a++]=ja,Wa[$a++]=hs,Wa[$a++]=Pl,ja=u.id,hs=u.overflow,Pl=h),h=S(h,R.children),h.flags|=4096,h)}function $(u,h,E){u.lanes|=h;var R=u.alternate;R!==null&&(R.lanes|=h),$g(u.return,h,E)}function H(u,h,E,R,q){var ue=u.memoizedState;ue===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:R,tail:E,tailMode:q}:(ue.isBackwards=h,ue.rendering=null,ue.renderingStartTime=0,ue.last=R,ue.tail=E,ue.tailMode=q)}function x(u,h,E){var R=h.pendingProps,q=R.revealOrder,ue=R.tail;if(fa(u,h,R.children,E),R=gi.current,(R&2)!==0)R=R&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&$(u,E,h);else if(u.tag===19)$(u,E,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}R&=1}if(Hr(gi,R),(h.mode&1)===0)h.memoizedState=null;else switch(q){case"forwards":for(E=h.child,q=null;E!==null;)u=E.alternate,u!==null&&ph(u)===null&&(q=E),E=E.sibling;E=q,E===null?(q=h.child,h.child=null):(q=E.sibling,E.sibling=null),H(h,!1,q,E,ue);break;case"backwards":for(E=null,q=h.child,h.child=null;q!==null;){if(u=q.alternate,u!==null&&ph(u)===null){h.child=q;break}u=q.sibling,q.sibling=E,E=q,q=u}H(h,!0,E,null,ue);break;case"together":H(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function W(u,h){(h.mode&1)===0&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2)}function Y(u,h,E){if(u!==null&&(h.dependencies=u.dependencies),mt|=h.lanes,(E&h.childLanes)===0)return null;if(u!==null&&h.child!==u.child)throw Error(t(153));if(h.child!==null){for(u=h.child,E=Bu(u,u.pendingProps),h.child=E,E.return=h;u.sibling!==null;)u=u.sibling,E=E.sibling=Bu(u,u.pendingProps),E.return=h;E.sibling=null}return h.child}function N(u,h,E){switch(h.tag){case 3:bc(h),gs();break;case 5:Qg(h);break;case 1:Sa(h.type)&&ih(h);break;case 4:gh(h,h.stateNode.containerInfo);break;case 10:var R=h.type._context,q=h.memoizedProps.value;Hr(Ol,R._currentValue),R._currentValue=q;break;case 13:if(R=h.memoizedState,R!==null)return R.dehydrated!==null?(Hr(gi,gi.current&1),h.flags|=128,null):(E&h.child.childLanes)!==0?T(u,h,E):(Hr(gi,gi.current&1),u=Y(u,h,E),u!==null?u.sibling:null);Hr(gi,gi.current&1);break;case 19:if(R=(E&h.childLanes)!==0,(u.flags&128)!==0){if(R)return x(u,h,E);h.flags|=128}if(q=h.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Hr(gi,gi.current),R)break;return null;case 22:case 23:return h.lanes=0,dp(u,h,E)}return Y(u,h,E)}var z,G,re,le;z=function(u,h){for(var E=h.child;E!==null;){if(E.tag===5||E.tag===6)u.appendChild(E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},G=function(){},re=function(u,h,E,R){var q=u.memoizedProps;if(q!==R){u=h.stateNode,Bl(Ps.current);var ue=null;switch(E){case"input":q=He(u,q),R=He(u,R),ue=[];break;case"select":q=Ne({},q,{value:void 0}),R=Ne({},R,{value:void 0}),ue=[];break;case"textarea":q=xt(u,q),R=xt(u,R),ue=[];break;default:typeof q.onClick!="function"&&typeof R.onClick=="function"&&(u.onclick=Zf)}kt(E,R);var De;E=null;for(Ut in q)if(!R.hasOwnProperty(Ut)&&q.hasOwnProperty(Ut)&&q[Ut]!=null)if(Ut==="style"){var Qe=q[Ut];for(De in Qe)Qe.hasOwnProperty(De)&&(E||(E={}),E[De]="")}else Ut!=="dangerouslySetInnerHTML"&&Ut!=="children"&&Ut!=="suppressContentEditableWarning"&&Ut!=="suppressHydrationWarning"&&Ut!=="autoFocus"&&(i.hasOwnProperty(Ut)?ue||(ue=[]):(ue=ue||[]).push(Ut,null));for(Ut in R){var lt=R[Ut];if(Qe=q!=null?q[Ut]:void 0,R.hasOwnProperty(Ut)&&lt!==Qe&&(lt!=null||Qe!=null))if(Ut==="style")if(Qe){for(De in Qe)!Qe.hasOwnProperty(De)||lt&&lt.hasOwnProperty(De)||(E||(E={}),E[De]="");for(De in lt)lt.hasOwnProperty(De)&&Qe[De]!==lt[De]&&(E||(E={}),E[De]=lt[De])}else E||(ue||(ue=[]),ue.push(Ut,E)),E=lt;else Ut==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,Qe=Qe?Qe.__html:void 0,lt!=null&&Qe!==lt&&(ue=ue||[]).push(Ut,lt)):Ut==="children"?typeof lt!="string"&&typeof lt!="number"||(ue=ue||[]).push(Ut,""+lt):Ut!=="suppressContentEditableWarning"&&Ut!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ut)?(lt!=null&&Ut==="onScroll"&&ii("scroll",u),ue||Qe===lt||(ue=[])):(ue=ue||[]).push(Ut,lt))}E&&(ue=ue||[]).push("style",E);var Ut=ue;(h.updateQueue=Ut)&&(h.flags|=4)}},le=function(u,h,E,R){E!==R&&(h.flags|=4)};function de(u,h){if(!li)switch(u.tailMode){case"hidden":h=u.tail;for(var E=null;h!==null;)h.alternate!==null&&(E=h),h=h.sibling;E===null?u.tail=null:E.sibling=null;break;case"collapsed":E=u.tail;for(var R=null;E!==null;)E.alternate!==null&&(R=E),E=E.sibling;R===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:R.sibling=null}}function se(u){var h=u.alternate!==null&&u.alternate.child===u.child,E=0,R=0;if(h)for(var q=u.child;q!==null;)E|=q.lanes|q.childLanes,R|=q.subtreeFlags&14680064,R|=q.flags&14680064,q.return=u,q=q.sibling;else for(q=u.child;q!==null;)E|=q.lanes|q.childLanes,R|=q.subtreeFlags,R|=q.flags,q.return=u,q=q.sibling;return u.subtreeFlags|=R,u.childLanes=E,h}function he(u,h,E){var R=h.pendingProps;switch(oh(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(h),null;case 1:return Sa(h.type)&&ec(),se(h),null;case 3:return R=h.stateNode,$l(),oi(_a),oi(da),vh(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(u===null||u.child===null)&&(Ml(h)?h.flags|=4:u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ms!==null&&(so(ms),ms=null))),G(u,h),se(h),null;case 5:Xg(h);var q=Bl(Pu.current);if(E=h.type,u!==null&&h.stateNode!=null)re(u,h,E,R,q),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!R){if(h.stateNode===null)throw Error(t(166));return se(h),null}if(u=Bl(Ps.current),Ml(h)){R=h.stateNode,E=h.type;var ue=h.memoizedProps;switch(R[fs]=h,R[Jd]=ue,u=(h.mode&1)!==0,E){case"dialog":ii("cancel",R),ii("close",R);break;case"iframe":case"object":case"embed":ii("load",R);break;case"video":case"audio":for(q=0;q<Lo.length;q++)ii(Lo[q],R);break;case"source":ii("error",R);break;case"img":case"image":case"link":ii("error",R),ii("load",R);break;case"details":ii("toggle",R);break;case"input":ut(R,ue),ii("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!ue.multiple},ii("invalid",R);break;case"textarea":En(R,ue),ii("invalid",R)}kt(E,ue),q=null;for(var De in ue)if(ue.hasOwnProperty(De)){var Qe=ue[De];De==="children"?typeof Qe=="string"?R.textContent!==Qe&&(ue.suppressHydrationWarning!==!0&&Zd(R.textContent,Qe,u),q=["children",Qe]):typeof Qe=="number"&&R.textContent!==""+Qe&&(ue.suppressHydrationWarning!==!0&&Zd(R.textContent,Qe,u),q=["children",""+Qe]):i.hasOwnProperty(De)&&Qe!=null&&De==="onScroll"&&ii("scroll",R)}switch(E){case"input":K(R),Ke(R,ue,!0);break;case"textarea":K(R),fn(R);break;case"select":case"option":break;default:typeof ue.onClick=="function"&&(R.onclick=Zf)}R=q,h.updateQueue=R,R!==null&&(h.flags|=4)}else{De=q.nodeType===9?q:q.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Ht(E)),u==="http://www.w3.org/1999/xhtml"?E==="script"?(u=De.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof R.is=="string"?u=De.createElement(E,{is:R.is}):(u=De.createElement(E),E==="select"&&(De=u,R.multiple?De.multiple=!0:R.size&&(De.size=R.size))):u=De.createElementNS(u,E),u[fs]=h,u[Jd]=R,z(u,h,!1,!1),h.stateNode=u;e:{switch(De=an(E,R),E){case"dialog":ii("cancel",u),ii("close",u),q=R;break;case"iframe":case"object":case"embed":ii("load",u),q=R;break;case"video":case"audio":for(q=0;q<Lo.length;q++)ii(Lo[q],u);q=R;break;case"source":ii("error",u),q=R;break;case"img":case"image":case"link":ii("error",u),ii("load",u),q=R;break;case"details":ii("toggle",u),q=R;break;case"input":ut(u,R),q=He(u,R),ii("invalid",u);break;case"option":q=R;break;case"select":u._wrapperState={wasMultiple:!!R.multiple},q=Ne({},R,{value:void 0}),ii("invalid",u);break;case"textarea":En(u,R),q=xt(u,R),ii("invalid",u);break;default:q=R}kt(E,q),Qe=q;for(ue in Qe)if(Qe.hasOwnProperty(ue)){var lt=Qe[ue];ue==="style"?Bt(u,lt):ue==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,lt!=null&&Fr(u,lt)):ue==="children"?typeof lt=="string"?(E!=="textarea"||lt!=="")&&Lr(u,lt):typeof lt=="number"&&Lr(u,""+lt):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(i.hasOwnProperty(ue)?lt!=null&&ue==="onScroll"&&ii("scroll",u):lt!=null&&M(u,ue,lt,De))}switch(E){case"input":K(u),Ke(u,R,!1);break;case"textarea":K(u),fn(u);break;case"option":R.value!=null&&u.setAttribute("value",""+Q(R.value));break;case"select":u.multiple=!!R.multiple,ue=R.value,ue!=null?ot(u,!!R.multiple,ue,!1):R.defaultValue!=null&&ot(u,!!R.multiple,R.defaultValue,!0);break;default:typeof q.onClick=="function"&&(u.onclick=Zf)}switch(E){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return se(h),null;case 6:if(u&&h.stateNode!=null)le(u,h,u.memoizedProps,R);else{if(typeof R!="string"&&h.stateNode===null)throw Error(t(166));if(E=Bl(Pu.current),Bl(Ps.current),Ml(h)){if(R=h.stateNode,E=h.memoizedProps,R[fs]=h,(ue=R.nodeValue!==E)&&(u=Ca,u!==null))switch(u.tag){case 3:Zd(R.nodeValue,E,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Zd(R.nodeValue,E,(u.mode&1)!==0)}ue&&(h.flags|=4)}else R=(E.nodeType===9?E:E.ownerDocument).createTextNode(R),R[fs]=h,h.stateNode=R}return se(h),null;case 13:if(oi(gi),R=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(li&&qa!==null&&(h.mode&1)!==0&&(h.flags&128)===0)uh(),gs(),h.flags|=98560,ue=!1;else if(ue=Ml(h),R!==null&&R.dehydrated!==null){if(u===null){if(!ue)throw Error(t(318));if(ue=h.memoizedState,ue=ue!==null?ue.dehydrated:null,!ue)throw Error(t(317));ue[fs]=h}else gs(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;se(h),ue=!1}else ms!==null&&(so(ms),ms=null),ue=!0;if(!ue)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=E,h):(R=R!==null,R!==(u!==null&&u.memoizedState!==null)&&R&&(h.child.flags|=8192,(h.mode&1)!==0&&(u===null||(gi.current&1)!==0?Gt===0&&(Gt=3):ma())),h.updateQueue!==null&&(h.flags|=4),se(h),null);case 4:return $l(),G(u,h),u===null&&Yd(h.stateNode.containerInfo),se(h),null;case 10:return fh(h.type._context),se(h),null;case 17:return Sa(h.type)&&ec(),se(h),null;case 19:if(oi(gi),ue=h.memoizedState,ue===null)return se(h),null;if(R=(h.flags&128)!==0,De=ue.rendering,De===null)if(R)de(ue,!1);else{if(Gt!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(De=ph(u),De!==null){for(h.flags|=128,de(ue,!1),R=De.updateQueue,R!==null&&(h.updateQueue=R,h.flags|=4),h.subtreeFlags=0,R=E,E=h.child;E!==null;)ue=E,u=R,ue.flags&=14680066,De=ue.alternate,De===null?(ue.childLanes=0,ue.lanes=u,ue.child=null,ue.subtreeFlags=0,ue.memoizedProps=null,ue.memoizedState=null,ue.updateQueue=null,ue.dependencies=null,ue.stateNode=null):(ue.childLanes=De.childLanes,ue.lanes=De.lanes,ue.child=De.child,ue.subtreeFlags=0,ue.deletions=null,ue.memoizedProps=De.memoizedProps,ue.memoizedState=De.memoizedState,ue.updateQueue=De.updateQueue,ue.type=De.type,u=De.dependencies,ue.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),E=E.sibling;return Hr(gi,gi.current&1|2),h.child}u=u.sibling}ue.tail!==null&&mi()>Ct&&(h.flags|=128,R=!0,de(ue,!1),h.lanes=4194304)}else{if(!R)if(u=ph(De),u!==null){if(h.flags|=128,R=!0,E=u.updateQueue,E!==null&&(h.updateQueue=E,h.flags|=4),de(ue,!0),ue.tail===null&&ue.tailMode==="hidden"&&!De.alternate&&!li)return se(h),null}else 2*mi()-ue.renderingStartTime>Ct&&E!==1073741824&&(h.flags|=128,R=!0,de(ue,!1),h.lanes=4194304);ue.isBackwards?(De.sibling=h.child,h.child=De):(E=ue.last,E!==null?E.sibling=De:h.child=De,ue.last=De)}return ue.tail!==null?(h=ue.tail,ue.rendering=h,ue.tail=h.sibling,ue.renderingStartTime=mi(),h.sibling=null,E=gi.current,Hr(gi,R?E&1|2:E&1),h):(se(h),null);case 22:case 23:return Fs(),R=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==R&&(h.flags|=8192),R&&(h.mode&1)!==0?(ct&1073741824)!==0&&(se(h),h.subtreeFlags&6&&(h.flags|=8192)):se(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function ge(u,h){switch(oh(h),h.tag){case 1:return Sa(h.type)&&ec(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return $l(),oi(_a),oi(da),vh(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 5:return Xg(h),null;case 13:if(oi(gi),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(t(340));gs()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return oi(gi),null;case 4:return $l(),null;case 10:return fh(h.type._context),null;case 22:case 23:return Fs(),null;case 24:return null;default:return null}}var Ie=!1,ee=!1,V=typeof WeakSet=="function"?WeakSet:Set,j=null;function X(u,h){var E=u.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(R){Mn(u,h,R)}else E.current=null}function pe(u,h,E){try{E()}catch(R){Mn(u,h,R)}}var Ae=!1;function be(u,h){if(Jf=Cf,u=Ag(),Hf(u)){if("selectionStart"in u)var E={start:u.selectionStart,end:u.selectionEnd};else e:{E=(E=u.ownerDocument)&&E.defaultView||window;var R=E.getSelection&&E.getSelection();if(R&&R.rangeCount!==0){E=R.anchorNode;var q=R.anchorOffset,ue=R.focusNode;R=R.focusOffset;try{E.nodeType,ue.nodeType}catch{E=null;break e}var De=0,Qe=-1,lt=-1,Ut=0,yn=0,_n=u,vn=null;t:for(;;){for(var zn;_n!==E||q!==0&&_n.nodeType!==3||(Qe=De+q),_n!==ue||R!==0&&_n.nodeType!==3||(lt=De+R),_n.nodeType===3&&(De+=_n.nodeValue.length),(zn=_n.firstChild)!==null;)vn=_n,_n=zn;for(;;){if(_n===u)break t;if(vn===E&&++Ut===q&&(Qe=De),vn===ue&&++yn===R&&(lt=De),(zn=_n.nextSibling)!==null)break;_n=vn,vn=_n.parentNode}_n=zn}E=Qe===-1||lt===-1?null:{start:Qe,end:lt}}else E=null}E=E||{start:0,end:0}}else E=null;for(Cg={focusedElem:u,selectionRange:E},Cf=!1,j=h;j!==null;)if(h=j,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,j=u;else for(;j!==null;){h=j;try{var Wn=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Wn!==null){var Xn=Wn.memoizedProps,$i=Wn.memoizedState,wt=h.stateNode,dt=wt.getSnapshotBeforeUpdate(h.elementType===h.type?Xn:La(h.type,Xn),$i);wt.__reactInternalSnapshotBeforeUpdate=dt}break;case 3:var Dt=h.stateNode.containerInfo;Dt.nodeType===1?Dt.textContent="":Dt.nodeType===9&&Dt.documentElement&&Dt.removeChild(Dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Rn){Mn(h,h.return,Rn)}if(u=h.sibling,u!==null){u.return=h.return,j=u;break}j=h.return}return Wn=Ae,Ae=!1,Wn}function Se(u,h,E){var R=h.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var q=R=R.next;do{if((q.tag&u)===u){var ue=q.destroy;q.destroy=void 0,ue!==void 0&&pe(h,E,ue)}q=q.next}while(q!==R)}}function Me(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var E=h=h.next;do{if((E.tag&u)===u){var R=E.create;E.destroy=R()}E=E.next}while(E!==h)}}function Fe(u){var h=u.ref;if(h!==null){var E=u.stateNode;switch(u.tag){case 5:u=E;break;default:u=E}typeof h=="function"?h(u):h.current=u}}function Z(u){var h=u.alternate;h!==null&&(u.alternate=null,Z(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&(delete h[fs],delete h[Jd],delete h[Dg],delete h[nh],delete h[$y])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function ne(u){return u.tag===5||u.tag===3||u.tag===4}function we(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||ne(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function _e(u,h,E){var R=u.tag;if(R===5||R===6)u=u.stateNode,h?E.nodeType===8?E.parentNode.insertBefore(u,h):E.insertBefore(u,h):(E.nodeType===8?(h=E.parentNode,h.insertBefore(u,E)):(h=E,h.appendChild(u)),E=E._reactRootContainer,E!=null||h.onclick!==null||(h.onclick=Zf));else if(R!==4&&(u=u.child,u!==null))for(_e(u,h,E),u=u.sibling;u!==null;)_e(u,h,E),u=u.sibling}function ae(u,h,E){var R=u.tag;if(R===5||R===6)u=u.stateNode,h?E.insertBefore(u,h):E.appendChild(u);else if(R!==4&&(u=u.child,u!==null))for(ae(u,h,E),u=u.sibling;u!==null;)ae(u,h,E),u=u.sibling}var me=null,ye=!1;function fe(u,h,E){for(E=E.child;E!==null;)ke(u,h,E),E=E.sibling}function ke(u,h,E){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Er,E)}catch{}switch(E.tag){case 5:ee||X(E,h);case 6:var R=me,q=ye;me=null,fe(u,h,E),me=R,ye=q,me!==null&&(ye?(u=me,E=E.stateNode,u.nodeType===8?u.parentNode.removeChild(E):u.removeChild(E)):me.removeChild(E.stateNode));break;case 18:me!==null&&(ye?(u=me,E=E.stateNode,u.nodeType===8?th(u.parentNode,E):u.nodeType===1&&th(u,E),Sl(u)):th(me,E.stateNode));break;case 4:R=me,q=ye,me=E.stateNode.containerInfo,ye=!0,fe(u,h,E),me=R,ye=q;break;case 0:case 11:case 14:case 15:if(!ee&&(R=E.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){q=R=R.next;do{var ue=q,De=ue.destroy;ue=ue.tag,De!==void 0&&((ue&2)!==0||(ue&4)!==0)&&pe(E,h,De),q=q.next}while(q!==R)}fe(u,h,E);break;case 1:if(!ee&&(X(E,h),R=E.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=E.memoizedProps,R.state=E.memoizedState,R.componentWillUnmount()}catch(Qe){Mn(E,h,Qe)}fe(u,h,E);break;case 21:fe(u,h,E);break;case 22:E.mode&1?(ee=(R=ee)||E.memoizedState!==null,fe(u,h,E),ee=R):fe(u,h,E);break;default:fe(u,h,E)}}function xe(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var E=u.stateNode;E===null&&(E=u.stateNode=new V),h.forEach(function(R){var q=bE.bind(null,u,R);E.has(R)||(E.add(R),R.then(q,q))})}}function je(u,h){var E=h.deletions;if(E!==null)for(var R=0;R<E.length;R++){var q=E[R];try{var ue=u,De=h,Qe=De;e:for(;Qe!==null;){switch(Qe.tag){case 5:me=Qe.stateNode,ye=!1;break e;case 3:me=Qe.stateNode.containerInfo,ye=!0;break e;case 4:me=Qe.stateNode.containerInfo,ye=!0;break e}Qe=Qe.return}if(me===null)throw Error(t(160));ke(ue,De,q),me=null,ye=!1;var lt=q.alternate;lt!==null&&(lt.return=null),q.return=null}catch(Ut){Mn(q,h,Ut)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)Ge(h,u),h=h.sibling}function Ge(u,h){var E=u.alternate,R=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(je(h,u),nt(u),R&4){try{Se(3,u,u.return),Me(3,u)}catch(Xn){Mn(u,u.return,Xn)}try{Se(5,u,u.return)}catch(Xn){Mn(u,u.return,Xn)}}break;case 1:je(h,u),nt(u),R&512&&E!==null&&X(E,E.return);break;case 5:if(je(h,u),nt(u),R&512&&E!==null&&X(E,E.return),u.flags&32){var q=u.stateNode;try{Lr(q,"")}catch(Xn){Mn(u,u.return,Xn)}}if(R&4&&(q=u.stateNode,q!=null)){var ue=u.memoizedProps,De=E!==null?E.memoizedProps:ue,Qe=u.type,lt=u.updateQueue;if(u.updateQueue=null,lt!==null)try{Qe==="input"&&ue.type==="radio"&&ue.name!=null&&Ve(q,ue),an(Qe,De);var Ut=an(Qe,ue);for(De=0;De<lt.length;De+=2){var yn=lt[De],_n=lt[De+1];yn==="style"?Bt(q,_n):yn==="dangerouslySetInnerHTML"?Fr(q,_n):yn==="children"?Lr(q,_n):M(q,yn,_n,Ut)}switch(Qe){case"input":Je(q,ue);break;case"textarea":tn(q,ue);break;case"select":var vn=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!ue.multiple;var zn=ue.value;zn!=null?ot(q,!!ue.multiple,zn,!1):vn!==!!ue.multiple&&(ue.defaultValue!=null?ot(q,!!ue.multiple,ue.defaultValue,!0):ot(q,!!ue.multiple,ue.multiple?[]:"",!1))}q[Jd]=ue}catch(Xn){Mn(u,u.return,Xn)}}break;case 6:if(je(h,u),nt(u),R&4){if(u.stateNode===null)throw Error(t(162));q=u.stateNode,ue=u.memoizedProps;try{q.nodeValue=ue}catch(Xn){Mn(u,u.return,Xn)}}break;case 3:if(je(h,u),nt(u),R&4&&E!==null&&E.memoizedState.isDehydrated)try{Sl(h.containerInfo)}catch(Xn){Mn(u,u.return,Xn)}break;case 4:je(h,u),nt(u);break;case 13:je(h,u),nt(u),q=u.child,q.flags&8192&&(ue=q.memoizedState!==null,q.stateNode.isHidden=ue,!ue||q.alternate!==null&&q.alternate.memoizedState!==null||(rt=mi())),R&4&&xe(u);break;case 22:if(yn=E!==null&&E.memoizedState!==null,u.mode&1?(ee=(Ut=ee)||yn,je(h,u),ee=Ut):je(h,u),nt(u),R&8192){if(Ut=u.memoizedState!==null,(u.stateNode.isHidden=Ut)&&!yn&&(u.mode&1)!==0)for(j=u,yn=u.child;yn!==null;){for(_n=j=yn;j!==null;){switch(vn=j,zn=vn.child,vn.tag){case 0:case 11:case 14:case 15:Se(4,vn,vn.return);break;case 1:X(vn,vn.return);var Wn=vn.stateNode;if(typeof Wn.componentWillUnmount=="function"){R=vn,E=vn.return;try{h=R,Wn.props=h.memoizedProps,Wn.state=h.memoizedState,Wn.componentWillUnmount()}catch(Xn){Mn(R,E,Xn)}}break;case 5:X(vn,vn.return);break;case 22:if(vn.memoizedState!==null){Yt(_n);continue}}zn!==null?(zn.return=vn,j=zn):Yt(_n)}yn=yn.sibling}e:for(yn=null,_n=u;;){if(_n.tag===5){if(yn===null){yn=_n;try{q=_n.stateNode,Ut?(ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none"):(Qe=_n.stateNode,lt=_n.memoizedProps.style,De=lt!=null&&lt.hasOwnProperty("display")?lt.display:null,Qe.style.display=$t("display",De))}catch(Xn){Mn(u,u.return,Xn)}}}else if(_n.tag===6){if(yn===null)try{_n.stateNode.nodeValue=Ut?"":_n.memoizedProps}catch(Xn){Mn(u,u.return,Xn)}}else if((_n.tag!==22&&_n.tag!==23||_n.memoizedState===null||_n===u)&&_n.child!==null){_n.child.return=_n,_n=_n.child;continue}if(_n===u)break e;for(;_n.sibling===null;){if(_n.return===null||_n.return===u)break e;yn===_n&&(yn=null),_n=_n.return}yn===_n&&(yn=null),_n.sibling.return=_n.return,_n=_n.sibling}}break;case 19:je(h,u),nt(u),R&4&&xe(u);break;case 21:break;default:je(h,u),nt(u)}}function nt(u){var h=u.flags;if(h&2){try{e:{for(var E=u.return;E!==null;){if(ne(E)){var R=E;break e}E=E.return}throw Error(t(160))}switch(R.tag){case 5:var q=R.stateNode;R.flags&32&&(Lr(q,""),R.flags&=-33);var ue=we(u);ae(u,ue,q);break;case 3:case 4:var De=R.stateNode.containerInfo,Qe=we(u);_e(u,Qe,De);break;default:throw Error(t(161))}}catch(lt){Mn(u,u.return,lt)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function ft(u,h,E){j=u,bt(u)}function bt(u,h,E){for(var R=(u.mode&1)!==0;j!==null;){var q=j,ue=q.child;if(q.tag===22&&R){var De=q.memoizedState!==null||Ie;if(!De){var Qe=q.alternate,lt=Qe!==null&&Qe.memoizedState!==null||ee;Qe=Ie;var Ut=ee;if(Ie=De,(ee=lt)&&!Ut)for(j=q;j!==null;)De=j,lt=De.child,De.tag===22&&De.memoizedState!==null?mn(q):lt!==null?(lt.return=De,j=lt):mn(q);for(;ue!==null;)j=ue,bt(ue),ue=ue.sibling;j=q,Ie=Qe,ee=Ut}qt(u)}else(q.subtreeFlags&8772)!==0&&ue!==null?(ue.return=q,j=ue):qt(u)}}function qt(u){for(;j!==null;){var h=j;if((h.flags&8772)!==0){var E=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:ee||Me(5,h);break;case 1:var R=h.stateNode;if(h.flags&4&&!ee)if(E===null)R.componentDidMount();else{var q=h.elementType===h.type?E.memoizedProps:La(h.type,E.memoizedProps);R.componentDidUpdate(q,E.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var ue=h.updateQueue;ue!==null&&Hg(h,ue,R);break;case 3:var De=h.updateQueue;if(De!==null){if(E=null,h.child!==null)switch(h.child.tag){case 5:E=h.child.stateNode;break;case 1:E=h.child.stateNode}Hg(h,De,E)}break;case 5:var Qe=h.stateNode;if(E===null&&h.flags&4){E=Qe;var lt=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":lt.autoFocus&&E.focus();break;case"img":lt.src&&(E.src=lt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Ut=h.alternate;if(Ut!==null){var yn=Ut.memoizedState;if(yn!==null){var _n=yn.dehydrated;_n!==null&&Sl(_n)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ee||h.flags&512&&Fe(h)}catch(vn){Mn(h,h.return,vn)}}if(h===u){j=null;break}if(E=h.sibling,E!==null){E.return=h.return,j=E;break}j=h.return}}function Yt(u){for(;j!==null;){var h=j;if(h===u){j=null;break}var E=h.sibling;if(E!==null){E.return=h.return,j=E;break}j=h.return}}function mn(u){for(;j!==null;){var h=j;try{switch(h.tag){case 0:case 11:case 15:var E=h.return;try{Me(4,h)}catch(lt){Mn(h,E,lt)}break;case 1:var R=h.stateNode;if(typeof R.componentDidMount=="function"){var q=h.return;try{R.componentDidMount()}catch(lt){Mn(h,q,lt)}}var ue=h.return;try{Fe(h)}catch(lt){Mn(h,ue,lt)}break;case 5:var De=h.return;try{Fe(h)}catch(lt){Mn(h,De,lt)}}}catch(lt){Mn(h,h.return,lt)}if(h===u){j=null;break}var Qe=h.sibling;if(Qe!==null){Qe.return=h.return,j=Qe;break}j=h.return}}var Nn=Math.ceil,Ft=B.ReactCurrentDispatcher,gn=B.ReactCurrentOwner,Sn=B.ReactCurrentBatchConfig,wn=0,On=null,We=null,ht=0,ct=0,_t=Do(0),Gt=0,In=null,mt=0,Qt=0,ln=0,en=null,Wt=null,rt=0,Ct=1/0,Zt=null,rn=!1,pt=null,Ce=null,et=!1,yt=null,tt=0,zt=0,Jt=null,kn=-1,jn=0;function xn(){return(wn&6)!==0?mi():kn!==-1?kn:kn=mi()}function Tr(u){return(u.mode&1)===0?1:(wn&2)!==0&&ht!==0?ht&-ht:Gy.transition!==null?(jn===0&&(jn=Ra()),jn):(u=Or,u!==0||(u=window.event,u=u===void 0?16:og(u.type)),u)}function zr(u,h,E,R){if(50<zt)throw zt=0,Jt=null,Error(t(185));xo(u,E,R),((wn&2)===0||u!==On)&&(u===On&&((wn&2)===0&&(Qt|=E),Gt===4&&Vi(u,ht)),ui(u,R),E===1&&wn===0&&(h.mode&1)===0&&(Ct=mi()+500,tc&&Mo()))}function ui(u,h){var E=u.callbackNode;Rf(u,h);var R=ss(u,u===On?ht:0);if(R===0)E!==null&&ji(E),u.callbackNode=null,u.callbackPriority=0;else if(h=R&-R,u.callbackPriority!==h){if(E!=null&&ji(E),h===1)u.tag===0?qy(oo.bind(null,u)):Fg(oo.bind(null,u)),zy(function(){(wn&6)===0&&Mo()}),E=null;else{switch(mu(R)){case 1:E=Io;break;case 4:E=fu;break;case 16:E=Kt;break;case 536870912:E=Gn;break;default:E=Kt}E=_k(E,Gi.bind(null,u))}u.callbackPriority=h,u.callbackNode=E}}function Gi(u,h){if(kn=-1,jn=0,(wn&6)!==0)throw Error(t(327));var E=u.callbackNode;if(bn()&&u.callbackNode!==E)return null;var R=ss(u,u===On?ht:0);if(R===0)return null;if((R&30)!==0||(R&u.expiredLanes)!==0||h)h=uo(u,R);else{h=R;var q=wn;wn|=2;var ue=lo();(On!==u||ht!==h)&&(Zt=null,Ct=mi()+500,Us(u,h));do try{wh();break}catch(Qe){Tc(u,Qe)}while(!0);Bg(),Ft.current=ue,wn=q,We!==null?h=0:(On=null,ht=0,h=Gt)}if(h!==0){if(h===2&&(q=Ro(u),q!==0&&(R=q,h=Os(u,q))),h===1)throw E=In,Us(u,0),Vi(u,R),ui(u,mi()),E;if(h===6)Vi(u,R);else{if(q=u.current.alternate,(R&30)===0&&!zu(q)&&(h=uo(u,R),h===2&&(ue=Ro(u),ue!==0&&(R=ue,h=Os(u,ue))),h===1))throw E=In,Us(u,0),Vi(u,R),ui(u,mi()),E;switch(u.finishedWork=q,u.finishedLanes=R,h){case 0:case 1:throw Error(t(345));case 2:at(u,Wt,Zt);break;case 3:if(Vi(u,R),(R&130023424)===R&&(h=rt+500-mi(),10<h)){if(ss(u,0)!==0)break;if(q=u.suspendedLanes,(q&R)!==R){xn(),u.pingedLanes|=u.suspendedLanes&q;break}u.timeoutHandle=Lg(at.bind(null,u,Wt,Zt),h);break}at(u,Wt,Zt);break;case 4:if(Vi(u,R),(R&4194240)===R)break;for(h=u.eventTimes,q=-1;0<R;){var De=31-Sr(R);ue=1<<De,De=h[De],De>q&&(q=De),R&=~ue}if(R=q,R=mi()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*Nn(R/1960))-R,10<R){u.timeoutHandle=Lg(at.bind(null,u,Wt,Zt),R);break}at(u,Wt,Zt);break;case 5:at(u,Wt,Zt);break;default:throw Error(t(329))}}}return ui(u,mi()),u.callbackNode===E?Gi.bind(null,u):null}function Os(u,h){var E=en;return u.current.memoizedState.isDehydrated&&(Us(u,h).flags|=256),u=uo(u,h),u!==2&&(h=Wt,Wt=E,h!==null&&so(h)),u}function so(u){Wt===null?Wt=u:Wt.push.apply(Wt,u)}function zu(u){for(var h=u;;){if(h.flags&16384){var E=h.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var R=0;R<E.length;R++){var q=E[R],ue=q.getSnapshot;q=q.value;try{if(!us(ue(),q))return!1}catch{return!1}}}if(E=h.child,h.subtreeFlags&16384&&E!==null)E.return=h,h=E;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Vi(u,h){for(h&=~ln,h&=~Qt,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var E=31-Sr(h),R=1<<E;u[E]=-1,h&=~R}}function oo(u){if((wn&6)!==0)throw Error(t(327));bn();var h=ss(u,0);if((h&1)===0)return ui(u,mi()),null;var E=uo(u,h);if(u.tag!==0&&E===2){var R=Ro(u);R!==0&&(h=R,E=Os(u,R))}if(E===1)throw E=In,Us(u,0),Vi(u,h),ui(u,mi()),E;if(E===6)throw Error(t(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,at(u,Wt,Zt),ui(u,mi()),null}function ha(u,h){var E=wn;wn|=1;try{return u(h)}finally{wn=E,wn===0&&(Ct=mi()+500,tc&&Mo())}}function Ki(u){yt!==null&&yt.tag===0&&(wn&6)===0&&bn();var h=wn;wn|=1;var E=Sn.transition,R=Or;try{if(Sn.transition=null,Or=1,u)return u()}finally{Or=R,Sn.transition=E,wn=h,(wn&6)===0&&Mo()}}function Fs(){ct=_t.current,oi(_t)}function Us(u,h){u.finishedWork=null,u.finishedLanes=0;var E=u.timeoutHandle;if(E!==-1&&(u.timeoutHandle=-1,Fy(E)),We!==null)for(E=We.return;E!==null;){var R=E;switch(oh(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&ec();break;case 3:$l(),oi(_a),oi(da),vh();break;case 5:Xg(R);break;case 4:$l();break;case 13:oi(gi);break;case 19:oi(gi);break;case 10:fh(R.type._context);break;case 22:case 23:Fs()}E=E.return}if(On=u,We=u=Bu(u.current,null),ht=ct=h,Gt=0,In=null,ln=Qt=mt=0,Wt=en=null,Fl!==null){for(h=0;h<Fl.length;h++)if(E=Fl[h],R=E.interleaved,R!==null){E.interleaved=null;var q=R.next,ue=E.pending;if(ue!==null){var De=ue.next;ue.next=q,R.next=De}E.pending=R}Fl=null}return u}function Tc(u,h){do{var E=We;try{if(Bg(),yh.current=Sh,Mu){for(var R=pi.memoizedState;R!==null;){var q=R.queue;q!==null&&(q.pending=null),R=R.next}Mu=!1}if(jl=0,ei=Bi=pi=null,fc=!1,Ou=0,gn.current=null,E===null||E.return===null){Gt=1,In=h,We=null;break}e:{var ue=u,De=E.return,Qe=E,lt=h;if(h=ht,Qe.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var Ut=lt,yn=Qe,_n=yn.tag;if((yn.mode&1)===0&&(_n===0||_n===11||_n===15)){var vn=yn.alternate;vn?(yn.updateQueue=vn.updateQueue,yn.memoizedState=vn.memoizedState,yn.lanes=vn.lanes):(yn.updateQueue=null,yn.memoizedState=null)}var zn=lp(De);if(zn!==null){zn.flags&=-257,hE(zn,De,Qe,ue,h),zn.mode&1&&fE(ue,Ut,h),h=zn,lt=Ut;var Wn=h.updateQueue;if(Wn===null){var Xn=new Set;Xn.add(lt),h.updateQueue=Xn}else Wn.add(lt);break e}else{if((h&1)===0){fE(ue,Ut,h),ma();break e}lt=Error(t(426))}}else if(li&&Qe.mode&1){var $i=lp(De);if($i!==null){($i.flags&65536)===0&&($i.flags|=256),hE($i,De,Qe,ue,h),dh(Uu(lt,Qe));break e}}ue=lt=Uu(lt,Qe),Gt!==4&&(Gt=2),en===null?en=[ue]:en.push(ue),ue=De;do{switch(ue.tag){case 3:ue.flags|=65536,h&=-h,ue.lanes|=h;var wt=cE(ue,lt,h);qg(ue,wt);break e;case 1:Qe=lt;var dt=ue.type,Dt=ue.stateNode;if((ue.flags&128)===0&&(typeof dt.getDerivedStateFromError=="function"||Dt!==null&&typeof Dt.componentDidCatch=="function"&&(Ce===null||!Ce.has(Dt)))){ue.flags|=65536,h&=-h,ue.lanes|=h;var Rn=op(ue,Qe,h);qg(ue,Rn);break e}}ue=ue.return}while(ue!==null)}Sc(E)}catch(er){h=er,We===E&&E!==null&&(We=E=E.return);continue}break}while(!0)}function lo(){var u=Ft.current;return Ft.current=Sh,u===null?Sh:u}function ma(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),On===null||(mt&268435455)===0&&(Qt&268435455)===0||Vi(On,ht)}function uo(u,h){var E=wn;wn|=2;var R=lo();(On!==u||ht!==h)&&(Zt=null,Us(u,h));do try{_c();break}catch(q){Tc(u,q)}while(!0);if(Bg(),wn=E,Ft.current=R,We!==null)throw Error(t(261));return On=null,ht=0,Gt}function _c(){for(;We!==null;)cp(We)}function wh(){for(;We!==null&&!wf();)cp(We)}function cp(u){var h=Ih(u.alternate,u,ct);u.memoizedProps=u.pendingProps,h===null?Sc(u):We=h,gn.current=null}function Sc(u){var h=u;do{var E=h.alternate;if(u=h.return,(h.flags&32768)===0){if(E=he(E,h,ct),E!==null){We=E;return}}else{if(E=ge(E,h),E!==null){E.flags&=32767,We=E;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Gt=6,We=null;return}}if(h=h.sibling,h!==null){We=h;return}We=h=u}while(h!==null);Gt===0&&(Gt=5)}function at(u,h,E){var R=Or,q=Sn.transition;try{Sn.transition=null,Or=1,Vt(u,h,E,R)}finally{Sn.transition=q,Or=R}return null}function Vt(u,h,E,R){do bn();while(yt!==null);if((wn&6)!==0)throw Error(t(327));E=u.finishedWork;var q=u.finishedLanes;if(E===null)return null;if(u.finishedWork=null,u.finishedLanes=0,E===u.current)throw Error(t(177));u.callbackNode=null,u.callbackPriority=0;var ue=E.lanes|E.childLanes;if(Ka(u,ue),u===On&&(We=On=null,ht=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||et||(et=!0,_k(Kt,function(){return bn(),null})),ue=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||ue){ue=Sn.transition,Sn.transition=null;var De=Or;Or=1;var Qe=wn;wn|=4,gn.current=null,be(u,E),Ge(E,u),a_(Cg),Cf=!!Jf,Cg=Jf=null,u.current=E,ft(E),If(),wn=Qe,Or=De,Sn.transition=ue}else u.current=E;if(et&&(et=!1,yt=u,tt=q),ue=u.pendingLanes,ue===0&&(Ce=null),Ri(E.stateNode),ui(u,mi()),h!==null)for(R=u.onRecoverableError,E=0;E<h.length;E++)q=h[E],R(q.value,{componentStack:q.stack,digest:q.digest});if(rn)throw rn=!1,u=pt,pt=null,u;return(tt&1)!==0&&u.tag!==0&&bn(),ue=u.pendingLanes,(ue&1)!==0?u===Jt?zt++:(zt=0,Jt=u):zt=0,Mo(),null}function bn(){if(yt!==null){var u=mu(tt),h=Sn.transition,E=Or;try{if(Sn.transition=null,Or=16>u?16:u,yt===null)var R=!1;else{if(u=yt,yt=null,tt=0,(wn&6)!==0)throw Error(t(331));var q=wn;for(wn|=4,j=u.current;j!==null;){var ue=j,De=ue.child;if((j.flags&16)!==0){var Qe=ue.deletions;if(Qe!==null){for(var lt=0;lt<Qe.length;lt++){var Ut=Qe[lt];for(j=Ut;j!==null;){var yn=j;switch(yn.tag){case 0:case 11:case 15:Se(8,yn,ue)}var _n=yn.child;if(_n!==null)_n.return=yn,j=_n;else for(;j!==null;){yn=j;var vn=yn.sibling,zn=yn.return;if(Z(yn),yn===Ut){j=null;break}if(vn!==null){vn.return=zn,j=vn;break}j=zn}}}var Wn=ue.alternate;if(Wn!==null){var Xn=Wn.child;if(Xn!==null){Wn.child=null;do{var $i=Xn.sibling;Xn.sibling=null,Xn=$i}while(Xn!==null)}}j=ue}}if((ue.subtreeFlags&2064)!==0&&De!==null)De.return=ue,j=De;else e:for(;j!==null;){if(ue=j,(ue.flags&2048)!==0)switch(ue.tag){case 0:case 11:case 15:Se(9,ue,ue.return)}var wt=ue.sibling;if(wt!==null){wt.return=ue.return,j=wt;break e}j=ue.return}}var dt=u.current;for(j=dt;j!==null;){De=j;var Dt=De.child;if((De.subtreeFlags&2064)!==0&&Dt!==null)Dt.return=De,j=Dt;else e:for(De=dt;j!==null;){if(Qe=j,(Qe.flags&2048)!==0)try{switch(Qe.tag){case 0:case 11:case 15:Me(9,Qe)}}catch(er){Mn(Qe,Qe.return,er)}if(Qe===De){j=null;break e}var Rn=Qe.sibling;if(Rn!==null){Rn.return=Qe.return,j=Rn;break e}j=Qe.return}}if(wn=q,Mo(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Er,u)}catch{}R=!0}return R}finally{Or=E,Sn.transition=h}}return!1}function Ln(u,h,E){h=Uu(E,h),h=cE(u,h,1),u=ao(u,h,1),h=xn(),u!==null&&(xo(u,1,h),ui(u,h))}function Mn(u,h,E){if(u.tag===3)Ln(u,u,E);else for(;h!==null;){if(h.tag===3){Ln(h,u,E);break}else if(h.tag===1){var R=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Ce===null||!Ce.has(R))){u=Uu(E,u),u=op(h,u,1),h=ao(h,u,1),u=xn(),h!==null&&(xo(h,1,u),ui(h,u));break}}h=h.return}}function br(u,h,E){var R=u.pingCache;R!==null&&R.delete(h),h=xn(),u.pingedLanes|=u.suspendedLanes&E,On===u&&(ht&E)===E&&(Gt===4||Gt===3&&(ht&130023424)===ht&&500>mi()-rt?Us(u,0):ln|=E),ui(u,h)}function vi(u,h){h===0&&((u.mode&1)===0?h=1:(h=Ba,Ba<<=1,(Ba&130023424)===0&&(Ba=4194304)));var E=xn();u=Ns(u,h),u!==null&&(xo(u,h,E),ui(u,E))}function Na(u){var h=u.memoizedState,E=0;h!==null&&(E=h.retryLane),vi(u,E)}function bE(u,h){var E=0;switch(u.tag){case 13:var R=u.stateNode,q=u.memoizedState;q!==null&&(E=q.retryLane);break;case 19:R=u.stateNode;break;default:throw Error(t(314))}R!==null&&R.delete(h),vi(u,E)}var Ih;Ih=function(u,h,E){if(u!==null)if(u.memoizedProps!==h.pendingProps||_a.current)Da=!0;else{if((u.lanes&E)===0&&(h.flags&128)===0)return Da=!1,N(u,h,E);Da=(u.flags&131072)!==0}else Da=!1,li&&(h.flags&1048576)!==0&&Dr(h,nc,h.index);switch(h.lanes=0,h.tag){case 2:var R=h.type;W(u,h),u=h.pendingProps;var q=Cu(h,da.current);Du(h,E),q=Eh(null,h,R,u,q,E);var ue=ep();return h.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Sa(R)?(ue=!0,ih(h)):ue=!1,h.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,ic(h),q.updater=oc,h.stateNode=q,q._reactInternals=h,Kg(h,R,u,E),h=Ec(null,h,R,!0,ue,E)):(h.tag=0,li&&ue&&sh(h),fa(null,h,q,E),h=h.child),h;case 16:R=h.elementType;e:{switch(W(u,h),u=h.pendingProps,q=R._init,R=q(R._payload),h.type=R,q=h.tag=lO(R),u=La(R,u),q){case 0:h=Ah(null,h,R,u,E);break e;case 1:h=yE(null,h,R,u,E);break e;case 11:h=gE(null,h,R,u,E);break e;case 14:h=up(null,h,R,La(R.type,u),E);break e}throw Error(t(306,R,""))}return h;case 0:return R=h.type,q=h.pendingProps,q=h.elementType===R?q:La(R,q),Ah(u,h,R,q,E);case 1:return R=h.type,q=h.pendingProps,q=h.elementType===R?q:La(R,q),yE(u,h,R,q,E);case 3:e:{if(bc(h),u===null)throw Error(t(387));R=h.pendingProps,ue=h.memoizedState,q=ue.element,jg(u,h),mh(h,R,null,E);var De=h.memoizedState;if(R=De.element,ue.isDehydrated)if(ue={element:R,isDehydrated:!1,cache:De.cache,pendingSuspenseBoundaries:De.pendingSuspenseBoundaries,transitions:De.transitions},h.updateQueue.baseState=ue,h.memoizedState=ue,h.flags&256){q=Uu(Error(t(423)),h),h=EE(u,h,R,E,q);break e}else if(R!==q){q=Uu(Error(t(424)),h),h=EE(u,h,R,E,q);break e}else for(qa=eo(h.stateNode.containerInfo.firstChild),Ca=h,li=!0,ms=null,E=Wg(h,null,R,E),h.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(gs(),R===q){h=Y(u,h,E);break e}fa(u,h,R,E)}h=h.child}return h;case 5:return Qg(h),u===null&&zg(h),R=h.type,q=h.pendingProps,ue=u!==null?u.memoizedProps:null,De=q.children,eh(R,q)?De=null:ue!==null&&eh(R,ue)&&(h.flags|=32),vE(u,h),fa(u,h,De,E),h.child;case 6:return u===null&&zg(h),null;case 13:return T(u,h,E);case 4:return gh(h,h.stateNode.containerInfo),R=h.pendingProps,u===null?h.child=zl(h,null,R,E):fa(u,h,R,E),h.child;case 11:return R=h.type,q=h.pendingProps,q=h.elementType===R?q:La(R,q),gE(u,h,R,q,E);case 7:return fa(u,h,h.pendingProps,E),h.child;case 8:return fa(u,h,h.pendingProps.children,E),h.child;case 12:return fa(u,h,h.pendingProps.children,E),h.child;case 10:e:{if(R=h.type._context,q=h.pendingProps,ue=h.memoizedProps,De=q.value,Hr(Ol,R._currentValue),R._currentValue=De,ue!==null)if(us(ue.value,De)){if(ue.children===q.children&&!_a.current){h=Y(u,h,E);break e}}else for(ue=h.child,ue!==null&&(ue.return=h);ue!==null;){var Qe=ue.dependencies;if(Qe!==null){De=ue.child;for(var lt=Qe.firstContext;lt!==null;){if(lt.context===R){if(ue.tag===1){lt=io(-1,E&-E),lt.tag=2;var Ut=ue.updateQueue;if(Ut!==null){Ut=Ut.shared;var yn=Ut.pending;yn===null?lt.next=lt:(lt.next=yn.next,yn.next=lt),Ut.pending=lt}}ue.lanes|=E,lt=ue.alternate,lt!==null&&(lt.lanes|=E),$g(ue.return,E,h),Qe.lanes|=E;break}lt=lt.next}}else if(ue.tag===10)De=ue.type===h.type?null:ue.child;else if(ue.tag===18){if(De=ue.return,De===null)throw Error(t(341));De.lanes|=E,Qe=De.alternate,Qe!==null&&(Qe.lanes|=E),$g(De,E,h),De=ue.sibling}else De=ue.child;if(De!==null)De.return=ue;else for(De=ue;De!==null;){if(De===h){De=null;break}if(ue=De.sibling,ue!==null){ue.return=De.return,De=ue;break}De=De.return}ue=De}fa(u,h,q.children,E),h=h.child}return h;case 9:return q=h.type,R=h.pendingProps.children,Du(h,E),q=Ha(q),R=R(q),h.flags|=1,fa(u,h,R,E),h.child;case 14:return R=h.type,q=La(R,h.pendingProps),q=La(R.type,q),up(u,h,R,q,E);case 15:return pE(u,h,h.type,h.pendingProps,E);case 17:return R=h.type,q=h.pendingProps,q=h.elementType===R?q:La(R,q),W(u,h),h.tag=1,Sa(R)?(u=!0,ih(h)):u=!1,Du(h,E),Yy(h,R,q),Kg(h,R,q,E),Ec(null,h,R,!0,u,E);case 19:return x(u,h,E);case 22:return dp(u,h,E)}throw Error(t(156,h.tag))};function _k(u,h){return na(u,h)}function oO(u,h,E,R){this.tag=u,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(u,h,E,R){return new oO(u,h,E,R)}function f_(u){return u=u.prototype,!(!u||!u.isReactComponent)}function lO(u){if(typeof u=="function")return f_(u)?1:0;if(u!=null){if(u=u.$$typeof,u===Le)return 11;if(u===Ue)return 14}return 2}function Bu(u,h){var E=u.alternate;return E===null?(E=zs(u.tag,h,u.key,u.mode),E.elementType=u.elementType,E.type=u.type,E.stateNode=u.stateNode,E.alternate=u,u.alternate=E):(E.pendingProps=h,E.type=u.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=u.flags&14680064,E.childLanes=u.childLanes,E.lanes=u.lanes,E.child=u.child,E.memoizedProps=u.memoizedProps,E.memoizedState=u.memoizedState,E.updateQueue=u.updateQueue,h=u.dependencies,E.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},E.sibling=u.sibling,E.index=u.index,E.ref=u.ref,E}function TE(u,h,E,R,q,ue){var De=2;if(R=u,typeof u=="function")f_(u)&&(De=1);else if(typeof u=="string")De=5;else e:switch(u){case w:return Ac(E.children,q,ue,h);case O:De=8,q|=8;break;case oe:return u=zs(12,E,h,q|2),u.elementType=oe,u.lanes=ue,u;case te:return u=zs(13,E,h,q),u.elementType=te,u.lanes=ue,u;case $e:return u=zs(19,E,h,q),u.elementType=$e,u.lanes=ue,u;case Xe:return _E(E,q,ue,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case D:De=10;break e;case ve:De=9;break e;case Le:De=11;break e;case Ue:De=14;break e;case Re:De=16,R=null;break e}throw Error(t(130,u==null?u:typeof u,""))}return h=zs(De,E,h,q),h.elementType=u,h.type=R,h.lanes=ue,h}function Ac(u,h,E,R){return u=zs(7,u,R,h),u.lanes=E,u}function _E(u,h,E,R){return u=zs(22,u,R,h),u.elementType=Xe,u.lanes=E,u.stateNode={isHidden:!1},u}function h_(u,h,E){return u=zs(6,u,null,h),u.lanes=E,u}function m_(u,h,E){return h=zs(4,u.children!==null?u.children:[],u.key,h),h.lanes=E,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function uO(u,h,E,R,q){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rs(0),this.expirationTimes=Rs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.identifierPrefix=R,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function g_(u,h,E,R,q,ue,De,Qe,lt){return u=new uO(u,h,E,Qe,lt),h===1?(h=1,ue===!0&&(h|=8)):h=0,ue=zs(3,null,null,h),u.current=ue,ue.stateNode=u,ue.memoizedState={element:R,isDehydrated:E,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(ue),u}function dO(u,h,E){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:R==null?null:""+R,children:u,containerInfo:h,implementation:E}}function Sk(u){if(!u)return No;u=u._reactInternals;e:{if(Zr(u)!==u||u.tag!==1)throw Error(t(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Sa(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(u.tag===1){var E=u.type;if(Sa(E))return Pg(u,E,h)}return h}function Ak(u,h,E,R,q,ue,De,Qe,lt){return u=g_(E,R,!0,u,q,ue,De,Qe,lt),u.context=Sk(null),E=u.current,R=xn(),q=Tr(E),ue=io(R,q),ue.callback=h??null,ao(E,ue,q),u.current.lanes=q,xo(u,q,R),ui(u,R),u}function SE(u,h,E,R){var q=h.current,ue=xn(),De=Tr(q);return E=Sk(E),h.context===null?h.context=E:h.pendingContext=E,h=io(ue,De),h.payload={element:u},R=R===void 0?null:R,R!==null&&(h.callback=R),u=ao(q,h,De),u!==null&&(zr(u,q,De,ue),ac(u,q,De)),De}function AE(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function wk(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var E=u.retryLane;u.retryLane=E!==0&&E<h?E:h}}function p_(u,h){wk(u,h),(u=u.alternate)&&wk(u,h)}function cO(){return null}var Ik=typeof reportError=="function"?reportError:function(u){console.error(u)};function v_(u){this._internalRoot=u}wE.prototype.render=v_.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(t(409));SE(u,h,null,null)},wE.prototype.unmount=v_.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Ki(function(){SE(null,u,null,null)}),h[Ls]=null}};function wE(u){this._internalRoot=u}wE.prototype.unstable_scheduleHydration=function(u){if(u){var h=vu();u={blockedOn:null,target:u,priority:h};for(var E=0;E<zi.length&&h!==0&&h<zi[E].priority;E++);zi.splice(E,0,u),E===0&&zd(u)}};function y_(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function IE(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function kk(){}function fO(u,h,E,R,q){if(q){if(typeof R=="function"){var ue=R;R=function(){var Ut=AE(De);ue.call(Ut)}}var De=Ak(h,R,u,0,null,!1,!1,"",kk);return u._reactRootContainer=De,u[Ls]=De.current,Yd(u.nodeType===8?u.parentNode:u),Ki(),De}for(;q=u.lastChild;)u.removeChild(q);if(typeof R=="function"){var Qe=R;R=function(){var Ut=AE(lt);Qe.call(Ut)}}var lt=g_(u,0,!1,null,null,!1,!1,"",kk);return u._reactRootContainer=lt,u[Ls]=lt.current,Yd(u.nodeType===8?u.parentNode:u),Ki(function(){SE(h,lt,E,R)}),lt}function kE(u,h,E,R,q){var ue=E._reactRootContainer;if(ue){var De=ue;if(typeof q=="function"){var Qe=q;q=function(){var lt=AE(De);Qe.call(lt)}}SE(h,De,u,q)}else De=fO(E,h,u,q,R);return AE(De)}gu=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var E=xi(h.pendingLanes);E!==0&&(hu(h,E|1),ui(h,mi()),(wn&6)===0&&(Ct=mi()+500,Mo()))}break;case 13:Ki(function(){var R=Ns(u,1);if(R!==null){var q=xn();zr(R,u,1,q)}}),p_(u,1)}},pu=function(u){if(u.tag===13){var h=Ns(u,134217728);if(h!==null){var E=xn();zr(h,u,134217728,E)}p_(u,134217728)}},Fd=function(u){if(u.tag===13){var h=Tr(u),E=Ns(u,h);if(E!==null){var R=xn();zr(E,u,h,R)}p_(u,h)}},vu=function(){return Or},Ud=function(u,h){var E=Or;try{return Or=u,h()}finally{Or=E}},hn=function(u,h,E){switch(h){case"input":if(Je(u,E),h=E.name,E.type==="radio"&&h!=null){for(E=u;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<E.length;h++){var R=E[h];if(R!==u&&R.form===u.form){var q=rh(R);if(!q)throw Error(t(90));Ee(R),Je(R,q)}}}break;case"textarea":tn(u,E);break;case"select":h=E.value,h!=null&&ot(u,!!E.multiple,h,!1)}},Pn=ha,Jn=Ki;var hO={usingClientEntryPoint:!1,Events:[ku,Ru,rh,ar,Xt,ha]},fp={findFiberByHostInstance:Dl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mO={bundleType:fp.bundleType,version:fp.version,rendererPackageName:fp.rendererPackageName,rendererConfig:fp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=ks(u),u===null?null:u.stateNode},findFiberByHostInstance:fp.findFiberByHostInstance||cO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var RE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!RE.isDisabled&&RE.supportsFiber)try{Er=RE.inject(mO),lr=RE}catch{}}return Za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hO,Za.createPortal=function(u,h){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y_(h))throw Error(t(200));return dO(u,h,null,E)},Za.createRoot=function(u,h){if(!y_(u))throw Error(t(299));var E=!1,R="",q=Ik;return h!=null&&(h.unstable_strictMode===!0&&(E=!0),h.identifierPrefix!==void 0&&(R=h.identifierPrefix),h.onRecoverableError!==void 0&&(q=h.onRecoverableError)),h=g_(u,1,!1,null,null,E,!1,R,q),u[Ls]=h.current,Yd(u.nodeType===8?u.parentNode:u),new v_(h)},Za.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(t(188)):(u=Object.keys(u).join(","),Error(t(268,u)));return u=ks(h),u=u===null?null:u.stateNode,u},Za.flushSync=function(u){return Ki(u)},Za.hydrate=function(u,h,E){if(!IE(h))throw Error(t(200));return kE(null,u,h,!0,E)},Za.hydrateRoot=function(u,h,E){if(!y_(u))throw Error(t(405));var R=E!=null&&E.hydratedSources||null,q=!1,ue="",De=Ik;if(E!=null&&(E.unstable_strictMode===!0&&(q=!0),E.identifierPrefix!==void 0&&(ue=E.identifierPrefix),E.onRecoverableError!==void 0&&(De=E.onRecoverableError)),h=Ak(h,null,u,1,E??null,q,!1,ue,De),u[Ls]=h.current,Yd(u),R)for(u=0;u<R.length;u++)E=R[u],q=E._getVersion,q=q(E._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[E,q]:h.mutableSourceEagerHydrationData.push(E,q);return new wE(h)},Za.render=function(u,h,E){if(!IE(h))throw Error(t(200));return kE(null,u,h,!1,E)},Za.unmountComponentAtNode=function(u){if(!IE(u))throw Error(t(40));return u._reactRootContainer?(Ki(function(){kE(null,null,u,!1,function(){u._reactRootContainer=null,u[Ls]=null})}),!0):!1},Za.unstable_batchedUpdates=ha,Za.unstable_renderSubtreeIntoContainer=function(u,h,E,R){if(!IE(E))throw Error(t(200));if(u==null||u._reactInternals===void 0)throw Error(t(38));return kE(u,h,E,!1,R)},Za.version="18.2.0-next-9e3b772b8-20220608",Za}var Ok;function kO(){if(Ok)return __.exports;Ok=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),__.exports=IO(),__.exports}var Fk;function RO(){if(Fk)return CE;Fk=1;var n=kO();return CE.createRoot=n.createRoot,CE.hydrateRoot=n.hydrateRoot,CE}var j7=RO();const xO="modulepreload",CO=function(n){return"/GreatOxy.web/"+n},Uk={},go=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(t.map(f=>{if(f=CO(f),f in Uk)return;Uk[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":xO,m||(p.as="script"),p.crossOrigin="",p.href=f,c&&p.setAttribute("nonce",c),document.head.appendChild(p),m)return new Promise((y,v)=>{p.addEventListener("load",y),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},SC=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,zk=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,Bk=/\.(m3u8)($|\?)/i,LO=/\.(mpd)($|\?)/i,DO=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,NO=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,PO=/vimeo\.com\/(?!progressive_redirect).+/,MO=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,OO=/open\.spotify\.com\/(\w+)\/(\w+)/i,FO=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,UO=/tiktok\.com\/(?:@[^/]+\/video\/)?(\d+)(?:\/([\w-]+))?/,ev=(n,e)=>{if(Array.isArray(n)){for(const t of n)if(typeof t=="string"&&ev(t,e)||ev(t.src,e))return!0;return!1}return e(n)},Fo={html:n=>ev(n,e=>SC.test(e)||zk.test(e)),hls:n=>ev(n,e=>Bk.test(e)),dash:n=>ev(n,e=>LO.test(e)),mux:n=>DO.test(n),youtube:n=>NO.test(n),vimeo:n=>PO.test(n)&&!zk.test(n)&&!Bk.test(n),wistia:n=>MO.test(n),spotify:n=>OO.test(n),twitch:n=>FO.test(n),tiktok:n=>UO.test(n)},zO=jr.forwardRef((n,e)=>{const t=SC.test(`${n.src}`)?"audio":"video";return jr.createElement(t,{...n,ref:e},n.children)});var BO=zO;const $O=[{key:"hls",name:"hls.js",canPlay:Fo.hls,canEnablePIP:()=>!0,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>SB),void 0))},{key:"dash",name:"dash.js",canPlay:Fo.dash,canEnablePIP:()=>!0,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>xB),void 0))},{key:"mux",name:"Mux",canPlay:Fo.mux,canEnablePIP:()=>!0,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>wH),void 0))},{key:"youtube",name:"YouTube",canPlay:Fo.youtube,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>HH),void 0))},{key:"vimeo",name:"Vimeo",canPlay:Fo.vimeo,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>IG),void 0))},{key:"wistia",name:"Wistia",canPlay:Fo.wistia,canEnablePIP:()=>!0,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>FG),void 0))},{key:"spotify",name:"Spotify",canPlay:Fo.spotify,canEnablePIP:()=>!1,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>ZG),void 0))},{key:"twitch",name:"Twitch",canPlay:Fo.twitch,canEnablePIP:()=>!1,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>d7),void 0))},{key:"tiktok",name:"TikTok",canPlay:Fo.tiktok,canEnablePIP:()=>!1,player:bi.lazy(()=>go(()=>Promise.resolve().then(()=>S7),void 0))},{key:"html",name:"html",canPlay:Fo.html,canEnablePIP:()=>!0,player:BO}];var NS=$O;const jO={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},AC=jr.forwardRef((n,e)=>{const{playing:t,pip:r}=n,i=n.activePlayer,o=bi.useRef(null),l=bi.useRef(!0);bi.useEffect(()=>{var m,g;o.current&&(o.current.paused&&t===!0&&o.current.play(),!o.current.paused&&t===!1&&o.current.pause(),o.current.playbackRate=(m=n.playbackRate)!=null?m:1,o.current.volume=(g=n.volume)!=null?g:1)}),bi.useEffect(()=>{var m,g,p,y,v;if(!(!o.current||!globalThis.document)){if(r&&!document.pictureInPictureElement)try{(g=(m=o.current).requestPictureInPicture)==null||g.call(m)}catch{}if(!r&&document.pictureInPictureElement)try{(y=(p=o.current).exitPictureInPicture)==null||y.call(p),(v=document.exitPictureInPicture)==null||v.call(document)}catch{}}},[r]);const d=m=>{var g,p;l.current=!0,(g=n.onReady)==null||g.call(n),(p=n.onLoadStart)==null||p.call(n,m)},c=m=>{var g,p;l.current&&(l.current=!1,(g=n.onStart)==null||g.call(n,m)),(p=n.onPlay)==null||p.call(n,m)};if(!i)return null;const f={};for(const m in n)m.startsWith("on")&&(f[m]=n[m]);return jr.createElement(i,{...f,style:n.style,className:n.className,slot:n.slot,ref:bi.useCallback(m=>{o.current=m,typeof e=="function"?e(m):e!==null&&(e.current=m)},[e]),src:n.src,crossOrigin:n.crossOrigin,preload:n.preload,controls:n.controls,muted:n.muted,autoPlay:n.autoPlay,loop:n.loop,playsInline:n.playsInline,config:n.config,onLoadStart:d,onPlay:c},n.children)});AC.displayName="Player";var qO=AC;const HO=bi.lazy(()=>go(()=>Promise.resolve().then(()=>I7),void 0)),mp=[],GO=(n,e)=>{const t=i=>{for(const o of[...mp,...n])if(i&&o.canPlay(i))return o;return e||null},r=jr.forwardRef((i,o)=>{const l={...jO,...i},{src:d,slot:c,className:f,style:m,width:g,height:p,fallback:y,wrapper:v}=l,[A,I]=bi.useState(!!l.light);bi.useEffect(()=>{l.light?I(!0):I(!1)},[l.light]);const P=L=>{var w;I(!1),(w=l.onClickPreview)==null||w.call(l,L)},U=L=>{if(!L)return null;const{light:w,playIcon:O,previewTabIndex:oe,oEmbedUrl:D,previewAriaLabel:ve}=l;return jr.createElement(HO,{src:L,light:w,playIcon:O,previewTabIndex:oe,previewAriaLabel:ve,oEmbedUrl:D,onClickPreview:P})},M=L=>{var w,O;const oe=t(L);if(!oe)return null;const{style:D,width:ve,height:Le,wrapper:te}=l,$e=(w=l.config)==null?void 0:w[oe.key];return jr.createElement(qO,{...l,ref:o,activePlayer:(O=oe.player)!=null?O:oe,slot:te?void 0:c,className:te?void 0:f,style:te?{display:"block",width:"100%",height:"100%"}:{display:"block",width:ve,height:Le,...D},config:$e})},B=v??$k,ie=y===!1?$k:bi.Suspense;return jr.createElement(B,{slot:c,className:f,style:{width:g,height:p,...m}},jr.createElement(ie,{fallback:y},A?U(d):M(d)))});return r.displayName="ReactPlayer",r.addCustomPlayer=i=>{mp.push(i)},r.removeCustomPlayers=()=>{mp.length=0},r.canPlay=i=>{if(i){for(const o of[...mp,...n])if(o.canPlay(i))return!0}return!1},r.canEnablePIP=i=>{var o;if(i){for(const l of[...mp,...n])if(l.canPlay(i)&&((o=l.canEnablePIP)!=null&&o.call(l)))return!0}return!1},r},$k=({children:n})=>n,VO=NS[NS.length-1];var q7=GO(NS,VO),wC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jk=jr.createContext&&jr.createContext(wC),KO=["attr","size","title"];function YO(n,e){if(n==null)return{};var t=WO(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function WO(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function I0(){return I0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},I0.apply(this,arguments)}function qk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function k0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(t),!0).forEach(function(r){QO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function QO(n,e,t){return e=XO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XO(n){var e=ZO(n,"string");return typeof e=="symbol"?e:e+""}function ZO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IC(n){return n&&n.map((e,t)=>jr.createElement(e.tag,k0({key:t},e.attr),IC(e.child)))}function JO(n){return e=>jr.createElement(e2,I0({attr:k0({},n.attr)},e),IC(n.child))}function e2(n){var e=t=>{var{attr:r,size:i,title:o}=n,l=YO(n,KO),d=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),jr.createElement("svg",I0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:c,style:k0(k0({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&jr.createElement("title",null,o),n.children)};return jk!==void 0?jr.createElement(jk.Consumer,null,t=>e(t)):e(wC)}function H7(n){return JO({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}const t2=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],kC=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function n2(n){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${NC(n)}></audio>
    </slot>
    <slot></slot>
  `}function r2(n){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${NC(n)}></video>
    </slot>
    <slot></slot>
  `}function DC(n,{tag:e,is:t}){var o,l,d,c,f,RC,g,p,y,v,A,Dc,PS,xC,MS,CC,LC;const r=(l=(o=globalThis.document)==null?void 0:o.createElement)==null?void 0:l.call(o,e,{is:t}),i=r?i2(r):[];return d=class extends n{constructor(){super(...arguments);cn(this,A);cn(this,g,!1);cn(this,p,null);cn(this,y,new Map);cn(this,v);tr(this,"get");tr(this,"set");tr(this,"call")}static get observedAttributes(){var oe,D;return rr(oe=d,f,RC).call(oe),[...((D=r==null?void 0:r.constructor)==null?void 0:D.observedAttributes)??[],...kC]}get nativeEl(){var O;return rr(this,A,Dc).call(this),qe(this,p)??this.querySelector(":scope > [slot=media]")??this.querySelector(e)??((O=this.shadowRoot)==null?void 0:O.querySelector(e))??null}set nativeEl(O){Tt(this,p,O)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(O){this.toggleAttribute("muted",O)}get src(){return this.getAttribute("src")}set src(O){this.setAttribute("src",`${O}`)}get preload(){var O;return this.getAttribute("preload")??((O=this.nativeEl)==null?void 0:O.preload)}set preload(O){this.setAttribute("preload",`${O}`)}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const O=a2(this.attributes);t&&(O.is=t),e&&(O.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(O)}this.nativeEl.muted=this.hasAttribute("muted");for(const O of i)rr(this,A,CC).call(this,O);Tt(this,v,new MutationObserver(rr(this,A,xC).bind(this))),this.shadowRoot.addEventListener("slotchange",()=>rr(this,A,PS).call(this)),rr(this,A,PS).call(this);for(const O of this.constructor.Events)this.shadowRoot.addEventListener(O,this,!0)}handleEvent(O){O.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(O.type,{detail:O.detail}))}attributeChangedCallback(O,oe,D){rr(this,A,Dc).call(this),rr(this,A,LC).call(this,O,oe,D)}connectedCallback(){rr(this,A,Dc).call(this)}},c=new WeakMap,f=new WeakSet,RC=function(){if(qe(this,c))return;Tt(this,c,!0);const O=new Set(this.observedAttributes);O.delete("muted");for(const oe of i)if(!(oe in this.prototype))if(typeof r[oe]=="function")this.prototype[oe]=function(...D){return rr(this,A,Dc).call(this),(()=>{var te;if(this.call)return this.call(oe,...D);const Le=(te=this.nativeEl)==null?void 0:te[oe];return Le==null?void 0:Le.apply(this.nativeEl,D)})()};else{const D={get(){var Le,te;rr(this,A,Dc).call(this);const ve=oe.toLowerCase();if(O.has(ve)){const $e=this.getAttribute(ve);return $e===null?!1:$e===""?!0:$e}return((Le=this.get)==null?void 0:Le.call(this,oe))??((te=this.nativeEl)==null?void 0:te[oe])}};oe!==oe.toUpperCase()&&(D.set=function(ve){rr(this,A,Dc).call(this);const Le=oe.toLowerCase();if(O.has(Le)){ve===!0||ve===!1||ve==null?this.toggleAttribute(Le,!!ve):this.setAttribute(Le,ve);return}if(this.set){this.set(oe,ve);return}this.nativeEl&&(this.nativeEl[oe]=ve)}),Object.defineProperty(this.prototype,oe,D)}},g=new WeakMap,p=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakSet,Dc=function(){qe(this,g)||(Tt(this,g,!0),this.init())},PS=function(){var ve;const O=new Map(qe(this,y)),oe=(ve=this.shadowRoot)==null?void 0:ve.querySelector("slot:not([name])");(oe==null?void 0:oe.assignedElements({flatten:!0}).filter(Le=>["track","source"].includes(Le.localName))).forEach(Le=>{var $e,Ue;O.delete(Le);let te=qe(this,y).get(Le);te||(te=Le.cloneNode(),qe(this,y).set(Le,te),($e=qe(this,v))==null||$e.observe(Le,{attributes:!0})),(Ue=this.nativeEl)==null||Ue.append(te),rr(this,A,MS).call(this,te)}),O.forEach((Le,te)=>{Le.remove(),qe(this,y).delete(te)})},xC=function(O){for(const oe of O)if(oe.type==="attributes"){const{target:D,attributeName:ve}=oe,Le=qe(this,y).get(D);Le&&ve&&(Le.setAttribute(ve,D.getAttribute(ve)??""),rr(this,A,MS).call(this,Le))}},MS=function(O){O&&O.localName==="track"&&O.default&&(O.kind==="chapters"||O.kind==="metadata")&&O.track.mode==="disabled"&&(O.track.mode="hidden")},CC=function(O){if(Object.prototype.hasOwnProperty.call(this,O)){const oe=this[O];delete this[O],this[O]=oe}},LC=function(O,oe,D){var ve,Le,te;["id","class"].includes(O)||!d.observedAttributes.includes(O)&&this.constructor.observedAttributes.includes(O)||(D===null?(ve=this.nativeEl)==null||ve.removeAttribute(O):((Le=this.nativeEl)==null?void 0:Le.getAttribute(O))!==D&&((te=this.nativeEl)==null||te.setAttribute(O,D)))},cn(d,f),tr(d,"getTemplateHTML",e.endsWith("audio")?n2:r2),tr(d,"shadowRootOptions",{mode:"open"}),tr(d,"Events",t2),cn(d,c,!1),d}function i2(n){const e=[];for(let t=Object.getPrototypeOf(n);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t)){const r=Object.getOwnPropertyNames(t);e.push(...r)}return e}function NC(n){let e="";for(const t in n){if(!kC.includes(t))continue;const r=n[t];r===""?e+=` ${t}`:e+=` ${t}="${r}"`}return e}function a2(n){const e={};for(const t of n)e[t.name]=t.value;return e}const xd=DC(globalThis.HTMLElement??class{},{tag:"video"});DC(globalThis.HTMLElement??class{},{tag:"audio"});class ET extends Event{constructor(t,r){super(t);tr(this,"track");this.track=r.track}}const OS=new WeakMap;function qn(n){return OS.get(n)??s2(n,{})}function s2(n,e){let t=OS.get(n);return t||OS.set(n,t={}),Object.assign(t,e)}function FS(n,e){const t=n.videoTracks;qn(e).media=n,qn(e).renditionSet||(qn(e).renditionSet=new Set);const r=qn(t).trackSet;r.add(e);const i=r.size-1;i in zS.prototype||Object.defineProperty(zS.prototype,i,{get(){return[...qn(this).trackSet][i]}}),queueMicrotask(()=>{t.dispatchEvent(new ET("addtrack",{track:e}))})}function US(n){var r;const e=(r=qn(n).media)==null?void 0:r.videoTracks;if(!e)return;qn(e).trackSet.delete(n),queueMicrotask(()=>{e.dispatchEvent(new ET("removetrack",{track:n}))})}function o2(n){const e=qn(n).media.videoTracks??[];let t=!1;for(const r of e)r!==n&&(r.selected=!1,t=!0);if(t){if(qn(e).changeRequested)return;qn(e).changeRequested=!0,queueMicrotask(()=>{delete qn(e).changeRequested,e.dispatchEvent(new Event("change"))})}}var ld,ud,dd,Zc,Lp;class zS extends EventTarget{constructor(){super();cn(this,Zc);cn(this,ld);cn(this,ud);cn(this,dd);qn(this).trackSet=new Set}[Symbol.iterator](){return qe(this,Zc,Lp).values()}get length(){return qe(this,Zc,Lp).size}getTrackById(t){return[...qe(this,Zc,Lp)].find(r=>r.id===t)??null}get selectedIndex(){return[...qe(this,Zc,Lp)].findIndex(t=>t.selected)}get onaddtrack(){return qe(this,ld)}set onaddtrack(t){qe(this,ld)&&(this.removeEventListener("addtrack",qe(this,ld)),Tt(this,ld,void 0)),typeof t=="function"&&(Tt(this,ld,t),this.addEventListener("addtrack",t))}get onremovetrack(){return qe(this,ud)}set onremovetrack(t){qe(this,ud)&&(this.removeEventListener("removetrack",qe(this,ud)),Tt(this,ud,void 0)),typeof t=="function"&&(Tt(this,ud,t),this.addEventListener("removetrack",t))}get onchange(){return qe(this,dd)}set onchange(t){qe(this,dd)&&(this.removeEventListener("change",qe(this,dd)),Tt(this,dd,void 0)),typeof t=="function"&&(Tt(this,dd,t),this.addEventListener("change",t))}}ld=new WeakMap,ud=new WeakMap,dd=new WeakMap,Zc=new WeakSet,Lp=function(){return qn(this).trackSet};class bT extends Event{constructor(t,r){super(t);tr(this,"rendition");this.rendition=r.rendition}}function l2(n,e){const t=qn(n).media.videoRenditions;qn(e).media=qn(n).media,qn(e).track=n;const r=qn(n).renditionSet;r.add(e);const i=r.size-1;i in BS.prototype||Object.defineProperty(BS.prototype,i,{get(){return Uh(this)[i]}}),queueMicrotask(()=>{n.selected&&t.dispatchEvent(new bT("addrendition",{rendition:e}))})}function u2(n){const e=qn(n).media.videoRenditions,t=qn(n).track;qn(t).renditionSet.delete(n),queueMicrotask(()=>{qn(n).track.selected&&e.dispatchEvent(new bT("removerendition",{rendition:n}))})}function d2(n){const e=qn(n).media.videoRenditions;!e||qn(e).changeRequested||(qn(e).changeRequested=!0,queueMicrotask(()=>{delete qn(e).changeRequested,qn(n).track.selected&&e.dispatchEvent(new Event("change"))}))}function Uh(n){return[...qn(n).media.videoTracks].filter(t=>t.selected).flatMap(t=>[...qn(t).renditionSet])}var cd,fd,hd;class BS extends EventTarget{constructor(){super(...arguments);cn(this,cd);cn(this,fd);cn(this,hd)}[Symbol.iterator](){return Uh(this).values()}get length(){return Uh(this).length}getRenditionById(t){return Uh(this).find(r=>`${r.id}`==`${t}`)??null}get selectedIndex(){return Uh(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[r,i]of Uh(this).entries())i.selected=r===t}get onaddrendition(){return qe(this,cd)}set onaddrendition(t){qe(this,cd)&&(this.removeEventListener("addrendition",qe(this,cd)),Tt(this,cd,void 0)),typeof t=="function"&&(Tt(this,cd,t),this.addEventListener("addrendition",t))}get onremoverendition(){return qe(this,fd)}set onremoverendition(t){qe(this,fd)&&(this.removeEventListener("removerendition",qe(this,fd)),Tt(this,fd,void 0)),typeof t=="function"&&(Tt(this,fd,t),this.addEventListener("removerendition",t))}get onchange(){return qe(this,hd)}set onchange(t){qe(this,hd)&&(this.removeEventListener("change",qe(this,hd)),Tt(this,hd,void 0)),typeof t=="function"&&(Tt(this,hd,t),this.addEventListener("change",t))}}cd=new WeakMap,fd=new WeakMap,hd=new WeakMap;var wm;class c2{constructor(){tr(this,"src");tr(this,"id");tr(this,"width");tr(this,"height");tr(this,"bitrate");tr(this,"frameRate");tr(this,"codec");cn(this,wm,!1)}get selected(){return qe(this,wm)}set selected(e){qe(this,wm)!==e&&(Tt(this,wm,e),d2(this))}}wm=new WeakMap;var Im;class PC{constructor(){tr(this,"id");tr(this,"kind");tr(this,"label","");tr(this,"language","");tr(this,"sourceBuffer");cn(this,Im,!1)}addRendition(e,t,r,i,o,l){const d=new c2;return d.src=e,d.width=t,d.height=r,d.frameRate=l,d.bitrate=o,d.codec=i,l2(this,d),d}removeRendition(e){u2(e)}get selected(){return qe(this,Im)}set selected(e){qe(this,Im)!==e&&(Tt(this,Im,e),e===!0&&o2(this))}}Im=new WeakMap;function f2(n,e){const t=qn(n).media.audioRenditions;qn(e).media=qn(n).media,qn(e).track=n;const r=qn(n).renditionSet;r.add(e);const i=r.size-1;i in $S.prototype||Object.defineProperty($S.prototype,i,{get(){return zh(this)[i]}}),queueMicrotask(()=>{n.enabled&&t.dispatchEvent(new bT("addrendition",{rendition:e}))})}function h2(n){const e=qn(n).media.audioRenditions,t=qn(n).track;qn(t).renditionSet.delete(n),queueMicrotask(()=>{qn(n).track.enabled&&e.dispatchEvent(new bT("removerendition",{rendition:n}))})}function m2(n){const e=qn(n).media.audioRenditions;!e||qn(e).changeRequested||(qn(e).changeRequested=!0,queueMicrotask(()=>{delete qn(e).changeRequested,qn(n).track.enabled&&e.dispatchEvent(new Event("change"))}))}function zh(n){return[...qn(n).media.audioTracks].filter(t=>t.enabled).flatMap(t=>[...qn(t).renditionSet])}var md,gd,pd;class $S extends EventTarget{constructor(){super(...arguments);cn(this,md);cn(this,gd);cn(this,pd)}[Symbol.iterator](){return zh(this).values()}get length(){return zh(this).length}getRenditionById(t){return zh(this).find(r=>`${r.id}`==`${t}`)??null}get selectedIndex(){return zh(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[r,i]of zh(this).entries())i.selected=r===t}get onaddrendition(){return qe(this,md)}set onaddrendition(t){qe(this,md)&&(this.removeEventListener("addrendition",qe(this,md)),Tt(this,md,void 0)),typeof t=="function"&&(Tt(this,md,t),this.addEventListener("addrendition",t))}get onremoverendition(){return qe(this,gd)}set onremoverendition(t){qe(this,gd)&&(this.removeEventListener("removerendition",qe(this,gd)),Tt(this,gd,void 0)),typeof t=="function"&&(Tt(this,gd,t),this.addEventListener("removerendition",t))}get onchange(){return qe(this,pd)}set onchange(t){qe(this,pd)&&(this.removeEventListener("change",qe(this,pd)),Tt(this,pd,void 0)),typeof t=="function"&&(Tt(this,pd,t),this.addEventListener("change",t))}}md=new WeakMap,gd=new WeakMap,pd=new WeakMap;var km;class g2{constructor(){tr(this,"src");tr(this,"id");tr(this,"bitrate");tr(this,"codec");cn(this,km,!1)}get selected(){return qe(this,km)}set selected(e){qe(this,km)!==e&&(Tt(this,km,e),m2(this))}}km=new WeakMap;function jS(n,e){const t=n.audioTracks;qn(e).media=n,qn(e).renditionSet||(qn(e).renditionSet=new Set);const r=qn(t).trackSet;r.add(e);const i=r.size-1;i in HS.prototype||Object.defineProperty(HS.prototype,i,{get(){return[...qn(this).trackSet][i]}}),queueMicrotask(()=>{t.dispatchEvent(new ET("addtrack",{track:e}))})}function qS(n){var r;const e=(r=qn(n).media)==null?void 0:r.audioTracks;if(!e)return;qn(e).trackSet.delete(n),queueMicrotask(()=>{e.dispatchEvent(new ET("removetrack",{track:n}))})}function p2(n){const e=qn(n).media.audioTracks;!e||qn(e).changeRequested||(qn(e).changeRequested=!0,queueMicrotask(()=>{delete qn(e).changeRequested,e.dispatchEvent(new Event("change"))}))}var vd,yd,Ed,Rm,lb;class HS extends EventTarget{constructor(){super();cn(this,Rm);cn(this,vd);cn(this,yd);cn(this,Ed);qn(this).trackSet=new Set}[Symbol.iterator](){return qe(this,Rm,lb).values()}get length(){return qe(this,Rm,lb).size}getTrackById(t){return[...qe(this,Rm,lb)].find(r=>r.id===t)??null}get onaddtrack(){return qe(this,vd)}set onaddtrack(t){qe(this,vd)&&(this.removeEventListener("addtrack",qe(this,vd)),Tt(this,vd,void 0)),typeof t=="function"&&(Tt(this,vd,t),this.addEventListener("addtrack",t))}get onremovetrack(){return qe(this,yd)}set onremovetrack(t){qe(this,yd)&&(this.removeEventListener("removetrack",qe(this,yd)),Tt(this,yd,void 0)),typeof t=="function"&&(Tt(this,yd,t),this.addEventListener("removetrack",t))}get onchange(){return qe(this,Ed)}set onchange(t){qe(this,Ed)&&(this.removeEventListener("change",qe(this,Ed)),Tt(this,Ed,void 0)),typeof t=="function"&&(Tt(this,Ed,t),this.addEventListener("change",t))}}vd=new WeakMap,yd=new WeakMap,Ed=new WeakMap,Rm=new WeakSet,lb=function(){return qn(this).trackSet};var xm;class MC{constructor(){tr(this,"id");tr(this,"kind");tr(this,"label","");tr(this,"language","");tr(this,"sourceBuffer");cn(this,xm,!1)}addRendition(e,t,r){const i=new g2;return i.src=e,i.codec=t,i.bitrate=r,f2(this,i),i}removeRendition(e){h2(e)}get enabled(){return qe(this,xm)}set enabled(e){qe(this,xm)!==e&&(Tt(this,xm,e),p2(this))}}xm=new WeakMap;const Hk=R0(globalThis.HTMLMediaElement,"video"),Gk=R0(globalThis.HTMLMediaElement,"audio");function OC(n){if(!(n!=null&&n.prototype))return n;const e=R0(n,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(n.prototype,"videoTracks",{get(){return v2(this)}});const t=R0(n,"audio");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(n.prototype,"audioTracks",{get(){return y2(this)}}),"addVideoTrack"in n.prototype||(n.prototype.addVideoTrack=function(o,l="",d=""){const c=new PC;return c.kind=o,c.label=l,c.language=d,FS(this,c),c}),"removeVideoTrack"in n.prototype||(n.prototype.removeVideoTrack=US),"addAudioTrack"in n.prototype||(n.prototype.addAudioTrack=function(o,l="",d=""){const c=new MC;return c.kind=o,c.label=l,c.language=d,jS(this,c),c}),"removeAudioTrack"in n.prototype||(n.prototype.removeAudioTrack=qS),"videoRenditions"in n.prototype||Object.defineProperty(n.prototype,"videoRenditions",{get(){return r(this)}});const r=o=>{let l=qn(o).videoRenditions;return l||(l=new BS,qn(l).media=o,qn(o).videoRenditions=l),l};"audioRenditions"in n.prototype||Object.defineProperty(n.prototype,"audioRenditions",{get(){return i(this)}});const i=o=>{let l=qn(o).audioRenditions;return l||(l=new $S,qn(l).media=o,qn(o).audioRenditions=l),l};return n}function R0(n,e){var t;if(n!=null&&n.prototype)return(t=Object.getOwnPropertyDescriptor(n.prototype,`${e}Tracks`))==null?void 0:t.get}function v2(n){let e=qn(n).videoTracks;if(!e&&(e=new zS,qn(n).videoTracks=e,Hk)){const t=Hk.call(n.nativeEl??n);for(const r of t)FS(n,r);t.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),t.addEventListener("addtrack",r=>{if([...e].some(i=>i instanceof PC)){for(const i of t)US(i);return}FS(n,r.track)}),t.addEventListener("removetrack",r=>{US(r.track)})}return e}function y2(n){let e=qn(n).audioTracks;if(!e&&(e=new HS,qn(n).audioTracks=e,Gk)){const t=Gk.call(n.nativeEl??n);for(const r of t)jS(n,r);t.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),t.addEventListener("addtrack",r=>{if([...e].some(i=>i instanceof MC)){for(const i of t)qS(i);return}jS(n,r.track)}),t.addEventListener("removetrack",r=>{qS(r.track)})}return e}const Fn=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},E2=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=b2},b2=Number.MAX_SAFE_INTEGER||9007199254740991;let Zn=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),It=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n}({}),Te=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n}({});var Cr={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Qn={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class kh{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class T2{constructor(e,t,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new kh(e),this.fast_=new kh(t),this.defaultTTFB_=i,this.ttfb_=new kh(e)}update(e,t){const{slow_:r,fast_:i,ttfb_:o}=this;r.halfLife!==e&&(this.slow_=new kh(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new kh(t,i.getEstimate(),i.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new kh(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const r=8*t,i=e/1e3,o=r/i;this.fast_.sample(i,o),this.slow_.sample(i,o)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function _2(n,e,t){return(e=A2(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function si(){return si=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},si.apply(null,arguments)}function Vk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ai(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(t),!0).forEach(function(r){_2(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function S2(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function A2(n){var e=S2(n,"string");return typeof e=="symbol"?e:e+""}class Ao{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=nd,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)}}const nd=function(){},w2={trace:nd,debug:nd,log:nd,warn:nd,info:nd,error:nd};function GS(){return si({},w2)}function I2(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):nd}function Kk(n,e,t){return e[n]?e[n].bind(e):I2(n,t)}const VS=GS();function k2(n,e,t){const r=GS();if(typeof console=="object"&&n===!0||typeof n=="object"){const i=["debug","log","info","warn","error"];i.forEach(o=>{r[o]=Kk(o,n,t)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.9`)}catch{return GS()}i.forEach(o=>{VS[o]=Kk(o,n)})}else si(VS,r);return r}const ni=VS;function Nd(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function R2(n){return typeof self<"u"&&n===self.ManagedMediaSource}function FC(n,e){const t=Object.keys(n),r=Object.keys(e),i=t.length,o=r.length;return!i||!o||i===o&&!t.some(l=>r.indexOf(l)===-1)}function As(n,e=!1){if(typeof TextDecoder<"u"){const f=new TextDecoder("utf-8").decode(n);if(e){const m=f.indexOf("\0");return m!==-1?f.substring(0,m):f}return f.replace(/\0/g,"")}const t=n.length;let r,i,o,l="",d=0;for(;d<t;){if(r=n[d++],r===0&&e)return l;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:i=n[d++],l+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=n[d++],o=n[d++],l+=String.fromCharCode((r&15)<<12|(i&63)<<6|(o&63)<<0);break}}return l}const Xl={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let r=n[t].toString(16);r.length<2&&(r="0"+r),e+=r}return e}};function UC(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function x2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var w_={exports:{}},Yk;function C2(){return Yk||(Yk=1,function(n,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d={buildAbsoluteURL:function(c,f,m){if(m=m||{},c=c.trim(),f=f.trim(),!f){if(!m.alwaysNormalize)return c;var g=d.parseURL(c);if(!g)throw new Error("Error trying to parse base URL.");return g.path=d.normalizePath(g.path),d.buildURLFromParts(g)}var p=d.parseURL(f);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return m.alwaysNormalize?(p.path=d.normalizePath(p.path),d.buildURLFromParts(p)):f;var y=d.parseURL(c);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var v=i.exec(y.path);y.netLoc=v[1],y.path=v[2]}y.netLoc&&!y.path&&(y.path="/");var A={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(A.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)A.path=y.path,p.params||(A.params=y.params,p.query||(A.query=y.query));else{var I=y.path,P=I.substring(0,I.lastIndexOf("/")+1)+p.path;A.path=d.normalizePath(P)}return A.path===null&&(A.path=m.alwaysNormalize?d.normalizePath(p.path):p.path),d.buildURLFromParts(A)},parseURL:function(c){var f=r.exec(c);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(o,"");c.length!==(c=c.replace(l,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};n.exports=d})()}(w_)),w_.exports}var Dw=C2();class Nw{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var hi={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class zC{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,D2(this,"stats")}setByteRange(e,t){const r=e.split("@",2);let i;r.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[hi.AUDIO]:null,[hi.VIDEO]:null,[hi.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Nw),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Dw.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[hi.AUDIO]=null,e[hi.VIDEO]=null,e[hi.AUDIOVIDEO]=null}}function Ji(n){return n.sn!=="initSegment"}class I_ extends zC{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Fn(e)&&Fn(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1){const i=this._decryptdata=this.levelkeys[r[0]]||null;if(i)return i.getDecryptData(this.sn)}}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Fn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const r=Object.keys(this.levelkeys),i=r.length;if(i>1||i===1&&(t=this.levelkeys[r[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Fn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Ji(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,r,i,o,l=!1){const{elementaryStreams:d}=this,c=d[e];if(!c){d[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:o,partial:l};return}c.startPTS=Math.min(c.startPTS,t),c.endPTS=Math.max(c.endPTS,r),c.startDTS=Math.min(c.startDTS,i),c.endDTS=Math.max(c.endDTS,o)}}let L2=class extends zC{constructor(e,t,r,i,o){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const l=e.enumeratedString("BYTERANGE");l&&this.setByteRange(l,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};function BC(n,e){const t=Object.getPrototypeOf(n);if(t){const r=Object.getOwnPropertyDescriptor(t,e);return r||BC(t,e)}}function D2(n,e){const t=BC(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const Wk=Math.pow(2,32)-1,N2=[].push,$C={video:1,audio:2,id3:3,text:4};function aa(n){return String.fromCharCode.apply(null,n)}function jC(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function hr(n,e){const t=qC(n,e);return t<0?4294967296+t:t}function Qk(n,e){let t=hr(n,e);return t*=Math.pow(2,32),t+=hr(n,e+4),t}function qC(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function P2(n){const e=n.byteLength;for(let t=0;t<e;){const r=hr(n,t);if(r>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=r>1?t+r:e}return!1}function Ir(n,e){const t=[];if(!e.length)return t;const r=n.byteLength;for(let i=0;i<r;){const o=hr(n,i),l=aa(n.subarray(i+4,i+8)),d=o>1?i+o:r;if(l===e[0])if(e.length===1)t.push(n.subarray(i+8,d));else{const c=Ir(n.subarray(i+8,d),e.slice(1));c.length&&N2.apply(t,c)}i=d}return t}function M2(n){const e=[],t=n[0];let r=8;const i=hr(n,r);r+=4;let o=0,l=0;t===0?(o=hr(n,r),l=hr(n,r+4),r+=8):(o=Qk(n,r),l=Qk(n,r+8),r+=16),r+=2;let d=n.length+l;const c=jC(n,r);r+=2;for(let f=0;f<c;f++){let m=r;const g=hr(n,m);m+=4;const p=g&2147483647;if((g&2147483648)>>>31===1)return ni.warn("SIDX has hierarchical references (not supported)"),null;const v=hr(n,m);m+=4,e.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/i,start:d,end:d+p-1}}),d+=p,m+=4,r=m}return{earliestPresentationTime:o,timescale:i,version:t,referencesCount:c,references:e}}function HC(n){const e=[],t=Ir(n,["moov","trak"]);for(let i=0;i<t.length;i++){const o=t[i],l=Ir(o,["tkhd"])[0];if(l){let d=l[0];const c=hr(l,d===0?12:20),f=Ir(o,["mdia","mdhd"])[0];if(f){d=f[0];const m=hr(f,d===0?12:20),g=Ir(o,["mdia","hdlr"])[0];if(g){const p=aa(g.subarray(8,12)),y={soun:hi.AUDIO,vide:hi.VIDEO}[p],v=Ir(o,["mdia","minf","stbl","stsd"])[0],A=O2(v);y?(e[c]={timescale:m,type:y,stsd:A},e[y]=ai({timescale:m,id:c},A)):e[c]={timescale:m,type:p,stsd:A}}}}}return Ir(n,["moov","mvex","trex"]).forEach(i=>{const o=hr(i,4),l=e[o];l&&(l.default={duration:hr(i,12),flags:hr(i,20)})}),e}function O2(n){const e=n.subarray(8),t=e.subarray(86),r=aa(e.subarray(4,8));let i=r,o;const l=r==="enca"||r==="encv";if(l){const f=Ir(e,[r])[0].subarray(r==="enca"?28:78);Ir(f,["sinf"]).forEach(g=>{const p=Ir(g,["schm"])[0];if(p){const y=aa(p.subarray(4,8));if(y==="cbcs"||y==="cenc"){const v=Ir(g,["frma"])[0];v&&(i=aa(v))}}})}const d=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const c=Ir(t,["avcC"])[0];c&&c.length>3&&(i+="."+DE(c[1])+DE(c[2])+DE(c[3]),o=LE(d==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const c=Ir(e,[r])[0],f=Ir(c.subarray(28),["esds"])[0];if(f&&f.length>7){let m=4;if(f[m++]!==3)break;m=k_(f,m),m+=2;const g=f[m++];if(g&128&&(m+=2),g&64&&(m+=f[m++]),f[m++]!==4)break;m=k_(f,m);const p=f[m++];if(p===64)i+="."+DE(p);else break;if(m+=12,f[m++]!==5)break;m=k_(f,m);const y=f[m++];let v=(y&248)>>3;v===31&&(v+=1+((y&7)<<3)+((f[m]&224)>>5)),i+="."+v}break}case"hvc1":case"hev1":{const c=Ir(t,["hvcC"])[0];if(c&&c.length>12){const f=c[1],m=["","A","B","C"][f>>6],g=f&31,p=hr(c,2),y=(f&32)>>5?"H":"L",v=c[12],A=c.subarray(6,12);i+="."+m+g,i+="."+F2(p).toString(16).toUpperCase(),i+="."+y+v;let I="";for(let P=A.length;P--;){const U=A[P];(U||I)&&(I="."+U.toString(16).toUpperCase()+I)}i+=I}o=LE(d=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=LE(i,t)||i;break}case"vp09":{const c=Ir(t,["vpcC"])[0];if(c&&c.length>6){const f=c[4],m=c[5],g=c[6]>>4&15;i+="."+el(f)+"."+el(m)+"."+el(g)}break}case"av01":{const c=Ir(t,["av1C"])[0];if(c&&c.length>2){const f=c[1]>>>5,m=c[1]&31,g=c[2]>>>7?"H":"M",p=(c[2]&64)>>6,y=(c[2]&32)>>5,v=f===2&&p?y?12:10:p?10:8,A=(c[2]&16)>>4,I=(c[2]&8)>>3,P=(c[2]&4)>>2,U=c[2]&3;i+="."+f+"."+el(m)+g+"."+el(v)+"."+A+"."+I+P+U+"."+el(1)+"."+el(1)+"."+el(1)+"."+0,o=LE("dav1",t)}break}}return{codec:i,encrypted:l,supplemental:o}}function LE(n,e){const t=Ir(e,["dvvC"]),r=t.length?t[0]:Ir(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,o=r[2]<<5&32|r[3]>>3&31;return n+"."+el(i)+"."+el(o)}}function F2(n){let e=0;for(let t=0;t<32;t++)e|=(n>>t&1)<<31-t;return e>>>0}function k_(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function DE(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function el(n){return(n<10?"0":"")+n}function U2(n,e){if(!n||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&Ir(n,["moov","trak"]).forEach(i=>{const l=Ir(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let d=Ir(l,["enca"]);const c=d.length>0;c||(d=Ir(l,["encv"])),d.forEach(f=>{const m=c?f.subarray(28):f.subarray(78);Ir(m,["sinf"]).forEach(p=>{const y=GC(p);if(y){const v=y.subarray(8,24);v.some(A=>A!==0)||(ni.log(`[eme] Patching keyId in 'enc${c?"a":"v"}>sinf>>tenc' box: ${Xl.hexDump(v)} -> ${Xl.hexDump(t)}`),y.set(t,8))}})})})}function GC(n){const e=Ir(n,["schm"])[0];if(e){const t=aa(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return Ir(n,["schi","tenc"])[0]}return null}function z2(n,e,t){const r={},i=Ir(n,["moof","traf"]);for(let o=0;o<i.length;o++){const l=i[o],d=Ir(l,["tfhd"])[0],c=hr(d,4),f=e[c];if(!f)continue;r[c]||(r[c]={start:NaN,duration:0,sampleCount:0,timescale:f.timescale,type:f.type});const m=r[c],g=Ir(l,["tfdt"])[0];if(g){const M=g[0];let B=hr(g,4);M===1&&(B===Wk?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(B*=Wk+1,B+=hr(g,8))),Fn(B)&&(!Fn(m.start)||B<m.start)&&(m.start=B)}const p=f.default,y=hr(d,0)|(p==null?void 0:p.flags);let v=(p==null?void 0:p.duration)||0;y&8&&(y&2?v=hr(d,12):v=hr(d,8));const A=Ir(l,["trun"]);let I=m.start||0,P=0,U=v;for(let M=0;M<A.length;M++){const B=A[M],ie=hr(B,4),L=m.sampleCount;m.sampleCount+=ie;const w=B[3]&1,O=B[3]&4,oe=B[2]&1,D=B[2]&2,ve=B[2]&4,Le=B[2]&8;let te=8,$e=ie;for(w&&(te+=4),O&&ie&&(!(B[te+1]&1)&&m.keyFrameIndex===void 0&&(m.keyFrameIndex=L),te+=4,oe?(U=hr(B,te),te+=4):U=v,D&&(te+=4),Le&&(te+=4),I+=U,P+=U,$e--);$e--;)oe?(U=hr(B,te),te+=4):U=v,D&&(te+=4),ve&&(B[te+1]&1||m.keyFrameIndex===void 0&&(m.keyFrameIndex=m.sampleCount-($e+1),m.keyFrameStart=I),te+=4),Le&&(te+=4),I+=U,P+=U;!P&&v&&(P+=v*ie)}m.duration+=P}if(!Object.keys(r).some(o=>r[o].duration)){let o=1/0,l=0;const d=Ir(n,["sidx"]);for(let c=0;c<d.length;c++){const f=M2(d[c]);if(f!=null&&f.references){o=Math.min(o,f.earliestPresentationTime/f.timescale);const m=f.references.reduce((g,p)=>g+p.info.duration||0,0);l=Math.max(l,m+f.earliestPresentationTime/f.timescale)}}l&&Fn(l)&&Object.keys(r).forEach(c=>{r[c].duration||(r[c].duration=l*r[c].timescale-r[c].start)})}return r}function B2(n){const e={valid:null,remainder:null},t=Ir(n,["moof"]);if(t.length<2)return e.remainder=n,e;const r=t[t.length-1];return e.valid=n.slice(0,r.byteOffset-8),e.remainder=n.slice(r.byteOffset-8),e}function Qs(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function Xk(n,e){const t=[],r=e.samples,i=e.timescale,o=e.id;let l=!1;return Ir(r,["moof"]).map(c=>{const f=c.byteOffset-8;Ir(c,["traf"]).map(g=>{const p=Ir(g,["tfdt"]).map(y=>{const v=y[0];let A=hr(y,4);return v===1&&(A*=Math.pow(2,32),A+=hr(y,8)),A/i})[0];return p!==void 0&&(n=p),Ir(g,["tfhd"]).map(y=>{const v=hr(y,4),A=hr(y,0)&16777215,I=(A&1)!==0,P=(A&2)!==0,U=(A&8)!==0;let M=0;const B=(A&16)!==0;let ie=0;const L=(A&32)!==0;let w=8;v===o&&(I&&(w+=8),P&&(w+=4),U&&(M=hr(y,w),w+=4),B&&(ie=hr(y,w),w+=4),L&&(w+=4),e.type==="video"&&(l=TT(e.codec)),Ir(g,["trun"]).map(O=>{const oe=O[0],D=hr(O,0)&16777215,ve=(D&1)!==0;let Le=0;const te=(D&4)!==0,$e=(D&256)!==0;let Ue=0;const Re=(D&512)!==0;let Xe=0;const Ye=(D&1024)!==0,Ze=(D&2048)!==0;let Ne=0;const ze=hr(O,4);let st=8;ve&&(Le=hr(O,st),st+=4),te&&(st+=4);let Rt=Le+f;for(let jt=0;jt<ze;jt++){if($e?(Ue=hr(O,st),st+=4):Ue=M,Re?(Xe=hr(O,st),st+=4):Xe=ie,Ye&&(st+=4),Ze&&(oe===0?Ne=hr(O,st):Ne=qC(O,st),st+=4),e.type===hi.VIDEO){let Pe=0;for(;Pe<Xe;){const Oe=hr(r,Rt);if(Rt+=4,$2(l,r[Rt])){const gt=r.subarray(Rt,Rt+Oe);Pw(gt,l?2:1,n+Ne/i,t)}Rt+=Oe,Pe+=Oe+4}}n+=Ue/i}}))})})}),t}function TT(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function $2(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Pw(n,e,t,r){const i=VC(n);let o=0;o+=e;let l=0,d=0,c=0;for(;o<i.length;){l=0;do{if(o>=i.length)break;c=i[o++],l+=c}while(c===255);d=0;do{if(o>=i.length)break;c=i[o++],d+=c}while(c===255);const f=i.length-o;let m=o;if(d<f)o+=d;else if(d>f){ni.error(`Malformed SEI payload. ${d} is too small, only ${f} bytes left to parse.`);break}if(l===4){if(i[m++]===181){const p=jC(i,m);if(m+=2,p===49){const y=hr(i,m);if(m+=4,y===1195456820){const v=i[m++];if(v===3){const A=i[m++],I=31&A,P=64&A,U=P?2+I*3:0,M=new Uint8Array(U);if(P){M[0]=A;for(let B=1;B<U;B++)M[B]=i[m++]}r.push({type:v,payloadType:l,pts:t,bytes:M})}}}}}else if(l===5&&d>16){const g=[];for(let v=0;v<16;v++){const A=i[m++].toString(16);g.push(A.length==1?"0"+A:A),(v===3||v===5||v===7||v===9)&&g.push("-")}const p=d-16,y=new Uint8Array(p);for(let v=0;v<p;v++)y[v]=i[m++];r.push({payloadType:l,pts:t,uuid:g.join(""),userData:As(y),userDataBytes:y})}}}function VC(n){const e=n.byteLength,t=[];let r=1;for(;r<e-2;)n[r]===0&&n[r+1]===0&&n[r+2]===3?(t.push(r+2),r+=2):r++;if(t.length===0)return n;const i=e-t.length,o=new Uint8Array(i);let l=0;for(r=0;r<i;l++,r++)l===t[0]&&(l++,t.shift()),o[r]=n[l];return o}function j2(n){const e=n[0];let t="",r="",i=0,o=0,l=0,d=0,c=0,f=0;if(e===0){for(;aa(n.subarray(f,f+1))!=="\0";)t+=aa(n.subarray(f,f+1)),f+=1;for(t+=aa(n.subarray(f,f+1)),f+=1;aa(n.subarray(f,f+1))!=="\0";)r+=aa(n.subarray(f,f+1)),f+=1;r+=aa(n.subarray(f,f+1)),f+=1,i=hr(n,12),o=hr(n,16),d=hr(n,20),c=hr(n,24),f=28}else if(e===1){f+=4,i=hr(n,f),f+=4;const g=hr(n,f);f+=4;const p=hr(n,f);for(f+=4,l=2**32*g+p,E2(l)||(l=Number.MAX_SAFE_INTEGER,ni.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),d=hr(n,f),f+=4,c=hr(n,f),f+=4;aa(n.subarray(f,f+1))!=="\0";)t+=aa(n.subarray(f,f+1)),f+=1;for(t+=aa(n.subarray(f,f+1)),f+=1;aa(n.subarray(f,f+1))!=="\0";)r+=aa(n.subarray(f,f+1)),f+=1;r+=aa(n.subarray(f,f+1)),f+=1}const m=n.subarray(f,n.byteLength);return{schemeIdUri:t,value:r,timeScale:i,presentationTime:l,presentationTimeDelta:o,eventDuration:d,id:c,payload:m}}function q2(n,...e){const t=e.length;let r=8,i=t;for(;i--;)r+=e[i].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(n,4),i=0,r=8;i<t;i++)o.set(e[i],r),r+=e[i].byteLength;return o}function H2(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let o;r>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const l=new Uint8Array(4);return t.byteLength>0&&new DataView(l.buffer).setUint32(0,t.byteLength,!1),q2([112,115,115,104],new Uint8Array([r,0,0,0]),n,o,i,l,t)}const KC=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Km={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Mw(n,e){const t=Km[e];return!!t&&!!t[n.slice(0,4)]}function KS(n,e,t=!0){return!n.split(",").some(r=>!Ow(r,e,t))}function Ow(n,e,t=!0){var r;const i=Nd(t);return(r=i==null?void 0:i.isTypeSupported(Ev(n,e)))!=null?r:!1}function Ev(n,e){return`${e}/mp4;codecs=${n}`}function Zk(n){if(n){const e=n.substring(0,4);return Km.video[e]}return 2}function x0(n){const e=KC();return n.split(",").reduce((t,r)=>{const o=e&&TT(r)?9:Km.video[r];return o?(o*2+t)/(t?3:2):(Km.audio[r]+t)/(t?2:1)},0)}const R_={};function G2(n,e=!0){if(R_[n])return R_[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let i=0;i<t.length;i++){var r;if(Ow(t[i],"audio",e))return R_[n]=t[i],t[i];if(t[i]==="mp3"&&(r=Nd(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return n}const V2=/flac|opus|mp4a\.40\.34/i;function C0(n,e=!0){return n.replace(V2,t=>G2(t.toLowerCase(),e))}function K2(n,e){const t=[];if(n){const r=n.split(",");for(let i=0;i<r.length;i++)Mw(r[i],"video")||t.push(r[i])}return e&&t.push(e),t.join(",")}function ub(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1)&&(Jk(n,"audio")||Jk(n,"video")))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let r=t.length;r--;)if(t[r].substring(0,4)===n.substring(0,4))return t[r]}return t[0]}}return e||n}function Jk(n,e){return Mw(n,e)&&Ow(n,e)}function Y2(n){const e=n.split(",");for(let t=0;t<e.length;t++){const r=e[t].split(".");r.length>2&&r[0]==="avc1"&&(e[t]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function W2(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=t[r-4];return e.join(".")}return n}function eR(n){const e=Nd(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function YS(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const YC={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function WC(n,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:n}}function Q2(n,e,t,r,i,o){const l=n.videoCodec,d=n.audioCodec?n.audioGroups:null,c=o==null?void 0:o.audioCodec,f=o==null?void 0:o.channels,m=f?parseInt(f):c?1/0:2;let g=null;if(d!=null&&d.length)try{d.length===1&&d[0]?g=e.groups[d[0]].channels:g=d.reduce((p,y)=>{if(y){const v=e.groups[y];if(!v)throw new Error(`Audio track group ${y} not found`);Object.keys(v.channels).forEach(A=>{p[A]=(p[A]||0)+v.channels[A]})}return p},{2:0})}catch{return!0}return l!==void 0&&(l.split(",").some(p=>TT(p))||n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(r,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(i,8e6))||!!g&&Fn(m)&&Object.keys(g).some(p=>parseInt(p)>m)}function QC(n,e,t,r={}){const i=n.videoCodec;if(!i&&!n.audioCodec||!t)return Promise.resolve(YC);const o=[],l=X2(n),d=l.length,c=Z2(n,e,d>0),f=c.length;for(let m=d||1*f||1;m--;){const g={type:"media-source"};if(d&&(g.video=l[m%d]),f){g.audio=c[m%f];const p=g.audio.bitrate;g.video&&p&&(g.video.bitrate-=p)}o.push(g)}if(i){const m=navigator.userAgent;if(i.split(",").some(g=>TT(g))&&KC())return Promise.resolve(WC(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${m})`),o))}return Promise.all(o.map(m=>{const g=eF(m);return r[g]||(r[g]=t.decodingInfo(m))})).then(m=>({supported:!m.some(g=>!g.supported),configurations:o,decodingInfoResults:m})).catch(m=>({supported:!1,configurations:o,decodingInfoResults:[],error:m}))}function X2(n){var e;const t=(e=n.videoCodec)==null?void 0:e.split(","),r=XC(n),i=n.width||640,o=n.height||480,l=n.frameRate||30,d=n.videoRange.toLowerCase();return t?t.map(c=>{const f={contentType:Ev(W2(c),"video"),width:i,height:o,bitrate:r,framerate:l};return d!=="sdr"&&(f.transferFunction=d),f}):[]}function Z2(n,e,t){var r;const i=(r=n.audioCodec)==null?void 0:r.split(","),o=XC(n);return i&&n.audioGroups?n.audioGroups.reduce((l,d)=>{var c;const f=d?(c=e.groups[d])==null?void 0:c.tracks:null;return f?f.reduce((m,g)=>{if(g.groupId===d){const p=parseFloat(g.channels||"");i.forEach(y=>{const v={contentType:Ev(y,"audio"),bitrate:t?J2(y,o):o};p&&(v.channels=""+p),m.push(v)})}return m},l):l},[]):[]}function J2(n,e){if(e<=1)return 1;let t=128e3;return n==="ec-3"?t=768e3:n==="ac-3"&&(t=64e4),Math.min(e/2,t)}function XC(n){return Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)/1e3)*1e3||1}function eF(n){let e="";const{audio:t,video:r}=n;if(r){const i=YS(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(t){const i=YS(t.contentType);e+=`${r?"_":""}${i}_c${t.channels}`}return e}const WS=["NONE","TYPE-0","TYPE-1",null];function tF(n){return WS.indexOf(n)>-1}const L0=["SDR","PQ","HLG"];function nF(n){return!!n&&L0.indexOf(n)>-1}var db={No:"",Yes:"YES",v2:"v2"};function tR(n){const{canSkipUntil:e,canSkipDateRanges:t,age:r}=n,i=r<e/2;return e&&i?t?db.v2:db.Yes:db.No}class nR{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class bv{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const r=(t=e.supplemental)==null?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return rR(this._audioGroups,e)}hasSubtitleGroup(e){return rR(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(t)===-1&&r.push(t)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(t)===-1&&r.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function rR(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function rF(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function iF(n,e){let t=!1,r=[];if(n&&(t=n!=="SDR",r=[n]),e){r=e.allowedVideoRanges||L0.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&rF(),t||(r=["SDR"])}return{preferHDR:t,allowedVideoRanges:r}}const aF=n=>{const e=new WeakSet;return(t,r)=>{if(n&&(r=n(t,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},Ii=(n,e)=>JSON.stringify(n,aF(e));function sF(n,e,t,r,i){const o=Object.keys(n),l=r==null?void 0:r.channels,d=r==null?void 0:r.audioCodec,c=i==null?void 0:i.videoCodec,f=l&&parseInt(l)===2;let m=!1,g=!1,p=1/0,y=1/0,v=1/0,A=1/0,I=0,P=[];const{preferHDR:U,allowedVideoRanges:M}=iF(e,i);for(let O=o.length;O--;){const oe=n[o[O]];m||(m=oe.channels[2]>0),p=Math.min(p,oe.minHeight),y=Math.min(y,oe.minFramerate),v=Math.min(v,oe.minBitrate),M.filter(ve=>oe.videoRanges[ve]>0).length>0&&(g=!0)}p=Fn(p)?p:0,y=Fn(y)?y:0;const B=Math.max(1080,p),ie=Math.max(30,y);v=Fn(v)?v:t,t=Math.max(v,t),g||(e=void 0);const L=o.length>1;return{codecSet:o.reduce((O,oe)=>{const D=n[oe];if(oe===O)return O;if(P=g?M.filter(ve=>D.videoRanges[ve]>0):[],L){if(D.minBitrate>t)return Uo(oe,`min bitrate of ${D.minBitrate} > current estimate of ${t}`),O;if(!D.hasDefaultAudio)return Uo(oe,"no renditions with default or auto-select sound found"),O;if(d&&oe.indexOf(d.substring(0,4))%5!==0)return Uo(oe,`audio codec preference "${d}" not found`),O;if(l&&!f){if(!D.channels[l])return Uo(oe,`no renditions with ${l} channel sound found (channels options: ${Object.keys(D.channels)})`),O}else if((!d||f)&&m&&D.channels[2]===0)return Uo(oe,"no renditions with stereo sound found"),O;if(D.minHeight>B)return Uo(oe,`min resolution of ${D.minHeight} > maximum of ${B}`),O;if(D.minFramerate>ie)return Uo(oe,`min framerate of ${D.minFramerate} > maximum of ${ie}`),O;if(!P.some(ve=>D.videoRanges[ve]>0))return Uo(oe,`no variants with VIDEO-RANGE of ${Ii(P)} found`),O;if(c&&oe.indexOf(c.substring(0,4))%5!==0)return Uo(oe,`video codec preference "${c}" not found`),O;if(D.maxScore<I)return Uo(oe,`max score of ${D.maxScore} < selected max of ${I}`),O}return O&&(x0(oe)>=x0(O)||D.fragmentError>n[O].fragmentError)?O:(A=D.minIndex,I=D.maxScore,oe)},void 0),videoRanges:P,preferHDR:U,minFramerate:y,minBitrate:v,minIndex:A}}function Uo(n,e){ni.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function ZC(n){return n.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const i=t.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function oF(n,e,t,r){return n.slice(t,r+1).reduce((i,o,l)=>{if(!o.codecSet)return i;const d=o.audioGroups;let c=i[o.codecSet];c||(i[o.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:l,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!d,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,o.bitrate);const f=Math.min(o.height,o.width);return c.minHeight=Math.min(c.minHeight,f),c.minFramerate=Math.min(c.minFramerate,o.frameRate),c.minIndex=Math.min(c.minIndex,l),c.maxScore=Math.max(c.maxScore,o.score),c.fragmentError+=o.fragmentError,c.videoRanges[o.videoRange]=(c.videoRanges[o.videoRange]||0)+1,d&&d.forEach(m=>{if(!m)return;const g=e.groups[m];g&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?g.hasDefault:g.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(g.channels).forEach(p=>{c.channels[p]=(c.channels[p]||0)+g.channels[p]}))}),i},{})}function iR(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:r,channels:i,audioCodec:o}=n;return{lang:e,assocLang:t,characteristics:r,channels:i,audioCodec:o}}function dl(n,e,t){if("attrs"in n){const r=e.indexOf(n);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(hf(n,i,t))return r}return-1}function hf(n,e,t){const{groupId:r,name:i,lang:o,assocLang:l,default:d}=n,c=n.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(o===void 0||lF(o,e.lang))&&(o===void 0||e.assocLang===l)&&(d===void 0||e.default===d)&&(c===void 0||e.forced===c)&&(!("characteristics"in n)||uF(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function lF(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function uF(n,e=""){const t=n.split(","),r=e.split(",");return t.length===r.length&&!t.some(i=>r.indexOf(i)===-1)}function Nc(n,e){const{audioCodec:t,channels:r}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function dF(n,e,t,r,i){const o=e[r],d=e.reduce((p,y,v)=>{const A=y.uri;return(p[A]||(p[A]=[])).push(v),p},{})[o.uri];d.length>1&&(r=Math.max.apply(Math,d));const c=o.videoRange,f=o.frameRate,m=o.codecSet.substring(0,4),g=aR(e,r,p=>{if(p.videoRange!==c||p.frameRate!==f||p.codecSet.substring(0,4)!==m)return!1;const y=p.audioGroups,v=t.filter(A=>!y||y.indexOf(A.groupId)!==-1);return dl(n,v,i)>-1});return g>-1?g:aR(e,r,p=>{const y=p.audioGroups,v=t.filter(A=>!y||y.indexOf(A.groupId)!==-1);return dl(n,v,i)>-1})}function aR(n,e,t){for(let r=e;r>-1;r--)if(t(n[r]))return r;for(let r=e+1;r<n.length;r++)if(t(n[r]))return r;return-1}function D0(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class cF extends Ao{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var r;const{fragCurrent:i,partCurrent:o,hls:l}=this,{autoLevelEnabled:d,media:c}=l;if(!i||!c)return;const f=performance.now(),m=o?o.stats:i.stats,g=o?o.duration:i.duration,p=f-m.loading.start,y=l.minAutoLevel,v=i.level,A=this._nextAutoLevel;if(m.aborted||m.loaded&&m.loaded===m.total||v<=y){this.clearTimer(),this._nextAutoLevel=-1;return}if(!d)return;const I=A>-1&&A!==v,P=!!t||I;if(!P&&(c.paused||!c.playbackRate||!c.readyState))return;const U=l.mainForwardBufferInfo;if(!P&&U===null)return;const M=this.bwEstimator.getEstimateTTFB(),B=Math.abs(c.playbackRate);if(p<=Math.max(M,1e3*(g/(B*2))))return;const ie=U?U.len/B:0,L=m.loading.first?m.loading.first-m.loading.start:-1,w=m.loaded&&L>-1,O=this.getBwEstimate(),oe=l.levels,D=oe[v],ve=Math.max(m.loaded,Math.round(g*(i.bitrate||D.averageBitrate)/8));let Le=w?p-L:p;Le<1&&w&&(Le=Math.min(p,m.loaded*8/O));const te=w?m.loaded*1e3/Le:0,$e=M/1e3,Ue=te?(ve-m.loaded)/te:ve*8/O+$e;if(Ue<=ie)return;const Re=te?te*8:O,Xe=((r=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,Ye=this.hls.config.abrBandWidthUpFactor;let Ze=Number.POSITIVE_INFINITY,Ne;for(Ne=v-1;Ne>y;Ne--){const jt=oe[Ne].maxBitrate,Pe=!oe[Ne].details||Xe;if(Ze=this.getTimeToLoadFrag($e,Re,g*jt,Pe),Ze<Math.min(ie,g+$e))break}if(Ze>=Ue||Ze>g*10)return;w?this.bwEstimator.sample(p-Math.min(M,L),m.loaded):this.bwEstimator.sampleTTFB(p);const ze=oe[Ne].maxBitrate;this.getBwEstimate()*Ye>ze&&this.resetEstimator(ze);const st=this.findBestLevel(ze,y,Ne,0,ie,1,1);st>-1&&(Ne=st),this.warn(`Fragment ${i.sn}${o?" part "+o.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${ie.toFixed(3)} s
      Estimated load time for current fragment: ${Ue.toFixed(3)} s
      Estimated load time for down switch fragment: ${Ze.toFixed(3)} s
      TTFB estimate: ${L|0} ms
      Current BW estimate: ${Fn(O)?O|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Ne} @ ${ze|0} bps`),l.nextLoadLevel=l.nextAutoLevel=Ne,this.clearTimer();const Rt=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Ne&&Ne>0){const jt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Ne>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${jt.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Ne>y){let Pe=this.findBestLevel(this.hls.levels[y].bitrate,y,Ne,0,jt,1,1);Pe===-1&&(Pe=y),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Pe,this.resetEstimator(this.hls.levels[Pe].bitrate)}}};I||Ue>Ze*2?Rt():this.timer=self.setInterval(Rt,Ze*1e3),l.trigger(Te.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:o,stats:m})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new T2(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.FRAG_LOADING,this.onFragLoading,this),e.on(Te.FRAG_LOADED,this.onFragLoaded,this),e.on(Te.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Te.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Te.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Te.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.FRAG_LOADING,this.onFragLoading,this),e.off(Te.FRAG_LOADED,this.onFragLoaded,this),e.off(Te.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Te.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Te.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Te.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case It.BUFFER_ADD_CODEC_ERROR:case It.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case It.FRAG_LOAD_TIMEOUT:{const r=t.frag,{fragCurrent:i,partCurrent:o}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const l=performance.now(),d=o?o.stats:r.stats,c=l-d.loading.start,f=d.loading.first?d.loading.first-d.loading.start:-1;if(d.loaded&&f>-1){const g=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(g,f),d.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,t,r,i){const o=e+r/t,l=i?e+this.lastLevelLoadSec:0;return o+l}onLevelLoaded(e,t){const r=this.hls.config,{loading:i}=t.stats,o=i.end-i.first;Fn(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:r}){const i=r?r.stats:t.stats;if(t.type===Qn.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=r?r.duration:t.duration,l=this.hls.levels[t.level],d=(l.loaded?l.loaded.bytes:0)+i.loaded,c=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:d,duration:c},l.realBitrate=Math.round(8*d/c)}if(t.bitrateTest){const o={stats:i,frag:t,part:r,id:t.type};this.onFragBuffered(Te.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:i}=t,o=i!=null&&i.stats.loaded?i.stats:r.stats;if(o.aborted||this.ignoreFragment(r))return;const l=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,o.loaded),o.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Qn.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,o=this.findBestLevel(r,t,e,0,i,1,1);if(o>-1)return o;const l=this.hls.firstLevel,d=Math.min(Math.max(l,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${d}`),d}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const l=this.hls.levels;if(l.length>Math.max(e,o)&&l[e].loadError<=l[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:o,minAutoLevel:l}=r,d=t?t.duration:e?e.duration:0,c=this.getBwEstimate(),f=this.getStarvationDelay();let m=o.abrBandWidthFactor,g=o.abrBandWidthUpFactor;if(f){const I=this.findBestLevel(c,l,i,f,0,m,g);if(I>=0)return this.rebufferNotice=-1,I}let p=d?Math.min(d,o.maxStarvationDelay):o.maxStarvationDelay;if(!f){const I=this.bitrateTestDelay;I&&(p=(d?Math.min(d,o.maxLoadingDelay):o.maxLoadingDelay)-I,this.info(`bitrate test took ${Math.round(1e3*I)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),m=g=1)}const y=this.findBestLevel(c,l,i,f,p,m,g);if(this.rebufferNotice!==y&&(this.rebufferNotice=y,this.info(`${f?"rebuffering expected":"buffer is empty"}, optimal quality level ${y}`)),y>-1)return y;const v=r.levels[l],A=r.loadLevelObj;return A&&(v==null?void 0:v.bitrate)<A.bitrate?l:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,o,l,d){var c;const f=i+o,m=this.lastLoadedFragLevel,g=m===-1?this.hls.firstLevel:m,{fragCurrent:p,partCurrent:y}=this,{levels:v,allAudioTracks:A,loadLevel:I,config:P}=this.hls;if(v.length===1)return 0;const U=v[g],M=!!((c=this.hls.latestLevelDetails)!=null&&c.live),B=I===-1||m===-1;let ie,L="SDR",w=(U==null?void 0:U.frameRate)||0;const{audioPreference:O,videoPreference:oe}=P,D=this.audioTracksByGroup||(this.audioTracksByGroup=ZC(A));let ve=-1;if(B){if(this.firstSelection!==-1)return this.firstSelection;const Re=this.codecTiers||(this.codecTiers=oF(v,D,t,r)),Xe=sF(Re,L,e,O,oe),{codecSet:Ye,videoRanges:Ze,minFramerate:Ne,minBitrate:ze,minIndex:st,preferHDR:Rt}=Xe;ve=st,ie=Ye,L=Rt?Ze[Ze.length-1]:Ze[0],w=Ne,e=Math.max(e,ze),this.log(`picked start tier ${Ii(Xe)}`)}else ie=U==null?void 0:U.codecSet,L=U==null?void 0:U.videoRange;const Le=y?y.duration:p?p.duration:0,te=this.bwEstimator.getEstimateTTFB()/1e3,$e=[];for(let Re=r;Re>=t;Re--){var Ue;const Xe=v[Re],Ye=Re>g;if(!Xe)continue;if(P.useMediaCapabilities&&!Xe.supportedResult&&!Xe.supportedPromise){const Pe=navigator.mediaCapabilities;typeof(Pe==null?void 0:Pe.decodingInfo)=="function"&&Q2(Xe,D,L,w,e,O)?(Xe.supportedPromise=QC(Xe,D,Pe,this.supportedCache),Xe.supportedPromise.then(Oe=>{if(!this.hls)return;Xe.supportedResult=Oe;const gt=this.hls.levels,Q=gt.indexOf(Xe);Oe.error?this.warn(`MediaCapabilities decodingInfo error: "${Oe.error}" for level ${Q} ${Ii(Oe)}`):Oe.supported?Oe.decodingInfoResults.some(J=>J.smooth===!1||J.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Q} not smooth or powerEfficient: ${Ii(Oe)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Q} ${Ii(Oe)}`),Q>-1&&gt.length>1&&(this.log(`Removing unsupported level ${Q}`),this.hls.removeLevel(Q),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):Xe.supportedResult=YC}if((ie&&Xe.codecSet!==ie||L&&Xe.videoRange!==L||Ye&&w>Xe.frameRate||!Ye&&w>0&&w<Xe.frameRate||(Ue=Xe.supportedResult)!=null&&(Ue=Ue.decodingInfoResults)!=null&&Ue.some(Pe=>Pe.smooth===!1))&&(!B||Re!==ve)){$e.push(Re);continue}const Ze=Xe.details,Ne=(y?Ze==null?void 0:Ze.partTarget:Ze==null?void 0:Ze.averagetargetduration)||Le;let ze;Ye?ze=d*e:ze=l*e;const st=Le&&i>=Le*2&&o===0?Xe.averageBitrate:Xe.maxBitrate,Rt=this.getTimeToLoadFrag(te,ze,st*Ne,Ze===void 0);if(ze>=st&&(Re===m||Xe.loadError===0&&Xe.fragmentError===0)&&(Rt<=te||!Fn(Rt)||M&&!this.bitrateTestDelay||Rt<f)){const Pe=this.forcedAutoLevel;return Re!==I&&(Pe===-1||Pe!==I)&&($e.length&&this.trace(`Skipped level(s) ${$e.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${v[$e[0]].codecs}" ${v[$e[0]].videoRange}; not compatible with "${ie}" ${L}`),this.info(`switch candidate:${g}->${Re} adjustedbw(${Math.round(ze)})-bitrate=${Math.round(ze-st)} ttfb:${te.toFixed(1)} avgDuration:${Ne.toFixed(1)} maxFetchDuration:${f.toFixed(1)} fetchDuration:${Rt.toFixed(1)} firstSelection:${B} codecSet:${Xe.codecSet} videoRange:${Xe.videoRange} hls.loadLevel:${I}`)),B&&(this.firstSelection=Re),Re}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),t)}}const JC={search:function(n,e){let t=0,r=n.length-1,i=null,o=null;for(;t<=r;){i=(t+r)/2|0,o=n[i];const l=e(o);if(l>0)t=i+1;else if(l<0)r=i-1;else return o}return null}};function fF(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Fn(e))return null;const r=n[0].programDateTime;if(e<(r||0))return null;const i=n[n.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let o=0;o<n.length;++o){const l=n[o];if(mF(e,t,l))return l}return null}function bf(n,e,t=0,r=0,i=.005){let o=null;if(n){o=e[1+n.sn-e[0].sn]||null;const d=n.endDTS-t;d>0&&d<15e-7&&(t+=15e-7),o&&n.level!==o.level&&o.end<=n.end&&(o=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!n||n.level===o.level)&&sR(t,r,o)===0||hF(o,n,Math.min(i,r))))return o;const l=JC.search(e,sR.bind(null,t,r));return l&&(l!==n||!o)?l:o}function hF(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,o)=>(o[0]==="INF"&&(i+=parseFloat(o[1])),i),t);return n.start<=r}return!1}function sR(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=n?1:t.start-r>n&&t.start?-1:0}function mF(n,e,t){const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-r>n}function eL(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){let r=n.fragments;const{fragmentHint:i}=n;i&&(r=r.concat(i));let o;return JC.search(r,l=>l.cc<e?1:l.cc>e?-1:(o=l,l.end<=t?1:l.start>t?-1:0)),o||null}return null}function N0(n){switch(n.details){case It.FRAG_LOAD_TIMEOUT:case It.KEY_LOAD_TIMEOUT:case It.LEVEL_LOAD_TIMEOUT:case It.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function oR(n,e){const t=N0(e);return n.default[`${t?"timeout":"error"}Retry`]}function Fw(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function lR(n){return ai(ai({},n),{errorRetry:null,timeoutRetry:null})}function P0(n,e,t,r){if(!n)return!1;const i=r==null?void 0:r.code,o=e<n.maxNumRetry&&(gF(i)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,r,o):o}function gF(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}var Oa={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},yo={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class pF extends Ao{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Te.ERROR,this.onError,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Te.ERROR,this.onError,this),e.off(Te.ERROR,this.onErrorOut,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Qn.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var r;if(t.fatal)return;const i=this.hls,o=t.context;switch(t.details){case It.FRAG_LOAD_ERROR:case It.FRAG_LOAD_TIMEOUT:case It.KEY_LOAD_ERROR:case It.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case It.FRAG_PARSING_ERROR:if((r=t.frag)!=null&&r.gap){t.errorAction=Tv();return}case It.FRAG_GAP:case It.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Oa.SendAlternateToPenaltyBox;return}case It.LEVEL_EMPTY_ERROR:case It.LEVEL_PARSING_ERROR:{var l;const c=t.parent===Qn.MAIN?t.level:i.loadLevel;t.details===It.LEVEL_EMPTY_ERROR&&((l=t.context)!=null&&(l=l.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case It.LEVEL_LOAD_ERROR:case It.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case It.AUDIO_TRACK_LOAD_ERROR:case It.AUDIO_TRACK_LOAD_TIMEOUT:case It.SUBTITLE_LOAD_ERROR:case It.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=i.loadLevelObj;if(c&&(o.type===Cr.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===Cr.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=Oa.SendAlternateToPenaltyBox,t.errorAction.flags=yo.MoveAllAlternatesMatchingHost;return}}return;case It.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=i.loadLevelObj,f=c==null?void 0:c.attrs["HDCP-LEVEL"];f?t.errorAction={action:Oa.SendAlternateToPenaltyBox,flags:yo.MoveAllAlternatesMatchingHDCP,hdcpLevel:f}:this.keySystemError(t)}return;case It.BUFFER_ADD_CODEC_ERROR:case It.REMUX_ALLOC_ERROR:case It.BUFFER_APPEND_ERROR:if(!t.errorAction){var d;t.errorAction=this.getLevelSwitchAction(t,(d=t.level)!=null?d:i.loadLevel)}return;case It.INTERNAL_EXCEPTION:case It.BUFFER_APPENDING_ERROR:case It.BUFFER_FULL_ERROR:case It.LEVEL_SWITCH_ERROR:case It.BUFFER_STALLED_ERROR:case It.BUFFER_SEEK_OVER_HOLE:case It.BUFFER_NUDGE_ON_STALL:t.errorAction=Tv();return}t.type===Zn.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const r=this.hls,i=oR(r.config.playlistLoadPolicy,e),o=this.playlistError++;if(P0(i,o,N0(e),e.response))return{action:Oa.RetryRequest,flags:yo.None,retryConfig:i,retryCount:o};const d=this.getLevelSwitchAction(e,t);return i&&(d.retryConfig=i,d.retryCount=o),d}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],{fragLoadPolicy:o,keyLoadPolicy:l}=t.config,d=oR(e.details.startsWith("key")?l:o,e),c=t.levels.reduce((m,g)=>m+g.fragmentError,0);if(i&&(e.details!==It.FRAG_GAP&&i.fragmentError++,P0(d,c,N0(e),e.response)))return{action:Oa.RetryRequest,flags:yo.None,retryConfig:d,retryCount:c};const f=this.getLevelSwitchAction(e,r);return d&&(f.retryConfig=d,f.retryCount=c),f}getLevelSwitchAction(e,t){const r=this.hls;t==null&&(t=r.loadLevel);const i=this.hls.levels[t];if(i){var o,l;const f=e.details;i.loadError++,f===It.BUFFER_APPEND_ERROR&&i.fragmentError++;let m=-1;const{levels:g,loadLevel:p,minAutoLevel:y,maxAutoLevel:v}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const A=(o=e.frag)==null?void 0:o.type,P=(A===Qn.AUDIO&&f===It.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(f===It.BUFFER_ADD_CODEC_ERROR||f===It.BUFFER_APPEND_ERROR))&&g.some(({audioCodec:L})=>i.audioCodec!==L),M=e.sourceBufferName==="video"&&(f===It.BUFFER_ADD_CODEC_ERROR||f===It.BUFFER_APPEND_ERROR)&&g.some(({codecSet:L,audioCodec:w})=>i.codecSet!==L&&i.audioCodec===w),{type:B,groupId:ie}=(l=e.context)!=null?l:{};for(let L=g.length;L--;){const w=(L+p)%g.length;if(w!==p&&w>=y&&w<=v&&g[w].loadError===0){var d,c;const O=g[w];if(f===It.FRAG_GAP&&A===Qn.MAIN&&e.frag){const oe=g[w].details;if(oe){const D=bf(e.frag,oe.fragments,e.frag.start);if(D!=null&&D.gap)continue}}else{if(B===Cr.AUDIO_TRACK&&O.hasAudioGroup(ie)||B===Cr.SUBTITLE_TRACK&&O.hasSubtitleGroup(ie))continue;if(A===Qn.AUDIO&&(d=i.audioGroups)!=null&&d.some(oe=>O.hasAudioGroup(oe))||A===Qn.SUBTITLE&&(c=i.subtitleGroups)!=null&&c.some(oe=>O.hasSubtitleGroup(oe))||P&&i.audioCodec===O.audioCodec||M&&i.codecSet===O.codecSet||!P&&i.codecSet!==O.codecSet)continue}m=w;break}}if(m>-1&&r.loadLevel!==m)return e.levelRetry=!0,this.playlistError=0,{action:Oa.SendAlternateToPenaltyBox,flags:yo.None,nextAutoLevel:m}}return{action:Oa.SendAlternateToPenaltyBox,flags:yo.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var r;switch((r=t.errorAction)==null?void 0:r.action){case Oa.DoNothing:break;case Oa.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==It.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:o,nextAutoLevel:l}=r;switch(i){case yo.None:this.switchLevel(e,l);break;case yo.MoveAllAlternatesMatchingHDCP:o&&(t.maxHdcpLevel=WS[WS.indexOf(o)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,l)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===It.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=YS(e.mimeType),i=this.hls.levels;for(let o=i.length;o--;)i[o][`${e.sourceBufferName}Codec`]===r&&this.hls.removeLevel(o)}}}function Tv(n){const e={action:Oa.DoNothing,flags:yo.None};return n&&(e.resolved=!0),e}var oa={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class vF{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Te.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Te.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Te.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Te.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let i=r.length;i--;){const o=r[i];if(!o)break;if(o.start<=e&&e<=o.end&&o.loaded)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,r){const{fragments:i}=this,o=Object.keys(i);for(let l=o.length;l--;){const d=i[o[l]];if((d==null?void 0:d.body.type)===t&&(!r||d.buffered)){const c=d.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,t,r,i,o){this.timeRanges&&(this.timeRanges[e]=t);const l=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(d=>{const c=this.fragments[d];if(!c||l>=c.body.sn)return;if(!c.buffered&&(!c.loaded||o)){c.body.type===r&&this.removeFragment(c.body);return}const f=c.range[e];if(f){if(f.time.length===0){this.removeFragment(c.body);return}f.time.some(m=>{const g=!this.isTimeBuffered(m.startPTS,m.endPTS,t);return g&&this.removeFragment(c.body),g})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const r=e.frag,i=Rh(r),o=this.fragments[i];if(!o||o.buffered&&r.gap)return;const l=!r.relurl;Object.keys(t).forEach(d=>{const c=r.elementaryStreams[d];if(!c)return;const f=t[d],m=l||c.partial===!0;o.range[d]=this.getBufferedTimes(r,e.part,m,f)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=r.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),NE(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=uR(r,i=>i.fragment.sn>=e))}fragBuffered(e,t){const r=Rh(e);let i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,r,i){const o={time:[],partial:r},l=e.start,d=e.end,c=e.minEndPTS||d,f=e.maxStartPTS||l;for(let m=0;m<i.length;m++){const g=i.start(m)-this.bufferPadding,p=i.end(m)+this.bufferPadding;if(f>=g&&c<=p){o.time.push({startPTS:Math.max(l,i.start(m)),endPTS:Math.min(d,i.end(m))});break}else if(l<p&&d>g){const y=Math.max(l,i.start(m)),v=Math.min(d,i.end(m));v>y&&(o.partial=!0,o.time.push({startPTS:y,endPTS:v}))}else if(d<=g)break}return o}getPartialFragment(e){let t=null,r,i,o,l=0;const{bufferPadding:d,fragments:c}=this;return Object.keys(c).forEach(f=>{const m=c[f];m&&NE(m)&&(i=m.body.start-d,o=m.body.end+d,e>=i&&e<=o&&(r=Math.min(e-i,o-e),l<=r&&(t=m.body,l=r)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||NE(t))}getState(e){const t=Rh(e),r=this.fragments[t];return r?r.buffered?NE(r)?oa.PARTIAL:oa.OK:oa.APPENDING:oa.NOT_LOADED}isTimeBuffered(e,t,r){let i,o;for(let l=0;l<r.length;l++){if(i=r.start(l)-this.bufferPadding,o=r.end(l)+this.bufferPadding,e>=i&&t<=o)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const r=t.frag,i=t.part?null:t,o=Rh(r);this.fragments[o]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:i,timeRanges:o,type:l}=t;if(r.sn==="initSegment")return;const d=r.type;if(i){let f=this.activePartLists[d];f||(this.activePartLists[d]=f=[]),f.push(i)}this.timeRanges=o;const c=o[l];this.detectEvictedFragments(l,c,d,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Rh(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,r=Object.keys(t);if(!e)return r.length>0;for(let i=r.length;i--;){const o=t[r[i]];if((o==null?void 0:o.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,r,i,o){i&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const d=this.fragments[l];if(!d)return;const c=d.body;c.type!==r||i&&!c.gap||c.start<t&&c.end>e&&(d.buffered||o)&&this.removeFragment(c)})}removeFragment(e){const t=Rh(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=uR(r,o=>o.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(r=>r.clearElementaryStreamInfo())}}function NE(n){var e,t,r;return n.buffered&&!!(n.body.gap||(e=n.range.video)!=null&&e.partial||(t=n.range.audio)!=null&&t.partial||(r=n.range.audiovideo)!=null&&r.partial)}function Rh(n){return`${n.type}_${n.level}_${n.sn}`}function uR(n,e){return n.filter(t=>{const r=e(t);return r||t.clearElementaryStreamInfo(),r})}var Pd={cbc:0,ctr:1};class yF{constructor(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}decrypt(e,t){switch(this.aesMode){case Pd.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Pd.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function EF(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class bF{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=t.getUint32(i*4);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],o=r[1],l=r[2],d=r[3],c=this.invSubMix,f=c[0],m=c[1],g=c[2],p=c[3],y=new Uint32Array(256);let v=0,A=0,I=0;for(I=0;I<256;I++)I<128?y[I]=I<<1:y[I]=I<<1^283;for(I=0;I<256;I++){let P=A^A<<1^A<<2^A<<3^A<<4;P=P>>>8^P&255^99,e[v]=P,t[P]=v;const U=y[v],M=y[U],B=y[M];let ie=y[P]*257^P*16843008;i[v]=ie<<24|ie>>>8,o[v]=ie<<16|ie>>>16,l[v]=ie<<8|ie>>>24,d[v]=ie,ie=B*16843009^M*65537^U*257^v*16843008,f[P]=ie<<24|ie>>>8,m[P]=ie<<16|ie>>>16,g[P]=ie<<8|ie>>>24,p[P]=ie,v?(v=U^y[y[y[B^U]]],A^=y[y[A]]):v=A=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<t.length&&r;)r=t[i]===this.key[i],i++;if(r)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const l=this.ksRows=(o+6+1)*4;let d,c;const f=this.keySchedule=new Uint32Array(l),m=this.invKeySchedule=new Uint32Array(l),g=this.sBox,p=this.rcon,y=this.invSubMix,v=y[0],A=y[1],I=y[2],P=y[3];let U,M;for(d=0;d<l;d++){if(d<o){U=f[d]=t[d];continue}M=U,d%o===0?(M=M<<8|M>>>24,M=g[M>>>24]<<24|g[M>>>16&255]<<16|g[M>>>8&255]<<8|g[M&255],M^=p[d/o|0]<<24):o>6&&d%o===4&&(M=g[M>>>24]<<24|g[M>>>16&255]<<16|g[M>>>8&255]<<8|g[M&255]),f[d]=U=(f[d-o]^M)>>>0}for(c=0;c<l;c++)d=l-c,c&3?M=f[d]:M=f[d-4],c<4||d<=4?m[c]=M:m[c]=v[g[M>>>24]]^A[g[M>>>16&255]]^I[g[M>>>8&255]]^P[g[M&255]],m[c]=m[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,r){const i=this.keySize+6,o=this.invKeySchedule,l=this.invSBox,d=this.invSubMix,c=d[0],f=d[1],m=d[2],g=d[3],p=this.uint8ArrayToUint32Array_(r);let y=p[0],v=p[1],A=p[2],I=p[3];const P=new Int32Array(e),U=new Int32Array(P.length);let M,B,ie,L,w,O,oe,D,ve,Le,te,$e,Ue,Re;const Xe=this.networkToHostOrderSwap;for(;t<P.length;){for(ve=Xe(P[t]),Le=Xe(P[t+1]),te=Xe(P[t+2]),$e=Xe(P[t+3]),w=ve^o[0],O=$e^o[1],oe=te^o[2],D=Le^o[3],Ue=4,Re=1;Re<i;Re++)M=c[w>>>24]^f[O>>16&255]^m[oe>>8&255]^g[D&255]^o[Ue],B=c[O>>>24]^f[oe>>16&255]^m[D>>8&255]^g[w&255]^o[Ue+1],ie=c[oe>>>24]^f[D>>16&255]^m[w>>8&255]^g[O&255]^o[Ue+2],L=c[D>>>24]^f[w>>16&255]^m[O>>8&255]^g[oe&255]^o[Ue+3],w=M,O=B,oe=ie,D=L,Ue=Ue+4;M=l[w>>>24]<<24^l[O>>16&255]<<16^l[oe>>8&255]<<8^l[D&255]^o[Ue],B=l[O>>>24]<<24^l[oe>>16&255]<<16^l[D>>8&255]<<8^l[w&255]^o[Ue+1],ie=l[oe>>>24]<<24^l[D>>16&255]<<16^l[w>>8&255]<<8^l[O&255]^o[Ue+2],L=l[D>>>24]<<24^l[w>>16&255]<<16^l[O>>8&255]<<8^l[oe&255]^o[Ue+3],U[t]=Xe(M^y),U[t+1]=Xe(L^v),U[t+2]=Xe(ie^A),U[t+3]=Xe(B^I),y=ve,v=Le,A=te,I=$e,t=t+4}return U.buffer}}class TF{constructor(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}expandKey(){const e=_F(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function _F(n){switch(n){case Pd.cbc:return"AES-CBC";case Pd.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const SF=16;class Uw{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?EF(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r,i){return this.useSoftware?new Promise((o,l)=>{const d=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(d,t,r,i);const c=this.flush();c?o(c.buffer):l(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r,i)}softwareDecrypt(e,t,r,i){const{currentIV:o,currentResult:l,remainderData:d}=this;if(i!==Pd.cbc||t.byteLength!==16)return ni.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),d&&(e=Qs(d,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;o&&(r=o);let f=this.softwareDecrypter;f||(f=this.softwareDecrypter=new bF),f.expandKey(t);const m=l;return this.currentResult=f.decrypt(c.buffer,0,r),this.currentIV=c.slice(-16).buffer,m||null}webCryptoDecrypt(e,t,r,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,i));this.key=t,this.fastAesKey=new TF(this.subtle,t,i)}return this.fastAesKey.expandKey().then(o=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new yF(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,o)):Promise.reject(new Error("web crypto not initialized"))).catch(o=>(ni.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${o.name}: ${o.message}`),this.onWebCryptoError(e,t,r,i)))}onWebCryptoError(e,t,r,i){const o=this.enableSoftwareAES;if(o){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,i);const l=this.flush();if(l)return l.buffer}throw new Error("WebCrypto"+(o?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%SF;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t}logOnce(e){this.logEnabled&&(ni.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const dR=Math.pow(2,17);class AF{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new Zl({type:Zn.NETWORK_ERROR,details:It.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((d,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){c(fR(e));return}else e.gap=!1;const f=this.loader=o?new o(i):new l(i),m=cR(e);e.loader=f;const g=lR(i.fragLoadPolicy.default),p={loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:dR};e.stats=f.stats;const y={onSuccess:(v,A,I,P)=>{this.resetLoader(e,f);let U=v.data;I.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(U.slice(0,16)),U=U.slice(16)),d({frag:e,part:null,payload:U,networkDetails:P})},onError:(v,A,I,P)=>{this.resetLoader(e,f),c(new Zl({type:Zn.NETWORK_ERROR,details:It.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ai({url:r,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:I,stats:P}))},onAbort:(v,A,I)=>{this.resetLoader(e,f),c(new Zl({type:Zn.NETWORK_ERROR,details:It.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:I,stats:v}))},onTimeout:(v,A,I)=>{this.resetLoader(e,f),c(new Zl({type:Zn.NETWORK_ERROR,details:It.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:I,stats:v}))}};t&&(y.onProgress=(v,A,I,P)=>t({frag:e,part:null,payload:I,networkDetails:P})),f.load(m,p,y)})}loadPart(e,t,r){this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((d,c)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){c(fR(e,t));return}const f=this.loader=o?new o(i):new l(i),m=cR(e,t);e.loader=f;const g=lR(i.fragLoadPolicy.default),p={loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:dR};t.stats=f.stats,f.load(m,p,{onSuccess:(y,v,A,I)=>{this.resetLoader(e,f),this.updateStatsFromPart(e,t);const P={frag:e,part:t,payload:y.data,networkDetails:I};r(P),d(P)},onError:(y,v,A,I)=>{this.resetLoader(e,f),c(new Zl({type:Zn.NETWORK_ERROR,details:It.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:ai({url:m.url,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:A,stats:I}))},onAbort:(y,v,A)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,f),c(new Zl({type:Zn.NETWORK_ERROR,details:It.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:A,stats:y}))},onTimeout:(y,v,A)=>{this.resetLoader(e,f),c(new Zl({type:Zn.NETWORK_ERROR,details:It.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:A,stats:y}))}})})}updateStatsFromPart(e,t){const r=e.stats,i=t.stats,o=i.total;if(r.loaded+=i.loaded,o){const c=Math.round(e.duration/t.duration),f=Math.min(Math.round(r.loaded/o),c),g=(c-f)*Math.round(r.loaded/f);r.total=r.loaded+g}else r.total=Math.max(r.loaded,r.total);const l=r.loading,d=i.loading;l.start?l.first+=d.first-d.start:(l.start=d.start,l.first=d.first),l.end=d.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function cR(n,e=null){const t=e||n,r={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(Fn(i)&&Fn(o)){var l;let d=i,c=o;if(n.sn==="initSegment"&&wF((l=n.decryptdata)==null?void 0:l.method)){const f=o-i;f%16&&(c=o+(16-f%16)),i!==0&&(r.resetIV=!0,d=i-16)}r.rangeStart=d,r.rangeEnd=c}return r}function fR(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),r={type:Zn.MEDIA_ERROR,details:It.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(r.part=e),(e||n).stats.aborted=!0,new Zl(r)}function wF(n){return n==="AES-128"||n==="AES-256"}class Zl extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class tL extends Ao{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class zw{constructor(e,t,r,i=0,o=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=PE(),this.buffering={audio:PE(),video:PE(),audiovideo:PE()},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=o,this.partial=l}}function PE(){return{start:0,executeStart:0,executeEnd:0,end:0}}const hR={length:0,start:()=>0,end:()=>0};class pr{static isBuffered(e,t){if(e){const r=pr.getBuffered(e);for(let i=r.length;i--;)if(t>=r.start(i)&&t<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=pr.getBuffered(e);return pr.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}static bufferInfo(e,t,r){if(e){const i=pr.bufferedRanges(e);if(i.length)return pr.bufferedInfo(i,t,r)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.length>1&&e.sort((m,g)=>m.start-g.start||g.end-m.end);let i=-1,o=[];if(r)for(let m=0;m<e.length;m++){t>=e[m].start&&t<=e[m].end&&(i=m);const g=o.length;if(g){const p=o[g-1].end;e[m].start-p<r?e[m].end>p&&(o[g-1].end=e[m].end):o.push(e[m])}else o.push(e[m])}else o=e;let l=0,d,c=t,f=t;for(let m=0;m<o.length;m++){const g=o[m].start,p=o[m].end;if(i===-1&&t>=g&&t<=p&&(i=m),t+r>=g&&t<p)c=g,f=p,l=f-t;else if(t+r<g){d=g;break}}return{len:l,start:c||0,end:f||0,nextStart:d,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||hR}catch(t){return ni.log("failed to get media.buffered",t),hR}}}const nL=/\{\$([a-zA-Z0-9-_]+)\}/g;function mR(n){return nL.test(n)}function QS(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(nL,r=>{const i=r.substring(2,r.length-1),o=t==null?void 0:t[i];return o===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):o})}return e}function gR(n,e,t){let r=n.variableList;r||(n.variableList=r={});let i,o;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const l=new self.URL(t).searchParams;if(l.has(i))o=l.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(l){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else i=e.NAME,o=e.VALUE;i in r?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=o||""}function IF(n,e,t){const r=e.IMPORT;if(t&&r in t){let i=n.variableList;i||(n.variableList=i={}),i[r]=t[r]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const kF=/^(\d+)x(\d+)$/,pR=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Di{constructor(e,t){typeof e=="string"&&(e=Di.parseAttrList(e,t)),si(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const r=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,o)=>(i[o.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=kF.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let r;const i={},o='"';for(pR.lastIndex=0;(r=pR.exec(e))!==null;){const l=r[1].trim();let d=r[2];const c=d.indexOf(o)===0&&d.lastIndexOf(o)===d.length-1;let f=!1;if(c)d=d.slice(1,-1);else switch(l){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":f=!0}if(t&&(c||f))d=QS(t,d);else if(!f&&!c)switch(l){case"CLOSED-CAPTIONS":if(d==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ni.warn(`${e}: attribute ${l} is missing quotes`)}i[l]=d}return i}}const RF="com.apple.hls.interstitial";function xF(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function CF(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class rL{constructor(e,t,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(i=t==null?void 0:t.tagOrder)!=null?i:r,t){const o=t.attr;for(const l in o)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==o[l]){ni.warn(`DATERANGE tag attribute: "${l}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=l;break}e=si(new Di({}),o,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const o=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Fn(o.getTime())&&(this._endDate=o)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(ni.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Fn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===RF}get isValid(){return!!this.id&&!this._badValueForSameId&&Fn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const LF=10;class DF{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?Fn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||LF}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function hm(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function Bw(n){switch(n){case"AES-128":case"AES-256":return Pd.cbc;case"AES-256-CTR":return Pd.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function $w(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function XS(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function NF(n){const e=XS(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function PF(n){const e=function(r,i,o){const l=r[i];r[i]=r[o],r[o]=l};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function MF(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const o=i[0]==="base64",l=i[1];o?(r.splice(-1,1),t=$w(l)):t=NF(l)}}return t}const M0=typeof self<"u"?self:void 0;var Mi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},is={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function cb(n){switch(n){case is.FAIRPLAY:return Mi.FAIRPLAY;case is.PLAYREADY:return Mi.PLAYREADY;case is.WIDEVINE:return Mi.WIDEVINE;case is.CLEARKEY:return Mi.CLEARKEY}}function x_(n){switch(n){case Mi.FAIRPLAY:return is.FAIRPLAY;case Mi.PLAYREADY:return is.PLAYREADY;case Mi.WIDEVINE:return is.WIDEVINE;case Mi.CLEARKEY:return is.CLEARKEY}}function Dp(n){const{drmSystems:e,widevineLicenseUrl:t}=n,r=e?[Mi.FAIRPLAY,Mi.WIDEVINE,Mi.PLAYREADY,Mi.CLEARKEY].filter(i=>!!e[i]):[];return!r[Mi.WIDEVINE]&&t&&r.push(Mi.WIDEVINE),r}const iL=function(n){return M0!=null&&(n=M0.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function OF(n,e,t,r){let i;switch(n){case Mi.FAIRPLAY:i=["cenc","sinf"];break;case Mi.WIDEVINE:case Mi.PLAYREADY:i=["cenc"];break;case Mi.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return FF(i,e,t,r)}function FF(n,e,t,r){return[{initDataTypes:n,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs=${o}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs=${o}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function UF(n){var e;return n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function zF(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),r=t.substring(t.indexOf("<"),t.length),l=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(l){const d=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(d){const c=$w(d).subarray(0,16);return PF(c),c}}return null}let ME={};class _T{static clearKeyUriToKeyIdMap(){ME={}}constructor(e,t,r,i=[1],o=null,l){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!hm(e),l!=null&&l.startsWith("0x")&&(this.keyId=new Uint8Array(UC(l)))}matches(e){var t,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((t=e.iv)==null?void 0:t.join(","))===((r=this.iv)==null?void 0:r.join(","))}isSupported(){if(this.method){if(hm(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case is.FAIRPLAY:case is.WIDEVINE:case is.PLAYREADY:case is.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(hm(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(ni.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=BF(e);return new _T(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;const t=MF(this.uri);if(t)switch(this.keyFormat){case is.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const r=t.length-22;this.keyId=t.subarray(r,r+16)}break;case is.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=H2(r,null,t),this.keyId=zF(t);break}default:{let r=t.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=ME[this.uri];if(!r){const i=Object.keys(ME).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),ME[this.uri]=r}this.keyId=r}return this}}function BF(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const vR=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,yR=/#EXT-X-MEDIA:(.*)/g,$F=/^#EXT(?:INF|-X-TARGETDURATION):/m,C_=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),jF=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class cl{static findGroup(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===t)return i}}static resolve(e,t){return Dw.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return $F.test(e)}static parseMasterPlaylist(e,t){const r=mR(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},o=[];vR.lastIndex=0;let l;for(;(l=vR.exec(e))!=null;)if(l[1]){var d;const f=new Di(l[1],i),m=QS(i,l[2]),g={attrs:f,bitrate:f.decimalInteger("BANDWIDTH")||f.decimalInteger("AVERAGE-BANDWIDTH"),name:f.NAME,url:cl.resolve(m,t)},p=f.decimalResolution("RESOLUTION");p&&(g.width=p.width,g.height=p.height),TR(f.CODECS,g);const y=f["SUPPLEMENTAL-CODECS"];y&&(g.supplemental={},TR(y,g.supplemental)),(d=g.unknownCodecs)!=null&&d.length||o.push(g),i.levels.push(g)}else if(l[3]){const f=l[3],m=l[4];switch(f){case"SESSION-DATA":{const g=new Di(m,i),p=g["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=g);break}case"SESSION-KEY":{const g=ER(m,t,i);g.encrypted&&g.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(g)):ni.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${m}"`);break}case"DEFINE":{{const g=new Di(m,i);gR(i,g,t)}break}case"CONTENT-STEERING":{const g=new Di(m,i);i.contentSteering={uri:cl.resolve(g["SERVER-URI"],t),pathwayId:g["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=bR(m);break}}}const c=o.length>0&&o.length<i.levels.length;return i.levels=c?o:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,r){let i;const o={},l=r.levels,d={AUDIO:l.map(f=>({id:f.attrs.AUDIO,audioCodec:f.audioCodec})),SUBTITLES:l.map(f=>({id:f.attrs.SUBTITLES,textCodec:f.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(yR.lastIndex=0;(i=yR.exec(e))!==null;){const f=new Di(i[1],r),m=f.TYPE;if(m){const g=d[m],p=o[m]||[];o[m]=p;const y=f.LANGUAGE,v=f["ASSOC-LANGUAGE"],A=f.CHANNELS,I=f.CHARACTERISTICS,P=f["INSTREAM-ID"],U={attrs:f,bitrate:0,id:c++,groupId:f["GROUP-ID"]||"",name:f.NAME||y||"",type:m,default:f.bool("DEFAULT"),autoselect:f.bool("AUTOSELECT"),forced:f.bool("FORCED"),lang:y,url:f.URI?cl.resolve(f.URI,t):""};if(v&&(U.assocLang=v),A&&(U.channels=A),I&&(U.characteristics=I),P&&(U.instreamId=P),g!=null&&g.length){const M=cl.findGroup(g,U.groupId)||g[0];_R(U,M,"audioCodec"),_R(U,M,"textCodec")}p.push(U)}}return o}static parseLevelPlaylist(e,t,r,i,o,l){var d;const c={url:t},f=new DF(t),m=f.fragments,g=[];let p=null,y=0,v=0,A=0,I=0,P=0,U=null,M=new I_(i,c),B,ie,L,w=-1,O=!1,oe=null,D;if(C_.lastIndex=0,f.m3u8=e,f.hasVariableRefs=mR(e),((d=C_.exec(e))==null?void 0:d[0])!=="#EXTM3U")return f.playlistParsingError=new Error("Missing format identifier #EXTM3U"),f;for(;(B=C_.exec(e))!==null;){O&&(O=!1,M=new I_(i,c),M.playlistOffset=A,M.setStart(A),M.sn=y,M.cc=I,P&&(M.bitrate=P),M.level=r,p&&(M.initSegment=p,p.rawProgramDateTime&&(M.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),oe&&(M.setByteRange(oe),oe=null)));const $e=B[1];if($e){M.duration=parseFloat($e);const Ue=(" "+B[2]).slice(1);M.title=Ue||null,M.tagList.push(Ue?["INF",$e,Ue]:["INF",$e])}else if(B[3]){if(Fn(M.duration)){M.playlistOffset=A,M.setStart(A),L&&AR(M,L,f),M.sn=y,M.level=r,M.cc=I,m.push(M);const Ue=(" "+B[3]).slice(1);M.relurl=QS(f,Ue),ZS(M,U,g),U=M,A+=M.duration,y++,v=0,O=!0}}else{if(B=B[0].match(jF),!B){ni.warn("No matches on slow regex match for level playlist!");continue}for(ie=1;ie<B.length&&B[ie]===void 0;ie++);const Ue=(" "+B[ie]).slice(1),Re=(" "+B[ie+1]).slice(1),Xe=B[ie+2]?(" "+B[ie+2]).slice(1):null;switch(Ue){case"BYTERANGE":U?M.setByteRange(Re,U):M.setByteRange(Re);break;case"PROGRAM-DATE-TIME":M.rawProgramDateTime=Re,M.tagList.push(["PROGRAM-DATE-TIME",Re]),w===-1&&(w=m.length);break;case"PLAYLIST-TYPE":f.type&&ql(f,Ue,B),f.type=Re.toUpperCase();break;case"MEDIA-SEQUENCE":f.startSN!==0?ql(f,Ue,B):m.length>0&&wR(f,Ue,B),y=f.startSN=parseInt(Re);break;case"SKIP":{f.skippedSegments&&ql(f,Ue,B);const Ye=new Di(Re,f),Ze=Ye.decimalInteger("SKIPPED-SEGMENTS");if(Fn(Ze)){f.skippedSegments+=Ze;for(let ze=Ze;ze--;)m.push(null);y+=Ze}const Ne=Ye.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ne&&(f.recentlyRemovedDateranges=(f.recentlyRemovedDateranges||[]).concat(Ne.split("	")));break}case"TARGETDURATION":f.targetduration!==0&&ql(f,Ue,B),f.targetduration=Math.max(parseInt(Re),1);break;case"VERSION":f.version!==null&&ql(f,Ue,B),f.version=parseInt(Re);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":f.live||ql(f,Ue,B),f.live=!1;break;case"#":(Re||Xe)&&M.tagList.push(Xe?[Re,Xe]:[Re]);break;case"DISCONTINUITY":I++,M.tagList.push(["DIS"]);break;case"GAP":M.gap=!0,M.tagList.push([Ue]);break;case"BITRATE":M.tagList.push([Ue,Re]),P=parseInt(Re)*1e3,Fn(P)?M.bitrate=P:P=0;break;case"DATERANGE":{const Ye=new Di(Re,f),Ze=new rL(Ye,f.dateRanges[Ye.ID],f.dateRangeTagCount);f.dateRangeTagCount++,Ze.isValid||f.skippedSegments?f.dateRanges[Ze.id]=Ze:ni.warn(`Ignoring invalid DATERANGE tag: "${Re}"`),M.tagList.push(["EXT-X-DATERANGE",Re]);break}case"DEFINE":{{const Ye=new Di(Re,f);"IMPORT"in Ye?IF(f,Ye,l):gR(f,Ye,t)}break}case"DISCONTINUITY-SEQUENCE":f.startCC!==0?ql(f,Ue,B):m.length>0&&wR(f,Ue,B),f.startCC=I=parseInt(Re);break;case"KEY":{const Ye=ER(Re,t,f);if(Ye.isSupported()){if(Ye.method==="NONE"){L=void 0;break}L||(L={});const Ze=L[Ye.keyFormat];Ze!=null&&Ze.matches(Ye)||(Ze&&(L=si({},L)),L[Ye.keyFormat]=Ye)}else ni.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Re}"`);break}case"START":f.startTimeOffset=bR(Re);break;case"MAP":{const Ye=new Di(Re,f);if(M.duration){const Ze=new I_(i,c);SR(Ze,Ye,r,L),p=Ze,M.initSegment=p,p.rawProgramDateTime&&!M.rawProgramDateTime&&(M.rawProgramDateTime=p.rawProgramDateTime)}else{const Ze=M.byteRangeEndOffset;if(Ze){const Ne=M.byteRangeStartOffset;oe=`${Ze-Ne}@${Ne}`}else oe=null;SR(M,Ye,r,L),p=M,O=!0}p.cc=I;break}case"SERVER-CONTROL":{D&&ql(f,Ue,B),D=new Di(Re),f.canBlockReload=D.bool("CAN-BLOCK-RELOAD"),f.canSkipUntil=D.optionalFloat("CAN-SKIP-UNTIL",0),f.canSkipDateRanges=f.canSkipUntil>0&&D.bool("CAN-SKIP-DATERANGES"),f.partHoldBack=D.optionalFloat("PART-HOLD-BACK",0),f.holdBack=D.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{f.partTarget&&ql(f,Ue,B);const Ye=new Di(Re);f.partTarget=Ye.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Ye=f.partList;Ye||(Ye=f.partList=[]);const Ze=v>0?Ye[Ye.length-1]:void 0,Ne=v++,ze=new Di(Re,f),st=new L2(ze,M,c,Ne,Ze);Ye.push(st),M.duration+=st.duration;break}case"PRELOAD-HINT":{const Ye=new Di(Re,f);f.preloadHint=Ye;break}case"RENDITION-REPORT":{const Ye=new Di(Re,f);f.renditionReports=f.renditionReports||[],f.renditionReports.push(Ye);break}default:ni.warn(`line parsed but not handled: ${B}`);break}}}U&&!U.relurl?(m.pop(),A-=U.duration,f.partList&&(f.fragmentHint=U)):f.partList&&(ZS(M,U,g),M.cc=I,f.fragmentHint=M,L&&AR(M,L,f)),f.targetduration||(f.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const ve=m.length,Le=m[0],te=m[ve-1];if(A+=f.skippedSegments*f.targetduration,A>0&&ve&&te){f.averagetargetduration=A/ve;const $e=te.sn;f.endSN=$e!=="initSegment"?$e:0,f.live||(te.endList=!0),w>0&&(HF(m,w),Le&&g.unshift(Le))}return f.fragmentHint&&(A+=f.fragmentHint.duration),f.totalduration=A,g.length&&f.dateRangeTagCount&&Le&&aL(g,f),f.endCC=I,f}}function aL(n,e){const t=n.length;if(!t)return;const r=n[t-1],i=e.live?1/0:e.totalduration,o=Object.keys(e.dateRanges);for(let d=o.length;d--;){const c=e.dateRanges[o[d]],f=c.startDate.getTime();c.tagAnchor=r.ref;for(let m=t;m--;){var l;if(((l=n[m])==null?void 0:l.sn)<e.startSN)break;const g=qF(e,f,n,m,i);if(g!==-1){c.tagAnchor=e.fragments[g].ref;break}}}}function qF(n,e,t,r,i){const o=t[r];if(o){const d=o.programDateTime;if(e>=d||r===0){var l;const c=(((l=t[r+1])==null?void 0:l.start)||i)-o.start;if(e<=d+c*1e3){const f=t[r].sn-n.startSN;if(f<0)return-1;const m=n.fragments;if(m.length>t.length){const p=(t[r+1]||m[m.length-1]).sn-n.startSN;for(let y=p;y>f;y--){const v=m[y].programDateTime;if(e>=v&&e<v+m[y].duration*1e3)return y}}return f}}}return-1}function ER(n,e,t){var r,i;const o=new Di(n,t),l=(r=o.METHOD)!=null?r:"",d=o.URI,c=o.hexadecimalInteger("IV"),f=o.KEYFORMATVERSIONS,m=(i=o.KEYFORMAT)!=null?i:"identity";d&&o.IV&&!c&&ni.error(`Invalid IV: ${o.IV}`);const g=d?cl.resolve(d,e):"",p=(f||"1").split("/").map(Number).filter(Number.isFinite);return new _T(l,g,m,p,c,o.KEYID)}function bR(n){const t=new Di(n).decimalFloatingPoint("TIME-OFFSET");return Fn(t)?t:null}function TR(n,e){let t=(n||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=t.filter(o=>Mw(o,r));i.length&&(e[`${r}Codec`]=i.map(o=>o.split("/")[0]).join(","),t=t.filter(o=>i.indexOf(o)===-1))}),e.unknownCodecs=t}function _R(n,e,t){const r=e[t];r&&(n[t]=r)}function HF(n,e){let t=n[e];for(let r=e;r--;){const i=n[r];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function ZS(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function SR(n,e,t,r){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",r&&(n.levelkeys=r),n.initSegment=null}function AR(n,e,t){n.levelkeys=e;const{encryptedFragments:r}=t;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(n)}function ql(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function wR(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function L_(n,e){const t=e.startPTS;if(Fn(t)){let r=0,i;e.sn>n.sn?(r=t-n.start,i=n):(r=n.start-t,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function sL(n,e,t,r,i,o,l){r-t<=0&&(l.warn("Fragment should have a positive duration",e),r=t+e.duration,o=i+e.duration);let c=t,f=r;const m=e.startPTS,g=e.endPTS;if(Fn(m)){const P=Math.abs(m-t);n&&P>n.totalduration?l.warn(`media timestamps and playlist times differ by ${P}s for level ${e.level} ${n.url}`):Fn(e.deltaPTS)?e.deltaPTS=Math.max(P,e.deltaPTS):e.deltaPTS=P,c=Math.max(t,m),t=Math.min(t,m),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,f=Math.min(r,g),r=Math.max(r,g),o=e.endDTS!==void 0?Math.max(o,e.endDTS):o}const p=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(r-e.start),e.startPTS=t,e.maxStartPTS=c,e.startDTS=i,e.endPTS=r,e.minEndPTS=f,e.endDTS=o;const y=e.sn;if(!n||y<n.startSN||y>n.endSN)return 0;let v;const A=y-n.startSN,I=n.fragments;for(I[A]=e,v=A;v>0;v--)L_(I[v],I[v-1]);for(v=A;v<I.length-1;v++)L_(I[v],I[v+1]);return n.fragmentHint&&L_(I[I.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,p}function GF(n,e,t){if(n===e)return;let r=null;const i=n.fragments;for(let m=i.length-1;m>=0;m--){const g=i[m].initSegment;if(g){r=g;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let o;YF(n,e,(m,g,p,y)=>{if((!e.startCC||e.skippedSegments)&&g.cc!==m.cc){const v=m.cc-g.cc;for(let A=p;A<y.length;A++)y[A].cc+=v;e.endCC=y[y.length-1].cc}Fn(m.startPTS)&&Fn(m.endPTS)&&(g.setStart(g.startPTS=m.startPTS),g.startDTS=m.startDTS,g.maxStartPTS=m.maxStartPTS,g.endPTS=m.endPTS,g.endDTS=m.endDTS,g.minEndPTS=m.minEndPTS,g.setDuration(m.endPTS-m.startPTS),g.duration&&(o=g),e.PTSKnown=e.alignedSliding=!0),m.hasStreams&&(g.elementaryStreams=m.elementaryStreams),g.loader=m.loader,m.hasStats&&(g.stats=m.stats),m.initSegment&&(g.initSegment=m.initSegment,r=m.initSegment)});const l=e.fragments,d=e.fragmentHint?l.concat(e.fragmentHint):l;if(r&&d.forEach(m=>{var g;m&&(!m.initSegment||m.initSegment.relurl===((g=r)==null?void 0:g.relurl))&&(m.initSegment=r)}),e.skippedSegments){if(e.deltaUpdateFailed=l.some(m=>!m),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let m=e.skippedSegments;m--;)l.shift();e.startSN=l[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=VF(n.dateRanges,e,t));const m=n.fragments.filter(g=>g.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let g=1;g<d.length;g++)d[g].programDateTime===null&&ZS(d[g],d[g-1],m);aL(m,e)}e.endCC=l[l.length-1].cc}if(!e.startCC){var c;const m=uL(n,e.startSN-1);e.startCC=(c=m==null?void 0:m.cc)!=null?c:l[0].cc}KF(n.partList,e.partList,(m,g)=>{g.elementaryStreams=m.elementaryStreams,g.stats=m.stats}),o?sL(e,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS,t):oL(n,e),l.length&&(e.totalduration=e.edge-l[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const f=e.advancedDateTime;if(e.advanced&&f){const m=e.edge;e.driftStart||(e.driftStartTime=f,e.driftStart=m),e.driftEndTime=f,e.driftEnd=m}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function VF(n,e,t){const{dateRanges:r,recentlyRemovedDateranges:i}=e,o=si({},n);i&&i.forEach(c=>{delete o[c]});const d=Object.keys(o).length;return d&&Object.keys(r).forEach(c=>{const f=o[c],m=new rL(r[c].attr,f);m.isValid?(o[c]=m,f||(m.tagOrder+=d)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ii(r[c].attr)}"`)}),o}function KF(n,e,t){if(n&&e){let r=0;for(let i=0,o=n.length;i<=o;i++){const l=n[i],d=e[i+r];l&&d&&l.index===d.index&&l.fragment.sn===d.fragment.sn?t(l,d):r--}}}function YF(n,e,t){const r=e.skippedSegments,i=Math.max(n.startSN,e.startSN)-e.startSN,o=(n.fragmentHint?1:0)+(r?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,l=e.startSN-n.startSN,d=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let f=i;f<=o;f++){const m=c[l+f];let g=d[f];if(r&&!g&&m&&(g=e.fragments[f]=m),m&&g){if(t(m,g,f,d),m.url&&m.url!==g.url){e.playlistParsingError=IR(`media sequence mismatch ${g.sn}:`,n,e,m,g);return}else if(m.cc!==g.cc){e.playlistParsingError=IR(`discontinuity sequence mismatch (${m.cc}!=${g.cc})`,n,e,m,g);return}}}}function IR(n,e,t,r,i){return new Error(`${n} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function oL(n,e,t=!0){const r=e.startSN+e.skippedSegments-n.startSN,i=n.fragments,o=r>=0;let l=0;if(o&&r<i.length)l=i[r].start;else if(o&&e.startSN===n.endSN+1)l=n.fragmentEnd;else if(o&&t)l=n.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)l=n.fragmentStart;else return;JS(e,l)}function JS(n,e){if(e){const t=n.fragments;for(let r=n.skippedSegments;r<t.length;r++)t[r].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function lL(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const r=n.fragments;if(r.length&&t*4>e){const o=r[r.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function uL(n,e,t){if(!n)return null;let r=n.fragments[e-n.startSN];return r||(r=n.fragmentHint,r&&r.sn===e)?r:e<n.startSN&&t&&t.sn===e?t:null}function kR(n,e,t){return n?dL(n.partList,e,t):null}function dL(n,e,t){if(n)for(let r=n.length;r--;){const i=n[r];if(i.index===t&&i.fragment.sn===e)return i}return null}function cL(n){n.forEach((e,t)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function tv(n,e){for(let r=0,i=n.length;r<i;r++){var t;if(((t=n[r])==null?void 0:t.cc)===e)return n[r]}return null}function WF(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function RR(n,e){const t=n.start+e;n.startPTS=t,n.setStart(t),n.endPTS=t+n.duration}function fL(n,e){const t=e.fragments;for(let r=0,i=t.length;r<i;r++)RR(t[r],n);e.fragmentHint&&RR(e.fragmentHint,n),e.alignedSliding=!0}function QF(n,e){n&&(hL(e,n),e.alignedSliding||O0(e,n),!e.alignedSliding&&!e.skippedSegments&&oL(n,e,!1))}function hL(n,e){if(!WF(e,n))return;const t=Math.min(e.endCC,n.endCC),r=tv(e.fragments,t),i=tv(n.fragments,t);if(!r||!i)return;ni.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const o=r.start-i.start;fL(o,n)}function O0(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,r=e.fragments;if(!t.length||!r.length)return;let i,o;const l=Math.min(e.endCC,n.endCC);e.startCC<l&&n.startCC<l&&(i=tv(r,l),o=tv(t,l)),(!i||!o)&&(i=r[Math.floor(r.length/2)],o=tv(t,i.cc)||t[Math.floor(t.length/2)]);const d=i.programDateTime,c=o.programDateTime;if(!d||!c)return;const f=(c-d)/1e3-(o.start-i.start);fL(f,n)}const XF={toString:function(n){let e="";const t=n.length;for(let r=0;r<t;r++)e+=`[${n.start(r).toFixed(3)}-${n.end(r).toFixed(3)}]`;return e}},nn={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class jw extends tL{constructor(e,t,r,i,o){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=nn.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:l,fragCurrent:d,media:c,mediaBuffer:f,state:m}=this,g=c?c.currentTime:0,p=pr.bufferInfo(f||c,g,l.maxBufferHole),y=!p.len;if(this.log(`Media seeking to ${Fn(g)?g.toFixed(3):g}, state: ${m}, ${y?"out of":"in"} buffer`),this.state===nn.ENDED)this.resetLoadingState();else if(d){const v=l.maxFragLookUpTolerance,A=d.start-v,I=d.start+d.duration+v;if(y||I<p.start||A>p.end){const P=g>I;(g<A||P)&&(P&&d.loader&&(this.log(`Cancelling fragment load for seek (sn: ${d.sn})`),d.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(c){this.fragmentTracker.removeFragmentsInRange(g,1/0,this.playlistType,!0);const v=this.lastCurrentTime;if(g>v&&(this.lastCurrentTime=g),!this.loadingParts){const A=Math.max(p.end,g),I=this.shouldLoadParts(this.getLevelDetails(),A);I&&(this.log(`LL-Part loading ON after seeking to ${g.toFixed(2)} with buffer @${A.toFixed(2)}`),this.loadingParts=I)}}this.hls.hasEnoughToStart||(this.log(`Setting ${y?"startPosition":"nextLoadPosition"} to ${g} for seek without enough to start`),this.nextLoadPosition=g,y&&(this.startPosition=g)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=o,this.hls=e,this.fragmentLoader=new AF(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Uw(e.config)}registerListeners(){const{hls:e}=this;e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Te.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Te.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===nn.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=nn.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const o=e.buffered;this.config.maxBufferHole&&o&&o.length>1&&(e=pr.bufferedInfo(o,e.start,0));const l=e.nextStart;if(l&&l>i&&l<t.edge||this.media.currentTime<e.start)return!1;const c=t.partList;if(c!=null&&c.length){const m=c[c.length-1];return pr.isBuffered(this.media,m.start+m.duration/2)}const f=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(f)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===nn.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const r=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=nn.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){const i=o=>{const l=o.frag;if(this.fragContextChanged(l)){this.warn(`${l.type} sn: ${l.sn}${o.part?" part: "+o.part.index:""} of ${this.fragInfo(l,!1,o.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(l);return}l.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,r,i).then(o=>{if(!o)return;const l=this.state,d=o.frag;if(this.fragContextChanged(d)){(l===nn.FRAG_LOADING||!this.fragCurrent&&l===nn.PARSING)&&(this.fragmentTracker.removeFragment(d),this.state=nn.IDLE);return}"payload"in o&&(this.log(`Loaded ${d.type} sn: ${d.sn} of ${this.playlistLabel()} ${d.level}`),this.hls.trigger(Te.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===nn.STOPPED||this.state===nn.ERROR||(this.warn(`Frag error: ${(o==null?void 0:o.message)||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===oa.APPENDING){const o=e.type,l=this.getFwdBufferInfo(this.mediaBuffer,o),d=Math.max(e.duration,l?l.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(d,e.duration))&&r.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===oa.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:r};this.hls.trigger(Te.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:o,payload:l}=r,d=o.decryptdata;if(l&&l.byteLength>0&&d!=null&&d.key&&d.iv&&hm(d.method)){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(l),d.key.buffer,d.iv.buffer,Bw(d.method)).catch(f=>{throw i.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_DECRYPT_ERROR,fatal:!1,error:f,reason:f.message,frag:o}),f}).then(f=>{const m=self.performance.now();return i.trigger(Te.FRAG_DECRYPTED,{frag:o,payload:f,stats:{tstart:c,tdecrypt:m}}),r.payload=f,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===nn.STOPPED||this.state===nn.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==nn.STOPPED&&(this.state=nn.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var r,i;const o=e.tracks;if(o&&!t.encrypted&&((r=o.audio)!=null&&r.encrypted||(i=o.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const l=this.media,d=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${l?"attached mediaKeys: "+l.mediaKeys:"detached"})`);return this.warn(d.message),!l||l.mediaKeys?!1:(this.hls.trigger(Te.ERROR,{type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_NO_KEYS,fatal:!1,error:d,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${r?XF.toString(pr.getBuffered(r)):"(detached)"})`),Ji(e)){var i;if(e.type!==Qn.SUBTITLE){const l=e.elementaryStreams;if(!Object.keys(l).some(d=>!!l[d])){this.state=nn.IDLE;return}}const o=(i=this.levels)==null?void 0:i[e.level];o!=null&&o.fragmentError&&(this.log(`Resetting level fragment error count of ${o.fragmentError} on frag buffered`),o.fragmentError=0)}this.state=nn.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:i,partsLoaded:o}=e,l=!o||o.length===0||o.some(c=>!c),d=new zw(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!l);t.flush(d)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var o;this.fragCurrent=e;const l=t.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let d=null;e.encrypted&&!((o=e.decryptdata)!=null&&o.key)?(this.log(`Loading key for ${e.sn} of [${l.startSN}-${l.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=nn.KEY_LOADING,this.fragCurrent=e,d=this.keyLoader.load(e).then(p=>{if(!this.fragContextChanged(p.frag))return this.hls.trigger(Te.KEY_LOADED,p),this.state===nn.KEY_LOADING&&(this.state=nn.IDLE),p}),this.hls.trigger(Te.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(d=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(d=this.keyLoader.loadClear(e,l.encryptedFragments,this.startFragRequested),d&&this.log("[eme] blocking frag load until media-keys acquired"));const c=this.fragPrevious;if(Ji(e)&&(!c||e.sn!==c.sn)){const p=this.shouldLoadParts(t.details,e.end);p!==this.loadingParts&&(this.log(`LL-Part loading ${p?"ON":"OFF"} loading sn ${c==null?void 0:c.sn}->${e.sn}`),this.loadingParts=p)}if(r=Math.max(e.start,r||0),this.loadingParts&&Ji(e)){const p=l.partList;if(p&&i){r>e.end&&l.fragmentHint&&(e=l.fragmentHint);const y=this.getNextPart(p,e,r);if(y>-1){const v=p[y];e=this.fragCurrent=v.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${v.index} (${y}/${p.length-1}) of ${this.fragInfo(e,!1,v)}) cc: ${e.cc} [${l.startSN}-${l.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=v.start+v.duration,this.state=nn.FRAG_LOADING;let A;return d?A=d.then(I=>!I||this.fragContextChanged(I.frag)?null:this.doFragPartsLoad(e,v,t,i)).catch(I=>this.handleFragLoadError(I)):A=this.doFragPartsLoad(e,v,t,i).catch(I=>this.handleFragLoadError(I)),this.hls.trigger(Te.FRAG_LOADING,{frag:e,part:v,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):A}else if(!e.url||this.loadedEndOfParts(p,r))return Promise.resolve(null)}}if(Ji(e)&&this.loadingParts){var f;this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(f=l.partList)==null?void 0:f.filter(p=>p.loaded).map(p=>`[${p.start}-${p.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+l.startSN+"-"+l.endSN+"]"}, target: ${parseFloat(r.toFixed(3))}`),Fn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=nn.FRAG_LOADING;const m=this.config.progressive;let g;return m&&d?g=d.then(p=>!p||this.fragContextChanged(p.frag)?null:this.fragmentLoader.load(e,i)).catch(p=>this.handleFragLoadError(p)):g=Promise.all([this.fragmentLoader.load(e,m?i:void 0),d]).then(([p])=>(!m&&i&&i(p),p)).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(Te.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):g}doFragPartsLoad(e,t,r,i){return new Promise((o,l)=>{var d;const c=[],f=(d=r.details)==null?void 0:d.partList,m=g=>{this.fragmentLoader.loadPart(e,g,i).then(p=>{c[g.index]=p;const y=p.part;this.hls.trigger(Te.FRAG_LOADED,p);const v=kR(r.details,e.sn,g.index+1)||dL(f,e.sn,g.index+1);if(v)m(v);else return o({frag:e,part:y,partsLoaded:c})}).catch(l)};m(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t&&t.details===It.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Te.ERROR,t)}else this.hls.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==nn.PARSING){!this.fragCurrent&&this.state!==nn.STOPPED&&this.state!==nn.ERROR&&(this.state=nn.IDLE);return}const{frag:r,part:i,level:o}=t,l=self.performance.now();r.stats.parsing.end=l,i&&(i.stats.parsing.end=l);const d=this.getLevelDetails(),f=d&&r.sn>d.endSN||this.shouldLoadParts(d,r.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=f),this.updateLevelTiming(r,i,o,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var r;const o=e.partList[0],l=o.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(t>=l){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>o.start-o.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:i,sn:o,part:l}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${o} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const d=t[i],c=d.details,f=l>-1?kR(c,o,l):null,m=f?f.fragment:uL(c,o,r);return m?(r&&r!==m&&(m.stats=r.stats),{frag:m,part:f,level:d}):null}bufferFragmentData(e,t,r,i,o){if(this.state!==nn.PARSING)return;const{data1:l,data2:d}=e;let c=l;if(d&&(c=Qs(l,d)),!c.length)return;const f=this.initPTS[t.cc],m=f?-f.baseTime/f.timescale:void 0,g={type:e.type,frag:t,part:r,chunkMeta:i,offset:m,parent:t.type,data:c};if(this.hls.trigger(Te.BUFFER_APPENDING,g),e.dropped&&e.independent&&!r){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!pr.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const r=t.currentTime,i=pr.bufferInfo(t,r,0),o=e.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),d=Math.max(Math.min(e.start-l,i.end-l),r+l);e.start-d>l&&this.flushMainBuffer(d,e.start)}getFwdBufferInfo(e,t){var r;const i=this.getLoadPosition();if(!Fn(i))return null;const l=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,l)}getFwdBufferInfoAtPos(e,t,r,i){const o=pr.bufferInfo(e,t,i);if(o.len===0&&o.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(t,r);if(l&&(o.nextStart<=l.end||l.gap)){const d=Math.max(Math.min(o.nextStart,l.end)-t,i);return pr.bufferInfo(e,t,d)}}return o}getMaxBufferLength(e){const{config:t}=this;let r;return e?r=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):r=t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,i=Math.max(Math.min(e-t,r.maxBufferLength),t),o=Math.max(e-t*3,r.maxMaxBufferLength/2,i);return o>=i?(r.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=Qn.MAIN){const r=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const r=t.fragments,i=r.length;if(!i)return null;const{config:o}=this,l=r[0].start,d=o.lowLatencyMode&&!!t.partList;let c=null;if(t.live){const g=o.initialLiveManifestSize;if(i<g)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${g})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<l){var f;d&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),c=this.getInitialLiveFragment(t);const p=this.hls.startPosition,y=this.hls.liveSyncPosition,v=c?(p!==-1&&p>=l?p:y)||c.start:e;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${y} frag.start: ${(f=c)==null?void 0:f.start}`),this.startPosition=this.nextLoadPosition=v}}else e<=l&&(c=r[0]);if(!c){const g=this.loadingParts?t.partEnd:t.fragmentEnd;c=this.getFragmentAtPosition(e,g,t)}let m=this.filterReplacedPrimary(c,t);if(!m&&c){const g=c.sn-t.startSN;m=this.filterReplacedPrimary(r[g+1]||null,t)}return this.mapToInitFragWhenRequired(m)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===oa.OK||r===oa.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,i,o){let l=null;if(e.gap&&(l=this.getNextFragment(this.nextLoadPosition,t),l&&!l.gap&&r.nextStart)){const d=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(d!==null&&r.len+d.len>=o){const c=l.sn;return this.loopSn!==c&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${c}`),this.loopSn=c),null}}return this.loopSn=void 0,l}get primaryPrefetch(){if(xR(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(xR(this.config)&&e.type!==Qn.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const l=i.event;if(l){if(l.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(t==null?void 0:t.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const o=r==null?void 0:r.playerQueue;if(o)for(let l=o.length;l--;){const d=o[l].interstitial;if(d.appendInPlace&&e.start>=d.startTime&&e.end<=d.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,r){let i=-1,o=!1,l=!0;for(let d=0,c=e.length;d<c;d++){const f=e[d];if(l=l&&!f.independent,i>-1&&r<f.start)break;const m=f.loaded;m?i=-1:(o||(f.independent||l)&&f.fragment===t)&&(f.fragment!==t&&this.warn(`Need buffer at ${r} but next unloaded part starts at ${f.start}`),i=d),o=m}return i}loadedEndOfParts(e,t){let r;for(let i=e.length;i--;){if(r=e[i],!r.loaded)return!1;if(t>r.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=fF(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const o=r.sn+1;if(o>=e.startSN&&o<=e.endSN){const l=t[o-e.startSN];r.cc===l.cc&&(i=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=eL(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,r){const{config:i}=this;let{fragPrevious:o}=this,{fragments:l,endSN:d}=r;const{fragmentHint:c}=r,{maxFragLookUpTolerance:f}=i,m=r.partList,g=!!(this.loadingParts&&m!=null&&m.length&&c);g&&!this.bitrateTest&&m[m.length-1].fragment.sn===c.sn&&(l=l.concat(c),d=c.sn);let p;if(e<t){var y;const A=e<this.lastCurrentTime||e>t-f||(y=this.media)!=null&&y.paused||!this.startFragRequested?0:f;p=bf(o,l,e,A)}else p=l[l.length-1];if(p){const v=p.sn-r.startSN,A=this.fragmentTracker.getState(p);if((A===oa.OK||A===oa.PARTIAL&&p.gap)&&(o=p),o&&p.sn===o.sn&&(!g||m[0].fragment.sn>p.sn||!r.live)&&p.level===o.level){const P=l[v+1];p.sn<d&&this.fragmentTracker.getState(P)!==oa.OK?p=P:p=null}}return p}alignPlaylists(e,t,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const o=e.fragmentStart,l=!t,d=e.alignedSliding&&Fn(o);if(l||!d&&!o){QF(r,e);const c=e.fragmentStart;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),c}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const i=this.timelineOffset;if(r===-1){const o=this.startTimeOffset!==null,l=o?this.startTimeOffset:e.startTimeOffset;l!==null&&Fn(l)?(r=t+l,l<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${l} found in ${o?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:t}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&Ji(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==nn.FRAG_LOADING_WAITING_RETRY)&&(this.state=nn.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const v=this.getCurrentContext(t.chunkMeta);v&&(t.frag=v.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const o=t.details===It.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(r,!0);const l=t.errorAction,{action:d,flags:c,retryCount:f=0,retryConfig:m}=l||{},g=!!l&&!!m,p=g&&d===Oa.RetryRequest,y=g&&!l.resolved&&c===yo.MoveAllAlternatesMatchingHost;if(!p&&y&&Ji(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),l.resolved=!0;else if((p||y)&&f<m.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const v=Fw(m,f);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${f+1}/${m.maxNumRetry} in ${v}ms`),l.resolved=!0,this.retryDate=self.performance.now()+v,this.state=nn.FRAG_LOADING_WAITING_RETRY}else if(m&&l)if(this.resetFragmentErrors(e),f<m.maxNumRetry)!o&&d!==Oa.RemoveAlternatePermanently&&(l.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${f})`);return}else d===Oa.SendAlternateToPenaltyBox?this.state=nn.WAITING_LEVEL:this.state=nn.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===nn.PARSING||this.state===nn.PARSED){const t=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),o=i&&i.len>.5;o&&this.reduceMaxBufferLength(i.len,(t==null?void 0:t.duration)||10);const l=!o;return l&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(e){e===Qn.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==nn.STOPPED&&(this.state=nn.IDLE)}afterBufferFlushed(e,t,r){if(!e)return;const i=pr.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===nn.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==nn.STOPPED&&(this.state=nn.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,i){const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,f)=>{const m=e.elementaryStreams[f];if(m){const g=m.endPTS-m.startPTS;if(g<=0)return this.warn(`Could not parse fragment ${e.sn} ${f} duration reliably (${g})`),c||!1;const p=i?0:sL(o,e,m.startPTS,m.endPTS,m.startDTS,m.endDTS,this);return this.hls.trigger(Te.LEVEL_PTS_UPDATED,{details:o,level:r,drift:p,type:f,frag:e,start:m.startPTS,end:m.endPTS}),!0}return c},!1)){var d;if(r.fragmentError===0&&this.treatAsGap(e,r),((d=this.transmuxer)==null?void 0:d.error)===null){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=nn.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(Te.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Qn.MAIN?"level":"track"}fragInfo(e,t=!0,r){var i,o;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=t&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((o=t&&!r?e.endPTS:(r||e).end)!=null?o:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function xR(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class mL{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;if(e.length)e.length===1?r=e[0]:r=ZF(e,t);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function ZF(n,e){const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;i++){const o=n[i];t.set(o,r),r+=o.length}return t}var D_={exports:{}},CR;function JF(){return CR||(CR=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,f,m){this.fn=c,this.context=f,this.once=m||!1}function o(c,f,m,g,p){if(typeof m!="function")throw new TypeError("The listener must be a function");var y=new i(m,g||c,p),v=t?t+f:f;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function l(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var f=[],m,g;if(this._eventsCount===0)return f;for(g in m=this._events)e.call(m,g)&&f.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},d.prototype.listeners=function(f){var m=t?t+f:f,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var p=0,y=g.length,v=new Array(y);p<y;p++)v[p]=g[p].fn;return v},d.prototype.listenerCount=function(f){var m=t?t+f:f,g=this._events[m];return g?g.fn?1:g.length:0},d.prototype.emit=function(f,m,g,p,y,v){var A=t?t+f:f;if(!this._events[A])return!1;var I=this._events[A],P=arguments.length,U,M;if(I.fn){switch(I.once&&this.removeListener(f,I.fn,void 0,!0),P){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,m),!0;case 3:return I.fn.call(I.context,m,g),!0;case 4:return I.fn.call(I.context,m,g,p),!0;case 5:return I.fn.call(I.context,m,g,p,y),!0;case 6:return I.fn.call(I.context,m,g,p,y,v),!0}for(M=1,U=new Array(P-1);M<P;M++)U[M-1]=arguments[M];I.fn.apply(I.context,U)}else{var B=I.length,ie;for(M=0;M<B;M++)switch(I[M].once&&this.removeListener(f,I[M].fn,void 0,!0),P){case 1:I[M].fn.call(I[M].context);break;case 2:I[M].fn.call(I[M].context,m);break;case 3:I[M].fn.call(I[M].context,m,g);break;case 4:I[M].fn.call(I[M].context,m,g,p);break;default:if(!U)for(ie=1,U=new Array(P-1);ie<P;ie++)U[ie-1]=arguments[ie];I[M].fn.apply(I[M].context,U)}}return!0},d.prototype.on=function(f,m,g){return o(this,f,m,g,!1)},d.prototype.once=function(f,m,g){return o(this,f,m,g,!0)},d.prototype.removeListener=function(f,m,g,p){var y=t?t+f:f;if(!this._events[y])return this;if(!m)return l(this,y),this;var v=this._events[y];if(v.fn)v.fn===m&&(!p||v.once)&&(!g||v.context===g)&&l(this,y);else{for(var A=0,I=[],P=v.length;A<P;A++)(v[A].fn!==m||p&&!v[A].once||g&&v[A].context!==g)&&I.push(v[A]);I.length?this._events[y]=I.length===1?I[0]:I:l(this,y)}return this},d.prototype.removeAllListeners=function(f){var m;return f?(m=t?t+f:f,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,n.exports=d}(D_)),D_.exports}var eU=JF(),qw=x2(eU);const _v="1.6.9",Ym={};function tU(){return typeof __HLS_WORKER_BUNDLE__=="function"}function nU(){const n=Ym[_v];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return Ym[_v]=i,i}function rU(n){const e=Ym[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Ym[n]=i,i}function iU(n){const e=Ym[n||_v];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete Ym[n||_v],i&&self.URL.revokeObjectURL(i),r.terminate()}}function gL(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Hw(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function ST(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function Sv(n,e){const t=e;let r=0;for(;Hw(n,e);){r+=10;const i=ST(n,e+6);r+=i,gL(n,e+10)&&(r+=10),e+=r}if(r>0)return n.subarray(t,t+r)}function aU(n,e,t,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=e[t+2],l=o>>2&15;if(l>12){const y=new Error(`invalid ADTS sampling index:${l}`);n.emit(Te.ERROR,Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_PARSING_ERROR,fatal:!0,error:y,reason:y.message});return}const d=(o>>6&3)+1,c=e[t+3]>>6&3|(o&1)<<2,f="mp4a.40."+d,m=i[l];let g=l;(d===5||d===29)&&(g-=3);const p=[d<<3|(g&14)>>1,(g&1)<<7|c<<3];return ni.log(`manifest codec:${r}, parsed codec:${f}, channels:${c}, rate:${m} (ADTS object type:${d} sampling index:${l})`),{config:p,samplerate:m,channelCount:c,codec:f,parsedCodec:f,manifestCodec:r}}function pL(n,e){return n[e]===255&&(n[e+1]&246)===240}function vL(n,e){return n[e+1]&1?7:9}function Gw(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function sU(n,e){return e+5<n.length}function F0(n,e){return e+1<n.length&&pL(n,e)}function oU(n,e){return sU(n,e)&&pL(n,e)&&Gw(n,e)<=n.length-e}function lU(n,e){if(F0(n,e)){const t=vL(n,e);if(e+t>=n.length)return!1;const r=Gw(n,e);if(r<=t)return!1;const i=e+r;return i===n.length||F0(n,i)}return!1}function yL(n,e,t,r,i){if(!n.samplerate){const o=aU(e,t,r,i);if(!o)return;si(n,o)}}function EL(n){return 1024*9e4/n}function uU(n,e){const t=vL(n,e);if(e+t<=n.length){const r=Gw(n,e)-t;if(r>0)return{headerLength:t,frameLength:r}}}function bL(n,e,t,r,i){const o=EL(n.samplerate),l=r+i*o,d=uU(e,t);let c;if(d){const{frameLength:g,headerLength:p}=d,y=p+g,v=Math.max(0,t+y-e.length);v?(c=new Uint8Array(y-p),c.set(e.subarray(t+p,e.length),0)):c=e.subarray(t+p,t+y);const A={unit:c,pts:l};return v||n.samples.push(A),{sample:A,length:y,missing:v}}const f=e.length-t;return c=new Uint8Array(f),c.set(e.subarray(t,e.length),0),{sample:{unit:c,pts:l},length:f,missing:-1}}function dU(n,e){return Hw(n,e)&&ST(n,e+6)+10<=n.length-e}function cU(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function N_(n,e=0,t=1/0){return fU(n,e,t,Uint8Array)}function fU(n,e,t,r){const i=hU(n);let o=1;"BYTES_PER_ELEMENT"in r&&(o=r.BYTES_PER_ELEMENT);const l=mU(n)?n.byteOffset:0,d=(l+n.byteLength)/o,c=(l+e)/o,f=Math.floor(Math.max(0,Math.min(c,d))),m=Math.floor(Math.min(f+Math.max(t,0),d));return new r(i,f,m-f)}function hU(n){return n instanceof ArrayBuffer?n:n.buffer}function mU(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function gU(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const r=n.data.subarray(1).indexOf(0);if(r===-1)return;const i=As(N_(n.data,1,r)),o=n.data[2+r],l=n.data.subarray(3+r).indexOf(0);if(l===-1)return;const d=As(N_(n.data,3+r,l));let c;return i==="-->"?c=As(N_(n.data,4+r+l)):c=cU(n.data.subarray(4+r+l)),e.mimeType=i,e.pictureType=o,e.description=d,e.data=c,e}function pU(n){if(n.size<2)return;const e=As(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function vU(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const r=As(n.data.subarray(t),!0);t+=r.length+1;const i=As(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=As(n.data.subarray(1));return{key:n.type,info:"",data:e}}function yU(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const r=As(n.data.subarray(t),!0);t+=r.length+1;const i=As(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=As(n.data);return{key:n.type,info:"",data:e}}function EU(n){return n.type==="PRIV"?pU(n):n.type[0]==="W"?yU(n):n.type==="APIC"?gU(n):vU(n)}function bU(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=ST(n,4),r=10;return{type:e,size:t,data:n.subarray(r,r+t)}}const OE=10,TU=10;function TL(n){let e=0;const t=[];for(;Hw(n,e);){const r=ST(n,e+6);n[e+5]>>6&1&&(e+=OE),e+=OE;const i=e+r;for(;e+TU<i;){const o=bU(n.subarray(e)),l=EU(o);l&&t.push(l),e+=o.size+OE}gL(n,e)&&(e+=OE)}return t}function _L(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function _U(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,t&&(r+=4772185884e-2),Math.round(r)}}function Vw(n){const e=TL(n);for(let t=0;t<e.length;t++){const r=e[t];if(_L(r))return _U(r)}}let _s=function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n}({});function al(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Kw{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=Qs(this.cachedData,e),this.cachedData=null);let r=Sv(e,0),i=r?r.length:0,o;const l=this._audioTrack,d=this._id3Track,c=r?Vw(r):void 0,f=e.length;for((this.basePTS===null||this.frameIndex===0&&Fn(c))&&(this.basePTS=SU(c,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&d.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:_s.audioId3,duration:Number.POSITIVE_INFINITY});i<f;){if(this.canParse(e,i)){const m=this.appendFrame(l,e,i);m?(this.frameIndex++,this.lastPTS=m.sample.pts,i+=m.length,o=i):i=f}else dU(e,i)?(r=Sv(e,i),d.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:_s.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,o=i):i++;if(i===f&&o!==f){const m=e.slice(o);this.cachedData?this.cachedData=Qs(this.cachedData,m):this.cachedData=m}}return{audioTrack:l,videoTrack:al(),id3Track:d,textTrack:al()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:al(),id3Track:this._id3Track,textTrack:al()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const SU=(n,e,t)=>{if(Fn(n))return n*90;const r=t?t.baseTime*9e4/t.timescale:0;return e*9e4+r};let FE=null;const AU=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],wU=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],IU=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],kU=[0,1,1,4];function SL(n,e,t,r,i){if(t+24>e.length)return;const o=AL(e,t);if(o&&t+o.frameLength<=e.length){const l=o.samplesPerFrame*9e4/o.sampleRate,d=r+i*l,c={unit:e.subarray(t,t+o.frameLength),pts:d,dts:d};return n.config=[],n.channelCount=o.channelCount,n.samplerate=o.sampleRate,n.samples.push(c),{sample:c,length:o.frameLength,missing:0}}}function AL(n,e){const t=n[e+1]>>3&3,r=n[e+1]>>1&3,i=n[e+2]>>4&15,o=n[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&o!==3){const l=n[e+2]>>1&1,d=n[e+3]>>6,c=t===3?3-r:r===3?3:4,f=AU[c*14+i-1]*1e3,g=wU[(t===3?0:t===2?1:2)*3+o],p=d===3?1:2,y=IU[t][r],v=kU[r],A=y*8*v,I=Math.floor(y*f/g+l)*v;if(FE===null){const M=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);FE=M?parseInt(M[1]):0}return!!FE&&FE<=87&&r===2&&f>=224e3&&d===0&&(n[e+3]=n[e+3]|128),{sampleRate:g,channelCount:p,frameLength:I,samplesPerFrame:A}}}function Yw(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function wL(n,e){return e+1<n.length&&Yw(n,e)}function RU(n,e){return Yw(n,e)&&4<=n.length-e}function IL(n,e){if(e+1<n.length&&Yw(n,e)){const r=AL(n,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const o=e+i;return o===n.length||wL(n,o)}return!1}class xU extends Kw{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const r=Sv(e,0);let i=(r==null?void 0:r.length)||0;if(IL(e,i))return!1;for(let o=e.length;i<o;i++)if(lU(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return oU(e,t)}appendFrame(e,t,r){yL(e,this.observer,t,r,e.manifestCodec);const i=bL(e,t,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const kL=(n,e)=>{let t=0,r=5;e+=r;const i=new Uint32Array(1),o=new Uint32Array(1),l=new Uint8Array(1);for(;r>0;){l[0]=n[e];const d=Math.min(r,8),c=8-d;o[0]=4278190080>>>24+c<<c,i[0]=(l[0]&o[0])>>c,t=t?t<<d|i[0]:i[0],e+=1,r-=d}return t};class CU extends Kw{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const i=RL(e,t,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=Sv(e,0);if(!t)return!1;const r=t.length;return e[r]===11&&e[r+1]===119&&Vw(t)!==void 0&&kL(e,r)<16}}function RL(n,e,t,r,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const d=[48e3,44100,32e3][o],c=e[t+4]&63,m=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+o]*2;if(t+m>e.length)return-1;const g=e[t+6]>>5;let p=0;g===2?p+=2:(g&1&&g!==1&&(p+=2),g&4&&(p+=2));const y=(e[t+6]<<8|e[t+7])>>12-p&1,A=[2,1,2,3,3,4,4,5][g]+y,I=e[t+5]>>3,P=e[t+5]&7,U=new Uint8Array([o<<6|I<<1|P>>2,(P&3)<<6|g<<3|y<<2|c>>4,c<<4&224]),M=1536/d*9e4,B=r+i*M,ie=e.subarray(t,t+m);return n.config=U,n.channelCount=A,n.samplerate=d,n.samples.push({unit:ie,pts:B}),m}class LU extends Kw{resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Sv(e,0);let r=(t==null?void 0:t.length)||0;if(t&&e[r]===11&&e[r+1]===119&&Vw(t)!==void 0&&kL(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(IL(e,r))return ni.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return RU(e,t)}appendFrame(e,t,r){if(this.basePTS!==null)return SL(e,t,r,this.basePTS,this.frameIndex)}}const DU=/\/emsg[-/]ID3/i;class NU{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,i){const o=this.videoTrack=al("video",1),l=this.audioTrack=al("audio",1),d=this.txtTrack=al("text",1);if(this.id3Track=al("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=HC(e);if(c.video){const{id:f,timescale:m,codec:g,supplemental:p}=c.video;o.id=f,o.timescale=d.timescale=m,o.codec=g,o.supplemental=p}if(c.audio){const{id:f,timescale:m,codec:g}=c.audio;l.id=f,l.timescale=m,l.codec=g}d.id=$C.text,o.sampleDuration=0,o.duration=l.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return P2(e)}demux(e,t){this.timeOffset=t;let r=e;const i=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Qs(this.remainderData,e));const d=B2(r);this.remainderData=d.remainder,i.samples=d.valid||new Uint8Array}else i.samples=r;const l=this.extractID3Track(i,t);return o.samples=Xk(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return r.samples=Xk(e,t),{videoTrack:t,audioTrack:al(),id3Track:i,textTrack:al()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const i=Ir(e.samples,["emsg"]);i&&i.forEach(o=>{const l=j2(o);if(DU.test(l.schemeIdUri)){const d=LR(l,t);let c=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const f=l.payload;r.samples.push({data:f,len:f.byteLength,dts:d,pts:d,type:_s.emsg,duration:c})}else if(this.config.enableEmsgKLVMetadata&&l.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const d=LR(l,t);r.samples.push({data:l.payload,len:l.payload.byteLength,dts:d,pts:d,type:_s.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function LR(n,e){return Fn(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class PU{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Uw(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Pd.cbc)}decryptAacSample(e,t,r){const i=e[t].unit;if(i.length<=16)return;const o=i.subarray(16,i.length-i.length%16),l=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(l).then(d=>{const c=new Uint8Array(d);i.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)})}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)r.set(e.subarray(o,o+16),i);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)e.set(r.subarray(i,i+16),o);return e}decryptAvcSample(e,t,r,i,o){const l=VC(o.data),d=this.getAvcEncryptedData(l);this.decryptBuffer(d.buffer).then(c=>{o.data=this.getAvcDecryptedUnit(l,c),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,i)})}decryptAvcSamples(e,t,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){i();return}const o=e[t].units;for(;!(r>=o.length);r++){const l=o[r];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(e,t,r,i,l),!this.decrypter.isSync()))return}}}}class xL{constructor(){this.VideoSample=null}createVideoSample(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}}getLastNalUnit(e){var t;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(t=r)!=null&&t.units){const o=r.units;i=o[o.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const r=t.samples,i=r.length;if(i){const o=r[i-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,r){const i=t.byteLength;let o=e.naluState||0;const l=o,d=[];let c=0,f,m,g,p=-1,y=0;for(o===-1&&(p=0,y=this.getNALuType(t,0),o=0,c=1);c<i;){if(f=t[c++],!o){o=f?0:1;continue}if(o===1){o=f?0:2;continue}if(!f)o=3;else if(f===1){if(m=c-o-1,p>=0){const v={data:t.subarray(p,m),type:y};d.push(v)}else{const v=this.getLastNalUnit(e.samples);v&&(l&&c<=4-l&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-l)),m>0&&(v.data=Qs(v.data,t.subarray(0,m)),v.state=0))}c<i?(g=this.getNALuType(t,c),p=c,y=g,o=0):o=-1}else o=0}if(p>=0&&o>=0){const v={data:t.subarray(p,i),type:y,state:o};d.push(v)}if(d.length===0){const v=this.getLastNalUnit(e.samples);v&&(v.data=Qs(v.data,t))}return e.naluState=o,d}}class nv{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");i.set(e.subarray(r,r+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&ni.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class MU extends xL{parsePES(e,t,r,i){const o=this.parseNALu(e,r.data,i);let l=this.VideoSample,d,c=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(f=>{var m,g;switch(f.type){case 1:{let A=!1;d=!0;const I=f.data;if(c&&I.length>4){const P=this.readSliceType(I);(P===2||P===4||P===7||P===9)&&(A=!0)}if(A){var p;(p=l)!=null&&p.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.frame=!0,l.key=A;break}case 5:d=!0,(m=l)!=null&&m.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 6:{d=!0,Pw(f.data,1,r.pts,t.samples);break}case 7:{var y,v;d=!0,c=!0;const A=f.data,I=this.readSPS(A);if(!e.sps||e.width!==I.width||e.height!==I.height||((y=e.pixelRatio)==null?void 0:y[0])!==I.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==I.pixelRatio[1]){e.width=I.width,e.height=I.height,e.pixelRatio=I.pixelRatio,e.sps=[A];const P=A.subarray(1,4);let U="avc1.";for(let M=0;M<3;M++){let B=P[M].toString(16);B.length<2&&(B="0"+B),U+=B}e.codec=U}break}case 8:d=!0,e.pps=[f.data];break;case 9:d=!0,e.audFound=!0,(g=l)!=null&&g.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:d=!0;break;default:d=!1;break}l&&d&&l.units.push(f)}),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new nv(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let r=8,i=8,o;for(let l=0;l<e;l++)i!==0&&(o=t.readEG(),i=(r+o+256)%256),r=i===0?r:i}readSPS(e){const t=new nv(e);let r=0,i=0,o=0,l=0,d,c,f;const m=t.readUByte.bind(t),g=t.readBits.bind(t),p=t.readUEG.bind(t),y=t.readBoolean.bind(t),v=t.skipBits.bind(t),A=t.skipEG.bind(t),I=t.skipUEG.bind(t),P=this.skipScalingList.bind(this);m();const U=m();if(g(5),v(3),m(),I(),U===100||U===110||U===122||U===244||U===44||U===83||U===86||U===118||U===128){const O=p();if(O===3&&v(1),I(),I(),v(1),y())for(c=O!==3?8:12,f=0;f<c;f++)y()&&(f<6?P(16,t):P(64,t))}I();const M=p();if(M===0)p();else if(M===1)for(v(1),A(),A(),d=p(),f=0;f<d;f++)A();I(),v(1);const B=p(),ie=p(),L=g(1);L===0&&v(1),v(1),y()&&(r=p(),i=p(),o=p(),l=p());let w=[1,1];if(y()&&y())switch(m()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:{w=[m()<<8|m(),m()<<8|m()];break}}return{width:Math.ceil((B+1)*16-r*2-i*2),height:(2-L)*(ie+1)*16-(L?2:4)*(o+l),pixelRatio:w}}}class OU extends xL{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,r,i){const o=this.parseNALu(e,r.data,i);let l=this.VideoSample,d,c=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(f=>{var m,g;switch(f.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),l.frame=!0,d=!0;break;case 16:case 17:case 18:case 21:if(d=!0,c){var p;(p=l)!=null&&p.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:d=!0,(m=l)!=null&&m.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 39:d=!0,Pw(f.data,2,r.pts,t.samples);break;case 32:d=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=si(e.params,this.readVPS(f.data)),this.initVPS=f.data),e.vps=[f.data];break;case 33:if(d=!0,c=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],f.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const y=this.readSPS(f.data);e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.codec=y.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const v in y.params)e.params[v]=y.params[v]}this.pushParameterSet(e.sps,f.data,e.vps),l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0;break;case 34:if(d=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const y=this.readPPS(f.data);for(const v in y)e.params[v]=y[v]}this.pushParameterSet(e.pps,f.data,e.vps)}break;case 35:d=!0,e.audFound=!0,(g=l)!=null&&g.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:d=!1;break}l&&d&&l.units.push(f)}),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}pushParameterSet(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[r]=e[i],r++);return new Uint8Array(t.buffer,0,r)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new nv(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const r=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const t=new nv(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const r=t.readBits(3);t.readBoolean();const i=t.readBits(2),o=t.readBoolean(),l=t.readBits(5),d=t.readUByte(),c=t.readUByte(),f=t.readUByte(),m=t.readUByte(),g=t.readUByte(),p=t.readUByte(),y=t.readUByte(),v=t.readUByte(),A=t.readUByte(),I=t.readUByte(),P=t.readUByte(),U=[],M=[];for(let Ve=0;Ve<r;Ve++)U.push(t.readBoolean()),M.push(t.readBoolean());if(r>0)for(let Ve=r;Ve<8;Ve++)t.readBits(2);for(let Ve=0;Ve<r;Ve++)U[Ve]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),M[Ve]&&t.readUByte();t.readUEG();const B=t.readUEG();B==3&&t.skipBits(1);const ie=t.readUEG(),L=t.readUEG(),w=t.readBoolean();let O=0,oe=0,D=0,ve=0;w&&(O+=t.readUEG(),oe+=t.readUEG(),D+=t.readUEG(),ve+=t.readUEG());const Le=t.readUEG(),te=t.readUEG(),$e=t.readUEG(),Ue=t.readBoolean();for(let Ve=Ue?0:r;Ve<=r;Ve++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let Je=0;Je<4;Je++)for(let Ke=0;Ke<(Je===3?2:6);Ke++)if(!t.readBoolean())t.readUEG();else{const Et=Math.min(64,1<<4+(Je<<1));Je>1&&t.readEG();for(let ot=0;ot<Et;ot++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const Ye=t.readUEG();let Ze=0;for(let Ve=0;Ve<Ye;Ve++){let Je=!1;if(Ve!==0&&(Je=t.readBoolean()),Je){Ve===Ye&&t.readUEG(),t.readBoolean(),t.readUEG();let Ke=0;for(let it=0;it<=Ze;it++){const Et=t.readBoolean();let ot=!1;Et||(ot=t.readBoolean()),(Et||ot)&&Ke++}Ze=Ke}else{const Ke=t.readUEG(),it=t.readUEG();Ze=Ke+it;for(let Et=0;Et<Ke;Et++)t.readUEG(),t.readBoolean();for(let Et=0;Et<it;Et++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const Ve=t.readUEG();for(let Je=0;Je<Ve;Je++){for(let Ke=0;Ke<$e+4;Ke++)t.readBits(1);t.readBits(1)}}let ze=0,st=1,Rt=1,jt=!0,Pe=1,Oe=0;t.readBoolean(),t.readBoolean();let gt=!1;if(t.readBoolean()){if(t.readBoolean()){const xt=t.readUByte(),En=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],tn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];xt>0&&xt<16?(st=En[xt-1],Rt=tn[xt-1]):xt===255&&(st=t.readBits(16),Rt=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),gt=t.readBoolean(),gt&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(Pe=t.readBits(32),Oe=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const tn=t.readBoolean(),fn=t.readBoolean();let Ht=!1;(tn||fn)&&(Ht=t.readBoolean(),Ht&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),Ht&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let nr=0;nr<=r;nr++){jt=t.readBoolean();const vr=jt||t.readBoolean();let Fr=!1;vr?t.readEG():Fr=t.readBoolean();const Lr=Fr?1:t.readUEG()+1;if(tn)for(let mr=0;mr<Lr;mr++)t.readUEG(),t.readUEG(),Ht&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(fn)for(let mr=0;mr<Lr;mr++)t.readUEG(),t.readUEG(),Ht&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),ze=t.readUEG())}let J=ie,F=L;if(w){let Ve=1,Je=1;B===1?Ve=Je=2:B==2&&(Ve=2),J=ie-Ve*oe-Ve*O,F=L-Je*ve-Je*D}const K=i?["A","B","C"][i]:"",Ee=d<<24|c<<16|f<<8|m;let ce=0;for(let Ve=0;Ve<32;Ve++)ce=(ce|(Ee>>Ve&1)<<31-Ve)>>>0;let He=ce.toString(16);return l===1&&He==="2"&&(He="6"),{codecString:`hvc1.${K}${l}.${He}.${o?"H":"L"}${P}.B0`,params:{general_tier_flag:o,general_profile_idc:l,general_profile_space:i,general_profile_compatibility_flags:[d,c,f,m],general_constraint_indicator_flags:[g,p,y,v,A,I],general_level_idc:P,bit_depth:Le+8,bit_depth_luma_minus8:Le,bit_depth_chroma_minus8:te,min_spatial_segmentation_idc:ze,chroma_format_idc:B,frame_rate:{fixed:jt,fps:Oe/Pe}},width:J,height:F,pixelRatio:[st,Rt]}}readPPS(e){const t=new nv(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),o=t.readBoolean();let l=1;return o&&i?l=0:o?l=3:i&&(l=2),{parallelismType:l}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const pa=188;class rd{constructor(e,t,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,t){const r=rd.syncOffset(e);return r>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const t=e.length;let r=Math.min(pa*5,t-pa)+1,i=0;for(;i<r;){let o=!1,l=-1,d=0;for(let c=i;c<t;c+=pa)if(e[c]===71&&(t-c===pa||e[c+pa]===71)){if(d++,l===-1&&(l=c,l!==0&&(r=Math.min(l+pa*99,e.length-pa)+1)),o||(o=eA(e,c)===0),o&&d>1&&(l===0&&d>2||c+pa>r))return l}else{if(d)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:$C[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=rd.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=rd.createTrack("audio",i),this._id3Track=rd.createTrack("id3"),this._txtTrack=rd.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,i=!1){r||(this.sampleAes=null);let o;const l=this._videoTrack,d=this._audioTrack,c=this._id3Track,f=this._txtTrack;let m=l.pid,g=l.pesData,p=d.pid,y=c.pid,v=d.pesData,A=c.pesData,I=null,P=this.pmtParsed,U=this._pmtId,M=e.length;if(this.remainderData&&(e=Qs(this.remainderData,e),M=e.length,this.remainderData=null),M<pa&&!i)return this.remainderData=e,{audioTrack:d,videoTrack:l,id3Track:c,textTrack:f};const B=Math.max(0,rd.syncOffset(e));M-=(M-B)%pa,M<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,M,e.buffer.byteLength-M));let ie=0;for(let w=B;w<M;w+=pa)if(e[w]===71){const O=!!(e[w+1]&64),oe=eA(e,w),D=(e[w+3]&48)>>4;let ve;if(D>1){if(ve=w+5+e[w+4],ve===w+pa)continue}else ve=w+4;switch(oe){case m:O&&(g&&(o=xh(g,this.logger))&&(this.readyVideoParser(l.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(l,f,o,!1)),g={data:[],size:0}),g&&(g.data.push(e.subarray(ve,w+pa)),g.size+=w+pa-ve);break;case p:if(O){if(v&&(o=xh(v,this.logger)))switch(d.segmentCodec){case"aac":this.parseAACPES(d,o);break;case"mp3":this.parseMPEGPES(d,o);break;case"ac3":this.parseAC3PES(d,o);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(ve,w+pa)),v.size+=w+pa-ve);break;case y:O&&(A&&(o=xh(A,this.logger))&&this.parseID3PES(c,o),A={data:[],size:0}),A&&(A.data.push(e.subarray(ve,w+pa)),A.size+=w+pa-ve);break;case 0:O&&(ve+=e[ve]+1),U=this._pmtId=FU(e,ve);break;case U:{O&&(ve+=e[ve]+1);const Le=UU(e,ve,this.typeSupported,r,this.observer,this.logger);m=Le.videoPid,m>0&&(l.pid=m,l.segmentCodec=Le.segmentVideoCodec),p=Le.audioPid,p>0&&(d.pid=p,d.segmentCodec=Le.segmentAudioCodec),y=Le.id3Pid,y>0&&(c.pid=y),I!==null&&!P&&(this.logger.warn(`MPEG-TS PMT found at ${w} after unknown PID '${I}'. Backtracking to sync byte @${B} to parse all TS packets.`),I=null,w=B-188),P=this.pmtParsed=!0;break}case 17:case 8191:break;default:I=oe;break}}else ie++;ie>0&&tA(this.observer,new Error(`Found ${ie} TS packet/s that do not start with 0x47`),void 0,this.logger),l.pesData=g,d.pesData=v,c.pesData=A;const L={audioTrack:d,videoTrack:l,id3Track:c,textTrack:f};return i&&this.extractRemainingSamples(L),L}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:i,textTrack:o}=e,l=r.pesData,d=t.pesData,c=i.pesData;let f;if(l&&(f=xh(l,this.logger))?(this.readyVideoParser(r.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(r,o,f,!0),r.pesData=null)):r.pesData=l,d&&(f=xh(d,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,f);break;case"mp3":this.parseMPEGPES(t,f);break;case"ac3":this.parseAC3PES(t,f);break}t.pesData=null}else d!=null&&d.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=d;c&&(f=xh(c,this.logger))?(this.parseID3PES(i,f),i.pesData=null):i.pesData=c}demuxSampleAes(e,t,r){const i=this.demux(e,r,!0,!this.config.progressive),o=this.sampleAes=new PU(this.observer,this.config,t);return this.decrypt(i,o)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new MU:e==="hevc"&&(this.videoParser=new OU))}decrypt(e,t){return new Promise(r=>{const{audioTrack:i,videoTrack:o}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{r(e)}):r(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let r=0;const i=this.aacOverFlow;let o=t.data;if(i){this.aacOverFlow=null;const g=i.missing,p=i.sample.unit.byteLength;if(g===-1)o=Qs(i.sample.unit,o);else{const y=p-g;i.sample.unit.set(o.subarray(0,g),y),e.samples.push(i.sample),r=i.missing}}let l,d;for(l=r,d=o.length;l<d-1&&!F0(o,l);l++);if(l!==r){let g;const p=l<d-1;if(p?g=`AAC PES did not start with ADTS header,offset:${l}`:g="No ADTS header found in AAC PES",tA(this.observer,new Error(g),p,this.logger),!p)return}yL(e,this.observer,o,l,this.audioCodec);let c;if(t.pts!==void 0)c=t.pts;else if(i){const g=EL(e.samplerate);c=i.sample.pts+g}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let f=0,m;for(;l<d;)if(m=bL(e,o,l,c,f),l+=m.length,m.missing){this.aacOverFlow=m;break}else for(f++;l<d-1&&!F0(o,l);l++);}parseMPEGPES(e,t){const r=t.data,i=r.length;let o=0,l=0;const d=t.pts;if(d===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<i;)if(wL(r,l)){const c=SL(e,r,l,d,o);if(c)l+=c.length,o++;else break}else l++}parseAC3PES(e,t){{const r=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=r.length;let l=0,d=0,c;for(;d<o&&(c=RL(e,r,d,i,l++))>0;)d+=c}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=si({},t,{type:this._videoTrack?_s.emsg:_s.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function eA(n,e){return((n[e+1]&31)<<8)+n[e+2]}function FU(n,e){return(n[e+10]&31)<<8|n[e+11]}function UU(n,e,t,r,i,o){const l={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},d=(n[e+1]&15)<<8|n[e+2],c=e+3+d-4,f=(n[e+10]&15)<<8|n[e+11];for(e+=12+f;e<c;){const m=eA(n,e),g=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!r){P_("ADTS AAC",o);break}case 15:l.audioPid===-1&&(l.audioPid=m);break;case 21:l.id3Pid===-1&&(l.id3Pid=m);break;case 219:if(!r){P_("H.264",o);break}case 27:l.videoPid===-1&&(l.videoPid=m);break;case 3:case 4:!t.mpeg&&!t.mp3?o.log("MPEG audio found, not supported in this browser"):l.audioPid===-1&&(l.audioPid=m,l.segmentAudioCodec="mp3");break;case 193:if(!r){P_("AC-3",o);break}case 129:t.ac3?l.audioPid===-1&&(l.audioPid=m,l.segmentAudioCodec="ac3"):o.log("AC-3 audio found, not supported in this browser");break;case 6:if(l.audioPid===-1&&g>0){let p=e+5,y=g;for(;y>2;){switch(n[p]){case 106:t.ac3!==!0?o.log("AC-3 audio found, not supported in this browser for now"):(l.audioPid=m,l.segmentAudioCodec="ac3");break}const A=n[p+1]+2;p+=A,y-=A}}break;case 194:case 135:return tA(i,new Error("Unsupported EC-3 in M2TS found"),void 0,o),l;case 36:l.videoPid===-1&&(l.videoPid=m,l.segmentVideoCodec="hevc",o.log("HEVC in M2TS found"));break}e+=g+5}return l}function tA(n,e,t,r){r.warn(`parsing error: ${e.message}`),n.emit(Te.ERROR,Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function P_(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function xh(n,e){let t=0,r,i,o,l,d;const c=n.data;if(!n||n.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=Qs(c[0],c[1]),c.splice(1,1);if(r=c[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>n.size-6)return null;const m=r[7];m&192&&(l=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,m&64?(d=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,l-d>60*9e4&&(e.warn(`${Math.round((l-d)/9e4)}s delta between PTS and DTS, align them`),l=d)):d=l),o=r[8];let g=o+9;if(n.size<=g)return null;n.size-=g;const p=new Uint8Array(n.size);for(let y=0,v=c.length;y<v;y++){r=c[y];let A=r.byteLength;if(g)if(g>A){g-=A;continue}else r=r.subarray(g),A-=g,g=0;p.set(r,t),t+=A}return i&&(i-=o+3),{data:p,pts:l,dts:d,len:i}}return null}class zU{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ju=Math.pow(2,32)-1;class St{static init(){St.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in St.types)St.types.hasOwnProperty(e)&&(St.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);St.HDLR_TYPES={video:t,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);St.STTS=St.STSC=St.STCO=o,St.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),St.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),St.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),St.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),d=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);St.FTYP=St.box(St.types.ftyp,l,c,l,d),St.DINF=St.box(St.types.dinf,St.box(St.types.dref,i))}static box(e,...t){let r=8,i=t.length;const o=i;for(;i--;)r+=t[i].byteLength;const l=new Uint8Array(r);for(l[0]=r>>24&255,l[1]=r>>16&255,l[2]=r>>8&255,l[3]=r&255,l.set(e,4),i=0,r=8;i<o;i++)l.set(t[i],r),r+=t[i].byteLength;return l}static hdlr(e){return St.box(St.types.hdlr,St.HDLR_TYPES[e])}static mdat(e){return St.box(St.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(ju+1)),i=Math.floor(t%(ju+1));return St.box(St.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return St.box(St.types.mdia,St.mdhd(e.timescale||0,e.duration||0),St.hdlr(e.type),St.minf(e))}static mfhd(e){return St.box(St.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?St.box(St.types.minf,St.box(St.types.smhd,St.SMHD),St.DINF,St.stbl(e)):St.box(St.types.minf,St.box(St.types.vmhd,St.VMHD),St.DINF,St.stbl(e))}static moof(e,t,r){return St.box(St.types.moof,St.mfhd(e),St.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=St.trak(e[t]);return St.box.apply(null,[St.types.moov,St.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(St.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=St.trex(e[t]);return St.box.apply(null,[St.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(ju+1)),i=Math.floor(t%(ju+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return St.box(St.types.mvhd,o)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let i,o;for(i=0;i<t.length;i++)o=t[i].flags,r[i+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return St.box(St.types.sdtp,r)}static stbl(e){return St.box(St.types.stbl,St.stsd(e),St.box(St.types.stts,St.STTS),St.box(St.types.stsc,St.STSC),St.box(St.types.stsz,St.STSZ),St.box(St.types.stco,St.STCO))}static avc1(e){let t=[],r=[],i,o,l;for(i=0;i<e.sps.length;i++)o=e.sps[i],l=o.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],l=o.byteLength,r.push(l>>>8&255),r.push(l&255),r=r.concat(Array.prototype.slice.call(o));const d=St.box(St.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),c=e.width,f=e.height,m=e.pixelRatio[0],g=e.pixelRatio[1];return St.box(St.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,St.box(St.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),St.box(St.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,m&255,g>>24,g>>16&255,g>>8&255,g&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return St.box(St.types.mp4a,St.audioStsd(e),St.box(St.types.esds,St.esds(e)))}static mp3(e){return St.box(St.types[".mp3"],St.audioStsd(e))}static ac3(e){return St.box(St.types["ac-3"],St.audioStsd(e),St.box(St.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return St.box(St.types.stsd,St.STSD,St.mp4a(e));if(t==="ac3"&&e.config)return St.box(St.types.stsd,St.STSD,St.ac3(e));if(t==="mp3"&&e.codec==="mp3")return St.box(St.types.stsd,St.STSD,St.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return St.box(St.types.stsd,St.STSD,St.avc1(e));if(t==="hevc"&&e.vps)return St.box(St.types.stsd,St.STSD,St.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,o=e.height||0,l=Math.floor(r/(ju+1)),d=Math.floor(r%(ju+1));return St.box(St.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,d>>24,d>>16&255,d>>8&255,d&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const r=St.sdtp(e),i=e.id,o=Math.floor(t/(ju+1)),l=Math.floor(t%(ju+1));return St.box(St.types.traf,St.box(St.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),St.box(St.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255])),St.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,St.box(St.types.trak,St.tkhd(e),St.mdia(e))}static trex(e){const t=e.id;return St.box(St.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],i=r.length,o=12+16*i,l=new Uint8Array(o);let d,c,f,m,g,p;for(t+=8+o,l.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),d=0;d<i;d++)c=r[d],f=c.duration,m=c.size,g=c.flags,p=c.cts,l.set([f>>>24&255,f>>>16&255,f>>>8&255,f&255,m>>>24&255,m>>>16&255,m>>>8&255,m&255,g.isLeading<<2|g.dependsOn,g.isDependedOn<<6|g.hasRedundancy<<4|g.paddingValue<<1|g.isNonSync,g.degradPrio&61440,g.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*d);return St.box(St.types.trun,l)}static initSegment(e){St.types||St.init();const t=St.moov(e);return Qs(St.FTYP,t)}static hvc1(e){const t=e.params,r=[e.vps,e.sps,e.pps],i=4,o=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),r.length]);let l=o.length;for(let v=0;v<r.length;v+=1){l+=3;for(let A=0;A<r[v].length;A+=1)l+=2+r[v][A].length}const d=new Uint8Array(l);d.set(o,0),l=o.length;const c=r.length-1;for(let v=0;v<r.length;v+=1){d.set(new Uint8Array([32+v|(v===c?128:0),0,r[v].length]),l),l+=3;for(let A=0;A<r[v].length;A+=1)d.set(new Uint8Array([r[v][A].length>>8,r[v][A].length&255]),l),l+=2,d.set(r[v][A],l),l+=r[v][A].length}const f=St.box(St.types.hvcC,d),m=e.width,g=e.height,p=e.pixelRatio[0],y=e.pixelRatio[1];return St.box(St.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,m&255,g>>8&255,g&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),f,St.box(St.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),St.box(St.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,y>>24,y>>16&255,y>>8&255,y&255])))}}St.types=void 0;St.HDLR_TYPES=void 0;St.STTS=void 0;St.STSC=void 0;St.STCO=void 0;St.STSZ=void 0;St.VMHD=void 0;St.SMHD=void 0;St.STSD=void 0;St.FTYP=void 0;St.DINF=void 0;const CL=9e4;function Ww(n,e,t=1,r=!1){const i=n*e*t;return r?Math.round(i):i}function BU(n,e,t=1,r=!1){return Ww(n,e,1/t,r)}function gp(n,e=!1){return Ww(n,1e3,1/CL,e)}function $U(n,e=1){return Ww(n,CL,1/e)}const jU=10*1e3,qU=1024,HU=1152,GU=1536;let Ch=null,M_=null;function DR(n,e,t,r){return{duration:e,size:t,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class fb extends Ao{constructor(e,t,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,Ch===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ch=l?parseInt(l[1]):0}if(M_===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);M_=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,i=e.reduce((o,l)=>{let d=l.pts,c=d-o;return c<-4294967296&&(t=!0,d=Gs(d,r),c=d-o),c>0?o:d},r);return t&&this.debug("PTS rollover detected"),i}remux(e,t,r,i,o,l,d,c){let f,m,g,p,y,v,A=o,I=o;const P=e.pid>-1,U=t.pid>-1,M=t.samples.length,B=e.samples.length>0,ie=d&&M>0||M>1;if((!P||B)&&(!U||ie)||this.ISGenerated||d){if(this.ISGenerated){var w,O,oe,D;const $e=this.videoTrackConfig;($e&&(t.width!==$e.width||t.height!==$e.height||((w=t.pixelRatio)==null?void 0:w[0])!==((O=$e.pixelRatio)==null?void 0:O[0])||((oe=t.pixelRatio)==null?void 0:oe[1])!==((D=$e.pixelRatio)==null?void 0:D[1]))||!$e&&ie||this.nextAudioTs===null&&B)&&this.resetInitSegment()}this.ISGenerated||(g=this.generateIS(e,t,o,l));const ve=this.isVideoContiguous;let Le=-1,te;if(ie&&(Le=VU(t.samples),!ve&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,Le>0){this.warn(`Dropped ${Le} out of ${M} video samples due to a missing keyframe`);const $e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Le),t.dropped+=Le,I+=(t.samples[0].pts-$e)/t.inputTimeScale,te=I}else Le===-1&&(this.warn(`No keyframe found out of ${M} video samples`),v=!1);if(this.ISGenerated){if(B&&ie){const $e=this.getVideoStartPts(t.samples),Re=(Gs(e.samples[0].pts,$e)-$e)/t.inputTimeScale;A+=Math.max(0,Re),I+=Math.max(0,-Re)}if(B){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),g=this.generateIS(e,t,o,l)),m=this.remuxAudio(e,A,this.isAudioContiguous,l,U||ie||c===Qn.AUDIO?I:void 0),ie){const $e=m?m.endPTS-m.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),g=this.generateIS(e,t,o,l)),f=this.remuxVideo(t,I,ve,$e)}}else ie&&(f=this.remuxVideo(t,I,ve,0));f&&(f.firstKeyFrame=Le,f.independent=Le!==-1,f.firstKeyFramePTS=te)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(y=LL(r,o,this._initPTS,this._initDTS)),i.samples.length&&(p=DL(i,o,this._initPTS))),{audio:m,video:f,initSegment:g,independent:v,text:p,id3:y}}generateIS(e,t,r,i){const o=e.samples,l=t.samples,d=this.typeSupported,c={},f=this._initPTS;let m=!f||i,g="audio/mp4",p,y,v,A=-1;if(m&&(p=y=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":d.mpeg?(g="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:g,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&d.mpeg?new Uint8Array(0):St.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(A=e.id,v=e.inputTimeScale,!f||v!==f.timescale?p=y=o[0].pts-Math.round(v*r):m=!1)}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:St.initSegment([t]),metadata:{width:t.width,height:t.height}},m)if(A=t.id,v=t.inputTimeScale,!f||v!==f.timescale){const I=this.getVideoStartPts(l),P=Math.round(v*r);y=Math.min(y,Gs(l[0].dts,I)-P),p=Math.min(p,I-P)}else m=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,m?(f&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${r} ${p/v} != initPTS: ${f.baseTime/f.timescale} (${f.baseTime}/${f.timescale}) trackId: ${f.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${p/v} (${p}/${v}) trackId: ${A}`),this._initPTS={baseTime:p,timescale:v,trackId:A},this._initDTS={baseTime:y,timescale:v,trackId:A}):p=v=void 0,{tracks:c,initPTS:p,timescale:v,trackId:A}}remuxVideo(e,t,r,i){const o=e.inputTimeScale,l=e.samples,d=[],c=l.length,f=this._initPTS,m=f.baseTime*o/f.timescale;let g=this.nextVideoTs,p=8,y=this.videoSampleDuration,v,A,I=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY,U=!1;if(!r||g===null){const ze=m+t*o,st=l[0].pts-Gs(l[0].dts,l[0].pts);Ch&&g!==null&&Math.abs(ze-st-(g+m))<15e3?r=!0:g=ze-st-m}const M=g+m;for(let ze=0;ze<c;ze++){const st=l[ze];st.pts=Gs(st.pts,M),st.dts=Gs(st.dts,M),st.dts<l[ze>0?ze-1:ze].dts&&(U=!0)}U&&l.sort(function(ze,st){const Rt=ze.dts-st.dts,jt=ze.pts-st.pts;return Rt||jt}),v=l[0].dts,A=l[l.length-1].dts;const B=A-v,ie=B?Math.round(B/(c-1)):y||e.inputTimeScale/30;if(r){const ze=v-M,st=ze>ie,Rt=ze<-1;if((st||Rt)&&(st?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${gp(ze,!0)} ms (${ze}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${gp(-ze,!0)} ms (${ze}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!Rt||M>=l[0].pts||Ch)){v=M;const jt=l[0].pts-ze;if(st)l[0].dts=v,l[0].pts=jt;else{let Pe=!0;for(let Oe=0;Oe<l.length&&!(l[Oe].dts>jt&&Pe);Oe++){const gt=l[Oe].pts;if(l[Oe].dts-=ze,l[Oe].pts-=ze,Oe<l.length-1){const Q=l[Oe+1].pts,J=l[Oe].pts,F=Q<=J,K=Q<=gt;Pe=F==K}}}this.log(`Video: Initial PTS/DTS adjusted: ${gp(jt,!0)}/${gp(v,!0)}, delta: ${gp(ze,!0)} ms`)}}v=Math.max(0,v);let L=0,w=0,O=v;for(let ze=0;ze<c;ze++){const st=l[ze],Rt=st.units,jt=Rt.length;let Pe=0;for(let Oe=0;Oe<jt;Oe++)Pe+=Rt[Oe].data.length;w+=Pe,L+=jt,st.length=Pe,st.dts<O?(st.dts=O,O+=ie/4|0||1):O=st.dts,I=Math.min(st.pts,I),P=Math.max(st.pts,P)}A=l[c-1].dts;const oe=w+4*L+8;let D;try{D=new Uint8Array(oe)}catch(ze){this.observer.emit(Te.ERROR,Te.ERROR,{type:Zn.MUX_ERROR,details:It.REMUX_ALLOC_ERROR,fatal:!1,error:ze,bytes:oe,reason:`fail allocating video mdat ${oe}`});return}const ve=new DataView(D.buffer);ve.setUint32(0,oe),D.set(St.types.mdat,4);let Le=!1,te=Number.POSITIVE_INFINITY,$e=Number.POSITIVE_INFINITY,Ue=Number.NEGATIVE_INFINITY,Re=Number.NEGATIVE_INFINITY;for(let ze=0;ze<c;ze++){const st=l[ze],Rt=st.units;let jt=0;for(let gt=0,Q=Rt.length;gt<Q;gt++){const J=Rt[gt],F=J.data,K=J.data.byteLength;ve.setUint32(p,K),p+=4,D.set(F,p),p+=K,jt+=4+K}let Pe;if(ze<c-1)y=l[ze+1].dts-st.dts,Pe=l[ze+1].pts-st.pts;else{const gt=this.config,Q=ze>0?st.dts-l[ze-1].dts:ie;if(Pe=ze>0?st.pts-l[ze-1].pts:ie,gt.stretchShortVideoTrack&&this.nextAudioTs!==null){const J=Math.floor(gt.maxBufferHole*o),F=(i?I+i*o:this.nextAudioTs+m)-st.pts;F>J?(y=F-Q,y<0?y=Q:Le=!0,this.log(`It is approximately ${F/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=Q}else y=Q}const Oe=Math.round(st.pts-st.dts);te=Math.min(te,y),Ue=Math.max(Ue,y),$e=Math.min($e,Pe),Re=Math.max(Re,Pe),d.push(DR(st.key,y,jt,Oe))}if(d.length){if(Ch){if(Ch<70){const ze=d[0].flags;ze.dependsOn=2,ze.isNonSync=0}}else if(M_&&Re-$e<Ue-te&&ie/Ue<.025&&d[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let ze=v;for(let st=0,Rt=d.length;st<Rt;st++){const jt=ze+d[st].duration,Pe=ze+d[st].cts;if(st<Rt-1){const Oe=jt+d[st+1].cts;d[st].duration=Oe-Pe}else d[st].duration=st?d[st-1].duration:ie;d[st].cts=0,ze=jt}}}y=Le||!y?ie:y;const Xe=A+y;this.nextVideoTs=g=Xe-m,this.videoSampleDuration=y,this.isVideoContiguous=!0;const Ne={data1:St.moof(e.sequenceNumber++,v,si(e,{samples:d})),data2:D,startPTS:(I-m)/o,endPTS:(P+y-m)/o,startDTS:(v-m)/o,endDTS:g/o,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Ne}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return HU;case"ac3":return GU;default:return qU}}remuxAudio(e,t,r,i,o){const l=e.inputTimeScale,d=e.samplerate?e.samplerate:l,c=l/d,f=this.getSamplesPerFrame(e),m=f*c,g=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,y=[],v=o!==void 0;let A=e.samples,I=p?0:8,P=this.nextAudioTs||-1;const U=g.baseTime*l/g.timescale,M=U+t*l;if(this.isAudioContiguous=r=r||A.length&&P>0&&(i&&Math.abs(M-(P+U))<9e3||Math.abs(Gs(A[0].pts,M)-(P+U))<20*m),A.forEach(function(Re){Re.pts=Gs(Re.pts,M)}),!r||P<0){if(A=A.filter(Re=>Re.pts>=0),!A.length)return;o===0?P=0:i&&!v?P=Math.max(0,M-U):P=A[0].pts-U}if(e.segmentCodec==="aac"){const Re=this.config.maxAudioFramesDrift;for(let Xe=0,Ye=P+U;Xe<A.length;Xe++){const Ze=A[Xe],Ne=Ze.pts,ze=Ne-Ye,st=Math.abs(1e3*ze/l);if(ze<=-Re*m&&v)Xe===0&&(this.warn(`Audio frame @ ${(Ne/l).toFixed(3)}s overlaps marker by ${Math.round(1e3*ze/l)} ms.`),this.nextAudioTs=P=Ne-U,Ye=Ne);else if(ze>=Re*m&&st<jU&&v){let Rt=Math.round(ze/m);for(Ye=Ne-Rt*m;Ye<0&&Rt&&m;)Rt--,Ye+=m;Xe===0&&(this.nextAudioTs=P=Ye-U),this.warn(`Injecting ${Rt} audio frames @ ${((Ye-U)/l).toFixed(3)}s due to ${Math.round(1e3*ze/l)} ms gap.`);for(let jt=0;jt<Rt;jt++){let Pe=zU.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Pe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Pe=Ze.unit.subarray()),A.splice(Xe,0,{unit:Pe,pts:Ye}),Ye+=m,Xe++}}Ze.pts=Ye,Ye+=m}}let B=null,ie=null,L,w=0,O=A.length;for(;O--;)w+=A[O].unit.byteLength;for(let Re=0,Xe=A.length;Re<Xe;Re++){const Ye=A[Re],Ze=Ye.unit;let Ne=Ye.pts;if(ie!==null){const st=y[Re-1];st.duration=Math.round((Ne-ie)/c)}else if(r&&e.segmentCodec==="aac"&&(Ne=P+U),B=Ne,w>0){w+=I;try{L=new Uint8Array(w)}catch(st){this.observer.emit(Te.ERROR,Te.ERROR,{type:Zn.MUX_ERROR,details:It.REMUX_ALLOC_ERROR,fatal:!1,error:st,bytes:w,reason:`fail allocating audio mdat ${w}`});return}p||(new DataView(L.buffer).setUint32(0,w),L.set(St.types.mdat,4))}else return;L.set(Ze,I);const ze=Ze.byteLength;I+=ze,y.push(DR(!0,f,ze,0)),ie=Ne}const oe=y.length;if(!oe)return;const D=y[y.length-1];P=ie-U,this.nextAudioTs=P+c*D.duration;const ve=p?new Uint8Array(0):St.moof(e.sequenceNumber++,B/c,si({},e,{samples:y}));e.samples=[];const Le=(B-U)/l,te=P/l,Ue={data1:ve,data2:L,startPTS:Le,endPTS:te,startDTS:Le,endDTS:te,type:"audio",hasAudio:!0,hasVideo:!1,nb:oe};return this.isAudioContiguous=!0,Ue}}function Gs(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function VU(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function LL(n,e,t,r){const i=n.samples.length;if(!i)return;const o=n.inputTimeScale;for(let d=0;d<i;d++){const c=n.samples[d];c.pts=Gs(c.pts-t.baseTime*o/t.timescale,e*o)/o,c.dts=Gs(c.dts-r.baseTime*o/r.timescale,e*o)/o}const l=n.samples;return n.samples=[],{samples:l}}function DL(n,e,t){const r=n.samples.length;if(!r)return;const i=n.inputTimeScale;for(let l=0;l<r;l++){const d=n.samples[l];d.pts=Gs(d.pts-t.baseTime*i/t.timescale,e*i)/i}n.samples.sort((l,d)=>l.pts-d.pts);const o=n.samples;return n.samples=[],{samples:o}}class KU extends Ao{constructor(e,t,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:r,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:o,video:l}=this.initData=HC(e);if(t)U2(e,t);else{const c=o||l;c!=null&&c.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${c.codec}")!`)}o&&(r=NR(o,hi.AUDIO,this)),l&&(i=NR(l,hi.VIDEO,this));const d={};o&&l?d.audiovideo={container:"video/mp4",codec:r+","+i,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:o?d.audio={container:"audio/mp4",codec:r,encrypted:o.encrypted,initSegment:e,id:"audio"}:l?d.video={container:"video/mp4",codec:i,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=d}remux(e,t,r,i,o,l){var d,c;let{initPTS:f,lastEndTime:m}=this;const g={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};Fn(m)||(m=this.lastEndTime=o||0);const p=t.samples;if(!p.length)return g;const y={initPTS:void 0,timescale:void 0,trackId:void 0};let v=this.initData;if((d=v)!=null&&d.length||(this.generateInitSegment(p),v=this.initData),!((c=v)!=null&&c.length))return this.warn("Failed to generate initSegment."),g;this.emitInitSegment&&(y.tracks=this.initTracks,this.emitInitSegment=!1);const A=z2(p,v,this),I=v.audio?A[v.audio.id]:null,P=v.video?A[v.video.id]:null,U=UE(P,1/0),M=UE(I,1/0),B=UE(P,0,!0),ie=UE(I,0,!0);let L=o,w=0;const O=I&&(!P||!f&&M<U||f&&f.trackId===v.audio.id),oe=O?I:P;if(oe){const Ye=oe.timescale,Ze=oe.start-o*Ye,Ne=O?v.audio.id:v.video.id;L=oe.start/Ye,w=O?ie-M:B-U,(l||!f)&&(YU(f,L,o,w)||Ye!==f.timescale)&&(f&&this.warn(`Timestamps at playlist time: ${l?"":"~"}${o} ${Ze/Ye} != initPTS: ${f.baseTime/f.timescale} (${f.baseTime}/${f.timescale}) trackId: ${f.trackId}`),this.log(`Found initPTS at playlist time: ${o} offset: ${L-o} (${Ze}/${Ye}) trackId: ${Ne}`),f=null,y.initPTS=Ze,y.timescale=Ye,y.trackId=Ne)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${o}`);f?(y.initPTS=f.baseTime,y.timescale=f.timescale,y.trackId=f.trackId):((!y.timescale||y.trackId===void 0||y.initPTS===void 0)&&(this.warn("Could not set initPTS"),y.initPTS=L,y.timescale=1,y.trackId=-1),this.initPTS=f={baseTime:y.initPTS,timescale:y.timescale,trackId:y.trackId});const D=L-f.baseTime/f.timescale,ve=D+w;w>0?this.lastEndTime=ve:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Le=!!v.audio,te=!!v.video;let $e="";Le&&($e+="audio"),te&&($e+="video");const Ue=(v.audio?v.audio.encrypted:!1)||(v.video?v.video.encrypted:!1),Re={data1:p,startPTS:D,startDTS:D,endPTS:ve,endDTS:ve,type:$e,hasAudio:Le,hasVideo:te,nb:1,dropped:0,encrypted:Ue};g.audio=Le&&!te?Re:void 0,g.video=te?Re:void 0;const Xe=P==null?void 0:P.sampleCount;if(Xe){const Ye=P.keyFrameIndex,Ze=Ye!==-1;Re.nb=Xe,Re.dropped=Ye===0||this.isVideoContiguous?0:Ze?Ye:Xe,Re.independent=Ze,Re.firstKeyFrame=Ye,Ze&&P.keyFrameStart&&(Re.firstKeyFramePTS=(P.keyFrameStart-f.baseTime)/f.timescale),this.isVideoContiguous||(g.independent=Ze),this.isVideoContiguous||(this.isVideoContiguous=Ze),Re.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Ye}/${Xe} dropped: ${Re.dropped} start: ${Re.firstKeyFramePTS||"NA"}`)}return g.initSegment=y,g.id3=LL(r,o,f,f),i.samples.length&&(g.text=DL(i,o,f)),g}}function UE(n,e,t=!1){return(n==null?void 0:n.start)!==void 0?(n.start+(t?n.duration:0))/n.timescale:e}function YU(n,e,t,r){if(n===null)return!0;const i=Math.max(r,1),o=e-n.baseTime/n.timescale;return Math.abs(o-t)>i}function NR(n,e,t){const r=n.codec;return r&&r.length>4?r:e===hi.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?C0(r,!1):(t.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(t.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let Jl;try{Jl=self.performance.now.bind(self.performance)}catch{Jl=Date.now}const hb=[{demux:NU,remux:KU},{demux:rd,remux:fb},{demux:xU,remux:fb},{demux:LU,remux:fb}];hb.splice(2,0,{demux:CU,remux:fb});class PR{constructor(e,t,r,i,o,l){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=o,this.logger=l}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,i){const o=r.transmuxing;o.executeStart=Jl();let l=new Uint8Array(e);const{currentTransmuxState:d,transmuxConfig:c}=this;i&&(this.currentTransmuxState=i);const{contiguous:f,discontinuity:m,trackSwitch:g,accurateTimeOffset:p,timeOffset:y,initSegmentChange:v}=i||d,{audioCodec:A,videoCodec:I,defaultInitPts:P,duration:U,initSegmentData:M}=c,B=WU(l,t);if(B&&hm(B.method)){const O=this.getDecrypter(),oe=Bw(B.method);if(O.isSync()){let D=O.softwareDecrypt(l,B.key.buffer,B.iv.buffer,oe);if(r.part>-1){const Le=O.flush();D=Le&&Le.buffer}if(!D)return o.executeEnd=Jl(),O_(r);l=new Uint8Array(D)}else return this.asyncResult=!0,this.decryptionPromise=O.webCryptoDecrypt(l,B.key.buffer,B.iv.buffer,oe).then(D=>{const ve=this.push(D,null,r);return this.decryptionPromise=null,ve}),this.decryptionPromise}const ie=this.needsProbing(m,g);if(ie){const O=this.configureTransmuxer(l);if(O)return this.logger.warn(`[transmuxer] ${O.message}`),this.observer.emit(Te.ERROR,Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_PARSING_ERROR,fatal:!1,error:O,reason:O.message}),o.executeEnd=Jl(),O_(r)}(m||g||v||ie)&&this.resetInitSegment(M,A,I,U,t),(m||v||ie)&&this.resetInitialTimestamp(P),f||this.resetContiguity();const L=this.transmux(l,B,y,p,r);this.asyncResult=Av(L);const w=this.currentTransmuxState;return w.contiguous=!0,w.discontinuity=!1,w.trackSwitch=!1,o.executeEnd=Jl(),L}flush(e){const t=e.transmuxing;t.executeStart=Jl();const{decrypter:r,currentTransmuxState:i,decryptionPromise:o}=this;if(o)return this.asyncResult=!0,o.then(()=>this.flush(e));const l=[],{timeOffset:d}=i;if(r){const g=r.flush();g&&l.push(this.push(g.buffer,null,e))}const{demuxer:c,remuxer:f}=this;if(!c||!f){t.executeEnd=Jl();const g=[O_(e)];return this.asyncResult?Promise.resolve(g):g}const m=c.flush(d);return Av(m)?(this.asyncResult=!0,m.then(g=>(this.flushRemux(l,g,e),l))):(this.flushRemux(l,m,e),this.asyncResult?Promise.resolve(l):l)}flushRemux(e,t,r){const{audioTrack:i,videoTrack:o,id3Track:l,textTrack:d}=t,{accurateTimeOffset:c,timeOffset:f}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Qn.MAIN?"level":"track"} ${r.level}`);const m=this.remuxer.remux(i,o,l,d,f,c,!0,this.id);e.push({remuxResult:m,chunkMeta:r}),r.transmuxing.executeEnd=Jl()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,i,o){const{demuxer:l,remuxer:d}=this;!l||!d||(l.resetInitSegment(e,t,r,i),d.resetInitSegment(e,t,r,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,i,o){let l;return t&&t.method==="SAMPLE-AES"?l=this.transmuxSampleAes(e,t,r,i,o):l=this.transmuxUnencrypted(e,r,i,o),l}transmuxUnencrypted(e,t,r,i){const{audioTrack:o,videoTrack:l,id3Track:d,textTrack:c}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,l,d,c,t,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,r,i,o){return this.demuxer.demuxSampleAes(e,t,r).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,r,i,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:i}=this;let o;for(let g=0,p=hb.length;g<p;g++){var l;if((l=hb[g].demux)!=null&&l.probe(e,this.logger)){o=hb[g];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const d=this.demuxer,c=this.remuxer,f=o.remux,m=o.demux;(!c||!(c instanceof f))&&(this.remuxer=new f(r,t,i,this.logger)),(!d||!(d instanceof m))&&(this.demuxer=new m(r,t,i,this.logger),this.probe=m.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Uw(this.config)),e}}function WU(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const O_=n=>({remuxResult:{},chunkMeta:n});function Av(n){return"then"in n&&n.then instanceof Function}class QU{constructor(e,t,r,i,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=o||null}}class XU{constructor(e,t,r,i,o,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=o,this.initSegmentChange=l}}let MR=0;class NL{constructor(e,t,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=MR++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=c=>{const f=c.data,m=this.hls;if(!(!m||!(f!=null&&f.event)||f.instanceNo!==this.instanceNo))switch(f.event){case"init":{var g;const p=(g=this.workerContext)==null?void 0:g.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(f.data);break}case"flush":{this.onFlush(f.data);break}case"workerLog":{m.logger[f.data.logType]&&m.logger[f.data.logType](f.data.message);break}default:{f.data=f.data||{},f.data.frag=this.frag,f.data.part=this.part,f.data.id=this.id,m.trigger(f.event,f.data);break}}},this.onWorkerError=c=>{if(!this.hls)return;const f=new Error(`${c.message}  (${c.filename}:${c.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})};const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const l=(c,f)=>{f=f||{},f.frag=this.frag||void 0,c===Te.ERROR&&(f=f,f.parent=this.id,f.part=this.part,this.error=f.error),this.hls.trigger(c,f)};this.observer=new qw,this.observer.on(Te.FRAG_DECRYPTED,l),this.observer.on(Te.ERROR,l);const d=eR(o.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const c=this.hls.logger;if(o.workerPath||tU()){try{o.workerPath?(c.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=rU(o.workerPath)):(c.log(`injecting Web Worker for "${t}"`),this.workerContext=nU());const{worker:m}=this.workerContext;m.addEventListener("message",this.onWorkerMessage),m.addEventListener("error",this.onWorkerError),m.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:d,id:t,config:Ii(o)})}catch(m){c.warn(`Error setting up "${t}" Web Worker, fallback to inline`,m),this.terminateWorker(),this.error=null,this.transmuxer=new PR(this.observer,d,o,"",t,e.logger)}return}}this.transmuxer=new PR(this.observer,d,o,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=MR++;const t=this.hls.config,r=eR(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Ii(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),iU(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,r,i,o,l,d,c,f,m){var g,p;f.transmuxing.start=self.performance.now();const{instanceNo:y,transmuxer:v}=this,A=l?l.start:o.start,I=o.decryptdata,P=this.frag,U=!(P&&o.cc===P.cc),M=!(P&&f.level===P.level),B=P?f.sn-P.sn:-1,ie=this.part?f.part-this.part.index:-1,L=B===0&&f.id>1&&f.id===(P==null?void 0:P.stats.chunkCount),w=!M&&(B===1||B===0&&(ie===1||L&&ie<=0)),O=self.performance.now();(M||B||o.stats.parsing.start===0)&&(o.stats.parsing.start=O),l&&(ie||!w)&&(l.stats.parsing.start=O);const oe=!(P&&((g=o.initSegment)==null?void 0:g.url)===((p=P.initSegment)==null?void 0:p.url)),D=new XU(U,w,c,M,A,oe);if(!w||U||oe){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${o.type} sn: ${f.sn}${f.part>-1?" part: "+f.part:""} ${this.id===Qn.MAIN?"level":"track"}: ${f.level} id: ${f.id}
        discontinuity: ${U}
        trackSwitch: ${M}
        contiguous: ${w}
        accurateTimeOffset: ${c}
        timeOffset: ${A}
        initSegmentChange: ${oe}`);const ve=new QU(r,i,t,d,m);this.configureTransmuxer(ve)}if(this.frag=o,this.part=l,this.workerContext)this.workerContext.worker.postMessage({instanceNo:y,cmd:"demux",data:e,decryptdata:I,chunkMeta:f,state:D},e instanceof ArrayBuffer?[e]:[]);else if(v){const ve=v.push(e,I,f,D);Av(ve)?ve.then(Le=>{this.handleTransmuxComplete(Le)}).catch(Le=>{this.transmuxerError(Le,f,"transmuxer-interface push error")}):this.handleTransmuxComplete(ve)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);Av(i)?i.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const OR=100;class ZU extends jw{constructor(e,t,r){super(e,t,r,"audio-stream-controller",Qn.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Te.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Te.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Te.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Te.BUFFER_RESET,this.onBufferReset,this),e.on(Te.BUFFER_CREATED,this.onBufferCreated,this),e.on(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Te.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Te.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Te.FRAG_LOADING,this.onFragLoading,this),e.on(Te.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Te.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Te.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Te.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Te.BUFFER_RESET,this.onBufferReset,this),e.off(Te.BUFFER_CREATED,this.onBufferCreated,this),e.off(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Te.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Te.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Te.FRAG_LOADING,this.onFragLoading,this),e.off(Te.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:o,trackId:l}){if(r===Qn.MAIN){const d=t.cc,c=this.fragCurrent;if(this.initPTS[d]={baseTime:i,timescale:o,trackId:l},this.log(`InitPTS for cc: ${d} found from main: ${i/o} (${i}/${o}) trackId: ${l}`),this.mainAnchor=t,this.state===nn.WAITING_INIT_PTS){const f=this.waitingData;(!f&&!this.loadingParts||f&&f.frag.cc!==d)&&this.syncWithAnchor(t,f==null?void 0:f.frag)}else!this.hls.hasEnoughToStart&&c&&c.cc!==d?(c.abortRequests(),this.syncWithAnchor(t,c)):this.state===nn.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(t&&(i==null?void 0:i.cc)===t.cc)return;const o=(i||e).cc,l=this.getLevelDetails(),d=this.getLoadPosition(),c=eL(l,o,d);c&&(this.log(`Syncing with main frag at ${c.start} cc ${c.cc}`),this.startFragRequested=!1,this.nextLoadPosition=c.start,this.resetLoadingState(),this.state===nn.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=nn.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(OR),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=nn.IDLE):this.state=nn.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case nn.IDLE:this.doTickIdle();break;case nn.WAITING_TRACK:{const{levels:t,trackId:r}=this,i=t==null?void 0:t[r],o=i==null?void 0:i.details;if(o&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(o))break;this.state=nn.WAITING_INIT_PTS}break}case nn.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),r=this.retryDate;if(!r||t>=r||(e=this.media)!=null&&e.seeking){const{levels:i,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[o])||null),this.state=nn.IDLE}break}case nn.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:r,part:i,cache:o,complete:l}=t,d=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=nn.FRAG_LOADING;const c=o.flush().buffer,f={frag:r,part:i,payload:c,networkDetails:null};this._handleFragmentLoadProgress(f),l&&super._handleFragmentLoadComplete(f)}else d&&d.cc!==t.frag.cc&&this.syncWithAnchor(d,t.frag)}else this.state=nn.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:r,media:i,trackId:o}=this,l=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!l.startFragPrefetch)||!(r!=null&&r[o]))return;const d=r[o],c=d.details;if(!c||this.waitForLive(d)||this.waitForCdnTuneIn(c)){this.state=nn.WAITING_TRACK,this.startFragRequested=!1;return}const f=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&f&&(this.bufferFlushed=!1,this.afterBufferFlushed(f,hi.AUDIO,Qn.AUDIO));const m=this.getFwdBufferInfo(f,Qn.AUDIO);if(m===null)return;if(!this.switchingTrack&&this._streamEnded(m,c)){t.trigger(Te.BUFFER_EOS,{type:"audio"}),this.state=nn.ENDED;return}const g=m.len,p=t.maxBufferLength,y=c.fragments,v=y[0].start,A=this.getLoadPosition(),I=this.flushing?A:m.end;if(this.switchingTrack&&i){const M=A;c.PTSKnown&&M<v&&(m.end>v||m.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05)}if(g>=p&&!this.switchingTrack&&I<y[y.length-1].start)return;let P=this.getNextFragment(I,c);if(P&&this.isLoopLoading(P,I)&&(P=this.getNextFragmentLoopLoading(P,c,m,Qn.MAIN,p)),!P){this.bufferFlushed=!0;return}let U=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&U&&Ji(P)&&!P.endList&&(!c.live||!this.loadingParts&&I<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(U)===oa.OK&&(this.mainFragLoading=U=null),U&&Ji(U))){if(P.start>U.end){const B=this.fragmentTracker.getFragAtPos(I,Qn.MAIN);B&&B.end>U.end&&(U=B,this.mainFragLoading={frag:B,targetBufferTime:null})}if(P.start>U.end)return}this.loadFragment(P,d,I)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(r=>new bv(r))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==nn.STOPPED&&(this.setInterval(OR),this.state=nn.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Te.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,t){var r;const{levels:i}=this,{details:o,id:l,groupId:d,track:c}=t;if(!i){this.warn(`Audio tracks reset while loading track ${l} "${c.name}" of "${d}"`);return}const f=this.mainDetails;if(!f||o.endCC>f.endCC||f.expired){this.cachedTrackLoadedData=t,this.state!==nn.STOPPED&&(this.state=nn.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${l} "${c.name}" of "${d}" loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const m=i[l];let g=0;if(o.live||(r=m.details)!=null&&r.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;if(m.details){var p;g=this.alignPlaylists(o,m.details,(p=this.levelLastLoaded)==null?void 0:p.details)}o.alignedSliding||(hL(o,f),o.alignedSliding||O0(o,f),g=o.fragmentStart)}m.details=o,this.levelLastLoaded=m,this.startFragRequested||this.setStartPosition(f,g),this.hls.trigger(Te.AUDIO_TRACK_UPDATED,{details:o,id:l,groupId:t.groupId}),this.state===nn.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=nn.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:i,payload:o}=e,{config:l,trackId:d,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const f=c[d];if(!f){this.warn("Audio track is undefined on fragment load progress");return}const m=f.details;if(!m){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const g=l.defaultAudioCodec||f.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new NL(this.hls,Qn.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const y=this.initPTS[r.cc],v=(t=r.initSegment)==null?void 0:t.data;if(y!==void 0){const I=i?i.index:-1,P=I!==-1,U=new zw(r.level,r.sn,r.stats.chunkCount,o.byteLength,I,P);p.push(o,v,g,"",r,i,m.totalduration,!1,U,y)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${m.startSN} ,${m.endSN}],track ${d}`);const{cache:A}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new mL,complete:!1};A.push(new Uint8Array(o)),this.state!==nn.STOPPED&&(this.state=nn.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Qn.MAIN&&Ji(t.frag)&&(this.mainFragLoading=t,this.state===nn.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:r,part:i}=t;if(r.type!==Qn.AUDIO){!this.audioOnly&&r.type===Qn.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Ji(r)){this.fragPrevious=r;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(Te.AUDIO_TRACK_SWITCHED,ai({},o)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,t){var r;if(t.fatal){this.state=nn.ERROR;return}switch(t.details){case It.FRAG_GAP:case It.FRAG_PARSING_ERROR:case It.FRAG_DECRYPT_ERROR:case It.FRAG_LOAD_ERROR:case It.FRAG_LOAD_TIMEOUT:case It.KEY_LOAD_ERROR:case It.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Qn.AUDIO,t);break;case It.AUDIO_TRACK_LOAD_ERROR:case It.AUDIO_TRACK_LOAD_TIMEOUT:case It.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===nn.WAITING_TRACK&&((r=t.context)==null?void 0:r.type)===Cr.AUDIO_TRACK&&(this.state=nn.IDLE);break;case It.BUFFER_ADD_CODEC_ERROR:case It.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case It.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case It.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==hi.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==hi.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===nn.ENDED&&(this.state=nn.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,t,Qn.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:i}=this,{remuxResult:o,chunkMeta:l}=e,d=this.getCurrentContext(l);if(!d){this.resetWhenMissingContext(l);return}const{frag:c,part:f,level:m}=d,{details:g}=m,{audio:p,text:y,id3:v,initSegment:A}=o;if(this.fragContextChanged(c)||!g){this.fragmentTracker.removeFragment(c);return}if(this.state=nn.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),A!=null&&A.tracks){const I=c.initSegment||c;if(this.unhandledEncryptionError(A,c))return;this._bufferInitSegment(m,A.tracks,I,l),i.trigger(Te.FRAG_PARSING_INIT_SEGMENT,{frag:I,id:r,tracks:A.tracks})}if(p){const{startPTS:I,endPTS:P,startDTS:U,endDTS:M}=p;f&&(f.elementaryStreams[hi.AUDIO]={startPTS:I,endPTS:P,startDTS:U,endDTS:M}),c.setElementaryStreamInfo(hi.AUDIO,I,P,U,M),this.bufferFragmentData(p,c,f,l)}if(v!=null&&(t=v.samples)!=null&&t.length){const I=si({id:r,frag:c,details:g},v);i.trigger(Te.FRAG_PARSING_METADATA,I)}if(y){const I=si({id:r,frag:c,details:g},y);i.trigger(Te.FRAG_PARSING_USERDATA,I)}}_bufferInitSegment(e,t,r,i){if(this.state!==nn.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const o=t.audio;o.id=Qn.AUDIO;const l=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${l}/${o.codec}]`),l&&l.split(",").length===1&&(o.levelCodec=l),this.hls.trigger(Te.BUFFER_CODECS,t);const d=o.initSegment;if(d!=null&&d.byteLength){const c={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:d};this.hls.trigger(Te.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===oa.NOT_LOADED||i===oa.PARTIAL){var o;if(!Ji(e))this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=nn.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragmentStart!==t.details.fragmentStart&&O0(t.details,l)}else super.loadFragment(e,t,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:r,assocLang:i,characteristics:o,audioCodec:l,channels:d}=this.bufferedTrack;hf({name:t,lang:r,assocLang:i,characteristics:o,audioCodec:l,channels:d},e,Nc)||(D0(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Te.AUDIO_TRACK_SWITCHED,ai({},e))}}class Qw extends Ao{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const i=t==null?void 0:t.renditionReports;if(i){let o=-1;for(let l=0;l<i.length;l++){const d=i[l];let c;try{c=new self.URL(d.URI,t.url).href}catch(f){this.warn(`Could not construct new URL for Rendition Report: ${f}`),c=d.URI||""}if(c===e){o=l;break}else c===e.substring(0,c.length)&&(o=l)}if(o!==-1){const l=i[o],d=parseInt(l["LAST-MSN"])||t.lastPartSn;let c=parseInt(l["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const m=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&m>t.partTarget&&(c+=1)}const f=r&&tR(r);return new nR(d,c>=0?c:void 0,f)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,t,r){const{details:i,stats:o}=t,l=self.performance.now(),d=o.loading.first?Math.max(0,l-o.loading.first):0;i.advancedDateTime=Date.now()-d;const c=this.hls.config.timelineOffset;if(c!==i.appliedTimelineOffset){const m=Math.max(c||0,0);i.appliedTimelineOffset=m,i.fragments.forEach(g=>{g.setStart(g.playlistOffset+m)})}if(i.live||r!=null&&r.live){const m="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(r),r&&i.fragments.length>0){GF(r,i,this);const U=i.playlistParsingError;if(U){this.warn(U);const M=this.hls;if(!M.config.ignorePlaylistParsingErrors){var f;const{networkDetails:B}=t;M.trigger(Te.ERROR,{type:Zn.NETWORK_ERROR,details:It.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:U,reason:U.message,level:t.level||void 0,parent:(f=i.fragments[0])==null?void 0:f.type,networkDetails:B,stats:o});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=o.loading.start);const g=this.hls.mainForwardBufferInfo,p=g?g.end-g.len:0,y=(i.edge-p)*1e3,v=lL(i,y);if(i.requestScheduled+v<l?i.requestScheduled=l:i.requestScheduled+=v,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let A,I,P;if(i.canBlockReload&&i.endSN&&i.advanced){const U=this.hls.config.lowLatencyMode,M=i.lastPartSn,B=i.endSN,ie=i.lastPartIndex,L=ie!==-1,w=M===B;L?w?(I=B+1,P=U?0:ie):(I=M,P=U?ie+1:i.maxPartIndex):I=B+1;const O=i.age,oe=O+i.ageHeader;let D=Math.min(oe-i.partTarget,i.targetduration*1.5);if(D>0){if(oe>i.targetduration*3)this.log(`Playlist last advanced ${O.toFixed(2)}s ago. Omitting segment and part directives.`),I=void 0,P=void 0;else if(r!=null&&r.tuneInGoal&&oe-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${D} with playlist age: ${i.age}`),D=0;else{const ve=Math.floor(D/i.targetduration);if(I+=ve,P!==void 0){const Le=Math.round(D%i.targetduration/i.partTarget);P+=Le}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${O.toFixed(2)}s goal: ${D} skip sn ${ve} to part ${P}`)}i.tuneInGoal=D}if(A=this.getDeliveryDirectives(i,t.deliveryDirectives,I,P),U||!w){i.requestScheduled=l,this.loadingPlaylist(m,A);return}}else(i.canBlockReload||i.canSkipUntil)&&(A=this.getDeliveryDirectives(i,t.deliveryDirectives,I,P));A&&I!==void 0&&i.canBlockReload&&(i.requestScheduled=o.loading.first+Math.max(v-d*2,v/2)),this.scheduleLoading(m,A,i)}else this.clearTimer()}scheduleLoading(e,t,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,t);return}const o=self.performance.now(),l=i.requestScheduled;if(o>=l){this.loadingPlaylist(e,t);return}const d=l-o;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(d)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),d)}getDeliveryDirectives(e,t,r,i){let o=tR(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,o=db.No),new nR(r,i,o)}checkRetry(e){const t=e.details,r=N0(e),i=e.errorAction,{action:o,retryCount:l=0,retryConfig:d}=i||{},c=!!i&&!!d&&(o===Oa.RetryRequest||!i.resolved&&o===Oa.SendAlternateToPenaltyBox);if(c){var f;if(l>=d.maxNumRetry)return!1;if(r&&(f=e.context)!=null&&f.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${d.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const m=Fw(d,l);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),m),this.warn(`Retrying playlist loading ${l+1}/${d.maxNumRetry} after "${t}" in ${m}ms`)}e.levelRetry=!0,i.resolved=!0}return c}}function PL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!wv(n[t].attrs,e[t].attrs))return!1;return!0}function wv(n,e,t){const r=n["STABLE-RENDITION-ID"];return r&&!t?r===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>n[i]!==e[i])}function nA(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class JU extends Qw{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Te.LEVEL_LOADING,this.onLevelLoading,this),e.on(Te.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Te.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Te.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Te.LEVEL_LOADING,this.onLevelLoading,this),e.off(Te.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Te.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Te.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:i,details:o}=t,l=this.tracksInGroup[r];if(!l||l.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${l==null?void 0:l.groupId}`);return}const d=l.details;l.details=t.details,this.log(`Audio track ${r} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,d)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,i=this.groupIds;let o=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(d=>(i==null?void 0:i.indexOf(d))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const d=this.tracks.filter(p=>!r||r.indexOf(p.groupId)!==-1);if(d.length)this.selectDefaultTrack&&!d.some(p=>p.default)&&(this.selectDefaultTrack=!1),d.forEach((p,y)=>{p.id=y});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=d;const c=this.hls.config.audioPreference;if(!o&&c){const p=dl(c,d,Nc);if(p>-1)o=d[p];else{const y=dl(c,this.tracks);o=this.tracks[y]}}let f=this.findTrackId(o);f===-1&&o&&(f=this.findTrackId(null));const m={audioTracks:d};this.log(`Updating audio tracks, ${d.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(Te.AUDIO_TRACKS_UPDATED,m);const g=this.trackId;if(f!==-1&&g===-1)this.setAudioTrack(f);else if(d.length&&g===-1){var l;const p=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${d.length}`);this.warn(p.message),this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,t){t.fatal||!t.context||t.context.type===Cr.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&hf(e,i,Nc))return i;const o=dl(e,this.tracksInGroup,Nc);if(o>-1){const l=this.tracksInGroup[o];return this.setAudioTrack(o),l}else if(i){let l=t.loadLevel;l===-1&&(l=t.firstAutoLevel);const d=dF(e,t.levels,r,l,Nc);if(d===-1)return null;t.nextLoadLevel=d}if(e.channels||e.audioCodec){const l=dl(e,r);if(l>-1)return r[l]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e],o=i.details&&!i.details.live;if(e===this.trackId&&i===r&&o||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(Te.AUDIO_TRACK_SWITCHING,ai({},i)),o))return;const l=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(l)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||hf(e,i,Nc)))return r}if(e){const{name:r,lang:i,assocLang:o,characteristics:l,audioCodec:d,channels:c}=e;for(let f=0;f<t.length;f++){const m=t[f];if(hf({name:r,lang:i,assocLang:o,characteristics:l,audioCodec:d,channels:c},m,Nc))return f}for(let f=0;f<t.length;f++){const m=t[f];if(wv(e.attrs,m.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return f}for(let f=0;f<t.length;f++){const m=t[f];if(wv(e.attrs,m.attrs,["LANGUAGE"]))return f}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&D0(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),l=e.details,d=l==null?void 0:l.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${d&&l.live?" age "+d.toFixed(1)+(l.type&&" "+l.type||""):""} ${o}`),this.hls.trigger(Te.AUDIO_TRACK_LOADING,{url:o,id:r,groupId:i,deliveryDirectives:t||null,track:e})}}class e3{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!r&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const r={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const r={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const r=(t=e[0])==null?void 0:t.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(o){var r;if(i.onError(o),this.queues===null||this.tracks===null)return;const l=(r=this.tracks[e])==null?void 0:r.buffer;l!=null&&l.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,r;return(t=this.queues)!=null&&t[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const r=(t=this.tracks)==null?void 0:t[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(r=>r.label).join(", "))||""}}const FR=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,ML="HlsJsTrackRemovedError";class t3 extends Error{constructor(e){super(e),this.name=ML}}class n3 extends Ao{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:o}=this;r&&this.log("Media source opened"),!(!i||!o)&&(o.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Te.MEDIA_ATTACHED,{media:i,mediaSource:o}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=R2(Nd(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Te.BUFFER_RESET,this.onBufferReset,this),e.on(Te.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Te.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Te.BUFFER_EOS,this.onBufferEos,this),e.on(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Te.FRAG_PARSED,this.onFragParsed,this),e.on(Te.FRAG_CHANGED,this.onFragChanged,this),e.on(Te.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Te.BUFFER_RESET,this.onBufferReset,this),e.off(Te.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Te.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Te.BUFFER_EOS,this.onBufferEos,this),e.off(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Te.FRAG_PARSED,this.onFragParsed,this),e.off(Te.FRAG_CHANGED,this.onFragChanged,this),e.off(Te.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const r={};if(this.operationQueue){const o=this.isUpdating();o||this.operationQueue.removeBlockers();const l=this.isQueued();(o||l)&&this.warn(`Transfering MediaSource with${l?" operations in queue":""}${o?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?si(r,i.tracks):this.sourceBuffers.forEach(o=>{const[l]=o;l&&(r[l]=si({},this.tracks[l]),this.removeBuffer(l)),o[0]=o[1]=null}),{media:e,mediaSource:t,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var r;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const r=this.media=t.media;this.transferData=this.overrides=void 0;const i=Nd(this.appendSource);if(i){const o=!!t.mediaSource;(o||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const l=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(l),o)this._objectUrl=r.src,this.attachTransferred();else{const d=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{r.removeAttribute("src");const c=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||c&&l instanceof c,UR(r),r3(r,d),r.load()}catch{r.src=d}else r.src=d}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,r;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const r=this.tracks,i=t.tracks,o=i?Object.keys(i):null,l=o?o.length:0,d=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&o&&l){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ii(r,(c,f)=>c==="initSegment"?void 0:f)};
transfer tracks: ${Ii(i,(c,f)=>c==="initSegment"?void 0:f)}}`),!FC(i,r)){t.mediaSource=null,t.tracks=void 0;const c=e.currentTime,f=this.details,m=Math.max(c,(f==null?void 0:f.fragments[0].start)||0);if(m-c>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${c} -> ${m}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${m} currentTime: ${c}`),this.onMediaDetaching(Te.MEDIA_DETACHING,{}),this.onMediaAttaching(Te.MEDIA_ATTACHING,t),e.currentTime=m;return}this.transferData=void 0,o.forEach(c=>{const f=c,m=i[f];if(m){const g=m.buffer;if(g){const p=this.fragmentTracker,y=m.id;if(p.hasFragments(y)||p.hasParts(y)){const I=pr.getBuffered(g);p.detectEvictedFragments(f,I,y,null,!0)}const v=F_(f),A=[f,g];this.sourceBuffers[v]=A,g.updating&&this.operationQueue&&this.operationQueue.prependBlocker(f),this.trackSourceBuffer(f,m)}}}),d(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),d()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const r=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:o,_objectUrl:l}=this;if(o){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([d])=>{d&&this.removeBuffer(d)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const d=o.readyState==="open";try{const c=o.sourceBuffers;for(let f=c.length;f--;)d&&c[f].abort(),o.removeSourceBuffer(c[f]);d&&o.endOfStream()}catch(c){this.warn(`onMediaDetaching: ${c.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(l&&self.URL.revokeObjectURL(l),this.mediaSrc===l?(i.removeAttribute("src"),this.appendSource&&UR(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Te.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const r=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(o){this.warn(`onBufferReset ${e}`,o)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[F_(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new e3(this.tracks)}onBufferCodecs(e,t){const r=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),l=!o&&this.sourceBufferCount&&this.media&&i.some(d=>!r[d]);if(o||l){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`);return}i.forEach(d=>{var c,f;const m=t[d],{id:g,codec:p,levelCodec:y,container:v,metadata:A,supplemental:I}=m;let P=r[d];const U=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[d],M=U!=null&&U.buffer?U:P,B=(M==null?void 0:M.pendingCodec)||(M==null?void 0:M.codec),ie=M==null?void 0:M.levelCodec;P||(P=r[d]={buffer:void 0,listeners:[],codec:p,supplemental:I,container:v,levelCodec:y,metadata:A,id:g});const L=ub(B,ie),w=L==null?void 0:L.replace(FR,"$1");let O=ub(p,y);const oe=(f=O)==null?void 0:f.replace(FR,"$1");O&&L&&w!==oe&&(d.slice(0,5)==="audio"&&(O=C0(O,this.appendSource)),this.log(`switching codec ${B} to ${O}`),O!==(P.pendingCodec||P.codec)&&(P.pendingCodec=O),P.container=v,this.appendChangeType(d,v,O))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const r=this.tracks[t];return e[t]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,t,r){const i=`${t};codecs=${r}`,o={label:`change-type=${i}`,execute:()=>{const l=this.tracks[e];if(l){const d=l.buffer;d!=null&&d.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),d.changeType(i),l.codec=r,l.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn(`Failed to change ${e} SourceBuffer type`,l)}};this.append(o,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const r=e.start,i=r+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(r,Qn.MAIN))==null?void 0:t.gap)===!0)return;const l={label:"block-audio",execute:()=>{var d;const c=this.tracks.video;(this.lastVideoAppendEnd>i||c!=null&&c.buffer&&pr.isBuffered(c.buffer,i)||((d=this.fragmentTracker.getAppendedFrag(i,Qn.MAIN))==null?void 0:d.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:d=>{this.warn("Error executing block-audio operation",d)}};this.blockedAudioAppend={op:l,frag:e},this.append(l,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:i,type:o,parent:l,frag:d,part:c,chunkMeta:f,offset:m}=t,g=f.buffering[o],{sn:p,cc:y}=d,v=self.performance.now();g.start=v;const A=d.stats.buffering,I=c?c.stats.buffering:null;A.start===0&&(A.start=v),I&&I.start===0&&(I.start=v);const P=r.audio;let U=!1;o==="audio"&&(P==null?void 0:P.container)==="audio/mpeg"&&(U=!this.lastMpegAudioChunk||f.id===1||this.lastMpegAudioChunk.sn!==f.sn,this.lastMpegAudioChunk=f);const M=r.video,B=M==null?void 0:M.buffer;if(B&&p!=="initSegment"){const w=c||d,O=this.blockedAudioAppend;if(o==="audio"&&l!=="main"&&!this.blockedAudioAppend&&!(M.ending||M.ended)){const D=w.start+w.duration*.05,ve=B.buffered,Le=this.currentOp("video");!ve.length&&!Le?this.blockAudio(w):!Le&&!pr.isBuffered(B,D)&&this.lastVideoAppendEnd<D&&this.blockAudio(w)}else if(o==="video"){const oe=w.end;if(O){const D=O.frag.start;(oe>D||oe<this.lastVideoAppendEnd||pr.isBuffered(B,D))&&this.unblockAudio()}this.lastVideoAppendEnd=oe}}const ie=(c||d).start,L={label:`append-${o}`,execute:()=>{var w;g.executeStart=self.performance.now();const O=(w=this.tracks[o])==null?void 0:w.buffer;O&&(U?this.updateTimestampOffset(O,ie,.1,o,p,y):m!==void 0&&Fn(m)&&this.updateTimestampOffset(O,m,1e-6,o,p,y)),this.appendExecutor(i,o)},onStart:()=>{},onComplete:()=>{const w=self.performance.now();g.executeEnd=g.end=w,A.first===0&&(A.first=w),I&&I.first===0&&(I.first=w);const O={};this.sourceBuffers.forEach(([oe,D])=>{oe&&(O[oe]=pr.getBuffered(D))}),this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Te.BUFFER_APPENDED,{type:o,frag:d,part:c,chunkMeta:f,parent:d.type,timeRanges:O})},onError:w=>{var O;const oe={type:Zn.MEDIA_ERROR,parent:d.type,details:It.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:d,part:c,chunkMeta:f,error:w,err:w,fatal:!1},D=(O=this.media)==null?void 0:O.error;if(w.code===DOMException.QUOTA_EXCEEDED_ERR||w.name=="QuotaExceededError"||"quota"in w)oe.details=It.BUFFER_FULL_ERROR;else if(w.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!D)oe.errorAction=Tv(!0);else if(w.name===ML&&this.sourceBufferCount===0)oe.errorAction=Tv(!0);else{const ve=++this.appendErrors[o];this.warn(`Failed ${ve}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer (${D||"no media error"})`),(ve>=this.hls.config.appendErrorMaxRetry||D)&&(oe.fatal=!0)}this.hls.trigger(Te.ERROR,oe)}};this.append(L,o,this.isPending(this.tracks[o]))}getFlushOp(e,t,r){return this.log(`queuing "${e}" remove ${t}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Te.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:r,startOffset:i,endOffset:o}=t;r?this.append(this.getFlushOp(r,i,o),r):this.sourceBuffers.forEach(([l])=>{l&&this.append(this.getFlushOp(l,i,o),l)})}onFragParsed(e,t){const{frag:r,part:i}=t,o=[],l=i?i.elementaryStreams:r.elementaryStreams;l[hi.AUDIOVIDEO]?o.push("audiovideo"):(l[hi.AUDIO]&&o.push("audio"),l[hi.VIDEO]&&o.push("video"));const d=()=>{const c=self.performance.now();r.stats.buffering.end=c,i&&(i.stats.buffering.end=c);const f=i?i.stats:r.stats;this.hls.trigger(Te.FRAG_BUFFERED,{frag:r,part:i,stats:f,id:r.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(d,o).catch(c=>{this.warn(`Fragment buffered callback ${c}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var r;this.sourceBuffers.forEach(([l])=>{if(l){const d=this.tracks[l];(!t.type||t.type===l)&&(d.ending=!0,d.ended||(d.ended=!0,this.log(`${l} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([l])=>{var d;return l&&!((d=this.tracks[l])!=null&&d.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:l}=this;if(!l||l.readyState!=="open"){l&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${l.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),l.endOfStream(),this.hls.trigger(Te.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(Te.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===It.BUFFER_APPEND_ERROR&&t.frag){var r;const i=(r=t.errorAction)==null?void 0:r.nextAutoLevel;Fn(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||t===null||!this.sourceBufferCount)return;const i=e.config,o=r.currentTime,l=t.levelTargetDuration,d=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Fn(d)&&d>=0){const f=Math.max(d,l),m=Math.floor(o/l)*l-f;this.flushBackBuffer(o,l,m)}const c=i.frontBufferFlushThreshold;if(Fn(c)&&c>0){const f=Math.max(i.maxBufferLength,c),m=Math.max(f,l),g=Math.floor(o/l)*l+m;this.flushFrontBuffer(o,l,g)}}flushBackBuffer(e,t,r){this.sourceBuffers.forEach(([i,o])=>{if(o){const d=pr.getBuffered(o);if(d.length>0&&r>d.start(0)){var l;this.hls.trigger(Te.BACK_BUFFER_REACHED,{bufferEnd:r});const c=this.tracks[i];if((l=this.details)!=null&&l.live)this.hls.trigger(Te.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(c!=null&&c.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Te.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,t,r){this.sourceBuffers.forEach(([i,o])=>{if(o){const l=pr.getBuffered(o),d=l.length;if(d<2)return;const c=l.start(d-1),f=l.end(d-1);if(r>c||e>=c&&e<=f)return;this.hls.trigger(Te.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&r.setLiveSeekableRange){const f=Math.max(0,t.fragmentStart),m=Math.max(f,i);return{duration:1/0,start:f,end:m}}return{duration:1/0}}const o=(e=this.overrides)==null?void 0:e.duration;if(o)return Fn(o)?{duration:o}:null;const l=this.media.duration,d=Fn(r.duration)?r.duration:0;return i>d&&i>l||!Fn(l)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Fn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${r}.`),i.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ii(r)}`),this.tracksReady){var i;const o=(i=this.transferData)==null?void 0:i.tracks;o&&Object.keys(o).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,r])=>{if(t){const i=this.tracks[t];e[t]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(Te.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const o in e){const l=o,d=e[l];if(this.isPending(d)){const c=this.getTrackCodec(d,l),f=`${d.container};codecs=${c}`;d.codec=c,this.log(`creating sourceBuffer(${f})${this.currentOp(l)?" Queued":""} ${Ii(d)}`);try{const m=r.addSourceBuffer(f),g=F_(l),p=[l,m];t[g]=p,d.buffer=m}catch(m){var i;this.error(`error while trying to add sourceBuffer: ${m.message}`),this.shiftAndExecuteNext(l),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[l],this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:m,sourceBufferName:l,mimeType:f,parent:d.id});return}this.trackSourceBuffer(l,d)}}this.bufferCreated()}getTrackCodec(e,t){const r=e.supplemental;let i=e.codec;r&&(t==="video"||t==="audiovideo")&&KS(r,"video")&&(i=K2(i,r));const o=ub(i,e.levelCodec);return o?t.slice(0,5)==="audio"?C0(o,this.appendSource):o:""}trackSourceBuffer(e,t){const r=t.buffer;if(!r)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:r,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(o,l)=>{const d=l.removedRanges;d!=null&&d.length&&this.hls.trigger(Te.BUFFER_FLUSHED,{type:o})})}get mediaSrc(){var e,t;const r=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,t),this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const o=this.currentOp(e);o&&o.onError(i)}updateTimestampOffset(e,t,r,i,o,l){const d=t-e.timestampOffset;Math.abs(d)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${o} cc: ${l})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:i,mediaSource:o}=this,l=this.tracks[e],d=l==null?void 0:l.buffer;if(!i||!o||!d){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const c=Fn(i.duration)?i.duration:1/0,f=Fn(o.duration)?o.duration:1/0,m=Math.max(0,t),g=Math.min(r,c,f);g>m&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${m},${g}] from the ${e} SourceBuffer`),d.remove(m,g)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.tracks[t],i=r==null?void 0:r.buffer;if(!i)throw new t3(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=t.map(l=>this.appendBlocker(l));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(l=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var r;const i=(r=this.tracks[t])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,r){const i=this.tracks[e];if(!i)return;const o=i.buffer;if(!o)return;const l=r.bind(this,e);i.listeners.push({event:t,listener:l}),o.addEventListener(t,l)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const r=t.buffer;r&&(t.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function UR(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function r3(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function F_(n){return n==="audio"?1:0}class Xw{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Te.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Te.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Te.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Te.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Fn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((i,o)=>this.isLevelAllowed(i)&&o<=e);return this.clientRect=null,Xw.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,!t.width&&!t.height&&(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,t,r){if(!(e!=null&&e.length))return-1;const i=(d,c)=>c?d.width!==c.width||d.height!==c.height:!0;let o=e.length-1;const l=Math.max(t,r);for(let d=0;d<e.length;d+=1){const c=e[d];if((c.width>=l||c.height>=l)&&i(c,e[d+1])){o=d;break}}return o}}const i3={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ja=i3,a3={HLS:"h"},s3=a3;class vl{constructor(e,t){Array.isArray(e)&&(e=e.map(r=>r instanceof vl?r:new vl(r))),this.value=e,this.params=t}}const o3="Dict";function l3(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function u3(n,e,t,r){return new Error(`failed to ${n} "${l3(e)}" as ${t}`,{cause:r})}function yl(n,e,t){return u3("serialize",n,e,t)}class OL{constructor(e){this.description=e}}const zR="Bare Item",d3="Boolean";function c3(n){if(typeof n!="boolean")throw yl(n,d3);return n?"?1":"?0"}function f3(n){return btoa(String.fromCharCode(...n))}const h3="Byte Sequence";function m3(n){if(ArrayBuffer.isView(n)===!1)throw yl(n,h3);return`:${f3(n)}:`}const g3="Integer";function p3(n){return n<-999999999999999||999999999999999<n}function FL(n){if(p3(n))throw yl(n,g3);return n.toString()}function v3(n){return`@${FL(n.getTime()/1e3)}`}function UL(n,e){if(n<0)return-UL(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const i=Math.floor(n*t);return(i%2===0?i:i+1)/t}else return Math.round(n*t)/t}const y3="Decimal";function E3(n){const e=UL(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw yl(n,y3);const t=e.toString();return t.includes(".")?t:`${t}.0`}const b3="String",T3=/[\x00-\x1f\x7f]+/;function _3(n){if(T3.test(n))throw yl(n,b3);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function S3(n){return n.description||n.toString().slice(7,-1)}const A3="Token";function BR(n){const e=S3(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw yl(e,A3);return e}function rA(n){switch(typeof n){case"number":if(!Fn(n))throw yl(n,zR);return Number.isInteger(n)?FL(n):E3(n);case"string":return _3(n);case"symbol":return BR(n);case"boolean":return c3(n);case"object":if(n instanceof Date)return v3(n);if(n instanceof Uint8Array)return m3(n);if(n instanceof OL)return BR(n);default:throw yl(n,zR)}}const w3="Key";function iA(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw yl(n,w3);return n}function Zw(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${iA(e)}`:`;${iA(e)}=${rA(t)}`).join("")}function zL(n){return n instanceof vl?`${rA(n.value)}${Zw(n.params)}`:rA(n)}function I3(n){return`(${n.value.map(zL).join(" ")})${Zw(n.params)}`}function k3(n,e={whitespace:!0}){if(typeof n!="object"||n==null)throw yl(n,o3);const t=n instanceof Map?n.entries():Object.entries(n),r=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,o])=>{o instanceof vl||(o=new vl(o));let l=iA(i);return o.value===!0?l+=Zw(o.params):(l+="=",Array.isArray(o.value)?l+=I3(o):l+=zL(o)),l}).join(`,${r}`)}function BL(n,e){return k3(n,e)}const zo="CMCD-Object",Ni="CMCD-Request",wc="CMCD-Session",qu="CMCD-Status",R3={br:zo,ab:zo,d:zo,ot:zo,tb:zo,tpb:zo,lb:zo,tab:zo,lab:zo,url:zo,pb:Ni,bl:Ni,tbl:Ni,dl:Ni,ltc:Ni,mtp:Ni,nor:Ni,nrr:Ni,rc:Ni,sn:Ni,sta:Ni,su:Ni,ttfb:Ni,ttfbb:Ni,ttlb:Ni,cmsdd:Ni,cmsds:Ni,smrt:Ni,df:Ni,cs:Ni,ts:Ni,cid:wc,pr:wc,sf:wc,sid:wc,st:wc,v:wc,msd:wc,bs:qu,bsd:qu,cdn:qu,rtp:qu,bg:qu,pt:qu,ec:qu,e:qu},x3={REQUEST:Ni};function C3(n){return Object.keys(n).reduce((e,t)=>{var r;return(r=n[t])===null||r===void 0||r.forEach(i=>e[i]=t),e},{})}function L3(n,e){const t={};if(!n)return t;const r=Object.keys(n),i=e?C3(e):{};return r.reduce((o,l)=>{var d;const c=R3[l]||i[l]||x3.REQUEST,f=(d=o[c])!==null&&d!==void 0?d:o[c]={};return f[l]=n[l],o},t)}function D3(n){return["ot","sf","st","e","sta"].includes(n)}function N3(n){return typeof n=="number"?Fn(n):n!=null&&n!==""&&n!==!1}const $L="event";function P3(n,e){const t=new URL(n),r=new URL(e);if(t.origin!==r.origin)return n;const i=t.pathname.split("/").slice(1),o=r.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const mb=n=>Math.round(n),aA=(n,e)=>Array.isArray(n)?n.map(t=>aA(t,e)):n instanceof vl&&typeof n.value=="string"?new vl(aA(n.value,e),n.params):(e.baseUrl&&(n=P3(n,e.baseUrl)),e.version===1?encodeURIComponent(n):n),zE=n=>mb(n/100)*100,M3=(n,e)=>{let t=n;return e.version>=2&&(n instanceof vl&&typeof n.value=="string"?t=new vl([n]):typeof n=="string"&&(t=[n])),aA(t,e)},O3={br:mb,d:mb,bl:zE,dl:zE,mtp:zE,nor:M3,rtp:zE,tb:mb},jL="request",qL="response",Jw=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],F3=["e"],U3=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function AT(n){return U3.test(n)}function z3(n){return Jw.includes(n)||F3.includes(n)||AT(n)}const HL=["d","dl","nor","ot","rtp","su"];function B3(n){return Jw.includes(n)||HL.includes(n)||AT(n)}const $3=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function j3(n){return Jw.includes(n)||HL.includes(n)||$3.includes(n)||AT(n)}const q3=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function H3(n){return q3.includes(n)||AT(n)}const G3={[qL]:j3,[$L]:z3,[jL]:B3};function GL(n,e={}){const t={};if(n==null||typeof n!="object")return t;const r=e.version||n.v||1,i=e.reportingMode||jL,o=r===1?H3:G3[i];let l=Object.keys(n).filter(o);const d=e.filter;typeof d=="function"&&(l=l.filter(d));const c=i===qL||i===$L;c&&!l.includes("ts")&&l.push("ts"),r>1&&!l.includes("v")&&l.push("v");const f=si({},O3,e.formatters),m={version:r,reportingMode:i,baseUrl:e.baseUrl};return l.sort().forEach(g=>{let p=n[g];const y=f[g];if(typeof y=="function"&&(p=y(p,m)),g==="v"){if(r===1)return;p=r}g=="pr"&&p===1||(c&&g==="ts"&&!Fn(p)&&(p=Date.now()),N3(p)&&(D3(g)&&typeof p=="string"&&(p=new OL(p)),t[g]=p))}),t}function V3(n,e={}){const t={};if(!n)return t;const r=GL(n,e),i=L3(r,e==null?void 0:e.customHeaderMap);return Object.entries(i).reduce((o,[l,d])=>{const c=BL(d,{whitespace:!1});return c&&(o[l]=c),o},t)}function K3(n,e,t){return si(n,V3(e,t))}const Y3="CMCD";function W3(n,e={}){return n?BL(GL(n,e),{whitespace:!1}):""}function Q3(n,e={}){if(!n)return"";const t=W3(n,e);return encodeURIComponent(t)}function X3(n,e={}){if(!n)return"";const t=Q3(n,e);return`${Y3}=${t}`}const $R=/CMCD=[^&#]+/;function Z3(n,e,t){const r=X3(e,t);if(!r)return n;if($R.test(n))return n.replace($R,r);const i=n.includes("?")?"&":"?";return`${n}${i}${r}`}class J3{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Ja.MANIFEST,su:!this.initialized})}catch(o){this.hls.logger.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=i=>{try{const{frag:o,part:l}=i,d=this.hls.levels[o.level],c=this.getObjectType(o),f={d:(l||o).duration*1e3,ot:c};(c===Ja.VIDEO||c===Ja.AUDIO||c==Ja.MUXED)&&(f.br=d.bitrate/1e3,f.tb=this.getTopBandwidth(c)/1e3,f.bl=this.getBufferLength(c));const m=l?this.getNextPart(l):this.getNextFrag(o);m!=null&&m.url&&m.url!==o.url&&(f.nor=m.url),this.apply(i,f)}catch(o){this.hls.logger.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;r!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Te.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Te.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,i;this.audioBuffer=(r=t.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:s3.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){si(t,this.createData());const r=t.ot===Ja.INIT||t.ot===Ja.VIDEO||t.ot===Ja.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((l,d)=>(i.includes(d)&&(l[d]=t[d]),l),{}));const o={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),K3(e.headers,t,o)):e.url=Z3(e.url,t,o)}getNextFrag(e){var t;const r=(t=this.hls.levels[e.level])==null?void 0:t.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var t;const{index:r,fragment:i}=e,o=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(o){const{sn:l}=i;for(let d=o.length-1;d>=0;d--){const c=o[d];if(c.index===r&&c.fragment.sn===l)return o[d+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Ja.TIMED_TEXT;if(e.sn==="initSegment")return Ja.INIT;if(t==="audio")return Ja.AUDIO;if(t==="main")return this.hls.audioTracks.length?Ja.VIDEO:Ja.MUXED}getTopBandwidth(e){let t=0,r;const i=this.hls;if(e===Ja.AUDIO)r=i.audioTracks;else{const o=i.maxAutoLevel,l=o>-1?o+1:i.levels.length;r=i.levels.slice(0,l)}return r.forEach(o=>{o.bitrate>t&&(t=o.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,r=e===Ja.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!t?NaN:pr.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new r(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,d){t(o),this.loader.load(o,l,d)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new r(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,d){t(o),this.loader.load(o,l,d)}}}}const ez=3e5;class tz extends Ao{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Te.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Te.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if((r==null?void 0:r.action)===Oa.SendAlternateToPenaltyBox&&r.flags===yo.MoveAllAlternatesMatchingHost){const i=this.levels;let o=this._pathwayPriority,l=this.pathwayId;if(t.context){const{groupId:d,pathwayId:c,type:f}=t.context;d&&i?l=this.getPathwayForGroupId(d,f,l):c&&(l=c)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!o&&i&&(o=this.pathways()),o&&o.length>1&&(this.updatePathwayPriority(o),r.resolved=this.pathwayId!==l),t.details===It.BUFFER_APPEND_ERROR&&!t.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${l} levels: ${i&&i.length} priorities: ${Ii(o)} penalized: ${Ii(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(o=>{i-r[o]>ez&&delete r[o]});for(let o=0;o<e.length;o++){const l=e[o];if(l in r)continue;if(l===this.pathwayId)return;const d=this.hls.nextLoadLevel,c=this.hls.levels[d];if(t=this.getLevelsForPathway(l),t.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,cL(t),this.hls.trigger(Te.LEVELS_UPDATED,{levels:t});const f=this.hls.levels[d];c&&f&&this.levels&&(f.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&f.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${f.bitrate}`),this.hls.nextLoadLevel=d);break}}}getPathwayForGroupId(e,t,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let o=0;o<i.length;o++)if(t===Cr.AUDIO_TRACK&&i[o].hasAudioGroup(e)||t===Cr.SUBTITLE_TRACK&&i[o].hasSubtitleGroup(e))return i[o].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},i={};e.forEach(o=>{const{ID:l,"BASE-ID":d,"URI-REPLACEMENT":c}=o;if(t.some(m=>m.pathwayId===l))return;const f=this.getLevelsForPathway(d).map(m=>{const g=new Di(m.attrs);g["PATHWAY-ID"]=l;const p=g.AUDIO&&`${g.AUDIO}_clone_${l}`,y=g.SUBTITLES&&`${g.SUBTITLES}_clone_${l}`;p&&(r[g.AUDIO]=p,g.AUDIO=p),y&&(i[g.SUBTITLES]=y,g.SUBTITLES=y);const v=VL(m.uri,g["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),A=new bv({attrs:g,audioCodec:m.audioCodec,bitrate:m.bitrate,height:m.height,name:m.name,url:v,videoCodec:m.videoCodec,width:m.width});if(m.audioGroups)for(let I=1;I<m.audioGroups.length;I++)A.addGroupId("audio",`${m.audioGroups[I]}_clone_${l}`);if(m.subtitleGroups)for(let I=1;I<m.subtitleGroups.length;I++)A.addGroupId("text",`${m.subtitleGroups[I]}_clone_${l}`);return A});t.push(...f),jR(this.audioTracks,r,c,l),jR(this.subtitleTracks,i,c,l)})}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;this.loader&&this.loader.destroy(),this.loader=new r(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const m=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+m)}const o={responseType:"json",url:i.href},l=t.steeringManifestLoadPolicy.default,d=l.errorRetry||l.timeoutRetry||{},c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:d.maxNumRetry||0,retryDelay:d.retryDelayMs||0,maxRetryDelay:d.maxRetryDelayMs||0},f={onSuccess:(m,g,p,y)=>{this.log(`Loaded steering manifest: "${i}"`);const v=m.data;if((v==null?void 0:v.VERSION)!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":A,"PATHWAY-CLONES":I,"PATHWAY-PRIORITY":P}=v;if(A)try{this.uri=new self.URL(A,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${A}`);return}this.scheduleRefresh(this.uri||p.url),I&&this.clonePathways(I);const U={steeringManifest:v,url:i.toString()};this.hls.trigger(Te.STEERING_MANIFEST_LOADED,U),P&&this.updatePathwayPriority(P)},onError:(m,g,p,y)=>{if(this.log(`Error loading steering manifest: ${m.code} ${m.text} (${g.url})`),this.stopLoad(),m.code===410){this.enabled=!1,this.log(`Steering manifest ${g.url} no longer available`);return}let v=this.timeToLoad*1e3;if(m.code===429){const A=this.loader;if(typeof(A==null?void 0:A.getResponseHeader)=="function"){const I=A.getResponseHeader("Retry-After");I&&(v=parseFloat(I)*1e3)}this.log(`Steering manifest ${g.url} rate limited`);return}this.scheduleRefresh(this.uri||g.url,v)},onTimeout:(m,g,p)=>{this.log(`Timeout loading steering manifest (${g.url})`),this.scheduleRefresh(this.uri||g.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(o,c,f)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function jR(n,e,t,r){n&&Object.keys(e).forEach(i=>{const o=n.filter(l=>l.groupId===i).map(l=>{const d=si({},l);return d.details=void 0,d.attrs=new Di(d.attrs),d.url=d.attrs.URI=VL(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),d.groupId=d.attrs["GROUP-ID"]=e[i],d.attrs["PATHWAY-ID"]=r,d});n.push(...o)})}function VL(n,e,t,r){const{HOST:i,PARAMS:o,[t]:l}=r;let d;e&&(d=l==null?void 0:l[e],d&&(n=d));const c=new self.URL(n);return i&&!d&&(c.host=i),o&&Object.keys(o).sort().forEach(f=>{f&&c.searchParams.set(f,o[f])}),c.href}function Ss(n,e,t){Ws(n,e,t),n.addEventListener(e,t)}function Ws(n,e,t){n.removeEventListener(e,t)}class mm extends Ao{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=mm.CDMCleanupPromise?[mm.CDMCleanupPromise]:[],this.onMediaEncrypted=t=>{const{initDataType:r,initData:i}=t,o=`"${t.type}" event: init data type: "${r}"`;if(this.debug(o),i!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=Dp(this.config));const d=l.map(x_).filter(c=>!!c);this.keyFormatPromise=this.getKeyFormatPromise(d)}this.keyFormatPromise.then(l=>{const d=cb(l);if(r!=="sinf"||d!==Mi.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${r}" for selected key-system ${d}`);return}let c;try{const y=aa(new Uint8Array(i)),v=$w(JSON.parse(y).sinf),A=GC(v);if(!A)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");c=new Uint8Array(A.subarray(8,24))}catch(y){this.warn(`${o} Failed to parse sinf: ${y}`);return}const f=Xl.hexDump(c),{keyIdToKeySessionPromise:m,mediaKeySessions:g}=this;let p=m[f];for(let y=0;y<g.length;y++){const v=g[y],A=v.decryptdata;if(!A.keyId)continue;const I=Xl.hexDump(A.keyId);if(f===I||A.uri.replace(/-/g,"").indexOf(f)!==-1){if(p=m[I],!p)continue;if(A.pssh)break;delete m[I],A.pssh=new Uint8Array(i),A.keyId=c,p=m[f]=p.then(()=>this.generateRequestWithPreferredKeySession(v,r,i,"encrypted-event-key-match")),p.catch(P=>this.handleError(P));break}}p||this.handleError(new Error(`Key ID ${f} not encountered in playlist. Key-system sessions ${g.length}.`))}).catch(l=>this.handleError(l))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Te.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Te.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Te.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Te.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Te.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Te.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===Mi.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(l,d,c)=>!!l&&c.indexOf(l)===d,i=t.map(l=>l.audioCodec).filter(r),o=t.map(l=>l.videoCodec).filter(r);return i.length+o.length===0&&o.push("avc1.42e01e"),new Promise((l,d)=>{const c=f=>{const m=f.shift();this.getMediaKeysPromise(m,i,o).then(g=>l({keySystem:m,mediaKeys:g})).catch(g=>{f.length?c(f):g instanceof Bs?d(g):d(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_NO_ACCESS,error:g,fatal:!0},g.message))})};c(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return iL===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,t)}getMediaKeysPromise(e,t,r){const i=OF(e,t,r,this.config.drmSystemOptions),o=this.keySystemAccessPromises[e];let l=o==null?void 0:o.keySystemAccess;if(!l){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ii(i)}`),l=this.requestMediaKeySystemAccess(e,i);const d=this.keySystemAccessPromises[e]={keySystemAccess:l};return l.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),l.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const f=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),d.mediaKeys=c.createMediaKeys().then(m=>(this.log(`Media-keys created for "${e}"`),d.hasMediaKeys=!0,f.then(g=>g?this.setMediaKeysServerCertificate(m,e,g):m))),d.mediaKeys.catch(m=>{this.error(`Failed to create media-keys for "${e}"}: ${m}`)}),d.mediaKeys})}return l.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${Xl.hexDump(e.keyId||[])}`);const i=r.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),o="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,o,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Xl.hexDump(e.keyId)}updateKeySession(e,t){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Xl.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>x_(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:r})=>this.attemptSetMediaKeys(t,r))}selectKeySystem(e){return new Promise((t,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const o=x_(i);o?t(o):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=Dp(this.config),r=e.map(cb).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(r)}loadKey(e){const t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),i=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let o=this.keyIdToKeySessionPromise[r];return o||(o=this.getKeySystemForKeyPromise(t).then(({keySystem:d,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(d,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:d,mediaKeys:c,decryptdata:t}))))),(this.keyIdToKeySessionPromise[r]=o.then(d=>{const c="cenc",f=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(d,c,f,"playlist-key")})).catch(d=>this.handleError(d))),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Bs?this.hls.trigger(Te.ERROR,e.data):this.hls.trigger(Te.ERROR,{type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){const i=cb(e.keyFormat),o=i?[i]:Dp(this.config);return this.attemptKeySystemAccess(o)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=Dp(this.config)),e.length===0)throw new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ii({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>r.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,r,i){var o;const l=(o=this.config.drmSystems)==null||(o=o[e.keySystem])==null?void 0:o.generateRequest;if(l)try{const y=l.call(this.hls,t,r,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,r=y.initData?y.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(y){var d;if(this.warn(y.message),(d=this.hls)!=null&&d.config.debug)throw y}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${c} (init data type: ${t} length: ${r?r.byteLength:null})`);const f=new qw,m=e._onmessage=y=>{const v=e.mediaKeysSession;if(!v){f.emit("error",new Error("invalid state"));return}const{messageType:A,message:I}=y;this.log(`"${A}" message event for session "${v.sessionId}" message size: ${I.byteLength}`),A==="license-request"||A==="license-renewal"?this.renewLicense(e,I).catch(P=>{f.eventNames().length?f.emit("error",P):this.handleError(P)}):A==="license-release"?e.keySystem===Mi.FAIRPLAY&&(this.updateKeySession(e,XS("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${A}"`)},g=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){f.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const A=e.keyStatus;f.emit("keyStatus",A),A==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};Ss(e.mediaKeysSession,"message",m),Ss(e.mediaKeysSession,"keystatuseschange",g);const p=new Promise((y,v)=>{f.on("error",v),f.on("keyStatus",A=>{A.startsWith("usable")?y():A==="output-restricted"?v(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):A==="internal-error"?v(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${A}"`)):A==="expired"?v(new Error("key expired while generating request")):this.warn(`unhandled key status change "${A}"`)})});return e.mediaKeysSession.generateRequest(t,r).then(()=>{var y;this.log(`Request generated for key-session "${(y=e.mediaKeysSession)==null?void 0:y.sessionId}" keyId: ${c}`)}).catch(y=>{throw new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_NO_SESSION,error:y,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>p).catch(y=>{throw f.removeAllListeners(),this.removeSession(e),y}).then(()=>(f.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,r)=>{if(typeof r=="string"&&typeof t=="object"){const i=r;r=t,t=i}this.log(`key status change "${t}" for keyStatuses keyId: ${Xl.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Xl.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,r=t.loader,i=new r(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((l,d)=>{const c={responseType:"arraybuffer",url:o},f=t.certLoadPolicy.default,m={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(p,y,v,A)=>{l(p.data)},onError:(p,y,v,A)=>{d(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:ai({url:c.url,data:void 0},p)},`"${e}" certificate request failed (${o}). Status: ${p.code} (${p.text})`))},onTimeout:(p,y,v)=>{d(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(p,y,v)=>{d(new Error("aborted"))}};i.load(c,m,g)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((i,o)=>{e.setServerCertificate(r).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${t}"`),i(e)}).catch(l=>{o(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(r,"application/xml"),o=i.querySelectorAll("HttpHeader");if(o.length>0){let m;for(let g=0,p=o.length;g<p;g++){var l,d;m=o[g];const y=(l=m.querySelector("name"))==null?void 0:l.textContent,v=(d=m.querySelector("value"))==null?void 0:d.textContent;y&&v&&e.setRequestHeader(y,v)}}const c=i.querySelector("Challenge"),f=c==null?void 0:c.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return XS(atob(f))}setupLicenseXHR(e,t,r,i){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,r,i)}).catch(l=>{if(!r.decryptdata)throw l;return e.open("POST",t,!0),o.call(this.hls,e,t,r,i)}).then(l=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise((i,o)=>{const l=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${l}`);const d=new XMLHttpRequest;d.responseType="arraybuffer",d.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(d.readyState===4)if(d.status===200){this._requestLicenseFailureCount=0;let c=d.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const f=this.config.licenseResponseCallback;if(f)try{c=f.call(this.hls,d,l,e)}catch(m){this.error(m)}i(c)}else{const c=r.errorRetry,f=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>f||d.status>=400&&d.status<500)o(new Bs({type:Zn.KEY_SYSTEM_ERROR,details:It.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:d,response:{url:l,data:void 0,code:d.status,text:d.statusText}},`License Request XHR failed (${l}). Status: ${d.status} (${d.statusText})`));else{const m=f-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${m} attempts left`),this.requestLicense(e,t).then(i,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=d,this.setupLicenseXHR(d,l,e,t).then(({xhr:c,licenseChallenge:f})=>{e.keySystem==Mi.PLAYREADY&&(f=this.unpackPlayReadyKeyMessage(c,f)),c.send(f)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,Ss(r,"encrypted",this.onMediaEncrypted),Ss(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Ws(e,"encrypted",this.onMediaEncrypted),Ws(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,_T.clearKeyUriToKeyIdMap();const i=r.length;mm.CDMCleanupPromise=Promise.all(r.map(o=>this.removeSession(o)).concat(t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(o=>{var l;this.log(`Could not clear media keys: ${o}`),(l=this.hls)==null||l.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))).catch(o=>{var l;this.log(`Could not close sessions and clear media keys: ${o}`),(l=this.hls)==null||l.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=t.reduce((i,o)=>(i.indexOf(o.keyFormat)===-1&&i.push(o.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:o}=this.config;return(UF(o)?new Promise((d,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(d)}):Promise.resolve()).catch(d=>{var c;this.log(`Could not remove session: ${d}`),(c=this.hls)==null||c.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${d}`)})}).then(()=>t.close()).catch(d=>{var c;this.log(`Could not close session: ${d}`),(c=this.hls)==null||c.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${d}`)})})}}}mm.CDMCleanupPromise=void 0;class Bs extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class nz{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,r){const i=performance.now();if(t){if(this.lastTime){const o=i-this.lastTime,l=r-this.lastDroppedFrames,d=t-this.lastDecodedFrames,c=1e3*l/o,f=this.hls;if(f.trigger(Te.FPS_DROP,{currentDropped:l,currentDecoded:d,totalDroppedFrames:r}),c>0&&l>f.config.fpsDroppedMonitoringThreshold*d){let m=f.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+m),m>0&&(f.autoLevelCapping===-1||f.autoLevelCapping>=m)&&(m=m-1,f.trigger(Te.FPS_DROP_LEVEL_CAPPING,{level:m,droppedLevel:f.currentLevel}),f.autoLevelCapping=m,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function KL(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function YL(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){ni.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,n.addCue(i)}catch(i){ni.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(n.mode=t)}function lm(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let r=n.cues.length;r--;)e&&n.cues[r].removeEventListener("enter",e),n.removeCue(n.cues[r]);t==="disabled"&&(n.mode=t)}function sA(n,e,t,r){const i=n.mode;if(i==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const o=iz(n.cues,e,t);for(let l=0;l<o.length;l++)(!r||r(o[l]))&&n.removeCue(o[l])}i==="disabled"&&(n.mode=i)}function rz(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let r=0,i=t,o;for(;r<=i;)if(o=Math.floor((i+r)/2),e<n[o].startTime)i=o-1;else if(e>n[o].startTime&&r<t)r=o+1;else return o;return n[r].startTime-e<e-n[i].startTime?r:i}function iz(n,e,t){const r=[],i=rz(n,e);if(i>-1)for(let o=i,l=n.length;o<l;o++){const d=n[o];if(d.startTime>=e&&d.endTime<=t)r.push(d);else if(d.startTime>t)return r}return r}function gb(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(n[t])}return e}class az extends Qw{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const r=gb(this.media.textTracks);for(let o=0;o<r.length;o++)if(r[o].mode==="hidden")t=r[o];else if(r[o].mode==="showing"){t=r[o];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Te.LEVEL_LOADING,this.onLevelLoading,this),e.on(Te.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Te.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Te.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Te.LEVEL_LOADING,this.onLevelLoading,this),e.off(Te.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Te.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Te.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const r=this.media;if(!r)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;gb(r.textTracks).forEach(l=>{lm(l)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:i,details:o}=t,l=this.tracksInGroup[r];if(!l||l.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${l==null?void 0:l.groupId}`);return}const d=l.details;l.details=t.details,this.log(`Subtitle track ${r} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,d)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,i=this.groupIds;let o=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(l=>(i==null?void 0:i.indexOf(l))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(m=>!r||r.indexOf(m.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(m=>m.default)&&(this.selectDefaultTrack=!1),l.forEach((m,g)=>{m.id=g});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const d=this.hls.config.subtitlePreference;if(!o&&d){this.selectDefaultTrack=!1;const m=dl(d,l);if(m>-1)o=l[m];else{const g=dl(d,this.tracks);o=this.tracks[g]}}let c=this.findTrackId(o);c===-1&&o&&(c=this.findTrackId(null));const f={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(Te.SUBTITLE_TRACKS_UPDATED,f),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const o=t[i];if(!(r&&!o.default||!r&&!e)&&(!e||hf(o,e)))return i}if(e){for(let i=0;i<t.length;i++){const o=t[i];if(wv(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const o=t[i];if(wv(e.attrs,o.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(nA(i,e))return r}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Cr.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&hf(e,r))return r;const i=dl(e,this.tracksInGroup);if(i>-1){const o=this.tracksInGroup[i];return this.setSubtitleTrack(i),o}else{if(r)return null;{const o=dl(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),l=e.details,d=l==null?void 0:l.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${d&&l.live?" age "+d.toFixed(1)+(l.type&&" "+l.type||""):""} ${o}`),this.hls.trigger(Te.SUBTITLE_TRACK_LOADING,{url:o,id:r,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=gb(e.textTracks),r=this.currentTrack;let i;if(r&&(i=t.filter(o=>nA(r,o))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==i&&(o.mode="disabled")}),i){const o=this.subtitleDisplay?"showing":"hidden";i.mode!==o&&(i.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Fn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(Te.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&o)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:l,groupId:d="",name:c,type:f,url:m}=i;this.hls.trigger(Te.SUBTITLE_TRACK_SWITCH,{id:l,groupId:d,name:c,type:f,url:m});const g=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(g)}}function sz(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?o:o&3|8).toString(16)})}}}function rv(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const gm=.025;let U0=function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n}({});function oz(n,e,t){return`${n.identifier}-${t+1}-${rv(e)}`}class lz{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return U_(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,r=U_(t,e);return t-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Fn(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return U_(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<gm))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?U0.Range:U0.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return uz(this)}}function U_(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<gm)?e.start:e.start+e.duration}function WL(n,e,t){const r=new self.URL(n,t);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function z_(n,e){for(;(t=n.assetList[++e])!=null&&t.error;)var t;return e}function uz(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function Bh(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class dz{constructor(e,t,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(Te.PLAYOUT_LIMIT_REACHED,{})};const o=this.hls=new e(t);this.interstitial=r,this.assetItem=i;const l=()=>{this.hasDetails=!0};o.once(Te.LEVEL_LOADED,l),o.once(Te.AUDIO_TRACK_LOADED,l),o.once(Te.SUBTITLE_TRACK_LOADED,l),o.on(Te.MEDIA_ATTACHING,(d,{media:c})=>{this.removeMediaListeners(),this.mediaAttached=c,this.interstitial.playoutLimit&&(c.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&o.on(Te.BUFFER_APPENDED,()=>{const m=this.bufferedEnd;this.reachedPlayout(m)&&(this._bufferedEosTime=m,o.trigger(Te.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=WL(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const r=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,o=pr.bufferInfo(e,i,0);return this.getAssetTime(o.end)>=r-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=pr.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const r=t-this.startOffset;if(r>0&&r<e)return r}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const r=e-t;if(Math.abs(r)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=r=>delete r.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,r){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,r){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,r){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Bh(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const qR=.033;class cz extends Ao{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(t===void 0&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&(o=i[r])!=null&&o.event;){var o;r--}return r}findItemIndexAtTime(e,t){const r=this.items;if(r)for(let i=0;i<r.length;i++){let o=r[i];if(t&&t!=="primary"&&(o=o[t]),e===o.start||e>o.start&&e<o.end)return i}return-1}findJumpRestrictedIndex(e,t){const r=this.items;if(r)for(let i=e;i<=t&&r[i];i++){const o=r[i].event;if(o!=null&&o.restrictions.jump&&!o.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var r;if(((r=t[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,t){const r=e.assetList,i=r.length;if(i>1)for(let o=0;o<i;o++){const l=r[o];if(!l.error){const d=l.timelineStart;if(t===d||t>d&&(t<d+(l.duration||0)||o===i-1))return o}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const r=t.assetList,i=r[r.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const r=e.main.details,{dateRanges:i}=r,o=this.events,l=this.parseDateRanges(i,{url:r.url},t),d=Object.keys(i),c=o?o.filter(f=>!d.includes(f.identifier)):[];l.length&&l.sort((f,m)=>{const g=f.cue.pre,p=f.cue.post,y=m.cue.pre,v=m.cue.post;if(g&&!y)return-1;if(y&&!g||p&&!v)return 1;if(v&&!p)return-1;if(!g&&!y&&!p&&!v){const A=f.startTime,I=m.startTime;if(A!==I)return A-I}return f.dateRange.tagOrder-m.dateRange.tagOrder}),this.events=l,c.forEach(f=>{this.removeEvent(f)}),this.updateSchedule(e,c)}updateSchedule(e,t=[],r=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const o=this.items,l=this.parseSchedule(i,e);(r||t.length||(o==null?void 0:o.length)!==l.length||l.some((c,f)=>Math.abs(c.playout.start-o[f].playout.start)>.005||Math.abs(c.playout.end-o[f].playout.end)>.005))&&(this.items=l,this.onScheduleUpdate(t,o))}}parseDateRanges(e,t,r){const i=[],o=Object.keys(e);for(let l=0;l<o.length;l++){const d=o[l],c=e[d];if(c.isInterstitial){let f=this.eventMap[d];f?f.setDateRange(c):(f=new lz(c,t),this.eventMap[d]=f,r===!1&&(f.appendInPlace=r)),i.push(f)}}return i}parseSchedule(e,t){const r=[],i=t.main.details,o=i.live?1/0:i.edge;let l=0;if(e=e.filter(c=>!c.error&&!(c.cue.once&&c.hasPlayed)),e.length){this.resolveOffsets(e,t);let c=0,f=0;if(e.forEach((m,g)=>{const p=m.cue.pre,y=m.cue.post,v=e[g-1]||null,A=m.appendInPlace,I=y?o:m.startOffset,P=m.duration,U=m.timelineOccupancy===U0.Range?P:0,M=m.resumptionOffset,B=(v==null?void 0:v.startTime)===I,ie=I+m.cumulativeDuration;let L=A?ie+P:I+M;if(p||!y&&I<=0){const O=f;f+=U,m.timelineStart=ie;const oe=l;l+=P,r.push({event:m,start:ie,end:L,playout:{start:oe,end:l},integrated:{start:O,end:f}})}else if(I<=o){if(!B){const D=I-c;if(D>qR){const ve=c,Le=f;f+=D;const te=l;l+=D;const $e={previousEvent:e[g-1]||null,nextEvent:m,start:ve,end:ve+D,playout:{start:te,end:l},integrated:{start:Le,end:f}};r.push($e)}else D>0&&v&&(v.cumulativeDuration+=D,r[r.length-1].end=I)}y&&(L=ie),m.timelineStart=ie;const O=f;f+=U;const oe=l;l+=P,r.push({event:m,start:ie,end:L,playout:{start:oe,end:l},integrated:{start:O,end:f}})}else return;const w=m.resumeTime;y||w>o?c=o:c=w}),c<o){var d;const m=c,g=f,p=o-c;f+=p;const y=l;l+=p,r.push({previousEvent:((d=r[r.length-1])==null?void 0:d.event)||null,nextEvent:null,start:c,end:m+p,playout:{start:y,end:l},integrated:{start:g,end:f}})}this.setDurations(o,l,f)}else r.push({previousEvent:null,nextEvent:null,start:0,end:o,playout:{start:0,end:o},integrated:{start:0,end:o}}),this.setDurations(o,o,o);return r}setDurations(e,t,r){this.durations={primary:e,playout:t,integrated:r}}resolveOffsets(e,t){const r=t.main.details,i=r.live?1/0:r.edge;let o=0,l=-1;e.forEach((d,c)=>{const f=d.cue.pre,m=d.cue.post,g=f?0:m?i:d.startTime;this.updateAssetDurations(d),l===g?d.cumulativeDuration=o:(o=0,l=g),!m&&d.snapOptions.in&&(d.resumeAnchor=bf(null,r.fragments,d.startOffset+d.resumptionOffset,0,0)||void 0),d.appendInPlace&&!d.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(d,t)||(d.appendInPlace=!1)),!d.appendInPlace&&c+1<e.length&&e[c+1].startTime-e[c].resumeTime<qR&&(e[c+1].appendInPlace=!1,e[c+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${d}`));const y=Fn(d.resumeOffset)?d.resumeOffset:d.duration;o+=y})}primaryCanResumeInPlaceAt(e,t){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>gm?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(l=>{const d=t[l].details,c=d.edge;if(r>=c)return this.log(`"${e.identifier}" resumption ${r} past ${l} playlist end ${c}`),!1;const f=bf(null,d.fragments,r);if(!f)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${l} playlist (${d.fragStart}-${d.fragmentEnd})`),!0;const m=l==="audio"?.175:0;return Math.abs(f.start-r)<gm+m||Math.abs(f.end-r)<gm+m?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${l} fragment bounds (${f.start}-${f.end} sn: ${f.sn} cc: ${f.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let r=0,i=!1,o=!1;for(let l=0;l<e.assetList.length;l++){const d=e.assetList[l],c=t+r;d.startOffset=r,d.timelineStart=c,i||(i=d.duration===null),o||(o=!!d.error);const f=d.error?0:d.duration||0;r+=f}i&&!o?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Hl(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class fz{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const r=e.assetListUrl;let i;try{i=WL(r,this.hls.sessionId,e.baseUrl)}catch(p){const y=this.assignAssetListError(e,It.ASSET_LIST_LOAD_ERROR,p,r);this.hls.trigger(Te.ERROR,y);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const o=this.hls.config,l=o.loader,d=new l(o),c={responseType:"json",url:i.href},f=o.interstitialAssetListLoadPolicy.default,m={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(p,y,v,A)=>{const I=p.data,P=I==null?void 0:I.ASSETS;if(!Array.isArray(P)){const U=this.assignAssetListError(e,It.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,y,A);this.hls.trigger(Te.ERROR,U);return}e.assetListResponse=I,this.hls.trigger(Te.ASSET_LIST_LOADED,{event:e,assetListResponse:I,networkDetails:A})},onError:(p,y,v,A)=>{const I=this.assignAssetListError(e,It.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${y.url})`),y.url,A,v);this.hls.trigger(Te.ERROR,I)},onTimeout:(p,y,v)=>{const A=this.assignAssetListError(e,It.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${y.url})`),y.url,p,v);this.hls.trigger(Te.ERROR,A)}};return d.load(c,m,g),this.hls.trigger(Te.ASSET_LIST_LOADING,{event:e}),d}assignAssetListError(e,t,r,i,o,l){return e.error=r,{type:Zn.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:r,networkDetails:l,stats:o}}}function HR(n){n==null||n.play().catch(()=>{})}class hz extends Ao{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled||!this.schedule)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const l=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const d=this.playingItem;if(!d){this.checkBuffer();return}if(l&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(!0),this.checkBuffer(),l&&r<d.start||r>=d.end){var c;const y=this.findItemIndex(d);let v=this.schedule.findItemIndexAtTime(r);if(v===-1&&(v=y+(l?-1:1),this.log(`seeked ${l?"back ":""}to position not covered by schedule ${r} (resolving from ${y} to ${v})`)),!this.isInterstitial(d)&&(c=this.media)!=null&&c.paused&&(this.shouldPlay=!1),!l&&v>y){const A=this.schedule.findJumpRestrictedIndex(y+1,v);if(A>y){this.setSchedulePosition(A);return}}this.setSchedulePosition(v);return}const f=this.playingAsset;if(!f){if(this.playingLastItem&&this.isInterstitial(d)){const y=d.event.assetList[0];y&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,y))}return}const m=f.timelineStart,g=f.duration||0;if(l&&r<m||r>=m+g){var p;(p=d.event)!=null&&p.appendInPlace&&(this.clearInterstitial(d.event,d),this.flushFrontBuffer(r)),this.setScheduleToAssetAtTime(r,f)}},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const d=this.findItemIndex(i);this.setSchedulePosition(d+1)}const o=this.playingAsset;if(!o)return;const l=o.timelineStart+(o.duration||0);r>=l&&this.setScheduleToAssetAtTime(r,o)},this.onScheduleUpdate=(r,i)=>{const o=this.schedule;if(!o)return;const l=this.playingItem,d=o.events||[],c=o.items||[],f=o.durations,m=r.map(A=>A.identifier),g=!!(d.length||m.length);(g||i)&&this.log(`INTERSTITIALS_UPDATED (${d.length}): ${d}
Schedule: ${c.map(A=>Hl(A))} pos: ${this.timelinePos}`),m.length&&this.log(`Removed events ${m}`);let p=null,y=null;l&&(p=this.updateItem(l,this.timelinePos),this.itemsMatch(l,p)?this.playingItem=p:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const v=this.bufferingItem;if(v&&(y=this.updateItem(v,this.bufferedPos),this.itemsMatch(v,y)?this.bufferingItem=y:v.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(v.event,null))),r.forEach(A=>{A.assetList.forEach(I=>{this.clearAssetPlayer(I.identifier,null)})}),this.playerQueue.forEach(A=>{if(A.interstitial.appendInPlace){const I=A.assetItem.timelineStart,P=A.timelineOffset-I;if(P)try{A.timelineOffset=I}catch(U){Math.abs(P)>gm&&this.warn(`${U} ("${A.assetId}" ${A.timelineOffset}->${I})`)}}}),g||i){if(this.hls.trigger(Te.INTERSTITIALS_UPDATED,{events:d.slice(0),schedule:c.slice(0),durations:f,removedIds:m}),this.isInterstitial(l)&&m.includes(l.event.identifier)){this.warn(`Interstitial "${l.event.identifier}" removed while playing`),this.primaryFallback(l.event);return}l&&this.trimInPlace(p,l),v&&this.trimInPlace(y,v),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new fz(e),this.schedule=new cz(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Te.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Te.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Te.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Te.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Te.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Te.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Te.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Te.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Te.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Te.MEDIA_ENDED,this.onMediaEnded,this),e.on(Te.ERROR,this.onError,this),e.on(Te.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Te.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Te.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Te.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Te.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Te.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Te.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Te.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Te.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Te.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Te.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Te.MEDIA_ENDED,this.onMediaEnded,this),e.off(Te.ERROR,this.onError,this),e.off(Te.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Ws(e,"play",this.onPlay),Ws(e,"pause",this.onPause),Ws(e,"seeking",this.onSeeking),Ws(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const r=this.media=t.media;Ss(r,"seeking",this.onSeeking),Ss(r,"timeupdate",this.onTimeupdate),Ss(r,"play",this.onPlay),Ss(r,"pause",this.onPause)}onMediaAttached(e,t){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const o=this.findItemIndex(r);this.setSchedulePosition(o)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const r=!!t.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const o=this.getBufferingPlayer();o&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,o.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,r=g=>g&&e.getAssetPlayer(g.identifier),i=(g,p,y,v,A)=>{if(g){let I=g[p].start;const P=g.event;if(P){if(p==="playout"||P.timelineOccupancy!==U0.Point){const U=r(y);(U==null?void 0:U.interstitial)===P&&(I+=U.assetItem.startOffset+U[A])}}else{const U=v==="bufferedPos"?l():e[v];I+=U-g.start}return I}return 0},o=(g,p)=>{var y;if(g!==0&&p!=="primary"&&(y=e.schedule)!=null&&y.length){var v;const A=e.schedule.findItemIndexAtTime(g),I=(v=e.schedule.items)==null?void 0:v[A];if(I){const P=I[p].start-I.start;return g+P}}return g},l=()=>{const g=e.bufferedPos;return g===Number.MAX_VALUE?d("primary"):Math.max(g,0)},d=g=>{var p,y;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:((y=e.schedule)==null?void 0:y.durations[g])||0},c=(g,p)=>{var y,v;const A=e.effectivePlayingItem;if(A!=null&&(y=A.event)!=null&&y.restrictions.skip||!e.schedule)return;e.log(`seek to ${g} "${p}"`);const I=e.effectivePlayingItem,P=e.schedule.findItemIndexAtTime(g,p),U=(v=e.schedule.items)==null?void 0:v[P],M=e.getBufferingPlayer(),B=M==null?void 0:M.interstitial,ie=B==null?void 0:B.appendInPlace,L=I&&e.itemsMatch(I,U);if(I&&(ie||L)){const w=r(e.playingAsset),O=(w==null?void 0:w.media)||e.primaryMedia;if(O){const oe=p==="primary"?O.currentTime:i(I,p,e.playingAsset,"timelinePos","currentTime"),D=g-oe,ve=(ie?oe:O.currentTime)+D;if(ve>=0&&(!w||ie||ve<=w.duration)){O.currentTime=ve;return}}}if(U){let w=g;if(p!=="primary"){const oe=U[p].start,D=g-oe;w=U.start+D}const O=!e.isInterstitial(U);if((!e.isInterstitial(I)||I.event.appendInPlace)&&(O||U.event.appendInPlace)){const oe=e.media||(ie?M==null?void 0:M.media:null);oe&&(oe.currentTime=w)}else if(I){const oe=e.findItemIndex(I);if(P>oe){const ve=e.schedule.findJumpRestrictedIndex(oe+1,P);if(ve>oe){e.setSchedulePosition(ve);return}}let D=0;if(O)e.timelinePos=w,e.checkBuffer();else{const ve=U.event.assetList,Le=g-(U[p]||U).start;for(let te=ve.length;te--;){const $e=ve[te];if($e.duration&&Le>=$e.startOffset&&Le<$e.startOffset+$e.duration){D=te;break}}}e.setSchedulePosition(P,D)}}},f=()=>{const g=e.effectivePlayingItem;if(e.isInterstitial(g))return g;const p=t();return e.isInterstitial(p)?p:null},m={get bufferedEnd(){const g=t(),p=e.bufferingItem;if(p&&p===g){var y;return i(p,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-p.playout.start||((y=e.bufferingAsset)==null?void 0:y.startOffset)||0}return 0},get currentTime(){const g=f(),p=e.effectivePlayingItem;return p&&p===g?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(g){const p=f(),y=e.effectivePlayingItem;y&&y===p&&c(g+y.playout.start,"playout")},get duration(){const g=f();return g?g.playout.end-g.playout.start:0},get assetPlayers(){var g;const p=(g=f())==null?void 0:g.event.assetList;return p?p.map(y=>e.getAssetPlayer(y.identifier)):[]},get playingIndex(){var g;const p=(g=f())==null?void 0:g.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return f()}};return this.manager={get events(){var g;return((g=e.schedule)==null||(g=g.events)==null?void 0:g.slice(0))||[]},get schedule(){var g;return((g=e.schedule)==null||(g=g.items)==null?void 0:g.slice(0))||[]},get interstitialPlayer(){return f()?m:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const g=t();return e.findItemIndex(g)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const g=e.effectivePlayingItem;return e.findItemIndex(g)},primary:{get bufferedEnd(){return l()},get currentTime(){const g=e.timelinePos;return g>0?g:0},set currentTime(g){c(g,"primary")},get duration(){return d("primary")},get seekableStart(){var g;return((g=e.primaryDetails)==null?void 0:g.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(g){c(g,"integrated")},get duration(){return d("integrated")},get seekableStart(){var g;return o(((g=e.primaryDetails)==null?void 0:g.fragmentStart)||0,"integrated")}},skip:()=>{const g=e.effectivePlayingItem,p=g==null?void 0:g.event;if(p&&!p.restrictions.skip){const y=e.findItemIndex(g);if(p.appendInPlace){const v=g.playout.start+g.event.duration;c(v+.001,"playout")}else e.advanceAfterAssetEnded(p,y,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!r?!1:this.findItemIndex(t)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const o=(t=i)==null?void 0:t.currentTime;if(!(o===void 0||!Fn(o)))return o}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)}transferMediaFromPlayer(e,t){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const o=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ii(o)}`),this.detachedData=o}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var r,i;if(e.media===t)return;let o=null;const l=this.hls,d=e!==l,c=d&&e.interstitial.appendInPlace,f=(r=this.detachedData)==null?void 0:r.mediaSource;let m;if(l.media)c&&(o=l.transferMedia(),this.detachedData=o),m="Primary";else if(f){const v=this.getBufferingPlayer();v?(o=v.transferMedia(),m=`${v}`):m="detached MediaSource"}else m="detached media";if(!o){if(f)o=this.detachedData,this.log(`using detachedData: MediaSource ${Ii(o)}`);else if(!this.detachedData||l.media===t){const v=this.playerQueue;v.length>1&&v.forEach(A=>{if(d&&A.interstitial.appendInPlace!==c){const I=A.interstitial;this.clearInterstitial(A.interstitial,null),I.appendInPlace=!1,I.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${I}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const g=o&&"mediaSource"in o&&((i=o.mediaSource)==null?void 0:i.readyState)!=="closed",p=g&&o?o:t;this.log(`${g?"transfering MediaSource":"attaching media"} to ${d?e:"Primary"} from ${m} (media.currentTime: ${t.currentTime})`);const y=this.schedule;if(p===o&&y){const v=d&&e.assetId===y.assetIdAtEnd;p.overrides={duration:y.duration,endOfStream:!d||v,cueRemoval:!d}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e==null?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const o=this.hls.startPosition;if(this.timelinePos=o,t.length&&t[0].cue.pre){const l=e.findEventIndex(t[0].identifier);this.setSchedulePosition(l)}else if(o>=0||!this.primaryLive){const l=this.timelinePos=o>0?o:0,d=e.findItemIndexAtTime(l);this.setSchedulePosition(d)}}else if(i&&!this.playingItem){const o=e.findItemIndex(i);this.setSchedulePosition(o)}}advanceAssetBuffering(e,t){const r=e.event,i=r.findAssetIndex(t),o=z_(r,i);if(!r.isAssetPastPlayoutLimit(o))this.bufferedToEvent(e,o);else if(this.schedule){var l;const d=(l=this.schedule.items)==null?void 0:l[this.findItemIndex(e)+1];d&&this.bufferedToItem(d)}}advanceAfterAssetEnded(e,t,r){const i=z_(e,r);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const o=this.schedule.items;if(o){const l=t+1,d=o.length;if(l>=d){this.setSchedulePosition(-1);return}const c=e.resumeTime;this.timelinePos<c&&(this.timelinePos=c,e.appendInPlace&&this.advanceInPlace(c),this.checkBuffer(this.bufferedPos<c)),this.setSchedulePosition(l)}}}else{if(e.appendInPlace){const o=e.assetList[i];o&&this.advanceInPlace(o.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const r=this.schedule;if(!r)return;const i=t.parentIdentifier,o=r.getEvent(i);if(o){const l=r.findEventIndex(i),d=r.findAssetIndex(o,e);this.advanceAfterAssetEnded(o,l,d-1)}}setSchedulePosition(e,t){var r;const i=(r=this.schedule)==null?void 0:r.items;if(!i||this.playbackDisabled)return;const o=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${o&&Hl(o)})`);const l=this.waitingItem||this.playingItem,d=this.playingLastItem;if(this.isInterstitial(l)){const m=l.event,g=this.playingAsset,p=g==null?void 0:g.identifier,y=p?this.getAssetPlayer(p):null;if(y&&p&&(!this.eventItemsMatch(l,o)||t!==void 0&&p!==m.assetList[t].identifier)){var c;const v=m.findAssetIndex(g);if(this.log(`INTERSTITIAL_ASSET_ENDED ${v+1}/${m.assetList.length} ${Bh(g)}`),this.endedAsset=g,this.playingAsset=null,this.hls.trigger(Te.INTERSTITIAL_ASSET_ENDED,{asset:g,assetListIndex:v,event:m,schedule:i.slice(0),scheduleIndex:e,player:y}),l!==this.playingItem){this.itemsMatch(l,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(m,this.findItemIndex(this.playingItem),v);return}this.retreiveMediaSource(p,o),y.media&&!((c=this.detachedData)!=null&&c.mediaSource)&&y.detachMedia()}if(!this.eventItemsMatch(l,o)&&(this.endedItem=l,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${m} ${Hl(l)}`),m.hasPlayed=!0,this.hls.trigger(Te.INTERSTITIAL_ENDED,{event:m,schedule:i.slice(0),scheduleIndex:e}),m.cue.once)){var f;this.updateSchedule();const v=(f=this.schedule)==null?void 0:f.items;if(o&&v){const A=this.findItemIndex(o);this.advanceSchedule(A,v,t,l,d)}return}}this.advanceSchedule(e,i,t,l,d)}advanceSchedule(e,t,r,i,o){const l=this.schedule;if(!l)return;const d=e>=0?t[e]:null,c=this.primaryMedia,f=this.playerQueue;if(f.length&&f.forEach(m=>{const g=m.interstitial,p=l.findEventIndex(g.identifier);(p<e||p>e+1)&&this.clearInterstitial(g,d)}),this.isInterstitial(d)){this.timelinePos=Math.min(Math.max(this.timelinePos,d.start),d.end);const m=d.event;if(r===void 0){r=l.findAssetIndex(m,this.timelinePos);const v=z_(m,r-1);if(m.isAssetPastPlayoutLimit(v)||m.appendInPlace&&this.timelinePos===d.end){this.advanceAfterAssetEnded(m,e,r);return}r=v}const g=this.waitingItem;this.assetsBuffered(d,c)||this.setBufferingItem(d);let p=this.preloadAssets(m,r);if(this.eventItemsMatch(d,g||i)||(this.waitingItem=d,this.log(`INTERSTITIAL_STARTED ${Hl(d)} ${m.appendInPlace?"append in place":""}`),this.hls.trigger(Te.INTERSTITIAL_STARTED,{event:m,schedule:t.slice(0),scheduleIndex:e})),!m.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${m}`);return}if(m.assetListLoader&&(m.assetListLoader.destroy(),m.assetListLoader=void 0),!c){this.log(`Waiting for attachMedia to start Interstitial ${m}`);return}this.waitingItem=this.endedItem=null,this.playingItem=d;const y=m.assetList[r];if(!y){this.advanceAfterAssetEnded(m,e,r||0);return}if(p||(p=this.getAssetPlayer(y.identifier)),p===null||p.destroyed){const v=m.assetList.length;this.warn(`asset ${r+1}/${v} player destroyed ${m}`),p=this.createAssetPlayer(m,y,r),p.loadSource()}if(!this.eventItemsMatch(d,this.bufferingItem)&&m.appendInPlace&&this.isAssetBuffered(y))return;this.startAssetPlayer(p,r,t,e,c),this.shouldPlay&&HR(p.media)}else d!==null?(this.resumePrimary(d,e,i),this.shouldPlay&&HR(this.hls.media)):o&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(l.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,r){var i,o;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Hl(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let d=this.timelinePos;(d<e.start||d>=e.end)&&(d=this.getPrimaryResumption(e,t),this.timelinePos=d),this.attachPrimary(d,e)}if(!r)return;const l=(o=this.schedule)==null?void 0:o.items;l&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Hl(e)}`),this.hls.trigger(Te.INTERSTITIALS_PRIMARY_RESUMED,{schedule:l.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:pr.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const o=this.hls;o.media?this.checkBuffer():(this.transferMediaTo(o,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,t){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Te.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Te.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const r=this.hls.levels[t.level],i=ai(ai({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const r=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=ai(ai({},this.altSelection),{},{audio:r});return}const o=ai(ai({},i),{},{audio:r});this.mediaSelection=o}onSubtitleTrackUpdated(e,t){const r=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=ai(ai({},this.altSelection),{},{subtitles:r});return}const o=ai(ai({},i),{},{subtitles:r});this.mediaSelection=o}onAudioTrackSwitching(e,t){const r=iR(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(r)))}onSubtitleTrackSwitch(e,t){const r=iR(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(r)))}onBufferCodecs(e,t){const r=t.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const o=t[i];if(o.cue.post){var r;const l=this.schedule.findEventIndex(o.identifier),d=(r=this.schedule.items)==null?void 0:r[l];this.isInterstitial(d)&&this.eventItemsMatch(d,this.bufferingItem)&&this.bufferedToItem(d,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const r=this.findItemIndex(t);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,t){var r;const i=(r=this.schedule)==null?void 0:r.items;if(e&&i){const o=this.findItemIndex(e,t);return i[o]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((o,l)=>{e.event.isAssetPastPlayoutLimit(l)&&this.clearAssetPlayer(o.identifier,null)});const r=e.end+.25,i=pr.bufferInfo(this.primaryMedia,r,0);(i.end>r||(i.nextStart||0)>r)&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var r;return!!t&&(e===t||e.event.identifier===((r=t.event)==null?void 0:r.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const r=this.mediaSelection;r&&((t=this.schedule)==null||t.updateSchedule(r,[],e))}checkBuffer(e){var t;const r=(t=this.schedule)==null?void 0:t.items;if(!r)return;const i=pr.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,r,e)}updateBufferedPos(e,t,r){const i=this.schedule,o=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],o)){this.bufferedPos=e;return}const l=this.playingItem,d=this.findItemIndex(l);let c=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var f;const m=this.findItemIndex(o),g=Math.min(m+1,t.length-1),p=t[g];if((c===-1&&o&&e>=o.end||(f=p.event)!=null&&f.appendInPlace&&e+.01>=p.start)&&(c=g),this.isInterstitial(o)){const y=o.event;if(g-d>1&&y.appendInPlace===!1||y.assetList.length===0&&y.assetListLoader)return}if(this.bufferedPos=e,c>m&&c>d)this.bufferedToItem(p);else{const y=this.primaryDetails;this.primaryLive&&y&&e>y.edge-y.targetduration&&p.start<y.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(p)&&this.preloadAssets(p.event,0)}}else r&&l&&!this.itemsMatch(l,o)&&(c===d?this.bufferedToItem(l):c===d+1&&this.bufferedToItem(t[c]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const o=this.getAssetPlayer(i.identifier);return!(o!=null&&o.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,r=this.schedule;if(!this.itemsMatch(e,t)&&r){const{items:i,events:o}=r;if(!i||!o)return t;const l=this.isInterstitial(e),d=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const c=d?d.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Hl(e)}`+(t?` (${c.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(l){const f=r.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((m,g)=>{const p=this.getAssetPlayer(m.identifier);p&&(g===f&&p.loadSource(),p.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(f=>f.pauseBuffering());this.hls.trigger(Te.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:o.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,t){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,o=r.cue.once;if(i||!o){const l=this.preloadAssets(r,t);if(l!=null&&l.interstitial.appendInPlace){const d=this.primaryMedia;d&&this.bufferAssetPlayer(l,d)}}}preloadAssets(e,t){const r=e.assetUrl,i=e.assetList.length,o=i===0&&!e.assetListLoader,l=e.cue.once;if(o){const c=e.timelineStart;if(e.appendInPlace){var d;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(d=p.nextEvent)==null?void 0:d.identifier)===e.identifier&&this.flushFrontBuffer(c+.25)}let f,m=0;if(!this.playingItem&&this.primaryLive&&(m=this.hls.startPosition,m===-1&&(m=this.hls.liveSyncPosition||0)),m&&!(e.cue.pre||e.cue.post)){const p=m-c;p>0&&(f=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${r?1:i} ${e}${f?` live-start: ${m} start-offset: ${f}`:""}`),r)return this.createAsset(e,0,0,c,e.duration,r);const g=this.assetListLoader.loadAssetList(e,f);g&&(e.assetListLoader=g)}else if(!l&&i){for(let f=t;f<i;f++){const m=e.assetList[f],g=this.getAssetPlayerQueueIndex(m.identifier);(g===-1||this.playerQueue[g].destroyed)&&!m.error&&this.createAssetPlayer(e,m,f)}const c=e.assetList[t];if(c){const f=this.getAssetPlayer(c.identifier);return f&&f.loadSource(),f}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(Te.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let r=0;r<e.length;r++)if(e[r].media===t)return e[r]}return null}createAsset(e,t,r,i,o,l){const d={parentIdentifier:e.identifier,identifier:oz(e,l,t),duration:o,startOffset:r,timelineStart:i,uri:l};return this.createAssetPlayer(e,d,t)}createAssetPlayer(e,t,r){const i=this.hls,o=i.userConfig;let l=o.videoPreference;const d=i.loadLevelObj||i.levels[i.currentLevel];(l||d)&&(l=si({},l),d.videoCodec&&(l.videoCodec=d.videoCodec),d.videoRange&&(l.allowedVideoRanges=[d.videoRange]));const c=i.audioTracks[i.audioTrack],f=i.subtitleTracks[i.subtitleTrack];let m=0;if(this.primaryLive||e.appendInPlace){const B=this.timelinePos-t.timelineStart;if(B>1){const ie=t.duration;ie&&B<ie&&(m=B)}}const g=t.identifier,p=ai(ai({},o),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:g,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:m,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:l,audioPreference:c||o.audioPreference,subtitlePreference:f||o.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(p.timelineOffset=t.timelineStart));const y=p.cmcd;y!=null&&y.sessionId&&y.contentId&&(p.cmcd=si({},y,{contentId:rv(t.uri)})),this.getAssetPlayer(g)&&this.warn(`Duplicate date range identifier ${e} and asset ${g}`);const v=new dz(this.HlsPlayerClass,p,e,t);this.playerQueue.push(v),e.assetList[r]=t;let A=!0;const I=B=>{if(B.live){var ie;const O=new Error(`Interstitials MUST be VOD assets ${e}`),oe={fatal:!0,type:Zn.OTHER_ERROR,details:It.INTERSTITIAL_ASSET_ITEM_ERROR,error:O},D=((ie=this.schedule)==null?void 0:ie.findEventIndex(e.identifier))||-1;this.handleAssetItemError(oe,e,D,r,O.message);return}const L=B.edge-B.fragmentStart,w=t.duration;(A||w===null||L>w)&&(A=!1,this.log(`Interstitial asset "${g}" duration change ${w} > ${L}`),t.duration=L,this.updateSchedule())};v.on(Te.LEVEL_UPDATED,(B,{details:ie})=>I(ie)),v.on(Te.LEVEL_PTS_UPDATED,(B,{details:ie})=>I(ie)),v.on(Te.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const P=(B,ie)=>{const L=this.getAssetPlayer(g);if(L&&ie.tracks){L.off(Te.BUFFER_CODECS,P),L.tracks=ie.tracks;const w=this.primaryMedia;this.bufferingAsset===L.assetItem&&w&&!L.media&&this.bufferAssetPlayer(L,w)}};v.on(Te.BUFFER_CODECS,P);const U=()=>{var B;const ie=this.getAssetPlayer(g);if(this.log(`buffered to end of asset ${ie}`),!ie||!this.schedule)return;const L=this.schedule.findEventIndex(e.identifier),w=(B=this.schedule.items)==null?void 0:B[L];this.isInterstitial(w)&&this.advanceAssetBuffering(w,t)};v.on(Te.BUFFERED_TO_END,U);const M=B=>()=>{if(!this.getAssetPlayer(g)||!this.schedule)return;this.shouldPlay=!0;const L=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,L,B)};return v.once(Te.MEDIA_ENDED,M(r)),v.once(Te.PLAYOUT_LIMIT_REACHED,M(1/0)),v.on(Te.ERROR,(B,ie)=>{if(!this.schedule)return;const L=this.getAssetPlayer(g);if(ie.details===It.BUFFER_STALLED_ERROR){if(L!=null&&L.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(ie,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${ie.error} ${e}`)}),v.on(Te.DESTROYING,()=>{if(!this.getAssetPlayer(g)||!this.schedule)return;const ie=new Error(`Asset player destroyed unexpectedly ${g}`),L={fatal:!0,type:Zn.OTHER_ERROR,details:It.INTERSTITIAL_ASSET_ITEM_ERROR,error:ie};this.handleAssetItemError(L,e,this.schedule.findEventIndex(e.identifier),r,ie.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Bh(t)}`),this.hls.trigger(Te.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:v}),v}clearInterstitial(e,t){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,t){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`clear asset player "${e}" toSegment: ${t&&Hl(t)}`);const i=this.playerQueue[r];this.transferMediaFromPlayer(i,t),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,r,i,o){const{interstitial:l,assetItem:d,assetId:c}=e,f=l.assetList.length,m=this.playingAsset;this.endedAsset=null,this.playingAsset=d,(!m||m.identifier!==c)&&(m&&(this.clearAssetPlayer(m.identifier,r[i]),delete m.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${f} ${Bh(d)}`),this.hls.trigger(Te.INTERSTITIAL_ASSET_STARTED,{asset:d,assetListIndex:t,event:l,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,o)}bufferAssetPlayer(e,t){var r,i;if(!this.schedule)return;const{interstitial:o,assetItem:l}=e,d=this.schedule.findEventIndex(o.identifier),c=(r=this.schedule.items)==null?void 0:r[d];if(!c)return;e.loadSource(),this.setBufferingItem(c),this.bufferingAsset=l;const f=this.getBufferingPlayer();if(f===e)return;const m=o.appendInPlace;if(m&&(f==null?void 0:f.interstitial.appendInPlace)===!1)return;const g=(f==null?void 0:f.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(m&&l!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(g&&!FC(g,e.tracks)){const p=new Error(`Asset ${Bh(l)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(g)}')`),y={fatal:!0,type:Zn.OTHER_ERROR,details:It.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},v=o.findAssetIndex(l);this.handleAssetItemError(y,o,d,v,p.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,r=this.primaryMedia;if(!t||!r)return;const i=r.currentTime,o=t.findAssetIndex(e,i),l=e.assetList[o];if(l){const d=this.getAssetPlayer(l.identifier);if(d){const c=d.currentTime||i-l.timelineStart,f=d.duration-c;if(this.warn(`Stalled at ${c} of ${c+f} in ${d} ${e} (media.currentTime: ${i})`),c&&(f/r.playbackRate<.5||d.bufferedInPlaceToEnd(r))&&d.hls){const m=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,m,o)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,r,i,o){if(e.details===It.BUFFER_STALLED_ERROR)return;const l=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${l&&Bh(l)} ${e.error}`),!this.schedule)return;const d=(l==null?void 0:l.identifier)||"",c=this.getAssetPlayerQueueIndex(d),f=this.playerQueue[c]||null,m=this.schedule.items,g=si({},e,{fatal:!1,errorAction:Tv(!0),asset:l,assetListIndex:i,event:t,schedule:m,scheduleIndex:r,player:f});if(this.hls.trigger(Te.INTERSTITIAL_ASSET_ERROR,g),!e.fatal)return;const p=this.playingAsset,y=this.bufferingAsset,v=new Error(o);if(l&&(this.clearAssetPlayer(d,null),l.error=v),!t.assetList.some(A=>!A.error))t.error=v;else for(let A=i;A<t.assetList.length;A++)this.resetAssetPlayer(t.assetList[A].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):p&&p.identifier===d?this.advanceAfterAssetEnded(t,r,i):y&&y.identifier===d&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,y)}primaryFallback(e){const t=e.timelineStart,r=this.effectivePlayingItem;if(r){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${Hl(r)} error: ${e.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const o=this.updateItem(r,i);if(this.itemsMatch(r,o)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const l=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(l)}else this.checkStart()}onAssetListLoaded(e,t){var r,i;const o=t.event,l=o.identifier,d=t.assetListResponse.ASSETS;if(!((r=this.schedule)!=null&&r.hasEvent(l)))return;const c=o.timelineStart,f=o.duration;let m=0;d.forEach((A,I)=>{const P=parseFloat(A.DURATION);this.createAsset(o,I,m,c+m,P,A.URI),m+=P}),o.duration=m,this.log(`Loaded asset-list with duration: ${m} (was: ${f}) ${o}`);const g=this.waitingItem,p=(g==null?void 0:g.event.identifier)===l;this.updateSchedule();const y=(i=this.bufferingItem)==null?void 0:i.event;if(p){var v;const A=this.schedule.findEventIndex(l),I=(v=this.schedule.items)==null?void 0:v[A];if(I){if(!this.playingItem&&this.timelinePos>I.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==A){o.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${o}`),this.updateSchedule(!0),this.primaryFallback(o);return}this.setBufferingItem(I)}this.setSchedulePosition(A)}else if((y==null?void 0:y.identifier)===l){const A=o.assetList[0];if(A){const I=this.getAssetPlayer(A.identifier);if(y.appendInPlace){const P=this.primaryMedia;I&&P&&this.bufferAssetPlayer(I,P)}else I&&I.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case It.ASSET_LIST_PARSING_ERROR:case It.ASSET_LIST_LOAD_ERROR:case It.ASSET_LIST_LOAD_TIMEOUT:{const r=t.interstitial;r&&(this.updateSchedule(!0),this.primaryFallback(r));break}case It.BUFFER_STALLED_ERROR:{const r=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&r.event.appendInPlace){this.handleInPlaceStall(r.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const GR=500;class mz extends jw{constructor(e,t,r){super(e,t,r,"subtitle-stream-controller",Qn.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Te.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Te.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Te.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Te.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Te.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Te.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Te.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Te.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Te.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Te.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=nn.IDLE,this.setInterval(GR),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:i}=t;if(this.fragContextChanged(r)||(Ji(r)&&(this.fragPrevious=r),this.state=nn.IDLE),!i)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let l;const d=r.start;for(let f=0;f<o.length;f++)if(d>=o[f].start&&d<=o[f].end){l=o[f];break}const c=r.start+r.duration;l?l.end=c:(l={start:d,end:c},o.push(l)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:r,endOffset:i}=t;if(r===0&&i!==Number.POSITIVE_INFINITY){const o=i-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(l=>{for(let d=0;d<l.length;){if(l[d].end<=o){l.shift();continue}else if(l[d].start<o)l[d].start=o;else break;d++}}),this.fragmentTracker.removeFragmentsInRange(r,o,Qn.SUBTITLE)}}onError(e,t){const r=t.frag;(r==null?void 0:r.type)===Qn.SUBTITLE&&(t.details===It.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==nn.STOPPED&&(this.state=nn.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&PL(this.levels,t)){this.levels=t.map(r=>new bv(r));return}this.tracksBuffered=[],this.levels=t.map(r=>{const i=new bv(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Qn.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==nn.STOPPED&&this.setInterval(GR)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:i,levels:o}=this,{details:l,id:d}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${d}`);return}const c=o[d];if(d>=o.length||!c)return;this.log(`Subtitle track ${d} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let f=0;if(l.live||(r=c.details)!=null&&r.live){if(l.deltaUpdateFailed)return;const g=this.mainDetails;if(!g){this.startFragRequested=!1;return}const p=g.fragments[0];if(!c.details)l.hasProgramDateTime&&g.hasProgramDateTime?(O0(l,g),f=l.fragmentStart):p&&(f=p.start,JS(l,f));else{var m;f=this.alignPlaylists(l,c.details,(m=this.levelLastLoaded)==null?void 0:m.details),f===0&&p&&(f=p.start,JS(l,f))}g&&!this.startFragRequested&&this.setStartPosition(g,f)}c.details=l,this.levelLastLoaded=c,d===i&&(this.hls.trigger(Te.SUBTITLE_TRACK_UPDATED,{details:l,id:d,groupId:t.groupId}),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===nn.IDLE&&(bf(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,i=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&hm(i.method)){const l=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,Bw(i.method)).catch(d=>{throw o.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:t}),d}).then(d=>{const c=performance.now();o.trigger(Te.FRAG_DECRYPTED,{frag:t,payload:d,stats:{tstart:l,tdecrypt:c}})}).catch(d=>{this.warn(`${d.name}: ${d.message}`),this.state=nn.IDLE})}}doTick(){if(!this.media){this.state=nn.IDLE;return}if(this.state===nn.IDLE){const{currentTrackId:e,levels:t}=this,r=t==null?void 0:t[e];if(!r||!t.length||!r.details||this.waitForLive(r))return;const{config:i}=this,o=this.getLoadPosition(),l=pr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,i.maxBufferHole),{end:d,len:c}=l,f=r.details,m=this.hls.maxBufferLength+f.levelTargetDuration;if(c>m)return;const g=f.fragments,p=g.length,y=f.edge;let v=null;const A=this.fragPrevious;if(d<y){const U=i.maxFragLookUpTolerance,M=d>y-U?0:U;v=bf(A,g,Math.max(g[0].start,d),M),!v&&A&&A.start<g[0].start&&(v=g[0])}else v=g[p-1];if(v=this.filterReplacedPrimary(v,r.details),!v)return;const I=v.sn-f.startSN,P=g[I-1];if(P&&P.cc===v.cc&&this.fragmentTracker.getState(P)===oa.NOT_LOADED&&(v=P),this.fragmentTracker.getState(v)===oa.NOT_LOADED){const U=this.mapToInitFragWhenRequired(v);U&&this.loadFragment(U,r,d)}}}loadFragment(e,t,r){Ji(e)?super.loadFragment(e,t,r):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new gz(this.tracksBuffered[this.currentTrackId]||[])}}class gz{constructor(e){this.buffered=void 0;const t=(r,i,o)=>{if(i=i>>>0,i>o-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${o})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return t("end",r,e.length)},start(r){return t("start",r,e.length)}}}}const pz={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},QL=n=>String.fromCharCode(pz[n]||n),po=15,Gl=100,vz={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},yz={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ez={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},bz={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Tz=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class _z{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r=typeof t=="function"?t():t;ni.log(`${this.time} [${e}] ${r}`)}}}const Ic=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class XL{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Sz{constructor(){this.uchar=" ",this.penState=new XL}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Az{constructor(e){this.chars=[],this.pos=0,this.currPenState=new XL,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Gl;t++)this.chars.push(new Sz);this.logger=e}equals(e){for(let t=0;t<Gl;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Gl;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Gl;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Gl&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Gl)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=QL(e);if(this.pos>=Gl){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Gl;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<Gl;r++){const i=this.chars[r].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class B_{constructor(e){this.rows=[],this.currRow=po-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<po;t++)this.rows.push(new Az(e));this.logger=e}reset(){for(let e=0;e<po;e++)this.rows[e].clear();this.currRow=po-1}equals(e){let t=!0;for(let r=0;r<po;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<po;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<po;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ii(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let d=0;d<po;d++)this.rows[d].clear();const o=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const d=l.rows[o].cueStartTime,c=this.logger.time;if(d!==null&&c!==null&&d<c)for(let f=0;f<this.nrRollUpRows;f++)this.rows[t-this.nrRollUpRows+f+1].copy(l.rows[o+f])}}this.currRow=t;const r=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,l=Math.max(o-1,0);r.setCursor(e.indent),e.color=r.chars[l].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ii(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",i=-1;for(let o=0;o<po;o++){const l=this.rows[o].getTextString();l&&(i=o+1,e?t.push("Row "+i+": '"+l+"'"):t.push(l.trim()))}return t.length>0&&(e?r="["+t.join(" | ")+"]":r=t.join(`
`)),r}getTextAndFormat(){return this.rows}}class VR{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new B_(r),this.nonDisplayedMemory=new B_(r),this.lastOutputScreen=new B_(r),this.currRollUpRow=this.displayedMemory.rows[po-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[po-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}this.logger.log(2,"MIDROW: "+Ii(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class KR{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Iz(),this.logger=void 0;const i=this.logger=new _z;this.channels=[null,new VR(e,t,i),new VR(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const i=t[r]&127,o=t[r+1]&127;let l=!1,d=null;if(i===0&&o===0)continue;this.logger.log(3,()=>"["+Ic([t[r],t[r+1]])+"] -> ("+Ic([i,o])+")");const c=this.cmdHistory;if(i>=16&&i<=31){if(wz(i,o,c)){BE(null,null,c),this.logger.log(3,()=>"Repeated command ("+Ic([i,o])+") is dropped");continue}BE(i,o,this.cmdHistory),l=this.parseCmd(i,o),l||(l=this.parseMidrow(i,o)),l||(l=this.parsePAC(i,o)),l||(l=this.parseBackgroundAttributes(i,o))}else BE(null,null,c);if(!l&&(d=this.parseChars(i,o),d)){const m=this.currentChannel;m&&m>0?this.channels[m].insertChars(d):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!d&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ic([i,o])+" orig: "+Ic([t[r],t[r+1]]))}}parseCmd(e,t){const r=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(r||i))return!1;const o=e===20||e===21||e===23?1:2,l=this.channels[o];return e===20||e===21||e===28||e===29?t===32?l.ccRCL():t===33?l.ccBS():t===34?l.ccAOF():t===35?l.ccAON():t===36?l.ccDER():t===37?l.ccRU(2):t===38?l.ccRU(3):t===39?l.ccRU(4):t===40?l.ccFON():t===41?l.ccRDC():t===42?l.ccTR():t===43?l.ccRTD():t===44?l.ccEDM():t===45?l.ccCR():t===46?l.ccENM():t===47&&l.ccEOC():l.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let r=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ic([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(i||o))return!1;const l=e<=23?1:2;t>=64&&t<=95?r=l===1?vz[e]:Ez[e]:r=l===1?yz[e]:bz[e];const d=this.channels[l];return d?(d.setPAC(this.interpretPAC(r,t)),this.currentChannel=l,!0):!1}interpretPAC(e,t){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?r=t-96:r=t-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,t){let r,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),o>=17&&o<=19){let l;o===17?l=t+80:o===18?l=t+112:l=t+144,this.logger.log(2,()=>"Special char '"+QL(l)+"' in channel "+r),i=[l]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Ic(i).join(",")),i}parseBackgroundAttributes(e,t){const r=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(r||i))return!1;let o;const l={};e===16||e===24?(o=Math.floor((t-32)/2),l.background=Tz[o],t%2===1&&(l.background=l.background+"_semi")):t===45?l.background="transparent":(l.foreground="black",t===47&&(l.underline=!0));const d=e<=23?1:2;return this.channels[d].setBkgData(l),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}BE(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function BE(n,e,t){t.a=n,t.b=e}function wz(n,e,t){return t.a===n&&t.b===e}function Iz(){return{a:null,b:null}}var eI=function(){if(M0!=null&&M0.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(d,c){if(typeof c!="string"||!Array.isArray(d))return!1;const f=c.toLowerCase();return~d.indexOf(f)?f:!1}function r(d){return t(n,d)}function i(d){return t(e,d)}function o(d,...c){let f=1;for(;f<arguments.length;f++){const m=arguments[f];for(const g in m)d[g]=m[g]}return d}function l(d,c,f){const m=this,g={enumerable:!0};m.hasBeenReset=!1;let p="",y=!1,v=d,A=c,I=f,P=null,U="",M=!0,B="auto",ie="start",L=50,w="middle",O=50,oe="middle";Object.defineProperty(m,"id",o({},g,{get:function(){return p},set:function(D){p=""+D}})),Object.defineProperty(m,"pauseOnExit",o({},g,{get:function(){return y},set:function(D){y=!!D}})),Object.defineProperty(m,"startTime",o({},g,{get:function(){return v},set:function(D){if(typeof D!="number")throw new TypeError("Start time must be set to a number.");v=D,this.hasBeenReset=!0}})),Object.defineProperty(m,"endTime",o({},g,{get:function(){return A},set:function(D){if(typeof D!="number")throw new TypeError("End time must be set to a number.");A=D,this.hasBeenReset=!0}})),Object.defineProperty(m,"text",o({},g,{get:function(){return I},set:function(D){I=""+D,this.hasBeenReset=!0}})),Object.defineProperty(m,"region",o({},g,{get:function(){return P},set:function(D){P=D,this.hasBeenReset=!0}})),Object.defineProperty(m,"vertical",o({},g,{get:function(){return U},set:function(D){const ve=r(D);if(ve===!1)throw new SyntaxError("An invalid or illegal string was specified.");U=ve,this.hasBeenReset=!0}})),Object.defineProperty(m,"snapToLines",o({},g,{get:function(){return M},set:function(D){M=!!D,this.hasBeenReset=!0}})),Object.defineProperty(m,"line",o({},g,{get:function(){return B},set:function(D){if(typeof D!="number"&&D!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");B=D,this.hasBeenReset=!0}})),Object.defineProperty(m,"lineAlign",o({},g,{get:function(){return ie},set:function(D){const ve=i(D);if(!ve)throw new SyntaxError("An invalid or illegal string was specified.");ie=ve,this.hasBeenReset=!0}})),Object.defineProperty(m,"position",o({},g,{get:function(){return L},set:function(D){if(D<0||D>100)throw new Error("Position must be between 0 and 100.");L=D,this.hasBeenReset=!0}})),Object.defineProperty(m,"positionAlign",o({},g,{get:function(){return w},set:function(D){const ve=i(D);if(!ve)throw new SyntaxError("An invalid or illegal string was specified.");w=ve,this.hasBeenReset=!0}})),Object.defineProperty(m,"size",o({},g,{get:function(){return O},set:function(D){if(D<0||D>100)throw new Error("Size must be between 0 and 100.");O=D,this.hasBeenReset=!0}})),Object.defineProperty(m,"align",o({},g,{get:function(){return oe},set:function(D){const ve=i(D);if(!ve)throw new SyntaxError("An invalid or illegal string was specified.");oe=ve,this.hasBeenReset=!0}})),m.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l}();class kz{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function ZL(n){function e(r,i,o,l){return(r|0)*3600+(i|0)*60+(o|0)+parseFloat(l||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class Rz{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function JL(n,e,t,r){const i=r?n.split(r):[n];for(const o in i){if(typeof i[o]!="string")continue;const l=i[o].split(t);if(l.length!==2)continue;const d=l[0],c=l[1];e(d,c)}}const oA=new eI(0,0,""),$E=oA.align==="middle"?"middle":"center";function xz(n,e,t){const r=n;function i(){const d=ZL(n);if(d===null)throw new Error("Malformed timestamp: "+r);return n=n.replace(/^[^\sa-zA-Z-]+/,""),d}function o(d,c){const f=new Rz;JL(d,function(p,y){let v;switch(p){case"region":for(let A=t.length-1;A>=0;A--)if(t[A].id===y){f.set(p,t[A].region);break}break;case"vertical":f.alt(p,y,["rl","lr"]);break;case"line":v=y.split(","),f.integer(p,v[0]),f.percent(p,v[0])&&f.set("snapToLines",!1),f.alt(p,v[0],["auto"]),v.length===2&&f.alt("lineAlign",v[1],["start",$E,"end"]);break;case"position":v=y.split(","),f.percent(p,v[0]),v.length===2&&f.alt("positionAlign",v[1],["start",$E,"end","line-left","line-right","auto"]);break;case"size":f.percent(p,y);break;case"align":f.alt(p,y,["start",$E,"end","left","right"]);break}},/:/,/\s/),c.region=f.get("region",null),c.vertical=f.get("vertical","");let m=f.get("line","auto");m==="auto"&&oA.line===-1&&(m=-1),c.line=m,c.lineAlign=f.get("lineAlign","start"),c.snapToLines=f.get("snapToLines",!0),c.size=f.get("size",100),c.align=f.get("align",$E);let g=f.get("position","auto");g==="auto"&&oA.position===50&&(g=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=g}function l(){n=n.replace(/^\s+/,"")}if(l(),e.startTime=i(),l(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);n=n.slice(3),l(),e.endTime=i(),l(),o(n,e)}function eD(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class Cz{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new kz,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function r(){let o=t.buffer,l=0;for(o=eD(o);l<o.length&&o[l]!=="\r"&&o[l]!==`
`;)++l;const d=o.slice(0,l);return o[l]==="\r"&&++l,o[l]===`
`&&++l,t.buffer=o.slice(l),d}function i(o){JL(o,function(l,d){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=r();const d=o.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(d!=null&&d[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let l=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:o=r(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new eI(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{xz(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const d=o.indexOf("-->")!==-1;if(!o||d&&(l=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Lz=/\r\n|\n\r|\n|\r/g,$_=function(e,t,r=0){return e.slice(r,r+t.length)===t},Dz=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Fn(t)||!Fn(r)||!Fn(i)||!Fn(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=60*1e3*i,t+=60*60*1e3*o,t};function tI(n,e,t){return rv(n.toString())+rv(e.toString())+rv(t)}const Nz=function(e,t,r){let i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(l=o)!=null&&l.new;){var l;e.ccOffset+=i.start-o.start,i.new=!1,i=o,o=e[i.prevCC]}e.presentationOffset=r};function Pz(n,e,t,r,i,o,l){const d=new Cz,c=As(new Uint8Array(n)).trim().replace(Lz,`
`).split(`
`),f=[],m=e?$U(e.baseTime,e.timescale):0;let g="00:00.000",p=0,y=0,v,A=!0;d.oncue=function(I){const P=t[r];let U=t.ccOffset;const M=(p-m)/9e4;if(P!=null&&P.new&&(y!==void 0?U=t.ccOffset=P.start:Nz(t,r,M)),M){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}U=M-t.presentationOffset}const B=I.endTime-I.startTime,ie=Gs((I.startTime+U-y)*9e4,i*9e4)/9e4;I.startTime=Math.max(ie,0),I.endTime=Math.max(ie+B,0);const L=I.text.trim();I.text=decodeURIComponent(encodeURIComponent(L)),I.id||(I.id=tI(I.startTime,I.endTime,L)),I.endTime>0&&f.push(I)},d.onparsingerror=function(I){v=I},d.onflush=function(){if(v){l(v);return}o(f)},c.forEach(I=>{if(A)if($_(I,"X-TIMESTAMP-MAP=")){A=!1,I.slice(16).split(",").forEach(P=>{$_(P,"LOCAL:")?g=P.slice(6):$_(P,"MPEGTS:")&&(p=parseInt(P.slice(7)))});try{y=Dz(g)/1e3}catch(P){v=P}return}else I===""&&(A=!1);d.parse(I+`
`)}),d.flush()}const j_="stpp.ttml.im1t",tD=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nD=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Mz={left:"start",center:"center",right:"end",start:"start",end:"end"};function YR(n,e,t,r){const i=Ir(new Uint8Array(n),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const o=i.map(d=>As(d)),l=BU(e.baseTime,1,e.timescale);try{o.forEach(d=>t(Oz(d,l)))}catch(d){r(d)}}function Oz(n,e){const i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(o).reduce((g,p)=>(g[p]=i.getAttribute(`ttp:${p}`)||o[p],g),{}),d=i.getAttribute("xml:space")!=="preserve",c=WR(q_(i,"styling","style")),f=WR(q_(i,"layout","region")),m=q_(i,"body","[begin]");return[].map.call(m,g=>{const p=rD(g,d);if(!p||!g.hasAttribute("begin"))return null;const y=G_(g.getAttribute("begin"),l),v=G_(g.getAttribute("dur"),l);let A=G_(g.getAttribute("end"),l);if(y===null)throw QR(g);if(A===null){if(v===null)throw QR(g);A=y+v}const I=new eI(y-e,A-e,p);I.id=tI(I.startTime,I.endTime,I.text);const P=f[g.getAttribute("region")],U=c[g.getAttribute("style")],M=Fz(P,U,c),{textAlign:B}=M;if(B){const ie=Mz[B];ie&&(I.lineAlign=ie),I.align=B}return si(I,M),I}).filter(g=>g!==null)}function q_(n,e,t){const r=n.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function WR(n){return n.reduce((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function rD(n,e){return[].slice.call(n.childNodes).reduce((t,r,i)=>{var o;return r.nodeName==="br"&&i?t+`
`:(o=r.childNodes)!=null&&o.length?rD(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function Fz(n,e,t){const r="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return l&&t.hasOwnProperty(l)&&(i=t[l]),o.reduce((d,c)=>{const f=H_(e,r,c)||H_(n,r,c)||H_(i,r,c);return f&&(d[c]=f),d},{})}function H_(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function QR(n){return new Error(`Could not parse ttml timestamp ${n}`)}function G_(n,e){if(!n)return null;let t=ZL(n);return t===null&&(tD.test(n)?t=Uz(n,e):nD.test(n)&&(t=zz(n,e))),t}function Uz(n,e){const t=tD.exec(n),r=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+r/e.frameRate}function zz(n,e){const t=nD.exec(n),r=Number(t[1]);switch(t[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class jE{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class Bz{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ZR(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Te.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Te.FRAG_LOADING,this.onFragLoading,this),e.on(Te.FRAG_LOADED,this.onFragLoaded,this),e.on(Te.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Te.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Te.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Te.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Te.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Te.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Te.FRAG_LOADING,this.onFragLoading,this),e.off(Te.FRAG_LOADED,this.onFragLoaded,this),e.off(Te.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Te.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Te.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Te.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new jE(this,"textTrack1"),t=new jE(this,"textTrack2"),r=new jE(this,"textTrack3"),i=new jE(this,"textTrack4");this.cea608Parser1=new KR(1,e,t),this.cea608Parser2=new KR(3,r,i)}addCues(e,t,r,i,o){let l=!1;for(let d=o.length;d--;){const c=o[d],f=$z(c[0],c[1],t,r);if(f>=0&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],r),l=!0,f/(r-t)>.5))return}if(l||o.push([t,r]),this.config.renderTextTracksNatively){const d=this.captionsTracks[e];this.Cues.newCue(d,t,r,i)}else{const d=this.Cues.newCue(null,t,r,i);this.hls.trigger(Te.CUES_PARSED,{type:"captions",cues:d,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:o,trackId:l}){const{unparsedVttFrags:d}=this;r===Qn.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:o,trackId:l}),d.length&&(this.unparsedVttFrags=[],d.forEach(c=>{this.initPTS[c.frag.cc]?this.onFragLoaded(Te.FRAG_LOADED,c):this.hls.trigger(Te.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const o=r.textTracks[i];if(XR(o,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:i}=this,{label:o,languageCode:l}=t[e],d=this.getExistingTrack(o,l);if(d)r[e]=d,lm(r[e]),KL(r[e],i);else{const c=this.createTextTrack("captions",o,l);c&&(c[e]=!0,r[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r=t.label,i={_id:e,label:r,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(Te.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,r){const i=this.media;if(i)return i.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const r=!!t.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(o=>{lm(i[o]),delete i[o]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ZR(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)lm(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],i=r.some(o=>o.textCodec===j_);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(PL(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const l=this.media,d=l?gb(l.textTracks):null;if(this.tracks.forEach((c,f)=>{let m;if(d){let g=null;for(let p=0;p<d.length;p++)if(d[p]&&XR(d[p],c)){g=d[p],d[p]=null;break}g&&(m=g)}if(m)lm(m);else{const g=iD(c);m=this.createTextTrack(g,c.name,c.lang),m&&(m.mode="disabled")}m&&this.textTracks.push(m)}),d!=null&&d.length){const c=d.filter(f=>f!==null).map(f=>f.label);c.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(d=>({label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}));this.hls.trigger(Te.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const o=`textTrack${i[1]}`,l=this.captionsProperties[o];l&&(l.label=r.name,r.lang&&(l.languageCode=r.lang),l.media=r)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Qn.MAIN){var r,i;const{cea608Parser1:o,cea608Parser2:l,lastSn:d}=this,{cc:c,sn:f}=t.frag,m=(r=(i=t.part)==null?void 0:i.index)!=null?r:-1;o&&l&&(f!==d+1||f===d&&m!==this.lastPartIndex+1||c!==this.lastCc)&&(o.reset(),l.reset()),this.lastCc=c,this.lastSn=f,this.lastPartIndex=m}}onFragLoaded(e,t){const{frag:r,payload:i}=t;if(r.type===Qn.SUBTITLE)if(i.byteLength){const o=r.decryptdata,l="stats"in t;if(o==null||!o.encrypted||l){const d=this.tracks[r.level],c=this.vttCCs;c[r.cc]||(c[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),d&&d.textCodec===j_?this._parseIMSC1(r,i):this._parseVTTs(t)}}else this.hls.trigger(Te.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;YR(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(Te.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(Te.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:r,payload:i}=e,{initPTS:o,unparsedVttFrags:l}=this,d=o.length-1;if(!o[r.cc]&&d===-1){l.push(e);return}const c=this.hls,f=(t=r.initSegment)!=null&&t.data?Qs(r.initSegment.data,new Uint8Array(i)).buffer:i;Pz(f,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,m=>{this._appendCues(m,r.level),c.trigger(Te.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},m=>{const g=m.message==="Missing initPTS for VTT MPEGTS";g?l.push(e):this._fallbackToIMSC1(r,i),c.logger.log(`Failed to parse VTT cue: ${m}`),!(g&&d>r.cc)&&c.trigger(Te.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:m})})}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||YR(t,this.initPTS[e.cc],()=>{r.textCodec=j_,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(o=>YL(i,o))}else{const i=this.tracks[t];if(!i)return;const o=i.default?"default":"subtitles"+t;r.trigger(Te.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===Qn.SUBTITLE&&this.onFragLoaded(Te.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=t;if(!(r.type===Qn.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let o=0;o<i.length;o++){const l=i[o].bytes;if(l){this.cea608Parser1||this.initCea608Parsers();const d=this.extractCea608Data(l);this.cea608Parser1.addData(i[o].pts,d[0]),this.cea608Parser2.addData(i[o].pts,d[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:i,type:o}){const{media:l}=this;if(!(!l||l.currentTime<r)){if(!o||o==="video"){const{captionsTracks:d}=this;Object.keys(d).forEach(c=>sA(d[c],t,r))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:d}=this;Object.keys(d).forEach(c=>sA(d[c],t,i))}}}extractCea608Data(e){const t=[[],[]],r=e[0]&31;let i=2;for(let o=0;o<r;o++){const l=e[i++],d=127&e[i++],c=127&e[i++];if(d===0&&c===0)continue;if((4&l)!==0){const m=3&l;(m===0||m===1)&&(t[m].push(d),t[m].push(c))}}return t}}function iD(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function XR(n,e){return!!n&&n.kind===iD(e)&&nA(e,n)}function $z(n,e,t,r){return Math.min(e,r)-Math.max(n,t)}function ZR(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const jz=/\s/,qz={newCue(n,e,t,r){const i=[];let o,l,d,c,f;const m=self.VTTCue||self.TextTrackCue;for(let p=0;p<r.rows.length;p++)if(o=r.rows[p],d=!0,c=0,f="",!o.isEmpty()){var g;for(let A=0;A<o.chars.length;A++)jz.test(o.chars[A].uchar)&&d?c++:(f+=o.chars[A].uchar,d=!1);o.cueStartTime=e,e===t&&(t+=1e-4),c>=16?c--:c++;const y=eD(f.trim()),v=tI(e,t,y);n!=null&&(g=n.cues)!=null&&g.getCueById(v)||(l=new m(e,t,y),l.id=v,l.line=p+1,l.align="left",l.position=10+Math.min(80,Math.floor(c*8/32)*10),i.push(l))}return n&&i.length&&(i.sort((p,y)=>p.line==="auto"||y.line==="auto"?0:p.line>8&&y.line>8?y.line-p.line:p.line-y.line),i.forEach(p=>YL(n,p))),i}};function Hz(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Gz=/(\d+)-(\d+)\/(\d+)/;class JR{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Wz,this.controller=new self.AbortController,this.stats=new Nw}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const o=Vz(e,this.controller.signal),l=e.responseType==="arraybuffer",d=l?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:f}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=c&&Fn(c)?c:f,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(Av(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(g=>{var p;this.response=this.loader=g;const y=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=f,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},f-(y-i.loading.start)),!g.ok){const{status:A,statusText:I}=g;throw new Qz(I||"fetch, bad network response",A,g)}i.loading.first=y,i.total=Yz(g.headers)||i.total;const v=(p=this.callbacks)==null?void 0:p.onProgress;return v&&Fn(t.highWaterMark)?this.loadProgressively(g,i,e,t.highWaterMark,v):l?g.arrayBuffer():e.responseType==="json"?g.json():g.text()}).then(g=>{var p,y;const v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const A=g[d];A&&(i.loaded=i.total=A);const I={url:v.url,data:g,code:v.status},P=(p=this.callbacks)==null?void 0:p.onProgress;P&&!Fn(t.highWaterMark)&&P(i,e,g,v),(y=this.callbacks)==null||y.onSuccess(I,i,e,v)}).catch(g=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const y=g&&g.code||0,v=g?g.message:null;(p=this.callbacks)==null||p.onError({code:y,text:v},e,g?g.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,i=0,o){const l=new mL,d=e.body.getReader(),c=()=>d.read().then(f=>{if(f.done)return l.dataLength&&o(t,r,l.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const m=f.value,g=m.length;return t.loaded+=g,g<i||l.dataLength?(l.push(m),l.dataLength>=i&&o(t,r,l.flush().buffer,e)):o(t,r,m.buffer,e),c()}).catch(()=>Promise.reject());return c()}}function Vz(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(si({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function Kz(n){const e=Gz.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Yz(n){const e=n.get("Content-Range");if(e){const r=Kz(e);if(Fn(r))return r}const t=n.get("Content-Length");if(t)return parseInt(t)}function Wz(n,e){return new self.Request(n.url,e)}class Qz extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const Xz=/^age:\s*[\d.]+\s*$/im;class aD{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Nw,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return o(r,t.url)}).catch(l=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",t.url,!0),o(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(l=>{var d;(d=this.callbacks)==null||d.onError({code:r.status,text:l.message},t,r,i)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=r.loadPolicy;if(i)for(const d in i)e.setRequestHeader(d,i[d]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=o&&Fn(o)?o:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const i=t.readyState,o=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const f=t.status,m=t.responseType==="text"?t.responseText:null;if(f>=200&&f<300){const v=m??t.response;if(v!=null){var l,d;r.loading.end=Math.max(self.performance.now(),r.loading.first);const A=t.responseType==="arraybuffer"?v.byteLength:v.length;r.loaded=r.total=A,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const I=(l=this.callbacks)==null?void 0:l.onProgress;I&&I(r,e,v,t);const P={url:t.responseURL,data:v,code:f};(d=this.callbacks)==null||d.onSuccess(P,r,e,t);return}}const g=o.loadPolicy.errorRetry,p=r.retry,y={url:e.url,data:void 0,code:f};if(P0(g,p,!1,y))this.retry(g);else{var c;ni.error(`${f} while loading ${e.url}`),(c=this.callbacks)==null||c.onError({code:f,text:t.statusText},e,t,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(P0(e,t,!0))this.retry(e);else{var r;ni.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=Fw(e,r.retry),r.retry++,ni.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Xz.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Zz={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Jz=ai(ai({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:aD,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:cF,bufferController:n3,capLevelController:Xw,errorController:pF,fpsController:nz,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:iL,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:Zz},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},eB()),{},{subtitleStreamController:mz,subtitleTrackController:az,timelineController:Bz,audioStreamController:ZU,audioTrackController:JU,emeController:mm,cmcdController:J3,contentSteeringController:tz,interstitialsController:hz});function eB(){return{cueHandler:qz,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function tB(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=lA(n),i=["manifest","level","frag"],o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(l=>{const d=`${l==="level"?"playlist":l}LoadPolicy`,c=e[d]===void 0,f=[];o.forEach(m=>{const g=`${l}Loading${m}`,p=e[g];if(p!==void 0&&c){f.push(g);const y=r[d].default;switch(e[d]={default:y},m){case"TimeOut":y.maxLoadTimeMs=p,y.maxTimeToFirstByteMs=p;break;case"MaxRetry":y.errorRetry.maxNumRetry=p,y.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":y.errorRetry.retryDelayMs=p,y.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":y.errorRetry.maxRetryDelayMs=p,y.timeoutRetry.maxRetryDelayMs=p;break}}}),f.length&&t.warn(`hls.js config: "${f.join('", "')}" setting(s) are deprecated, use "${d}": ${Ii(e[d])}`)}),ai(ai({},r),e)}function lA(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(lA):Object.keys(n).reduce((e,t)=>(e[t]=lA(n[t]),e),{}):n}function nB(n,e){const t=n.loader;t!==JR&&t!==aD?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):Hz()&&(n.loader=JR,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const pb=2,rB=.1,iB=.05,aB=100;class sB extends tL{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(Te.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(aB),this.mediaSource=t.mediaSource;const r=this.media=t.media;Ss(r,"playing",this.onMediaPlaying),Ss(r,"waiting",this.onMediaWaiting),Ss(r,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:r}=this;r&&(Ws(r,"playing",this.onMediaPlaying),Ws(r,"waiting",this.onMediaWaiting),Ws(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var r,i;const o=(r=this.hls)==null?void 0:r.config;if(!o)return;const l=this.media;if(!l)return;const{seeking:d}=l,c=this.seeking&&!d,f=!this.seeking&&d,m=l.paused&&!d||l.ended||l.playbackRate===0;if(this.seeking=d,e!==t){t&&(this.ended=0),this.moved=!0,d||(this.nudgeRetry=0,o.nudgeOnVideoHole&&!m&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(f||c){c&&this.stallResolved(e);return}if(m){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&l.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(Te.MEDIA_ENDED,{stalled:!1}));return}if(!pr.getBuffered(l).length){this.nudgeRetry=0;return}const g=pr.bufferInfo(l,e,0),p=g.nextStart||0,y=this.fragmentTracker;if(d&&y&&this.hls){const L=e1(this.hls.inFlightFragments,e),w=g.len>pb,O=!p||L||p-e>pb&&!y.getPartialFragment(e);if(w||O)return;this.moved=!1}const v=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&y){if(!(g.len>0)&&!p)return;const w=Math.max(p,g.start||0)-e,oe=!!(v!=null&&v.live)?v.targetduration*2:pb,D=qE(e,y);if(w>0&&(w<=oe||D)){l.paused||this._trySkipBufferHole(D);return}}const A=o.detectStallWithCurrentTimeMs,I=self.performance.now(),P=this.waiting;let U=this.stalled;if(U===null)if(P>0&&I-P<A)U=this.stalled=P;else{this.stalled=I;return}const M=I-U;if(!d&&(M>=A||P)&&this.hls){var B;if(((B=this.mediaSource)==null?void 0:B.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(e-((v==null?void 0:v.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(Te.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(g),!this.media||!this.hls)return}const ie=pr.bufferInfo(l,e,o.maxBufferHole);this._tryFixBufferStall(ie,M,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(Te.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const o=pr.bufferedInfo(pr.timeRangesToArray(this.buffered.audio),e,0);if(o.len>1&&t>=o.start){const l=pr.timeRangesToArray(i),d=pr.bufferedInfo(l,t,0).bufferedIndex;if(d>-1&&d<l.length-1){const c=pr.bufferedInfo(l,e,0).bufferedIndex,f=l[d].end,m=l[d+1].start;if((c===-1||c>d)&&m-f<1&&e-f<2){const g=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${f} -> ${m} buffered index: ${c}`);this.warn(g.message),this.media.currentTime+=1e-6;let p=qE(e,this.fragmentTracker);p&&"fragment"in p?p=p.fragment:p||(p=void 0);const y=pr.bufferInfo(this.media,e,0);this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,frag:p,buffer:y.len,bufferInfo:y})}}}}}_tryFixBufferStall(e,t,r){var i,o;const{fragmentTracker:l,media:d}=this,c=(i=this.hls)==null?void 0:i.config;if(!d||!l||!c)return;const f=(o=this.hls)==null?void 0:o.latestLevelDetails,m=qE(r,l);if((m||f!=null&&f.live&&r<f.fragmentStart)&&(this._trySkipBufferHole(m)||!this.media))return;const g=e.buffered,p=this.adjacentTraversal(e,r);(g&&g.length>1&&e.len>c.maxBufferHole||e.nextStart&&(e.nextStart-r<c.maxBufferHole||p))&&(t>c.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const o=r.getFragAtPos(t,Qn.MAIN),l=r.getFragAtPos(i,Qn.MAIN);if(o&&l)return l.sn-o.sn<2}return!1}_reportStall(e){const{hls:t,media:r,stallReported:i,stalled:o}=this;if(!i&&o!==null&&r&&t){this.stallReported=!0;const l=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Ii(e)})`);this.warn(l.message),t.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_STALLED_ERROR,fatal:!1,error:l,buffer:e.len,bufferInfo:e,stalled:{start:o}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:r,media:i}=this,o=(t=this.hls)==null?void 0:t.config;if(!i||!r||!o)return 0;const l=i.currentTime,d=pr.bufferInfo(i,l,0),c=l<d.start?d.start:d.nextStart;if(c&&this.hls){const m=d.len<=o.maxBufferHole,g=d.len>0&&d.len<1&&i.readyState<3,p=c-l;if(p>0&&(m||g)){if(p>o.maxBufferHole){let v=!1;if(l===0){const A=r.getAppendedFrag(0,Qn.MAIN);A&&c<A.end&&(v=!0)}if(!v&&e){var f;if(!((f=this.hls.loadLevelObj)!=null&&f.details)||e1(this.hls.inFlightFragments,c))return 0;let I=!1,P=e.end;for(;P<c;){const U=qE(P,r);if(U)P+=U.duration;else{I=!0;break}}if(I)return 0}}const y=Math.max(c+iB,l+rB);if(this.warn(`skipping hole, adjusting currentTime from ${l} to ${y}`),this.moved=!0,i.currentTime=y,!(e!=null&&e.gap)){const v=new Error(`fragment loaded with buffer holes, seeking from ${l} to ${y}`),A={type:Zn.MEDIA_ERROR,details:It.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,buffer:d.len,bufferInfo:d};e&&("fragment"in e?A.part=e:A.frag=e),this.hls.trigger(Te.ERROR,A)}return y}}return 0}_tryNudgeBuffer(e){const{hls:t,media:r,nudgeRetry:i}=this,o=t==null?void 0:t.config;if(!r||!o)return 0;const l=r.currentTime;if(this.nudgeRetry++,i<o.nudgeMaxRetry){const d=l+(i+1)*o.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${l} to ${d}`);this.warn(c.message),r.currentTime=d,t.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const d=new Error(`Playhead still not moving while enough data buffered @${l} after ${o.nudgeMaxRetry} nudges`);this.error(d.message),t.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.BUFFER_STALLED_ERROR,error:d,fatal:!0,buffer:e.len,bufferInfo:e})}}}function e1(n,e){const t=t1(n.main);if(t&&t.start<=e)return t;const r=t1(n.audio);return r&&r.start<=e?r:null}function t1(n){if(!n)return null;switch(n.state){case nn.IDLE:case nn.STOPPED:case nn.ENDED:case nn.ERROR:return null}return n.frag}function qE(n,e){return e.getAppendedFrag(n,Qn.MAIN)||e.getPartialFragment(n)}const oB=.25;function uA(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function V_(n,e,t,r,i){let o=new n(e,t,"");try{o.value=r,i&&(o.type=i)}catch{o=new n(e,t,Ii(i?ai({type:i},r):r))}return o}const HE=(()=>{const n=uA();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class lB{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(Te.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Te.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Te.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Te.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Te.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var r;this.media=t.media,((r=t.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&lm(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if(r.kind==="metadata"&&r.label==="id3")return KL(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:r,enableID3MetadataCues:i}=this.hls.config;if(!r&&!i)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=uA();if(l)for(let d=0;d<o.length;d++){const c=o[d].type;if(c===_s.emsg&&!r||!i)continue;const f=TL(o[d].data),m=o[d].pts;let g=m+o[d].duration;g>HE&&(g=HE),g-m<=0&&(g=m+oB);for(let y=0;y<f.length;y++){const v=f[y];if(!_L(v)){this.updateId3CueEnds(m,c);const A=V_(l,m,g,v,c);A&&this.id3Track.addCue(A)}}}}updateId3CueEnds(e,t){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let o=i.length;o--;){const l=i[o];l.type===t&&l.startTime<e&&l.endTime===HE&&(l.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:i}){const{id3Track:o,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:d,enableID3MetadataCues:c}}=l;if(o&&(d||c)){let f;i==="audio"?f=m=>m.type===_s.audioId3&&c:i==="video"?f=m=>m.type===_s.emsg&&d:f=m=>m.type===_s.audioId3&&c||m.type===_s.emsg&&d,sA(o,t,r,f)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:i,enableDateRangeMetadataCues:o,interstitialsController:l}=this.hls.config;if(!o)return;const d=uA();if(r&&i&&!l){const{fragmentStart:A,fragmentEnd:I}=e;let P=this.assetCue;P?(P.startTime=A,P.endTime=I):d&&(P=this.assetCue=V_(d,A,I,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),P&&(P.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(P),P.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:c}=this,{dateRanges:f}=e,m=Object.keys(f);let g=this.dateRangeCuesAppended;if(c&&t){var p;if((p=c.cues)!=null&&p.length){const A=Object.keys(g).filter(I=>!m.includes(I));for(let I=A.length;I--;){var y;const P=A[I],U=(y=g[P])==null?void 0:y.cues;delete g[P],U&&Object.keys(U).forEach(M=>{const B=U[M];if(B){B.removeEventListener("enter",this.onEventCueEnter);try{c.removeCue(B)}catch{}}})}}else g=this.dateRangeCuesAppended={}}const v=e.fragments[e.fragments.length-1];if(!(m.length===0||!Fn(v==null?void 0:v.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let A=0;A<m.length;A++){const I=m[A],P=f[I],U=P.startTime,M=g[I],B=(M==null?void 0:M.cues)||{};let ie=(M==null?void 0:M.durationKnown)||!1,L=HE;const{duration:w,endDate:O}=P;if(O&&w!==null)L=U+w,ie=!0;else if(P.endOnNext&&!ie){const D=m.reduce((ve,Le)=>{if(Le!==P.id){const te=f[Le];if(te.class===P.class&&te.startDate>P.startDate&&(!ve||P.startDate<ve.startDate))return te}return ve},null);D&&(L=D.startTime,ie=!0)}const oe=Object.keys(P.attr);for(let D=0;D<oe.length;D++){const ve=oe[D];if(!xF(ve))continue;const Le=B[ve];if(Le)ie&&!(M!=null&&M.durationKnown)?Le.endTime=L:Math.abs(Le.startTime-U)>.01&&(Le.startTime=U,Le.endTime=L);else if(d){let te=P.attr[ve];CF(ve)&&(te=UC(te));const Ue=V_(d,U,L,{key:ve,data:te},_s.dateRange);Ue&&(Ue.id=I,this.id3Track.addCue(Ue),B[ve]=Ue,l&&(ve==="X-ASSET-LIST"||ve==="X-ASSET-URL")&&Ue.addEventListener("enter",this.onEventCueEnter))}}g[I]={cues:B,dateRange:P,durationKnown:ie}}}}}class uB{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,r=this.levelDetails;if(!t||!r)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:o,maxLiveSyncPlaybackRate:l}=this.config;if(!o||l===1||!r.live)return;const d=this.targetLatency;if(d===null)return;const c=i-d,f=Math.min(this.maxLatency,d+r.targetduration);if(c<f&&c>.05&&this.forwardBufferLength>1){const g=Math.min(2,Math.max(1,l)),p=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20,y=Math.min(g,Math.max(1,p));this.changeMediaPlaybackRate(t,y)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:o,liveSyncDurationCount:l,lowLatencyMode:d}=this.config,c=this.hls.userConfig;let f=d&&r||t;(this._targetLatencyUpdated||c.liveSyncDuration||c.liveSyncDurationCount||f===0)&&(f=o!==void 0?o:l*i);const m=i;return f+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,m)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,o=e-t-this.edgeStalled,l=i-r.totalduration,d=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(l,o),d)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Te.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Te.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Te.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Te.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var r;t.details===It.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var r,i;e.playbackRate!==t&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class dB extends Qw{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Te.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Te.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Te.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Te.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,i=[],o={},l={};let d=!1,c=!1,f=!1;t.levels.forEach(m=>{const g=m.attrs;let{audioCodec:p,videoCodec:y}=m;p&&(m.audioCodec=p=C0(p,r)||void 0),y&&(y=m.videoCodec=Y2(y));const{width:v,height:A,unknownCodecs:I}=m;let P=I?I.length:0;if(I)for(let D=P;D--;){const ve=I[D];this.isAudioSupported(ve)?(m.audioCodec=p=p?`${p},${ve}`:ve,P--,Km.audio[p.substring(0,4)]=2):this.isVideoSupported(ve)&&(m.videoCodec=y=y?`${y},${ve}`:ve,P--,Km.video[y.substring(0,4)]=2)}if(d||(d=!!(v&&A)),c||(c=!!y),f||(f=!!p),P||p&&!this.isAudioSupported(p)||y&&!this.isVideoSupported(y)){this.log(`Some or all CODECS not supported "${g.CODECS}"`);return}const{CODECS:U,"FRAME-RATE":M,"HDCP-LEVEL":B,"PATHWAY-ID":ie,RESOLUTION:L,"VIDEO-RANGE":w}=g,oe=`${`${ie||"."}-`}${m.bitrate}-${L}-${M}-${U}-${w}-${B}`;if(o[oe])if(o[oe].uri!==m.url&&!m.attrs["PATHWAY-ID"]){const D=l[oe]+=1;m.attrs["PATHWAY-ID"]=new Array(D+1).join(".");const ve=this.createLevel(m);o[oe]=ve,i.push(ve)}else o[oe].addGroupId("audio",g.AUDIO),o[oe].addGroupId("text",g.SUBTITLES);else{const D=this.createLevel(m);o[oe]=D,l[oe]=1,i.push(D)}}),this.filterAndSortMediaOptions(i,t,d,c,f)}createLevel(e){const t=new bv(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),t.supportedResult=WC(i,[])}return t}isAudioSupported(e){return KS(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return KS(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,r,i,o){let l=[],d=[],c=e;if((r||i)&&o&&(c=c.filter(({videoCodec:I,videoRange:P,width:U,height:M})=>(!!I||!!(U&&M))&&nF(P))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let I="no level with compatible codecs found in manifest",P=I;t.levels.length&&(P=`one or more CODECS in variant not supported: ${Ii(t.levels.map(M=>M.attrs.CODECS).filter((M,B,ie)=>ie.indexOf(M)===B))}`,this.warn(P),I+=` (${P})`);const U=new Error(I);this.hls.trigger(Te.ERROR,{type:Zn.MEDIA_ERROR,details:It.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:U,reason:P})}});return}t.audioTracks&&(l=t.audioTracks.filter(I=>!I.audioCodec||this.isAudioSupported(I.audioCodec)),n1(l)),t.subtitles&&(d=t.subtitles,n1(d));const f=c.slice(0);c.sort((I,P)=>{if(I.attrs["HDCP-LEVEL"]!==P.attrs["HDCP-LEVEL"])return(I.attrs["HDCP-LEVEL"]||"")>(P.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&I.height!==P.height)return I.height-P.height;if(I.frameRate!==P.frameRate)return I.frameRate-P.frameRate;if(I.videoRange!==P.videoRange)return L0.indexOf(I.videoRange)-L0.indexOf(P.videoRange);if(I.videoCodec!==P.videoCodec){const U=Zk(I.videoCodec),M=Zk(P.videoCodec);if(U!==M)return M-U}if(I.uri===P.uri&&I.codecSet!==P.codecSet){const U=x0(I.codecSet),M=x0(P.codecSet);if(U!==M)return M-U}return I.averageBitrate!==P.averageBitrate?I.averageBitrate-P.averageBitrate:0});let m=f[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==f.length)){for(let I=0;I<f.length;I++)if(f[I].pathwayId===c[0].pathwayId){m=f[I];break}}this._levels=c;for(let I=0;I<c.length;I++)if(c[I]===m){var g;this._firstLevel=I;const P=m.bitrate,U=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${P}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const M=Math.min(P,this.hls.config.abrEwmaDefaultEstimateMax);M>U&&U===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=M)}break}const p=o&&!i,y=this.hls.config,v=!!(y.audioStreamController&&y.audioTrackController),A={levels:c,audioTracks:l,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:i,altAudio:v&&!p&&l.some(I=>!!I.url)};this.hls.trigger(Te.MANIFEST_PARSED,A)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const m=new Error("invalid level idx"),g=e<0;if(this.hls.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.LEVEL_SWITCH_ERROR,level:e,fatal:g,error:m,reason:m.message}),g)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,o=i?i.attrs["PATHWAY-ID"]:void 0,l=t[e],d=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=l,r===e&&i&&o===d)return;this.log(`Switching to level ${e} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${d?" with Pathway "+d:""} from level ${r}${o?" with Pathway "+o:""}`);const c={level:e,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(Te.LEVEL_SWITCHING,c);const f=l.details;if(!f||f.live){const m=this.switchParams(l.uri,i==null?void 0:i.details,f);this.loadPlaylist(m)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),r=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=r}}onError(e,t){t.fatal||!t.context||t.context.type===Cr.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Qn.MAIN){const r=t.elementaryStreams;if(!Object.keys(r).some(o=>!!r[o]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var r;const{level:i,details:o}=t,l=t.levelInfo;if(!l){var d;this.warn(`Invalid level index ${i}`),(d=t.deliveryDirectives)!=null&&d.skip&&(o.deltaUpdateFailed=!0);return}if(l===this.currentLevel||t.withoutMultiVariant){l.fragmentError===0&&(l.loadError=0);let c=l.details;c===t.details&&c.advanced&&(c=void 0),this.playlistLoaded(i,t,c)}else(r=t.deliveryDirectives)!=null&&r.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,o=e.attrs["PATHWAY-ID"],l=e.details,d=l==null?void 0:l.age;this.log(`Loading level index ${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o?" Pathway "+o:""}${d&&l.live?" age "+d.toFixed(1)+(l.type&&" "+l.type||""):""} ${r}`),this.hls.trigger(Te.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const r=this._levels.filter((o,l)=>l!==e?!0:(this.steering&&this.steering.removeLevel(o),o===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,o.details&&o.details.fragments.forEach(d=>d.level=-1)),!1));cL(r),this._levels=r,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(Te.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(Te.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function n1(n){const e={};n.forEach(t=>{const r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++})}function sD(){return self.SourceBuffer||self.WebKitSourceBuffer}function oD(){if(!Nd())return!1;const e=sD();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function cB(){if(!oD())return!1;const n=Nd();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(Ev(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(Ev(e,"audio"))))}function fB(){var n;const e=sD();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const hB=100;class mB extends jw{constructor(e,t,r){super(e,t,r,"stream-controller",Qn.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,o=i?i.currentTime:null;if(o===null||!Fn(o)||(this.log(`Media seeked to ${o.toFixed(3)}`),!this.getBufferedFrag(o)))return;const l=this.getFwdBufferInfoAtPos(i,o,Qn.MAIN,0);if(l===null||l.len===0){this.warn(`Main forward buffer length at ${o} on "seeked" event ${l?l.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Te.LEVEL_LOADING,this.onLevelLoading,this),e.on(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Te.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Te.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Te.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Te.BUFFER_CREATED,this.onBufferCreated,this),e.on(Te.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Te.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Te.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Te.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Te.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Te.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Te.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Te.BUFFER_CREATED,this.onBufferCreated,this),e.off(Te.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Te.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Te.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(hB),this.level=-1,!this.startFragRequested){let o=i.startLevel;o===-1&&(i.config.testBandwidth&&this.levels.length>1?(o=0,this.bitrateTest=!0):o=i.firstAutoLevel),i.nextLoadLevel=o,this.level=i.loadLevel,this._hasEnoughToStart=!!t}r>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=nn.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=nn.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case nn.WAITING_LEVEL:{const{levels:t,level:r}=this,i=t==null?void 0:t[r],o=i==null?void 0:i.details;if(o&&(!o.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(o))break;this.state=nn.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=nn.IDLE;break}break}case nn.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),r=this.retryDate;if(!r||t>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:o}=this,l=i==null?void 0:i[o];this.resetStartWhenNotLoaded(l||null),this.state=nn.IDLE}}break}this.state===nn.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[o]))return;const l=r[o],d=this.getMainFwdBufferInfo();if(d===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(d,c)){const A={};this.altAudio===2&&(A.type="video"),this.hls.trigger(Te.BUFFER_EOS,A),this.state=nn.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const f=l.details;if(!f||this.state===nn.WAITING_LEVEL||this.waitForLive(l)){this.level=o,this.state=nn.WAITING_LEVEL,this.startFragRequested=!1;return}const m=d.len,g=this.getMaxBufferLength(l.maxBitrate);if(m>=g)return;this.backtrackFragment&&this.backtrackFragment.start>d.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:d.end;let y=this.getNextFragment(p,f);if(this.couldBacktrack&&!this.fragPrevious&&y&&Ji(y)&&this.fragmentTracker.getState(y)!==oa.OK){var v;const I=((v=this.backtrackFragment)!=null?v:y).sn-f.startSN,P=f.fragments[I-1];P&&y.cc===P.cc&&(y=P,this.fragmentTracker.removeFragment(P))}else this.backtrackFragment&&d.len&&(this.backtrackFragment=null);if(y&&this.isLoopLoading(y,p)){if(!y.gap){const I=this.audioOnly&&!this.altAudio?hi.AUDIO:hi.VIDEO,P=(I===hi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;P&&this.afterBufferFlushed(P,I,Qn.MAIN)}y=this.getNextFragmentLoopLoading(y,f,d,Qn.MAIN,g)}y&&(y.initSegment&&!y.initSegment.data&&!this.bitrateTest&&(y=y.initSegment),this.loadFragment(y,l,p))}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);i===oa.NOT_LOADED||i===oa.PARTIAL?Ji(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,r):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Qn.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let r;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const d=this.getMainFwdBufferInfo();if(!d||d.len<o.targetduration*2)return}if(!t.paused&&e){const d=this.hls.nextLoadLevel,c=e[d],f=this.fragLastKbps;f&&this.fragCurrent?r=this.fragCurrent.duration*c.maxBitrate/(1e3*f)+1:r=0}else r=0;const l=this.getBufferedFrag(t.currentTime+r);if(l){const d=this.followingBufferedFrag(l);if(d){this.abortCurrentFrag();const c=d.maxStartPTS?d.maxStartPTS:d.start,f=d.duration,m=Math.max(l.end,c+Math.min(Math.max(f-this.config.maxFragLookUpTolerance,f*(this.couldBacktrack?.5:.125)),f*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(m,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case nn.KEY_LOADING:case nn.FRAG_LOADING:case nn.FRAG_LOADING_WAITING_RETRY:case nn.PARSING:case nn.PARSED:this.state=nn.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;Ss(r,"playing",this.onMediaPlaying),Ss(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:r}=this;r&&(Ws(r,"playing",this.onMediaPlaying),Ws(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(Te.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let r=!1,i=!1;for(let o=0;o<t.levels.length;o++){const l=t.levels[o].audioCodec;l&&(r=r||l.indexOf("mp4a.40.2")!==-1,i=i||l.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=r&&i&&!fB(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==nn.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=nn.WAITING_LEVEL)}onLevelLoaded(e,t){var r;const{levels:i,startFragRequested:o}=this,l=t.level,d=t.details,c=d.totalduration;if(!i){this.warn(`Levels were reset while loading level ${l}`);return}this.log(`Level ${l} loaded [${d.startSN},${d.endSN}]${d.lastPartSn?`[part-${d.lastPartSn}-${d.lastPartIndex}]`:""}, cc [${d.startCC}, ${d.endCC}] duration:${c}`);const f=t.levelInfo,m=this.fragCurrent;m&&(this.state===nn.FRAG_LOADING||this.state===nn.FRAG_LOADING_WAITING_RETRY)&&m.level!==t.level&&m.loader&&this.abortCurrentFrag();let g=0;if(d.live||(r=f.details)!=null&&r.live){var p;if(this.checkLiveUpdate(d),d.deltaUpdateFailed)return;g=this.alignPlaylists(d,f.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(f.details=d,this.levelLastLoaded=f,o||this.setStartPosition(d,g),this.hls.trigger(Te.LEVEL_UPDATED,{details:d,level:l}),this.state===nn.WAITING_LEVEL){if(this.waitForCdnTuneIn(d))return;this.state=nn.IDLE}o&&d.live&&this.synchronizeToLiveEdge(d),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,o=this.getLoadPosition(),l=e.fragmentStart,d=e.edge,c=o>=l-t.maxFragLookUpTolerance&&o<=d;if(i!==null&&r.duration>i&&(o<i||!c)){const m=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!c&&r.readyState<4||o<d-m)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${d}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var f;const g=pr.bufferInfo(r,i,0);if(!((f=g.buffered)!=null&&f.length)){r.currentTime=i;return}if(g.start<=o){r.currentTime=i;return}const{nextStart:y}=pr.bufferedInfo(g.buffered,o,0);y&&(r.currentTime=y)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:i,payload:o}=e,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const d=l[r.level];if(!d){this.warn(`Level ${r.level} not found on progress`);return}const c=d.details;if(!c){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const f=d.videoCodec,m=c.PTSKnown||!c.live,g=(t=r.initSegment)==null?void 0:t.data,p=this._getAudioCodec(d),y=this.transmuxer=this.transmuxer||new NL(this.hls,Qn.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,A=v!==-1,I=new zw(r.level,r.sn,r.stats.chunkCount,o.byteLength,v,A),P=this.initPTS[r.cc];y.push(o,g,p,f,r,i,c.totalduration,m,I,P)}onAudioTrackSwitching(e,t){const r=this.hls,i=this.altAudio===2;if(D0(t.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),r.once(Te.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(Te.AUDIO_TRACK_SWITCHED,t)}),r.trigger(Te.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(Te.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=D0(t.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,t){const r=t.tracks;let i,o,l=!1;for(const d in r){const c=r[d];if(c.id==="main"){if(o=d,i=c,d==="video"){const f=r[d];f&&(this.videoBuffer=f.buffer)}}else l=!0}l&&i?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:i}=t,o=r.type===Qn.MAIN;if(o){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===nn.PARSED&&(this.state=nn.IDLE);return}const d=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*d.total/(d.buffering.end-d.loading.first)),Ji(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const l=this.media;l&&(!this._hasEnoughToStart&&pr.getBuffered(l).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),o&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var r;if(t.fatal){this.state=nn.ERROR;return}switch(t.details){case It.FRAG_GAP:case It.FRAG_PARSING_ERROR:case It.FRAG_DECRYPT_ERROR:case It.FRAG_LOAD_ERROR:case It.FRAG_LOAD_TIMEOUT:case It.KEY_LOAD_ERROR:case It.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Qn.MAIN,t);break;case It.LEVEL_LOAD_ERROR:case It.LEVEL_LOAD_TIMEOUT:case It.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===nn.WAITING_LEVEL&&((r=t.context)==null?void 0:r.type)===Cr.LEVEL&&(this.state=nn.IDLE);break;case It.BUFFER_ADD_CODEC_ERROR:case It.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case It.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case It.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=nn.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==hi.AUDIO||!this.altAudio){const r=(t===hi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,t,Qn.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const o=this.getLevelDetails(),l=pr.getBuffered(e),d=l.length?l.start(0):0,c=d-r,f=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||c>0&&(c<f||this.loadingParts&&c<2*((o==null?void 0:o.partTarget)||0)))&&(this.log(`adjusting start position by ${c} to match buffer start`),r+=c,this.startPosition=r),t<r&&(this.log(`seek to target start position ${r} from current time ${t} buffer start ${d}`),e.currentTime=r)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(r=>{const{hls:i}=this,o=r==null?void 0:r.frag;if(!o||this.fragContextChanged(o))return;t.fragmentError=0,this.state=nn.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const l=o.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),i.trigger(Te.FRAG_LOADED,r),o.bitrateTest=!1})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:r}=this,{remuxResult:i,chunkMeta:o}=e,l=this.getCurrentContext(o);if(!l){this.resetWhenMissingContext(o);return}const{frag:d,part:c,level:f}=l,{video:m,text:g,id3:p,initSegment:y}=i,{details:v}=f,A=this.altAudio?void 0:i.audio;if(this.fragContextChanged(d)){this.fragmentTracker.removeFragment(d);return}if(this.state=nn.PARSING,y){const I=y.tracks;if(I){const B=d.initSegment||d;if(this.unhandledEncryptionError(y,d))return;this._bufferInitSegment(f,I,B,o),r.trigger(Te.FRAG_PARSING_INIT_SEGMENT,{frag:B,id:t,tracks:I})}const P=y.initPTS,U=y.timescale,M=this.initPTS[d.cc];if(Fn(P)&&(!M||M.baseTime!==P||M.timescale!==U)){const B=y.trackId;this.initPTS[d.cc]={baseTime:P,timescale:U,trackId:B},r.trigger(Te.INIT_PTS_FOUND,{frag:d,id:t,initPTS:P,timescale:U,trackId:B})}}if(m&&v){A&&m.type==="audiovideo"&&this.logMuxedErr(d);const I=v.fragments[d.sn-1-v.startSN],P=d.sn===v.startSN,U=!I||d.cc>I.cc;if(i.independent!==!1){const{startPTS:M,endPTS:B,startDTS:ie,endDTS:L}=m;if(c)c.elementaryStreams[m.type]={startPTS:M,endPTS:B,startDTS:ie,endDTS:L};else if(m.firstKeyFrame&&m.independent&&o.id===1&&!U&&(this.couldBacktrack=!0),m.dropped&&m.independent){const w=this.getMainFwdBufferInfo(),O=(w?w.end:this.getLoadPosition())+this.config.maxBufferHole,oe=m.firstKeyFramePTS?m.firstKeyFramePTS:M;if(!P&&O<oe-this.config.maxBufferHole&&!U){this.backtrack(d);return}else U&&(d.gap=!0);d.setElementaryStreamInfo(m.type,d.start,B,d.start,L,!0)}else P&&M-(v.appliedTimelineOffset||0)>pb&&(d.gap=!0);d.setElementaryStreamInfo(m.type,M,B,ie,L),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(m,d,c,o,P||U)}else if(P||U)d.gap=!0;else{this.backtrack(d);return}}if(A){const{startPTS:I,endPTS:P,startDTS:U,endDTS:M}=A;c&&(c.elementaryStreams[hi.AUDIO]={startPTS:I,endPTS:P,startDTS:U,endDTS:M}),d.setElementaryStreamInfo(hi.AUDIO,I,P,U,M),this.bufferFragmentData(A,d,c,o)}if(v&&p!=null&&p.samples.length){const I={id:t,frag:d,details:v,samples:p.samples};r.trigger(Te.FRAG_PARSING_METADATA,I)}if(v&&g){const I={id:t,frag:d,details:v,samples:g.samples};r.trigger(Te.FRAG_PARSING_USERDATA,I)}}logMuxedErr(e){this.warn(`${Ji(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,r,i){if(this.state!==nn.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));const{audio:o,video:l,audiovideo:d}=t;if(o){const f=e.audioCodec;let m=ub(o.codec,f);m==="mp4a"&&(m="mp4a.40.5");const g=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){m&&(m.indexOf("mp4a.40.5")!==-1?m="mp4a.40.2":m="mp4a.40.5");const p=o.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&g.indexOf("firefox")===-1&&(m="mp4a.40.5")}m&&m.indexOf("mp4a.40.5")!==-1&&g.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(m="mp4a.40.2",this.log(`Android: force audio codec to ${m}`)),f&&f!==m&&this.log(`Swapping manifest audio codec "${f}" for "${m}"`),o.levelCodec=m,o.id=Qn.MAIN,this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${m||""}/${f||""}/${o.codec}]`),delete t.audiovideo}if(l){l.levelCodec=e.videoCodec,l.id=Qn.MAIN;const f=l.codec;if((f==null?void 0:f.length)===4)switch(f){case"hvc1":case"hev1":l.codec="hvc1.1.6.L120.90";break;case"av01":l.codec="av01.0.04M.08";break;case"avc1":l.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${e.videoCodec||""}/${f}]${l.codec!==f?" parsed-corrected="+l.codec:""}${l.supplemental?" supplemental="+l.supplemental:""}`),delete t.audiovideo}d&&(this.log(`Init audiovideo buffer, container:${d.container}, codecs[level/parsed]=[${e.codecs}/${d.codec}]`),delete t.video,delete t.audio);const c=Object.keys(t);if(c.length){if(this.hls.trigger(Te.BUFFER_CODECS,t),!this.hls)return;c.forEach(f=>{const g=t[f].initSegment;g!=null&&g.byteLength&&this.hls.trigger(Te.BUFFER_APPENDING,{type:f,data:g,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Qn.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,r=e==null?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=nn.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(pr.isBuffered(e,r)?t=this.getAppendedFrag(r):pr.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,o=t.level;(!i||t.sn!==i.sn||i.level!==o)&&(this.fragPlaying=t,this.hls.trigger(Te.FRAG_CHANGED,{frag:t}),(!i||i.level!==o)&&this.hls.trigger(Te.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Fn(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Fn(t)){const r=this.getLevelDetails(),i=this.currentFrag||(r?bf(null,r.fragments,t):null);if(i){const o=i.programDateTime;if(o!==null){const l=o+(t-i.start)*1e3;return new Date(l)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class gB{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=It.KEY_LOAD_ERROR,r,i,o){return new Zl({type:Zn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:r,networkDetails:i})}loadClear(e,t,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,o=t.length;i<o;i++){const l=t[i];if(e.cc<=l.cc&&(!Ji(e)||!Ji(l)||e.sn<l.sn)||!r&&i==o-1)return this.emeController.selectKeySystemFormat(l).then(d=>{if(!this.emeController)return;l.setKeyFormat(d);const c=cb(d);if(c)return this.emeController.getKeySystemAccess([c])})}if(this.config.requireKeySystemAccessOnStart){const i=Dp(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,i;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const f=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,It.KEY_LOAD_ERROR,f))}const l=o.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,It.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));let d=this.keyUriToKeyInfo[l];if((r=d)!=null&&r.decryptdata.key)return o.key=d.decryptdata.key,Promise.resolve({frag:e,keyInfo:d});if((i=d)!=null&&i.keyLoadPromise){var c;switch((c=d.mediaKeySessionContext)==null?void 0:c.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return d.keyLoadPromise.then(f=>(o.key=f.keyInfo.decryptdata.key,{frag:e,keyInfo:d}))}}switch(d=this.keyUriToKeyInfo[l]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(d,e):this.loadKeyEME(d,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(d,e);default:return Promise.reject(this.createKeyLoadError(e,It.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(o=>(e.mediaKeySessionContext=o,r))).catch(o=>{throw e.keyLoadPromise=null,o})}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,i=r.loader,o=new i(r);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((l,d)=>{const c={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},f=r.keyLoadPolicy.default,m={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(p,y,v,A)=>{const{frag:I,keyInfo:P,url:U}=v;if(!I.decryptdata||P!==this.keyUriToKeyInfo[U])return d(this.createKeyLoadError(I,It.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),A));P.decryptdata.key=I.decryptdata.key=new Uint8Array(p.data),I.keyLoader=null,P.loader=null,l({frag:I,keyInfo:P})},onError:(p,y,v,A)=>{this.resetLoader(y),d(this.createKeyLoadError(t,It.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),v,ai({url:c.url,data:void 0},p)))},onTimeout:(p,y,v)=>{this.resetLoader(y),d(this.createKeyLoadError(t,It.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(p,y,v)=>{this.resetLoader(y),d(this.createKeyLoadError(t,It.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};o.load(c,m,g)})}resetLoader(e){const{frag:t,keyInfo:r,url:i}=e,o=r.loader;t.keyLoader===o&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],o&&o.destroy()}}function r1(n){const{type:e}=n;switch(e){case Cr.AUDIO_TRACK:return Qn.AUDIO;case Cr.SUBTITLE_TRACK:return Qn.SUBTITLE;default:return Qn.MAIN}}function K_(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class pB{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Te.LEVEL_LOADING,this.onLevelLoading,this),e.on(Te.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Te.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(Te.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(Te.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Te.LEVEL_LOADING,this.onLevelLoading,this),e.off(Te.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Te.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(Te.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,i=t.loader,o=r||i,l=new o(t);return this.loaders[e.type]=l,l}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Cr.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:r,level:i,pathwayId:o,url:l,deliveryDirectives:d,levelInfo:c}=t;this.load({id:r,level:i,pathwayId:o,responseType:"text",type:Cr.LEVEL,url:l,deliveryDirectives:d,levelOrTrack:c})}onAudioTrackLoading(e,t){const{id:r,groupId:i,url:o,deliveryDirectives:l,track:d}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:Cr.AUDIO_TRACK,url:o,deliveryDirectives:l,levelOrTrack:d})}onSubtitleTrackLoading(e,t){const{id:r,groupId:i,url:o,deliveryDirectives:l,track:d}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:Cr.SUBTITLE_TRACK,url:o,deliveryDirectives:l,levelOrTrack:d})}onLevelsUpdated(e,t){const r=this.loaders[Cr.LEVEL];if(r){const i=r.context;i&&!t.levels.some(o=>o===i.levelOrTrack)&&(r.abort(),delete this.loaders[Cr.LEVEL])}}load(e){var t;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const f=this.hls.logger,m=i.context;if(m&&m.levelOrTrack===e.levelOrTrack&&(m.url===e.url||m.deliveryDirectives&&!e.deliveryDirectives)){m.url===e.url?f.log(`[playlist-loader]: ignore ${e.url} ongoing request`):f.log(`[playlist-loader]: ignore ${e.url} in favor of ${m.url}`);return}f.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let o;if(e.type===Cr.MANIFEST?o=r.manifestLoadPolicy.default:o=si({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Fn((t=e.deliveryDirectives)==null?void 0:t.part)){let f;if(e.type===Cr.LEVEL&&e.level!==null?f=this.hls.levels[e.level].details:e.type===Cr.AUDIO_TRACK&&e.id!==null?f=this.hls.audioTracks[e.id].details:e.type===Cr.SUBTITLE_TRACK&&e.id!==null&&(f=this.hls.subtitleTracks[e.id].details),f){const m=f.partTarget,g=f.targetduration;if(m&&g){const p=Math.max(m*3,g*.8)*1e3;o=si({},o,{maxTimeToFirstByteMs:Math.min(p,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,o.maxTimeToFirstByteMs)})}}}const l=o.errorRetry||o.timeoutRetry||{},d={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},c={onSuccess:(f,m,g,p)=>{const y=this.getInternalLoader(g);this.resetInternalLoader(g.type);const v=f.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(f,g,new Error("no EXTM3U delimiter"),p||null,m);return}m.parsing.start=performance.now(),cl.isMediaPlaylist(v)||g.type!==Cr.MANIFEST?this.handleTrackOrLevelPlaylist(f,m,g,p||null,y):this.handleMasterPlaylist(f,m,g,p)},onError:(f,m,g,p)=>{this.handleNetworkError(m,g,!1,f,p)},onTimeout:(f,m,g)=>{this.handleNetworkError(m,g,!0,void 0,f)}};i.load(e,d,c)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,r,i){const o=this.hls,l=e.data,d=K_(e,r),c=cl.parseMasterPlaylist(l,d);if(c.playlistParsingError){this.handleManifestParsingError(e,r,c.playlistParsingError,i,t);return}const{contentSteering:f,levels:m,sessionData:g,sessionKeys:p,startTimeOffset:y,variableList:v}=c;this.variableList=v;const{AUDIO:A=[],SUBTITLES:I,"CLOSED-CAPTIONS":P}=cl.parseMasterPlaylistMedia(l,d,c);A.length&&!A.some(M=>!M.url)&&m[0].audioCodec&&!m[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),A.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Di({}),bitrate:0,url:""})),o.trigger(Te.MANIFEST_LOADED,{levels:m,audioTracks:A,subtitles:I,captions:P,contentSteering:f,url:d,stats:t,networkDetails:i,sessionData:g,sessionKeys:p,startTimeOffset:y,variableList:v})}handleTrackOrLevelPlaylist(e,t,r,i,o){const l=this.hls,{id:d,level:c,type:f}=r,m=K_(e,r),g=Fn(c)?c:Fn(d)?d:0,p=r1(r),y=cl.parseLevelPlaylist(e.data,m,g,p,0,this.variableList);if(f===Cr.MANIFEST){const v={attrs:new Di({}),bitrate:0,details:y,name:"",url:m};y.requestScheduled=t.loading.start+lL(y,0),l.trigger(Te.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:m,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=y,this.handlePlaylistLoaded(y,e,t,r,i,o)}handleManifestParsingError(e,t,r,i,o){this.hls.trigger(Te.ERROR,{type:Zn.NETWORK_ERROR,details:It.MANIFEST_PARSING_ERROR,fatal:t.type===Cr.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:o})}handleNetworkError(e,t,r=!1,i,o){let l=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Cr.LEVEL?l+=`: ${e.level} id: ${e.id}`:(e.type===Cr.AUDIO_TRACK||e.type===Cr.SUBTITLE_TRACK)&&(l+=` id: ${e.id} group-id: "${e.groupId}"`);const d=new Error(l);this.hls.logger.warn(`[playlist-loader]: ${l}`);let c=It.UNKNOWN,f=!1;const m=this.getInternalLoader(e);switch(e.type){case Cr.MANIFEST:c=r?It.MANIFEST_LOAD_TIMEOUT:It.MANIFEST_LOAD_ERROR,f=!0;break;case Cr.LEVEL:c=r?It.LEVEL_LOAD_TIMEOUT:It.LEVEL_LOAD_ERROR,f=!1;break;case Cr.AUDIO_TRACK:c=r?It.AUDIO_TRACK_LOAD_TIMEOUT:It.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case Cr.SUBTITLE_TRACK:c=r?It.SUBTITLE_TRACK_LOAD_TIMEOUT:It.SUBTITLE_LOAD_ERROR,f=!1;break}m&&this.resetInternalLoader(e.type);const g={type:Zn.NETWORK_ERROR,details:c,fatal:f,url:e.url,loader:m,context:e,error:d,networkDetails:t,stats:o};if(i){const p=(t==null?void 0:t.url)||e.url;g.response=ai({url:p,data:void 0},i)}this.hls.trigger(Te.ERROR,g)}handlePlaylistLoaded(e,t,r,i,o,l){const d=this.hls,{type:c,level:f,id:m,groupId:g,deliveryDirectives:p}=i,y=K_(t,i),v=r1(i),A=typeof i.level=="number"&&v===Qn.MAIN?f:void 0;if(!e.fragments.length){const P=e.playlistParsingError=new Error("No Segments found in Playlist");d.trigger(Te.ERROR,{type:Zn.NETWORK_ERROR,details:It.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:P,reason:P.message,response:t,context:i,level:A,parent:v,networkDetails:o,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const I=e.playlistParsingError;if(I){if(this.hls.logger.warn(`${I} ${e.url}`),!d.config.ignorePlaylistParsingErrors){d.trigger(Te.ERROR,{type:Zn.NETWORK_ERROR,details:It.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:I,reason:I.message,response:t,context:i,level:A,parent:v,networkDetails:o,stats:r});return}e.playlistParsingError=null}switch(e.live&&l&&(l.getCacheAge&&(e.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case Cr.MANIFEST:case Cr.LEVEL:d.trigger(Te.LEVEL_LOADED,{details:e,levelInfo:i.levelOrTrack||d.levels[0],level:A||0,id:m||0,stats:r,networkDetails:o,deliveryDirectives:p,withoutMultiVariant:c===Cr.MANIFEST});break;case Cr.AUDIO_TRACK:d.trigger(Te.AUDIO_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:m||0,groupId:g||"",stats:r,networkDetails:o,deliveryDirectives:p});break;case Cr.SUBTITLE_TRACK:d.trigger(Te.SUBTITLE_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:m||0,groupId:g||"",stats:r,networkDetails:o,deliveryDirectives:p});break}}}class Va{static get version(){return _v}static isMSESupported(){return oD()}static isSupported(){return cB()}static getMediaSource(){return Nd()}static get Events(){return Te}static get MetadataSchema(){return _s}static get ErrorTypes(){return Zn}static get ErrorDetails(){return It}static get DefaultConfig(){return Va.defaultConfig?Va.defaultConfig:Jz}static set DefaultConfig(e){Va.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new qw,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=k2(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=tB(Va.DefaultConfig,e,t);this.userConfig=e,r.progressive&&nB(r,t);const{abrController:i,bufferController:o,capLevelController:l,errorController:d,fpsController:c}=r,f=new d(this),m=this.abrController=new i(this),g=new vF(this),p=r.interstitialsController,y=p?this.interstitialsController=new p(this,Va):null,v=this.bufferController=new o(this,g),A=this.capLevelController=new l(this),I=new c(this),P=new pB(this),U=r.contentSteeringController,M=U?new U(this):null,B=this.levelController=new dB(this,M),ie=new lB(this),L=new gB(this.config),w=this.streamController=new mB(this,g,L),O=this.gapController=new sB(this,g);A.setStreamController(w),I.setStreamController(w);const oe=[P,B,w];y&&oe.splice(1,0,y),M&&oe.splice(1,0,M),this.networkControllers=oe;const D=[m,v,O,A,I,ie,g];this.audioTrackController=this.createController(r.audioTrackController,oe);const ve=r.audioStreamController;ve&&oe.push(this.audioStreamController=new ve(this,g,L)),this.subtitleTrackController=this.createController(r.subtitleTrackController,oe);const Le=r.subtitleStreamController;Le&&oe.push(this.subtititleStreamController=new Le(this,g,L)),this.createController(r.timelineController,D),L.emeController=this.emeController=this.createController(r.emeController,D),this.cmcdController=this.createController(r.cmcdController,D),this.latencyController=this.createController(uB,D),this.coreComponents=D,oe.push(f);const te=f.onErrorOut;typeof te=="function"&&this.on(Te.ERROR,te,f),this.on(Te.MANIFEST_LOADED,P.onManifestLoaded,P)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,i){this._emitter.off(e,t,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===Te.ERROR;this.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(Te.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const o=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(Te.ERROR,{type:Zn.OTHER_ERROR,details:It.ATTACH_MEDIA_ERROR,fatal:!0,error:o});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,r=t?e.media:e,i=t?e:{media:r};this._media=r,this.trigger(Te.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(Te.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(Te.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,r=this._url,i=this._url=Dw.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Te.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Qn.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Qn.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Qn.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=sz()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){tF(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,r)for(let o=i;o--;){const l=e[o].attrs["HDCP-LEVEL"];if(l&&l<=r)return o}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const r=ZC(t);return QC(e,r,navigator.mediaCapabilities)}}Va.defaultConfig=void 0;const vB=n=>{var e,t,r,i,lD,l,uD;return e=class extends n{constructor(){super();cn(this,i);cn(this,t,null);cn(this,r,null);cn(this,l,()=>{var m,g,p;(m=this.nativeEl)!=null&&m.webkitCurrentPlaybackTargetIsWireless?(g=this.api)==null||g.stopLoad():(p=this.api)==null||p.startLoad()});rr(this,i,uD).call(this,"config")}get config(){return qe(this,r)}set config(m){Tt(this,r,m)}attributeChangedCallback(m,g,p){m!=="src"&&super.attributeChangedCallback(m,g,p),m==="src"&&g!=p&&this.load()}async load(){var m,g;const p=!this.api;if(rr(this,i,lD).call(this),!!this.src){if(p&&!qe(this,r)&&Tt(this,r,JSON.parse(((m=this.shadowRoot.getElementById("config"))==null?void 0:m.textContent)||"{}")),Va.isSupported()){switch(this.api=new Va({liveDurationInfinity:!0,autoStartLoad:!1,...this.config}),await Promise.resolve(),this.api.loadSource(this.src),this.api.attachMedia(this.nativeEl),this.nativeEl.preload){case"none":{const I=()=>this.api.startLoad();this.nativeEl.addEventListener("play",I,{once:!0}),this.api.on(Va.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",I)});break}case"metadata":{const I=this.api.config.maxBufferLength,P=this.api.config.maxBufferSize;this.api.config.maxBufferLength=1,this.api.config.maxBufferSize=1;const U=()=>{this.api.config.maxBufferLength=I,this.api.config.maxBufferSize=P};this.nativeEl.addEventListener("play",U,{once:!0}),this.api.on(Va.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",U)}),this.api.startLoad();break}default:this.api.startLoad()}this.nativeEl.webkitCurrentPlaybackTargetIsWireless&&this.api.stopLoad(),this.nativeEl.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",qe(this,l)),Tt(this,t,document.createElement("source")),qe(this,t).setAttribute("type","application/x-mpegURL"),qe(this,t).setAttribute("src",this.src),this.nativeEl.disableRemotePlayback=!1,this.nativeEl.append(qe(this,t));const y=new WeakMap;this.api.on(Va.Events.MANIFEST_PARSED,(I,P)=>{this.nativeEl.autoplay&&this.nativeEl.paused&&this.nativeEl.play().catch(M=>{console.warn("Autoplay failed:",M)}),A();let U=this.videoTracks.getTrackById("main");U||(U=this.addVideoTrack("main"),U.id="main",U.selected=!0);for(const[M,B]of P.levels.entries()){const ie=U.addRendition(B.url[0],B.width,B.height,B.videoCodec,B.bitrate);y.set(B,`${M}`),ie.id=`${M}`}for(let[M,B]of P.audioTracks.entries()){const ie=B.default?"main":"alternative",L=this.addAudioTrack(ie,B.name,B.lang);L.id=`${M}`,B.default&&(L.enabled=!0)}}),this.audioTracks.addEventListener("change",()=>{var I;const P=+((I=[...this.audioTracks].find(M=>M.enabled))==null?void 0:I.id),U=this.api.audioTracks.map(M=>M.id);P!=this.api.audioTrack&&U.includes(P)&&(this.api.audioTrack=P)}),this.api.on(Va.Events.LEVELS_UPDATED,(I,P)=>{const U=this.videoTracks[this.videoTracks.selectedIndex??0];if(!U)return;const M=P.levels.map(B=>y.get(B));for(const B of this.videoRenditions)B.id&&!M.includes(B.id)&&U.removeRendition(B)});const v=I=>{const P=I.target.selectedIndex;P!=this.api.nextLevel&&(this.api.nextLevel=P)};(g=this.videoRenditions)==null||g.addEventListener("change",v);const A=()=>{for(const I of this.videoTracks)this.removeVideoTrack(I);for(const I of this.audioTracks)this.removeAudioTrack(I)};this.api.once(Va.Events.DESTROYING,A);return}await Promise.resolve(),this.nativeEl.canPlayType("application/vnd.apple.mpegurl")&&(this.nativeEl.src=this.src)}}},t=new WeakMap,r=new WeakMap,i=new WeakSet,lD=function(){var m,g;(m=qe(this,t))==null||m.remove(),(g=this.nativeEl)==null||g.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",qe(this,l)),this.api&&(this.api.detachMedia(),this.api.destroy(),this.api=null)},l=new WeakMap,uD=function(m){if(Object.prototype.hasOwnProperty.call(this,m)){const g=this[m];delete this[m],this[m]=g}},tr(e,"shadowRootOptions",{...n.shadowRootOptions}),tr(e,"getTemplateHTML",(m,g={})=>{const{src:p,...y}=m;return`
        <script type="application/json" id="config">
          ${JSON.stringify(g.config||{})}
        <\/script>
        ${n.getTemplateHTML(y)}
      `}),e},dD=vB(OC(xd));globalThis.customElements&&!globalThis.customElements.get("hls-video")&&globalThis.customElements.define("hls-video",dD);var yB=dD,EB=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),bB={className:"class",htmlFor:"for"};function cD(n){return n.toLowerCase()}function i1(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function TB({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=cD,toAttributeValue:d=i1}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(EB.has(B)){U[B]=ie;continue}const L=l(bB[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=i1(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)a1(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)a1(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function a1(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var _B=TB({react:jr,tagName:"hls-video",elementClass:yB,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":cD(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const SB=Object.freeze(Object.defineProperty({__proto__:null,default:_B},Symbol.toStringTag,{value:"Module"}));var Hv;class z0 extends xd{constructor(){super(...arguments);cn(this,Hv)}attributeChangedCallback(t,r,i){t!=="src"&&super.attributeChangedCallback(t,r,i),t==="src"&&r!=i&&this.load()}async load(){if(qe(this,Hv))this.api.attachSource(this.src);else{Tt(this,Hv,!0);const t=await go(()=>Promise.resolve().then(()=>z7),void 0);this.api=t.MediaPlayer().create(),this.api.initialize(this.nativeEl,this.src,this.autoplay)}}}Hv=new WeakMap,tr(z0,"shadowRootOptions",{...xd.shadowRootOptions}),tr(z0,"getTemplateHTML",t=>{const{src:r,...i}=t;return xd.getTemplateHTML(i)});globalThis.customElements&&!globalThis.customElements.get("dash-video")&&globalThis.customElements.define("dash-video",z0);var AB=z0,wB=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),IB={className:"class",htmlFor:"for"};function fD(n){return n.toLowerCase()}function s1(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function kB({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=fD,toAttributeValue:d=s1}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(wB.has(B)){U[B]=ie;continue}const L=l(IB[B]??B);if(B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=s1(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)o1(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)o1(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function o1(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var RB=kB({react:jr,tagName:"dash-video",elementClass:AB,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":fD(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const xB=Object.freeze(Object.defineProperty({__proto__:null,default:RB},Symbol.toStringTag,{value:"Module"}));var CB=Object.create,hD=Object.defineProperty,LB=Object.getOwnPropertyDescriptor,DB=Object.getOwnPropertyNames,NB=Object.getPrototypeOf,PB=Object.prototype.hasOwnProperty,mD=function(n,e){return function(){return n&&(e=n(n=0)),e}},as=function(n,e){return function(){return e||n((e={exports:{}}).exports,e),e.exports}},MB=function(n,e,t,r){if(e&&typeof e=="object"||typeof e=="function")for(var i=DB(e),o=0,l=i.length,d;o<l;o++)d=i[o],!PB.call(n,d)&&d!==t&&hD(n,d,{get:(function(c){return e[c]}).bind(null,d),enumerable:!(r=LB(e,d))||r.enumerable});return n},ws=function(n,e,t){return t=n!=null?CB(NB(n)):{},MB(!n||!n.__esModule?hD(t,"default",{value:n,enumerable:!0}):t,n)},wo=as(function(n,e){var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t={},e.exports=t});function Sf(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):Sf(n,e)}var Af=mD(function(){Af()});function gD(n){"@swc/helpers - typeof";return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}var pD=mD(function(){}),vD=as(function(n,e){var t=Array.prototype.slice;e.exports=r;function r(i,o){for(("length"in i)||(i=[i]),i=t.call(i);i.length;){var l=i.shift(),d=o(l);if(d)return d;l.childNodes&&l.childNodes.length&&(i=t.call(l.childNodes).concat(i))}}}),OB=as(function(n,e){Af(),e.exports=t;function t(r,i){if(!Sf(this,t))return new t(r,i);this.data=r,this.nodeValue=r,this.length=r.length,this.ownerDocument=i||null}t.prototype.nodeType=8,t.prototype.nodeName="#comment",t.prototype.toString=function(){return"[object Comment]"}}),FB=as(function(n,e){Af(),e.exports=t;function t(r,i){if(!Sf(this,t))return new t(r);this.data=r||"",this.length=this.data.length,this.ownerDocument=i||null}t.prototype.type="DOMTextNode",t.prototype.nodeType=3,t.prototype.nodeName="#text",t.prototype.toString=function(){return this.data},t.prototype.replaceData=function(r,i,o){var l=this.data,d=l.substring(0,r),c=l.substring(r+i,l.length);this.data=d+o+c,this.length=this.data.length}}),yD=as(function(n,e){e.exports=t;function t(r){var i=this,o=r.type;r.target||(r.target=i),i.listeners||(i.listeners={});var l=i.listeners[o];if(l)return l.forEach(function(d){r.currentTarget=i,typeof d=="function"?d(r):d.handleEvent(r)});i.parentNode&&i.parentNode.dispatchEvent(r)}}),ED=as(function(n,e){e.exports=t;function t(r,i){var o=this;o.listeners||(o.listeners={}),o.listeners[r]||(o.listeners[r]=[]),o.listeners[r].indexOf(i)===-1&&o.listeners[r].push(i)}}),bD=as(function(n,e){e.exports=t;function t(r,i){var o=this;if(o.listeners&&o.listeners[r]){var l=o.listeners[r],d=l.indexOf(i);d!==-1&&l.splice(d,1)}}}),UB=as(function(n,e){pD(),e.exports=r;var t=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(p){switch(p.nodeType){case 3:return m(p.data);case 8:return"<!--"+p.data+"-->";default:return i(p)}}function i(p){var y=[],v=p.tagName;return p.namespaceURI==="http://www.w3.org/1999/xhtml"&&(v=v.toLowerCase()),y.push("<"+v+f(p)+d(p)),t.indexOf(v)>-1?y.push(" />"):(y.push(">"),p.childNodes.length?y.push.apply(y,p.childNodes.map(r)):p.textContent||p.innerText?y.push(m(p.textContent||p.innerText)):p.innerHTML&&y.push(p.innerHTML),y.push("</"+v+">")),y.join("")}function o(p,y){var v=gD(p[y]);return y==="style"&&Object.keys(p.style).length>0?!0:p.hasOwnProperty(y)&&(v==="string"||v==="boolean"||v==="number")&&y!=="nodeName"&&y!=="className"&&y!=="tagName"&&y!=="textContent"&&y!=="innerText"&&y!=="namespaceURI"&&y!=="innerHTML"}function l(p){if(typeof p=="string")return p;var y="";return Object.keys(p).forEach(function(v){var A=p[v];v=v.replace(/[A-Z]/g,function(I){return"-"+I.toLowerCase()}),y+=v+":"+A+";"}),y}function d(p){var y=p.dataset,v=[];for(var A in y)v.push({name:"data-"+A,value:y[A]});return v.length?c(v):""}function c(p){var y=[];return p.forEach(function(v){var A=v.name,I=v.value;A==="style"&&(I=l(I)),y.push(A+'="'+g(I)+'"')}),y.length?" "+y.join(" "):""}function f(p){var y=[];for(var v in p)o(p,v)&&y.push({name:v,value:p[v]});for(var A in p._attributes)for(var I in p._attributes[A]){var P=p._attributes[A][I],U=(P.prefix?P.prefix+":":"")+I;y.push({name:U,value:P.value})}return p.className&&y.push({name:"class",value:p.className}),y.length?c(y):""}function m(p){var y="";return typeof p=="string"?y=p:p&&(y=p.toString()),y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(p){return m(p).replace(/"/g,"&quot;")}}),TD=as(function(n,e){Af();var t=vD(),r=yD(),i=ED(),o=bD(),l=UB(),d="http://www.w3.org/1999/xhtml";e.exports=c;function c(f,m,g){if(!Sf(this,c))return new c(f);var p=g===void 0?d:g||null;this.tagName=p===d?String(f).toUpperCase():f,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=m||null,this.namespaceURI=p,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}c.prototype.type="DOMElement",c.prototype.nodeType=1,c.prototype.appendChild=function(f){return f.parentNode&&f.parentNode.removeChild(f),this.childNodes.push(f),f.parentNode=this,f},c.prototype.replaceChild=function(f,m){f.parentNode&&f.parentNode.removeChild(f);var g=this.childNodes.indexOf(m);return m.parentNode=null,this.childNodes[g]=f,f.parentNode=this,m},c.prototype.removeChild=function(f){var m=this.childNodes.indexOf(f);return this.childNodes.splice(m,1),f.parentNode=null,f},c.prototype.insertBefore=function(f,m){f.parentNode&&f.parentNode.removeChild(f);var g=m==null?-1:this.childNodes.indexOf(m);return g>-1?this.childNodes.splice(g,0,f):this.childNodes.push(f),f.parentNode=this,f},c.prototype.setAttributeNS=function(f,m,g){var p=null,y=m,v=m.indexOf(":");if(v>-1&&(p=m.substr(0,v),y=m.substr(v+1)),this.tagName==="INPUT"&&m==="type")this.type=g;else{var A=this._attributes[f]||(this._attributes[f]={});A[y]={value:g,prefix:p}}},c.prototype.getAttributeNS=function(f,m){var g=this._attributes[f],p=g&&g[m]&&g[m].value;return this.tagName==="INPUT"&&m==="type"?this.type:typeof p!="string"?null:p},c.prototype.removeAttributeNS=function(f,m){var g=this._attributes[f];g&&delete g[m]},c.prototype.hasAttributeNS=function(f,m){var g=this._attributes[f];return!!g&&m in g},c.prototype.setAttribute=function(f,m){return this.setAttributeNS(null,f,m)},c.prototype.getAttribute=function(f){return this.getAttributeNS(null,f)},c.prototype.removeAttribute=function(f){return this.removeAttributeNS(null,f)},c.prototype.hasAttribute=function(f){return this.hasAttributeNS(null,f)},c.prototype.removeEventListener=o,c.prototype.addEventListener=i,c.prototype.dispatchEvent=r,c.prototype.focus=function(){},c.prototype.toString=function(){return l(this)},c.prototype.getElementsByClassName=function(f){var m=f.split(" "),g=[];return t(this,function(p){if(p.nodeType===1){var y=p.className||"",v=y.split(" ");m.every(function(A){return v.indexOf(A)!==-1})&&g.push(p)}}),g},c.prototype.getElementsByTagName=function(f){f=f.toLowerCase();var m=[];return t(this.childNodes,function(g){g.nodeType===1&&(f==="*"||g.tagName.toLowerCase()===f)&&m.push(g)}),m},c.prototype.contains=function(f){return t(this,function(m){return f===m})||!1}}),zB=as(function(n,e){Af();var t=TD();e.exports=r;function r(i){if(!Sf(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=i||null}r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=t.prototype.appendChild,r.prototype.replaceChild=t.prototype.replaceChild,r.prototype.removeChild=t.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map(function(i){return String(i)}).join("")}}),BB=as(function(n,e){e.exports=t;function t(r){}t.prototype.initEvent=function(r,i,o){this.type=r,this.bubbles=i,this.cancelable=o},t.prototype.preventDefault=function(){}}),$B=as(function(n,e){Af();var t=vD(),r=OB(),i=FB(),o=TD(),l=zB(),d=BB(),c=yD(),f=ED(),m=bD();e.exports=g;function g(){if(!Sf(this,g))return new g;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var p=g.prototype;p.createTextNode=function(y){return new i(y,this)},p.createElementNS=function(y,v){var A=y===null?null:String(y);return new o(v,this,A)},p.createElement=function(y){return new o(y,this)},p.createDocumentFragment=function(){return new l(this)},p.createEvent=function(y){return new d(y)},p.createComment=function(y){return new r(y,this)},p.getElementById=function(y){y=String(y);var v=t(this.childNodes,function(A){if(String(A.id)===y)return A});return v||null},p.getElementsByClassName=o.prototype.getElementsByClassName,p.getElementsByTagName=o.prototype.getElementsByTagName,p.contains=o.prototype.contains,p.removeEventListener=m,p.addEventListener=f,p.dispatchEvent=c}),jB=as(function(n,e){var t=$B();e.exports=new t}),_D=as(function(n,e){var t=typeof global<"u"?global:typeof window<"u"?window:{},r=jB(),i;typeof document<"u"?i=document:(i=t["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=t["__GLOBAL_DOCUMENT_CACHE@4"]=r)),e.exports=i});function qB(n){if(Array.isArray(n))return n}function HB(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,l,d;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(c){o=!0,d=c}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw d}}return r}}function GB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function SD(n,e){if(n){if(typeof n=="string")return dA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dA(n,e)}}function lu(n,e){return qB(n)||HB(n,e)||SD(n,e)||GB()}var iv=ws(wo()),l1=ws(wo()),VB=ws(wo()),KB={now:function(){var n=VB.default.performance,e=n&&n.timing,t=e&&e.navigationStart,r=typeof t=="number"&&typeof n.now=="function"?t+n.now():Date.now();return Math.round(r)}},ta=KB,Iv=function(){var n,e,t;if(typeof((n=l1.default.crypto)===null||n===void 0?void 0:n.getRandomValues)=="function"){t=new Uint8Array(32),l1.default.crypto.getRandomValues(t);for(var r=0;r<32;r++)t[r]=t[r]%16}else{t=[];for(var i=0;i<32;i++)t[i]=Math.random()*16|0}var o=0;e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var f=c==="x"?t[o]:t[o]&3|8;return o++,f.toString(16)});var l=ta.now(),d=l==null?void 0:l.toString(16).substring(3);return d?e.substring(0,28)+d:e},AD=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},fo=function(n){if(n&&typeof n.nodeName<"u")return n.muxId||(n.muxId=AD()),n.muxId;var e;try{e=document.querySelector(n)}catch{}return e&&!e.muxId&&(e.muxId=n),(e==null?void 0:e.muxId)||n},B0=function(n){var e;n&&typeof n.nodeName<"u"?(e=n,n=fo(e)):e=document.querySelector(n);var t=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,n,t]};function YB(n){if(Array.isArray(n))return dA(n)}function WB(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function QB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(n){return YB(n)||WB(n)||SD(n)||QB()}var Gc={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},XB=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t,r,i,o,l,d=[console,n],c=(t=console.trace).bind.apply(t,ho(d)),f=(r=console.info).bind.apply(r,ho(d)),m=(i=console.debug).bind.apply(i,ho(d)),g=(o=console.warn).bind.apply(o,ho(d)),p=(l=console.error).bind.apply(l,ho(d)),y=e;return{trace:function(){for(var v=arguments.length,A=new Array(v),I=0;I<v;I++)A[I]=arguments[I];if(!(y>Gc.TRACE))return c.apply(void 0,ho(A))},debug:function(){for(var v=arguments.length,A=new Array(v),I=0;I<v;I++)A[I]=arguments[I];if(!(y>Gc.DEBUG))return m.apply(void 0,ho(A))},info:function(){for(var v=arguments.length,A=new Array(v),I=0;I<v;I++)A[I]=arguments[I];if(!(y>Gc.INFO))return f.apply(void 0,ho(A))},warn:function(){for(var v=arguments.length,A=new Array(v),I=0;I<v;I++)A[I]=arguments[I];if(!(y>Gc.WARN))return g.apply(void 0,ho(A))},error:function(){for(var v=arguments.length,A=new Array(v),I=0;I<v;I++)A[I]=arguments[I];if(!(y>Gc.ERROR))return p.apply(void 0,ho(A))},get level(){return y},set level(v){v!==this.level&&(y=v??e)}}},fi=XB("[mux]"),Y_=ws(wo());function cA(){var n=Y_.default.doNotTrack||Y_.default.navigator&&Y_.default.navigator.doNotTrack;return n==="1"}function fr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}Af();function ba(n,e){if(!Sf(n,e))throw new TypeError("Cannot call a class as a function")}function ZB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function El(n,e,t){return e&&ZB(n.prototype,e),n}function Dn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wm(n){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wm(n)}function JB(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&(n=Wm(n),n!==null););return n}function vb(n,e,t){return typeof Reflect<"u"&&Reflect.get?vb=Reflect.get:vb=function(r,i,o){var l=JB(r,i);if(l){var d=Object.getOwnPropertyDescriptor(l,i);return d.get?d.get.call(o||r):d.value}},vb(n,e,t||n)}function fA(n,e){return fA=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},fA(n,e)}function e4(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&fA(n,e)}function t4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}pD();function n4(n,e){return e&&(gD(e)==="object"||typeof e=="function")?e:fr(n)}function r4(n){var e=t4();return function(){var t=Wm(n),r;if(e){var i=Wm(this).constructor;r=Reflect.construct(t,arguments,i)}else r=t.apply(this,arguments);return n4(this,r)}}var To=function(n){return kv(n)[0]},kv=function(n){if(typeof n!="string"||n==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=n.match(e)||[],r=t[4],i;return r&&(i=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,i]},W_=ws(wo()),i4={exists:function(){var n=W_.default.performance,e=n&&n.timing;return e!==void 0},domContentLoadedEventEnd:function(){var n=W_.default.performance,e=n&&n.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var n=W_.default.performance,e=n&&n.timing;return e&&e.navigationStart}},$0=i4;function ea(n,e,t){t=t===void 0?1:t,n[e]=n[e]||0,n[e]+=t}function j0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Dn(n,i,t[i])})}return n}function a4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t.push.apply(t,r)}return t}function nI(n,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a4(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n}var s4=["x-cdn","content-type"],wD=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],o4=s4.concat(wD);function rI(n){n=n||"";var e={},t=n.trim().split(/[\r\n]+/);return t.forEach(function(r){if(r){var i=r.split(": "),o=i.shift();o&&(o4.indexOf(o.toLowerCase())>=0||o.toLowerCase().indexOf("x-litix-")===0)&&(e[o]=i.join(": "))}}),e}function q0(n){if(n){var e=wD.find(function(t){return n[t]!==void 0});return e?n[e]:void 0}}var l4=function(n){var e={};for(var t in n){var r=n[t],i=r["DATA-ID"].search("io.litix.data.");if(i!==-1){var o=r["DATA-ID"].replace("io.litix.data.","");e[o]=r.VALUE}}return e},ID=l4,GE=function(n){if(!n)return{};var e=$0.navigationStart(),t=n.loading,r=t?t.start:n.trequest,i=t?t.first:n.tfirst,o=t?t.end:n.tload;return{bytesLoaded:n.total,requestStart:Math.round(e+r),responseStart:Math.round(e+i),responseEnd:Math.round(e+o)}},pp=function(n){if(!(!n||typeof n.getAllResponseHeaders!="function"))return rI(n.getAllResponseHeaders())},u4=function(n,e,t){var r=arguments.length>4?arguments[4]:void 0,i=n.log,o=n.utils.secondsToMs,l=function(I){var P=parseInt(r.version),U;return P===1&&I.programDateTime!==null&&(U=I.programDateTime),P===0&&I.pdt!==null&&(U=I.pdt),U};if(!$0.exists()){i.warn("performance timing not supported. Not tracking HLS.js.");return}var d=function(I,P){return n.emit(e,I,P)},c=function(I,P){var U=P.levels,M=P.audioTracks,B=P.url,ie=P.stats,L=P.networkDetails,w=P.sessionData,O={},oe={};U.forEach(function(Ue,Re){O[Re]={width:Ue.width,height:Ue.height,bitrate:Ue.bitrate,attrs:Ue.attrs}}),M.forEach(function(Ue,Re){oe[Re]={name:Ue.name,language:Ue.lang,bitrate:Ue.bitrate}});var D=GE(ie),ve=D.bytesLoaded,Le=D.requestStart,te=D.responseStart,$e=D.responseEnd;d("requestcompleted",nI(j0({},ID(w)),{request_event_type:I,request_bytes_loaded:ve,request_start:Le,request_response_start:te,request_response_end:$e,request_type:"manifest",request_hostname:To(B),request_response_headers:pp(L),request_rendition_lists:{media:O,audio:oe,video:{}}}))};t.on(r.Events.MANIFEST_LOADED,c);var f=function(I,P){var U=P.details,M=P.level,B=P.networkDetails,ie=P.stats,L=GE(ie),w=L.bytesLoaded,O=L.requestStart,oe=L.responseStart,D=L.responseEnd,ve=U.fragments[U.fragments.length-1],Le=l(ve)+o(ve.duration);d("requestcompleted",{request_event_type:I,request_bytes_loaded:w,request_start:O,request_response_start:oe,request_response_end:D,request_current_level:M,request_type:"manifest",request_hostname:To(U.url),request_response_headers:pp(B),video_holdback:U.holdBack&&o(U.holdBack),video_part_holdback:U.partHoldBack&&o(U.partHoldBack),video_part_target_duration:U.partTarget&&o(U.partTarget),video_target_duration:U.targetduration&&o(U.targetduration),video_source_is_live:U.live,player_manifest_newest_program_time:isNaN(Le)?void 0:Le})};t.on(r.Events.LEVEL_LOADED,f);var m=function(I,P){var U=P.details,M=P.networkDetails,B=P.stats,ie=GE(B),L=ie.bytesLoaded,w=ie.requestStart,O=ie.responseStart,oe=ie.responseEnd;d("requestcompleted",{request_event_type:I,request_bytes_loaded:L,request_start:w,request_response_start:O,request_response_end:oe,request_type:"manifest",request_hostname:To(U.url),request_response_headers:pp(M)})};t.on(r.Events.AUDIO_TRACK_LOADED,m);var g=function(I,P){var U=P.stats,M=P.networkDetails,B=P.frag;U=U||B.stats;var ie=GE(U),L=ie.bytesLoaded,w=ie.requestStart,O=ie.responseStart,oe=ie.responseEnd,D=M?pp(M):void 0,ve={request_event_type:I,request_bytes_loaded:L,request_start:w,request_response_start:O,request_response_end:oe,request_hostname:M?To(M.responseURL):void 0,request_id:D?q0(D):void 0,request_response_headers:D,request_media_duration:B.duration,request_url:M==null?void 0:M.responseURL};B.type==="main"?(ve.request_type="media",ve.request_current_level=B.level,ve.request_video_width=(t.levels[B.level]||{}).width,ve.request_video_height=(t.levels[B.level]||{}).height,ve.request_labeled_bitrate=(t.levels[B.level]||{}).bitrate):ve.request_type=B.type,d("requestcompleted",ve)};t.on(r.Events.FRAG_LOADED,g);var p=function(I,P){var U=P.frag,M=U.start,B=l(U),ie={currentFragmentPDT:B,currentFragmentStart:o(M)};d("fragmentchange",ie)};t.on(r.Events.FRAG_CHANGED,p);var y=function(I,P){var U=P.type,M=P.details,B=P.response,ie=P.fatal,L=P.frag,w=P.networkDetails,O=(L==null?void 0:L.url)||P.url||"",oe=w?pp(w):void 0;if((M===r.ErrorDetails.MANIFEST_LOAD_ERROR||M===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||M===r.ErrorDetails.FRAG_LOAD_ERROR||M===r.ErrorDetails.FRAG_LOAD_TIMEOUT||M===r.ErrorDetails.LEVEL_LOAD_ERROR||M===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||M===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||M===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||M===r.ErrorDetails.SUBTITLE_LOAD_ERROR||M===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||M===r.ErrorDetails.KEY_LOAD_ERROR||M===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&d("requestfailed",{request_error:M,request_url:O,request_hostname:To(O),request_id:oe?q0(oe):void 0,request_type:M===r.ErrorDetails.FRAG_LOAD_ERROR||M===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":M===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||M===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":M===r.ErrorDetails.SUBTITLE_LOAD_ERROR||M===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":M===r.ErrorDetails.KEY_LOAD_ERROR||M===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:B==null?void 0:B.code,request_error_text:B==null?void 0:B.text}),ie){var D,ve="".concat(O?"url: ".concat(O,`
`):"")+"".concat(B&&(B.code||B.text)?"response: ".concat(B.code,", ").concat(B.text,`
`):"")+"".concat(P.reason?"failure reason: ".concat(P.reason,`
`):"")+"".concat(P.level?"level: ".concat(P.level,`
`):"")+"".concat(P.parent?"parent stream controller: ".concat(P.parent,`
`):"")+"".concat(P.buffer?"buffer length: ".concat(P.buffer,`
`):"")+"".concat(P.error?"error: ".concat(P.error,`
`):"")+"".concat(P.event?"event: ".concat(P.event,`
`):"")+"".concat(P.err?"error message: ".concat((D=P.err)===null||D===void 0?void 0:D.message,`
`):"");d("error",{player_error_code:U,player_error_message:M,player_error_context:ve})}};t.on(r.Events.ERROR,y);var v=function(I,P){var U=P.frag,M=U&&U._url||"";d("requestcanceled",{request_event_type:I,request_url:M,request_type:"media",request_hostname:To(M)})};t.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,v);var A=function(I,P){var U=P.level,M=t.levels[U];if(M&&M.attrs&&M.attrs.BANDWIDTH){var B=M.attrs.BANDWIDTH,ie,L=parseFloat(M.attrs["FRAME-RATE"]);isNaN(L)||(ie=L),B?d("renditionchange",{video_source_fps:ie,video_source_bitrate:B,video_source_width:M.width,video_source_height:M.height,video_source_rendition_name:M.name,video_source_codec:M==null?void 0:M.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};t.on(r.Events.LEVEL_SWITCHED,A),t._stopMuxMonitor=function(){t.off(r.Events.MANIFEST_LOADED,c),t.off(r.Events.LEVEL_LOADED,f),t.off(r.Events.AUDIO_TRACK_LOADED,m),t.off(r.Events.FRAG_LOADED,g),t.off(r.Events.FRAG_CHANGED,p),t.off(r.Events.ERROR,y),t.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,v),t.off(r.Events.LEVEL_SWITCHED,A),t.off(r.Events.DESTROYING,t._stopMuxMonitor),delete t._stopMuxMonitor},t.on(r.Events.DESTROYING,t._stopMuxMonitor)},d4=function(n){n&&typeof n._stopMuxMonitor=="function"&&n._stopMuxMonitor()},u1=function(n,e){if(!n||!n.requestEndDate)return{};var t=To(n.url),r=n.url,i=n.bytesLoaded,o=new Date(n.requestStartDate).getTime(),l=new Date(n.firstByteDate).getTime(),d=new Date(n.requestEndDate).getTime(),c=isNaN(n.duration)?0:n.duration,f=typeof e.getMetricsFor=="function"?e.getMetricsFor(n.mediaType).HttpList:e.getDashMetrics().getHttpRequests(n.mediaType),m;f.length>0&&(m=rI(f[f.length-1]._responseHeaders||""));var g=m?q0(m):void 0;return{requestStart:o,requestResponseStart:l,requestResponseEnd:d,requestBytesLoaded:i,requestResponseHeaders:m,requestMediaDuration:c,requestHostname:t,requestUrl:r,requestId:g}},c4=function(n,e){var t=e.getQualityFor(n),r=e.getCurrentTrackFor(n).bitrateList;return r?{currentLevel:t,renditionWidth:r[t].width||null,renditionHeight:r[t].height||null,renditionBitrate:r[t].bandwidth}:{}},f4=function(n){var e;return(e=n.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},h4=function(n){try{var e,t,r=(t=n.getVersion)===null||t===void 0||(e=t.call(n))===null||e===void 0?void 0:e.split(".").map(function(i){return parseInt(i)})[0];return r}catch{return!1}},m4=function(n,e,t){var r=n.log;if(!t||!t.on){r.warn("Invalid dash.js player reference. Monitoring blocked.");return}var i=h4(t),o=function(U,M){return n.emit(e,U,M)},l=function(U){var M=U.type,B=U.data,ie=(B||{}).url;o("requestcompleted",{request_event_type:M,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:To(ie),request_url:ie})};t.on("manifestLoaded",l);var d={},c=function(U){if(typeof U.getRequests!="function")return null;var M=U.getRequests({state:"executed"});return M.length===0?null:M[M.length-1]},f=function(U){var M=U.type,B=U.fragmentModel,ie=U.chunk,L=c(B);m({type:M,request:L,chunk:ie})},m=function(U){var M=U.type,B=U.chunk,ie=U.request,L=(B||{}).mediaInfo,w=L||{},O=w.type,oe=w.bitrateList;oe=oe||[];var D={};oe.forEach(function(Ne,ze){D[ze]={},D[ze].width=Ne.width,D[ze].height=Ne.height,D[ze].bitrate=Ne.bandwidth,D[ze].attrs={}}),O==="video"?d.video=D:O==="audio"?d.audio=D:d.media=D;var ve=u1(ie,t),Le=ve.requestStart,te=ve.requestResponseStart,$e=ve.requestResponseEnd,Ue=ve.requestResponseHeaders,Re=ve.requestMediaDuration,Xe=ve.requestHostname,Ye=ve.requestUrl,Ze=ve.requestId;o("requestcompleted",{request_event_type:M,request_start:Le,request_response_start:te,request_response_end:$e,request_bytes_loaded:-1,request_type:O+"_init",request_response_headers:Ue,request_hostname:Xe,request_id:Ze,request_url:Ye,request_media_duration:Re,request_rendition_lists:d})};i>=4?t.on("initFragmentLoaded",m):t.on("initFragmentLoaded",f);var g=function(U){var M=U.type,B=U.fragmentModel,ie=U.chunk,L=c(B);p({type:M,request:L,chunk:ie})},p=function(U){var M=U.type,B=U.chunk,ie=U.request,L=B||{},w=L.mediaInfo,O=L.start,oe=w||{},D=oe.type,ve=u1(ie,t),Le=ve.requestStart,te=ve.requestResponseStart,$e=ve.requestResponseEnd,Ue=ve.requestBytesLoaded,Re=ve.requestResponseHeaders,Xe=ve.requestMediaDuration,Ye=ve.requestHostname,Ze=ve.requestUrl,Ne=ve.requestId,ze=c4(D,t),st=ze.currentLevel,Rt=ze.renditionWidth,jt=ze.renditionHeight,Pe=ze.renditionBitrate;o("requestcompleted",{request_event_type:M,request_start:Le,request_response_start:te,request_response_end:$e,request_bytes_loaded:Ue,request_type:D,request_response_headers:Re,request_hostname:Ye,request_id:Ne,request_url:Ze,request_media_start_time:O,request_media_duration:Xe,request_current_level:st,request_labeled_bitrate:Pe,request_video_width:Rt,request_video_height:jt})};i>=4?t.on("mediaFragmentLoaded",p):t.on("mediaFragmentLoaded",g);var y={video:void 0,audio:void 0,totalBitrate:void 0},v=function(){if(y.video&&typeof y.video.bitrate=="number"){if(!(y.video.width&&y.video.height)){r.warn("have bitrate info for video but missing width/height");return}var U=y.video.bitrate;if(y.audio&&typeof y.audio.bitrate=="number"&&(U+=y.audio.bitrate),U!==y.totalBitrate)return y.totalBitrate=U,{video_source_bitrate:U,video_source_height:y.video.height,video_source_width:y.video.width,video_source_codec:f4(y.video.codec)}}},A=function(U,M,B){if(typeof U.newQuality!="number"){r.warn("missing evt.newQuality in qualityChangeRendered event",U);return}var ie=U.mediaType;if(ie==="audio"||ie==="video"){var L=t.getBitrateInfoListFor(ie).find(function(O){var oe=O.qualityIndex;return oe===U.newQuality});if(!(L&&typeof L.bitrate=="number")){r.warn("missing bitrate info for ".concat(ie));return}y[ie]=nI(j0({},L),{codec:t.getCurrentTrackFor(ie).codec});var w=v();w&&o("renditionchange",w)}};t.on("qualityChangeRendered",A);var I=function(U){var M=U.request,B=U.mediaType;M=M||{},o("requestcanceled",{request_event_type:M.type+"_"+M.action,request_url:M.url,request_type:B,request_hostname:To(M.url)})};t.on("fragmentLoadingAbandoned",I);var P=function(U){var M=U.error,B,ie,L=(M==null||(B=M.data)===null||B===void 0?void 0:B.request)||{},w=(M==null||(ie=M.data)===null||ie===void 0?void 0:ie.response)||{};(M==null?void 0:M.code)===27&&o("requestfailed",{request_error:L.type+"_"+L.action,request_url:L.url,request_hostname:To(L.url),request_type:L.mediaType,request_error_code:w.status,request_error_text:w.statusText});var O="".concat(L!=null&&L.url?"url: ".concat(L.url,`
`):"")+"".concat(w!=null&&w.status||w!=null&&w.statusText?"response: ".concat(w==null?void 0:w.status,", ").concat(w==null?void 0:w.statusText,`
`):"");o("error",{player_error_code:M==null?void 0:M.code,player_error_message:M==null?void 0:M.message,player_error_context:O})};t.on("error",P),t._stopMuxMonitor=function(){t.off("manifestLoaded",l),t.off("initFragmentLoaded",m),t.off("mediaFragmentLoaded",p),t.off("qualityChangeRendered",A),t.off("error",P),t.off("fragmentLoadingAbandoned",I),delete t._stopMuxMonitor}},g4=function(n){n&&typeof n._stopMuxMonitor=="function"&&n._stopMuxMonitor()},d1=0,p4=function(){function n(){ba(this,n),Dn(this,"_listeners",void 0)}return El(n,[{key:"on",value:function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++d1,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(i,o){i._eventEmitterGuid===t._eventEmitterGuid&&r.splice(o,1)})}},{key:"one",value:function(e,t,r){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++d1;var o=function(){i.off(e,o),t.apply(r||this,arguments)};o._eventEmitterGuid=t._eventEmitterGuid,this.on(e,o)}},{key:"emit",value:function(e,t){var r=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],o=this._listeners[e]||[],l=this._listeners["after"+e]||[],d=function(c,f){c=c.slice(),c.forEach(function(m){m.call(r,{type:e},f)})};d(i,t),d(o,t),d(l,t)}}}]),n}(),v4=p4,Q_=ws(wo()),y4=function(){function n(e){var t=this;ba(this,n),Dn(this,"_playbackHeartbeatInterval",void 0),Dn(this,"_playheadShouldBeProgressing",void 0),Dn(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){t._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?t._stopPlaybackHeartbeatInterval():t._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){t._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(r,i){t._playbackHeartbeatInterval!==null&&(Q_.default.clearInterval(t._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),t._playbackHeartbeatInterval=null)})}return El(n,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=Q_.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(Q_.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),n}(),E4=y4,b4=function n(e){var t=this;ba(this,n),Dn(this,"viewErrored",void 0),e.on("viewinit",function(){t.viewErrored=!1}),e.on("error",function(r,i){try{var o=e.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});o&&(e.data.player_error_code=o.player_error_code||i.player_error_code,e.data.player_error_message=o.player_error_message||i.player_error_message,e.data.player_error_context=o.player_error_context||i.player_error_context,e.data.player_error_severity=o.player_error_severity||i.player_error_severity,e.data.player_error_business_exception=o.player_error_business_exception||i.player_error_business_exception,t.viewErrored=!0)}catch(l){e.mux.log.warn("Exception in error translator callback.",l),t.viewErrored=!0}}),e.on("aftererror",function(){var r,i,o,l,d;(r=e.data)===null||r===void 0||delete r.player_error_code,(i=e.data)===null||i===void 0||delete i.player_error_message,(o=e.data)===null||o===void 0||delete o.player_error_context,(l=e.data)===null||l===void 0||delete l.player_error_severity,(d=e.data)===null||d===void 0||delete d.player_error_business_exception})},T4=b4,_4=function(){function n(e){ba(this,n),Dn(this,"_watchTimeTrackerLastCheckedTime",void 0),Dn(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return El(n,[{key:"_updateWatchTime",value:function(e,t){var r=t.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=r),ea(this.pm.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),n}(),S4=_4,A4=function(){function n(e){var t=this;ba(this,n),Dn(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),Dn(this,"_lastTime",void 0),Dn(this,"_isAdPlaying",void 0),Dn(this,"_callbackUpdatePlaybackTime",void 0),Dn(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=ta.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var r=this._startPlaybackTimeTracking.bind(this);e.on("playing",r),e.on("adplaying",r),e.on("seeked",r);var i=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",i),e.on("seeking",i),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1}),e.on("viewinit",function(){t._playbackTimeTrackerLastPlayheadPosition=-1,t._lastTime=ta.now(),t._isAdPlaying=!1,t._callbackUpdatePlaybackTime=null})}return El(n,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=ta.now(),r=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?r=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(r=t-this._lastTime),r>0&&r<=1e3&&ea(this.pm.data,"view_content_playback_time",r),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),n}(),w4=A4,I4=function(){function n(e){ba(this,n),Dn(this,"pm",void 0),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return El(n,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var r=this,i=function(){r.pm.currentFragmentPDT&&r.pm.currentFragmentStart&&(r.pm.data.player_program_time=r.pm.currentFragmentPDT+r.pm.data.player_playhead_time-r.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var o=this.pm.getPlayheadTime();typeof o<"u"&&(this.pm.data.player_playhead_time=o,i(),this._updateMaxPlayheadPosition())}}}]),n}(),k4=I4,c1=5*60*1e3,R4=function n(e){if(ba(this,n),!e.disableRebufferTracking){var t,r=function(o,l){i(l),t=void 0},i=function(o){if(t){var l=o.viewer_time-t;ea(e.data,"view_rebuffer_duration",l),t=o.viewer_time,e.data.view_rebuffer_duration>c1&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(c1,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(o,l){return i(l)}),e.on("rebufferstart",function(o,l){t||(ea(e.data,"view_rebuffer_count",1),t=l.viewer_time,e.one("rebufferend",r))}),e.on("viewinit",function(){t=void 0,e.off("rebufferend",r)})}},x4=R4,C4=function(){function n(e){var t=this;ba(this,n),Dn(this,"_lastCheckedTime",void 0),Dn(this,"_lastPlayheadTime",void 0),Dn(this,"_lastPlayheadTimeUpdatedTime",void 0),Dn(this,"_rebuffering",void 0),Dn(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){t._cleanupRebufferTracker(null,{viewer_time:ta.now()})}))}return El(n,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,t);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(t.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,t,!0);return}var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&r>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(this._lastCheckedTime===null)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,o=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&i>0&&o-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+o-i}))}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),n}(),L4=C4,D4=function(){function n(e){var t=this;ba(this,n),Dn(this,"NAVIGATION_START",void 0),Dn(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var r=e.data,i=r.view_id;if(!r.view_program_changed){var o=function(l,d){var c=d.viewer_time;(l.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||l.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||t._inPrerollPosition()))&&t.calculateTimeToFirstFrame(c||ta.now(),i)};e.one("playing",o),e.one("adplaying",o),e.one("viewend",function(){e.off("playing",o),e.off("adplaying",o)})}})}return El(n,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),n}(),N4=D4,P4=function n(e){var t=this;ba(this,n),Dn(this,"_lastPlayerHeight",void 0),Dn(this,"_lastPlayerWidth",void 0),Dn(this,"_lastPlayheadPosition",void 0),Dn(this,"_lastSourceHeight",void 0),Dn(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){t._lastPlayheadPosition=-1});var r=["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"],i=["playing","hb","renditionchange","orientationchange"];r.forEach(function(o){e.on(o,function(){if(t._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&t._lastPlayerWidth>=0&&t._lastSourceWidth>0&&t._lastPlayerHeight>=0&&t._lastSourceHeight>0){var l=e.data.player_playhead_time-t._lastPlayheadPosition;if(l<0){t._lastPlayheadPosition=-1;return}var d=Math.min(t._lastPlayerWidth/t._lastSourceWidth,t._lastPlayerHeight/t._lastSourceHeight),c=Math.max(0,d-1),f=Math.max(0,1-d);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,c),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,f),ea(e.data,"view_total_content_playback_time",l),ea(e.data,"view_total_upscaling",c*l),ea(e.data,"view_total_downscaling",f*l)}t._lastPlayheadPosition=-1})}),i.forEach(function(o){e.on(o,function(){t._lastPlayheadPosition=e.data.player_playhead_time,t._lastPlayerWidth=e.data.player_width,t._lastPlayerHeight=e.data.player_height,t._lastSourceWidth=e.data.video_source_width,t._lastSourceHeight=e.data.video_source_height})})},M4=P4,O4=2e3,F4=function n(e){var t=this;ba(this,n),Dn(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var o=ta.now(),l=(e.data.viewer_time||o)-(r||o);ea(e.data,"view_seek_duration",l),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,l),t.isSeeking=!1,r=-1};e.on("seeking",function(o,l){if(Object.assign(e.data,l),t.isSeeking&&l.viewer_time-r<=O4){r=l.viewer_time;return}t.isSeeking&&i(),t.isSeeking=!0,r=l.viewer_time,ea(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){i()}),e.on("viewend",function(){t.isSeeking&&(i(),e.send("seeked")),t.isSeeking=!1,r=-1})},U4=F4,f1=function(n,e){n.push(e),n.sort(function(t,r){return t.viewer_time-r.viewer_time})},z4=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],B4=function(){function n(e){var t=this;ba(this,n),Dn(this,"_adHasPlayed",void 0),Dn(this,"_adRequests",void 0),Dn(this,"_adResponses",void 0),Dn(this,"_currentAdRequestNumber",void 0),Dn(this,"_currentAdResponseNumber",void 0),Dn(this,"_prerollPlayTime",void 0),Dn(this,"_wouldBeNewAdPlay",void 0),Dn(this,"isAdBreak",void 0),Dn(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),z4.forEach(function(i){return e.on(i,t._updateAdData.bind(t))});var r=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",r),e.on("playing",r),e.on("viewend",r),e.on("adrequest",function(i,o){o=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},o),f1(t._adRequests,o),ea(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||ea(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(i,o){o=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},o),f1(t._adResponses,o);var l=t.findAdRequest(o.ad_request_id);l&&ea(e.data,"view_ad_request_time",Math.max(0,o.viewer_time-l.viewer_time))}),e.on("adplay",function(i,o){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,ea(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,o.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,o.viewer_time-e.data.view_start)),t._prerollPlayTime=o.viewer_time)}),e.on("adplaying",function(i,o){t.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof t._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=o.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=o.viewer_time-t._prerollPlayTime)}),e.on("adclicked",function(i,o){t._wouldBeNewAdPlay||ea(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(i,o){t._wouldBeNewAdPlay||ea(e.data,"view_ad_skipped_count")}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return El(n,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=lu(kv(t.ad_tag_url),2),i=r[0],o=r[1];this.pm.data.view_preroll_ad_tag_domain=o,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var l=lu(kv(t.ad_asset_url),2),d=l[0],c=l[1];this.pm.data.view_preroll_ad_asset_domain=c,this.pm.data.view_preroll_ad_asset_hostname=d}}this.pm.data.ad_asset_url=t==null?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=t==null?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=t==null?void 0:t.ad_creative_id,this.pm.data.ad_id=t==null?void 0:t.ad_id,this.pm.data.ad_universal_id=t==null?void 0:t.ad_universal_id}}]),n}(),$4=B4,h1=ws(wo()),j4=function n(e){ba(this,n);var t,r,i=function(){e.disableRebufferTracking||(ea(e.data,"view_waiting_rebuffer_count",1),t=ta.now(),r=h1.default.setInterval(function(){if(t){var f=ta.now();ea(e.data,"view_waiting_rebuffer_duration",f-t),t=f}},250))},o=function(){e.disableRebufferTracking||t&&(ea(e.data,"view_waiting_rebuffer_duration",ta.now()-t),t=!1,h1.default.clearInterval(r))},l=!1,d=function(){l=!0},c=function(){l=!1,o()};e.on("waiting",function(){l&&i()}),e.on("playing",function(){o(),d()}),e.on("pause",c),e.on("seeking",c)},q4=j4,H4=function n(e){var t=this;ba(this,n),Dn(this,"lastWallClockTime",void 0);var r=function(){t.lastWallClockTime=ta.now(),e.on("before*",i)},i=function(o){var l=ta.now(),d=t.lastWallClockTime;t.lastWallClockTime=l,l-d>3e4&&(e.emit("devicesleep",{viewer_time:d}),Object.assign(e.data,{viewer_time:d}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:l}),Object.assign(e.data,{viewer_time:l}),e.send("devicewake"))};e.one("playbackheartbeat",r),e.on("playbackheartbeatend",function(){e.off("before*",i),e.one("playbackheartbeat",r)})},G4=H4,X_=ws(wo()),kD=function(n){return n()}(function(){var n=function(){for(var t=0,r={};t<arguments.length;t++){var i=arguments[t];for(var o in i)r[o]=i[o]}return r};function e(t){function r(i,o,l){var d;if(typeof document<"u"){if(arguments.length>1){if(l=n({path:"/"},r.defaults,l),typeof l.expires=="number"){var c=new Date;c.setMilliseconds(c.getMilliseconds()+l.expires*864e5),l.expires=c}try{d=JSON.stringify(o),/^[\{\[]/.test(d)&&(o=d)}catch{}return t.write?o=t.write(o,i):o=encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",o,l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}i||(d={});for(var f=document.cookie?document.cookie.split("; "):[],m=/(%[0-9A-Z]{2})+/g,g=0;g<f.length;g++){var p=f[g].split("="),y=p.slice(1).join("=");y.charAt(0)==='"'&&(y=y.slice(1,-1));try{var v=p[0].replace(m,decodeURIComponent);if(y=t.read?t.read(y,v):t(y,v)||y.replace(m,decodeURIComponent),this.json)try{y=JSON.parse(y)}catch{}if(i===v){d=y;break}i||(d[v]=y)}catch{}}return d}}return r.set=r,r.get=function(i){return r.call(r,i)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(i,o){r(i,"",n(o,{expires:-1}))},r.withConverter=e,r}return e(function(){})}),RD="muxData",V4=function(n){return Object.entries(n).map(function(e){var t=lu(e,2),r=t[0],i=t[1];return"".concat(r,"=").concat(i)}).join("&")},K4=function(n){return n.split("&").reduce(function(e,t){var r=lu(t.split("="),2),i=r[0],o=r[1],l=+o,d=o&&l==o?l:o;return e[i]=d,e},{})},xD=function(){var n;try{n=K4(kD.get(RD)||"")}catch{n={}}return n},CD=function(n){try{kD.set(RD,V4(n),{expires:365})}catch{}},Y4=function(){var n=xD();return n.mux_viewer_id=n.mux_viewer_id||Iv(),n.msn=n.msn||Math.random(),CD(n),{mux_viewer_id:n.mux_viewer_id,mux_sample_number:n.msn}},W4=function(){var n=xD(),e=ta.now();return n.session_start&&(n.sst=n.session_start,delete n.session_start),n.session_id&&(n.sid=n.session_id,delete n.session_id),n.session_expires&&(n.sex=n.session_expires,delete n.session_expires),(!n.sex||n.sex<e)&&(n.sid=Iv(),n.sst=e),n.sex=e+25*60*1e3,CD(n),{session_id:n.sid,session_start:n.sst,session_expires:n.sex}};function Q4(n,e){var t=e.beaconCollectionDomain,r=e.beaconDomain;if(t)return"https://"+t;n=n||"inferred";var i=r||"litix.io";return n.match(/^[a-z0-9]+$/)?"https://"+n+"."+i:"https://img.litix.io/a.gif"}var X4=ws(wo()),LD=function(){var n;switch(DD()){case"cellular":n="cellular";break;case"ethernet":n="wired";break;case"wifi":n="wifi";break;case void 0:break;default:n="other"}return n},DD=function(){var n=X4.default.navigator,e=n&&(n.connection||n.mozConnection||n.webkitConnection);return e&&e.type};LD.getConnectionFromAPI=DD;var Z4=LD,J4={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},e8=ND(J4),t8={ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},m1=ND(t8);function ND(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function hA(n){var e={},t={};return Object.keys(n).forEach(function(r){var i=!1;if(n.hasOwnProperty(r)&&n[r]!==void 0){var o=r.split("_"),l=o[0],d=e8[l];d||(fi.info("Data key word `"+o[0]+"` not expected in "+r),d=l+"_"),o.splice(1).forEach(function(c){c==="url"&&(i=!0),m1[c]?d+=m1[c]:Number.isInteger(Number(c))?d+=c:(fi.info("Data key word `"+c+"` not expected in "+r),d+="_"+c+"_")}),i?t[d]=n[r]:e[d]=n[r]}}),Object.assign(e,t)}var Vc=ws(wo()),n8=ws(_D()),r8={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},i8=56*1024,a8=["hb","requestcompleted","requestfailed","requestcanceled"],s8="https://img.litix.io",du=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=n||s8,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},r8,e)};du.prototype.queueEvent=function(n,e){var t=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||n==="eventrateexceeded"?(this._eventQueue.push(t),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};du.prototype.flushEvents=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(n&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};du.prototype.destroy=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,n?this._clearBeaconQueue():this.flushEvents(),Vc.default.clearTimeout(this._sendTimeout)};du.prototype._clearBeaconQueue=function(){var n=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(n);n>0&&Object.assign(e[e.length-1],hA({mux_view_message:"event queue truncated"}));var t=this._createPayload(e);PD(this._beaconUrl,t,!0,function(){})};du.prototype._sendBeaconQueue=function(){var n=this;if(this._postInFlight){this._resendAfterPost=!0;return}var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var t=this._createPayload(e),r=ta.now();PD(this._beaconUrl,t,!1,function(i,o){o?(n._eventQueue=e.concat(n._eventQueue),n._failureCount+=1,fi.info("Error sending beacon: "+o)):n._failureCount=0,n._roundTripTime=ta.now()-r,n._postInFlight=!1,n._resendAfterPost&&(n._resendAfterPost=!1,n._eventQueue.length>0&&n._sendBeaconQueue())})};du.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var n=Math.pow(2,this._failureCount-1);return n=n*Math.random(),(1+n)*this._options.baseTimeBetweenBeacons};du.prototype._startBeaconSending=function(){var n=this;Vc.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=Vc.default.setTimeout(function(){n._eventQueue.length&&n._sendBeaconQueue(),n._startBeaconSending()},this._getNextBeaconTime()))};du.prototype._createPayload=function(n){var e=this,t={transmission_timestamp:Math.round(ta.now())};this._roundTripTime&&(t.rtt_ms=Math.round(this._roundTripTime));var r,i,o,l=function(){r=JSON.stringify({metadata:t,events:i||n}),o=r.length/1024},d=function(){return o<=e._options.maxPayloadKBSize};return l(),d()||(fi.info("Payload size is too big ("+o+" kb). Removing unnecessary events."),i=n.filter(function(c){return a8.indexOf(c.e)===-1}),l()),d()||(fi.info("Payload size still too big ("+o+" kb). Cropping fields.."),i.forEach(function(c){for(var f in c){var m=c[f],g=50*1024;typeof m=="string"&&m.length>g&&(c[f]=m.substring(0,g))}}),l()),r};var o8=typeof n8.default.exitPictureInPicture=="function"?function(n){return n.length<=i8}:function(n){return!1},PD=function(n,e,t,r){if(t&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(n,e)){r();return}if(Vc.default.fetch){Vc.default.fetch(n,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:o8(e)}).then(function(o){return r(null,o.ok?null:"Error")}).catch(function(o){return r(null,o)});return}if(Vc.default.XMLHttpRequest){var i=new Vc.default.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4)return r(null,i.status!==200?"error":void 0)},i.open("POST",n),i.setRequestHeader("Content-Type","text/plain"),i.send(e);return}r()},l8=du,u8=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],d8=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],c8=["ad_id","ad_creative_id","ad_universal_id"],f8=["viewstart","error","ended","viewend"],h8=10*60*1e3,m8=function(){function n(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ba(this,n);var i,o,l,d,c,f,m,g,p,y,v,A;Dn(this,"mux",void 0),Dn(this,"envKey",void 0),Dn(this,"options",void 0),Dn(this,"eventQueue",void 0),Dn(this,"sampleRate",void 0),Dn(this,"disableCookies",void 0),Dn(this,"respectDoNotTrack",void 0),Dn(this,"previousBeaconData",void 0),Dn(this,"lastEventTime",void 0),Dn(this,"rateLimited",void 0),Dn(this,"pageLevelData",void 0),Dn(this,"viewerData",void 0),this.mux=e,this.envKey=t,this.options=r,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new l8(Q4(this.envKey,this.options));var I;this.sampleRate=(I=this.options.sampleRate)!==null&&I!==void 0?I:1;var P;this.disableCookies=(P=this.options.disableCookies)!==null&&P!==void 0?P:!1;var U;this.respectDoNotTrack=(U=this.options.respectDoNotTrack)!==null&&U!==void 0?U:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(i=this.options.platform)===null||i===void 0?void 0:i.name,viewer_application_version:(o=this.options.platform)===null||o===void 0?void 0:o.version,viewer_application_engine:(l=this.options.platform)===null||l===void 0?void 0:l.layout,viewer_device_name:(d=this.options.platform)===null||d===void 0?void 0:d.product,viewer_device_category:"",viewer_device_manufacturer:(c=this.options.platform)===null||c===void 0?void 0:c.manufacturer,viewer_os_family:(m=this.options.platform)===null||m===void 0||(f=m.os)===null||f===void 0?void 0:f.family,viewer_os_architecture:(p=this.options.platform)===null||p===void 0||(g=p.os)===null||g===void 0?void 0:g.architecture,viewer_os_version:(v=this.options.platform)===null||v===void 0||(y=v.os)===null||y===void 0?void 0:y.version,viewer_connection_type:Z4(),page_url:X_.default===null||X_.default===void 0||(A=X_.default.location)===null||A===void 0?void 0:A.href},this.viewerData=this.disableCookies?{}:Y4()}return El(n,[{key:"send",value:function(e,t){if(!(!e||!(t!=null&&t.view_id))){if(this.respectDoNotTrack&&cA())return fi.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||typeof t!="object")return fi.error("A data object was expected in send() but was not provided");var r=this.disableCookies?{}:W4(),i=nI(j0({},this.pageLevelData,t,r,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var o,l=((o=i.mux_sample_number)!==null&&o!==void 0?o:0)>=this.sampleRate,d=this._deduplicateBeaconData(e,i),c=hA(d);if(this.lastEventTime=this.mux.utils.now(),l)return fi.info("Not sending event due to sample rate restriction",e,i,c);if(this.envKey||fi.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,c),!this.rateLimited){if(fi.info("Sending event",e,i,c),this.rateLimited=!this.eventQueue.queueEvent(e,c),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&e==="hb"?this.eventQueue.flushEvents(!0):f8.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",c=hA(i),this.eventQueue.queueEvent(i.event,c),fi.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var r=this,i={},o=t.view_id;if(o==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=h8)i=j0({},t),o&&(this.previousBeaconData=i),o&&e==="viewend"&&(this.previousBeaconData=null);else{var l=e.indexOf("request")===0;Object.entries(t).forEach(function(d){var c=lu(d,2),f=c[0],m=c[1];r.previousBeaconData&&(m!==r.previousBeaconData[f]||u8.indexOf(f)>-1||r.objectHasChanged(l,f,m,r.previousBeaconData[f])||r.eventRequiresKey(e,f))&&(i[f]=m,r.previousBeaconData[f]=m)})}return i}},{key:"objectHasChanged",value:function(e,t,r,i){return!e||t.indexOf("request_")!==0?!1:t==="request_response_headers"||typeof r!="object"||typeof i!="object"?!0:Object.keys(r||{}).length!==Object.keys(i||{}).length}},{key:"eventRequiresKey",value:function(e,t){return!!(e==="renditionchange"&&t.indexOf("video_source_")===0||c8.includes(t)&&d8.includes(e))}}]),n}(),g8=function n(e){ba(this,n);var t=0,r=0,i=0,o=0,l=0,d=0,c=0,f=function(p,y){var v=y.request_start,A=y.request_response_start,I=y.request_response_end,P=y.request_bytes_loaded;o++;var U,M;if(A?(U=A-(v??0),M=(I??0)-A):M=(I??0)-(v??0),M>0&&P&&P>0){var B=P/M*8e3;l++,r+=P,i+=M,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,B),e.data.view_average_request_throughput=r/i*8e3,e.data.view_request_count=o,U>0&&(t+=U,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,U),e.data.view_average_request_latency=t/l)}},m=function(p,y){o++,d++,e.data.view_request_count=o,e.data.view_request_failed_count=d},g=function(p,y){o++,c++,e.data.view_request_count=o,e.data.view_request_canceled_count=c};e.on("requestcompleted",f),e.on("requestfailed",m),e.on("requestcanceled",g)},p8=g8,v8=60*60*1e3,y8=function n(e){var t=this;ba(this,n),Dn(this,"_lastEventTime",void 0),e.on("before*",function(r,i){var o=i.viewer_time,l=ta.now(),d=t._lastEventTime;if(t._lastEventTime=l,d&&l-d>v8){var c=Object.keys(e.data).reduce(function(m,g){return g.indexOf("video_")===0?Object.assign(m,Dn({},g,e.data[g])):m},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var f=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:o},c)),e.playbackHeartbeat._playheadShouldBeProgressing=f,e.playbackHeartbeat._playheadShouldBeProgressing&&r.type!=="play"&&r.type!=="adbreakstart"&&(e.emit("play",{viewer_time:o}),r.type!=="playing"&&e.emit("playing",{viewer_time:o}))}})},E8=y8,b8=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],T8=new Set(["requestcompleted","requestfailed","requestcanceled"]),_8=function(n){e4(t,n);var e=r4(t);function t(r,i,o){ba(this,t);var l;l=e.call(this),Dn(fr(l),"DOM_CONTENT_LOADED_EVENT_END",void 0),Dn(fr(l),"NAVIGATION_START",void 0),Dn(fr(l),"_destroyed",void 0),Dn(fr(l),"_heartBeatTimeout",void 0),Dn(fr(l),"adTracker",void 0),Dn(fr(l),"dashjs",void 0),Dn(fr(l),"data",void 0),Dn(fr(l),"disablePlayheadRebufferTracking",void 0),Dn(fr(l),"disableRebufferTracking",void 0),Dn(fr(l),"errorTracker",void 0),Dn(fr(l),"errorTranslator",void 0),Dn(fr(l),"emitTranslator",void 0),Dn(fr(l),"getAdData",void 0),Dn(fr(l),"getPlayheadTime",void 0),Dn(fr(l),"getStateData",void 0),Dn(fr(l),"stateDataTranslator",void 0),Dn(fr(l),"hlsjs",void 0),Dn(fr(l),"id",void 0),Dn(fr(l),"longResumeTracker",void 0),Dn(fr(l),"minimumRebufferDuration",void 0),Dn(fr(l),"mux",void 0),Dn(fr(l),"playbackEventDispatcher",void 0),Dn(fr(l),"playbackHeartbeat",void 0),Dn(fr(l),"playbackHeartbeatTime",void 0),Dn(fr(l),"playheadTime",void 0),Dn(fr(l),"seekingTracker",void 0),Dn(fr(l),"sustainedRebufferThreshold",void 0),Dn(fr(l),"watchTimeTracker",void 0),Dn(fr(l),"currentFragmentPDT",void 0),Dn(fr(l),"currentFragmentStart",void 0),l.DOM_CONTENT_LOADED_EVENT_END=$0.domContentLoadedEventEnd(),l.NAVIGATION_START=$0.navigationStart();var d={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(p){return p},emitTranslator:function(){for(var p=arguments.length,y=new Array(p),v=0;v<p;v++)y[v]=arguments[v];return y},stateDataTranslator:function(p){return p}};l.mux=r,l.id=i,o!=null&&o.beaconDomain&&l.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),o=Object.assign(d,o),o.data=o.data||{},o.data.property_key&&(o.data.env_key=o.data.property_key,delete o.data.property_key),fi.level=o.debug?Gc.DEBUG:Gc.WARN,l.getPlayheadTime=o.getPlayheadTime,l.getStateData=o.getStateData||function(){return{}},l.getAdData=o.getAdData||function(){},l.minimumRebufferDuration=o.minimumRebufferDuration,l.sustainedRebufferThreshold=o.sustainedRebufferThreshold,l.playbackHeartbeatTime=o.playbackHeartbeatTime,l.disableRebufferTracking=o.disableRebufferTracking,l.disableRebufferTracking&&l.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),l.disablePlayheadRebufferTracking=o.disablePlayheadRebufferTracking,l.errorTranslator=o.errorTranslator,l.emitTranslator=o.emitTranslator,l.stateDataTranslator=o.stateDataTranslator,l.playbackEventDispatcher=new m8(r,o.data.env_key,o),l.data={player_instance_id:Iv(),mux_sample_rate:o.sampleRate,beacon_domain:o.beaconCollectionDomain||o.beaconDomain},l.data.view_sequence_number=1,l.data.player_sequence_number=1;var c=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(fr(l));if(l.on("viewinit",function(p,y){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,y),this._initializeViewData(),this.one("play",c),this.one("adbreakstart",c)}),l.on("videochange",function(p,y){this._resetView(y)}),l.on("programchange",function(p,y){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(y,{view_program_changed:!0})),c(),this.emit("play"),this.emit("playing")}),l.on("fragmentchange",function(p,y){this.currentFragmentPDT=y.currentFragmentPDT,this.currentFragmentStart=y.currentFragmentStart}),l.on("destroy",l.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var f=function(){var p=typeof l.data.view_start<"u";l.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",p&&l.mux.WINDOW_HIDDEN&&(l.data.player_is_paused||l.emit("hb"))};window.addEventListener("visibilitychange",f,!1);var m=function(p){p.persisted||l.destroy()};window.addEventListener("pagehide",m,!1),l.on("destroy",function(){window.removeEventListener("visibilitychange",f),window.removeEventListener("pagehide",m)})}l.on("playerready",function(p,y){Object.assign(this.data,y)}),b8.forEach(function(p){l.on(p,function(y,v){p.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,v),this._sanitizeData()}),l.on("after"+p,function(){(p!=="error"||this.errorTracker.viewErrored)&&this.send(p)})}),l.on("viewend",function(p,y){Object.assign(l.data,y)});var g=function(p){var y=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=y-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return l.one("playerready",g),l.longResumeTracker=new E8(fr(l)),l.errorTracker=new T4(fr(l)),new G4(fr(l)),l.seekingTracker=new U4(fr(l)),l.playheadTime=new k4(fr(l)),l.playbackHeartbeat=new E4(fr(l)),new M4(fr(l)),l.watchTimeTracker=new S4(fr(l)),new w4(fr(l)),l.adTracker=new $4(fr(l)),new L4(fr(l)),new x4(fr(l)),new N4(fr(l)),new q4(fr(l)),new p8(fr(l)),o.hlsjs&&l.addHLSJS(o),o.dashjs&&l.addDashJS(o),l.emit("viewinit",o.data),l}return El(t,[{key:"emit",value:function(r,i){var o,l=Object.assign({viewer_time:this.mux.utils.now()},i),d=[r,l];if(this.emitTranslator)try{d=this.emitTranslator(r,l)}catch(c){this.mux.log.warn("Exception in emit translator callback.",c)}d!=null&&d.length&&(o=vb(Wm(t.prototype),"emit",this)).call.apply(o,[this].concat(ho(d)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(r){if(this.data.view_id){var i=Object.assign({},this.data),o=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(i.video_source_is_live===void 0&&(i.player_source_duration===1/0||i.video_source_duration===1/0?i.video_source_is_live=!0:(i.player_source_duration>0||i.video_source_duration>0)&&(i.video_source_is_live=!1)),i.video_source_is_live||o.forEach(function(f){i[f]=void 0}),i.video_source_url=i.video_source_url||i.player_source_url,i.video_source_url){var l=lu(kv(i.video_source_url),2),d=l[0],c=l[1];i.video_source_domain=c,i.video_source_hostname=d}delete i.ad_request_id,this.playbackEventDispatcher.send(r,i),this.data.view_sequence_number++,this.data.player_sequence_number++,T8.has(r)||this._restartHeartBeat(),r==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(r){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",r)}},{key:"_updateStateData",value:function(){var r=this.getStateData();if(typeof this.stateDataTranslator=="function")try{r=this.stateDataTranslator(r)}catch(i){this.mux.log.warn("Exception in stateDataTranslator translator callback.",i)}Object.assign(this.data,r),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var r=this,i=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];i.forEach(function(l){var d=parseInt(r.data[l],10);r.data[l]=isNaN(d)?void 0:d});var o=["player_source_url","video_source_url"];o.forEach(function(l){if(r.data[l]){var d=r.data[l].toLowerCase();(d.indexOf("data:")===0||d.indexOf("blob:")===0)&&(r.data[l]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var r=this;Object.keys(this.data).forEach(function(i){i.indexOf("video_")===0&&delete r.data[i]})}},{key:"_resetViewData",value:function(){var r=this;Object.keys(this.data).forEach(function(i){i.indexOf("view_")===0&&delete r.data[i]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var r=this,i=this.data.view_id=Iv(),o=function(){i===r.data.view_id&&ea(r.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",o):o()}},{key:"_restartHeartBeat",value:function(){var r=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){r.data.player_is_paused||r.emit("hb")},1e4)}},{key:"addHLSJS",value:function(r){if(!r.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=r.hlsjs,u4(this.mux,this.id,r.hlsjs,{},r.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(d4(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(r){if(!r.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=r.dashjs,m4(this.mux,this.id,r.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(g4(this.dashjs),this.dashjs=void 0)}}]),t}(v4),S8=_8,vp=ws(_D());function A8(){return vp.default&&!!(vp.default.fullscreenElement||vp.default.webkitFullscreenElement||vp.default.mozFullScreenElement||vp.default.msFullscreenElement)}var w8=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],I8={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function k8(n,e,t){var r=lu(B0(e),3),i=r[0],o=r[1],l=r[2],d=n.log,c=n.utils.getComputedStyle,f=n.utils.secondsToMs,m={automaticErrorTracking:!0};if(i){if(l!=="video"&&l!=="audio")return d.error("The element of `"+o+"` was not a media element.")}else return d.error("No element was found with the `"+o+"` query selector.");i.mux&&(i.mux.destroy(),delete i.mux,d.warn("Already monitoring this video element, replacing existing event listeners"));var g={getPlayheadTime:function(){return f(i.currentTime)},getStateData:function(){var y,v,A,I=((y=(v=this).getPlayheadTime)===null||y===void 0?void 0:y.call(v))||f(i.currentTime),P=this.hlsjs&&this.hlsjs.url,U=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),M={player_is_paused:i.paused,player_width:parseInt(c(i,"width")),player_height:parseInt(c(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:A8(),video_poster_url:i.poster,video_source_url:P||U||i.currentSrc,video_source_duration:f(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:i==null||(A=i.getVideoPlaybackQuality)===null||A===void 0?void 0:A.call(i).droppedVideoFrames};if(i.getStartDate&&I>0){var B=i.getStartDate();if(B&&typeof B.getTime=="function"&&B.getTime()){var ie=B.getTime();if(M.player_program_time=ie+I,i.seekable.length>0){var L=ie+i.seekable.end(i.seekable.length-1);M.player_live_edge_program_time=L}}}return M}};t=Object.assign(m,t,g),t.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:n.VERSION},t.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(y,v){n.emit(o,y,v)},i.mux.updateData=function(y){i.mux.emit("hb",y)};var p=function(){d.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(y){i.removeEventListener(y,i.mux.listeners[y],!1)}),delete i.mux.listeners,i.mux.destroy=p,i.mux.swapElement=p,i.mux.emit=p,i.mux.addHLSJS=p,i.mux.addDashJS=p,i.mux.removeHLSJS=p,i.mux.removeDashJS=p,i.mux.updateData=p,i.mux.setEmitTranslator=p,i.mux.setStateDataTranslator=p,i.mux.setGetPlayheadTime=p,i.mux.deleted=!0,n.emit(o,"destroy")},i.mux.swapElement=function(y){var v=lu(B0(y),3),A=v[0],I=v[1],P=v[2];if(A){if(P!=="video"&&P!=="audio")return n.log.error("The element of `"+I+"` was not a media element.")}else return n.log.error("No element was found with the `"+I+"` query selector.");A.muxId=i.muxId,delete i.muxId,A.mux=A.mux||{},A.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(A.mux.listeners).forEach(function(U){i.removeEventListener(U,A.mux.listeners[U],!1),A.addEventListener(U,A.mux.listeners[U],!1)}),A.mux.swapElement=i.mux.swapElement,A.mux.destroy=i.mux.destroy,delete i.mux,i=A},i.mux.addHLSJS=function(y){n.addHLSJS(o,y)},i.mux.addDashJS=function(y){n.addDashJS(o,y)},i.mux.removeHLSJS=function(){n.removeHLSJS(o)},i.mux.removeDashJS=function(){n.removeDashJS(o)},i.mux.setEmitTranslator=function(y){n.setEmitTranslator(o,y)},i.mux.setStateDataTranslator=function(y){n.setStateDataTranslator(o,y)},i.mux.setGetPlayheadTime=function(y){y||(y=t.getPlayheadTime),n.setGetPlayheadTime(o,y)},n.init(o,t),n.emit(o,"playerready"),i.paused||(n.emit(o,"play"),i.readyState>2&&n.emit(o,"playing")),i.mux.listeners={},w8.forEach(function(y){y==="error"&&!t.automaticErrorTracking||(i.mux.listeners[y]=function(){var v={};if(y==="error"){if(!i.error||i.error.code===1)return;v.player_error_code=i.error.code,v.player_error_message=I8[i.error.code]||i.error.message}n.emit(o,y,v)},i.addEventListener(y,i.mux.listeners[y],!1))})}function R8(n,e,t,r){var i=r;if(n&&typeof n[e]=="function")try{i=n[e].apply(n,t)}catch(o){fi.info("safeCall error",o)}return i}var av=ws(wo()),$h;av.default&&av.default.WeakMap&&($h=new WeakMap);function x8(n,e){if(!n||!e||!av.default||typeof av.default.getComputedStyle!="function")return"";var t;return $h&&$h.has(n)&&(t=$h.get(n)),t||(t=av.default.getComputedStyle(n,null),$h&&$h.set(n,t)),t.getPropertyValue(e)}function C8(n){return Math.floor(n*1e3)}var kc={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},wT=function(n){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(n),this.manifest};wT.prototype.process=function(n){var e;for(this.buffer+=n,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};wT.prototype.processLine=function(n){var e=n.indexOf(":"),t=P8(n,e),r=t[0],i=t.length===2?iI(t[1]):void 0;if(r[0]!=="#")this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case kc.TARGET_DURATION:{if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break}case kc.PART_INF:{Z_(this.manifest,t),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case kc.SERVER_CONTROL:{Z_(this.manifest,t),this.setHoldBack();break}case kc.INF:{i===0?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break}case kc.PROGRAM_DATE_TIME:{var o=i,l=new Date(o);this.manifest.dateTimeString||(this.manifest.dateTimeString=o,this.manifest.dateTimeObject=l),this.currentUri.dateTimeString=o,this.currentUri.dateTimeObject=l;break}case kc.VERSION:{Z_(this.manifest,t);break}case kc.SESSION_DATA:{var d=M8(t[1]),c=ID(d);Object.assign(this.manifest.sessionData,c)}}};wT.prototype.setHoldBack=function(){var n=this.manifest,e=n.serverControl,t=n.targetDuration,r=n.partTargetDuration;if(e){var i="holdBack",o="partHoldBack",l=t&&t*3,d=r&&r*2;t&&!e.hasOwnProperty(i)&&(e[i]=l),l&&e[i]<l&&(e[i]=l),r&&!e.hasOwnProperty(o)&&(e[o]=r*3),r&&e[o]<d&&(e[o]=d)}};var Z_=function(n,e){var t=MD(e[0].replace("#EXT-X-","")),r;N8(e[1])?(r={},r=Object.assign(D8(e[1]),r)):r=iI(e[1]),n[t]=r},MD=function(n){return n.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},iI=function(n){if(n.toLowerCase()==="yes"||n.toLowerCase()==="no")return n.toLowerCase()==="yes";var e=n.indexOf(":")!==-1?n:parseFloat(n);return isNaN(e)?n:e},L8=function(n){var e={},t=n.split("=");if(t.length>1){var r=MD(t[0]);e[r]=iI(t[1])}return e},D8=function(n){for(var e=n.split(","),t={},r=0;e.length>r;r++){var i=e[r],o=L8(i);t=Object.assign(o,t)}return t},N8=function(n){return n.indexOf("=")>-1},P8=function(n,e){return e===-1?[n]:[n.substring(0,e),n.substring(e+1)]},M8=function(n){var e={};if(n){var t=n.search(","),r=n.slice(0,t),i=n.slice(t+1),o=[r,i];return o.forEach(function(l,d){for(var c=l.replace(/['"]+/g,"").split("="),f=0;f<c.length;f++)c[f]==="DATA-ID"&&(e["DATA-ID"]=c[1-f]),c[f]==="VALUE"&&(e.VALUE=c[1-f])}),{data:e}}},O8=wT,F8={safeCall:R8,safeIncrement:ea,getComputedStyle:x8,secondsToMs:C8,assign:Object.assign,headersStringToObject:rI,cdnHeadersToRequestId:q0,extractHostnameAndDomain:kv,extractHostname:To,manifestParser:O8,generateShortID:AD,generateUUID:Iv,now:ta.now,findMediaElement:B0},U8=F8,z8={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},B8=z8,$8="mux-embed",j8="5.9.0",q8="2.1",Yi={},Ld=function(n){var e=arguments;typeof n=="string"?Ld.hasOwnProperty(n)?iv.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),Ld[n].apply(null,e)},0):fi.warn("`"+n+"` is an unknown task"):typeof n=="function"?iv.default.setTimeout(function(){n(Ld)},0):fi.warn("`"+n+"` is invalid.")},H8={loaded:ta.now(),NAME:$8,VERSION:j8,API_VERSION:q8,PLAYER_TRACKED:!1,monitor:function(n,e){return k8(Ld,n,e)},destroyMonitor:function(n){var e=lu(B0(n),1),t=e[0];t&&t.mux&&typeof t.mux.destroy=="function"?t.mux.destroy():fi.error("A video element monitor for `"+n+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(n,e){var t=fo(n);Yi[t]?Yi[t].addHLSJS(e):fi.error("A monitor for `"+t+"` has not been initialized.")},addDashJS:function(n,e){var t=fo(n);Yi[t]?Yi[t].addDashJS(e):fi.error("A monitor for `"+t+"` has not been initialized.")},removeHLSJS:function(n){var e=fo(n);Yi[e]?Yi[e].removeHLSJS():fi.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(n){var e=fo(n);Yi[e]?Yi[e].removeDashJS():fi.error("A monitor for `"+e+"` has not been initialized.")},init:function(n,e){cA()&&e&&e.respectDoNotTrack&&fi.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var t=fo(n);Yi[t]=new S8(Ld,t,e)},emit:function(n,e,t){var r=fo(n);Yi[r]?(Yi[r].emit(e,t),e==="destroy"&&delete Yi[r]):fi.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(n,e){var t=fo(n);Yi[t]?Yi[t].emit("hb",e):fi.error("A monitor for `"+t+"` has not been initialized.")},setEmitTranslator:function(n,e){var t=fo(n);Yi[t]?Yi[t].emitTranslator=e:fi.error("A monitor for `"+t+"` has not been initialized.")},setStateDataTranslator:function(n,e){var t=fo(n);Yi[t]?Yi[t].stateDataTranslator=e:fi.error("A monitor for `"+t+"` has not been initialized.")},setGetPlayheadTime:function(n,e){var t=fo(n);Yi[t]?Yi[t].getPlayheadTime=e:fi.error("A monitor for `"+t+"` has not been initialized.")},checkDoNotTrack:cA,log:fi,utils:U8,events:B8,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Ld,H8);typeof iv.default<"u"&&typeof iv.default.addEventListener=="function"&&iv.default.addEventListener("pagehide",function(n){n.persisted||(Ld.WINDOW_UNLOADING=!0)},!1);var aI=Ld;/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/var Pr=Va,Ei={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},or={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},IT=n=>n===Ei.VIDEO?"playback":n,Yu=class Np extends Error{constructor(e,t=Np.MEDIA_ERR_CUSTOM,r,i){var o;super(e),this.name="MediaError",this.code=t,this.context=i,this.fatal=r??(t>=Np.MEDIA_ERR_NETWORK&&t<=Np.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(o=Np.defaultMessages[this.code])!=null?o:"")}};Yu.MEDIA_ERR_ABORTED=1,Yu.MEDIA_ERR_NETWORK=2,Yu.MEDIA_ERR_DECODE=3,Yu.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Yu.MEDIA_ERR_ENCRYPTED=5,Yu.MEDIA_ERR_CUSTOM=100,Yu.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var Un=Yu,G8=n=>n==null,sI=(n,e)=>G8(e)?!1:n in e,mA={ANY:"any",MUTED:"muted"},Jr={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},fl={MSE:"mse",NATIVE:"native"},Pp={HEADER:"header",QUERY:"query",NONE:"none"},H0=Object.values(Pp),au={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},g1={HLS:au.M3U8};[...Object.values(au)];var V8={upTo720p:"720p",upTo1080p:"1080p",upTo1440p:"1440p",upTo2160p:"2160p"},K8={noLessThan480p:"480p",noLessThan540p:"540p",noLessThan720p:"720p",noLessThan1080p:"1080p",noLessThan1440p:"1440p",noLessThan2160p:"2160p"},Y8={DESCENDING:"desc"},W8="en",gA={code:W8},Qi=(n,e,t,r,i=n)=>{i.addEventListener(e,t,r),n.addEventListener("teardown",()=>{i.removeEventListener(e,t)},{once:!0})};function Q8(n,e,t){e&&t>e&&(t=e);for(let r=0;r<n.length;r++)if(n.start(r)<=t&&n.end(r)>=t)return!0;return!1}var oI=n=>{let e=n.indexOf("?");if(e<0)return[n];let t=n.slice(0,e),r=n.slice(e);return[t,r]},kT=n=>{let{type:e}=n;if(e){let t=e.toUpperCase();return sI(t,g1)?g1[t]:e}return X8(n)},OD=n=>n==="VOD"?Jr.ON_DEMAND:Jr.LIVE,FD=n=>n==="EVENT"?Number.POSITIVE_INFINITY:n==="VOD"?Number.NaN:0,X8=n=>{let{src:e}=n;if(!e)return"";let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let r=t.lastIndexOf(".");if(r<0)return J8(n)?au.M3U8:"";let i=t.slice(r+1).toUpperCase();return sI(i,au)?au[i]:""},Z8="mux.com",J8=({src:n,customDomain:e=Z8})=>{let t;try{t=new URL(`${n}`)}catch{return!1}let r=t.protocol==="https:",i=t.hostname===`stream.${e}`.toLowerCase(),o=t.pathname.split("/"),l=o.length===2,d=!(o!=null&&o[1].includes("."));return r&&i&&l&&d},pm=n=>{let e=(n??"").split(".")[1];if(e)try{let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(r)}catch{return}},e5=({exp:n},e=Date.now())=>!n||n*1e3<e,t5=({sub:n},e)=>n!==e,n5=({aud:n},e)=>!n,r5=({aud:n},e)=>n!==e,UD="en";function ir(n,e=!0){var t,r;let i=e&&(r=(t=gA)==null?void 0:t[n])!=null?r:n,o=e?gA.code:UD;return new i5(i,o)}var i5=class{constructor(e,t=(r=>(r=gA)!=null?r:UD)()){this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,(t,r)=>{var i;return(i=e[r])!=null?i:""})}toString(){return this.message}},a5=Object.values(mA),p1=n=>typeof n=="boolean"||typeof n=="string"&&a5.includes(n),s5=(n,e,t)=>{let{autoplay:r}=n,i=!1,o=!1,l=p1(r)?r:!!r,d=()=>{i||Qi(e,"playing",()=>{i=!0},{once:!0})};if(d(),Qi(e,"loadstart",()=>{i=!1,d(),J_(e,l)},{once:!0}),Qi(e,"loadstart",()=>{t||(n.streamType&&n.streamType!==Jr.UNKNOWN?o=n.streamType===Jr.LIVE:o=!Number.isFinite(e.duration)),J_(e,l)},{once:!0}),t&&t.once(Pr.Events.LEVEL_LOADED,(c,f)=>{var m;n.streamType&&n.streamType!==Jr.UNKNOWN?o=n.streamType===Jr.LIVE:o=(m=f.details.live)!=null?m:!1}),!l){let c=()=>{!o||Number.isFinite(n.startTime)||(t!=null&&t.liveSyncPosition?e.currentTime=t.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};t&&Qi(e,"play",()=>{e.preload==="metadata"?t.once(Pr.Events.LEVEL_UPDATED,c):c()},{once:!0})}return c=>{i||(l=p1(c)?c:!!c,J_(e,l))}},J_=(n,e)=>{if(!e)return;let t=n.muted,r=()=>n.muted=t;switch(e){case mA.ANY:n.play().catch(()=>{n.muted=!0,n.play().catch(r)});break;case mA.MUTED:n.muted=!0,n.play().catch(r);break;default:n.play().catch(()=>{});break}},o5=({preload:n,src:e},t,r)=>{let i=g=>{g!=null&&["","none","metadata","auto"].includes(g)?t.setAttribute("preload",g):t.removeAttribute("preload")};if(!r)return i(n),i;let o=!1,l=!1,d=r.config.maxBufferLength,c=r.config.maxBufferSize,f=g=>{i(g);let p=g??t.preload;l||p==="none"||(p==="metadata"?(r.config.maxBufferLength=1,r.config.maxBufferSize=1):(r.config.maxBufferLength=d,r.config.maxBufferSize=c),m())},m=()=>{!o&&e&&(o=!0,r.loadSource(e))};return Qi(t,"play",()=>{l=!0,r.config.maxBufferLength=d,r.config.maxBufferSize=c,m()},{once:!0}),f(n),f};function l5(n,e){var t;if(!("videoTracks"in n))return;let r=new WeakMap;e.on(Pr.Events.MANIFEST_PARSED,function(c,f){d();let m=n.addVideoTrack("main");m.selected=!0;for(let[g,p]of f.levels.entries()){let y=m.addRendition(p.url[0],p.width,p.height,p.videoCodec,p.bitrate);r.set(p,`${g}`),y.id=`${g}`}}),e.on(Pr.Events.AUDIO_TRACKS_UPDATED,function(c,f){l();for(let m of f.audioTracks){let g=m.default?"main":"alternative",p=n.addAudioTrack(g,m.name,m.lang);p.id=`${m.id}`,m.default&&(p.enabled=!0)}}),n.audioTracks.addEventListener("change",()=>{var c;let f=+((c=[...n.audioTracks].find(g=>g.enabled))==null?void 0:c.id),m=e.audioTracks.map(g=>g.id);f!=e.audioTrack&&m.includes(f)&&(e.audioTrack=f)}),e.on(Pr.Events.LEVELS_UPDATED,function(c,f){var m;let g=n.videoTracks[(m=n.videoTracks.selectedIndex)!=null?m:0];if(!g)return;let p=f.levels.map(y=>r.get(y));for(let y of n.videoRenditions)y.id&&!p.includes(y.id)&&g.removeRendition(y)});let i=c=>{let f=c.target.selectedIndex;f!=e.nextLevel&&(e.nextLevel=f)};(t=n.videoRenditions)==null||t.addEventListener("change",i);let o=()=>{for(let c of n.videoTracks)n.removeVideoTrack(c)},l=()=>{for(let c of n.audioTracks)n.removeAudioTrack(c)},d=()=>{o(),l()};e.once(Pr.Events.DESTROYING,d)}var eS=n=>"time"in n?n.time:n.startTime;function u5(n,e){e.on(Pr.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(i,{tracks:o})=>{o.forEach(l=>{var d,c;let f=(d=l.subtitleTrack)!=null?d:l.closedCaptions,m=e.subtitleTracks.findIndex(({lang:p,name:y,type:v})=>p==(f==null?void 0:f.lang)&&y===l.label&&v.toLowerCase()===l.kind),g=((c=l._id)!=null?c:l.default)?"default":`${l.kind}${m}`;lI(n,l.kind,l.label,f==null?void 0:f.lang,g,l.default)})});let t=()=>{if(!e.subtitleTracks.length)return;let i=Array.from(n.textTracks).find(d=>d.id&&d.mode==="showing"&&["subtitles","captions"].includes(d.kind));if(!i)return;let o=e.subtitleTracks[e.subtitleTrack],l=o?o.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||(i==null?void 0:i.id)!==l){let d=e.subtitleTracks.findIndex(({lang:c,name:f,type:m,default:g})=>i.id==="default"&&g||c==i.language&&f===i.label&&m.toLowerCase()===i.kind);e.subtitleTrack=d}(i==null?void 0:i.id)===l&&i.cues&&Array.from(i.cues).forEach(d=>{i.addCue(d)})};n.textTracks.addEventListener("change",t),e.on(Pr.Events.CUES_PARSED,(i,{track:o,cues:l})=>{let d=n.textTracks.getTrackById(o);if(!d)return;let c=d.mode==="disabled";c&&(d.mode="hidden"),l.forEach(f=>{var m;(m=d.cues)!=null&&m.getCueById(f.id)||d.addCue(f)}),c&&(d.mode="disabled")}),e.once(Pr.Events.DESTROYING,()=>{n.textTracks.removeEventListener("change",t),n.querySelectorAll("track[data-removeondestroy]").forEach(i=>{i.remove()})});let r=()=>{Array.from(n.textTracks).forEach(i=>{var o,l;if(!["subtitles","caption"].includes(i.kind)&&(i.label==="thumbnails"||i.kind==="chapters")){if(!((o=i.cues)!=null&&o.length)){let d="track";i.kind&&(d+=`[kind="${i.kind}"]`),i.label&&(d+=`[label="${i.label}"]`);let c=n.querySelector(d),f=(l=c==null?void 0:c.getAttribute("src"))!=null?l:"";c==null||c.removeAttribute("src"),setTimeout(()=>{c==null||c.setAttribute("src",f)},0)}i.mode!=="hidden"&&(i.mode="hidden")}})};e.once(Pr.Events.MANIFEST_LOADED,r),e.once(Pr.Events.MEDIA_ATTACHED,r)}function lI(n,e,t,r,i,o){let l=document.createElement("track");return l.kind=e,l.label=t,r&&(l.srclang=r),i&&(l.id=i),o&&(l.default=!0),l.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",l.setAttribute("data-removeondestroy",""),n.append(l),l.track}function d5(n,e){let t=Array.prototype.find.call(n.querySelectorAll("track"),r=>r.track===e);t==null||t.remove()}function ry(n,e,t){var r;return(r=Array.from(n.querySelectorAll("track")).find(i=>i.track.label===e&&i.track.kind===t))==null?void 0:r.track}async function zD(n,e,t,r){let i=ry(n,t,r);return i||(i=lI(n,r,t),i.mode="hidden",await new Promise(o=>setTimeout(()=>o(void 0),0))),i.mode!=="hidden"&&(i.mode="hidden"),[...e].sort((o,l)=>eS(l)-eS(o)).forEach(o=>{var l,d;let c=o.value,f=eS(o);if("endTime"in o&&o.endTime!=null)i==null||i.addCue(new VTTCue(f,o.endTime,r==="chapters"?c:JSON.stringify(c??null)));else{let m=Array.prototype.findIndex.call(i==null?void 0:i.cues,v=>v.startTime>=f),g=(l=i==null?void 0:i.cues)==null?void 0:l[m],p=g?g.startTime:Number.isFinite(n.duration)?n.duration:Number.MAX_SAFE_INTEGER,y=(d=i==null?void 0:i.cues)==null?void 0:d[m-1];y&&(y.endTime=f),i==null||i.addCue(new VTTCue(f,p,r==="chapters"?c:JSON.stringify(c??null)))}}),n.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var uI="cuepoints",BD=Object.freeze({label:uI});async function $D(n,e,t=BD){return zD(n,e,t.label,"metadata")}var pA=n=>({time:n.startTime,value:JSON.parse(n.text)});function c5(n,e={label:uI}){let t=ry(n,e.label,"metadata");return t!=null&&t.cues?Array.from(t.cues,r=>pA(r)):[]}function jD(n,e={label:uI}){var t,r;let i=ry(n,e.label,"metadata");if(!((t=i==null?void 0:i.activeCues)!=null&&t.length))return;if(i.activeCues.length===1)return pA(i.activeCues[0]);let{currentTime:o}=n,l=Array.prototype.find.call((r=i.activeCues)!=null?r:[],({startTime:d,endTime:c})=>d<=o&&c>o);return pA(l||i.activeCues[0])}async function f5(n,e=BD){return new Promise(t=>{Qi(n,"loadstart",async()=>{let r=await $D(n,[],e);Qi(n,"cuechange",()=>{let i=jD(n);if(i){let o=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:i});n.dispatchEvent(o)}},{},r),t(r)})})}var dI="chapters",qD=Object.freeze({label:dI}),vA=n=>({startTime:n.startTime,endTime:n.endTime,value:n.text});async function HD(n,e,t=qD){return zD(n,e,t.label,"chapters")}function h5(n,e={label:dI}){var t;let r=ry(n,e.label,"chapters");return(t=r==null?void 0:r.cues)!=null&&t.length?Array.from(r.cues,i=>vA(i)):[]}function GD(n,e={label:dI}){var t,r;let i=ry(n,e.label,"chapters");if(!((t=i==null?void 0:i.activeCues)!=null&&t.length))return;if(i.activeCues.length===1)return vA(i.activeCues[0]);let{currentTime:o}=n,l=Array.prototype.find.call((r=i.activeCues)!=null?r:[],({startTime:d,endTime:c})=>d<=o&&c>o);return vA(l||i.activeCues[0])}async function m5(n,e=qD){return new Promise(t=>{Qi(n,"loadstart",async()=>{let r=await HD(n,[],e);Qi(n,"cuechange",()=>{let i=GD(n);if(i){let o=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:i});n.dispatchEvent(o)}},{},r),t(r)})})}function g5(n,e){if(e){let t=e.playingDate;if(t!=null)return new Date(t.getTime()-n.currentTime*1e3)}return typeof n.getStartDate=="function"?n.getStartDate():new Date(NaN)}function p5(n,e){if(e&&e.playingDate)return e.playingDate;if(typeof n.getStartDate=="function"){let t=n.getStartDate();return new Date(t.getTime()+n.currentTime*1e3)}return new Date(NaN)}var sv={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},v5=n=>{if(n===Ei.VIDEO)return sv.VIDEO;if(n===Ei.DRM)return sv.DRM},y5=(n,e)=>{var t,r;let i=IT(n),o=`${i}Token`;return(t=e.tokens)!=null&&t[i]?(r=e.tokens)==null?void 0:r[i]:sI(o,e)?e[o]:void 0},G0=(n,e,t,r,i=!1,o=!(l=>(l=globalThis.navigator)==null?void 0:l.onLine)())=>{var l,d;if(o){let P=ir("Your device appears to be offline",i),U,M=Un.MEDIA_ERR_NETWORK,B=new Un(P,M,!1,U);return B.errorCategory=e,B.muxCode=or.NETWORK_OFFLINE,B.data=n,B}let c="status"in n?n.status:n.code,f=Date.now(),m=Un.MEDIA_ERR_NETWORK;if(c===200)return;let g=IT(e),p=y5(e,t),y=v5(e),[v]=oI((l=t.playbackId)!=null?l:"");if(!c||!v)return;let A=pm(p);if(p&&!A){let P=ir("The {tokenNamePrefix}-token provided is invalid or malformed.",i).format({tokenNamePrefix:g}),U=ir("Compact JWT string: {token}",i).format({token:p}),M=new Un(P,m,!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_TOKEN_MALFORMED,M.data=n,M}if(c>=500){let P=new Un("",m,r??!0);return P.errorCategory=e,P.muxCode=or.NETWORK_UNKNOWN_ERROR,P}if(c===403)if(A){if(e5(A,f)){let P={timeStyle:"medium",dateStyle:"medium"},U=ir("The video’s secured {tokenNamePrefix}-token has expired.",i).format({tokenNamePrefix:g}),M=ir("Expired at: {expiredDate}. Current time: {currentDate}.",i).format({expiredDate:new Intl.DateTimeFormat("en",P).format((d=A.exp)!=null?d:0*1e3),currentDate:new Intl.DateTimeFormat("en",P).format(f)}),B=new Un(U,m,!0,M);return B.errorCategory=e,B.muxCode=or.NETWORK_TOKEN_EXPIRED,B.data=n,B}if(t5(A,v)){let P=ir("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",i).format({tokenNamePrefix:g}),U=ir("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",i).format({tokenNamePrefix:g,playbackId:v,tokenPlaybackId:A.sub}),M=new Un(P,m,!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_TOKEN_SUB_MISMATCH,M.data=n,M}if(n5(A)){let P=ir("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:g}),U=ir("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",i).format({tokenNamePrefix:g,expectedAud:y}),M=new Un(P,m,!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_TOKEN_AUD_MISSING,M.data=n,M}if(r5(A,y)){let P=ir("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:g}),U=ir("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",i).format({tokenNamePrefix:g,expectedAud:y,aud:A.aud}),M=new Un(P,m,!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_TOKEN_AUD_MISMATCH,M.data=n,M}}else{let P=ir("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",i).format({tokenNamePrefix:g,category:e}),U=ir("Specified playback ID: {playbackId}",i).format({playbackId:v}),M=new Un(P,m,r??!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_TOKEN_MISSING,M.data=n,M}if(c===412){let P=ir("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",i),U=ir("Specified playback ID: {playbackId}",i).format({playbackId:v}),M=new Un(P,m,r??!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_NOT_READY,M.streamType=t.streamType===Jr.LIVE?"live":t.streamType===Jr.ON_DEMAND?"on-demand":"unknown",M.data=n,M}if(c===404){let P=ir("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",i),U=ir("Specified playback ID: {playbackId}",i).format({playbackId:v}),M=new Un(P,m,r??!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_NOT_FOUND,M.data=n,M}if(c===400){let P=ir("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),U=ir("Specified playback ID: {playbackId}",i).format({playbackId:v}),M=new Un(P,m,r??!0,U);return M.errorCategory=e,M.muxCode=or.NETWORK_INVALID_URL,M.data=n,M}let I=new Un("",m,r??!0);return I.errorCategory=e,I.muxCode=or.NETWORK_UNKNOWN_ERROR,I.data=n,I},v1=Pr.DefaultConfig.capLevelController,VD=class KD extends v1{constructor(e){super(e)}get levels(){var e;return(e=this.hls.levels)!=null?e:[]}getValidLevels(e){return this.levels.filter((t,r)=>this.isLevelAllowed(t)&&r<=e)}getMaxLevel(e){let t=super.getMaxLevel(e),r=this.getValidLevels(e);if(!r[t])return t;let i=Math.min(r[t].width,r[t].height),o=KD.minMaxResolution;return i>=o?t:v1.getMaxLevelByMediaSize(r,o*(16/9),o)}};VD.minMaxResolution=720;var E5=VD,b5=E5,yb={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},T5=n=>{if(n.includes("fps"))return yb.FAIRPLAY;if(n.includes("playready"))return yb.PLAYREADY;if(n.includes("widevine"))return yb.WIDEVINE},_5=n=>{let e=n.split(`
`).find((t,r,i)=>r&&i[r-1].startsWith("#EXT-X-STREAM-INF"));return fetch(e).then(t=>t.status!==200?Promise.reject(t):t.text())},S5=n=>{let e=n.split(`
`).filter(r=>r.startsWith("#EXT-X-SESSION-DATA"));if(!e.length)return{};let t={};for(let r of e){let i=w5(r),o=i["DATA-ID"];o&&(t[o]={...i})}return{sessionData:t}},A5=/([A-Z0-9-]+)="?(.*?)"?(?:,|$)/g;function w5(n){let e=[...n.matchAll(A5)];return Object.fromEntries(e.map(([,t,r])=>[t,r]))}var I5=n=>{var e,t,r;let i=n.split(`
`),o=(t=((e=i.find(f=>f.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:t.trim(),l=OD(o),d=FD(o),c;if(l===Jr.LIVE){let f=i.find(m=>m.startsWith("#EXT-X-PART-INF"));if(f)c=+f.split(":")[1].split("=")[1]*2;else{let m=i.find(p=>p.startsWith("#EXT-X-TARGETDURATION")),g=(r=m==null?void 0:m.split(":"))==null?void 0:r[1];c=+(g??6)*3}}return{streamType:l,targetLiveWindow:d,liveEdgeStartOffset:c}},k5=async(n,e)=>{if(e===au.MP4)return{streamType:Jr.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0,sessionData:void 0};if(e===au.M3U8){let t=await fetch(n);if(!t.ok)return Promise.reject(t);let r=await t.text(),i=await _5(r);return{...S5(r),...I5(i)}}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${n}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0,sessionData:void 0}},R5=async(n,e,t=kT({src:n}))=>{var r,i,o,l;let{streamType:d,targetLiveWindow:c,liveEdgeStartOffset:f,sessionData:m}=await k5(n,t),g=m==null?void 0:m["com.apple.hls.chapters"];(g!=null&&g.URI||g!=null&&g.VALUE.toLocaleLowerCase().startsWith("http"))&&cI((r=g.URI)!=null?r:g.VALUE,e),((i=Oi.get(e))!=null?i:{}).liveEdgeStartOffset=f,((o=Oi.get(e))!=null?o:{}).targetLiveWindow=c,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((l=Oi.get(e))!=null?l:{}).streamType=d,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},cI=async(n,e)=>{var t,r;try{let i=await fetch(n);if(!i.ok)throw new Error(`Failed to fetch Mux metadata: ${i.status} ${i.statusText}`);let o=await i.json(),l={};if(!((t=o==null?void 0:o[0])!=null&&t.metadata))return;for(let c of o[0].metadata)c.key&&c.value&&(l[c.key]=c.value);((r=Oi.get(e))!=null?r:{}).metadata=l;let d=new CustomEvent("muxmetadata");e.dispatchEvent(d)}catch(i){console.error(i)}},x5=n=>{var e;let t=n.type,r=OD(t),i=FD(t),o,l=!!((e=n.partList)!=null&&e.length);return r===Jr.LIVE&&(o=l?n.partTarget*2:n.targetduration*3),{streamType:r,targetLiveWindow:i,liveEdgeStartOffset:o,lowLatency:l}},C5=(n,e,t)=>{var r,i,o,l,d,c,f,m;let{streamType:g,targetLiveWindow:p,liveEdgeStartOffset:y,lowLatency:v}=x5(n);if(g===Jr.LIVE){v?(t.config.backBufferLength=(r=t.userConfig.backBufferLength)!=null?r:4,t.config.maxFragLookUpTolerance=(i=t.userConfig.maxFragLookUpTolerance)!=null?i:.001,t.config.abrBandWidthUpFactor=(o=t.userConfig.abrBandWidthUpFactor)!=null?o:t.config.abrBandWidthFactor):t.config.backBufferLength=(l=t.userConfig.backBufferLength)!=null?l:8;let A=Object.freeze({get length(){return e.seekable.length},start(I){return e.seekable.start(I)},end(I){var P;return I>this.length||I<0||Number.isFinite(e.duration)?e.seekable.end(I):(P=t.liveSyncPosition)!=null?P:e.seekable.end(I)}});((d=Oi.get(e))!=null?d:{}).seekable=A}((c=Oi.get(e))!=null?c:{}).liveEdgeStartOffset=y,((f=Oi.get(e))!=null?f:{}).targetLiveWindow=p,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((m=Oi.get(e))!=null?m:{}).streamType=g,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},y1,E1,L5=(E1=(y1=globalThis==null?void 0:globalThis.navigator)==null?void 0:y1.userAgent)!=null?E1:"",b1,T1,_1,D5=(_1=(T1=(b1=globalThis==null?void 0:globalThis.navigator)==null?void 0:b1.userAgentData)==null?void 0:T1.platform)!=null?_1:"",N5=L5.toLowerCase().includes("android")||["x11","android"].some(n=>D5.toLowerCase().includes(n)),Oi=new WeakMap,su="mux.com",S1,A1,YD=(A1=(S1=Pr).isSupported)==null?void 0:A1.call(S1),P5=N5,RT=()=>aI.utils.now(),M5=aI.utils.generateUUID,yA=({playbackId:n,customDomain:e=su,maxResolution:t,minResolution:r,renditionOrder:i,programStartTime:o,programEndTime:l,assetStartTime:d,assetEndTime:c,playbackToken:f,tokens:{playback:m=f}={},extraSourceParams:g={}}={})=>{if(!n)return;let[p,y=""]=oI(n),v=new URL(`https://stream.${e}/${p}.m3u8${y}`);return m||v.searchParams.has("token")?(v.searchParams.forEach((A,I)=>{I!="token"&&v.searchParams.delete(I)}),m&&v.searchParams.set("token",m)):(t&&v.searchParams.set("max_resolution",t),r&&(v.searchParams.set("min_resolution",r),t&&+t.slice(0,-1)<+r.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",r,"maxResolution",t)),i&&v.searchParams.set("rendition_order",i),o&&v.searchParams.set("program_start_time",`${o}`),l&&v.searchParams.set("program_end_time",`${l}`),d&&v.searchParams.set("asset_start_time",`${d}`),c&&v.searchParams.set("asset_end_time",`${c}`),Object.entries(g).forEach(([A,I])=>{I!=null&&v.searchParams.set(A,I)})),v.toString()},xT=n=>{if(!n)return;let[e]=n.split("?");return e||void 0},fI=n=>{if(!n||!n.startsWith("https://stream."))return;let[e]=new URL(n).pathname.slice(1).split(/\.m3u8|\//);return e||void 0},O5=n=>{var e,t,r;return(e=n==null?void 0:n.metadata)!=null&&e.video_id?n.metadata.video_id:nN(n)&&(r=(t=xT(n.playbackId))!=null?t:fI(n.src))!=null?r:n.src},WD=n=>{var e;return(e=Oi.get(n))==null?void 0:e.error},F5=n=>{var e;return(e=Oi.get(n))==null?void 0:e.metadata},EA=n=>{var e,t;return(t=(e=Oi.get(n))==null?void 0:e.streamType)!=null?t:Jr.UNKNOWN},U5=n=>{var e,t;return(t=(e=Oi.get(n))==null?void 0:e.targetLiveWindow)!=null?t:Number.NaN},hI=n=>{var e,t;return(t=(e=Oi.get(n))==null?void 0:e.seekable)!=null?t:n.seekable},z5=n=>{var e;let t=(e=Oi.get(n))==null?void 0:e.liveEdgeStartOffset;if(typeof t!="number")return Number.NaN;let r=hI(n);return r.length?r.end(r.length-1)-t:Number.NaN},mI=.034,B5=(n,e,t=mI)=>Math.abs(n-e)<=t,QD=(n,e,t=mI)=>n>e||B5(n,e,t),$5=(n,e=mI)=>n.paused&&QD(n.currentTime,n.duration,e),XD=(n,e)=>{var t,r,i;if(!e||!n.buffered.length)return;if(n.readyState>2)return!1;let o=e.currentLevel>=0?(r=(t=e.levels)==null?void 0:t[e.currentLevel])==null?void 0:r.details:(i=e.levels.find(g=>!!g.details))==null?void 0:i.details;if(!o||o.live)return;let{fragments:l}=o;if(!(l!=null&&l.length))return;if(n.currentTime<n.duration-(o.targetduration+.5))return!1;let d=l[l.length-1];if(n.currentTime<=d.start)return!1;let c=d.start+d.duration/2,f=n.buffered.start(n.buffered.length-1),m=n.buffered.end(n.buffered.length-1);return c>f&&c<m},ZD=(n,e)=>n.ended||n.loop?n.ended:e&&XD(n,e)?!0:$5(n),j5=(n,e,t)=>{JD(e,t,n);let{metadata:r={}}=n,{view_session_id:i=M5()}=r,o=O5(n);r.view_session_id=i,r.video_id=o,n.metadata=r;let l=m=>{var g;(g=e.mux)==null||g.emit("hb",{view_drm_type:m})};n.drmTypeCb=l,Oi.set(e,{retryCount:0});let d=q5(n,e),c=o5(n,e,d);n!=null&&n.muxDataKeepSession&&e!=null&&e.mux&&!e.mux.deleted?d&&e.mux.addHLSJS({hlsjs:d,Hls:d?Pr:void 0}):W5(n,e,d),Q5(n,e,d),f5(e),m5(e);let f=s5(n,e,d);return{engine:d,setAutoplay:f,setPreload:c}},JD=(n,e,t)=>{let r=e==null?void 0:e.engine;n!=null&&n.mux&&!n.mux.deleted&&(t!=null&&t.muxDataKeepSession?r&&n.mux.removeHLSJS():(n.mux.destroy(),delete n.mux)),r&&(r.detachMedia(),r.destroy()),n&&(n.hasAttribute("src")&&(n.removeAttribute("src"),n.load()),n.removeEventListener("error",iN),n.removeEventListener("error",bA),n.removeEventListener("durationchange",rN),Oi.delete(n),n.dispatchEvent(new Event("teardown")))};function eN(n,e){var t;let r=kT(n);if(r!==au.M3U8)return!0;let i=!r||((t=e.canPlayType(r))!=null?t:!0),{preferPlayback:o}=n,l=o===fl.MSE,d=o===fl.NATIVE;return i&&(d||!(YD&&(l||P5)))}var q5=(n,e)=>{let{debug:t,streamType:r,startTime:i=-1,metadata:o,preferCmcd:l,_hlsConfig:d={}}=n,c=kT(n)===au.M3U8,f=eN(n,e);if(c&&!f&&YD){let m={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},g=H5(r),p=G5(n),y=[Pp.QUERY,Pp.HEADER].includes(l)?{useHeaders:l===Pp.HEADER,sessionId:o==null?void 0:o.view_session_id,contentId:o==null?void 0:o.video_id}:void 0,v=new Pr({debug:t,startPosition:i,cmcd:y,xhrSetup:(A,I)=>{var P,U;if(l&&l!==Pp.QUERY)return;let M=new URL(I);if(!M.searchParams.has("CMCD"))return;let B=((U=(P=M.searchParams.get("CMCD"))==null?void 0:P.split(","))!=null?U:[]).filter(ie=>ie.startsWith("sid")||ie.startsWith("cid")).join(",");M.searchParams.set("CMCD",B),A.open("GET",M)},capLevelController:b5,...m,...g,...p,...d});return v.on(Pr.Events.MANIFEST_PARSED,async function(A,I){var P,U;let M=(P=I.sessionData)==null?void 0:P["com.apple.hls.chapters"];(M!=null&&M.URI||M!=null&&M.VALUE.toLocaleLowerCase().startsWith("http"))&&cI((U=M==null?void 0:M.URI)!=null?U:M==null?void 0:M.VALUE,e)}),v}},H5=n=>n===Jr.LIVE?{backBufferLength:8}:{},G5=n=>{let{tokens:{drm:e}={},playbackId:t,drmTypeCb:r}=n,i=xT(t);return!e||!i?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:Eb(n,"fairplay"),serverCertificateUrl:tN(n,"fairplay")},"com.widevine.alpha":{licenseUrl:Eb(n,"widevine")},"com.microsoft.playready":{licenseUrl:Eb(n,"playready")}},requestMediaKeySystemAccessFunc:(o,l)=>(o==="com.widevine.alpha"&&(l=[...l.map(d=>{var c;let f=(c=d.videoCapabilities)==null?void 0:c.map(m=>({...m,robustness:"HW_SECURE_ALL"}));return{...d,videoCapabilities:f}}),...l]),navigator.requestMediaKeySystemAccess(o,l).then(d=>{let c=T5(o);return r==null||r(c),d}))}},V5=async n=>{let e=await fetch(n);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},K5=async(n,e)=>{let t=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:n});if(t.status!==200)return Promise.reject(t);let r=await t.arrayBuffer();return new Uint8Array(r)},Y5=(n,e)=>{Qi(e,"encrypted",async t=>{try{let r=t.initDataType;if(r!=="skd"){console.error(`Received unexpected initialization data type "${r}"`);return}if(!e.mediaKeys){let c=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[r],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(m=>{var g;return(g=n.drmTypeCb)==null||g.call(n,yb.FAIRPLAY),m}).catch(()=>{let m=ir("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),g=new Un(m,Un.MEDIA_ERR_ENCRYPTED,!0);g.errorCategory=Ei.DRM,g.muxCode=or.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,Ks(e,g)});if(!c)return;let f=await c.createMediaKeys();try{let m=await V5(tN(n,"fairplay")).catch(g=>{if(g instanceof Response){let p=G0(g,Ei.DRM,n);return console.error("mediaError",p==null?void 0:p.message,p==null?void 0:p.context),p?Promise.reject(p):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(g)});await f.setServerCertificate(m).catch(()=>{let g=ir("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),p=new Un(g,Un.MEDIA_ERR_ENCRYPTED,!0);return p.errorCategory=Ei.DRM,p.muxCode=or.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(p)})}catch(m){Ks(e,m);return}await e.setMediaKeys(f)}let i=t.initData;if(i==null){console.error(`Could not start encrypted playback due to missing initData in ${t.type} event`);return}let o=e.mediaKeys.createSession();o.addEventListener("keystatuseschange",()=>{o.keyStatuses.forEach(c=>{let f;if(c==="internal-error"){let m=ir("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");f=new Un(m,Un.MEDIA_ERR_ENCRYPTED,!0),f.errorCategory=Ei.DRM,f.muxCode=or.ENCRYPTED_CDM_ERROR}else if(c==="output-restricted"||c==="output-downscaled"){let m=ir("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");f=new Un(m,Un.MEDIA_ERR_ENCRYPTED,!1),f.errorCategory=Ei.DRM,f.muxCode=or.ENCRYPTED_OUTPUT_RESTRICTED}f&&Ks(e,f)})});let l=await Promise.all([o.generateRequest(r,i).catch(()=>{let c=ir("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),f=new Un(c,Un.MEDIA_ERR_ENCRYPTED,!0);f.errorCategory=Ei.DRM,f.muxCode=or.ENCRYPTED_GENERATE_REQUEST_FAILED,Ks(e,f)}),new Promise(c=>{o.addEventListener("message",f=>{c(f.message)},{once:!0})})]).then(([,c])=>c),d=await K5(l,Eb(n,"fairplay")).catch(c=>{if(c instanceof Response){let f=G0(c,Ei.DRM,n);return console.error("mediaError",f==null?void 0:f.message,f==null?void 0:f.context),f?Promise.reject(f):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(c)});await o.update(d).catch(()=>{let c=ir("Failed to update DRM license. This may be an issue with the player or your protected content."),f=new Un(c,Un.MEDIA_ERR_ENCRYPTED,!0);return f.errorCategory=Ei.DRM,f.muxCode=or.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(f)})}catch(r){Ks(e,r);return}})},Eb=({playbackId:n,tokens:{drm:e}={},customDomain:t=su},r)=>{let i=xT(n);return`https://license.${t.toLocaleLowerCase().endsWith(su)?t:su}/license/${r}/${i}?token=${e}`},tN=({playbackId:n,tokens:{drm:e}={},customDomain:t=su},r)=>{let i=xT(n);return`https://license.${t.toLocaleLowerCase().endsWith(su)?t:su}/appcert/${r}/${i}?token=${e}`},nN=({playbackId:n,src:e,customDomain:t})=>{if(n)return!0;if(typeof e!="string")return!1;let r=window==null?void 0:window.location.href,i=new URL(e,r).hostname.toLocaleLowerCase();return i.includes(su)||!!t&&i.includes(t.toLocaleLowerCase())},W5=(n,e,t)=>{var r;let{envKey:i,disableTracking:o,muxDataSDK:l=aI,muxDataSDKOptions:d={}}=n,c=nN(n);if(!o&&(i||c)){let{playerInitTime:f,playerSoftwareName:m,playerSoftwareVersion:g,beaconCollectionDomain:p,debug:y,disableCookies:v}=n,A={...n.metadata,video_title:((r=n==null?void 0:n.metadata)==null?void 0:r.video_title)||void 0},I=P=>typeof P.player_error_code=="string"?!1:typeof n.errorTranslator=="function"?n.errorTranslator(P):P;l.monitor(e,{debug:y,beaconCollectionDomain:p,hlsjs:t,Hls:t?Pr:void 0,automaticErrorTracking:!1,errorTranslator:I,disableCookies:v,...d,data:{...i?{env_key:i}:{},player_software_name:m,player_software:m,player_software_version:g,player_init_time:f,...A}})}},Q5=(n,e,t)=>{var r,i;let o=eN(n,e),{src:l,customDomain:d=su}=n,c=()=>{e.ended||!ZD(e,t)||(XD(e,t)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},f,m,g=()=>{let p=hI(e),y,v;p.length>0&&(y=p.start(0),v=p.end(0)),(m!==v||f!==y)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),f=y,m=v};if(Qi(e,"durationchange",g),e&&o){let p=kT(n);if(typeof l=="string"){if(l.endsWith(".mp4")&&l.includes(d)){let A=fI(l),I=new URL(`https://stream.${d}/${A}/metadata.json`);cI(I.toString(),e)}let y=()=>{if(EA(e)!==Jr.LIVE||Number.isFinite(e.duration))return;let A=setInterval(g,1e3);e.addEventListener("teardown",()=>{clearInterval(A)},{once:!0}),Qi(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(A)})},v=async()=>R5(l,e,p).then(y).catch(A=>{if(A instanceof Response){let I=G0(A,Ei.VIDEO,n);if(I){Ks(e,I);return}}});if(e.preload==="none"){let A=()=>{v(),e.removeEventListener("loadedmetadata",I)},I=()=>{v(),e.removeEventListener("play",A)};Qi(e,"play",A,{once:!0}),Qi(e,"loadedmetadata",I,{once:!0})}else v();(r=n.tokens)!=null&&r.drm?Y5(n,e):Qi(e,"encrypted",()=>{let A=ir("Attempting to play DRM-protected content without providing a DRM token."),I=new Un(A,Un.MEDIA_ERR_ENCRYPTED,!0);I.errorCategory=Ei.DRM,I.muxCode=or.ENCRYPTED_MISSING_TOKEN,Ks(e,I)},{once:!0}),e.setAttribute("src",l),n.startTime&&(((i=Oi.get(e))!=null?i:{}).startTime=n.startTime,e.addEventListener("durationchange",rN,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",iN),e.addEventListener("error",bA),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(y=>{y.remove()})},{once:!0}),Qi(e,"pause",c),Qi(e,"seeked",c),Qi(e,"play",()=>{e.ended||QD(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else t&&l?(t.once(Pr.Events.LEVEL_LOADED,(p,y)=>{C5(y.details,e,t),g(),EA(e)===Jr.LIVE&&!Number.isFinite(e.duration)&&(t.on(Pr.Events.LEVEL_UPDATED,g),Qi(e,"durationchange",()=>{Number.isFinite(e.duration)&&t.off(Pr.Events.LEVELS_UPDATED,g)}))}),t.on(Pr.Events.ERROR,(p,y)=>{var v,A;let I=X5(y,n);if(I.muxCode===or.NETWORK_NOT_READY){let P=(v=Oi.get(e))!=null?v:{},U=(A=P.retryCount)!=null?A:0;if(U<6){let M=U===0?5e3:6e4,B=new Un(`Retrying in ${M/1e3} seconds...`,I.code,I.fatal);Object.assign(B,I),Ks(e,B),setTimeout(()=>{P.retryCount=U+1,y.details==="manifestLoadError"&&y.url&&t.loadSource(y.url)},M);return}else{P.retryCount=0;let M=new Un('Try again later or <a href="#" onclick="window.location.reload(); return false;" style="color: #4a90e2;">click here to retry</a>',I.code,I.fatal);Object.assign(M,I),Ks(e,M);return}}Ks(e,I)}),t.on(Pr.Events.MANIFEST_LOADED,()=>{let p=Oi.get(e);p&&p.error&&(p.error=null,p.retryCount=0,e.dispatchEvent(new Event("emptied")),e.dispatchEvent(new Event("loadstart")))}),e.addEventListener("error",bA),Qi(e,"waiting",c),l5(n,t),u5(e,t),t.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function rN(n){var e;let t=n.target,r=(e=Oi.get(t))==null?void 0:e.startTime;if(r&&Q8(t.seekable,t.duration,r)){let i=t.preload==="auto";i&&(t.preload="none"),t.currentTime=r,i&&(t.preload="auto")}}async function iN(n){if(!n.isTrusted)return;n.stopImmediatePropagation();let e=n.target;if(!(e!=null&&e.error))return;let{message:t,code:r}=e.error,i=new Un(t,r);if(e.src&&r===Un.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var o;let l=(o=WD(e))!=null?o:e.error;(l==null?void 0:l.code)===Un.MEDIA_ERR_SRC_NOT_SUPPORTED&&Ks(e,i)},500);return}if(e.src&&(r!==Un.MEDIA_ERR_DECODE||r!==void 0))try{let{status:o}=await fetch(e.src);i.data={response:{code:o}}}catch{}Ks(e,i)}function Ks(n,e){var t;e.fatal&&(((t=Oi.get(n))!=null?t:{}).error=e,n.dispatchEvent(new CustomEvent("error",{detail:e})))}function bA(n){var e,t;if(!(n instanceof CustomEvent)||!(n.detail instanceof Un))return;let r=n.target,i=n.detail;!i||!i.fatal||(((e=Oi.get(r))!=null?e:{}).error=i,(t=r.mux)==null||t.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var X5=(n,e)=>{var t,r,i;console.error("getErrorFromHlsErrorData()",n);let o={[Pr.ErrorTypes.NETWORK_ERROR]:Un.MEDIA_ERR_NETWORK,[Pr.ErrorTypes.MEDIA_ERROR]:Un.MEDIA_ERR_DECODE,[Pr.ErrorTypes.KEY_SYSTEM_ERROR]:Un.MEDIA_ERR_ENCRYPTED},l=m=>[Pr.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,Pr.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(m.details)?Un.MEDIA_ERR_NETWORK:o[m.type],d=m=>{if(m.type===Pr.ErrorTypes.KEY_SYSTEM_ERROR)return Ei.DRM;if(m.type===Pr.ErrorTypes.NETWORK_ERROR)return Ei.VIDEO},c,f=l(n);if(f===Un.MEDIA_ERR_NETWORK&&n.response){let m=(t=d(n))!=null?t:Ei.VIDEO;c=(r=G0(n.response,m,e,n.fatal))!=null?r:new Un("",f,n.fatal)}else if(f===Un.MEDIA_ERR_ENCRYPTED)if(n.details===Pr.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let m=ir("Attempting to play DRM-protected content without providing a DRM token.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,n.fatal),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_MISSING_TOKEN}else if(n.details===Pr.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let m=ir("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,n.fatal),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(n.details===Pr.ErrorDetails.KEY_SYSTEM_NO_SESSION){let m=ir("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,!0),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(n.details===Pr.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let m=ir("Failed to update DRM license. This may be an issue with the player or your protected content.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,n.fatal),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(n.details===Pr.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let m=ir("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,n.fatal),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(n.details===Pr.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let m=ir("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,n.fatal),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_CDM_ERROR}else if(n.details===Pr.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let m=ir("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");c=new Un(m,Un.MEDIA_ERR_ENCRYPTED,!1),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_OUTPUT_RESTRICTED}else c=new Un(n.error.message,Un.MEDIA_ERR_ENCRYPTED,n.fatal),c.errorCategory=Ei.DRM,c.muxCode=or.ENCRYPTED_ERROR;else c=new Un("",f,n.fatal);return c.context||(c.context=`${n.url?`url: ${n.url}
`:""}${n.response&&(n.response.code||n.response.text)?`response: ${n.response.code}, ${n.response.text}
`:""}${n.reason?`failure reason: ${n.reason}
`:""}${n.level?`level: ${n.level}
`:""}${n.parent?`parent stream controller: ${n.parent}
`:""}${n.buffer?`buffer length: ${n.buffer}
`:""}${n.error?`error: ${n.error}
`:""}${n.event?`event: ${n.event}
`:""}${n.err?`error message: ${(i=n.err)==null?void 0:i.message}
`:""}`),c.data=n,c},aN=n=>{throw TypeError(n)},gI=(n,e,t)=>e.has(n)||aN("Cannot "+t),wa=(n,e,t)=>(gI(n,e,"read from private field"),t?t.call(n):e.get(n)),co=(n,e,t)=>e.has(n)?aN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Hs=(n,e,t,r)=>(gI(n,e,"write to private field"),e.set(n,t),t),tS=(n,e,t)=>(gI(n,e,"access private method"),t),Z5=()=>{try{return"0.26.1"}catch{}return"UNKNOWN"},J5=Z5(),e6=()=>J5,t6=`
<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>`,Lt={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo"},n6=Object.values(Lt),w1=e6(),I1="mux-video",qo,Mp,bb,Op,Tb,_b,Sb,Ab,wb,Fp,Up,Ib,r6=class extends xd{constructor(){super(),co(this,Up),co(this,qo),co(this,Mp),co(this,bb),co(this,Op,{}),co(this,Tb,{}),co(this,_b),co(this,Sb),co(this,Ab),co(this,wb),co(this,Fp,""),Hs(this,bb,RT()),this.nativeEl.addEventListener("muxmetadata",n=>{var e;let t=F5(this.nativeEl),r=(e=this.metadata)!=null?e:{};this.metadata={...t,...r},(t==null?void 0:t["com.mux.video.branding"])==="mux-free-plan"&&(Hs(this,Fp,"default"),this.updateLogo())})}static get NAME(){return I1}static get VERSION(){return w1}static get observedAttributes(){var n;return[...n6,...(n=xd.observedAttributes)!=null?n:[]]}static getLogoHTML(n){return!n||n==="false"?"":n==="default"?t6:`<img part="logo" src="${n}" />`}static getTemplateHTML(n={}){var e;return`
      ${xd.getTemplateHTML(n)}
      <style>
        :host {
          position: relative;
        }
        slot[name="logo"] {
          display: flex;
          justify-content: end;
          position: absolute;
          top: 1rem;
          right: 1rem;
          opacity: 0;
          transition: opacity 0.25s ease-in-out;
          z-index: 1;
        }
        slot[name="logo"]:has([part="logo"]) {
          opacity: 1;
        }
        slot[name="logo"] [part="logo"] {
          width: 5rem;
          pointer-events: none;
          user-select: none;
        }
      </style>
      <slot name="logo">
        ${this.getLogoHTML((e=n[Lt.LOGO])!=null?e:"")}
      </slot>
    `}get preferCmcd(){var n;return(n=this.getAttribute(Lt.PREFER_CMCD))!=null?n:void 0}set preferCmcd(n){n!==this.preferCmcd&&(n?H0.includes(n)?this.setAttribute(Lt.PREFER_CMCD,n):console.warn(`Invalid value for preferCmcd. Must be one of ${H0.join()}`):this.removeAttribute(Lt.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(Lt.PLAYER_INIT_TIME)?+this.getAttribute(Lt.PLAYER_INIT_TIME):wa(this,bb)}set playerInitTime(n){n!=this.playerInitTime&&(n==null?this.removeAttribute(Lt.PLAYER_INIT_TIME):this.setAttribute(Lt.PLAYER_INIT_TIME,`${+n}`))}get playerSoftwareName(){var n;return(n=wa(this,Ab))!=null?n:I1}set playerSoftwareName(n){Hs(this,Ab,n)}get playerSoftwareVersion(){var n;return(n=wa(this,Sb))!=null?n:w1}set playerSoftwareVersion(n){Hs(this,Sb,n)}get _hls(){var n;return(n=wa(this,qo))==null?void 0:n.engine}get mux(){var n;return(n=this.nativeEl)==null?void 0:n.mux}get error(){var n;return(n=WD(this.nativeEl))!=null?n:null}get errorTranslator(){return wa(this,wb)}set errorTranslator(n){Hs(this,wb,n)}get src(){return this.getAttribute("src")}set src(n){n!==this.src&&(n==null?this.removeAttribute("src"):this.setAttribute("src",n))}get type(){var n;return(n=this.getAttribute(Lt.TYPE))!=null?n:void 0}set type(n){n!==this.type&&(n?this.setAttribute(Lt.TYPE,n):this.removeAttribute(Lt.TYPE))}get preload(){let n=this.getAttribute("preload");return n===""?"auto":["none","metadata","auto"].includes(n)?n:super.preload}set preload(n){n!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(n)?this.setAttribute("preload",n):this.removeAttribute("preload"))}get debug(){return this.getAttribute(Lt.DEBUG)!=null}set debug(n){n!==this.debug&&(n?this.setAttribute(Lt.DEBUG,""):this.removeAttribute(Lt.DEBUG))}get disableTracking(){return this.hasAttribute(Lt.DISABLE_TRACKING)}set disableTracking(n){n!==this.disableTracking&&this.toggleAttribute(Lt.DISABLE_TRACKING,!!n)}get disableCookies(){return this.hasAttribute(Lt.DISABLE_COOKIES)}set disableCookies(n){n!==this.disableCookies&&(n?this.setAttribute(Lt.DISABLE_COOKIES,""):this.removeAttribute(Lt.DISABLE_COOKIES))}get startTime(){let n=this.getAttribute(Lt.START_TIME);if(n==null)return;let e=+n;return Number.isNaN(e)?void 0:e}set startTime(n){n!==this.startTime&&(n==null?this.removeAttribute(Lt.START_TIME):this.setAttribute(Lt.START_TIME,`${n}`))}get playbackId(){var n;return this.hasAttribute(Lt.PLAYBACK_ID)?this.getAttribute(Lt.PLAYBACK_ID):(n=fI(this.src))!=null?n:void 0}set playbackId(n){n!==this.playbackId&&(n?this.setAttribute(Lt.PLAYBACK_ID,n):this.removeAttribute(Lt.PLAYBACK_ID))}get maxResolution(){var n;return(n=this.getAttribute(Lt.MAX_RESOLUTION))!=null?n:void 0}set maxResolution(n){n!==this.maxResolution&&(n?this.setAttribute(Lt.MAX_RESOLUTION,n):this.removeAttribute(Lt.MAX_RESOLUTION))}get minResolution(){var n;return(n=this.getAttribute(Lt.MIN_RESOLUTION))!=null?n:void 0}set minResolution(n){n!==this.minResolution&&(n?this.setAttribute(Lt.MIN_RESOLUTION,n):this.removeAttribute(Lt.MIN_RESOLUTION))}get renditionOrder(){var n;return(n=this.getAttribute(Lt.RENDITION_ORDER))!=null?n:void 0}set renditionOrder(n){n!==this.renditionOrder&&(n?this.setAttribute(Lt.RENDITION_ORDER,n):this.removeAttribute(Lt.RENDITION_ORDER))}get programStartTime(){let n=this.getAttribute(Lt.PROGRAM_START_TIME);if(n==null)return;let e=+n;return Number.isNaN(e)?void 0:e}set programStartTime(n){n==null?this.removeAttribute(Lt.PROGRAM_START_TIME):this.setAttribute(Lt.PROGRAM_START_TIME,`${n}`)}get programEndTime(){let n=this.getAttribute(Lt.PROGRAM_END_TIME);if(n==null)return;let e=+n;return Number.isNaN(e)?void 0:e}set programEndTime(n){n==null?this.removeAttribute(Lt.PROGRAM_END_TIME):this.setAttribute(Lt.PROGRAM_END_TIME,`${n}`)}get assetStartTime(){let n=this.getAttribute(Lt.ASSET_START_TIME);if(n==null)return;let e=+n;return Number.isNaN(e)?void 0:e}set assetStartTime(n){n==null?this.removeAttribute(Lt.ASSET_START_TIME):this.setAttribute(Lt.ASSET_START_TIME,`${n}`)}get assetEndTime(){let n=this.getAttribute(Lt.ASSET_END_TIME);if(n==null)return;let e=+n;return Number.isNaN(e)?void 0:e}set assetEndTime(n){n==null?this.removeAttribute(Lt.ASSET_END_TIME):this.setAttribute(Lt.ASSET_END_TIME,`${n}`)}get customDomain(){var n;return(n=this.getAttribute(Lt.CUSTOM_DOMAIN))!=null?n:void 0}set customDomain(n){n!==this.customDomain&&(n?this.setAttribute(Lt.CUSTOM_DOMAIN,n):this.removeAttribute(Lt.CUSTOM_DOMAIN))}get drmToken(){var n;return(n=this.getAttribute(Lt.DRM_TOKEN))!=null?n:void 0}set drmToken(n){n!==this.drmToken&&(n?this.setAttribute(Lt.DRM_TOKEN,n):this.removeAttribute(Lt.DRM_TOKEN))}get playbackToken(){var n,e,t,r;if(this.hasAttribute(Lt.PLAYBACK_TOKEN))return(n=this.getAttribute(Lt.PLAYBACK_TOKEN))!=null?n:void 0;if(this.hasAttribute(Lt.PLAYBACK_ID)){let[,i]=oI((e=this.playbackId)!=null?e:"");return(t=new URLSearchParams(i).get("token"))!=null?t:void 0}if(this.src)return(r=new URLSearchParams(this.src).get("token"))!=null?r:void 0}set playbackToken(n){n!==this.playbackToken&&(n?this.setAttribute(Lt.PLAYBACK_TOKEN,n):this.removeAttribute(Lt.PLAYBACK_TOKEN))}get tokens(){let n=this.getAttribute(Lt.PLAYBACK_TOKEN),e=this.getAttribute(Lt.DRM_TOKEN);return{...wa(this,Tb),...n!=null?{playback:n}:{},...e!=null?{drm:e}:{}}}set tokens(n){Hs(this,Tb,n??{})}get ended(){return ZD(this.nativeEl,this._hls)}get envKey(){var n;return(n=this.getAttribute(Lt.ENV_KEY))!=null?n:void 0}set envKey(n){n!==this.envKey&&(n?this.setAttribute(Lt.ENV_KEY,n):this.removeAttribute(Lt.ENV_KEY))}get beaconCollectionDomain(){var n;return(n=this.getAttribute(Lt.BEACON_COLLECTION_DOMAIN))!=null?n:void 0}set beaconCollectionDomain(n){n!==this.beaconCollectionDomain&&(n?this.setAttribute(Lt.BEACON_COLLECTION_DOMAIN,n):this.removeAttribute(Lt.BEACON_COLLECTION_DOMAIN))}get streamType(){var n;return(n=this.getAttribute(Lt.STREAM_TYPE))!=null?n:EA(this.nativeEl)}set streamType(n){n!==this.streamType&&(n?this.setAttribute(Lt.STREAM_TYPE,n):this.removeAttribute(Lt.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(Lt.TARGET_LIVE_WINDOW)?+this.getAttribute(Lt.TARGET_LIVE_WINDOW):U5(this.nativeEl)}set targetLiveWindow(n){n!=this.targetLiveWindow&&(n==null?this.removeAttribute(Lt.TARGET_LIVE_WINDOW):this.setAttribute(Lt.TARGET_LIVE_WINDOW,`${+n}`))}get liveEdgeStart(){var n,e;if(this.hasAttribute(Lt.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:t}=this,r=(n=this.nativeEl.seekable.end(0))!=null?n:0,i=(e=this.nativeEl.seekable.start(0))!=null?e:0;return Math.max(i,r-t)}return z5(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(Lt.LIVE_EDGE_OFFSET))return+this.getAttribute(Lt.LIVE_EDGE_OFFSET)}set liveEdgeOffset(n){n!=this.liveEdgeOffset&&(n==null?this.removeAttribute(Lt.LIVE_EDGE_OFFSET):this.setAttribute(Lt.LIVE_EDGE_OFFSET,`${+n}`))}get seekable(){return hI(this.nativeEl)}async addCuePoints(n){return $D(this.nativeEl,n)}get activeCuePoint(){return jD(this.nativeEl)}get cuePoints(){return c5(this.nativeEl)}async addChapters(n){return HD(this.nativeEl,n)}get activeChapter(){return GD(this.nativeEl)}get chapters(){return h5(this.nativeEl)}getStartDate(){return g5(this.nativeEl,this._hls)}get currentPdt(){return p5(this.nativeEl,this._hls)}get preferPlayback(){let n=this.getAttribute(Lt.PREFER_PLAYBACK);if(n===fl.MSE||n===fl.NATIVE)return n}set preferPlayback(n){n!==this.preferPlayback&&(n===fl.MSE||n===fl.NATIVE?this.setAttribute(Lt.PREFER_PLAYBACK,n):this.removeAttribute(Lt.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(n=>n.startsWith("metadata-")&&![Lt.METADATA_URL].includes(n)).reduce((n,e)=>{let t=this.getAttribute(e);return t!=null&&(n[e.replace(/^metadata-/,"").replace(/-/g,"_")]=t),n},{}),...wa(this,Op)}}set metadata(n){Hs(this,Op,n??{}),this.mux&&this.mux.emit("hb",wa(this,Op))}get _hlsConfig(){return wa(this,_b)}set _hlsConfig(n){Hs(this,_b,n)}get logo(){var n;return(n=this.getAttribute(Lt.LOGO))!=null?n:wa(this,Fp)}set logo(n){n?this.setAttribute(Lt.LOGO,n):this.removeAttribute(Lt.LOGO)}load(){Hs(this,qo,j5(this,this.nativeEl,wa(this,qo)))}unload(){JD(this.nativeEl,wa(this,qo),this),Hs(this,qo,void 0)}attributeChangedCallback(n,e,t){var r,i;switch(xd.observedAttributes.includes(n)&&!["src","autoplay","preload"].includes(n)&&super.attributeChangedCallback(n,e,t),n){case Lt.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=t??void 0;break;case Lt.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=t??void 0;break;case"src":{let o=!!e,l=!!t;!o&&l?tS(this,Up,Ib).call(this):o&&!l?this.unload():o&&l&&(this.unload(),tS(this,Up,Ib).call(this));break}case"autoplay":if(t===e)break;(r=wa(this,qo))==null||r.setAutoplay(this.autoplay);break;case"preload":if(t===e)break;(i=wa(this,qo))==null||i.setPreload(t);break;case Lt.PLAYBACK_ID:this.src=yA(this);break;case Lt.DEBUG:{let o=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=o);break}case Lt.METADATA_URL:t&&fetch(t).then(o=>o.json()).then(o=>this.metadata=o).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${t}!`));break;case Lt.STREAM_TYPE:(t==null||t!==e)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case Lt.TARGET_LIVE_WINDOW:(t==null||t!==e)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break;case Lt.LOGO:(t==null||t!==e)&&this.updateLogo();break}}updateLogo(){if(!this.shadowRoot)return;let n=this.shadowRoot.querySelector('slot[name="logo"]');if(!n)return;let e=this.constructor.getLogoHTML(wa(this,Fp)||this.logo);n.innerHTML=e}connectedCallback(){var n;(n=super.connectedCallback)==null||n.call(this),this.nativeEl&&this.src&&!wa(this,qo)&&tS(this,Up,Ib).call(this)}disconnectedCallback(){this.unload()}handleEvent(n){n.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(n.type,{composed:!0,detail:n.detail}))}};qo=new WeakMap,Mp=new WeakMap,bb=new WeakMap,Op=new WeakMap,Tb=new WeakMap,_b=new WeakMap,Sb=new WeakMap,Ab=new WeakMap,wb=new WeakMap,Fp=new WeakMap,Up=new WeakSet,Ib=async function(){wa(this,Mp)||(await Hs(this,Mp,Promise.resolve()),Hs(this,Mp,null),this.load())};const mf=new WeakMap;class nS extends Error{}class i6 extends Error{}const a6=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],s6=globalThis.WeakRef?class extends Set{add(n){super.add(new WeakRef(n))}forEach(n){super.forEach(e=>{const t=e.deref();t&&n(t)})}}:Set;function o6(n){var e,t,r;(t=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&t.isAvailable?(r=globalThis.cast)!=null&&r.framework?n():customElements.whenDefined("google-cast-button").then(n):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(n)}}function l6(){return globalThis.chrome}function u6(){var t;const n="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if((t=globalThis.chrome)!=null&&t.cast||document.querySelector(`script[src="${n}"]`))return;const e=document.createElement("script");e.src=n,document.head.append(e)}function Cd(){var n,e;return(e=(n=globalThis.cast)==null?void 0:n.framework)==null?void 0:e.CastContext.getInstance()}function pI(){var n;return(n=Cd())==null?void 0:n.getCurrentSession()}function vI(){var n;return(n=pI())==null?void 0:n.getSessionObj().media[0]}function d6(n){return new Promise((e,t)=>{vI().editTracksInfo(n,e,t)})}function c6(n){return new Promise((e,t)=>{vI().getStatus(n,e,t)})}function k1(n){return Cd().setOptions({...sN(),...n})}function sN(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}function f6(n){if(!n)return;const e=/\.([a-zA-Z0-9]+)(?:\?.*)?$/,t=n.match(e);return t?t[1]:null}function h6(n){const e=n.split(`
`),t=[];for(let r=0;r<e.length;r++)if(e[r].trim().startsWith("#EXT-X-STREAM-INF")){const o=e[r+1]?e[r+1].trim():"";o&&!o.startsWith("#")&&t.push(o)}return t}function m6(n){return n.split(`
`).find(r=>!r.trim().startsWith("#")&&r.trim()!=="")}async function g6(n){try{const t=(await fetch(n,{method:"HEAD"})).headers.get("Content-Type");return a6.some(r=>t===r)}catch(e){return console.error("Error while trying to get the Content-Type of the manifest",e),!1}}async function p6(n){try{const e=await(await fetch(n)).text();let t=e;const r=h6(e);if(r.length>0){const l=new URL(r[0],n).toString();t=await(await fetch(l)).text()}const i=m6(t);return f6(i)}catch(e){console.error("Error while trying to parse the manifest playlist",e);return}}const kb=new s6,Hu=new WeakSet;let ia;o6(()=>{var n,e,t,r;if(!((e=(n=globalThis.chrome)==null?void 0:n.cast)!=null&&e.isAvailable)){console.debug("chrome.cast.isAvailable",(r=(t=globalThis.chrome)==null?void 0:t.cast)==null?void 0:r.isAvailable);return}ia||(ia=cast.framework,Cd().addEventListener(ia.CastContextEventType.CAST_STATE_CHANGED,i=>{kb.forEach(o=>{var l,d;return(d=(l=mf.get(o)).onCastStateChanged)==null?void 0:d.call(l,i)})}),Cd().addEventListener(ia.CastContextEventType.SESSION_STATE_CHANGED,i=>{kb.forEach(o=>{var l,d;return(d=(l=mf.get(o)).onSessionStateChanged)==null?void 0:d.call(l,i)})}),kb.forEach(i=>{var o,l;return(l=(o=mf.get(i)).init)==null?void 0:l.call(o)}))});let R1=0;var Xr,Gv,bs,nu,Jc,ef,bd,gT,Ti,Pc,oN,lN,TA,uN,_A,dN,SA;class v6 extends EventTarget{constructor(t){super();cn(this,Ti);cn(this,Xr);cn(this,Gv);cn(this,bs);cn(this,nu);cn(this,Jc,"disconnected");cn(this,ef,!1);cn(this,bd,new Set);cn(this,gT,new WeakMap);Tt(this,Xr,t),kb.add(this),mf.set(this,{init:()=>rr(this,Ti,_A).call(this),onCastStateChanged:()=>rr(this,Ti,TA).call(this),onSessionStateChanged:()=>rr(this,Ti,uN).call(this),getCastPlayer:()=>qe(this,Ti,Pc)}),rr(this,Ti,_A).call(this)}get state(){return qe(this,Jc)}async watchAvailability(t){if(qe(this,Xr).disableRemotePlayback)throw new nS("disableRemotePlayback attribute is present.");return qe(this,gT).set(t,++R1),qe(this,bd).add(t),queueMicrotask(()=>t(rr(this,Ti,lN).call(this))),R1}async cancelWatchAvailability(t){if(qe(this,Xr).disableRemotePlayback)throw new nS("disableRemotePlayback attribute is present.");t?qe(this,bd).delete(t):qe(this,bd).clear()}async prompt(){var r,i,o,l;if(qe(this,Xr).disableRemotePlayback)throw new nS("disableRemotePlayback attribute is present.");if(!((i=(r=globalThis.chrome)==null?void 0:r.cast)!=null&&i.isAvailable))throw new i6("The RemotePlayback API is disabled on this platform.");const t=Hu.has(qe(this,Xr));Hu.add(qe(this,Xr)),k1(qe(this,Xr).castOptions),Object.entries(qe(this,nu)).forEach(([d,c])=>{qe(this,bs).controller.addEventListener(d,c)});try{await Cd().requestSession()}catch(d){if(t||Hu.delete(qe(this,Xr)),d==="cancel")return;throw new Error(d)}(l=(o=mf.get(qe(this,Xr)))==null?void 0:o.loadOnPrompt)==null||l.call(o)}}Xr=new WeakMap,Gv=new WeakMap,bs=new WeakMap,nu=new WeakMap,Jc=new WeakMap,ef=new WeakMap,bd=new WeakMap,gT=new WeakMap,Ti=new WeakSet,Pc=function(){if(Hu.has(qe(this,Xr)))return qe(this,bs)},oN=function(){Hu.has(qe(this,Xr))&&(Object.entries(qe(this,nu)).forEach(([t,r])=>{qe(this,bs).controller.removeEventListener(t,r)}),Hu.delete(qe(this,Xr)),qe(this,Xr).muted=qe(this,bs).isMuted,qe(this,Xr).currentTime=qe(this,bs).savedPlayerState.currentTime,qe(this,bs).savedPlayerState.isPaused===!1&&qe(this,Xr).play())},lN=function(){var r;const t=(r=Cd())==null?void 0:r.getCastState();return t&&t!=="NO_DEVICES_AVAILABLE"},TA=function(){const t=Cd().getCastState();if(Hu.has(qe(this,Xr))&&t==="CONNECTING"&&(Tt(this,Jc,"connecting"),this.dispatchEvent(new Event("connecting"))),!qe(this,ef)&&(t!=null&&t.includes("CONNECT"))){Tt(this,ef,!0);for(let r of qe(this,bd))r(!0)}else if(qe(this,ef)&&(!t||t==="NO_DEVICES_AVAILABLE")){Tt(this,ef,!1);for(let r of qe(this,bd))r(!1)}},uN=async function(){var r;const{SESSION_RESUMED:t}=ia.SessionState;if(Cd().getSessionState()===t&&qe(this,Xr).castSrc===((r=vI())==null?void 0:r.media.contentId)){Hu.add(qe(this,Xr)),Object.entries(qe(this,nu)).forEach(([i,o])=>{qe(this,bs).controller.addEventListener(i,o)});try{await c6(new chrome.cast.media.GetStatusRequest)}catch(i){console.error(i)}qe(this,nu)[ia.RemotePlayerEventType.IS_PAUSED_CHANGED](),qe(this,nu)[ia.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},_A=function(){!ia||qe(this,Gv)||(Tt(this,Gv,!0),k1(qe(this,Xr).castOptions),qe(this,Xr).textTracks.addEventListener("change",()=>rr(this,Ti,SA).call(this)),rr(this,Ti,TA).call(this),Tt(this,bs,new ia.RemotePlayer),new ia.RemotePlayerController(qe(this,bs)),Tt(this,nu,{[ia.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:t})=>{t===!0?(Tt(this,Jc,"connected"),this.dispatchEvent(new Event("connect"))):(rr(this,Ti,oN).call(this),Tt(this,Jc,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[ia.RemotePlayerEventType.DURATION_CHANGED]:()=>{qe(this,Xr).dispatchEvent(new Event("durationchange"))},[ia.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{qe(this,Xr).dispatchEvent(new Event("volumechange"))},[ia.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{qe(this,Xr).dispatchEvent(new Event("volumechange"))},[ia.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var t;(t=qe(this,Ti,Pc))!=null&&t.isMediaLoaded&&qe(this,Xr).dispatchEvent(new Event("timeupdate"))},[ia.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{qe(this,Xr).dispatchEvent(new Event("resize"))},[ia.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{qe(this,Xr).dispatchEvent(new Event(this.paused?"pause":"play"))},[ia.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var t,r;((t=qe(this,Ti,Pc))==null?void 0:t.playerState)!==chrome.cast.media.PlayerState.PAUSED&&qe(this,Xr).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(r=qe(this,Ti,Pc))==null?void 0:r.playerState]))},[ia.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var t;(t=qe(this,Ti,Pc))!=null&&t.isMediaLoaded&&(await Promise.resolve(),rr(this,Ti,dN).call(this))}}))},dN=function(){rr(this,Ti,SA).call(this)},SA=async function(){var p,y,v;if(!qe(this,Ti,Pc))return;const r=(((p=qe(this,bs).mediaInfo)==null?void 0:p.tracks)??[]).filter(({type:A})=>A===chrome.cast.media.TrackType.TEXT),i=[...qe(this,Xr).textTracks].filter(({kind:A})=>A==="subtitles"||A==="captions"),o=r.map(({language:A,name:I,trackId:P})=>{const{mode:U}=i.find(M=>M.language===A&&M.label===I)??{};return U?{mode:U,trackId:P}:!1}).filter(Boolean),d=o.filter(({mode:A})=>A!=="showing").map(({trackId:A})=>A),c=o.find(({mode:A})=>A==="showing"),f=((v=(y=pI())==null?void 0:y.getSessionObj().media[0])==null?void 0:v.activeTrackIds)??[];let m=f;if(f.length&&(m=m.filter(A=>!d.includes(A))),c!=null&&c.trackId&&(m=[...m,c.trackId]),m=[...new Set(m)],!((A,I)=>A.length===I.length&&A.every(P=>I.includes(P)))(f,m))try{const A=new chrome.cast.media.EditTracksInfoRequest(m);await d6(A)}catch(A){console.error(A)}};const y6=n=>{var e,t,r,i,o,l,Gr,cN;return e=class extends n{constructor(){super(...arguments);cn(this,l);cn(this,t,{paused:!1});cn(this,r,sN());cn(this,i);cn(this,o)}get remote(){return qe(this,o)?qe(this,o):l6()?(this.disableRemotePlayback||u6(),mf.set(this,{loadOnPrompt:()=>rr(this,l,cN).call(this)}),Tt(this,o,new v6(this))):super.remote}attributeChangedCallback(g,p,y){if(super.attributeChangedCallback(g,p,y),g==="cast-receiver"&&y){qe(this,r).receiverApplicationId=y;return}if(qe(this,l,Gr))switch(g){case"cast-stream-type":case"cast-src":this.load();break}}async load(){var I;if(!qe(this,l,Gr))return super.load();const g=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);g.customData=this.castCustomData;const p=[...this.querySelectorAll("track")].filter(({kind:P,src:U})=>U&&(P==="subtitles"||P==="captions")),y=[];let v=0;if(p.length&&(g.tracks=p.map(P=>{const U=++v;y.length===0&&P.track.mode==="showing"&&y.push(U);const M=new chrome.cast.media.Track(U,chrome.cast.media.TrackType.TEXT);return M.trackContentId=P.src,M.trackContentType="text/vtt",M.subtype=P.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,M.name=P.label,M.language=P.srclang,M})),this.castStreamType==="live"?g.streamType=chrome.cast.media.StreamType.LIVE:g.streamType=chrome.cast.media.StreamType.BUFFERED,g.metadata=new chrome.cast.media.GenericMediaMetadata,g.metadata.title=this.title,g.metadata.images=[{url:this.poster}],g6(this.castSrc)){const P=await p6(this.castSrc);((P==null?void 0:P.includes("m4s"))||(P==null?void 0:P.includes("mp4")))&&(g.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,g.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4)}const A=new chrome.cast.media.LoadRequest(g);A.currentTime=super.currentTime??0,A.autoplay=!qe(this,t).paused,A.activeTrackIds=y,await((I=pI())==null?void 0:I.loadMedia(A)),this.dispatchEvent(new Event("volumechange"))}play(){var g;if(qe(this,l,Gr)){qe(this,l,Gr).isPaused&&((g=qe(this,l,Gr).controller)==null||g.playOrPause());return}return super.play()}pause(){var g;if(qe(this,l,Gr)){qe(this,l,Gr).isPaused||(g=qe(this,l,Gr).controller)==null||g.playOrPause();return}super.pause()}get castOptions(){return qe(this,r)}get castReceiver(){return this.getAttribute("cast-receiver")??void 0}set castReceiver(g){this.castReceiver!=g&&this.setAttribute("cast-receiver",`${g}`)}get castSrc(){var g;return this.getAttribute("cast-src")??((g=this.querySelector("source"))==null?void 0:g.src)??this.currentSrc}set castSrc(g){this.castSrc!=g&&this.setAttribute("cast-src",`${g}`)}get castContentType(){return this.getAttribute("cast-content-type")??void 0}set castContentType(g){this.setAttribute("cast-content-type",`${g}`)}get castStreamType(){return this.getAttribute("cast-stream-type")??this.streamType??void 0}set castStreamType(g){this.setAttribute("cast-stream-type",`${g}`)}get castCustomData(){return qe(this,i)}set castCustomData(g){const p=typeof g;if(!["object","undefined"].includes(p)){console.error(`castCustomData must be nullish or an object but value was of type ${p}`);return}Tt(this,i,g)}get readyState(){if(qe(this,l,Gr))switch(qe(this,l,Gr).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return qe(this,l,Gr)?qe(this,l,Gr).isPaused:super.paused}get muted(){var g;return qe(this,l,Gr)?(g=qe(this,l,Gr))==null?void 0:g.isMuted:super.muted}set muted(g){var p;if(qe(this,l,Gr)){(g&&!qe(this,l,Gr).isMuted||!g&&qe(this,l,Gr).isMuted)&&((p=qe(this,l,Gr).controller)==null||p.muteOrUnmute());return}super.muted=g}get volume(){var g;return qe(this,l,Gr)?((g=qe(this,l,Gr))==null?void 0:g.volumeLevel)??1:super.volume}set volume(g){var p;if(qe(this,l,Gr)){qe(this,l,Gr).volumeLevel=+g,(p=qe(this,l,Gr).controller)==null||p.setVolumeLevel();return}super.volume=g}get duration(){var g,p;return qe(this,l,Gr)&&((g=qe(this,l,Gr))!=null&&g.isMediaLoaded)?((p=qe(this,l,Gr))==null?void 0:p.duration)??NaN:super.duration}get currentTime(){var g,p;return qe(this,l,Gr)&&((g=qe(this,l,Gr))!=null&&g.isMediaLoaded)?((p=qe(this,l,Gr))==null?void 0:p.currentTime)??0:super.currentTime}set currentTime(g){var p;if(qe(this,l,Gr)){qe(this,l,Gr).currentTime=g,(p=qe(this,l,Gr).controller)==null||p.seek();return}super.currentTime=g}},t=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,l=new WeakSet,Gr=function(){var g,p;return(p=(g=mf.get(this.remote))==null?void 0:g.getCastPlayer)==null?void 0:p.call(g)},cN=async function(){qe(this,t).paused=xE(e.prototype,this,"paused"),xE(e.prototype,this,"pause").call(this),this.muted=xE(e.prototype,this,"muted");try{await this.load()}catch(g){console.error(g)}},tr(e,"observedAttributes",[...n.observedAttributes??[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),e};var fN=n=>{throw TypeError(n)},hN=(n,e,t)=>e.has(n)||fN("Cannot "+t),E6=(n,e,t)=>(hN(n,e,"read from private field"),t?t.call(n):e.get(n)),b6=(n,e,t)=>e.has(n)?fN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T6=(n,e,t,r)=>(hN(n,e,"write to private field"),e.set(n,t),t),mN=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class n extends mN{}globalThis.DocumentFragment=n}var _6=class extends mN{},S6={get(n){},define(n,e,t){},getName(n){return null},upgrade(n){},whenDefined(n){return Promise.resolve(_6)}},A6={customElements:S6},w6=typeof window>"u"||typeof globalThis.customElements>"u",rS=w6?A6:globalThis,Rb,x1=class extends y6(OC(r6)){constructor(){super(...arguments),b6(this,Rb)}get autoplay(){let e=this.getAttribute("autoplay");return e===null?!1:e===""?!0:e}set autoplay(e){let t=this.autoplay;e!==t&&(e?this.setAttribute("autoplay",typeof e=="string"?e:""):this.removeAttribute("autoplay"))}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var e;return(e=E6(this,Rb))!=null?e:this.muxCastCustomData}set castCustomData(e){T6(this,Rb,e)}};Rb=new WeakMap;rS.customElements.get("mux-video")||(rS.customElements.define("mux-video",x1),rS.MuxVideoElement=x1);const Vn={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Yr={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},gN={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_WIDTH:"mediaWidth"},pN=Object.entries(gN),Be=pN.reduce((n,[e,t])=>(n[e]=t.toLowerCase(),n),{}),I6={USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},uu=pN.reduce((n,[e,t])=>(n[e]=t.toLowerCase(),n),{...I6});Object.entries(uu).reduce((n,[e,t])=>{const r=Be[e];return r&&(n[t]=r),n},{userinactivechange:"userinactive"});const k6=Object.entries(Be).reduce((n,[e,t])=>{const r=uu[e];return r&&(n[t]=r),n},{userinactive:"userinactivechange"}),gl={SUBTITLES:"subtitles",CAPTIONS:"captions",CHAPTERS:"chapters",METADATA:"metadata"},vm={DISABLED:"disabled",SHOWING:"showing"},C1={MOUSE:"mouse",TOUCH:"touch"},$s={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},eu={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},R6={FULLSCREEN:"fullscreen"};function x6(n){return n==null?void 0:n.map(L6).join(" ")}function C6(n){return n==null?void 0:n.split(/\s+/).map(D6)}function L6(n){if(n){const{id:e,width:t,height:r}=n;return[e,t,r].filter(i=>i!=null).join(":")}}function D6(n){if(n){const[e,t,r]=n.split(":");return{id:e,width:+t,height:+r}}}function N6(n){return n==null?void 0:n.map(M6).join(" ")}function P6(n){return n==null?void 0:n.split(/\s+/).map(O6)}function M6(n){if(n){const{id:e,kind:t,language:r,label:i}=n;return[e,t,r,i].filter(o=>o!=null).join(":")}}function O6(n){if(n){const[e,t,r,i]=n.split(":");return{id:e,kind:t,language:r,label:i}}}function F6(n){return n.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())}function yI(n){return typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n)}function vN(n){return typeof n!="string"?!1:!isNaN(n)&&!isNaN(parseFloat(n))}const yN=n=>new Promise(e=>setTimeout(e,n)),L1=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],U6=(n,e)=>{const t=n===1?L1[e].singular:L1[e].plural;return`${n} ${t}`},ov=n=>{if(!yI(n))return"";const e=Math.abs(n),t=e!==n,r=new Date(0,0,0,0,0,e,0);return`${[r.getHours(),r.getMinutes(),r.getSeconds()].map((d,c)=>d&&U6(d,c)).filter(d=>d).join(", ")}${t?" remaining":""}`};function Dd(n,e){let t=!1;n<0&&(t=!0,n=0-n),n=n<0?0:n;let r=Math.floor(n%60),i=Math.floor(n/60%60),o=Math.floor(n/3600);const l=Math.floor(e/60%60),d=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(o=i=r="0"),o=o>0||d>0?o+":":"",i=((o||l>=10)&&i<10?"0"+i:i)+":",r=r<10?"0"+r:r,(t?"-":"")+o+i+r}const z6={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings",Auto:"Auto","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute",live:"live",Off:"Off","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var D1;const iS={en:z6};let AA=((D1=globalThis.navigator)==null?void 0:D1.language)||"en";const B6=n=>{AA=n},$6=n=>{var e,t,r;const[i]=AA.split("-");return((e=iS[AA])==null?void 0:e[n])||((t=iS[i])==null?void 0:t[n])||((r=iS.en)==null?void 0:r[n])||n},Kn=(n,e={})=>$6(n).replace(/\{(\w+)\}/g,(t,r)=>r in e?String(e[r]):`{${r}}`);let EN=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}},bN=class extends EN{},N1=class extends bN{constructor(){super(...arguments),this.role=null}};class j6{observe(){}unobserve(){}disconnect(){}}const TN={createElement:function(){return new Rv.HTMLElement},createElementNS:function(){return new Rv.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(n){return!1}},Rv={ResizeObserver:j6,document:TN,Node:bN,Element:N1,HTMLElement:class extends N1{constructor(){super(...arguments),this.innerHTML=""}get content(){return new Rv.DocumentFragment}},DocumentFragment:class extends EN{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(n){return null},setItem(n,e){},removeItem(n){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(n){return{matches:!1,media:n}},DOMParser:class{parseFromString(e,t){return{body:{textContent:e}}}}},_N=typeof window>"u"||typeof window.customElements>"u",SN=Object.keys(Rv).every(n=>n in globalThis),At=_N&&!SN?Rv:globalThis,la=_N&&!SN?TN:globalThis.document,P1=new WeakMap,EI=n=>{let e=P1.get(n);return e||P1.set(n,e=new Set),e},AN=new At.ResizeObserver(n=>{for(const e of n)for(const t of EI(e.target))t(e)});function Qm(n,e){EI(n).add(e),AN.observe(n)}function Xm(n,e){const t=EI(n);t.delete(e),t.size||AN.unobserve(n)}function Is(n){const e={};for(const t of n)e[t.name]=t.value;return e}function Xs(n){var e;return(e=wA(n))!=null?e:ng(n,"media-controller")}function wA(n){var e;const{MEDIA_CONTROLLER:t}=Yr,r=n.getAttribute(t);if(r)return(e=CT(n))==null?void 0:e.getElementById(r)}const wN=(n,e,t=".value")=>{const r=n.querySelector(t);r&&(r.textContent=e)},q6=(n,e)=>{const t=`slot[name="${e}"]`,r=n.shadowRoot.querySelector(t);return r?r.children:[]},IN=(n,e)=>q6(n,e)[0],cu=(n,e)=>!n||!e?!1:n!=null&&n.contains(e)?!0:cu(n,e.getRootNode().host),ng=(n,e)=>{if(!n)return null;const t=n.closest(e);return t||ng(n.getRootNode().host,e)};function bI(n=document){var e;const t=n==null?void 0:n.activeElement;return t?(e=bI(t.shadowRoot))!=null?e:t:null}function CT(n){var e;const t=(e=n==null?void 0:n.getRootNode)==null?void 0:e.call(n);return t instanceof ShadowRoot||t instanceof Document?t:null}function kN(n,{depth:e=3,checkOpacity:t=!0,checkVisibilityCSS:r=!0}={}){if(n.checkVisibility)return n.checkVisibility({checkOpacity:t,checkVisibilityCSS:r});let i=n;for(;i&&e>0;){const o=getComputedStyle(i);if(t&&o.opacity==="0"||r&&o.visibility==="hidden"||o.display==="none")return!1;i=i.parentElement,e--}return!0}function H6(n,e,t,r){const i=r.x-t.x,o=r.y-t.y,l=i*i+o*o;if(l===0)return 0;const d=((n-t.x)*i+(e-t.y)*o)/l;return Math.max(0,Math.min(1,d))}function Zi(n,e){const t=G6(n,r=>r===e);return t||RN(n,e)}function G6(n,e){var t,r;let i;for(i of(t=n.querySelectorAll("style:not([media])"))!=null?t:[]){let o;try{o=(r=i.sheet)==null?void 0:r.cssRules}catch{continue}for(const l of o??[])if(e(l.selectorText))return l}}function RN(n,e){var t,r;const i=(t=n.querySelectorAll("style:not([media])"))!=null?t:[],o=i==null?void 0:i[i.length-1];return o!=null&&o.sheet?(o==null||o.sheet.insertRule(`${e}{}`,o.sheet.cssRules.length),(r=o.sheet.cssRules)==null?void 0:r[o.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",n),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function _i(n,e,t=Number.NaN){const r=n.getAttribute(e);return r!=null?+r:t}function Fi(n,e,t){const r=+t;if(t==null||Number.isNaN(r)){n.hasAttribute(e)&&n.removeAttribute(e);return}_i(n,e,void 0)!==r&&n.setAttribute(e,`${r}`)}function Br(n,e){return n.hasAttribute(e)}function $r(n,e,t){if(t==null){n.hasAttribute(e)&&n.removeAttribute(e);return}Br(n,e)!=t&&n.toggleAttribute(e,t)}function Si(n,e,t=null){var r;return(r=n.getAttribute(e))!=null?r:t}function Ai(n,e,t){if(t==null){n.hasAttribute(e)&&n.removeAttribute(e);return}const r=`${t}`;Si(n,e,void 0)!==r&&n.setAttribute(e,r)}var xN=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Gu=(n,e,t)=>(xN(n,e,"read from private field"),t?t.call(n):e.get(n)),V6=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},VE=(n,e,t,r)=>(xN(n,e,"write to private field"),e.set(n,t),t),es;function K6(n){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
        box-sizing: border-box;
      }
    </style>
  `}class LT extends At.HTMLElement{constructor(){if(super(),V6(this,es,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Yr.MEDIA_CONTROLLER,Be.MEDIA_PAUSED]}attributeChangedCallback(e,t,r){var i,o,l,d,c;e===Yr.MEDIA_CONTROLLER&&(t&&((o=(i=Gu(this,es))==null?void 0:i.unassociateElement)==null||o.call(i,this),VE(this,es,null)),r&&this.isConnected&&(VE(this,es,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=Gu(this,es))==null?void 0:d.associateElement)==null||c.call(d,this)))}connectedCallback(){var e,t,r,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),VE(this,es,Y6(this)),this.getAttribute(Yr.MEDIA_CONTROLLER)&&((t=(e=Gu(this,es))==null?void 0:e.associateElement)==null||t.call(e,this)),(r=Gu(this,es))==null||r.addEventListener("pointerdown",this),(i=Gu(this,es))==null||i.addEventListener("click",this)}disconnectedCallback(){var e,t,r,i;this.getAttribute(Yr.MEDIA_CONTROLLER)&&((t=(e=Gu(this,es))==null?void 0:e.unassociateElement)==null||t.call(e,this)),(r=Gu(this,es))==null||r.removeEventListener("pointerdown",this),(i=Gu(this,es))==null||i.removeEventListener("click",this),VE(this,es,null)}handleEvent(e){var t;const r=(t=e.composedPath())==null?void 0:t[0];if(["video","media-controller"].includes(r==null?void 0:r.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:o,clientY:l}=e,{left:d,top:c,width:f,height:m}=this.getBoundingClientRect(),g=o-d,p=l-c;if(g<0||p<0||g>f||p>m||f===0&&m===0)return;const{pointerType:y=this._pointerType}=e;if(this._pointerType=void 0,y===C1.TOUCH){this.handleTap(e);return}else if(y===C1.MOUSE){this.handleMouseClick(e);return}}}}get mediaPaused(){return Br(this,Be.MEDIA_PAUSED)}set mediaPaused(e){$r(this,Be.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?Vn.MEDIA_PLAY_REQUEST:Vn.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new At.CustomEvent(t,{composed:!0,bubbles:!0}))}}es=new WeakMap;LT.shadowRootOptions={mode:"open"};LT.getTemplateHTML=K6;function Y6(n){var e;const t=n.getAttribute(Yr.MEDIA_CONTROLLER);return t?(e=n.getRootNode())==null?void 0:e.getElementById(t):ng(n,"media-controller")}At.customElements.get("media-gesture-receiver")||At.customElements.define("media-gesture-receiver",LT);var M1=LT,TI=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Ts=(n,e,t)=>(TI(n,e,"read from private field"),t?t.call(n):e.get(n)),vs=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Mc=(n,e,t,r)=>(TI(n,e,"write to private field"),e.set(n,t),t),Ys=(n,e,t)=>(TI(n,e,"access private method"),t),V0,jh,xv,um,xb,IA,CN,zp,Cb,kA,LN,RA,DN,Cv,DT,NT,_I,Zm,Lv;const sr={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"};function W6(n){return`
    <style>
      
      :host([${Be.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
        outline: none;
      }

      :host {
        box-sizing: border-box;
        position: relative;
        display: inline-block;
        line-height: 0;
        background-color: var(--media-background-color, #000);
      }

      :host(:not([${sr.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        display: flex;
        flex-flow: column nowrap;
        align-items: start;
        pointer-events: none;
        background: none;
      }

      slot[name=media] {
        display: var(--media-slot-display, contents);
      }

      
      :host([${sr.AUDIO}]) slot[name=media] {
        display: var(--media-slot-display, none);
      }

      
      :host([${sr.AUDIO}]) [part~=layer][part~=gesture-layer] {
        height: 0;
        display: block;
      }

      
      :host(:not([${sr.AUDIO}])[${sr.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
          :host(:not([${sr.AUDIO}])[${sr.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
        display: none;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {
        pointer-events: auto;
      }

      :host(:not([${sr.AUDIO}])) *[part~=layer][part~=centered-layer] {
        align-items: center;
        justify-content: center;
      }

      :host(:not([${sr.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
      :host(:not([${sr.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
        align-self: stretch;
        flex-grow: 1;
      }

      slot[name=middle-chrome] {
        display: inline;
        flex-grow: 1;
        pointer-events: none;
        background: none;
      }

      
      ::slotted([slot=media]),
      ::slotted([slot=poster]) {
        width: 100%;
        height: 100%;
      }

      
      :host(:not([${sr.AUDIO}])) .spacer {
        flex-grow: 1;
      }

      
      :host(:-webkit-full-screen) {
        
        width: 100% !important;
        height: 100% !important;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not([${sr.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {
        opacity: 1;
        transition: var(--media-control-transition-in, opacity 0.25s);
      }

      
      :host([${sr.USER_INACTIVE}]:not([${Be.MEDIA_PAUSED}]):not([${Be.MEDIA_IS_AIRPLAYING}]):not([${Be.MEDIA_IS_CASTING}]):not([${sr.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${sr.NO_AUTOHIDE}]):not([role=dialog])) {
        opacity: 0;
        transition: var(--media-control-transition-out, opacity 1s);
      }

      :host([${sr.USER_INACTIVE}]:not([${sr.NO_AUTOHIDE}]):not([${Be.MEDIA_PAUSED}]):not([${Be.MEDIA_IS_CASTING}]):not([${sr.AUDIO}])) ::slotted([slot=media]) {
        cursor: none;
      }

      :host([${sr.USER_INACTIVE}][${sr.AUTOHIDE_OVER_CONTROLS}]:not([${sr.NO_AUTOHIDE}]):not([${Be.MEDIA_PAUSED}]):not([${Be.MEDIA_IS_CASTING}]):not([${sr.AUDIO}])) * {
        --media-cursor: none;
        cursor: none;
      }


      ::slotted(media-control-bar)  {
        align-self: stretch;
      }

      
      :host(:not([${sr.AUDIO}])[${Be.MEDIA_HAS_PLAYED}]) slot[name=poster] {
        display: none;
      }

      ::slotted([role=dialog]) {
        width: 100%;
        height: 100%;
        align-self: center;
      }

      ::slotted([role=menu]) {
        align-self: end;
      }
    </style>

    <slot name="media" part="layer media-layer"></slot>
    <slot name="poster" part="layer poster-layer"></slot>
    <slot name="gestures-chrome" part="layer gesture-layer">
      <media-gesture-receiver slot="gestures-chrome">
        <template shadowrootmode="${M1.shadowRootOptions.mode}">
          ${M1.getTemplateHTML({})}
        </template>
      </media-gesture-receiver>
    </slot>
    <span part="layer vertical-layer">
      <slot name="top-chrome" part="top chrome"></slot>
      <slot name="middle-chrome" part="middle chrome"></slot>
      <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
      
      <slot part="bottom chrome"></slot>
    </span>
    <slot name="dialog" part="layer dialog-layer"></slot>
  `}const Q6=Object.values(Be),X6="sm:384 md:576 lg:768 xl:960";function Z6(n){NN(n.target,n.contentRect.width)}function NN(n,e){var t;if(!n.isConnected)return;const r=(t=n.getAttribute(sr.BREAKPOINTS))!=null?t:X6,i=J6(r),o=e$(i,e);let l=!1;if(Object.keys(i).forEach(d=>{if(o.includes(d)){n.hasAttribute(`breakpoint${d}`)||(n.setAttribute(`breakpoint${d}`,""),l=!0);return}n.hasAttribute(`breakpoint${d}`)&&(n.removeAttribute(`breakpoint${d}`),l=!0)}),l){const d=new CustomEvent(uu.BREAKPOINTS_CHANGE,{detail:o});n.dispatchEvent(d)}n.breakpointsComputed||(n.breakpointsComputed=!0,n.dispatchEvent(new CustomEvent(uu.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}function J6(n){const e=n.split(/\s+/);return Object.fromEntries(e.map(t=>t.split(":")))}function e$(n,e){return Object.keys(n).filter(t=>e>=parseInt(n[t]))}class PT extends At.HTMLElement{constructor(){if(super(),vs(this,IA),vs(this,kA),vs(this,RA),vs(this,Cv),vs(this,NT),vs(this,Zm),vs(this,V0,0),vs(this,jh,null),vs(this,xv,null),vs(this,um,void 0),this.breakpointsComputed=!1,vs(this,xb,new MutationObserver(Ys(this,IA,CN).bind(this))),vs(this,zp,!1),vs(this,Cb,t=>{Ts(this,zp)||(setTimeout(()=>{Z6(t),Mc(this,zp,!1)},0),Mc(this,zp,!0))}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const t=Is(this.attributes),r=this.constructor.getTemplateHTML(t);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(r):this.shadowRoot.innerHTML=r}const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",()=>{if(!e.assignedElements({flatten:!0}).length){Ts(this,jh)&&this.mediaUnsetCallback(Ts(this,jh));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[sr.AUTOHIDE,sr.GESTURES_DISABLED].concat(Q6).filter(e=>![Be.MEDIA_RENDITION_LIST,Be.MEDIA_AUDIO_TRACK_LIST,Be.MEDIA_CHAPTERS_CUES,Be.MEDIA_WIDTH,Be.MEDIA_HEIGHT,Be.MEDIA_ERROR,Be.MEDIA_ERROR_MESSAGE].includes(e))}attributeChangedCallback(e,t,r){e.toLowerCase()==sr.AUTOHIDE&&(this.autohide=r)}get media(){let e=this.querySelector(":scope > [slot=media]");return(e==null?void 0:e.nodeName)=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(Mc(this,jh,e),e.localName.includes("-")&&await At.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;Ts(this,xb).observe(this,{childList:!0,subtree:!0}),Qm(this,Ts(this,Cb));const t=this.getAttribute(sr.AUDIO)!=null,r=Kn(t?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",r),this.handleMediaUpdated(this.media),this.setAttribute(sr.USER_INACTIVE,""),NN(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=At.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;Ts(this,xb).disconnect(),Xm(this,Ts(this,Cb)),this.media&&this.mediaUnsetCallback(this.media),(e=At.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){Mc(this,jh,null)}handleEvent(e){switch(e.type){case"pointerdown":Mc(this,V0,e.timeStamp);break;case"pointermove":Ys(this,kA,LN).call(this,e);break;case"pointerup":Ys(this,RA,DN).call(this,e);break;case"mouseleave":Ys(this,Cv,DT).call(this);break;case"mouseup":this.removeAttribute(sr.KEYBOARD_CONTROL);break;case"keyup":Ys(this,Zm,Lv).call(this),this.setAttribute(sr.KEYBOARD_CONTROL,"");break}}set autohide(e){const t=Number(e);Mc(this,um,isNaN(t)?0:t)}get autohide(){return(Ts(this,um)===void 0?2:Ts(this,um)).toString()}get breakpoints(){return Si(this,sr.BREAKPOINTS)}set breakpoints(e){Ai(this,sr.BREAKPOINTS,e)}get audio(){return Br(this,sr.AUDIO)}set audio(e){$r(this,sr.AUDIO,e)}get gesturesDisabled(){return Br(this,sr.GESTURES_DISABLED)}set gesturesDisabled(e){$r(this,sr.GESTURES_DISABLED,e)}get keyboardControl(){return Br(this,sr.KEYBOARD_CONTROL)}set keyboardControl(e){$r(this,sr.KEYBOARD_CONTROL,e)}get noAutohide(){return Br(this,sr.NO_AUTOHIDE)}set noAutohide(e){$r(this,sr.NO_AUTOHIDE,e)}get autohideOverControls(){return Br(this,sr.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){$r(this,sr.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return Br(this,sr.USER_INACTIVE)}set userInteractive(e){$r(this,sr.USER_INACTIVE,e)}}V0=new WeakMap;jh=new WeakMap;xv=new WeakMap;um=new WeakMap;xb=new WeakMap;IA=new WeakSet;CN=function(n){const e=this.media;for(const t of n){if(t.type!=="childList")continue;const r=t.removedNodes;for(const i of r){if(i.slot!="media"||t.target!=this)continue;let o=t.previousSibling&&t.previousSibling.previousElementSibling;if(!o||!e)this.mediaUnsetCallback(i);else{let l=o.slot!=="media";for(;(o=o.previousSibling)!==null;)o.slot=="media"&&(l=!1);l&&this.mediaUnsetCallback(i)}}if(e)for(const i of t.addedNodes)i===e&&this.handleMediaUpdated(e)}};zp=new WeakMap;Cb=new WeakMap;kA=new WeakSet;LN=function(n){if(n.pointerType!=="mouse"&&n.timeStamp-Ts(this,V0)<250)return;Ys(this,NT,_I).call(this),clearTimeout(Ts(this,xv));const e=this.hasAttribute(sr.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(n.target)||e)&&Ys(this,Zm,Lv).call(this)};RA=new WeakSet;DN=function(n){if(n.pointerType==="touch"){const e=!this.hasAttribute(sr.USER_INACTIVE);[this,this.media].includes(n.target)&&e?Ys(this,Cv,DT).call(this):Ys(this,Zm,Lv).call(this)}else n.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e==null?void 0:e.localName))&&Ys(this,Zm,Lv).call(this)};Cv=new WeakSet;DT=function(){if(Ts(this,um)<0||this.hasAttribute(sr.USER_INACTIVE))return;this.setAttribute(sr.USER_INACTIVE,"");const n=new At.CustomEvent(uu.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(n)};NT=new WeakSet;_I=function(){if(!this.hasAttribute(sr.USER_INACTIVE))return;this.removeAttribute(sr.USER_INACTIVE);const n=new At.CustomEvent(uu.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(n)};Zm=new WeakSet;Lv=function(){Ys(this,NT,_I).call(this),clearTimeout(Ts(this,xv));const n=parseInt(this.autohide);n<0||Mc(this,xv,setTimeout(()=>{Ys(this,Cv,DT).call(this)},n*1e3))};PT.shadowRootOptions={mode:"open"};PT.getTemplateHTML=W6;At.customElements.get("media-container")||At.customElements.define("media-container",PT);var PN=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Ea=(n,e,t)=>(PN(n,e,"read from private field"),t?t.call(n):e.get(n)),yp=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},KE=(n,e,t,r)=>(PN(n,e,"write to private field"),e.set(n,t),t),qh,Hh,K0,Kc,Wl,Wu;class SI{constructor(e,t,{defaultValue:r}={defaultValue:void 0}){yp(this,Wl),yp(this,qh,void 0),yp(this,Hh,void 0),yp(this,K0,void 0),yp(this,Kc,new Set),KE(this,qh,e),KE(this,Hh,t),KE(this,K0,new Set(r))}[Symbol.iterator](){return Ea(this,Wl,Wu).values()}get length(){return Ea(this,Wl,Wu).size}get value(){var e;return(e=[...Ea(this,Wl,Wu)].join(" "))!=null?e:""}set value(e){var t;e!==this.value&&(KE(this,Kc,new Set),this.add(...(t=e==null?void 0:e.split(" "))!=null?t:[]))}toString(){return this.value}item(e){return[...Ea(this,Wl,Wu)][e]}values(){return Ea(this,Wl,Wu).values()}forEach(e,t){Ea(this,Wl,Wu).forEach(e,t)}add(...e){var t,r;e.forEach(i=>Ea(this,Kc).add(i)),!(this.value===""&&!((t=Ea(this,qh))!=null&&t.hasAttribute(`${Ea(this,Hh)}`)))&&((r=Ea(this,qh))==null||r.setAttribute(`${Ea(this,Hh)}`,`${this.value}`))}remove(...e){var t;e.forEach(r=>Ea(this,Kc).delete(r)),(t=Ea(this,qh))==null||t.setAttribute(`${Ea(this,Hh)}`,`${this.value}`)}contains(e){return Ea(this,Wl,Wu).has(e)}toggle(e,t){return typeof t<"u"?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}qh=new WeakMap;Hh=new WeakMap;K0=new WeakMap;Kc=new WeakMap;Wl=new WeakSet;Wu=function(){return Ea(this,Kc).size?Ea(this,Kc):Ea(this,K0)};const t$=(n="")=>n.split(/\s+/),MN=(n="")=>{const[e,t,r]=n.split(":"),i=r?decodeURIComponent(r):void 0;return{kind:e==="cc"?gl.CAPTIONS:gl.SUBTITLES,language:t,label:i}},MT=(n="",e={})=>t$(n).map(t=>{const r=MN(t);return{...e,...r}}),ON=n=>n?Array.isArray(n)?n.map(e=>typeof e=="string"?MN(e):e):typeof n=="string"?MT(n):[n]:[],xA=({kind:n,label:e,language:t}={kind:"subtitles"})=>e?`${n==="captions"?"cc":"sb"}:${t}:${encodeURIComponent(e)}`:t,Dv=(n=[])=>Array.prototype.map.call(n,xA).join(" "),n$=(n,e)=>t=>t[n]===e,FN=n=>{const e=Object.entries(n).map(([t,r])=>n$(t,r));return t=>e.every(r=>r(t))},lv=(n,e=[],t=[])=>{const r=ON(t).map(FN),i=o=>r.some(l=>l(o));Array.from(e).filter(i).forEach(o=>{o.mode=n})},OT=(n,e=()=>!0)=>{if(!(n!=null&&n.textTracks))return[];const t=typeof e=="function"?e:FN(e);return Array.from(n.textTracks).filter(t)},UN=n=>{var e;return!!((e=n.mediaSubtitlesShowing)!=null&&e.length)||n.hasAttribute(Be.MEDIA_SUBTITLES_SHOWING)},r$=n=>{var e;const{media:t,fullscreenElement:r}=n;try{const i=r&&"requestFullscreen"in r?"requestFullscreen":r&&"webkitRequestFullScreen"in r?"webkitRequestFullScreen":void 0;if(i){const o=(e=r[i])==null?void 0:e.call(r);if(o instanceof Promise)return o.catch(()=>{})}else t!=null&&t.webkitEnterFullscreen?t.webkitEnterFullscreen():t!=null&&t.requestFullscreen&&t.requestFullscreen()}catch(i){console.error(i)}},O1="exitFullscreen"in la?"exitFullscreen":"webkitExitFullscreen"in la?"webkitExitFullscreen":"webkitCancelFullScreen"in la?"webkitCancelFullScreen":void 0,i$=n=>{var e;const{documentElement:t}=n;if(O1){const r=(e=t==null?void 0:t[O1])==null?void 0:e.call(t);if(r instanceof Promise)return r.catch(()=>{})}},Bp="fullscreenElement"in la?"fullscreenElement":"webkitFullscreenElement"in la?"webkitFullscreenElement":void 0,a$=n=>{const{documentElement:e,media:t}=n,r=e==null?void 0:e[Bp];return!r&&"webkitDisplayingFullscreen"in t&&"webkitPresentationMode"in t&&t.webkitDisplayingFullscreen&&t.webkitPresentationMode===R6.FULLSCREEN?t:r},s$=n=>{var e;const{media:t,documentElement:r,fullscreenElement:i=t}=n;if(!t||!r)return!1;const o=a$(n);if(!o)return!1;if(o===i||o===t)return!0;if(o.localName.includes("-")){let l=o.shadowRoot;if(!(Bp in l))return cu(o,i);for(;l!=null&&l[Bp];){if(l[Bp]===i)return!0;l=(e=l[Bp])==null?void 0:e.shadowRoot}}return!1},o$="fullscreenEnabled"in la?"fullscreenEnabled":"webkitFullscreenEnabled"in la?"webkitFullscreenEnabled":void 0,l$=n=>{const{documentElement:e,media:t}=n;return!!(e!=null&&e[o$])||t&&"webkitSupportsFullscreen"in t};let YE;const AI=()=>{var n,e;return YE||(YE=(e=(n=la)==null?void 0:n.createElement)==null?void 0:e.call(n,"video"),YE)},u$=async(n=AI())=>{if(!n)return!1;const e=n.volume;n.volume=e/2+.1;const t=new AbortController,r=await Promise.race([d$(n,t.signal),c$(n,e)]);return t.abort(),r},d$=(n,e)=>new Promise(t=>{n.addEventListener("volumechange",()=>t(!0),{signal:e})}),c$=async(n,e)=>{for(let t=0;t<10;t++){if(n.volume===e)return!1;await yN(10)}return n.volume!==e},f$=/.*Version\/.*Safari\/.*/.test(At.navigator.userAgent),zN=(n=AI())=>At.matchMedia("(display-mode: standalone)").matches&&f$?!1:typeof(n==null?void 0:n.requestPictureInPicture)=="function",BN=(n=AI())=>l$({documentElement:la,media:n}),h$=BN(),m$=zN(),g$=!!At.WebKitPlaybackTargetAvailabilityEvent,p$=!!At.chrome,Y0=n=>OT(n.media,e=>[gl.SUBTITLES,gl.CAPTIONS].includes(e.kind)).sort((e,t)=>e.kind>=t.kind?1:-1),$N=n=>OT(n.media,e=>e.mode===vm.SHOWING&&[gl.SUBTITLES,gl.CAPTIONS].includes(e.kind)),jN=(n,e)=>{const t=Y0(n),r=$N(n),i=!!r.length;if(t.length){if(e===!1||i&&e!==!0)lv(vm.DISABLED,t,r);else if(e===!0||!i&&e!==!1){let o=t[0];const{options:l}=n;if(!(l!=null&&l.noSubtitlesLangPref)){const m=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),g=m?[m,...globalThis.navigator.languages]:globalThis.navigator.languages,p=t.filter(y=>g.some(v=>y.language.toLowerCase().startsWith(v.split("-")[0]))).sort((y,v)=>{const A=g.findIndex(P=>y.language.toLowerCase().startsWith(P.split("-")[0])),I=g.findIndex(P=>v.language.toLowerCase().startsWith(P.split("-")[0]));return A-I});p[0]&&(o=p[0])}const{language:d,label:c,kind:f}=o;lv(vm.DISABLED,t,r),lv(vm.SHOWING,t,[{language:d,label:c,kind:f}])}}},wI=(n,e)=>n===e?!0:n==null||e==null||typeof n!=typeof e?!1:typeof n=="number"&&Number.isNaN(n)&&Number.isNaN(e)?!0:typeof n!="object"?!1:Array.isArray(n)?v$(n,e):Object.entries(n).every(([t,r])=>t in e&&wI(r,e[t])),v$=(n,e)=>{const t=Array.isArray(n),r=Array.isArray(e);return t!==r?!1:t||r?n.length!==e.length?!1:n.every((i,o)=>wI(i,e[o])):!0},y$=Object.values(eu);let W0;const E$=u$().then(n=>(W0=n,W0)),b$=async(...n)=>{await Promise.all(n.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof At.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const r=At.customElements.get(t);r&&e instanceof r||(await At.customElements.whenDefined(t),At.customElements.upgrade(e))}))},T$=new At.DOMParser,_$=n=>n&&(T$.parseFromString(n,"text/html").body.textContent||n),$p={mediaError:{get(n,e){const{media:t}=n;if((e==null?void 0:e.type)!=="playing")return t==null?void 0:t.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(n,e){var t;const{media:r}=n;if((e==null?void 0:e.type)!=="playing")return(t=r==null?void 0:r.error)==null?void 0:t.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(n,e){var t,r;const{media:i}=n;if((e==null?void 0:e.type)!=="playing")return(r=(t=i==null?void 0:i.error)==null?void 0:t.message)!=null?r:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.paused)!=null?e:!0},set(n,e){var t;const{media:r}=e;r&&(n?r.pause():(t=r.play())==null||t.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(n,e){const{media:t}=n;return t?e?e.type==="playing":!t.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.playbackRate)!=null?e:1},set(n,e){const{media:t}=e;t&&Number.isFinite(+n)&&(t.playbackRate=+n)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.muted)!=null?e:!1},set(n,e){const{media:t}=e;if(t){try{At.localStorage.setItem("media-chrome-pref-muted",n?"true":"false")}catch(r){console.debug("Error setting muted pref",r)}t.muted=n}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(n,e)=>{const{options:{noMutedPref:t}}=e,{media:r}=e;if(!(!r||r.muted||t))try{const i=At.localStorage.getItem("media-chrome-pref-muted")==="true";$p.mediaMuted.set(i,e),n(i)}catch(i){console.debug("Error getting muted pref",i)}}]},mediaVolume:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.volume)!=null?e:1},set(n,e){const{media:t}=e;if(t){try{n==null?At.localStorage.removeItem("media-chrome-pref-volume"):At.localStorage.setItem("media-chrome-pref-volume",n.toString())}catch(r){console.debug("Error setting volume pref",r)}Number.isFinite(+n)&&(t.volume=+n)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(n,e)=>{const{options:{noVolumePref:t}}=e;if(!t)try{const{media:r}=e;if(!r)return;const i=At.localStorage.getItem("media-chrome-pref-volume");if(i==null)return;$p.mediaVolume.set(+i,e),n(+i)}catch(r){console.debug("Error getting volume pref",r)}}]},mediaVolumeLevel:{get(n){const{media:e}=n;return typeof(e==null?void 0:e.volume)>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(n){var e;const{media:t}=n;return(e=t==null?void 0:t.currentTime)!=null?e:0},set(n,e){const{media:t}=e;!t||!yI(n)||(t.currentTime=n)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(n){const{media:e,options:{defaultDuration:t}={}}=n;return t&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?t:Number.isFinite(e==null?void 0:e.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(n){const{media:e}=n;return(e==null?void 0:e.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(n){var e;const{media:t}=n;if(!((e=t==null?void 0:t.seekable)!=null&&e.length))return;const r=t.seekable.start(0),i=t.seekable.end(t.seekable.length-1);if(!(!r&&!i))return[Number(r.toFixed(3)),Number(i.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(n){var e;const{media:t}=n,r=(e=t==null?void 0:t.buffered)!=null?e:[];return Array.from(r).map((i,o)=>[Number(r.start(o).toFixed(3)),Number(r.end(o).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(n){const{media:e,options:{defaultStreamType:t}={}}=n,r=[eu.LIVE,eu.ON_DEMAND].includes(t)?t:void 0;if(!e)return r;const{streamType:i}=e;if(y$.includes(i))return i===eu.UNKNOWN?r:i;const o=e.duration;return o===1/0?eu.LIVE:Number.isFinite(o)?eu.ON_DEMAND:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(n){const{media:e}=n;if(!e)return Number.NaN;const{targetLiveWindow:t}=e,r=$p.mediaStreamType.get(n);return(t==null||Number.isNaN(t))&&r===eu.LIVE?0:t},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(n){const{media:e,options:{liveEdgeOffset:t=10}={}}=n;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!($p.mediaStreamType.get(n)===eu.LIVE))return!1;const i=e.seekable;if(!i)return!0;if(!i.length)return!1;const o=i.end(i.length-1)-t;return e.currentTime>=o},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(n){return Y0(n).map(({kind:e,label:t,language:r})=>({kind:e,label:t,language:r}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(n){return $N(n).map(({kind:e,label:t,language:r})=>({kind:e,label:t,language:r}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(n,e)=>{var t,r;const{media:i,options:o}=e;if(!i)return;const l=d=>{var c;!o.defaultSubtitles||d&&![gl.CAPTIONS,gl.SUBTITLES].includes((c=d==null?void 0:d.track)==null?void 0:c.kind)||jN(e,!0)};return i.addEventListener("loadstart",l),(t=i.textTracks)==null||t.addEventListener("addtrack",l),(r=i.textTracks)==null||r.addEventListener("removetrack",l),()=>{var d,c;i.removeEventListener("loadstart",l),(d=i.textTracks)==null||d.removeEventListener("addtrack",l),(c=i.textTracks)==null||c.removeEventListener("removetrack",l)}}]},mediaChaptersCues:{get(n){var e;const{media:t}=n;if(!t)return[];const[r]=OT(t,{kind:gl.CHAPTERS});return Array.from((e=r==null?void 0:r.cues)!=null?e:[]).map(({text:i,startTime:o,endTime:l})=>({text:_$(i),startTime:o,endTime:l}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(n,e)=>{var t;const{media:r}=e;if(!r)return;const i=r.querySelector('track[kind="chapters"][default][src]'),o=(t=r.shadowRoot)==null?void 0:t.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return i==null||i.addEventListener("load",n),o==null||o.addEventListener("load",n),()=>{i==null||i.removeEventListener("load",n),o==null||o.removeEventListener("load",n)}}]},mediaIsPip:{get(n){var e,t;const{media:r,documentElement:i}=n;if(!r||!i||!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===r)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return(e=r.localName)!=null&&e.includes("-")?cu(r,i.pictureInPictureElement):!1;if(i.pictureInPictureElement.localName.includes("-")){let o=i.pictureInPictureElement.shadowRoot;for(;o!=null&&o.pictureInPictureElement;){if(o.pictureInPictureElement===r)return!0;o=(t=o.pictureInPictureElement)==null?void 0:t.shadowRoot}}return!1},set(n,e){const{media:t}=e;if(t)if(n){if(!la.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!t.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const r=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};t.requestPictureInPicture().catch(i=>{if(i.code===11){if(!t.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(t.readyState===0&&t.preload==="none"){const o=()=>{t.removeEventListener("loadedmetadata",l),t.preload="none"},l=()=>{t.requestPictureInPicture().catch(r),o()};t.addEventListener("loadedmetadata",l),t.preload="metadata",setTimeout(()=>{t.readyState===0&&r(),o()},1e3)}else throw i}else throw i})}else la.pictureInPictureElement&&la.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(n){var e;const{media:t}=n;return[...(e=t==null?void 0:t.videoRenditions)!=null?e:[]].map(r=>({...r}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(n){var e,t,r;const{media:i}=n;return(r=(t=i==null?void 0:i.videoRenditions)==null?void 0:t[(e=i.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:r.id},set(n,e){const{media:t}=e;if(!(t!=null&&t.videoRenditions)){console.warn("MediaController: Rendition selection not supported by this media.");return}const r=n,i=Array.prototype.findIndex.call(t.videoRenditions,o=>o.id==r);t.videoRenditions.selectedIndex!=i&&(t.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(n){var e;const{media:t}=n;return[...(e=t==null?void 0:t.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(n){var e,t;const{media:r}=n;return(t=[...(e=r==null?void 0:r.audioTracks)!=null?e:[]].find(i=>i.enabled))==null?void 0:t.id},set(n,e){const{media:t}=e;if(!(t!=null&&t.audioTracks)){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const r=n;for(const i of t.audioTracks)i.enabled=r==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(n){return s$(n)},set(n,e){n?r$(e):i$(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(n){var e;const{media:t}=n;return!(t!=null&&t.remote)||((e=t.remote)==null?void 0:e.state)==="disconnected"?!1:!!t.remote.state},set(n,e){var t,r;const{media:i}=e;if(i&&!(n&&((t=i.remote)==null?void 0:t.state)!=="disconnected")&&!(!n&&((r=i.remote)==null?void 0:r.state)!=="connected")){if(typeof i.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}i.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(n,e){const{media:t}=e;if(t){if(!(t.webkitShowPlaybackTargetPicker&&At.WebKitPlaybackTargetAvailabilityEvent)){console.error("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}t.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(n){const{media:e}=n;if(!h$||!BN(e))return $s.UNSUPPORTED}},mediaPipUnavailable:{get(n){const{media:e}=n;if(!m$||!zN(e))return $s.UNSUPPORTED}},mediaVolumeUnavailable:{get(n){const{media:e}=n;if(W0===!1||(e==null?void 0:e.volume)==null)return $s.UNSUPPORTED},stateOwnersUpdateHandlers:[n=>{W0==null&&E$.then(e=>n(e?void 0:$s.UNSUPPORTED))}]},mediaCastUnavailable:{get(n,{availability:e="not-available"}={}){var t;const{media:r}=n;if(!p$||!((t=r==null?void 0:r.remote)!=null&&t.state))return $s.UNSUPPORTED;if(!(e==null||e==="available"))return $s.UNAVAILABLE},stateOwnersUpdateHandlers:[(n,e)=>{var t;const{media:r}=e;return r?(r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||(t=r==null?void 0:r.remote)==null||t.watchAvailability(o=>{n({availability:o?"available":"not-available"})}).catch(o=>{o.name==="NotSupportedError"?n({availability:null}):n({availability:"not-available"})}),()=>{var o;(o=r==null?void 0:r.remote)==null||o.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(n,e){if(!g$)return $s.UNSUPPORTED;if((e==null?void 0:e.availability)==="not-available")return $s.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(n,e)=>{var t;const{media:r}=e;return r?(r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||(t=r==null?void 0:r.remote)==null||t.watchAvailability(o=>{n({availability:o?"available":"not-available"})}).catch(o=>{o.name==="NotSupportedError"?n({availability:null}):n({availability:"not-available"})}),()=>{var o;(o=r==null?void 0:r.remote)==null||o.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(n){var e;const{media:t}=n;if(!(t!=null&&t.videoRenditions))return $s.UNSUPPORTED;if(!((e=t.videoRenditions)!=null&&e.length))return $s.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(n){var e,t;const{media:r}=n;if(!(r!=null&&r.audioTracks))return $s.UNSUPPORTED;if(((t=(e=r.audioTracks)==null?void 0:e.length)!=null?t:0)<=1)return $s.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},S$={[Vn.MEDIA_PREVIEW_REQUEST](n,e,{detail:t}){var r,i,o;const{media:l}=e,d=t??void 0;let c,f;if(l&&d!=null){const[y]=OT(l,{kind:gl.METADATA,label:"thumbnails"}),v=Array.prototype.find.call((r=y==null?void 0:y.cues)!=null?r:[],(A,I,P)=>I===0?A.endTime>d:I===P.length-1?A.startTime<=d:A.startTime<=d&&A.endTime>d);if(v){const A=/'^(?:[a-z]+:)?\/\//i.test(v.text)||(i=l==null?void 0:l.querySelector('track[label="thumbnails"]'))==null?void 0:i.src,I=new URL(v.text,A);f=new URLSearchParams(I.hash).get("#xywh").split(",").map(U=>+U),c=I.href}}const m=n.mediaDuration.get(e);let p=(o=n.mediaChaptersCues.get(e).find((y,v,A)=>v===A.length-1&&m===y.endTime?y.startTime<=d&&y.endTime>=d:y.startTime<=d&&y.endTime>d))==null?void 0:o.text;return t!=null&&p==null&&(p=""),{mediaPreviewTime:d,mediaPreviewImage:c,mediaPreviewCoords:f,mediaPreviewChapter:p}},[Vn.MEDIA_PAUSE_REQUEST](n,e){n["mediaPaused"].set(!0,e)},[Vn.MEDIA_PLAY_REQUEST](n,e){var t,r,i,o;const l="mediaPaused",c=n.mediaStreamType.get(e)===eu.LIVE,f=!((t=e.options)!=null&&t.noAutoSeekToLive),m=n.mediaTargetLiveWindow.get(e)>0;if(c&&f&&!m){const g=(r=n.mediaSeekable.get(e))==null?void 0:r[1];if(g){const p=(o=(i=e.options)==null?void 0:i.seekToLiveOffset)!=null?o:0,y=g-p;n.mediaCurrentTime.set(y,e)}}n[l].set(!1,e)},[Vn.MEDIA_PLAYBACK_RATE_REQUEST](n,e,{detail:t}){const r="mediaPlaybackRate",i=t;n[r].set(i,e)},[Vn.MEDIA_MUTE_REQUEST](n,e){n["mediaMuted"].set(!0,e)},[Vn.MEDIA_UNMUTE_REQUEST](n,e){const t="mediaMuted";n.mediaVolume.get(e)||n.mediaVolume.set(.25,e),n[t].set(!1,e)},[Vn.MEDIA_VOLUME_REQUEST](n,e,{detail:t}){const r="mediaVolume",i=t;i&&n.mediaMuted.get(e)&&n.mediaMuted.set(!1,e),n[r].set(i,e)},[Vn.MEDIA_SEEK_REQUEST](n,e,{detail:t}){const r="mediaCurrentTime",i=t;n[r].set(i,e)},[Vn.MEDIA_SEEK_TO_LIVE_REQUEST](n,e){var t,r,i;const o="mediaCurrentTime",l=(t=n.mediaSeekable.get(e))==null?void 0:t[1];if(Number.isNaN(Number(l)))return;const d=(i=(r=e.options)==null?void 0:r.seekToLiveOffset)!=null?i:0,c=l-d;n[o].set(c,e)},[Vn.MEDIA_SHOW_SUBTITLES_REQUEST](n,e,{detail:t}){var r;const{options:i}=e,o=Y0(e),l=ON(t),d=(r=l[0])==null?void 0:r.language;d&&!i.noSubtitlesLangPref&&At.localStorage.setItem("media-chrome-pref-subtitles-lang",d),lv(vm.SHOWING,o,l)},[Vn.MEDIA_DISABLE_SUBTITLES_REQUEST](n,e,{detail:t}){const r=Y0(e),i=t??[];lv(vm.DISABLED,r,i)},[Vn.MEDIA_TOGGLE_SUBTITLES_REQUEST](n,e,{detail:t}){jN(e,t)},[Vn.MEDIA_RENDITION_REQUEST](n,e,{detail:t}){const r="mediaRenditionSelected",i=t;n[r].set(i,e)},[Vn.MEDIA_AUDIO_TRACK_REQUEST](n,e,{detail:t}){const r="mediaAudioTrackEnabled",i=t;n[r].set(i,e)},[Vn.MEDIA_ENTER_PIP_REQUEST](n,e){const t="mediaIsPip";n.mediaIsFullscreen.get(e)&&n.mediaIsFullscreen.set(!1,e),n[t].set(!0,e)},[Vn.MEDIA_EXIT_PIP_REQUEST](n,e){n["mediaIsPip"].set(!1,e)},[Vn.MEDIA_ENTER_FULLSCREEN_REQUEST](n,e){const t="mediaIsFullscreen";n.mediaIsPip.get(e)&&n.mediaIsPip.set(!1,e),n[t].set(!0,e)},[Vn.MEDIA_EXIT_FULLSCREEN_REQUEST](n,e){n["mediaIsFullscreen"].set(!1,e)},[Vn.MEDIA_ENTER_CAST_REQUEST](n,e){const t="mediaIsCasting";n.mediaIsFullscreen.get(e)&&n.mediaIsFullscreen.set(!1,e),n[t].set(!0,e)},[Vn.MEDIA_EXIT_CAST_REQUEST](n,e){n["mediaIsCasting"].set(!1,e)},[Vn.MEDIA_AIRPLAY_REQUEST](n,e){n["mediaIsAirplaying"].set(!0,e)}},A$=({media:n,fullscreenElement:e,documentElement:t,stateMediator:r=$p,requestMap:i=S$,options:o={},monitorStateOwnersOnlyWithSubscriptions:l=!0})=>{const d=[],c={options:{...o}};let f=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const m=A=>{A!=null&&(wI(A,f)||(f=Object.freeze({...f,...A}),d.forEach(I=>I(f))))},g=()=>{const A=Object.entries(r).reduce((I,[P,{get:U}])=>(I[P]=U(c),I),{});m(A)},p={};let y;const v=async(A,I)=>{var P,U,M,B,ie,L,w,O,oe,D,ve,Le,te,$e,Ue,Re;const Xe=!!y;if(y={...c,...y??{},...A},Xe)return;await b$(...Object.values(A));const Ye=d.length>0&&I===0&&l,Ze=c.media!==y.media,Ne=((P=c.media)==null?void 0:P.textTracks)!==((U=y.media)==null?void 0:U.textTracks),ze=((M=c.media)==null?void 0:M.videoRenditions)!==((B=y.media)==null?void 0:B.videoRenditions),st=((ie=c.media)==null?void 0:ie.audioTracks)!==((L=y.media)==null?void 0:L.audioTracks),Rt=((w=c.media)==null?void 0:w.remote)!==((O=y.media)==null?void 0:O.remote),jt=c.documentElement!==y.documentElement,Pe=!!c.media&&(Ze||Ye),Oe=!!((oe=c.media)!=null&&oe.textTracks)&&(Ne||Ye),gt=!!((D=c.media)!=null&&D.videoRenditions)&&(ze||Ye),Q=!!((ve=c.media)!=null&&ve.audioTracks)&&(st||Ye),J=!!((Le=c.media)!=null&&Le.remote)&&(Rt||Ye),F=!!c.documentElement&&(jt||Ye),K=Pe||Oe||gt||Q||J||F,Ee=d.length===0&&I===1&&l,ce=!!y.media&&(Ze||Ee),He=!!((te=y.media)!=null&&te.textTracks)&&(Ne||Ee),ut=!!(($e=y.media)!=null&&$e.videoRenditions)&&(ze||Ee),Ve=!!((Ue=y.media)!=null&&Ue.audioTracks)&&(st||Ee),Je=!!((Re=y.media)!=null&&Re.remote)&&(Rt||Ee),Ke=!!y.documentElement&&(jt||Ee),it=ce||He||ut||Ve||Je||Ke;if(!(K||it)){Object.entries(y).forEach(([ot,xt])=>{c[ot]=xt}),g(),y=void 0;return}Object.entries(r).forEach(([ot,{get:xt,mediaEvents:En=[],textTracksEvents:tn=[],videoRenditionsEvents:fn=[],audioTracksEvents:Ht=[],remoteEvents:nr=[],rootEvents:vr=[],stateOwnersUpdateHandlers:Fr=[]}])=>{p[ot]||(p[ot]={});const Lr=$t=>{const Bt=xt(c,$t);m({[ot]:Bt})};let mr;mr=p[ot].mediaEvents,En.forEach($t=>{mr&&Pe&&(c.media.removeEventListener($t,mr),p[ot].mediaEvents=void 0),ce&&(y.media.addEventListener($t,Lr),p[ot].mediaEvents=Lr)}),mr=p[ot].textTracksEvents,tn.forEach($t=>{var Bt,Pt;mr&&Oe&&((Bt=c.media.textTracks)==null||Bt.removeEventListener($t,mr),p[ot].textTracksEvents=void 0),He&&((Pt=y.media.textTracks)==null||Pt.addEventListener($t,Lr),p[ot].textTracksEvents=Lr)}),mr=p[ot].videoRenditionsEvents,fn.forEach($t=>{var Bt,Pt;mr&&gt&&((Bt=c.media.videoRenditions)==null||Bt.removeEventListener($t,mr),p[ot].videoRenditionsEvents=void 0),ut&&((Pt=y.media.videoRenditions)==null||Pt.addEventListener($t,Lr),p[ot].videoRenditionsEvents=Lr)}),mr=p[ot].audioTracksEvents,Ht.forEach($t=>{var Bt,Pt;mr&&Q&&((Bt=c.media.audioTracks)==null||Bt.removeEventListener($t,mr),p[ot].audioTracksEvents=void 0),Ve&&((Pt=y.media.audioTracks)==null||Pt.addEventListener($t,Lr),p[ot].audioTracksEvents=Lr)}),mr=p[ot].remoteEvents,nr.forEach($t=>{var Bt,Pt;mr&&J&&((Bt=c.media.remote)==null||Bt.removeEventListener($t,mr),p[ot].remoteEvents=void 0),Je&&((Pt=y.media.remote)==null||Pt.addEventListener($t,Lr),p[ot].remoteEvents=Lr)}),mr=p[ot].rootEvents,vr.forEach($t=>{mr&&F&&(c.documentElement.removeEventListener($t,mr),p[ot].rootEvents=void 0),Ke&&(y.documentElement.addEventListener($t,Lr),p[ot].rootEvents=Lr)});const ki=p[ot].stateOwnersUpdateHandlers;Fr.forEach($t=>{ki&&K&&ki(),it&&(p[ot].stateOwnersUpdateHandlers=$t(Lr,y))})}),Object.entries(y).forEach(([ot,xt])=>{c[ot]=xt}),g(),y=void 0};return v({media:n,fullscreenElement:e,documentElement:t,options:o}),{dispatch(A){const{type:I,detail:P}=A;if(i[I]&&f.mediaErrorCode==null){m(i[I](r,c,A));return}I==="mediaelementchangerequest"?v({media:P}):I==="fullscreenelementchangerequest"?v({fullscreenElement:P}):I==="documentelementchangerequest"?v({documentElement:P}):I==="optionschangerequest"&&Object.entries(P??{}).forEach(([U,M])=>{c.options[U]=M})},getState(){return f},subscribe(A){return v({},d.length+1),d.push(A),A(f),()=>{const I=d.indexOf(A);I>=0&&(v({},d.length-1),d.splice(I,1))}}}};var II=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},xr=(n,e,t)=>(II(n,e,"read from private field"),t?t.call(n):e.get(n)),Vl=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Vu=(n,e,t,r)=>(II(n,e,"write to private field"),e.set(n,t),t),ad=(n,e,t)=>(II(n,e,"access private method"),t),Yc,jp,ci,qp,Ho,Lb,Db,CA,Jm,Nv,Nb,LA;const qN=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],F1=10,Bn={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYS_USED:"keysused",LIVE_EDGE_OFFSET:"liveedgeoffset",SEEK_TO_LIVE_OFFSET:"seektoliveoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_HOTKEYS:"nohotkeys",NO_VOLUME_PREF:"novolumepref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_DEFAULT_STORE:"nodefaultstore",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset",LANG:"lang"};class HN extends PT{constructor(){super(),Vl(this,Db),Vl(this,Jm),Vl(this,Nb),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,Vl(this,Yc,new SI(this,Bn.HOTKEYS)),Vl(this,jp,void 0),Vl(this,ci,void 0),Vl(this,qp,void 0),Vl(this,Ho,void 0),Vl(this,Lb,t=>{var r;(r=xr(this,ci))==null||r.dispatch(t)}),this.associateElement(this);let e={};Vu(this,qp,t=>{Object.entries(t).forEach(([r,i])=>{if(r in e&&e[r]===i)return;this.propagateMediaState(r,i);const o=r.toLowerCase(),l=new At.CustomEvent(k6[o],{composed:!0,detail:i});this.dispatchEvent(l)}),e=t}),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(Bn.NO_HOTKEYS,Bn.HOTKEYS,Bn.DEFAULT_STREAM_TYPE,Bn.DEFAULT_SUBTITLES,Bn.DEFAULT_DURATION,Bn.LANG)}get mediaStore(){return xr(this,ci)}set mediaStore(e){var t,r;if(xr(this,ci)&&((t=xr(this,Ho))==null||t.call(this),Vu(this,Ho,void 0)),Vu(this,ci,e),!xr(this,ci)&&!this.hasAttribute(Bn.NO_DEFAULT_STORE)){ad(this,Db,CA).call(this);return}Vu(this,Ho,(r=xr(this,ci))==null?void 0:r.subscribe(xr(this,qp)))}get fullscreenElement(){var e;return(e=xr(this,jp))!=null?e:this}set fullscreenElement(e){var t;this.hasAttribute(Bn.FULLSCREEN_ELEMENT)&&this.removeAttribute(Bn.FULLSCREEN_ELEMENT),Vu(this,jp,e),(t=xr(this,ci))==null||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return Br(this,Bn.DEFAULT_SUBTITLES)}set defaultSubtitles(e){$r(this,Bn.DEFAULT_SUBTITLES,e)}get defaultStreamType(){return Si(this,Bn.DEFAULT_STREAM_TYPE)}set defaultStreamType(e){Ai(this,Bn.DEFAULT_STREAM_TYPE,e)}get defaultDuration(){return _i(this,Bn.DEFAULT_DURATION)}set defaultDuration(e){Fi(this,Bn.DEFAULT_DURATION,e)}get noHotkeys(){return Br(this,Bn.NO_HOTKEYS)}set noHotkeys(e){$r(this,Bn.NO_HOTKEYS,e)}get keysUsed(){return Si(this,Bn.KEYS_USED)}set keysUsed(e){Ai(this,Bn.KEYS_USED,e)}get liveEdgeOffset(){return _i(this,Bn.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){Fi(this,Bn.LIVE_EDGE_OFFSET,e)}get noAutoSeekToLive(){return Br(this,Bn.NO_AUTO_SEEK_TO_LIVE)}set noAutoSeekToLive(e){$r(this,Bn.NO_AUTO_SEEK_TO_LIVE,e)}get noVolumePref(){return Br(this,Bn.NO_VOLUME_PREF)}set noVolumePref(e){$r(this,Bn.NO_VOLUME_PREF,e)}get noSubtitlesLangPref(){return Br(this,Bn.NO_SUBTITLES_LANG_PREF)}set noSubtitlesLangPref(e){$r(this,Bn.NO_SUBTITLES_LANG_PREF,e)}get noDefaultStore(){return Br(this,Bn.NO_DEFAULT_STORE)}set noDefaultStore(e){$r(this,Bn.NO_DEFAULT_STORE,e)}attributeChangedCallback(e,t,r){var i,o,l,d,c,f,m,g;if(super.attributeChangedCallback(e,t,r),e===Bn.NO_HOTKEYS)r!==t&&r===""?(this.hasAttribute(Bn.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):r!==t&&r===null&&this.enableHotkeys();else if(e===Bn.HOTKEYS)xr(this,Yc).value=r;else if(e===Bn.DEFAULT_SUBTITLES&&r!==t)(i=xr(this,ci))==null||i.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(Bn.DEFAULT_SUBTITLES)}});else if(e===Bn.DEFAULT_STREAM_TYPE)(l=xr(this,ci))==null||l.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(o=this.getAttribute(Bn.DEFAULT_STREAM_TYPE))!=null?o:void 0}});else if(e===Bn.LIVE_EDGE_OFFSET)(d=xr(this,ci))==null||d.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(Bn.LIVE_EDGE_OFFSET)?+this.getAttribute(Bn.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(Bn.SEEK_TO_LIVE_OFFSET)?void 0:+this.getAttribute(Bn.LIVE_EDGE_OFFSET)}});else if(e===Bn.SEEK_TO_LIVE_OFFSET)(c=xr(this,ci))==null||c.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(Bn.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(Bn.SEEK_TO_LIVE_OFFSET):void 0}});else if(e===Bn.NO_AUTO_SEEK_TO_LIVE)(f=xr(this,ci))==null||f.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(Bn.NO_AUTO_SEEK_TO_LIVE)}});else if(e===Bn.FULLSCREEN_ELEMENT){const p=r?(m=this.getRootNode())==null?void 0:m.getElementById(r):void 0;Vu(this,jp,p),(g=xr(this,ci))==null||g.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===Bn.LANG&&r!==t&&B6(r)}connectedCallback(){var e,t;!xr(this,ci)&&!this.hasAttribute(Bn.NO_DEFAULT_STORE)&&ad(this,Db,CA).call(this),(e=xr(this,ci))==null||e.dispatch({type:"documentelementchangerequest",detail:la}),super.connectedCallback(),xr(this,ci)&&!xr(this,Ho)&&Vu(this,Ho,(t=xr(this,ci))==null?void 0:t.subscribe(xr(this,qp))),this.enableHotkeys()}disconnectedCallback(){var e,t,r,i;(e=super.disconnectedCallback)==null||e.call(this),xr(this,ci)&&((t=xr(this,ci))==null||t.dispatch({type:"documentelementchangerequest",detail:void 0}),(r=xr(this,ci))==null||r.dispatch({type:Vn.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),xr(this,Ho)&&((i=xr(this,Ho))==null||i.call(this),Vu(this,Ho,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),(t=xr(this,ci))==null||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),(t=xr(this,ci))==null||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){B1(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const r=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),o=C$(e,r,i);Object.values(Vn).forEach(l=>{e.addEventListener(l,xr(this,Lb))}),t.set(e,o)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(Vn).forEach(i=>{e.removeEventListener(i,xr(this,Lb))})}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),xr(this,ci)&&Object.entries(xr(this,ci).getState()).forEach(([i,o])=>{B1([e],i,o)}))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,r=t.indexOf(e);r<0||t.splice(r,1)}enableHotkeys(){this.addEventListener("keydown",ad(this,Nb,LA))}disableHotkeys(){this.removeEventListener("keydown",ad(this,Nb,LA)),this.removeEventListener("keyup",ad(this,Jm,Nv))}get hotkeys(){return Si(this,Bn.HOTKEYS)}set hotkeys(e){Ai(this,Bn.HOTKEYS,e)}keyboardShortcutHandler(e){var t,r,i,o,l;const d=e.target;if(((i=(r=(t=d.getAttribute(Bn.KEYS_USED))==null?void 0:t.split(" "))!=null?r:d==null?void 0:d.keysUsed)!=null?i:[]).map(p=>p==="Space"?" ":p).filter(Boolean).includes(e.key))return;let f,m,g;if(!xr(this,Yc).contains(`no${e.key.toLowerCase()}`)&&!(e.key===" "&&xr(this,Yc).contains("nospace")))switch(e.key){case" ":case"k":f=xr(this,ci).getState().mediaPaused?Vn.MEDIA_PLAY_REQUEST:Vn.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new At.CustomEvent(f,{composed:!0,bubbles:!0}));break;case"m":f=this.mediaStore.getState().mediaVolumeLevel==="off"?Vn.MEDIA_UNMUTE_REQUEST:Vn.MEDIA_MUTE_REQUEST,this.dispatchEvent(new At.CustomEvent(f,{composed:!0,bubbles:!0}));break;case"f":f=this.mediaStore.getState().mediaIsFullscreen?Vn.MEDIA_EXIT_FULLSCREEN_REQUEST:Vn.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new At.CustomEvent(f,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new At.CustomEvent(Vn.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const p=this.hasAttribute(Bn.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(Bn.KEYBOARD_BACKWARD_SEEK_OFFSET):F1;m=Math.max(((o=this.mediaStore.getState().mediaCurrentTime)!=null?o:0)-p,0),g=new At.CustomEvent(Vn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(g);break}case"ArrowRight":{const p=this.hasAttribute(Bn.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(Bn.KEYBOARD_FORWARD_SEEK_OFFSET):F1;m=Math.max(((l=this.mediaStore.getState().mediaCurrentTime)!=null?l:0)+p,0),g=new At.CustomEvent(Vn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(g);break}}}}Yc=new WeakMap;jp=new WeakMap;ci=new WeakMap;qp=new WeakMap;Ho=new WeakMap;Lb=new WeakMap;Db=new WeakSet;CA=function(){var n;this.mediaStore=A$({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(Bn.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(Bn.DEFAULT_DURATION)?+this.getAttribute(Bn.DEFAULT_DURATION):void 0,defaultStreamType:(n=this.getAttribute(Bn.DEFAULT_STREAM_TYPE))!=null?n:void 0,liveEdgeOffset:this.hasAttribute(Bn.LIVE_EDGE_OFFSET)?+this.getAttribute(Bn.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(Bn.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(Bn.SEEK_TO_LIVE_OFFSET):this.hasAttribute(Bn.LIVE_EDGE_OFFSET)?+this.getAttribute(Bn.LIVE_EDGE_OFFSET):void 0,noAutoSeekToLive:this.hasAttribute(Bn.NO_AUTO_SEEK_TO_LIVE),noVolumePref:this.hasAttribute(Bn.NO_VOLUME_PREF),noSubtitlesLangPref:this.hasAttribute(Bn.NO_SUBTITLES_LANG_PREF)}})};Jm=new WeakSet;Nv=function(n){const{key:e}=n;if(!qN.includes(e)){this.removeEventListener("keyup",ad(this,Jm,Nv));return}this.keyboardShortcutHandler(n)};Nb=new WeakSet;LA=function(n){const{metaKey:e,altKey:t,key:r}=n;if(e||t||!qN.includes(r)){this.removeEventListener("keyup",ad(this,Jm,Nv));return}[" ","ArrowLeft","ArrowRight"].includes(r)&&!(xr(this,Yc).contains(`no${r.toLowerCase()}`)||r===" "&&xr(this,Yc).contains("nospace"))&&n.preventDefault(),this.addEventListener("keyup",ad(this,Jm,Nv),{once:!0})};const w$=Object.values(Be),I$=Object.values(gN),GN=n=>{var e,t,r,i;let{observedAttributes:o}=n.constructor;!o&&((e=n.nodeName)!=null&&e.includes("-"))&&(At.customElements.upgrade(n),{observedAttributes:o}=n.constructor);const l=(i=(r=(t=n==null?void 0:n.getAttribute)==null?void 0:t.call(n,Yr.MEDIA_CHROME_ATTRIBUTES))==null?void 0:r.split)==null?void 0:i.call(r,/\s+/);return Array.isArray(o||l)?(o||l).filter(d=>w$.includes(d)):[]},k$=n=>{var e,t;return(e=n.nodeName)!=null&&e.includes("-")&&At.customElements.get((t=n.nodeName)==null?void 0:t.toLowerCase())&&!(n instanceof At.customElements.get(n.nodeName.toLowerCase()))&&At.customElements.upgrade(n),I$.some(r=>r in n)},DA=n=>k$(n)||!!GN(n).length,U1=n=>{var e;return(e=n==null?void 0:n.join)==null?void 0:e.call(n,":")},z1={[Be.MEDIA_SUBTITLES_LIST]:Dv,[Be.MEDIA_SUBTITLES_SHOWING]:Dv,[Be.MEDIA_SEEKABLE]:U1,[Be.MEDIA_BUFFERED]:n=>n==null?void 0:n.map(U1).join(" "),[Be.MEDIA_PREVIEW_COORDS]:n=>n==null?void 0:n.join(" "),[Be.MEDIA_RENDITION_LIST]:x6,[Be.MEDIA_AUDIO_TRACK_LIST]:N6},R$=async(n,e,t)=>{var r,i;if(n.isConnected||await yN(0),typeof t=="boolean"||t==null)return $r(n,e,t);if(typeof t=="number")return Fi(n,e,t);if(typeof t=="string")return Ai(n,e,t);if(Array.isArray(t)&&!t.length)return n.removeAttribute(e);const o=(i=(r=z1[e])==null?void 0:r.call(z1,t))!=null?i:t;return n.setAttribute(e,o)},x$=n=>{var e;return!!((e=n.closest)!=null&&e.call(n,'*[slot="media"]'))},Oc=(n,e)=>{if(x$(n))return;const t=(i,o)=>{var l,d;DA(i)&&o(i);const{children:c=[]}=i??{},f=(d=(l=i==null?void 0:i.shadowRoot)==null?void 0:l.children)!=null?d:[];[...c,...f].forEach(g=>Oc(g,o))},r=n==null?void 0:n.nodeName.toLowerCase();if(r.includes("-")&&!DA(n)){At.customElements.whenDefined(r).then(()=>{t(n,e)});return}t(n,e)},B1=(n,e,t)=>{n.forEach(r=>{if(e in r){r[e]=t;return}const i=GN(r),o=e.toLowerCase();i.includes(o)&&R$(r,o,t)})},C$=(n,e,t)=>{Oc(n,e);const r=m=>{var g;const p=(g=m==null?void 0:m.composedPath()[0])!=null?g:m.target;e(p)},i=m=>{var g;const p=(g=m==null?void 0:m.composedPath()[0])!=null?g:m.target;t(p)};n.addEventListener(Vn.REGISTER_MEDIA_STATE_RECEIVER,r),n.addEventListener(Vn.UNREGISTER_MEDIA_STATE_RECEIVER,i);const o=m=>{m.forEach(g=>{const{addedNodes:p=[],removedNodes:y=[],type:v,target:A,attributeName:I}=g;v==="childList"?(Array.prototype.forEach.call(p,P=>Oc(P,e)),Array.prototype.forEach.call(y,P=>Oc(P,t))):v==="attributes"&&I===Yr.MEDIA_CHROME_ATTRIBUTES&&(DA(A)?e(A):t(A))})};let l=[];const d=m=>{const g=m.target;g.name!=="media"&&(l.forEach(p=>Oc(p,t)),l=[...g.assignedElements({flatten:!0})],l.forEach(p=>Oc(p,e)))};n.addEventListener("slotchange",d);const c=new MutationObserver(o);return c.observe(n,{childList:!0,attributes:!0,subtree:!0}),()=>{Oc(n,t),n.removeEventListener("slotchange",d),c.disconnect(),n.removeEventListener(Vn.REGISTER_MEDIA_STATE_RECEIVER,r),n.removeEventListener(Vn.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};At.customElements.get("media-controller")||At.customElements.define("media-controller",HN);var L$=HN;const Lh={PLACEMENT:"placement",BOUNDS:"bounds"};function D$(n){return`
    <style>
      :host {
        --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
        --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
        --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
        --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
        --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
        position: relative;
        pointer-events: none;
        display: var(--media-tooltip-display, inline-flex);
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        z-index: var(--media-tooltip-z-index, 1);
        background: var(--_tooltip-background);
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        font: var(--media-font,
          var(--media-font-weight, 400)
          var(--media-font-size, 13px) /
          var(--media-text-content-height, var(--media-control-height, 18px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        padding: var(--media-tooltip-padding, .35em .7em);
        border: var(--media-tooltip-border, none);
        border-radius: var(--media-tooltip-border-radius, 5px);
        filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
        white-space: var(--media-tooltip-white-space, nowrap);
      }

      :host([hidden]) {
        display: none;
      }

      img, svg {
        display: inline-block;
      }

      #arrow {
        position: absolute;
        width: 0px;
        height: 0px;
        border-style: solid;
        display: var(--media-tooltip-arrow-display, block);
      }

      :host(:not([placement])),
      :host([placement="top"]) {
        position: absolute;
        bottom: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host(:not([placement])) #arrow,
      :host([placement="top"]) #arrow {
        top: 100%;
        left: 50%;
        border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
        border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="right"]) {
        position: absolute;
        left: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="right"]) #arrow {
        top: 50%;
        right: 100%;
        border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
        border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
        transform: translate(0, -50%);
      }

      :host([placement="bottom"]) {
        position: absolute;
        top: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host([placement="bottom"]) #arrow {
        bottom: 100%;
        left: 50%;
        border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
        border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="left"]) {
        position: absolute;
        right: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="left"]) #arrow {
        top: 50%;
        left: 100%;
        border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
        border-color: transparent transparent transparent var(--_tooltip-arrow-background);
        transform: translate(0, -50%);
      }
      
      :host([placement="none"]) #arrow {
        display: none;
      }
    </style>
    <slot></slot>
    <div id="arrow"></div>
  `}class FT extends At.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!kN(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const t=this.placement;if(t==="left"||t==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const r=getComputedStyle(this),i=(e=ng(this,"#"+this.bounds))!=null?e:Xs(this);if(!i)return;const{x:o,width:l}=i.getBoundingClientRect(),{x:d,width:c}=this.getBoundingClientRect(),f=d+c,m=o+l,g=r.getPropertyValue("--media-tooltip-offset-x"),p=g?parseFloat(g.replace("px","")):0,y=r.getPropertyValue("--media-tooltip-container-margin"),v=y?parseFloat(y.replace("px","")):0,A=d-o+p-v,I=f-m+p+v;if(A<0){this.style.setProperty("--media-tooltip-offset-x",`${A}px`);return}if(I>0){this.style.setProperty("--media-tooltip-offset-x",`${I}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}if(this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[Lh.PLACEMENT,Lh.BOUNDS]}get placement(){return Si(this,Lh.PLACEMENT)}set placement(e){Ai(this,Lh.PLACEMENT,e)}get bounds(){return Si(this,Lh.BOUNDS)}set bounds(e){Ai(this,Lh.BOUNDS,e)}}FT.shadowRootOptions={mode:"open"};FT.getTemplateHTML=D$;At.customElements.get("media-tooltip")||At.customElements.define("media-tooltip",FT);var $1=FT,kI=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Wi=(n,e,t)=>(kI(n,e,"read from private field"),t?t.call(n):e.get(n)),Dh=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},WE=(n,e,t,r)=>(kI(n,e,"write to private field"),e.set(n,t),t),N$=(n,e,t)=>(kI(n,e,"access private method"),t),Go,dm,sd,Gh,Pb,NA,VN;const Ku={TOOLTIP_PLACEMENT:"tooltipplacement",DISABLED:"disabled",NO_TOOLTIP:"notooltip"};function P$(n,e={}){return`
    <style>
      :host {
        position: relative;
        font: var(--media-font,
          var(--media-font-weight, bold)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        padding: var(--media-button-padding, var(--media-control-padding, 10px));
        justify-content: var(--media-button-justify-content, center);
        display: inline-flex;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        transition: background .15s linear;
        pointer-events: auto;
        cursor: var(--media-cursor, pointer);
        -webkit-tap-highlight-color: transparent;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }
      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgba(50 50 70 / .7));
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-button-icon-width);
        height: var(--media-button-icon-height, var(--media-control-height, 24px));
        transform: var(--media-button-icon-transform);
        transition: var(--media-button-icon-transition);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
      }

      media-tooltip {
        
        max-width: 0;
        overflow-x: clip;
        opacity: 0;
        transition: opacity .3s, max-width 0s 9s;
      }

      :host(:hover) media-tooltip,
      :host(:focus-visible) media-tooltip {
        max-width: 100vw;
        opacity: 1;
        transition: opacity .3s;
      }

      :host([notooltip]) slot[name="tooltip"] {
        display: none;
      }
    </style>

    ${this.getSlotTemplateHTML(n,e)}

    <slot name="tooltip">
      <media-tooltip part="tooltip" aria-hidden="true">
        <template shadowrootmode="${$1.shadowRootOptions.mode}">
          ${$1.getTemplateHTML({})}
        </template>
        <slot name="tooltip-content">
          ${this.getTooltipContentHTML(n)}
        </slot>
      </media-tooltip>
    </slot>
  `}function M$(n,e){return`
    <slot></slot>
  `}function O$(){return""}class ka extends At.HTMLElement{constructor(){if(super(),Dh(this,NA),Dh(this,Go,void 0),this.preventClick=!1,this.tooltipEl=null,Dh(this,dm,e=>{this.preventClick||this.handleClick(e),setTimeout(Wi(this,sd),0)}),Dh(this,sd,()=>{var e,t;(t=(e=this.tooltipEl)==null?void 0:e.updateXOffset)==null||t.call(e)}),Dh(this,Gh,e=>{const{key:t}=e;if(!this.keysUsed.includes(t)){this.removeEventListener("keyup",Wi(this,Gh));return}this.preventClick||this.handleClick(e)}),Dh(this,Pb,e=>{const{metaKey:t,altKey:r,key:i}=e;if(t||r||!this.keysUsed.includes(i)){this.removeEventListener("keyup",Wi(this,Gh));return}this.addEventListener("keyup",Wi(this,Gh),{once:!0})}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes),t=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(t):this.shadowRoot.innerHTML=t}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",Ku.TOOLTIP_PLACEMENT,Yr.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",Wi(this,dm)),this.addEventListener("keydown",Wi(this,Pb)),this.tabIndex=0}disable(){this.removeEventListener("click",Wi(this,dm)),this.removeEventListener("keydown",Wi(this,Pb)),this.removeEventListener("keyup",Wi(this,Gh)),this.tabIndex=-1}attributeChangedCallback(e,t,r){var i,o,l,d,c;e===Yr.MEDIA_CONTROLLER?(t&&((o=(i=Wi(this,Go))==null?void 0:i.unassociateElement)==null||o.call(i,this),WE(this,Go,null)),r&&this.isConnected&&(WE(this,Go,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=Wi(this,Go))==null?void 0:d.associateElement)==null||c.call(d,this))):e==="disabled"&&r!==t?r==null?this.enable():this.disable():e===Ku.TOOLTIP_PLACEMENT&&this.tooltipEl&&r!==t&&(this.tooltipEl.placement=r),Wi(this,sd).call(this)}connectedCallback(){var e,t,r;const{style:i}=Zi(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const o=this.getAttribute(Yr.MEDIA_CONTROLLER);o&&(WE(this,Go,(e=this.getRootNode())==null?void 0:e.getElementById(o)),(r=(t=Wi(this,Go))==null?void 0:t.associateElement)==null||r.call(t,this)),At.customElements.whenDefined("media-tooltip").then(()=>N$(this,NA,VN).call(this))}disconnectedCallback(){var e,t;this.disable(),(t=(e=Wi(this,Go))==null?void 0:e.unassociateElement)==null||t.call(e,this),WE(this,Go,null),this.removeEventListener("mouseenter",Wi(this,sd)),this.removeEventListener("focus",Wi(this,sd)),this.removeEventListener("click",Wi(this,dm))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return Si(this,Ku.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){Ai(this,Ku.TOOLTIP_PLACEMENT,e)}get mediaController(){return Si(this,Yr.MEDIA_CONTROLLER)}set mediaController(e){Ai(this,Yr.MEDIA_CONTROLLER,e)}get disabled(){return Br(this,Ku.DISABLED)}set disabled(e){$r(this,Ku.DISABLED,e)}get noTooltip(){return Br(this,Ku.NO_TOOLTIP)}set noTooltip(e){$r(this,Ku.NO_TOOLTIP,e)}handleClick(e){}}Go=new WeakMap;dm=new WeakMap;sd=new WeakMap;Gh=new WeakMap;Pb=new WeakMap;NA=new WeakSet;VN=function(){this.addEventListener("mouseenter",Wi(this,sd)),this.addEventListener("focus",Wi(this,sd)),this.addEventListener("click",Wi(this,dm));const n=this.tooltipPlacement;n&&this.tooltipEl&&(this.tooltipEl.placement=n)};ka.shadowRootOptions={mode:"open"};ka.getTemplateHTML=P$;ka.getSlotTemplateHTML=M$;ka.getTooltipContentHTML=O$;At.customElements.get("media-chrome-button")||At.customElements.define("media-chrome-button",ka);const j1=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`;function F$(n){return`
    <style>
      :host([${Be.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${Be.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${Be.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
      :host(:not([${Be.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${j1}</slot>
      <slot name="exit">${j1}</slot>
    </slot>
  `}function U$(){return`
    <slot name="tooltip-enter">${Kn("start airplay")}</slot>
    <slot name="tooltip-exit">${Kn("stop airplay")}</slot>
  `}const q1=n=>{const e=n.mediaIsAirplaying?Kn("stop airplay"):Kn("start airplay");n.setAttribute("aria-label",e)};class RI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_IS_AIRPLAYING,Be.MEDIA_AIRPLAY_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),q1(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_IS_AIRPLAYING&&q1(this)}get mediaIsAirplaying(){return Br(this,Be.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){$r(this,Be.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return Si(this,Be.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){Ai(this,Be.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new At.CustomEvent(Vn.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}RI.getSlotTemplateHTML=F$;RI.getTooltipContentHTML=U$;At.customElements.get("media-airplay-button")||At.customElements.define("media-airplay-button",RI);const z$=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,B$=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function $$(n){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-checked="true"]) slot[name=tooltip-enable],
      :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${z$}</slot>
      <slot name="off">${B$}</slot>
    </slot>
  `}function j$(){return`
    <slot name="tooltip-enable">${Kn("Enable captions")}</slot>
    <slot name="tooltip-disable">${Kn("Disable captions")}</slot>
  `}const H1=n=>{n.setAttribute("aria-checked",UN(n).toString())};class xI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_SUBTITLES_LIST,Be.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",Kn("closed captions")),H1(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_SUBTITLES_SHOWING&&H1(this)}get mediaSubtitlesList(){return G1(this,Be.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){V1(this,Be.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return G1(this,Be.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){V1(this,Be.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new At.CustomEvent(Vn.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}xI.getSlotTemplateHTML=$$;xI.getTooltipContentHTML=j$;const G1=(n,e)=>{const t=n.getAttribute(e);return t?MT(t):[]},V1=(n,e,t)=>{if(!(t!=null&&t.length)){n.removeAttribute(e);return}const r=Dv(t);n.getAttribute(e)!==r&&n.setAttribute(e,r)};At.customElements.get("media-captions-button")||At.customElements.define("media-captions-button",xI);const q$='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',H$='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>';function G$(n){return`
    <style>
      :host([${Be.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${Be.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${Be.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
      :host(:not([${Be.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${q$}</slot>
      <slot name="exit">${H$}</slot>
    </slot>
  `}function V$(){return`
    <slot name="tooltip-enter">${Kn("Start casting")}</slot>
    <slot name="tooltip-exit">${Kn("Stop casting")}</slot>
  `}const K1=n=>{const e=n.mediaIsCasting?Kn("stop casting"):Kn("start casting");n.setAttribute("aria-label",e)};class CI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_IS_CASTING,Be.MEDIA_CAST_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),K1(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_IS_CASTING&&K1(this)}get mediaIsCasting(){return Br(this,Be.MEDIA_IS_CASTING)}set mediaIsCasting(e){$r(this,Be.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Si(this,Be.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){Ai(this,Be.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?Vn.MEDIA_EXIT_CAST_REQUEST:Vn.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new At.CustomEvent(e,{composed:!0,bubbles:!0}))}}CI.getSlotTemplateHTML=G$;CI.getTooltipContentHTML=V$;At.customElements.get("media-cast-button")||At.customElements.define("media-cast-button",CI);var LI=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},gf=(n,e,t)=>(LI(n,e,"read from private field"),e.get(n)),Kl=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},DI=(n,e,t,r)=>(LI(n,e,"write to private field"),e.set(n,t),t),Rc=(n,e,t)=>(LI(n,e,"access private method"),t),Q0,Pv,Tf,Mb,PA,MA,KN,OA,YN,FA,WN,UA,QN,zA,XN;function K$(n){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        display: var(--media-dialog-display, inline-flex);
        justify-content: center;
        align-items: center;
        
        transition-behavior: allow-discrete;
        visibility: hidden;
        opacity: 0;
        transform: translateY(2px) scale(.99);
        pointer-events: none;
      }

      :host([open]) {
        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;
        visibility: visible;
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }

      #content {
        display: flex;
        position: relative;
        box-sizing: border-box;
        width: min(320px, 100%);
        word-wrap: break-word;
        max-height: 100%;
        overflow: auto;
        text-align: center;
        line-height: 1.4;
      }
    </style>
    ${this.getSlotTemplateHTML(n)}
  `}function Y$(n){return`
    <slot id="content"></slot>
  `}const Ep={OPEN:"open",ANCHOR:"anchor"};class iy extends At.HTMLElement{constructor(){super(),Kl(this,Mb),Kl(this,MA),Kl(this,OA),Kl(this,FA),Kl(this,UA),Kl(this,zA),Kl(this,Q0,!1),Kl(this,Pv,null),Kl(this,Tf,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[Ep.OPEN,Ep.ANCHOR]}get open(){return Br(this,Ep.OPEN)}set open(e){$r(this,Ep.OPEN,e)}handleEvent(e){switch(e.type){case"invoke":Rc(this,FA,WN).call(this,e);break;case"focusout":Rc(this,UA,QN).call(this,e);break;case"keydown":Rc(this,zA,XN).call(this,e);break}}connectedCallback(){Rc(this,Mb,PA).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,t,r){Rc(this,Mb,PA).call(this),e===Ep.OPEN&&r!==t&&(this.open?Rc(this,MA,KN).call(this):Rc(this,OA,YN).call(this))}focus(){DI(this,Pv,bI());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),t=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||t)return;const r=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');r==null||r.focus()}get keysUsed(){return["Escape","Tab"]}}Q0=new WeakMap;Pv=new WeakMap;Tf=new WeakMap;Mb=new WeakSet;PA=function(){if(!gf(this,Q0)&&(DI(this,Q0,!0),!this.shadowRoot)){this.attachShadow(this.constructor.shadowRootOptions);const n=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(n),queueMicrotask(()=>{const{style:e}=Zi(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")})}};MA=new WeakSet;KN=function(){var n;(n=gf(this,Tf))==null||n.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};OA=new WeakSet;YN=function(){var n;(n=gf(this,Tf))==null||n.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))};FA=new WeakSet;WN=function(n){DI(this,Tf,n.relatedTarget),cu(this,n.relatedTarget)||(this.open=!this.open)};UA=new WeakSet;QN=function(n){var e;cu(this,n.relatedTarget)||((e=gf(this,Pv))==null||e.focus(),gf(this,Tf)&&gf(this,Tf)!==n.relatedTarget&&this.open&&(this.open=!1))};zA=new WeakSet;XN=function(n){var e,t,r,i,o;const{key:l,ctrlKey:d,altKey:c,metaKey:f}=n;d||c||f||this.keysUsed.includes(l)&&(n.preventDefault(),n.stopPropagation(),l==="Tab"?(n.shiftKey?(t=(e=this.previousElementSibling)==null?void 0:e.focus)==null||t.call(e):(i=(r=this.nextElementSibling)==null?void 0:r.focus)==null||i.call(r),this.blur()):l==="Escape"&&((o=gf(this,Pv))==null||o.focus(),this.open=!1))};iy.shadowRootOptions={mode:"open"};iy.getTemplateHTML=K$;iy.getSlotTemplateHTML=Y$;At.customElements.get("media-chrome-dialog")||At.customElements.define("media-chrome-dialog",iy);var NI=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Li=(n,e,t)=>(NI(n,e,"read from private field"),t?t.call(n):e.get(n)),Aa=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Qu=(n,e,t,r)=>(NI(n,e,"write to private field"),e.set(n,t),t),vo=(n,e,t)=>(NI(n,e,"access private method"),t),Vo,UT,Ob,Fb,Eo,X0,Ub,zb,Bb,PI,ZN,$b,BA,jb,$A,Z0,MI,jA,JN,qA,eP,HA,tP,GA,nP;function W$(n){return`
    <style>
      :host {
        --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

        box-shadow: var(--_focus-visible-box-shadow, none);
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
        display: inline-flex;
        align-items: center;
        
        vertical-align: middle;
        box-sizing: border-box;
        position: relative;
        width: 100px;
        transition: background .15s linear;
        cursor: var(--media-cursor, pointer);
        pointer-events: auto;
        touch-action: none; 
      }

      
      input[type=range]:focus {
        outline: 0;
      }
      input[type=range]:focus::-webkit-slider-runnable-track {
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgb(50 50 70 / .7));
      }

      #leftgap {
        padding-left: var(--media-range-padding-left, var(--_media-range-padding));
      }

      #rightgap {
        padding-right: var(--media-range-padding-right, var(--_media-range-padding));
      }

      #startpoint,
      #endpoint {
        position: absolute;
      }

      #endpoint {
        right: 0;
      }

      #container {
        
        width: var(--media-range-track-width, 100%);
        transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
        position: relative;
        height: 100%;
        display: flex;
        align-items: center;
        min-width: 40px;
      }

      #range {
        
        display: var(--media-time-range-hover-display, block);
        bottom: var(--media-time-range-hover-bottom, -7px);
        height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
        width: 100%;
        position: absolute;
        cursor: var(--media-cursor, pointer);

        -webkit-appearance: none; 
        -webkit-tap-highlight-color: transparent;
        background: transparent; 
        margin: 0;
        z-index: 1;
      }

      @media (hover: hover) {
        #range {
          bottom: var(--media-time-range-hover-bottom, -5px);
          height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
        }
      }

      
      
      #range::-webkit-slider-thumb {
        -webkit-appearance: none;
        background: transparent;
        width: .1px;
        height: .1px;
      }

      
      #range::-moz-range-thumb {
        background: transparent;
        border: transparent;
        width: .1px;
        height: .1px;
      }

      #appearance {
        height: var(--media-range-track-height, 4px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
        position: absolute;
        
        will-change: transform;
      }

      #track {
        background: var(--media-range-track-background, rgb(255 255 255 / .2));
        border-radius: var(--media-range-track-border-radius, 1px);
        border: var(--media-range-track-border, none);
        outline: var(--media-range-track-outline);
        outline-offset: var(--media-range-track-outline-offset);
        backdrop-filter: var(--media-range-track-backdrop-filter);
        -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
        box-shadow: var(--media-range-track-box-shadow, none);
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #progress,
      #pointer {
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #progress {
        background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
        transition: var(--media-range-track-transition);
      }

      #pointer {
        background: var(--media-range-track-pointer-background);
        border-right: var(--media-range-track-pointer-border-right);
        transition: visibility .25s, opacity .25s;
        visibility: hidden;
        opacity: 0;
      }

      @media (hover: hover) {
        :host(:hover) #pointer {
          transition: visibility .5s, opacity .5s;
          visibility: visible;
          opacity: 1;
        }
      }

      #thumb,
      ::slotted([slot=thumb]) {
        width: var(--media-range-thumb-width, 10px);
        height: var(--media-range-thumb-height, 10px);
        transition: var(--media-range-thumb-transition);
        transform: var(--media-range-thumb-transform, none);
        opacity: var(--media-range-thumb-opacity, 1);
        translate: -50%;
        position: absolute;
        left: 0;
        cursor: var(--media-cursor, pointer);
      }

      #thumb {
        border-radius: var(--media-range-thumb-border-radius, 10px);
        background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
        box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
        border: var(--media-range-thumb-border, none);
      }

      :host([disabled]) #thumb {
        background-color: #777;
      }

      .segments #appearance {
        height: var(--media-range-segment-hover-height, 7px);
      }

      #track {
        clip-path: url(#segments-clipping);
      }

      #segments {
        --segments-gap: var(--media-range-segments-gap, 2px);
        position: absolute;
        width: 100%;
        height: 100%;
      }

      #segments-clipping {
        transform: translateX(calc(var(--segments-gap) / 2));
      }

      #segments-clipping:empty {
        display: none;
      }

      #segments-clipping rect {
        height: var(--media-range-track-height, 4px);
        y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
        transition: var(--media-range-segment-transition, transform .1s ease-in-out);
        transform: var(--media-range-segment-transform, scaleY(1));
        transform-origin: center;
      }
    </style>
    <div id="leftgap"></div>
    <div id="container">
      <div id="startpoint"></div>
      <div id="endpoint"></div>
      <div id="appearance">
        <div id="track" part="track">
          <div id="pointer"></div>
          <div id="progress" part="progress"></div>
        </div>
        <slot name="thumb">
          <div id="thumb" part="thumb"></div>
        </slot>
        <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
      </div>
      <input id="range" type="range" min="0" max="1" step="any" value="0">
    </div>
    <div id="rightgap"></div>
  `}class rg extends At.HTMLElement{constructor(){if(super(),Aa(this,PI),Aa(this,$b),Aa(this,jb),Aa(this,Z0),Aa(this,jA),Aa(this,qA),Aa(this,HA),Aa(this,GA),Aa(this,Vo,void 0),Aa(this,UT,void 0),Aa(this,Ob,void 0),Aa(this,Fb,void 0),Aa(this,Eo,{}),Aa(this,X0,[]),Aa(this,Ub,()=>{if(this.range.matches(":focus-visible")){const{style:e}=Zi(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),Aa(this,zb,()=>{const{style:e}=Zi(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),Aa(this,Bb,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes),t=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(t):this.shadowRoot.innerHTML=t}this.container=this.shadowRoot.querySelector("#container"),Qu(this,Ob,this.shadowRoot.querySelector("#startpoint")),Qu(this,Fb,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Yr.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,r){var i,o,l,d,c;e===Yr.MEDIA_CONTROLLER?(t&&((o=(i=Li(this,Vo))==null?void 0:i.unassociateElement)==null||o.call(i,this),Qu(this,Vo,null)),r&&this.isConnected&&(Qu(this,Vo,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=Li(this,Vo))==null?void 0:d.associateElement)==null||c.call(d,this))):(e==="disabled"||e==="aria-disabled"&&t!==r)&&(r==null?(this.range.removeAttribute(e),vo(this,$b,BA).call(this)):(this.range.setAttribute(e,r),vo(this,jb,$A).call(this)))}connectedCallback(){var e,t,r;const{style:i}=Zi(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),Li(this,Eo).pointer=Zi(this.shadowRoot,"#pointer"),Li(this,Eo).progress=Zi(this.shadowRoot,"#progress"),Li(this,Eo).thumb=Zi(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),Li(this,Eo).activeSegment=Zi(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const o=this.getAttribute(Yr.MEDIA_CONTROLLER);o&&(Qu(this,Vo,(e=this.getRootNode())==null?void 0:e.getElementById(o)),(r=(t=Li(this,Vo))==null?void 0:t.associateElement)==null||r.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",Li(this,Ub)),this.shadowRoot.addEventListener("focusout",Li(this,zb)),vo(this,$b,BA).call(this),Qm(this.container,Li(this,Bb))}disconnectedCallback(){var e,t;vo(this,jb,$A).call(this),(t=(e=Li(this,Vo))==null?void 0:e.unassociateElement)==null||t.call(e,this),Qu(this,Vo,null),this.shadowRoot.removeEventListener("focusin",Li(this,Ub)),this.shadowRoot.removeEventListener("focusout",Li(this,zb)),Xm(this.container,Li(this,Bb))}updatePointerBar(e){var t;(t=Li(this,Eo).pointer)==null||t.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,t;const r=this.range.valueAsNumber*100;(e=Li(this,Eo).progress)==null||e.style.setProperty("width",`${r}%`),(t=Li(this,Eo).thumb)==null||t.style.setProperty("left",`${r}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!(e!=null&&e.length)),!(e!=null&&e.length))return;const r=[...new Set([+this.range.min,...e.flatMap(o=>[o.start,o.end]),+this.range.max])];Qu(this,X0,[...r]);const i=r.pop();for(const[o,l]of r.entries()){const[d,c]=[o===0,o===r.length-1],f=d?"calc(var(--segments-gap) / -1)":`${l*100}%`,g=`calc(${((c?i:r[o+1])-l)*100}%${d||c?"":" - var(--segments-gap)"})`,p=la.createElementNS("http://www.w3.org/2000/svg","rect"),y=Zi(this.shadowRoot,`#segments-clipping rect:nth-child(${o+1})`);y.style.setProperty("x",f),y.style.setProperty("width",g),t.append(p)}}getPointerRatio(e){return H6(e.clientX,e.clientY,Li(this,Ob).getBoundingClientRect(),Li(this,Fb).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":vo(this,GA,nP).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":vo(this,jA,JN).call(this,e);break;case"pointerdown":vo(this,Z0,MI).call(this,e);break;case"pointerup":vo(this,qA,eP).call(this);break;case"pointerleave":vo(this,HA,tP).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Vo=new WeakMap;UT=new WeakMap;Ob=new WeakMap;Fb=new WeakMap;Eo=new WeakMap;X0=new WeakMap;Ub=new WeakMap;zb=new WeakMap;Bb=new WeakMap;PI=new WeakSet;ZN=function(n){const e=Li(this,Eo).activeSegment;if(!e)return;const t=this.getPointerRatio(n),i=`#segments-clipping rect:nth-child(${Li(this,X0).findIndex((o,l,d)=>{const c=d[l+1];return c!=null&&t>=o&&t<=c})+1})`;(e.selectorText!=i||!e.style.transform)&&(e.selectorText=i,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};$b=new WeakSet;BA=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};jb=new WeakSet;$A=function(){var n,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(n=At.window)==null||n.removeEventListener("pointerup",this),(e=At.window)==null||e.removeEventListener("pointermove",this)};Z0=new WeakSet;MI=function(n){var e;Qu(this,UT,n.composedPath().includes(this.range)),(e=At.window)==null||e.addEventListener("pointerup",this)};jA=new WeakSet;JN=function(n){var e;n.pointerType!=="mouse"&&vo(this,Z0,MI).call(this,n),this.addEventListener("pointerleave",this),(e=At.window)==null||e.addEventListener("pointermove",this)};qA=new WeakSet;eP=function(){var n;(n=At.window)==null||n.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};HA=new WeakSet;tP=function(){var n,e;this.removeEventListener("pointerleave",this),(n=At.window)==null||n.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=Li(this,Eo).activeSegment)==null||e.style.removeProperty("transform")};GA=new WeakSet;nP=function(n){this.toggleAttribute("dragging",n.buttons===1||n.pointerType!=="mouse"),this.updatePointerBar(n),vo(this,PI,ZN).call(this,n),this.dragging&&(n.pointerType!=="mouse"||!Li(this,UT))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(n),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))};rg.shadowRootOptions={mode:"open"};rg.getTemplateHTML=W$;At.customElements.get("media-chrome-range")||At.customElements.define("media-chrome-range",rg);var rP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},QE=(n,e,t)=>(rP(n,e,"read from private field"),t?t.call(n):e.get(n)),Q$=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},XE=(n,e,t,r)=>(rP(n,e,"write to private field"),e.set(n,t),t),Ko;function X$(n){return`
    <style>
      :host {
        
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --media-loading-indicator-icon-height: 44px;
      }

      ::slotted(media-time-range),
      ::slotted(media-volume-range) {
        min-height: 100%;
      }

      ::slotted(media-time-range),
      ::slotted(media-clip-selector) {
        flex-grow: 1;
      }

      ::slotted([role="menu"]) {
        position: absolute;
      }
    </style>

    <slot></slot>
  `}class OI extends At.HTMLElement{constructor(){if(super(),Q$(this,Ko,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Yr.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,r){var i,o,l,d,c;e===Yr.MEDIA_CONTROLLER&&(t&&((o=(i=QE(this,Ko))==null?void 0:i.unassociateElement)==null||o.call(i,this),XE(this,Ko,null)),r&&this.isConnected&&(XE(this,Ko,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=QE(this,Ko))==null?void 0:d.associateElement)==null||c.call(d,this)))}connectedCallback(){var e,t,r;const i=this.getAttribute(Yr.MEDIA_CONTROLLER);i&&(XE(this,Ko,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(r=(t=QE(this,Ko))==null?void 0:t.associateElement)==null||r.call(t,this))}disconnectedCallback(){var e,t;(t=(e=QE(this,Ko))==null?void 0:e.unassociateElement)==null||t.call(e,this),XE(this,Ko,null)}}Ko=new WeakMap;OI.shadowRootOptions={mode:"open"};OI.getTemplateHTML=X$;At.customElements.get("media-control-bar")||At.customElements.define("media-control-bar",OI);var iP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},ZE=(n,e,t)=>(iP(n,e,"read from private field"),t?t.call(n):e.get(n)),Z$=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},JE=(n,e,t,r)=>(iP(n,e,"write to private field"),e.set(n,t),t),Yo;function J$(n,e={}){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
        padding: var(--media-control-padding, 10px);
        display: inline-flex;
        justify-content: center;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        text-align: center;
        pointer-events: auto;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }

      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }
    </style>

    ${this.getSlotTemplateHTML(n,e)}
  `}function e9(n,e){return`
    <slot></slot>
  `}class Od extends At.HTMLElement{constructor(){if(super(),Z$(this,Yo,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Yr.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,r){var i,o,l,d,c;e===Yr.MEDIA_CONTROLLER&&(t&&((o=(i=ZE(this,Yo))==null?void 0:i.unassociateElement)==null||o.call(i,this),JE(this,Yo,null)),r&&this.isConnected&&(JE(this,Yo,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=ZE(this,Yo))==null?void 0:d.associateElement)==null||c.call(d,this)))}connectedCallback(){var e,t,r;const{style:i}=Zi(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const o=this.getAttribute(Yr.MEDIA_CONTROLLER);o&&(JE(this,Yo,(e=this.getRootNode())==null?void 0:e.getElementById(o)),(r=(t=ZE(this,Yo))==null?void 0:t.associateElement)==null||r.call(t,this))}disconnectedCallback(){var e,t;(t=(e=ZE(this,Yo))==null?void 0:e.unassociateElement)==null||t.call(e,this),JE(this,Yo,null)}}Yo=new WeakMap;Od.shadowRootOptions={mode:"open"};Od.getTemplateHTML=J$;Od.getSlotTemplateHTML=e9;At.customElements.get("media-text-display")||At.customElements.define("media-text-display",Od);var aP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Y1=(n,e,t)=>(aP(n,e,"read from private field"),t?t.call(n):e.get(n)),t9=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},n9=(n,e,t,r)=>(aP(n,e,"write to private field"),e.set(n,t),t),Hp;function r9(n,e){return`
    <slot>${Dd(e.mediaDuration)}</slot>
  `}class sP extends Od{constructor(){var e;super(),t9(this,Hp,void 0),n9(this,Hp,this.shadowRoot.querySelector("slot")),Y1(this,Hp).textContent=Dd((e=this.mediaDuration)!=null?e:0)}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_DURATION]}attributeChangedCallback(e,t,r){e===Be.MEDIA_DURATION&&(Y1(this,Hp).textContent=Dd(+r)),super.attributeChangedCallback(e,t,r)}get mediaDuration(){return _i(this,Be.MEDIA_DURATION)}set mediaDuration(e){Fi(this,Be.MEDIA_DURATION,e)}}Hp=new WeakMap;sP.getSlotTemplateHTML=r9;At.customElements.get("media-duration-display")||At.customElements.define("media-duration-display",sP);const i9={2:Kn("Network Error"),3:Kn("Decode Error"),4:Kn("Source Not Supported"),5:Kn("Encryption Error")},a9={2:Kn("A network error caused the media download to fail."),3:Kn("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:Kn("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:Kn("The media is encrypted and there are no keys to decrypt it.")},oP=n=>{var e,t;return n.code===1?null:{title:(e=i9[n.code])!=null?e:`Error ${n.code}`,message:(t=a9[n.code])!=null?t:n.message}};var lP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},s9=(n,e,t)=>(lP(n,e,"read from private field"),t?t.call(n):e.get(n)),o9=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},l9=(n,e,t,r)=>(lP(n,e,"write to private field"),e.set(n,t),t),qb;function u9(n){return`
    <style>
      :host {
        background: rgb(20 20 30 / .8);
      }

      #content {
        display: block;
        padding: 1.2em 1.5em;
      }

      h3,
      p {
        margin-block: 0 .3em;
      }
    </style>
    <slot name="error-${n.mediaerrorcode}" id="content">
      ${uP({code:+n.mediaerrorcode,message:n.mediaerrormessage})}
    </slot>
  `}function d9(n){return n.code&&oP(n)!==null}function uP(n){var e;const{title:t,message:r}=(e=oP(n))!=null?e:{};let i="";return t&&(i+=`<slot name="error-${n.code}-title"><h3>${t}</h3></slot>`),r&&(i+=`<slot name="error-${n.code}-message"><p>${r}</p></slot>`),i}const W1=[Be.MEDIA_ERROR_CODE,Be.MEDIA_ERROR_MESSAGE];class zT extends iy{constructor(){super(...arguments),o9(this,qb,null)}static get observedAttributes(){return[...super.observedAttributes,...W1]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,t,r){var i;if(super.attributeChangedCallback(e,t,r),!W1.includes(e))return;const o=(i=this.mediaError)!=null?i:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=d9(o),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(o))}get mediaError(){return s9(this,qb)}set mediaError(e){l9(this,qb,e)}get mediaErrorCode(){return _i(this,"mediaerrorcode")}set mediaErrorCode(e){Fi(this,"mediaerrorcode",e)}get mediaErrorMessage(){return Si(this,"mediaerrormessage")}set mediaErrorMessage(e){Ai(this,"mediaerrormessage",e)}}qb=new WeakMap;zT.getSlotTemplateHTML=u9;zT.formatErrorMessage=uP;At.customElements.get("media-error-dialog")||At.customElements.define("media-error-dialog",zT);var dP=zT;const c9=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,f9=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`;function h9(n){return`
    <style>
      :host([${Be.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${Be.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${Be.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
      :host(:not([${Be.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${c9}</slot>
      <slot name="exit">${f9}</slot>
    </slot>
  `}function m9(){return`
    <slot name="tooltip-enter">${Kn("Enter fullscreen mode")}</slot>
    <slot name="tooltip-exit">${Kn("Exit fullscreen mode")}</slot>
  `}const Q1=n=>{const e=n.mediaIsFullscreen?Kn("exit fullscreen mode"):Kn("enter fullscreen mode");n.setAttribute("aria-label",e)};class FI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_IS_FULLSCREEN,Be.MEDIA_FULLSCREEN_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),Q1(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_IS_FULLSCREEN&&Q1(this)}get mediaFullscreenUnavailable(){return Si(this,Be.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){Ai(this,Be.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return Br(this,Be.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){$r(this,Be.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?Vn.MEDIA_EXIT_FULLSCREEN_REQUEST:Vn.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new At.CustomEvent(e,{composed:!0,bubbles:!0}))}}FI.getSlotTemplateHTML=h9;FI.getTooltipContentHTML=m9;At.customElements.get("media-fullscreen-button")||At.customElements.define("media-fullscreen-button",FI);const{MEDIA_TIME_IS_LIVE:Hb,MEDIA_PAUSED:uv}=Be,{MEDIA_SEEK_TO_LIVE_REQUEST:g9,MEDIA_PLAY_REQUEST:p9}=Vn,v9='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>';function y9(n){return`
    <style>
      :host { --media-tooltip-display: none; }
      
      slot[name=indicator] > *,
      :host ::slotted([slot=indicator]) {
        
        min-width: auto;
        fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
        color: var(--media-live-button-icon-color, rgb(140, 140, 140));
      }

      :host([${Hb}]:not([${uv}])) slot[name=indicator] > *,
      :host([${Hb}]:not([${uv}])) ::slotted([slot=indicator]) {
        fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
        color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
      }

      :host([${Hb}]:not([${uv}])) {
        cursor: var(--media-cursor, not-allowed);
      }

      slot[name=text]{
        text-transform: uppercase;
      }

    </style>

    <slot name="indicator">${v9}</slot>
    
    <slot name="spacer">&nbsp;</slot><slot name="text">${Kn("live")}</slot>
  `}const X1=n=>{const e=n.mediaPaused||!n.mediaTimeIsLive,t=Kn(e?"seek to live":"playing live");n.setAttribute("aria-label",t),e?n.removeAttribute("aria-disabled"):n.setAttribute("aria-disabled","true")};class cP extends ka{static get observedAttributes(){return[...super.observedAttributes,Hb,uv]}connectedCallback(){super.connectedCallback(),X1(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),X1(this)}get mediaPaused(){return Br(this,Be.MEDIA_PAUSED)}set mediaPaused(e){$r(this,Be.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return Br(this,Be.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){$r(this,Be.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new At.CustomEvent(g9,{composed:!0,bubbles:!0})),this.hasAttribute(uv)&&this.dispatchEvent(new At.CustomEvent(p9,{composed:!0,bubbles:!0})))}}cP.getSlotTemplateHTML=y9;At.customElements.get("media-live-button")||At.customElements.define("media-live-button",cP);var fP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},bp=(n,e,t)=>(fP(n,e,"read from private field"),t?t.call(n):e.get(n)),Z1=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Tp=(n,e,t,r)=>(fP(n,e,"write to private field"),e.set(n,t),t),Wo,Gb;const eb={LOADING_DELAY:"loadingdelay",NO_AUTOHIDE:"noautohide"},hP=500,E9=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;function b9(n){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
        vertical-align: middle;
        box-sizing: border-box;
        --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${hP}ms);
      }

      #status {
        color: rgba(0,0,0,0);
        width: 0px;
        height: 0px;
      }

      :host slot[name=icon] > *,
      :host ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 0);
        transition: opacity 0.15s;
      }

      :host([${Be.MEDIA_LOADING}]:not([${Be.MEDIA_PAUSED}])) slot[name=icon] > *,
      :host([${Be.MEDIA_LOADING}]:not([${Be.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 1);
        transition: opacity 0.15s var(--_loading-indicator-delay);
      }

      :host #status {
        visibility: var(--media-loading-indicator-opacity, hidden);
        transition: visibility 0.15s;
      }

      :host([${Be.MEDIA_LOADING}]:not([${Be.MEDIA_PAUSED}])) #status {
        visibility: var(--media-loading-indicator-opacity, visible);
        transition: visibility 0.15s var(--_loading-indicator-delay);
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-loading-indicator-icon-width);
        height: var(--media-loading-indicator-icon-height, 100px);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
      }
    </style>

    <slot name="icon">${E9}</slot>
    <div id="status" role="status" aria-live="polite">${Kn("media loading")}</div>
  `}class UI extends At.HTMLElement{constructor(){if(super(),Z1(this,Wo,void 0),Z1(this,Gb,hP),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Yr.MEDIA_CONTROLLER,Be.MEDIA_PAUSED,Be.MEDIA_LOADING,eb.LOADING_DELAY]}attributeChangedCallback(e,t,r){var i,o,l,d,c;e===eb.LOADING_DELAY&&t!==r?this.loadingDelay=Number(r):e===Yr.MEDIA_CONTROLLER&&(t&&((o=(i=bp(this,Wo))==null?void 0:i.unassociateElement)==null||o.call(i,this),Tp(this,Wo,null)),r&&this.isConnected&&(Tp(this,Wo,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=bp(this,Wo))==null?void 0:d.associateElement)==null||c.call(d,this)))}connectedCallback(){var e,t,r;const i=this.getAttribute(Yr.MEDIA_CONTROLLER);i&&(Tp(this,Wo,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(r=(t=bp(this,Wo))==null?void 0:t.associateElement)==null||r.call(t,this))}disconnectedCallback(){var e,t;(t=(e=bp(this,Wo))==null?void 0:e.unassociateElement)==null||t.call(e,this),Tp(this,Wo,null)}get loadingDelay(){return bp(this,Gb)}set loadingDelay(e){Tp(this,Gb,e);const{style:t}=Zi(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return Br(this,Be.MEDIA_PAUSED)}set mediaPaused(e){$r(this,Be.MEDIA_PAUSED,e)}get mediaLoading(){return Br(this,Be.MEDIA_LOADING)}set mediaLoading(e){$r(this,Be.MEDIA_LOADING,e)}get mediaController(){return Si(this,Yr.MEDIA_CONTROLLER)}set mediaController(e){Ai(this,Yr.MEDIA_CONTROLLER,e)}get noAutohide(){return Br(this,eb.NO_AUTOHIDE)}set noAutohide(e){$r(this,eb.NO_AUTOHIDE,e)}}Wo=new WeakMap;Gb=new WeakMap;UI.shadowRootOptions={mode:"open"};UI.getTemplateHTML=b9;At.customElements.get("media-loading-indicator")||At.customElements.define("media-loading-indicator",UI);const T9=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,J1=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,_9=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`;function S9(n){return`
    <style>
      :host(:not([${Be.MEDIA_VOLUME_LEVEL}])) slot[name=icon] slot:not([name=high]),
      :host([${Be.MEDIA_VOLUME_LEVEL}=high]) slot[name=icon] slot:not([name=high]) {
        display: none !important;
      }

      :host([${Be.MEDIA_VOLUME_LEVEL}=off]) slot[name=icon] slot:not([name=off]) {
        display: none !important;
      }

      :host([${Be.MEDIA_VOLUME_LEVEL}=low]) slot[name=icon] slot:not([name=low]) {
        display: none !important;
      }

      :host([${Be.MEDIA_VOLUME_LEVEL}=medium]) slot[name=icon] slot:not([name=medium]) {
        display: none !important;
      }

      :host(:not([${Be.MEDIA_VOLUME_LEVEL}=off])) slot[name=tooltip-unmute],
      :host([${Be.MEDIA_VOLUME_LEVEL}=off]) slot[name=tooltip-mute] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="off">${T9}</slot>
      <slot name="low">${J1}</slot>
      <slot name="medium">${J1}</slot>
      <slot name="high">${_9}</slot>
    </slot>
  `}function A9(){return`
    <slot name="tooltip-mute">${Kn("Mute")}</slot>
    <slot name="tooltip-unmute">${Kn("Unmute")}</slot>
  `}const ex=n=>{const e=n.mediaVolumeLevel==="off",t=Kn(e?"unmute":"mute");n.setAttribute("aria-label",t)};class zI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_VOLUME_LEVEL]}connectedCallback(){super.connectedCallback(),ex(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_VOLUME_LEVEL&&ex(this)}get mediaVolumeLevel(){return Si(this,Be.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){Ai(this,Be.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?Vn.MEDIA_UNMUTE_REQUEST:Vn.MEDIA_MUTE_REQUEST;this.dispatchEvent(new At.CustomEvent(e,{composed:!0,bubbles:!0}))}}zI.getSlotTemplateHTML=S9;zI.getTooltipContentHTML=A9;At.customElements.get("media-mute-button")||At.customElements.define("media-mute-button",zI);const tx=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`;function w9(n){return`
    <style>
      :host([${Be.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      :host(:not([${Be.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${Be.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
      :host(:not([${Be.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${tx}</slot>
      <slot name="exit">${tx}</slot>
    </slot>
  `}function I9(){return`
    <slot name="tooltip-enter">${Kn("Enter picture in picture mode")}</slot>
    <slot name="tooltip-exit">${Kn("Exit picture in picture mode")}</slot>
  `}const nx=n=>{const e=n.mediaIsPip?Kn("exit picture in picture mode"):Kn("enter picture in picture mode");n.setAttribute("aria-label",e)};class BI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_IS_PIP,Be.MEDIA_PIP_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),nx(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_IS_PIP&&nx(this)}get mediaPipUnavailable(){return Si(this,Be.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){Ai(this,Be.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return Br(this,Be.MEDIA_IS_PIP)}set mediaIsPip(e){$r(this,Be.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?Vn.MEDIA_EXIT_PIP_REQUEST:Vn.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new At.CustomEvent(e,{composed:!0,bubbles:!0}))}}BI.getSlotTemplateHTML=w9;BI.getTooltipContentHTML=I9;At.customElements.get("media-pip-button")||At.customElements.define("media-pip-button",BI);var k9=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Nh=(n,e,t)=>(k9(n,e,"read from private field"),t?t.call(n):e.get(n)),R9=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Xu;const aS={RATES:"rates"},mP=[1,1.2,1.5,1.7,2],cm=1;function x9(n){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
    </style>
    <slot name="icon">${n.mediaplaybackrate||cm}x</slot>
  `}function C9(){return Kn("Playback rate")}class $I extends ka{constructor(){var e;super(),R9(this,Xu,new SI(this,aS.RATES,{defaultValue:mP})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:cm}x`}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PLAYBACK_RATE,aS.RATES]}attributeChangedCallback(e,t,r){if(super.attributeChangedCallback(e,t,r),e===aS.RATES&&(Nh(this,Xu).value=r),e===Be.MEDIA_PLAYBACK_RATE){const i=r?+r:Number.NaN,o=Number.isNaN(i)?cm:i;this.container.innerHTML=`${o}x`,this.setAttribute("aria-label",Kn("Playback rate {playbackRate}",{playbackRate:o}))}}get rates(){return Nh(this,Xu)}set rates(e){e?Array.isArray(e)?Nh(this,Xu).value=e.join(" "):typeof e=="string"&&(Nh(this,Xu).value=e):Nh(this,Xu).value=""}get mediaPlaybackRate(){return _i(this,Be.MEDIA_PLAYBACK_RATE,cm)}set mediaPlaybackRate(e){Fi(this,Be.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const r=Array.from(Nh(this,Xu).values(),l=>+l).sort((l,d)=>l-d),i=(t=(e=r.find(l=>l>this.mediaPlaybackRate))!=null?e:r[0])!=null?t:cm,o=new At.CustomEvent(Vn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(o)}}Xu=new WeakMap;$I.getSlotTemplateHTML=x9;$I.getTooltipContentHTML=C9;At.customElements.get("media-playback-rate-button")||At.customElements.define("media-playback-rate-button",$I);const L9=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,D9=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`;function N9(n){return`
    <style>
      :host([${Be.MEDIA_PAUSED}]) slot[name=pause],
      :host(:not([${Be.MEDIA_PAUSED}])) slot[name=play] {
        display: none !important;
      }

      :host([${Be.MEDIA_PAUSED}]) slot[name=tooltip-pause],
      :host(:not([${Be.MEDIA_PAUSED}])) slot[name=tooltip-play] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="play">${L9}</slot>
      <slot name="pause">${D9}</slot>
    </slot>
  `}function P9(){return`
    <slot name="tooltip-play">${Kn("Play")}</slot>
    <slot name="tooltip-pause">${Kn("Pause")}</slot>
  `}const rx=n=>{const e=n.mediaPaused?Kn("play"):Kn("pause");n.setAttribute("aria-label",e)};class jI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PAUSED,Be.MEDIA_ENDED]}connectedCallback(){super.connectedCallback(),rx(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_PAUSED&&rx(this)}get mediaPaused(){return Br(this,Be.MEDIA_PAUSED)}set mediaPaused(e){$r(this,Be.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?Vn.MEDIA_PLAY_REQUEST:Vn.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new At.CustomEvent(e,{composed:!0,bubbles:!0}))}}jI.getSlotTemplateHTML=N9;jI.getTooltipContentHTML=P9;At.customElements.get("media-play-button")||At.customElements.define("media-play-button",jI);const Bo={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"};function M9(n){return`
    <style>
      :host {
        pointer-events: none;
        display: var(--media-poster-image-display, inline-block);
        box-sizing: border-box;
      }

      img {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        background-repeat: no-repeat;
        background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
        background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, center);
      }
    </style>

    <img part="poster img" aria-hidden="true" id="image"/>
  `}const O9=n=>{n.style.removeProperty("background-image")},F9=(n,e)=>{n.style["background-image"]=`url('${e}')`};class qI extends At.HTMLElement{static get observedAttributes(){return[Bo.PLACEHOLDER_SRC,Bo.SRC]}constructor(){if(super(),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,r){e===Bo.SRC&&(r==null?this.image.removeAttribute(Bo.SRC):this.image.setAttribute(Bo.SRC,r)),e===Bo.PLACEHOLDER_SRC&&(r==null?O9(this.image):F9(this.image,r))}get placeholderSrc(){return Si(this,Bo.PLACEHOLDER_SRC)}set placeholderSrc(e){Ai(this,Bo.SRC,e)}get src(){return Si(this,Bo.SRC)}set src(e){Ai(this,Bo.SRC,e)}}qI.shadowRootOptions={mode:"open"};qI.getTemplateHTML=M9;At.customElements.get("media-poster-image")||At.customElements.define("media-poster-image",qI);var gP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},U9=(n,e,t)=>(gP(n,e,"read from private field"),t?t.call(n):e.get(n)),z9=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},B9=(n,e,t,r)=>(gP(n,e,"write to private field"),e.set(n,t),t),Vb;class $9 extends Od{constructor(){super(),z9(this,Vb,void 0),B9(this,Vb,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_PREVIEW_CHAPTER&&r!==t&&r!=null&&(U9(this,Vb).textContent=r,r!==""?this.setAttribute("aria-valuetext",`chapter: ${r}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return Si(this,Be.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){Ai(this,Be.MEDIA_PREVIEW_CHAPTER,e)}}Vb=new WeakMap;At.customElements.get("media-preview-chapter-display")||At.customElements.define("media-preview-chapter-display",$9);var pP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},tb=(n,e,t)=>(pP(n,e,"read from private field"),t?t.call(n):e.get(n)),j9=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},nb=(n,e,t,r)=>(pP(n,e,"write to private field"),e.set(n,t),t),Qo;function q9(n){return`
    <style>
      :host {
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
        overflow: hidden;
      }

      img {
        display: none;
        position: relative;
      }
    </style>
    <img crossorigin loading="eager" decoding="async">
  `}class BT extends At.HTMLElement{constructor(){if(super(),j9(this,Qo,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Yr.MEDIA_CONTROLLER,Be.MEDIA_PREVIEW_IMAGE,Be.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,r;const i=this.getAttribute(Yr.MEDIA_CONTROLLER);i&&(nb(this,Qo,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(r=(t=tb(this,Qo))==null?void 0:t.associateElement)==null||r.call(t,this))}disconnectedCallback(){var e,t;(t=(e=tb(this,Qo))==null?void 0:e.unassociateElement)==null||t.call(e,this),nb(this,Qo,null)}attributeChangedCallback(e,t,r){var i,o,l,d,c;[Be.MEDIA_PREVIEW_IMAGE,Be.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Yr.MEDIA_CONTROLLER&&(t&&((o=(i=tb(this,Qo))==null?void 0:i.unassociateElement)==null||o.call(i,this),nb(this,Qo,null)),r&&this.isConnected&&(nb(this,Qo,(l=this.getRootNode())==null?void 0:l.getElementById(r)),(c=(d=tb(this,Qo))==null?void 0:d.associateElement)==null||c.call(d,this)))}get mediaPreviewImage(){return Si(this,Be.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Ai(this,Be.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(Be.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(t=>+t)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(Be.MEDIA_PREVIEW_COORDS);return}this.setAttribute(Be.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!(e&&t))return;const[r,i,o,l]=e,d=t.split("#")[0],c=getComputedStyle(this),{maxWidth:f,maxHeight:m,minWidth:g,minHeight:p}=c,y=Math.min(parseInt(f)/o,parseInt(m)/l),v=Math.max(parseInt(g)/o,parseInt(p)/l),A=y<1,I=A?y:v>1?v:1,{style:P}=Zi(this.shadowRoot,":host"),U=Zi(this.shadowRoot,"img").style,M=this.shadowRoot.querySelector("img"),B=A?"min":"max";P.setProperty(`${B}-width`,"initial","important"),P.setProperty(`${B}-height`,"initial","important"),P.width=`${o*I}px`,P.height=`${l*I}px`;const ie=()=>{U.width=`${this.imgWidth*I}px`,U.height=`${this.imgHeight*I}px`,U.display="block"};M.src!==d&&(M.onload=()=>{this.imgWidth=M.naturalWidth,this.imgHeight=M.naturalHeight,ie()},M.src=d,ie()),ie(),U.transform=`translate(-${r*I}px, -${i*I}px)`}}Qo=new WeakMap;BT.shadowRootOptions={mode:"open"};BT.getTemplateHTML=q9;At.customElements.get("media-preview-thumbnail")||At.customElements.define("media-preview-thumbnail",BT);var ix=BT,vP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},ax=(n,e,t)=>(vP(n,e,"read from private field"),t?t.call(n):e.get(n)),H9=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},G9=(n,e,t,r)=>(vP(n,e,"write to private field"),e.set(n,t),t),Gp;class V9 extends Od{constructor(){super(),H9(this,Gp,void 0),G9(this,Gp,this.shadowRoot.querySelector("slot")),ax(this,Gp).textContent=Dd(0)}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_PREVIEW_TIME&&r!=null&&(ax(this,Gp).textContent=Dd(parseFloat(r)))}get mediaPreviewTime(){return _i(this,Be.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Fi(this,Be.MEDIA_PREVIEW_TIME,e)}}Gp=new WeakMap;At.customElements.get("media-preview-time-display")||At.customElements.define("media-preview-time-display",V9);const Ph={SEEK_OFFSET:"seekoffset"},sS=30,K9=n=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(2.18 19.87)">${n}</text>
    <path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/>
  </svg>`;function Y9(n,e){return`
    <slot name="icon">${K9(e.seekOffset)}</slot>
  `}function W9(){return Kn("Seek backward")}const Q9=0;class HI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_CURRENT_TIME,Ph.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=_i(this,Ph.SEEK_OFFSET,sS)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Ph.SEEK_OFFSET&&(this.seekOffset=_i(this,Ph.SEEK_OFFSET,sS))}get seekOffset(){return _i(this,Ph.SEEK_OFFSET,sS)}set seekOffset(e){Fi(this,Ph.SEEK_OFFSET,e),this.setAttribute("aria-label",Kn("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),wN(IN(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return _i(this,Be.MEDIA_CURRENT_TIME,Q9)}set mediaCurrentTime(e){Fi(this,Be.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new At.CustomEvent(Vn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}HI.getSlotTemplateHTML=Y9;HI.getTooltipContentHTML=W9;At.customElements.get("media-seek-backward-button")||At.customElements.define("media-seek-backward-button",HI);const Mh={SEEK_OFFSET:"seekoffset"},oS=30,X9=n=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(8.9 19.87)">${n}</text>
    <path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/>
  </svg>`;function Z9(n,e){return`
    <slot name="icon">${X9(e.seekOffset)}</slot>
  `}function J9(){return Kn("Seek forward")}const ej=0;class GI extends ka{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_CURRENT_TIME,Mh.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=_i(this,Mh.SEEK_OFFSET,oS)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Mh.SEEK_OFFSET&&(this.seekOffset=_i(this,Mh.SEEK_OFFSET,oS))}get seekOffset(){return _i(this,Mh.SEEK_OFFSET,oS)}set seekOffset(e){Fi(this,Mh.SEEK_OFFSET,e),this.setAttribute("aria-label",Kn("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),wN(IN(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return _i(this,Be.MEDIA_CURRENT_TIME,ej)}set mediaCurrentTime(e){Fi(this,Be.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new At.CustomEvent(Vn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}GI.getSlotTemplateHTML=Z9;GI.getTooltipContentHTML=J9;At.customElements.get("media-seek-forward-button")||At.customElements.define("media-seek-forward-button",GI);var yP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},lS=(n,e,t)=>(yP(n,e,"read from private field"),t?t.call(n):e.get(n)),tj=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},nj=(n,e,t,r)=>(yP(n,e,"write to private field"),e.set(n,t),t),Vh;const Fc={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},sx=[...Object.values(Fc),Be.MEDIA_CURRENT_TIME,Be.MEDIA_DURATION,Be.MEDIA_SEEKABLE],ox=["Enter"," "],rj="&nbsp;/&nbsp;",VA=(n,{timesSep:e=rj}={})=>{var t,r;const i=(t=n.mediaCurrentTime)!=null?t:0,[,o]=(r=n.mediaSeekable)!=null?r:[];let l=0;Number.isFinite(n.mediaDuration)?l=n.mediaDuration:Number.isFinite(o)&&(l=o);const d=n.remaining?Dd(0-(l-i)):Dd(i);return n.showDuration?`${d}${e}${Dd(l)}`:d},ij="video not loaded, unknown time.",aj=n=>{var e;const t=n.mediaCurrentTime,[,r]=(e=n.mediaSeekable)!=null?e:[];let i=null;if(Number.isFinite(n.mediaDuration)?i=n.mediaDuration:Number.isFinite(r)&&(i=r),t==null||i===null){n.setAttribute("aria-valuetext",ij);return}const o=n.remaining?ov(0-(i-t)):ov(t);if(!n.showDuration){n.setAttribute("aria-valuetext",o);return}const l=ov(i),d=`${o} of ${l}`;n.setAttribute("aria-valuetext",d)};function sj(n,e){return`
    <slot>${VA(e)}</slot>
  `}class EP extends Od{constructor(){super(),tj(this,Vh,void 0),nj(this,Vh,this.shadowRoot.querySelector("slot")),lS(this,Vh).innerHTML=`${VA(this)}`}static get observedAttributes(){return[...super.observedAttributes,...sx,"disabled"]}connectedCallback(){const{style:e}=Zi(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",Kn("playback time"));const t=r=>{const{key:i}=r;if(!ox.includes(i)){this.removeEventListener("keyup",t);return}this.toggleTimeDisplay()};this.addEventListener("keydown",r=>{const{metaKey:i,altKey:o,key:l}=r;if(i||o||!ox.includes(l)){this.removeEventListener("keyup",t);return}this.addEventListener("keyup",t)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,r){sx.includes(e)?this.update():e==="disabled"&&r!==t&&(r==null?this.enable():this.disable()),super.attributeChangedCallback(e,t,r)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return Br(this,Fc.REMAINING)}set remaining(e){$r(this,Fc.REMAINING,e)}get showDuration(){return Br(this,Fc.SHOW_DURATION)}set showDuration(e){$r(this,Fc.SHOW_DURATION,e)}get noToggle(){return Br(this,Fc.NO_TOGGLE)}set noToggle(e){$r(this,Fc.NO_TOGGLE,e)}get mediaDuration(){return _i(this,Be.MEDIA_DURATION)}set mediaDuration(e){Fi(this,Be.MEDIA_DURATION,e)}get mediaCurrentTime(){return _i(this,Be.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Fi(this,Be.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(Be.MEDIA_SEEKABLE);if(e)return e.split(":").map(t=>+t)}set mediaSeekable(e){if(e==null){this.removeAttribute(Be.MEDIA_SEEKABLE);return}this.setAttribute(Be.MEDIA_SEEKABLE,e.join(":"))}update(){const e=VA(this);aj(this),e!==lS(this,Vh).innerHTML&&(lS(this,Vh).innerHTML=e)}}Vh=new WeakMap;EP.getSlotTemplateHTML=sj;At.customElements.get("media-time-display")||At.customElements.define("media-time-display",EP);var bP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},ya=(n,e,t)=>(bP(n,e,"read from private field"),e.get(n)),$o=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},ys=(n,e,t,r)=>(bP(n,e,"write to private field"),e.set(n,t),t),oj=(n,e,t,r)=>({set _(i){ys(n,e,i)},get _(){return ya(n,e)}}),Kh,Kb,Yh,Vp,Yb,Wb,Qb,Wh,Uc,Xb;class lj{constructor(e,t,r){$o(this,Kh,void 0),$o(this,Kb,void 0),$o(this,Yh,void 0),$o(this,Vp,void 0),$o(this,Yb,void 0),$o(this,Wb,void 0),$o(this,Qb,void 0),$o(this,Wh,void 0),$o(this,Uc,0),$o(this,Xb,(i=performance.now())=>{ys(this,Uc,requestAnimationFrame(ya(this,Xb))),ys(this,Vp,performance.now()-ya(this,Yh));const o=1e3/this.fps;if(ya(this,Vp)>o){ys(this,Yh,i-ya(this,Vp)%o);const l=1e3/((i-ya(this,Kb))/++oj(this,Yb)._),d=(i-ya(this,Wb))/1e3/this.duration;let c=ya(this,Qb)+d*this.playbackRate;c-ya(this,Kh).valueAsNumber>0?ys(this,Wh,this.playbackRate/this.duration/l):(ys(this,Wh,.995*ya(this,Wh)),c=ya(this,Kh).valueAsNumber+ya(this,Wh)),this.callback(c)}}),ys(this,Kh,e),this.callback=t,this.fps=r}start(){ya(this,Uc)===0&&(ys(this,Yh,performance.now()),ys(this,Kb,ya(this,Yh)),ys(this,Yb,0),ya(this,Xb).call(this))}stop(){ya(this,Uc)!==0&&(cancelAnimationFrame(ya(this,Uc)),ys(this,Uc,0))}update({start:e,duration:t,playbackRate:r}){const i=e-ya(this,Kh).valueAsNumber,o=Math.abs(t-this.duration);(i>0||i<-.03||o>=.5)&&this.callback(e),ys(this,Qb,e),ys(this,Wb,performance.now()),this.duration=t,this.playbackRate=r}}Kh=new WeakMap;Kb=new WeakMap;Yh=new WeakMap;Vp=new WeakMap;Yb=new WeakMap;Wb=new WeakMap;Qb=new WeakMap;Wh=new WeakMap;Uc=new WeakMap;Xb=new WeakMap;var VI=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},sa=(n,e,t)=>(VI(n,e,"read from private field"),t?t.call(n):e.get(n)),va=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Xo=(n,e,t,r)=>(VI(n,e,"write to private field"),e.set(n,t),t),Ma=(n,e,t)=>(VI(n,e,"access private method"),t),Qh,pf,J0,dv,eT,Zb,Mv,Ov,Xh,Zh,Kp,KI,TP,KA,tT,YI,nT,WI,rT,QI,YA,_P,Fv,iT,WA,SP;const uj="video not loaded, unknown time.",dj=n=>{const e=n.range,t=ov(+AP(n)),r=ov(+n.mediaSeekableEnd),i=t&&r?`${t} of ${r}`:uj;e.setAttribute("aria-valuetext",i)};function cj(n){return`
    ${rg.getTemplateHTML(n)}
    <style>
      :host {
        --media-box-border-radius: 4px;
        --media-box-padding-left: 10px;
        --media-box-padding-right: 10px;
        --media-preview-border-radius: var(--media-box-border-radius);
        --media-box-arrow-offset: var(--media-box-border-radius);
        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        --_preview-background: var(--media-preview-background, var(--_control-background));

        
        contain: layout;
      }

      #buffered {
        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #preview-rail,
      #current-rail {
        width: 100%;
        position: absolute;
        left: 0;
        bottom: 100%;
        pointer-events: none;
        will-change: transform;
      }

      [part~="box"] {
        width: min-content;
        
        position: absolute;
        bottom: 100%;
        flex-direction: column;
        align-items: center;
        transform: translateX(-50%);
      }

      [part~="current-box"] {
        display: var(--media-current-box-display, var(--media-box-display, flex));
        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
        visibility: hidden;
      }

      [part~="preview-box"] {
        display: var(--media-preview-box-display, var(--media-box-display, flex));
        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
        transition-property: var(--media-preview-transition-property, visibility, opacity);
        transition-duration: var(--media-preview-transition-duration-out, .25s);
        transition-delay: var(--media-preview-transition-delay-out, 0s);
        visibility: hidden;
        opacity: 0;
      }

      :host(:is([${Be.MEDIA_PREVIEW_IMAGE}], [${Be.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }

      @media (hover: hover) {
        :host(:is([${Be.MEDIA_PREVIEW_IMAGE}], [${Be.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
          transition-duration: var(--media-preview-transition-duration-in, .5s);
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
          opacity: 1;
        }
      }

      media-preview-thumbnail,
      ::slotted(media-preview-thumbnail) {
        visibility: hidden;
        
        transition: visibility 0s .25s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-thumbnail-background, var(--_preview-background));
        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
        max-width: var(--media-preview-thumbnail-max-width, 180px);
        max-height: var(--media-preview-thumbnail-max-height, 160px);
        min-width: var(--media-preview-thumbnail-min-width, 120px);
        min-height: var(--media-preview-thumbnail-min-height, 80px);
        border: var(--media-preview-thumbnail-border);
        border-radius: var(--media-preview-thumbnail-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
      }

      :host([${Be.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
      :host([${Be.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      @media (hover: hover) {
        :host([${Be.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
        :host([${Be.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
        }

        :host([${Be.MEDIA_PREVIEW_TIME}]:hover) {
          --media-time-range-hover-display: block;
        }
      }

      media-preview-chapter-display,
      ::slotted(media-preview-chapter-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        visibility: hidden;
        
        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-chapter-background, var(--_preview-background));
        border-radius: var(--media-preview-chapter-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-chapter-padding, 3.5px 9px);
        margin: var(--media-preview-chapter-margin, 0 0 5px);
        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      }

      :host([${Be.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
      :host([${Be.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-chapter-border-radius, 0);
        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
        margin: var(--media-preview-chapter-margin, 0);
        min-width: 100%;
      }

      media-preview-chapter-display[${Be.MEDIA_PREVIEW_CHAPTER}],
      ::slotted(media-preview-chapter-display[${Be.MEDIA_PREVIEW_CHAPTER}]) {
        visibility: visible;
      }

      media-preview-chapter-display:not([aria-valuetext]),
      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
        display: none;
      }

      media-preview-time-display,
      ::slotted(media-preview-time-display),
      media-time-display,
      ::slotted(media-time-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        
        transition: min-width 0s, border-radius 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-time-background, var(--_preview-background));
        border-radius: var(--media-preview-time-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-time-padding, 3.5px 9px);
        margin: var(--media-preview-time-margin, 0);
        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50%)
        ));
      }

      :host([${Be.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
      :host([${Be.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-time-border-radius,
          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
        min-width: 100%;
      }

      :host([${Be.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }

      [part~="arrow"],
      ::slotted([part~="arrow"]) {
        display: var(--media-box-arrow-display, inline-block);
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
        ));
        
        border-color: transparent;
        border-top-color: var(--media-box-arrow-background, var(--_control-background));
        border-width: var(--media-box-arrow-border-width,
          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
        border-style: solid;
        justify-content: center;
        height: 0;
      }
    </style>
    <div id="preview-rail">
      <slot name="preview" part="box preview-box">
        <media-preview-thumbnail>
          <template shadowrootmode="${ix.shadowRootOptions.mode}">
            ${ix.getTemplateHTML({})}
          </template>
        </media-preview-thumbnail>
        <media-preview-chapter-display></media-preview-chapter-display>
        <media-preview-time-display></media-preview-time-display>
        <slot name="preview-arrow"><div part="arrow"></div></slot>
      </slot>
    </div>
    <div id="current-rail">
      <slot name="current" part="box current-box">
        
      </slot>
    </div>
  `}const rb=(n,e=n.mediaCurrentTime)=>{const t=Number.isFinite(n.mediaSeekableStart)?n.mediaSeekableStart:0,r=Number.isFinite(n.mediaDuration)?n.mediaDuration:n.mediaSeekableEnd;if(Number.isNaN(r))return 0;const i=(e-t)/(r-t);return Math.max(0,Math.min(i,1))},AP=(n,e=n.range.valueAsNumber)=>{const t=Number.isFinite(n.mediaSeekableStart)?n.mediaSeekableStart:0,r=Number.isFinite(n.mediaDuration)?n.mediaDuration:n.mediaSeekableEnd;return Number.isNaN(r)?0:e*(r-t)+t};class XI extends rg{constructor(){super(),va(this,Zh),va(this,KI),va(this,tT),va(this,nT),va(this,rT),va(this,YA),va(this,Fv),va(this,WA),va(this,Qh,void 0),va(this,pf,void 0),va(this,J0,void 0),va(this,dv,void 0),va(this,eT,void 0),va(this,Zb,void 0),va(this,Mv,void 0),va(this,Ov,void 0),va(this,Xh,void 0),va(this,KA,r=>{this.dragging||(yI(r)&&(this.range.valueAsNumber=r),this.updateBar())}),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),Xo(this,J0,this.shadowRoot.querySelectorAll('[part~="box"]')),Xo(this,eT,this.shadowRoot.querySelector('[part~="preview-box"]')),Xo(this,Zb,this.shadowRoot.querySelector('[part~="current-box"]'));const t=getComputedStyle(this);Xo(this,Mv,parseInt(t.getPropertyValue("--media-box-padding-left"))),Xo(this,Ov,parseInt(t.getPropertyValue("--media-box-padding-right"))),Xo(this,pf,new lj(this.range,sa(this,KA),60))}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PAUSED,Be.MEDIA_DURATION,Be.MEDIA_SEEKABLE,Be.MEDIA_CURRENT_TIME,Be.MEDIA_PREVIEW_IMAGE,Be.MEDIA_PREVIEW_TIME,Be.MEDIA_PREVIEW_CHAPTER,Be.MEDIA_BUFFERED,Be.MEDIA_PLAYBACK_RATE,Be.MEDIA_LOADING,Be.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",Kn("seek")),Ma(this,Zh,Kp).call(this),Xo(this,Qh,this.getRootNode()),(e=sa(this,Qh))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),Ma(this,Zh,Kp).call(this),(e=sa(this,Qh))==null||e.removeEventListener("transitionstart",this),Xo(this,Qh,null)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),t!=r&&(e===Be.MEDIA_CURRENT_TIME||e===Be.MEDIA_PAUSED||e===Be.MEDIA_ENDED||e===Be.MEDIA_LOADING||e===Be.MEDIA_DURATION||e===Be.MEDIA_SEEKABLE?(sa(this,pf).update({start:rb(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),Ma(this,Zh,Kp).call(this),dj(this)):e===Be.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===Be.MEDIA_DURATION||e===Be.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=sa(this,Xh),this.updateBar()))}get mediaChaptersCues(){return sa(this,Xh)}set mediaChaptersCues(e){var t;Xo(this,Xh,e),this.updateSegments((t=sa(this,Xh))==null?void 0:t.map(r=>({start:rb(this,r.startTime),end:rb(this,r.endTime)})))}get mediaPaused(){return Br(this,Be.MEDIA_PAUSED)}set mediaPaused(e){$r(this,Be.MEDIA_PAUSED,e)}get mediaLoading(){return Br(this,Be.MEDIA_LOADING)}set mediaLoading(e){$r(this,Be.MEDIA_LOADING,e)}get mediaDuration(){return _i(this,Be.MEDIA_DURATION)}set mediaDuration(e){Fi(this,Be.MEDIA_DURATION,e)}get mediaCurrentTime(){return _i(this,Be.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Fi(this,Be.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return _i(this,Be.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Fi(this,Be.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(Be.MEDIA_BUFFERED);return e?e.split(" ").map(t=>t.split(":").map(r=>+r)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(Be.MEDIA_BUFFERED);return}const t=e.map(r=>r.join(":")).join(" ");this.setAttribute(Be.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(Be.MEDIA_SEEKABLE);if(e)return e.split(":").map(t=>+t)}set mediaSeekable(e){if(e==null){this.removeAttribute(Be.MEDIA_SEEKABLE);return}this.setAttribute(Be.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=(e=this.mediaSeekable)!=null?e:[];return t}get mediaPreviewImage(){return Si(this,Be.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Ai(this,Be.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return _i(this,Be.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Fi(this,Be.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return Br(this,Be.MEDIA_ENDED)}set mediaEnded(e){$r(this,Be.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let r;if(this.mediaEnded)r=1;else{const o=this.mediaCurrentTime,[,l=this.mediaSeekableStart]=(e=t.find(([d,c])=>d<=o&&o<=c))!=null?e:[];r=rb(this,l)}const{style:i}=Zi(this.shadowRoot,"#buffered");i.setProperty("width",`${r*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const t=Zi(this.shadowRoot,"#current-rail"),r=Zi(this.shadowRoot,'[part~="current-box"]'),i=Ma(this,tT,YI).call(this,sa(this,Zb)),o=Ma(this,nT,WI).call(this,i,this.range.valueAsNumber),l=Ma(this,rT,QI).call(this,i,this.range.valueAsNumber);t.style.transform=`translateX(${o})`,t.style.setProperty("--_range-width",`${i.range.width}`),r.style.setProperty("--_box-shift",`${l}`),r.style.setProperty("--_box-width",`${i.box.width}px`),r.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":Ma(this,WA,SP).call(this);break;case"pointermove":Ma(this,YA,_P).call(this,e);break;case"pointerup":case"pointerleave":Ma(this,Fv,iT).call(this,null);break;case"transitionstart":cu(e.target,this)&&setTimeout(()=>Ma(this,Zh,Kp).call(this),0);break}}}Qh=new WeakMap;pf=new WeakMap;J0=new WeakMap;dv=new WeakMap;eT=new WeakMap;Zb=new WeakMap;Mv=new WeakMap;Ov=new WeakMap;Xh=new WeakMap;Zh=new WeakSet;Kp=function(){Ma(this,KI,TP).call(this)?sa(this,pf).start():sa(this,pf).stop()};KI=new WeakSet;TP=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&kN(this)};KA=new WeakMap;tT=new WeakSet;YI=function(n){var e;const r=((e=this.getAttribute("bounds")?ng(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),i=this.range.getBoundingClientRect(),o=n.offsetWidth,l=-(i.left-r.left-o/2),d=r.right-i.left-o/2;return{box:{width:o,min:l,max:d},bounds:r,range:i}};nT=new WeakSet;WI=function(n,e){let t=`${e*100}%`;const{width:r,min:i,max:o}=n.box;if(!r)return t;if(Number.isNaN(i)||(t=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + var(--media-box-padding-left))`}, ${t})`),!Number.isNaN(o)){const d=`calc(1 / var(--_range-width) * 100 * ${o}% - var(--media-box-padding-right))`;t=`min(${t}, ${d})`}return t};rT=new WeakSet;QI=function(n,e){const{width:t,min:r,max:i}=n.box,o=e*n.range.width;if(o<r+sa(this,Mv)){const l=n.range.left-n.bounds.left-sa(this,Mv);return`${o-t/2+l}px`}if(o>i-sa(this,Ov)){const l=n.bounds.right-n.range.right-sa(this,Ov);return`${o+t/2-l-n.range.width}px`}return 0};YA=new WeakSet;_P=function(n){const e=[...sa(this,J0)].some(m=>n.composedPath().includes(m));if(!this.dragging&&(e||!n.composedPath().includes(this))){Ma(this,Fv,iT).call(this,null);return}const t=this.mediaSeekableEnd;if(!t)return;const r=Zi(this.shadowRoot,"#preview-rail"),i=Zi(this.shadowRoot,'[part~="preview-box"]'),o=Ma(this,tT,YI).call(this,sa(this,eT));let l=(n.clientX-o.range.left)/o.range.width;l=Math.max(0,Math.min(1,l));const d=Ma(this,nT,WI).call(this,o,l),c=Ma(this,rT,QI).call(this,o,l);r.style.transform=`translateX(${d})`,r.style.setProperty("--_range-width",`${o.range.width}`),i.style.setProperty("--_box-shift",`${c}`),i.style.setProperty("--_box-width",`${o.box.width}px`);const f=Math.round(sa(this,dv))-Math.round(l*t);Math.abs(f)<1&&l>.01&&l<.99||(Xo(this,dv,l*t),Ma(this,Fv,iT).call(this,sa(this,dv)))};Fv=new WeakSet;iT=function(n){this.dispatchEvent(new At.CustomEvent(Vn.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:n}))};WA=new WeakSet;SP=function(){sa(this,pf).stop();const n=AP(this);this.dispatchEvent(new At.CustomEvent(Vn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:n}))};XI.shadowRootOptions={mode:"open"};XI.getTemplateHTML=cj;At.customElements.get("media-time-range")||At.customElements.define("media-time-range",XI);const fj=1,hj=n=>n.mediaMuted?0:n.mediaVolume,mj=n=>`${Math.round(n*100)}%`;class gj extends rg{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_VOLUME,Be.MEDIA_MUTED,Be.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,t=new At.CustomEvent(Vn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",Kn("volume"))}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),(e===Be.MEDIA_VOLUME||e===Be.MEDIA_MUTED)&&(this.range.valueAsNumber=hj(this),this.range.setAttribute("aria-valuetext",mj(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return _i(this,Be.MEDIA_VOLUME,fj)}set mediaVolume(e){Fi(this,Be.MEDIA_VOLUME,e)}get mediaMuted(){return Br(this,Be.MEDIA_MUTED)}set mediaMuted(e){$r(this,Be.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Si(this,Be.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){Ai(this,Be.MEDIA_VOLUME_UNAVAILABLE,e)}}At.customElements.get("media-volume-range")||At.customElements.define("media-volume-range",gj);var wP=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},wr=(n,e,t)=>(wP(n,e,"read from private field"),t?t.call(n):e.get(n)),sl=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},iu=(n,e,t,r)=>(wP(n,e,"write to private field"),e.set(n,t),t),Jh,Jb,zc,Yp,Zu,Ju,ed,Bc,em,e0,mo;const lx=1,ux=0,pj=1,vj={processCallback(n,e,t){if(t){for(const[r,i]of e)if(r in t){const o=t[r];typeof o=="boolean"&&i instanceof _o&&typeof i.element[i.attributeName]=="boolean"?i.booleanValue=o:typeof o=="function"&&i instanceof _o?i.element[i.attributeName]=o:i.value=o}}}};class $T extends At.DocumentFragment{constructor(e,t,r=vj){var i;super(),sl(this,Jh,void 0),sl(this,Jb,void 0),this.append(e.content.cloneNode(!0)),iu(this,Jh,IP(this)),iu(this,Jb,r),(i=r.createCallback)==null||i.call(r,this,wr(this,Jh),t),r.processCallback(this,wr(this,Jh),t)}update(e){wr(this,Jb).processCallback(this,wr(this,Jh),e)}}Jh=new WeakMap;Jb=new WeakMap;const IP=(n,e=[])=>{let t,r;for(const i of n.attributes||[])if(i.value.includes("{{")){const o=new Ej;for([t,r]of cx(i.value))if(!t)o.append(r);else{const l=new _o(n,i.name,i.namespaceURI);o.append(l),e.push([r,l])}i.value=o.toString()}for(const i of n.childNodes)if(i.nodeType===lx&&!(i instanceof HTMLTemplateElement))IP(i,e);else{const o=i.data;if(i.nodeType===lx||o.includes("{{")){const l=[];if(o)for([t,r]of cx(o))if(!t)l.push(new Text(r));else{const d=new ig(n);l.push(d),e.push([r,d])}else if(i instanceof HTMLTemplateElement){const d=new xP(n,i);l.push(d),e.push([d.expression,d])}i.replaceWith(...l.flatMap(d=>d.replacementNodes||[d]))}}return e},dx={},cx=n=>{let e="",t=0,r=dx[n],i=0,o;if(r)return r;for(r=[];o=n[i];i++)o==="{"&&n[i+1]==="{"&&n[i-1]!=="\\"&&n[i+2]&&++t==1?(e&&r.push([ux,e]),e="",i++):o==="}"&&n[i+1]==="}"&&n[i-1]!=="\\"&&!--t?(r.push([pj,e.trim()]),e="",i++):e+=o||"";return e&&r.push([ux,(t>0?"{{":"")+e]),dx[n]=r},yj=11;class kP{get value(){return""}set value(e){}toString(){return this.value}}const RP=new WeakMap;class Ej{constructor(){sl(this,zc,[])}[Symbol.iterator](){return wr(this,zc).values()}get length(){return wr(this,zc).length}item(e){return wr(this,zc)[e]}append(...e){for(const t of e)t instanceof _o&&RP.set(t,this),wr(this,zc).push(t)}toString(){return wr(this,zc).join("")}}zc=new WeakMap;class _o extends kP{constructor(e,t,r){super(),sl(this,Bc),sl(this,Yp,""),sl(this,Zu,void 0),sl(this,Ju,void 0),sl(this,ed,void 0),iu(this,Zu,e),iu(this,Ju,t),iu(this,ed,r)}get attributeName(){return wr(this,Ju)}get attributeNamespace(){return wr(this,ed)}get element(){return wr(this,Zu)}get value(){return wr(this,Yp)}set value(e){wr(this,Yp)!==e&&(iu(this,Yp,e),!wr(this,Bc,em)||wr(this,Bc,em).length===1?e==null?wr(this,Zu).removeAttributeNS(wr(this,ed),wr(this,Ju)):wr(this,Zu).setAttributeNS(wr(this,ed),wr(this,Ju),e):wr(this,Zu).setAttributeNS(wr(this,ed),wr(this,Ju),wr(this,Bc,em).toString()))}get booleanValue(){return wr(this,Zu).hasAttributeNS(wr(this,ed),wr(this,Ju))}set booleanValue(e){if(!wr(this,Bc,em)||wr(this,Bc,em).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}Yp=new WeakMap;Zu=new WeakMap;Ju=new WeakMap;ed=new WeakMap;Bc=new WeakSet;em=function(){return RP.get(this)};class ig extends kP{constructor(e,t){super(),sl(this,e0,void 0),sl(this,mo,void 0),iu(this,e0,e),iu(this,mo,t?[...t]:[new Text])}get replacementNodes(){return wr(this,mo)}get parentNode(){return wr(this,e0)}get nextSibling(){return wr(this,mo)[wr(this,mo).length-1].nextSibling}get previousSibling(){return wr(this,mo)[0].previousSibling}get value(){return wr(this,mo).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const t=e.flat().flatMap(r=>r==null?[new Text]:r.forEach?[...r]:r.nodeType===yj?[...r.childNodes]:r.nodeType?[r]:[new Text(r)]);t.length||t.push(new Text),iu(this,mo,bj(wr(this,mo)[0].parentNode,wr(this,mo),t,this.nextSibling))}}e0=new WeakMap;mo=new WeakMap;class xP extends ig{constructor(e,t){const r=t.getAttribute("directive")||t.getAttribute("type");let i=t.getAttribute("expression")||t.getAttribute(r)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),this.expression=i,this.template=t,this.directive=r}}function bj(n,e,t,r=null){let i=0,o,l,d,c=t.length,f=e.length;for(;i<c&&i<f&&e[i]==t[i];)i++;for(;i<c&&i<f&&t[c-1]==e[f-1];)r=t[--f,--c];if(i==f)for(;i<c;)n.insertBefore(t[i++],r);if(i==c)for(;i<f;)n.removeChild(e[i++]);else{for(o=e[i];i<c;)d=t[i++],l=o?o.nextSibling:r,o==d?o=l:i<c&&t[i]==l?(n.replaceChild(d,o),o=l):n.insertBefore(d,o);for(;o!=r;)l=o.nextSibling,n.removeChild(o),o=l}return t}const fx={string:n=>String(n)};class CP{constructor(e){this.template=e,this.state=void 0}}const Wc=new WeakMap,Qc=new WeakMap,QA={partial:(n,e)=>{e[n.expression]=new CP(n.template)},if:(n,e)=>{var t;if(LP(n.expression,e))if(Wc.get(n)!==n.template){Wc.set(n,n.template);const r=new $T(n.template,e,ZI);n.replace(r),Qc.set(n,r)}else(t=Qc.get(n))==null||t.update(e);else n.replace(""),Wc.delete(n),Qc.delete(n)}},Tj=Object.keys(QA),ZI={processCallback(n,e,t){var r,i;if(t)for(const[o,l]of e){if(l instanceof xP){if(!l.directive){const c=Tj.find(f=>l.template.hasAttribute(f));c&&(l.directive=c,l.expression=l.template.getAttribute(c))}(r=QA[l.directive])==null||r.call(QA,l,t);continue}let d=LP(o,t);if(d instanceof CP){Wc.get(l)!==d.template?(Wc.set(l,d.template),d=new $T(d.template,d.state,ZI),l.value=d,Qc.set(l,d)):(i=Qc.get(l))==null||i.update(d.state);continue}d?(l instanceof _o&&l.attributeName.startsWith("aria-")&&(d=String(d)),l instanceof _o?typeof d=="boolean"?l.booleanValue=d:typeof d=="function"?l.element[l.attributeName]=d:l.value=d:(l.value=d,Wc.delete(l),Qc.delete(l))):l instanceof _o?l.value=void 0:(l.value=void 0,Wc.delete(l),Qc.delete(l))}}},hx={"!":n=>!n,"!!":n=>!!n,"==":(n,e)=>n==e,"!=":(n,e)=>n!=e,">":(n,e)=>n>e,">=":(n,e)=>n>=e,"<":(n,e)=>n<e,"<=":(n,e)=>n<=e,"??":(n,e)=>n??e,"|":(n,e)=>{var t;return(t=fx[e])==null?void 0:t.call(fx,n)}};function _j(n){return Sj(n,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function LP(n,e={}){var t,r,i,o,l,d,c;const f=_j(n);if(f.length===0||f.some(({type:m})=>!m))return _p(n);if(((t=f[0])==null?void 0:t.token)===">"){const m=e[(r=f[1])==null?void 0:r.token];if(!m)return _p(n);const g={...e};m.state=g;const p=f.slice(2);for(let y=0;y<p.length;y+=3){const v=(i=p[y])==null?void 0:i.token,A=(o=p[y+1])==null?void 0:o.token,I=(l=p[y+2])==null?void 0:l.token;v&&A==="="&&(g[v]=Sp(I,e))}return m}if(f.length===1)return ib(f[0])?Sp(f[0].token,e):_p(n);if(f.length===2){const m=(d=f[0])==null?void 0:d.token,g=hx[m];if(!g||!ib(f[1]))return _p(n);const p=Sp(f[1].token,e);return g(p)}if(f.length===3){const m=(c=f[1])==null?void 0:c.token,g=hx[m];if(!g||!ib(f[0])||!ib(f[2]))return _p(n);const p=Sp(f[0].token,e);if(m==="|")return g(p,f[2].token);const y=Sp(f[2].token,e);return g(p,y)}}function _p(n){return console.warn(`Warning: invalid expression \`${n}\``),!1}function ib({type:n}){return["number","boolean","string","param"].includes(n)}function Sp(n,e){const t=n[0],r=n.slice(-1);return n==="true"||n==="false"?n==="true":t===r&&["'",'"'].includes(t)?n.slice(1,-1):vN(n)?parseFloat(n):e[n]}function Sj(n,e){let t,r,i;const o=[];for(;n;){i=null,t=n.length;for(const l in e)r=e[l].exec(n),r&&r.index<t&&(i={token:r[0],type:l,matches:r.slice(1)},t=r.index);t&&o.push({token:n.substr(0,t),type:void 0}),i&&o.push(i),n=n.substr(t+(i?i.token.length:0))}return o}var JI=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},XA=(n,e,t)=>(JI(n,e,"read from private field"),t?t.call(n):e.get(n)),Ap=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Xc=(n,e,t,r)=>(JI(n,e,"write to private field"),e.set(n,t),t),uS=(n,e,t)=>(JI(n,e,"access private method"),t),ym,t0,Em,ZA,DP,n0,JA;const dS={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},NP=la.createElement("template");NP.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class jT extends At.HTMLElement{constructor(){super(),Ap(this,ZA),Ap(this,n0),Ap(this,ym,void 0),Ap(this,t0,void 0),Ap(this,Em,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(t=>{var r;this.mediaController&&!((r=this.mediaController)!=null&&r.breakpointsComputed)||t.some(i=>{const o=i.target;return o===this?!0:o.localName!=="media-controller"?!1:!!(dS[i.attributeName]||i.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(uu.BREAKPOINTS_COMPUTED,this.render),uS(this,ZA,DP).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=XA(this,ym))!=null?e:this.constructor.template}set template(e){Xc(this,Em,null),Xc(this,ym,e),this.createRenderer()}get props(){var e,t,r;const i=[...Array.from((t=(e=this.mediaController)==null?void 0:e.attributes)!=null?t:[]).filter(({name:l})=>dS[l]||l.startsWith("breakpoint")),...Array.from(this.attributes)],o={};for(const l of i){const d=(r=dS[l.name])!=null?r:F6(l.name);let{value:c}=l;c!=null?(vN(c)&&(c=parseFloat(c)),o[d]=c===""?!0:c):o[d]=!1}return o}attributeChangedCallback(e,t,r){e==="template"&&t!=r&&uS(this,n0,JA).call(this)}connectedCallback(){uS(this,n0,JA).call(this)}createRenderer(){this.template&&this.template!==XA(this,t0)&&(Xc(this,t0,this.template),this.renderer=new $T(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(NP.content.cloneNode(!0),this.renderer))}render(){var e;(e=this.renderer)==null||e.update(this.props)}}ym=new WeakMap;t0=new WeakMap;Em=new WeakMap;ZA=new WeakSet;DP=function(n){if(Object.prototype.hasOwnProperty.call(this,n)){const e=this[n];delete this[n],this[n]=e}};n0=new WeakSet;JA=function(){var n;const e=this.getAttribute("template");if(!e||e===XA(this,Em))return;const t=this.getRootNode(),r=(n=t==null?void 0:t.getElementById)==null?void 0:n.call(t,e);if(r){Xc(this,Em,e),Xc(this,ym,r),this.createRenderer();return}Aj(e)&&(Xc(this,Em,e),wj(e).then(i=>{const o=la.createElement("template");o.innerHTML=i,Xc(this,ym,o),this.createRenderer()}).catch(console.error))};jT.observedAttributes=["template"];jT.processor=ZI;function Aj(n){if(!/^(\/|\.\/|https?:\/\/)/.test(n))return!1;const e=/^https?:\/\//.test(n)?void 0:location.origin;try{new URL(n,e)}catch{return!1}return!0}async function wj(n){const e=await fetch(n);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}At.customElements.get("media-theme")||At.customElements.define("media-theme",jT);function Ij({anchor:n,floating:e,placement:t}){const r=kj({anchor:n,floating:e}),{x:i,y:o}=xj(r,t);return{x:i,y:o}}function kj({anchor:n,floating:e}){return{anchor:Rj(n,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function Rj(n,e){var t;const r=n.getBoundingClientRect(),i=(t=e==null?void 0:e.getBoundingClientRect())!=null?t:{x:0,y:0};return{x:r.x-i.x,y:r.y-i.y,width:r.width,height:r.height}}function xj({anchor:n,floating:e},t){const r=Cj(t)==="x"?"y":"x",i=r==="y"?"height":"width",o=PP(t),l=n.x+n.width/2-e.width/2,d=n.y+n.height/2-e.height/2,c=n[i]/2-e[i]/2;let f;switch(o){case"top":f={x:l,y:n.y-e.height};break;case"bottom":f={x:l,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-e.width,y:d};break;default:f={x:n.x,y:n.y}}switch(t.split("-")[1]){case"start":f[r]-=c;break;case"end":f[r]+=c;break}return f}function PP(n){return n.split("-")[0]}function Cj(n){return["top","bottom"].includes(PP(n))?"y":"x"}class ek extends Event{constructor({action:e="auto",relatedTarget:t,...r}){super("invoke",r),this.action=e,this.relatedTarget=t}}class Lj extends Event{constructor({newState:e,oldState:t,...r}){super("toggle",r),this.newState=e,this.oldState=t}}var tk=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Kr=(n,e,t)=>(tk(n,e,"read from private field"),t?t.call(n):e.get(n)),di=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Zo=(n,e,t,r)=>(tk(n,e,"write to private field"),e.set(n,t),t),yi=(n,e,t)=>(tk(n,e,"access private method"),t),Jo,vf,Md,r0,i0,yf,Uv,ew,MP,aT,a0,tw,nw,OP,rw,FP,iw,UP,bm,Tm,_m,zv,sT,nk,aw,zP,rk,BP,sw,$P,ik,jP,ow,qP,lw,HP,cv,oT,uw,GP,fv,lT,s0,dw;function eg({type:n,text:e,value:t,checked:r}){const i=la.createElement("media-chrome-menu-item");i.type=n,i.part.add("menu-item"),i.part.add(n),i.value=t,i.checked=r;const o=la.createElement("span");return o.textContent=e,i.append(o),i}function Ef(n,e){let t=n.querySelector(`:scope > [slot="${e}"]`);if((t==null?void 0:t.nodeName)=="SLOT"&&(t=t.assignedElements({flatten:!0})[0]),t)return t=t.cloneNode(!0),t;const r=n.shadowRoot.querySelector(`[name="${e}"] > svg`);return r?r.cloneNode(!0):""}function Dj(n){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));
        border-radius: var(--media-menu-border-radius);
        border: var(--media-menu-border, none);
        display: var(--media-menu-display, inline-flex);
        transition: var(--media-menu-transition-in,
          visibility 0s,
          opacity .2s ease-out,
          transform .15s ease-out,
          left .2s ease-in-out,
          min-width .2s ease-in-out,
          min-height .2s ease-in-out
        ) !important;
        
        visibility: var(--media-menu-visibility, visible);
        opacity: var(--media-menu-opacity, 1);
        max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
        transform: var(--media-menu-transform-in, translateY(0) scale(1));
        flex-direction: column;
        
        min-height: 0;
        position: relative;
        bottom: var(--_menu-bottom);
        box-sizing: border-box;
      } 

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([hidden]) {
        transition: var(--media-menu-transition-out,
          visibility .15s ease-in,
          opacity .15s ease-in,
          transform .15s ease-in
        ) !important;
        visibility: var(--media-menu-hidden-visibility, hidden);
        opacity: var(--media-menu-hidden-opacity, 0);
        max-height: var(--media-menu-hidden-max-height,
          var(--media-menu-max-height, var(--_menu-max-height, 300px)));
        transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
        pointer-events: none;
      }

      :host([slot="submenu"]) {
        background: none;
        width: 100%;
        min-height: 100%;
        position: absolute;
        bottom: 0;
        right: -100%;
      }

      #container {
        display: flex;
        flex-direction: column;
        min-height: 0;
        transition: transform .2s ease-out;
        transform: translate(0, 0);
      }

      #container.has-expanded {
        transition: transform .2s ease-in;
        transform: translate(-100%, 0);
      }

      button {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        outline: inherit;
        display: inline-flex;
        align-items: center;
      }

      slot[name="header"][hidden] {
        display: none;
      }

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .7em;
        border-bottom: 1px solid rgb(255 255 255 / .25);
        cursor: var(--media-cursor, default);
      }

      slot[name="header"] > button[part~="back"],
      slot[name="header"]::slotted(button[part~="back"]) {
        cursor: var(--media-cursor, pointer);
      }

      svg[part~="back"] {
        height: var(--media-menu-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
        margin-right: .5ch;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap);
        flex-direction: var(--media-menu-flex-direction, column);
        overflow: var(--media-menu-overflow, hidden auto);
        display: flex;
        min-height: 0;
      }

      :host([role="menu"]) slot:not([name]) {
        padding-block: .4em;
      }

      slot:not([name])::slotted([role="menu"]) {
        background: none;
      }

      media-chrome-menu-item > span {
        margin-right: .5ch;
        max-width: var(--media-menu-item-max-width);
        text-overflow: ellipsis;
        overflow: hidden;
      }
    </style>
    <style id="layout-row" media="width:0">

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .5em;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap, .25em);
        flex-direction: var(--media-menu-flex-direction, row);
        padding-inline: .5em;
      }

      media-chrome-menu-item {
        padding: .3em .5em;
      }

      media-chrome-menu-item[aria-checked="true"] {
        background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
      }

      
      media-chrome-menu-item::part(checked-indicator) {
        display: var(--media-menu-item-checked-indicator-display, none);
      }
    </style>
    <div id="container">
      <slot name="header" hidden>
        <button part="back button" aria-label="Back to previous menu">
          <slot name="back-icon">
            <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
              <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
            </svg>
          </slot>
          <slot name="title"></slot>
        </button>
      </slot>
      <slot></slot>
    </div>
    <slot name="checked-indicator" hidden></slot>
  `}const xc={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class bl extends At.HTMLElement{constructor(){if(super(),di(this,ew),di(this,a0),di(this,nw),di(this,rw),di(this,iw),di(this,_m),di(this,sT),di(this,aw),di(this,rk),di(this,sw),di(this,ik),di(this,ow),di(this,lw),di(this,cv),di(this,uw),di(this,fv),di(this,s0),di(this,Jo,null),di(this,vf,null),di(this,Md,null),di(this,r0,new Set),di(this,i0,void 0),di(this,yf,!1),di(this,Uv,null),di(this,aT,()=>{const e=Kr(this,r0),t=new Set(this.items);for(const r of e)t.has(r)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:r}));for(const r of t)e.has(r)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:r}));Zo(this,r0,t)}),di(this,bm,()=>{yi(this,_m,zv).call(this),yi(this,sT,nk).call(this,!1)}),di(this,Tm,()=>{yi(this,_m,zv).call(this)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),Zo(this,i0,new MutationObserver(Kr(this,aT))),Kr(this,i0).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[xc.DISABLED,xc.HIDDEN,xc.STYLE,xc.ANCHOR,Yr.MEDIA_CONTROLLER]}static formatMenuItemText(e,t){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":yi(this,ew,MP).call(this,e);break;case"invoke":yi(this,nw,OP).call(this,e);break;case"click":yi(this,aw,zP).call(this,e);break;case"toggle":yi(this,sw,$P).call(this,e);break;case"focusout":yi(this,ow,qP).call(this,e);break;case"keydown":yi(this,lw,HP).call(this,e);break}}connectedCallback(){var e,t;Zo(this,Uv,RN(this.shadowRoot,":host")),yi(this,a0,tw).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),Zo(this,Jo,wA(this)),(t=(e=Kr(this,Jo))==null?void 0:e.associateElement)==null||t.call(e,this),this.hidden||(Qm(Bv(this),Kr(this,bm)),Qm(this,Kr(this,Tm)))}disconnectedCallback(){var e,t;Xm(Bv(this),Kr(this,bm)),Xm(this,Kr(this,Tm)),this.disable(),(t=(e=Kr(this,Jo))==null?void 0:e.unassociateElement)==null||t.call(e,this),Zo(this,Jo,null)}attributeChangedCallback(e,t,r){var i,o,l,d;e===xc.HIDDEN&&r!==t?(Kr(this,yf)||Zo(this,yf,!0),this.hidden?yi(this,iw,UP).call(this):yi(this,rw,FP).call(this),this.dispatchEvent(new Lj({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Yr.MEDIA_CONTROLLER?(t&&((o=(i=Kr(this,Jo))==null?void 0:i.unassociateElement)==null||o.call(i,this),Zo(this,Jo,null)),r&&this.isConnected&&(Zo(this,Jo,wA(this)),(d=(l=Kr(this,Jo))==null?void 0:l.associateElement)==null||d.call(l,this))):e===xc.DISABLED&&r!==t?r==null?this.enable():this.disable():e===xc.STYLE&&r!==t&&yi(this,a0,tw).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=CT(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(Nj)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,t;return(t=(e=this.checkedItems[0])==null?void 0:e.value)!=null?t:""}set value(e){const t=this.items.find(r=>r.value===e);t&&yi(this,s0,dw).call(this,t)}focus(){if(Zo(this,vf,bI()),this.items.length){yi(this,fv,lT).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e==null||e.focus()}handleSelect(e){var t;const r=yi(this,cv,oT).call(this,e);r&&(yi(this,s0,dw).call(this,r,r.type==="checkbox"),Kr(this,Md)&&!this.hidden&&((t=Kr(this,vf))==null||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,r;const{key:i}=e,o=this.items,l=(r=(t=yi(this,cv,oT).call(this,e))!=null?t:yi(this,uw,GP).call(this))!=null?r:o[0],d=o.indexOf(l);let c=Math.max(0,d);i==="ArrowDown"?c++:i==="ArrowUp"?c--:e.key==="Home"?c=0:e.key==="End"&&(c=o.length-1),c<0&&(c=o.length-1),c>o.length-1&&(c=0),yi(this,fv,lT).call(this,o[c]),o[c].focus()}}Jo=new WeakMap;vf=new WeakMap;Md=new WeakMap;r0=new WeakMap;i0=new WeakMap;yf=new WeakMap;Uv=new WeakMap;ew=new WeakSet;MP=function(n){const e=n.target;for(const t of e.assignedNodes({flatten:!0}))t.nodeType===3&&t.textContent.trim()===""&&t.remove();if(["header","title"].includes(e.name)){const t=this.shadowRoot.querySelector('slot[name="header"]');t.hidden=e.assignedNodes().length===0}e.name||Kr(this,aT).call(this)};aT=new WeakMap;a0=new WeakSet;tw=function(){var n;const e=this.shadowRoot.querySelector("#layout-row"),t=(n=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:n.trim();e.setAttribute("media",t==="row"?"":"width:0")};nw=new WeakSet;OP=function(n){Zo(this,Md,n.relatedTarget),cu(this,n.relatedTarget)||(this.hidden=!this.hidden)};rw=new WeakSet;FP=function(){var n;(n=Kr(this,Md))==null||n.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),Qm(Bv(this),Kr(this,bm)),Qm(this,Kr(this,Tm))};iw=new WeakSet;UP=function(){var n;(n=Kr(this,Md))==null||n.setAttribute("aria-expanded","false"),Xm(Bv(this),Kr(this,bm)),Xm(this,Kr(this,Tm))};bm=new WeakMap;Tm=new WeakMap;_m=new WeakSet;zv=function(n){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:t}=Ij({anchor:this.anchorElement,floating:this,placement:"top-start"});n??(n=this.offsetWidth);const i=Bv(this).getBoundingClientRect(),o=i.width-e-n,l=i.height-t-this.offsetHeight,{style:d}=Kr(this,Uv);d.setProperty("position","absolute"),d.setProperty("right",`${Math.max(0,o)}px`),d.setProperty("--_menu-bottom",`${l}px`);const c=getComputedStyle(this),m=d.getPropertyValue("--_menu-bottom")===c.bottom?l:parseFloat(c.bottom),g=i.height-m-parseFloat(c.marginBottom);this.style.setProperty("--_menu-max-height",`${g}px`)};sT=new WeakSet;nk=function(n){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),t=e==null?void 0:e.querySelector('[role="menu"]'),{style:r}=Kr(this,Uv);if(n||r.setProperty("--media-menu-transition-in","none"),t){const i=t.offsetHeight,o=Math.max(t.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${o}px`),this.style.setProperty("min-height",`${i}px`),yi(this,_m,zv).call(this,o)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),yi(this,_m,zv).call(this);r.removeProperty("--media-menu-transition-in")};aw=new WeakSet;zP=function(n){var e;if(n.stopPropagation(),n.composedPath().includes(Kr(this,rk,BP))){(e=Kr(this,vf))==null||e.focus(),this.hidden=!0;return}const t=yi(this,cv,oT).call(this,n);!t||t.hasAttribute("disabled")||(yi(this,fv,lT).call(this,t),this.handleSelect(n))};rk=new WeakSet;BP=function(){var n;return(n=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:n.find(t=>t.matches('button[part~="back"]'))};sw=new WeakSet;$P=function(n){if(n.target===this)return;yi(this,ik,jP).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const t of e)t.invokeTargetElement!=n.target&&n.newState=="open"&&t.getAttribute("aria-expanded")=="true"&&!t.invokeTargetElement.hidden&&t.invokeTargetElement.dispatchEvent(new ek({relatedTarget:t}));for(const t of e)t.setAttribute("aria-expanded",`${!t.submenuElement.hidden}`);yi(this,sT,nk).call(this,!0)};ik=new WeakSet;jP=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};ow=new WeakSet;qP=function(n){var e;cu(this,n.relatedTarget)||(Kr(this,yf)&&((e=Kr(this,vf))==null||e.focus()),Kr(this,Md)&&Kr(this,Md)!==n.relatedTarget&&!this.hidden&&(this.hidden=!0))};lw=new WeakSet;HP=function(n){var e,t,r,i,o;const{key:l,ctrlKey:d,altKey:c,metaKey:f}=n;if(!(d||c||f)&&this.keysUsed.includes(l))if(n.preventDefault(),n.stopPropagation(),l==="Tab"){if(Kr(this,yf)){this.hidden=!0;return}n.shiftKey?(t=(e=this.previousElementSibling)==null?void 0:e.focus)==null||t.call(e):(i=(r=this.nextElementSibling)==null?void 0:r.focus)==null||i.call(r),this.blur()}else l==="Escape"?((o=Kr(this,vf))==null||o.focus(),Kr(this,yf)&&(this.hidden=!0)):l==="Enter"||l===" "?this.handleSelect(n):this.handleMove(n)};cv=new WeakSet;oT=function(n){return n.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};uw=new WeakSet;GP=function(){return this.items.find(n=>n.tabIndex===0)};fv=new WeakSet;lT=function(n){for(const e of this.items)e.tabIndex=e===n?0:-1};s0=new WeakSet;dw=function(n,e){const t=[...this.checkedItems];n.type==="radio"&&this.radioGroupItems.forEach(r=>r.checked=!1),e?n.checked=!n.checked:n.checked=!0,this.checkedItems.some((r,i)=>r!=t[i])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};bl.shadowRootOptions={mode:"open"};bl.getTemplateHTML=Dj;function Nj(n){return["menuitem","menuitemradio","menuitemcheckbox"].includes(n==null?void 0:n.role)}function Bv(n){var e;return(e=n.getAttribute("bounds")?ng(n,`#${n.getAttribute("bounds")}`):Xs(n)||n.parentElement)!=null?e:n}At.customElements.get("media-chrome-menu")||At.customElements.define("media-chrome-menu",bl);var ak=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},hl=(n,e,t)=>(ak(n,e,"read from private field"),t?t.call(n):e.get(n)),Yl=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},cS=(n,e,t,r)=>(ak(n,e,"write to private field"),e.set(n,t),t),ol=(n,e,t)=>(ak(n,e,"access private method"),t),o0,hv,cw,VP,sk,KP,ok,YP,ml,tg,$v,fw,WP,l0,hw;function Pj(n){return`
    <style>
      :host {
        transition: var(--media-menu-item-transition,
          background .15s linear,
          opacity .2s ease-in-out
        );
        outline: var(--media-menu-item-outline, 0);
        outline-offset: var(--media-menu-item-outline-offset, -1px);
        cursor: var(--media-cursor, pointer);
        display: flex;
        align-items: center;
        align-self: stretch;
        justify-self: stretch;
        white-space: nowrap;
        white-space-collapse: collapse;
        text-wrap: nowrap;
        padding: .4em .8em .4em 1em;
      }

      :host(:focus-visible) {
        box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: var(--media-menu-item-hover-outline, 0);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host(:hover) {
        cursor: var(--media-cursor, pointer);
        background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
        outline: var(--media-menu-item-hover-outline);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host([aria-checked="true"]) {
        background: var(--media-menu-item-checked-background);
      }

      :host([hidden]) {
        display: none;
      }

      :host([disabled]) {
        pointer-events: none;
        color: rgba(255, 255, 255, .3);
      }

      slot:not([name]) {
        width: 100%;
      }

      slot:not([name="submenu"]) {
        display: inline-flex;
        align-items: center;
        transition: inherit;
        opacity: var(--media-menu-item-opacity, 1);
      }

      slot[name="description"] {
        justify-content: end;
      }

      slot[name="description"] > span {
        display: inline-block;
        margin-inline: 1em .2em;
        max-width: var(--media-menu-item-description-max-width, 100px);
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: .8em;
        font-weight: 400;
        text-align: right;
        position: relative;
        top: .04em;
      }

      slot[name="checked-indicator"] {
        display: none;
      }

      :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
        display: var(--media-menu-item-checked-indicator-display, inline-block);
      }

      
      svg, img, ::slotted(svg), ::slotted(img) {
        height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
      }

      
      [part~="indicator"],
      ::slotted([part~="indicator"]) {
        fill: var(--media-menu-item-indicator-fill,
          var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
        height: var(--media-menu-item-indicator-height, 1.25em);
        margin-right: .5ch;
      }

      [part~="checked-indicator"] {
        visibility: hidden;
      }

      :host([aria-checked="true"]) [part~="checked-indicator"] {
        visibility: visible;
      }
    </style>
    <slot name="checked-indicator">
      <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
        <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
      </svg>
    </slot>
    <slot name="prefix"></slot>
    <slot></slot>
    <slot name="description"></slot>
    <slot name="suffix">
      ${this.getSuffixSlotInnerHTML(n)}
    </slot>
    <slot name="submenu"></slot>
  `}function Mj(n){return""}const js={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class ag extends At.HTMLElement{constructor(){if(super(),Yl(this,cw),Yl(this,sk),Yl(this,ok),Yl(this,tg),Yl(this,fw),Yl(this,l0),Yl(this,o0,!1),Yl(this,hv,void 0),Yl(this,ml,()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const r=this.shadowRoot.querySelector('slot[name="description"]'),i=(e=this.submenuElement.checkedItems)==null?void 0:e[0],o=(t=i==null?void 0:i.dataset.description)!=null?t:i==null?void 0:i.text,l=la.createElement("span");l.textContent=o??"",r.replaceChildren(l)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Is(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[js.TYPE,js.DISABLED,js.CHECKED,js.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),wp(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":ol(this,cw,VP).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":ol(this,fw,WP).call(this,e);break;case"keyup":ol(this,tg,$v).call(this,e);break}}attributeChangedCallback(e,t,r){e===js.CHECKED&&wp(this)&&!hl(this,o0)?this.setAttribute("aria-checked",r!=null?"true":"false"):e===js.TYPE&&r!==t?this.role="menuitem"+r:e===js.DISABLED&&r!==t&&(r==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(js.DISABLED)||this.enable(),this.role="menuitem"+this.type,cS(this,hv,mw(this,this.parentNode)),ol(this,l0,hw).call(this)}disconnectedCallback(){this.disable(),ol(this,l0,hw).call(this),cS(this,hv,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=CT(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(js.TYPE))!=null?e:""}set type(e){this.setAttribute(js.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(js.VALUE))!=null?e:this.text}set value(e){this.setAttribute(js.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(wp(this))return this.getAttribute("aria-checked")==="true"}set checked(e){wp(this)&&(cS(this,o0,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){wp(this)||this.invokeTargetElement&&cu(this,e.target)&&this.invokeTargetElement.dispatchEvent(new ek({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}o0=new WeakMap;hv=new WeakMap;cw=new WeakSet;VP=function(n){const e=n.target;if(!(e!=null&&e.name))for(const r of e.assignedNodes({flatten:!0}))r instanceof Text&&r.textContent.trim()===""&&r.remove();e.name==="submenu"&&(this.submenuElement?ol(this,sk,KP).call(this):ol(this,ok,YP).call(this))};sk=new WeakSet;KP=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",hl(this,ml)),this.submenuElement.addEventListener("addmenuitem",hl(this,ml)),this.submenuElement.addEventListener("removemenuitem",hl(this,ml)),hl(this,ml).call(this)};ok=new WeakSet;YP=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",hl(this,ml)),this.submenuElement.removeEventListener("addmenuitem",hl(this,ml)),this.submenuElement.removeEventListener("removemenuitem",hl(this,ml)),hl(this,ml).call(this)};ml=new WeakMap;tg=new WeakSet;$v=function(n){const{key:e}=n;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",ol(this,tg,$v));return}this.handleClick(n)};fw=new WeakSet;WP=function(n){const{metaKey:e,altKey:t,key:r}=n;if(e||t||!this.keysUsed.includes(r)){this.removeEventListener("keyup",ol(this,tg,$v));return}this.addEventListener("keyup",ol(this,tg,$v),{once:!0})};l0=new WeakSet;hw=function(){var n;const e=(n=hl(this,hv))==null?void 0:n.radioGroupItems;if(!e)return;let t=e.filter(r=>r.getAttribute("aria-checked")==="true").pop();t||(t=e[0]);for(const r of e)r.setAttribute("aria-checked","false");t==null||t.setAttribute("aria-checked","true")};ag.shadowRootOptions={mode:"open"};ag.getTemplateHTML=Pj;ag.getSuffixSlotInnerHTML=Mj;function wp(n){return n.type==="radio"||n.type==="checkbox"}function mw(n,e){if(!n)return null;const{host:t}=n.getRootNode();return!e&&t?mw(n,t):e!=null&&e.items?e:mw(e,e==null?void 0:e.parentNode)}At.customElements.get("media-chrome-menu-item")||At.customElements.define("media-chrome-menu-item",ag);function Oj(n){return`
    ${bl.getTemplateHTML(n)}
    <style>
      :host {
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
        min-width: var(--media-settings-menu-min-width, 170px);
        border-radius: 2px 2px 0 0;
        overflow: hidden;
      }

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([role="menu"]) {
        
        justify-content: end;
      }

      slot:not([name]) {
        justify-content: var(--media-settings-menu-justify-content);
        flex-direction: var(--media-settings-menu-flex-direction, column);
        overflow: visible;
      }

      #container.has-expanded {
        --media-settings-menu-item-opacity: 0;
      }
    </style>
  `}class QP extends bl{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Xs(this).querySelector("media-settings-menu-button")}}QP.getTemplateHTML=Oj;At.customElements.get("media-settings-menu")||At.customElements.define("media-settings-menu",QP);function Fj(n){return`
    ${ag.getTemplateHTML.call(this,n)}
    <style>
      slot:not([name="submenu"]) {
        opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
      }

      :host([aria-expanded="true"]:hover) {
        background: transparent;
      }
    </style>
  `}function Uj(n){return`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `}class qT extends ag{}qT.shadowRootOptions={mode:"open"};qT.getTemplateHTML=Fj;qT.getSuffixSlotInnerHTML=Uj;At.customElements.get("media-settings-menu-item")||At.customElements.define("media-settings-menu-item",qT);class sg extends ka{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=CT(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new ek({relatedTarget:this}))}}At.customElements.get("media-chrome-menu-button")||At.customElements.define("media-chrome-menu-button",sg);function zj(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">
      <svg aria-hidden="true" viewBox="0 0 24 24">
        <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
      </svg>
    </slot>
  `}function Bj(){return Kn("Settings")}class lk extends sg{static get observedAttributes(){return[...super.observedAttributes,"target"]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Kn("settings"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Xs(this).querySelector("media-settings-menu")}}lk.getSlotTemplateHTML=zj;lk.getTooltipContentHTML=Bj;At.customElements.get("media-settings-menu-button")||At.customElements.define("media-settings-menu-button",lk);var uk=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},XP=(n,e,t)=>(uk(n,e,"read from private field"),t?t.call(n):e.get(n)),ab=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},gw=(n,e,t,r)=>(uk(n,e,"write to private field"),e.set(n,t),t),sb=(n,e,t)=>(uk(n,e,"access private method"),t),Wp,uT,u0,pw,d0,vw;class $j extends bl{constructor(){super(...arguments),ab(this,u0),ab(this,d0),ab(this,Wp,[]),ab(this,uT,void 0)}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_AUDIO_TRACK_LIST,Be.MEDIA_AUDIO_TRACK_ENABLED,Be.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_AUDIO_TRACK_ENABLED&&t!==r?this.value=r:e===Be.MEDIA_AUDIO_TRACK_LIST&&t!==r&&(gw(this,Wp,P6(r??"")),sb(this,u0,pw).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",sb(this,d0,vw))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",sb(this,d0,vw))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=Xs(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return XP(this,Wp)}set mediaAudioTrackList(e){gw(this,Wp,e),sb(this,u0,pw).call(this)}get mediaAudioTrackEnabled(){var e;return(e=Si(this,Be.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){Ai(this,Be.MEDIA_AUDIO_TRACK_ENABLED,e)}}Wp=new WeakMap;uT=new WeakMap;u0=new WeakSet;pw=function(){if(XP(this,uT)===JSON.stringify(this.mediaAudioTrackList))return;gw(this,uT,JSON.stringify(this.mediaAudioTrackList));const n=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const e of n){const t=this.formatMenuItemText(e.label,e),r=eg({type:"radio",text:t,value:`${e.id}`,checked:e.enabled});r.prepend(Ef(this,"checked-indicator")),this.defaultSlot.append(r)}};d0=new WeakSet;vw=function(){if(this.value==null)return;const n=new At.CustomEvent(Vn.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};At.customElements.get("media-audio-track-menu")||At.customElements.define("media-audio-track-menu",$j);const jj=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`;function qj(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${jj}</slot>
  `}function Hj(){return Kn("Audio")}class dk extends sg{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_AUDIO_TRACK_ENABLED,Be.MEDIA_AUDIO_TRACK_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Kn("Audio"))}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Xs(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=Si(this,Be.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){Ai(this,Be.MEDIA_AUDIO_TRACK_ENABLED,e)}}dk.getSlotTemplateHTML=qj;dk.getTooltipContentHTML=Hj;At.customElements.get("media-audio-track-menu-button")||At.customElements.define("media-audio-track-menu-button",dk);var ck=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Gj=(n,e,t)=>(ck(n,e,"read from private field"),e.get(n)),fS=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Vj=(n,e,t,r)=>(ck(n,e,"write to private field"),e.set(n,t),t),hS=(n,e,t)=>(ck(n,e,"access private method"),t),dT,yw,ZP,c0,Ew;const Kj=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`;function Yj(n){return`
    ${bl.getTemplateHTML(n)}
    <slot name="captions-indicator" hidden>${Kj}</slot>
  `}class JP extends bl{constructor(){super(...arguments),fS(this,yw),fS(this,c0),fS(this,dT,void 0)}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_SUBTITLES_LIST,Be.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_SUBTITLES_LIST&&t!==r?hS(this,yw,ZP).call(this):e===Be.MEDIA_SUBTITLES_SHOWING&&t!==r&&(this.value=r)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",hS(this,c0,Ew))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",hS(this,c0,Ew))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Xs(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return mx(this,Be.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){gx(this,Be.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return mx(this,Be.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){gx(this,Be.MEDIA_SUBTITLES_SHOWING,e)}}dT=new WeakMap;yw=new WeakSet;ZP=function(){var n;if(Gj(this,dT)===JSON.stringify(this.mediaSubtitlesList))return;Vj(this,dT,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const e=!this.value,t=eg({type:"radio",text:this.formatMenuItemText(Kn("Off")),value:"off",checked:e});t.prepend(Ef(this,"checked-indicator")),this.defaultSlot.append(t);const r=this.mediaSubtitlesList;for(const i of r){const o=eg({type:"radio",text:this.formatMenuItemText(i.label,i),value:xA(i),checked:this.value==xA(i)});o.prepend(Ef(this,"checked-indicator")),((n=i.kind)!=null?n:"subs")==="captions"&&o.append(Ef(this,"captions-indicator")),this.defaultSlot.append(o)}};c0=new WeakSet;Ew=function(){const n=this.mediaSubtitlesShowing,e=this.getAttribute(Be.MEDIA_SUBTITLES_SHOWING),t=this.value!==e;if(n!=null&&n.length&&t&&this.dispatchEvent(new At.CustomEvent(Vn.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:n})),!this.value||!t)return;const r=new At.CustomEvent(Vn.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)};JP.getTemplateHTML=Yj;const mx=(n,e)=>{const t=n.getAttribute(e);return t?MT(t):[]},gx=(n,e,t)=>{if(!(t!=null&&t.length)){n.removeAttribute(e);return}const r=Dv(t);n.getAttribute(e)!==r&&n.setAttribute(e,r)};At.customElements.get("media-captions-menu")||At.customElements.define("media-captions-menu",JP);const Wj=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,Qj=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function Xj(){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${Wj}</slot>
      <slot name="off">${Qj}</slot>
    </slot>
  `}function Zj(){return Kn("Captions")}const px=n=>{n.setAttribute("aria-checked",UN(n).toString())};class fk extends sg{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_SUBTITLES_LIST,Be.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Kn("closed captions")),px(this)}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_SUBTITLES_SHOWING&&px(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Xs(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return vx(this,Be.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){yx(this,Be.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return vx(this,Be.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){yx(this,Be.MEDIA_SUBTITLES_SHOWING,e)}}fk.getSlotTemplateHTML=Xj;fk.getTooltipContentHTML=Zj;const vx=(n,e)=>{const t=n.getAttribute(e);return t?MT(t):[]},yx=(n,e,t)=>{if(!(t!=null&&t.length)){n.removeAttribute(e);return}const r=Dv(t);n.getAttribute(e)!==r&&n.setAttribute(e,r)};At.customElements.get("media-captions-menu-button")||At.customElements.define("media-captions-menu-button",fk);var eM=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},tm=(n,e,t)=>(eM(n,e,"read from private field"),t?t.call(n):e.get(n)),mS=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Ip=(n,e,t)=>(eM(n,e,"access private method"),t),id,Qp,f0,h0,bw;const gS={RATES:"rates"};class Jj extends bl{constructor(){super(),mS(this,Qp),mS(this,h0),mS(this,id,new SI(this,gS.RATES,{defaultValue:mP})),Ip(this,Qp,f0).call(this)}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PLAYBACK_RATE,gS.RATES]}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_PLAYBACK_RATE&&t!=r?this.value=r:e===gS.RATES&&t!=r&&(tm(this,id).value=r,Ip(this,Qp,f0).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ip(this,h0,bw))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ip(this,h0,bw))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Xs(this).querySelector("media-playback-rate-menu-button")}get rates(){return tm(this,id)}set rates(e){e?Array.isArray(e)?tm(this,id).value=e.join(" "):typeof e=="string"&&(tm(this,id).value=e):tm(this,id).value="",Ip(this,Qp,f0).call(this)}get mediaPlaybackRate(){return _i(this,Be.MEDIA_PLAYBACK_RATE,cm)}set mediaPlaybackRate(e){Fi(this,Be.MEDIA_PLAYBACK_RATE,e)}}id=new WeakMap;Qp=new WeakSet;f0=function(){this.defaultSlot.textContent="";for(const n of tm(this,id)){const e=eg({type:"radio",text:this.formatMenuItemText(`${n}x`,n),value:n,checked:this.mediaPlaybackRate===Number(n)});e.prepend(Ef(this,"checked-indicator")),this.defaultSlot.append(e)}};h0=new WeakSet;bw=function(){if(!this.value)return;const n=new At.CustomEvent(Vn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};At.customElements.get("media-playback-rate-menu")||At.customElements.define("media-playback-rate-menu",Jj);const m0=1;function eq(n){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
      
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${n.mediaplaybackrate||m0}x</slot>
  `}function tq(){return Kn("Playback rate")}class hk extends sg{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_PLAYBACK_RATE]}constructor(){var e;super(),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:m0}x`}attributeChangedCallback(e,t,r){if(super.attributeChangedCallback(e,t,r),e===Be.MEDIA_PLAYBACK_RATE){const i=r?+r:Number.NaN,o=Number.isNaN(i)?m0:i;this.container.innerHTML=`${o}x`,this.setAttribute("aria-label",Kn("Playback rate {playbackRate}",{playbackRate:o}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Xs(this).querySelector("media-playback-rate-menu")}get mediaPlaybackRate(){return _i(this,Be.MEDIA_PLAYBACK_RATE,m0)}set mediaPlaybackRate(e){Fi(this,Be.MEDIA_PLAYBACK_RATE,e)}}hk.getSlotTemplateHTML=eq;hk.getTooltipContentHTML=tq;At.customElements.get("media-playback-rate-menu-button")||At.customElements.define("media-playback-rate-menu-button",hk);var mk=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Xp=(n,e,t)=>(mk(n,e,"read from private field"),t?t.call(n):e.get(n)),ob=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Ex=(n,e,t,r)=>(mk(n,e,"write to private field"),e.set(n,t),t),Oh=(n,e,t)=>(mk(n,e,"access private method"),t),Zp,fm,nm,Jp,g0,Tw;class nq extends bl{constructor(){super(...arguments),ob(this,nm),ob(this,g0),ob(this,Zp,[]),ob(this,fm,{})}static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_RENDITION_LIST,Be.MEDIA_RENDITION_SELECTED,Be.MEDIA_RENDITION_UNAVAILABLE,Be.MEDIA_HEIGHT]}attributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),e===Be.MEDIA_RENDITION_SELECTED&&t!==r?(this.value=r??"auto",Oh(this,nm,Jp).call(this)):e===Be.MEDIA_RENDITION_LIST&&t!==r?(Ex(this,Zp,C6(r)),Oh(this,nm,Jp).call(this)):e===Be.MEDIA_HEIGHT&&t!==r&&Oh(this,nm,Jp).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Oh(this,g0,Tw))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Oh(this,g0,Tw))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Xs(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Xp(this,Zp)}set mediaRenditionList(e){Ex(this,Zp,e),Oh(this,nm,Jp).call(this)}get mediaRenditionSelected(){return Si(this,Be.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Ai(this,Be.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return _i(this,Be.MEDIA_HEIGHT)}set mediaHeight(e){Fi(this,Be.MEDIA_HEIGHT,e)}}Zp=new WeakMap;fm=new WeakMap;nm=new WeakSet;Jp=function(){if(Xp(this,fm).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Xp(this,fm).mediaHeight===this.mediaHeight)return;Xp(this,fm).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Xp(this,fm).mediaHeight=this.mediaHeight;const n=this.mediaRenditionList.sort((o,l)=>l.height-o.height);for(const o of n)o.selected=o.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const e=!this.mediaRenditionSelected;for(const o of n){const l=this.formatMenuItemText(`${Math.min(o.width,o.height)}p`,o),d=eg({type:"radio",text:l,value:`${o.id}`,checked:o.selected&&!e});d.prepend(Ef(this,"checked-indicator")),this.defaultSlot.append(d)}const t=e?this.formatMenuItemText(`${Kn("Auto")} (${this.mediaHeight}p)`):this.formatMenuItemText(Kn("Auto")),r=eg({type:"radio",text:t,value:"auto",checked:e}),i=this.mediaHeight>0?`${Kn("Auto")} (${this.mediaHeight}p)`:Kn("Auto");r.dataset.description=i,r.prepend(Ef(this,"checked-indicator")),this.defaultSlot.append(r)};g0=new WeakSet;Tw=function(){if(this.value==null)return;const n=new At.CustomEvent(Vn.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};At.customElements.get("media-rendition-menu")||At.customElements.define("media-rendition-menu",nq);const rq=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`;function iq(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${rq}</slot>
  `}function aq(){return Kn("Quality")}class gk extends sg{static get observedAttributes(){return[...super.observedAttributes,Be.MEDIA_RENDITION_SELECTED,Be.MEDIA_RENDITION_UNAVAILABLE,Be.MEDIA_HEIGHT]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Kn("quality"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Xs(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return Si(this,Be.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Ai(this,Be.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return _i(this,Be.MEDIA_HEIGHT)}set mediaHeight(e){Fi(this,Be.MEDIA_HEIGHT,e)}}gk.getSlotTemplateHTML=iq;gk.getTooltipContentHTML=aq;At.customElements.get("media-rendition-menu-button")||At.customElements.define("media-rendition-menu-button",gk);var tM=n=>{throw TypeError(n)},pk=(n,e,t)=>e.has(n)||tM("Cannot "+t),ti=(n,e,t)=>(pk(n,e,"read from private field"),t?t.call(n):e.get(n)),bo=(n,e,t)=>e.has(n)?tM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),pl=(n,e,t,r)=>(pk(n,e,"write to private field"),e.set(n,t),t),Xi=(n,e,t)=>(pk(n,e,"access private method"),t),HT=class{addEventListener(){}removeEventListener(){}dispatchEvent(n){return!0}};if(typeof DocumentFragment>"u"){class n extends HT{}globalThis.DocumentFragment=n}var vk=class extends HT{},sq=class extends HT{},oq={get(n){},define(n,e,t){},getName(n){return null},upgrade(n){},whenDefined(n){return Promise.resolve(vk)}},p0,lq=class{constructor(e,t={}){bo(this,p0),pl(this,p0,t==null?void 0:t.detail)}get detail(){return ti(this,p0)}initCustomEvent(){}};p0=new WeakMap;function uq(n,e){return new vk}var nM={document:{createElement:uq},DocumentFragment,customElements:oq,CustomEvent:lq,EventTarget:HT,HTMLElement:vk,HTMLVideoElement:sq},rM=typeof window>"u"||typeof globalThis.customElements>"u",ll=rM?nM:globalThis,yk=rM?nM.document:globalThis.document;function dq(n){let e="";return Object.entries(n).forEach(([t,r])=>{r!=null&&(e+=`${_w(t)}: ${r}; `)}),e?e.trim():void 0}function _w(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function iM(n){return n.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())}function Es(n){if(n==null)return;let e=+n;return Number.isNaN(e)?void 0:e}function aM(n){let e=cq(n).toString();return e?"?"+e:""}function cq(n){let e={};for(let t in n)n[t]!=null&&(e[t]=n[t]);return new URLSearchParams(e)}var sM=(n,e)=>!n||!e?!1:n.contains(e)?!0:sM(n,e.getRootNode().host),oM="mux.com",fq=()=>{try{return"3.5.3"}catch{}return"UNKNOWN"},hq=fq(),lM=()=>hq,mq=(n,{token:e,customDomain:t=oM,thumbnailTime:r,programTime:i}={})=>{var o;let l=e==null?r:void 0,{aud:d}=(o=pm(e))!=null?o:{};if(!(e&&d!=="t"))return`https://image.${t}/${n}/thumbnail.webp${aM({token:e,time:l,program_time:i})}`},gq=(n,{token:e,customDomain:t=oM,programStartTime:r,programEndTime:i}={})=>{var o;let{aud:l}=(o=pm(e))!=null?o:{};if(!(e&&l!=="s"))return`https://image.${t}/${n}/storyboard.vtt${aM({token:e,format:"webp",program_start_time:r,program_end_time:i})}`},Ek=n=>{if(n){if([Jr.LIVE,Jr.ON_DEMAND].includes(n))return n;if(n!=null&&n.includes("live"))return Jr.LIVE}},pq={crossorigin:"crossOrigin",playsinline:"playsInline"};function vq(n){var e;return(e=pq[n])!=null?e:iM(n)}var rm,im,ts,yq=class{constructor(e,t){bo(this,rm),bo(this,im),bo(this,ts,[]),pl(this,rm,e),pl(this,im,t)}[Symbol.iterator](){return ti(this,ts).values()}get length(){return ti(this,ts).length}get value(){var e;return(e=ti(this,ts).join(" "))!=null?e:""}set value(e){var t;e!==this.value&&(pl(this,ts,[]),this.add(...(t=e==null?void 0:e.split(" "))!=null?t:[]))}toString(){return this.value}item(e){return ti(this,ts)[e]}values(){return ti(this,ts).values()}keys(){return ti(this,ts).keys()}forEach(e){ti(this,ts).forEach(e)}add(...e){var t,r;e.forEach(i=>{this.contains(i)||ti(this,ts).push(i)}),!(this.value===""&&!((t=ti(this,rm))!=null&&t.hasAttribute(`${ti(this,im)}`)))&&((r=ti(this,rm))==null||r.setAttribute(`${ti(this,im)}`,`${this.value}`))}remove(...e){var t;e.forEach(r=>{ti(this,ts).splice(ti(this,ts).indexOf(r),1)}),(t=ti(this,rm))==null||t.setAttribute(`${ti(this,im)}`,`${this.value}`)}contains(e){return ti(this,ts).includes(e)}toggle(e,t){return typeof t<"u"?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};rm=new WeakMap,im=new WeakMap,ts=new WeakMap;var uM=`[mux-player ${lM()}]`;function tu(...n){console.warn(uM,...n)}function Vs(...n){console.error(uM,...n)}function dM(n){var e;let t=(e=n.message)!=null?e:"";n.context&&(t+=` ${n.context}`),n.file&&(t+=` ${ir("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${n.file}`),tu(t)}var Pa={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},$c={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},bx=Object.freeze({length:0,start(n){let e=n>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(n){let e=n>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),Eq=Object.values(Pa).filter(n=>Pa.PLAYSINLINE!==n),bq=Object.values($c),Tq=[...Eq,...bq],_q=class extends ll.HTMLElement{static get observedAttributes(){return Tq}constructor(){super()}attributeChangedCallback(n,e,t){var r,i;switch(n){case $c.MUTED:{this.media&&(this.media.muted=t!=null,this.media.defaultMuted=t!=null);return}case $c.VOLUME:{let o=(r=Es(t))!=null?r:1;this.media&&(this.media.volume=o);return}case $c.PLAYBACKRATE:{let o=(i=Es(t))!=null?i:1;this.media&&(this.media.playbackRate=o,this.media.defaultPlaybackRate=o);return}}}play(){var n,e;return(e=(n=this.media)==null?void 0:n.play())!=null?e:Promise.reject()}pause(){var n;(n=this.media)==null||n.pause()}load(){var n;(n=this.media)==null||n.load()}get media(){var n;return(n=this.shadowRoot)==null?void 0:n.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var n,e;return(e=(n=this.media)==null?void 0:n.paused)!=null?e:!0}get duration(){var n,e;return(e=(n=this.media)==null?void 0:n.duration)!=null?e:NaN}get ended(){var n,e;return(e=(n=this.media)==null?void 0:n.ended)!=null?e:!1}get buffered(){var n,e;return(e=(n=this.media)==null?void 0:n.buffered)!=null?e:bx}get seekable(){var n,e;return(e=(n=this.media)==null?void 0:n.seekable)!=null?e:bx}get readyState(){var n,e;return(e=(n=this.media)==null?void 0:n.readyState)!=null?e:0}get videoWidth(){var n,e;return(e=(n=this.media)==null?void 0:n.videoWidth)!=null?e:0}get videoHeight(){var n,e;return(e=(n=this.media)==null?void 0:n.videoHeight)!=null?e:0}get currentSrc(){var n,e;return(e=(n=this.media)==null?void 0:n.currentSrc)!=null?e:""}get currentTime(){var n,e;return(e=(n=this.media)==null?void 0:n.currentTime)!=null?e:0}set currentTime(n){this.media&&(this.media.currentTime=Number(n))}get volume(){var n,e;return(e=(n=this.media)==null?void 0:n.volume)!=null?e:1}set volume(n){this.media&&(this.media.volume=Number(n))}get playbackRate(){var n,e;return(e=(n=this.media)==null?void 0:n.playbackRate)!=null?e:1}set playbackRate(n){this.media&&(this.media.playbackRate=Number(n))}get defaultPlaybackRate(){var n;return(n=Es(this.getAttribute($c.PLAYBACKRATE)))!=null?n:1}set defaultPlaybackRate(n){n!=null?this.setAttribute($c.PLAYBACKRATE,`${n}`):this.removeAttribute($c.PLAYBACKRATE)}get crossOrigin(){return kp(this,Pa.CROSSORIGIN)}set crossOrigin(n){this.setAttribute(Pa.CROSSORIGIN,`${n}`)}get autoplay(){return kp(this,Pa.AUTOPLAY)!=null}set autoplay(n){n?this.setAttribute(Pa.AUTOPLAY,typeof n=="string"?n:""):this.removeAttribute(Pa.AUTOPLAY)}get loop(){return kp(this,Pa.LOOP)!=null}set loop(n){n?this.setAttribute(Pa.LOOP,""):this.removeAttribute(Pa.LOOP)}get muted(){var n,e;return(e=(n=this.media)==null?void 0:n.muted)!=null?e:!1}set muted(n){this.media&&(this.media.muted=!!n)}get defaultMuted(){return kp(this,Pa.MUTED)!=null}set defaultMuted(n){n?this.setAttribute(Pa.MUTED,""):this.removeAttribute(Pa.MUTED)}get playsInline(){return kp(this,Pa.PLAYSINLINE)!=null}set playsInline(n){Vs("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(n){["","none","metadata","auto"].includes(n)?this.setAttribute(Pa.PRELOAD,n):this.removeAttribute(Pa.PRELOAD)}};function kp(n,e){return n.media?n.media.getAttribute(e):n.getAttribute(e)}var Tx=_q,Sq=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  line-height: 0;
  width: 100%;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,Rp=new WeakMap,Aq=class cM{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let r=Rp.get(this.element);r&&r.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let t=Rp.get(this.element);t&&t.delete(this.type)}}static for(e){Rp.has(e.element)||Rp.set(e.element,new Map);let t=e.attributeName.slice(2),r=Rp.get(e.element);return r&&r.has(t)?r.get(t):new cM(e.element,t)}};function wq(n,e){return n instanceof _o&&n.attributeName.startsWith("on")?(Aq.for(n).set(e),n.element.removeAttributeNS(n.attributeNamespace,n.attributeName),!0):!1}function Iq(n,e){return e instanceof fM&&n instanceof ig?(e.renderInto(n),!0):!1}function kq(n,e){return e instanceof DocumentFragment&&n instanceof ig?(e.childNodes.length&&n.replace(...e.childNodes),!0):!1}function Rq(n,e){if(n instanceof _o){let t=n.attributeNamespace,r=n.element.getAttributeNS(t,n.attributeName);return String(e)!==r&&(n.value=String(e)),!0}return n.value=String(e),!0}function xq(n,e){if(n instanceof _o&&e instanceof Element){let t=n.element;return t[n.attributeName]!==e&&(n.element.removeAttributeNS(n.attributeNamespace,n.attributeName),t[n.attributeName]=e),!0}return!1}function Cq(n,e){if(typeof e=="boolean"&&n instanceof _o){let t=n.attributeNamespace,r=n.element.hasAttributeNS(t,n.attributeName);return e!==r&&(n.booleanValue=e),!0}return!1}function Lq(n,e){return e===!1&&n instanceof ig?(n.replace(""),!0):!1}function Dq(n,e){xq(n,e)||Cq(n,e)||wq(n,e)||Lq(n,e)||Iq(n,e)||kq(n,e)||Rq(n,e)}var pS=new Map,_x=new WeakMap,Sx=new WeakMap,fM=class{constructor(e,t,r){this.strings=e,this.values=t,this.processor=r,this.stringsKey=this.strings.join("")}get template(){if(pS.has(this.stringsKey))return pS.get(this.stringsKey);{let e=yk.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce((r,i,o)=>r+i+(o<t?`{{ ${o} }}`:""),""),pS.set(this.stringsKey,e),e}}renderInto(e){var t;let r=this.template;if(_x.get(e)!==r){_x.set(e,r);let o=new $T(r,this.values,this.processor);Sx.set(e,o),e instanceof ig?e.replace(...o.children):e.appendChild(o);return}let i=Sx.get(e);(t=i==null?void 0:i.update)==null||t.call(i,this.values)}},Nq={processCallback(n,e,t){var r;if(t){for(let[i,o]of e)if(i in t){let l=(r=t[i])!=null?r:"";Dq(o,l)}}}};function v0(n,...e){return new fM(n,e,Nq)}function Pq(n,e){n.renderInto(e)}var Mq=n=>{let{tokens:e}=n;return e.drm?":host(:not([cast-receiver])) { --_cast-button-drm-display: none; }":""},Oq=n=>v0`
  <style>
    ${Mq(n)}
    ${Sq}
  </style>
  ${Bq(n)}
`,Fq=n=>{let e=n.hotKeys?`${n.hotKeys}`:"";return Ek(n.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},Uq={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},zq=Object.values(Uq).join(", "),Bq=n=>{var e,t,r,i,o,l,d,c,f,m,g,p,y,v,A,I,P,U,M,B,ie,L,w,O,oe,D,ve,Le,te,$e,Ue,Re,Xe,Ye,Ze;return v0`
  <media-theme
    template="${n.themeTemplate||!1}"
    defaultstreamtype="${(e=n.defaultStreamType)!=null?e:!1}"
    hotkeys="${Fq(n)||!1}"
    nohotkeys="${n.noHotKeys||!n.hasSrc||!1}"
    noautoseektolive="${!!((t=n.streamType)!=null&&t.includes(Jr.LIVE))&&n.targetLiveWindow!==0}"
    novolumepref="${n.novolumepref||!1}"
    disabled="${!n.hasSrc||n.isDialogOpen}"
    audio="${(r=n.audio)!=null?r:!1}"
    style="${(i=dq({"--media-primary-color":n.primaryColor,"--media-secondary-color":n.secondaryColor,"--media-accent-color":n.accentColor}))!=null?i:!1}"
    defaultsubtitles="${!n.defaultHiddenCaptions}"
    forwardseekoffset="${(o=n.forwardSeekOffset)!=null?o:!1}"
    backwardseekoffset="${(l=n.backwardSeekOffset)!=null?l:!1}"
    playbackrates="${(d=n.playbackRates)!=null?d:!1}"
    defaultshowremainingtime="${(c=n.defaultShowRemainingTime)!=null?c:!1}"
    defaultduration="${(f=n.defaultDuration)!=null?f:!1}"
    hideduration="${(m=n.hideDuration)!=null?m:!1}"
    title="${(g=n.title)!=null?g:!1}"
    videotitle="${(p=n.videoTitle)!=null?p:!1}"
    proudlydisplaymuxbadge="${(y=n.proudlyDisplayMuxBadge)!=null?y:!1}"
    exportparts="${zq}"
    onclose="${n.onCloseErrorDialog}"
    onfocusin="${n.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      target-live-window="${(v=n.targetLiveWindow)!=null?v:!1}"
      stream-type="${(A=Ek(n.streamType))!=null?A:!1}"
      crossorigin="${(I=n.crossOrigin)!=null?I:""}"
      playsinline
      autoplay="${(P=n.autoplay)!=null?P:!1}"
      muted="${(U=n.muted)!=null?U:!1}"
      loop="${(M=n.loop)!=null?M:!1}"
      preload="${(B=n.preload)!=null?B:!1}"
      debug="${(ie=n.debug)!=null?ie:!1}"
      prefer-cmcd="${(L=n.preferCmcd)!=null?L:!1}"
      disable-tracking="${(w=n.disableTracking)!=null?w:!1}"
      disable-cookies="${(O=n.disableCookies)!=null?O:!1}"
      prefer-playback="${(oe=n.preferPlayback)!=null?oe:!1}"
      start-time="${n.startTime!=null?n.startTime:!1}"
      beacon-collection-domain="${(D=n.beaconCollectionDomain)!=null?D:!1}"
      player-init-time="${(ve=n.playerInitTime)!=null?ve:!1}"
      player-software-name="${(Le=n.playerSoftwareName)!=null?Le:!1}"
      player-software-version="${(te=n.playerSoftwareVersion)!=null?te:!1}"
      env-key="${($e=n.envKey)!=null?$e:!1}"
      custom-domain="${(Ue=n.customDomain)!=null?Ue:!1}"
      src="${n.src?n.src:n.playbackId?yA(n):!1}"
      cast-src="${n.src?n.src:n.playbackId?yA(n):!1}"
      cast-receiver="${(Re=n.castReceiver)!=null?Re:!1}"
      drm-token="${(Ye=(Xe=n.tokens)==null?void 0:Xe.drm)!=null?Ye:!1}"
      exportparts="video"
    >
      ${n.storyboard?v0`<track label="thumbnails" default kind="metadata" src="${n.storyboard}" />`:v0``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${n.poster?n.poster:!1}"
        placeholdersrc="${(Ze=n.placeholder)!=null?Ze:!1}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},hM=n=>n.charAt(0).toUpperCase()+n.slice(1),$q=(n,e=!1)=>{var t,r;if(n.muxCode){let i=hM((t=n.errorCategory)!=null?t:"video"),o=IT((r=n.errorCategory)!=null?r:Ei.VIDEO);if(n.muxCode===or.NETWORK_OFFLINE)return ir("Your device appears to be offline",e);if(n.muxCode===or.NETWORK_TOKEN_EXPIRED)return ir("{category} URL has expired",e).format({category:i});if([or.NETWORK_TOKEN_SUB_MISMATCH,or.NETWORK_TOKEN_AUD_MISMATCH,or.NETWORK_TOKEN_AUD_MISSING,or.NETWORK_TOKEN_MALFORMED].includes(n.muxCode))return ir("{category} URL is formatted incorrectly",e).format({category:i});if(n.muxCode===or.NETWORK_TOKEN_MISSING)return ir("Invalid {categoryName} URL",e).format({categoryName:o});if(n.muxCode===or.NETWORK_NOT_FOUND)return ir("{category} does not exist",e).format({category:i});if(n.muxCode===or.NETWORK_NOT_READY){let l=n.streamType==="live"?"Live stream":"Video";return ir("{mediaType} is not currently available",e).format({mediaType:l})}}if(n.code){if(n.code===Un.MEDIA_ERR_NETWORK)return ir("Network Error",e);if(n.code===Un.MEDIA_ERR_DECODE)return ir("Media Error",e);if(n.code===Un.MEDIA_ERR_SRC_NOT_SUPPORTED)return ir("Source Not Supported",e)}return ir("Error",e)},jq=(n,e=!1)=>{var t,r;if(n.muxCode){let i=hM((t=n.errorCategory)!=null?t:"video"),o=IT((r=n.errorCategory)!=null?r:Ei.VIDEO);return n.muxCode===or.NETWORK_OFFLINE?ir("Check your internet connection and try reloading this video.",e):n.muxCode===or.NETWORK_TOKEN_EXPIRED?ir("The video’s secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:o}):n.muxCode===or.NETWORK_TOKEN_SUB_MISMATCH?ir("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:o}):n.muxCode===or.NETWORK_TOKEN_MALFORMED?ir("{category} URL is formatted incorrectly",e).format({category:i}):[or.NETWORK_TOKEN_AUD_MISMATCH,or.NETWORK_TOKEN_AUD_MISSING].includes(n.muxCode)?ir("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:o}):[or.NETWORK_TOKEN_MISSING,or.NETWORK_INVALID_URL].includes(n.muxCode)?ir("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:o}):n.muxCode===or.NETWORK_NOT_FOUND?"":n.message}return n.code&&(n.code===Un.MEDIA_ERR_NETWORK||n.code===Un.MEDIA_ERR_DECODE||(n.code,Un.MEDIA_ERR_SRC_NOT_SUPPORTED)),n.message},qq=(n,e=!1)=>{let t=$q(n,e).toString(),r=jq(n,e).toString();return{title:t,message:r}},Hq=n=>{if(n.muxCode){if(n.muxCode===or.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(n.muxCode===or.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([or.NETWORK_TOKEN_AUD_MISMATCH,or.NETWORK_TOKEN_AUD_MISSING].includes(n.muxCode))return"403-incorrect-aud-value.md";if(n.muxCode===or.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(n.muxCode===or.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(n.muxCode===or.NETWORK_NOT_FOUND)return"404-not-found.md";if(n.muxCode===or.NETWORK_NOT_READY)return"412-not-playable.md"}if(n.code){if(n.code===Un.MEDIA_ERR_NETWORK)return"";if(n.code===Un.MEDIA_ERR_DECODE)return"media-decode-error.md";if(n.code===Un.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},Ax=(n,e)=>{let t=Hq(n);return{message:n.message,context:n.context,file:t}},Gq=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    media-rendition-menu {
      min-width: 140px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps:
        hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%, hsl(0 0% 0% / 0.104) 22.5%,
        hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%, hsl(0 0% 0% / 0.45) 47.1%,
        hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%, hsl(0 0% 0% / 0.825) 71%,
        hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%, hsl(0 0% 0%) 100%;
    }

    :host([title]:not([audio])) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-error-dialog:not([mediaerrorcode]) {
      opacity: 0;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }

    [part='mux-badge'] {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 2;
      opacity: 0.6;
      transition:
        opacity 0.2s ease-in-out,
        bottom 0.2s ease-in-out;
    }

    [part='mux-badge']:hover {
      opacity: 1;
    }

    [part='mux-badge'] a {
      font-size: 14px;
      font-family: var(--_font-family);
      color: var(--_primary-color);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    [part='mux-badge'] .mux-badge-text {
      transition: opacity 0.5s ease-in-out;
      opacity: 0;
    }

    [part='mux-badge'] .mux-badge-logo {
      width: 40px;
      height: auto;
      display: inline-block;
    }

    [part='mux-badge'] .mux-badge-logo svg {
      width: 100%;
      height: 100%;
      fill: white;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'],
    media-controller:not([userinactive]) [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      transition: bottom 0.1s ease-in-out;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      transition: bottom 0.2s ease-in-out 0.62s;
    }

    media-controller:not([userinactive]) [part='mux-badge'] .mux-badge-text,
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] .mux-badge-text {
      opacity: 1;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] .mux-badge-text {
      opacity: 0;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive])[mediahasplayed] [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);
    }
  </style>

  <template partial="TitleDisplay">
    <template if="videotitle">
      <template if="videotitle != true">
        <media-text-display part="top title display" class="title-display">{{videotitle}}</media-text-display>
      </template>
    </template>
    <template if="!videotitle">
      <template if="title">
        <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
      </template>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            opacity: 0;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <template partial="MuxBadge">
    <div part="mux-badge">
      <a href="https://www.mux.com/player" target="_blank">
        <span class="mux-badge-text">Powered by</span>
        <div class="mux-badge-logo">
          <svg
            viewBox="0 0 1600 500"
            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"
          >
            <g>
              <path
                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"
                style="fill-rule: nonzero"
              ></path>
            </g>
          </svg>
        </div>
      </a>
    </div>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>
    <media-error-dialog slot="dialog" noautohide></media-error-dialog>

    <template if="!audio">
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Mux Badge -->
      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,Sw=yk.createElement("template");"innerHTML"in Sw&&(Sw.innerHTML=Gq);var wx,Ix,mM=class extends jT{};mM.template=(Ix=(wx=Sw.content)==null?void 0:wx.children)==null?void 0:Ix[0];ll.customElements.get("media-theme-gerwig")||ll.customElements.define("media-theme-gerwig",mM);var Vq="gerwig",Ql={SRC:"src",POSTER:"poster"},Tn={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",VIDEO_TITLE:"video-title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge"},Aw=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","videotitle","novolumepref","proudlydisplaymuxbadge"];function Kq(n,e){var t,r;return{src:!n.playbackId&&n.src,playbackId:n.playbackId,hasSrc:!!n.playbackId||!!n.src||!!n.currentSrc,poster:n.poster,storyboard:n.storyboard,storyboardSrc:n.getAttribute(Tn.STORYBOARD_SRC),placeholder:n.getAttribute("placeholder"),themeTemplate:Wq(n),thumbnailTime:!n.tokens.thumbnail&&n.thumbnailTime,autoplay:n.autoplay,crossOrigin:n.crossOrigin,loop:n.loop,noHotKeys:n.hasAttribute(Tn.NOHOTKEYS),hotKeys:n.getAttribute(Tn.HOTKEYS),muted:n.muted,paused:n.paused,preload:n.preload,envKey:n.envKey,preferCmcd:n.preferCmcd,debug:n.debug,disableTracking:n.disableTracking,disableCookies:n.disableCookies,tokens:n.tokens,beaconCollectionDomain:n.beaconCollectionDomain,maxResolution:n.maxResolution,minResolution:n.minResolution,programStartTime:n.programStartTime,programEndTime:n.programEndTime,assetStartTime:n.assetStartTime,assetEndTime:n.assetEndTime,renditionOrder:n.renditionOrder,metadata:n.metadata,playerInitTime:n.playerInitTime,playerSoftwareName:n.playerSoftwareName,playerSoftwareVersion:n.playerSoftwareVersion,startTime:n.startTime,preferPlayback:n.preferPlayback,audio:n.audio,defaultStreamType:n.defaultStreamType,targetLiveWindow:n.getAttribute(Lt.TARGET_LIVE_WINDOW),streamType:Ek(n.getAttribute(Lt.STREAM_TYPE)),primaryColor:n.getAttribute(Tn.PRIMARY_COLOR),secondaryColor:n.getAttribute(Tn.SECONDARY_COLOR),accentColor:n.getAttribute(Tn.ACCENT_COLOR),forwardSeekOffset:n.forwardSeekOffset,backwardSeekOffset:n.backwardSeekOffset,defaultHiddenCaptions:n.defaultHiddenCaptions,defaultDuration:n.defaultDuration,defaultShowRemainingTime:n.defaultShowRemainingTime,hideDuration:Qq(n),playbackRates:n.getAttribute(Tn.PLAYBACK_RATES),customDomain:(t=n.getAttribute(Lt.CUSTOM_DOMAIN))!=null?t:void 0,title:n.getAttribute(Tn.TITLE),videoTitle:(r=n.getAttribute(Tn.VIDEO_TITLE))!=null?r:n.getAttribute(Tn.TITLE),novolumepref:n.hasAttribute(Tn.NO_VOLUME_PREF),proudlyDisplayMuxBadge:n.hasAttribute(Tn.PROUDLY_DISPLAY_MUX_BADGE),castReceiver:n.castReceiver,...e,extraSourceParams:n.extraSourceParams}}var Yq=dP.formatErrorMessage;dP.formatErrorMessage=n=>{var e,t;if(n instanceof Un){let r=qq(n,!1);return`
      ${r!=null&&r.title?`<h3>${r.title}</h3>`:""}
      ${r!=null&&r.message||r!=null&&r.linkUrl?`<p>
        ${r==null?void 0:r.message}
        ${r!=null&&r.linkUrl?`<a
              href="${r.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(e=r.linkText)!=null?e:""} ${ir("(opens in a new window)")}"
              >${(t=r.linkText)!=null?t:r.linkUrl}</a
            >`:""}
      </p>`:""}
    `}return Yq(n)};function Wq(n){var e,t;let r=n.theme;if(r){let i=(t=(e=n.getRootNode())==null?void 0:e.getElementById)==null?void 0:t.call(e,r);if(i&&i instanceof HTMLTemplateElement)return i;r.startsWith("media-theme-")||(r=`media-theme-${r}`);let o=ll.customElements.get(r);if(o!=null&&o.template)return o.template}}function Qq(n){var e;let t=(e=n.mediaController)==null?void 0:e.querySelector("media-time-display");return t&&getComputedStyle(t).getPropertyValue("--media-duration-display-display").trim()==="none"}function kx(n){let e=n.videoTitle?{video_title:n.videoTitle}:{};return n.getAttributeNames().filter(t=>t.startsWith("metadata-")).reduce((t,r)=>{let i=n.getAttribute(r);return i!==null&&(t[r.replace(/^metadata-/,"").replace(/-/g,"_")]=i),t},e)}var Xq=Object.values(Lt),Zq=Object.values(Ql),Jq=Object.values(Tn),Rx=lM(),xx="mux-player",Cx={isDialogOpen:!1},eH={redundant_streams:!0},y0,E0,b0,jc,T0,Sm,Pi,td,gM,ww,qc,Lx,Dx,Nx,Px,tH=class extends Tx{constructor(){super(),bo(this,Pi),bo(this,y0),bo(this,E0,!1),bo(this,b0,{}),bo(this,jc,!0),bo(this,T0,new yq(this,"hotkeys")),bo(this,Sm,{...Cx,onCloseErrorDialog:n=>{var e;((e=n.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&Xi(this,Pi,ww).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:n=>{var e;((e=n.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&(sM(this,yk.activeElement)||n.preventDefault())}}),pl(this,y0,RT()),this.attachShadow({mode:"open"}),Xi(this,Pi,gM).call(this),this.isConnected&&Xi(this,Pi,td).call(this)}static get NAME(){return xx}static get VERSION(){return Rx}static get observedAttributes(){var n;return[...(n=Tx.observedAttributes)!=null?n:[],...Zq,...Xq,...Jq]}get mediaTheme(){var n;return(n=this.shadowRoot)==null?void 0:n.querySelector("media-theme")}get mediaController(){var n,e;return(e=(n=this.mediaTheme)==null?void 0:n.shadowRoot)==null?void 0:e.querySelector("media-controller")}connectedCallback(){let n=this.media;n&&(n.metadata=kx(this))}attributeChangedCallback(n,e,t){switch(Xi(this,Pi,td).call(this),super.attributeChangedCallback(n,e,t),n){case Tn.HOTKEYS:ti(this,T0).value=t;break;case Tn.THUMBNAIL_TIME:{t!=null&&this.tokens.thumbnail&&tu(ir("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").toString());break}case Tn.THUMBNAIL_TOKEN:{if(t){let r=pm(t);if(r){let{aud:i}=r,o=sv.THUMBNAIL;i!==o&&tu(ir("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:o,tokenNamePrefix:"thumbnail"}))}}break}case Tn.STORYBOARD_TOKEN:{if(t){let r=pm(t);if(r){let{aud:i}=r,o=sv.STORYBOARD;i!==o&&tu(ir("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:o,tokenNamePrefix:"storyboard"}))}}break}case Tn.DRM_TOKEN:{if(t){let r=pm(t);if(r){let{aud:i}=r,o=sv.DRM;i!==o&&tu(ir("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:o,tokenNamePrefix:"drm"}))}}break}case Lt.PLAYBACK_ID:{t!=null&&t.includes("?token")&&Vs(ir("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:t}));break}case Lt.STREAM_TYPE:t&&![Jr.LIVE,Jr.ON_DEMAND,Jr.UNKNOWN].includes(t)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=t.includes("dvr")?Number.POSITIVE_INFINITY:0:dM({file:"invalid-stream-type.md",message:ir("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):t===Jr.LIVE?this.getAttribute(Tn.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[Lt.PLAYBACK_ID,Ql.SRC,Tn.PLAYBACK_TOKEN].includes(n)&&e!==t&&pl(this,Sm,{...ti(this,Sm),...Cx}),Xi(this,Pi,qc).call(this,{[vq(n)]:t})}async requestFullscreen(n){var e;if(!(!this.mediaController||this.mediaController.hasAttribute(Be.MEDIA_IS_FULLSCREEN)))return(e=this.mediaController)==null||e.dispatchEvent(new ll.CustomEvent(Vn.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((t,r)=>{var i;(i=this.mediaController)==null||i.addEventListener(uu.MEDIA_IS_FULLSCREEN,()=>t(),{once:!0})})}async exitFullscreen(){var n;if(!(!this.mediaController||!this.mediaController.hasAttribute(Be.MEDIA_IS_FULLSCREEN)))return(n=this.mediaController)==null||n.dispatchEvent(new ll.CustomEvent(Vn.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((e,t)=>{var r;(r=this.mediaController)==null||r.addEventListener(uu.MEDIA_IS_FULLSCREEN,()=>e(),{once:!0})})}get preferCmcd(){var n;return(n=this.getAttribute(Lt.PREFER_CMCD))!=null?n:void 0}set preferCmcd(n){n!==this.preferCmcd&&(n?H0.includes(n)?this.setAttribute(Lt.PREFER_CMCD,n):tu(`Invalid value for preferCmcd. Must be one of ${H0.join()}`):this.removeAttribute(Lt.PREFER_CMCD))}get hasPlayed(){var n,e;return(e=(n=this.mediaController)==null?void 0:n.hasAttribute(Be.MEDIA_HAS_PLAYED))!=null?e:!1}get inLiveWindow(){var n;return(n=this.mediaController)==null?void 0:n.hasAttribute(Be.MEDIA_TIME_IS_LIVE)}get _hls(){var n;return(n=this.media)==null?void 0:n._hls}get mux(){var n;return(n=this.media)==null?void 0:n.mux}get theme(){var n;return(n=this.getAttribute(Tn.THEME))!=null?n:Vq}set theme(n){this.setAttribute(Tn.THEME,`${n}`)}get themeProps(){let n=this.mediaTheme;if(!n)return;let e={};for(let t of n.getAttributeNames()){if(Aw.includes(t))continue;let r=n.getAttribute(t);e[iM(t)]=r===""?!0:r}return e}set themeProps(n){var e,t;Xi(this,Pi,td).call(this);let r={...this.themeProps,...n};for(let i in r){if(Aw.includes(i))continue;let o=n==null?void 0:n[i];typeof o=="boolean"||o==null?(e=this.mediaTheme)==null||e.toggleAttribute(_w(i),!!o):(t=this.mediaTheme)==null||t.setAttribute(_w(i),o)}}get playbackId(){var n;return(n=this.getAttribute(Lt.PLAYBACK_ID))!=null?n:void 0}set playbackId(n){n?this.setAttribute(Lt.PLAYBACK_ID,n):this.removeAttribute(Lt.PLAYBACK_ID)}get src(){var n,e;return this.playbackId?(n=Cc(this,Ql.SRC))!=null?n:void 0:(e=this.getAttribute(Ql.SRC))!=null?e:void 0}set src(n){n?this.setAttribute(Ql.SRC,n):this.removeAttribute(Ql.SRC)}get poster(){var n;let e=this.getAttribute(Ql.POSTER);if(e!=null)return e;let{tokens:t}=this;if(t.playback&&!t.thumbnail){tu("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return mq(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(n=this.thumbnailTime)!=null?n:this.startTime,programTime:this.programStartTime,token:t.thumbnail})}set poster(n){n||n===""?this.setAttribute(Ql.POSTER,n):this.removeAttribute(Ql.POSTER)}get storyboardSrc(){var n;return(n=this.getAttribute(Tn.STORYBOARD_SRC))!=null?n:void 0}set storyboardSrc(n){n?this.setAttribute(Tn.STORYBOARD_SRC,n):this.removeAttribute(Tn.STORYBOARD_SRC)}get storyboard(){let{tokens:n}=this;if(this.storyboardSrc&&!n.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[Jr.LIVE,Jr.UNKNOWN].includes(this.streamType)||n.playback&&!n.storyboard))return gq(this.playbackId,{customDomain:this.customDomain,token:n.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(Tn.AUDIO)}set audio(n){if(!n){this.removeAttribute(Tn.AUDIO);return}this.setAttribute(Tn.AUDIO,"")}get hotkeys(){return ti(this,T0)}get nohotkeys(){return this.hasAttribute(Tn.NOHOTKEYS)}set nohotkeys(n){if(!n){this.removeAttribute(Tn.NOHOTKEYS);return}this.setAttribute(Tn.NOHOTKEYS,"")}get thumbnailTime(){return Es(this.getAttribute(Tn.THUMBNAIL_TIME))}set thumbnailTime(n){this.setAttribute(Tn.THUMBNAIL_TIME,`${n}`)}get videoTitle(){var n,e;return(e=(n=this.getAttribute(Tn.VIDEO_TITLE))!=null?n:this.getAttribute(Tn.TITLE))!=null?e:""}set videoTitle(n){n!==this.videoTitle&&(n?this.setAttribute(Tn.VIDEO_TITLE,n):this.removeAttribute(Tn.VIDEO_TITLE))}get placeholder(){var n;return(n=Cc(this,Tn.PLACEHOLDER))!=null?n:""}set placeholder(n){this.setAttribute(Tn.PLACEHOLDER,`${n}`)}get primaryColor(){var n,e;let t=this.getAttribute(Tn.PRIMARY_COLOR);if(t!=null||this.mediaTheme&&(t=(e=(n=ll.getComputedStyle(this.mediaTheme))==null?void 0:n.getPropertyValue("--_primary-color"))==null?void 0:e.trim(),t))return t}set primaryColor(n){this.setAttribute(Tn.PRIMARY_COLOR,`${n}`)}get secondaryColor(){var n,e;let t=this.getAttribute(Tn.SECONDARY_COLOR);if(t!=null||this.mediaTheme&&(t=(e=(n=ll.getComputedStyle(this.mediaTheme))==null?void 0:n.getPropertyValue("--_secondary-color"))==null?void 0:e.trim(),t))return t}set secondaryColor(n){this.setAttribute(Tn.SECONDARY_COLOR,`${n}`)}get accentColor(){var n,e;let t=this.getAttribute(Tn.ACCENT_COLOR);if(t!=null||this.mediaTheme&&(t=(e=(n=ll.getComputedStyle(this.mediaTheme))==null?void 0:n.getPropertyValue("--_accent-color"))==null?void 0:e.trim(),t))return t}set accentColor(n){this.setAttribute(Tn.ACCENT_COLOR,`${n}`)}get defaultShowRemainingTime(){return this.hasAttribute(Tn.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(n){n?this.setAttribute(Tn.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(Tn.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(Tn.PLAYBACK_RATES))return this.getAttribute(Tn.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(n=>Number(n)).filter(n=>!Number.isNaN(n)).sort((n,e)=>n-e)}set playbackRates(n){if(!n){this.removeAttribute(Tn.PLAYBACK_RATES);return}this.setAttribute(Tn.PLAYBACK_RATES,n.join(" "))}get forwardSeekOffset(){var n;return(n=Es(this.getAttribute(Tn.FORWARD_SEEK_OFFSET)))!=null?n:10}set forwardSeekOffset(n){this.setAttribute(Tn.FORWARD_SEEK_OFFSET,`${n}`)}get backwardSeekOffset(){var n;return(n=Es(this.getAttribute(Tn.BACKWARD_SEEK_OFFSET)))!=null?n:10}set backwardSeekOffset(n){this.setAttribute(Tn.BACKWARD_SEEK_OFFSET,`${n}`)}get defaultHiddenCaptions(){return this.hasAttribute(Tn.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(n){n?this.setAttribute(Tn.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(Tn.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return Es(this.getAttribute(Tn.DEFAULT_DURATION))}set defaultDuration(n){n==null?this.removeAttribute(Tn.DEFAULT_DURATION):this.setAttribute(Tn.DEFAULT_DURATION,`${n}`)}get playerInitTime(){return this.hasAttribute(Lt.PLAYER_INIT_TIME)?Es(this.getAttribute(Lt.PLAYER_INIT_TIME)):ti(this,y0)}set playerInitTime(n){n!=this.playerInitTime&&(n==null?this.removeAttribute(Lt.PLAYER_INIT_TIME):this.setAttribute(Lt.PLAYER_INIT_TIME,`${+n}`))}get playerSoftwareName(){var n;return(n=this.getAttribute(Lt.PLAYER_SOFTWARE_NAME))!=null?n:xx}get playerSoftwareVersion(){var n;return(n=this.getAttribute(Lt.PLAYER_SOFTWARE_VERSION))!=null?n:Rx}get beaconCollectionDomain(){var n;return(n=this.getAttribute(Lt.BEACON_COLLECTION_DOMAIN))!=null?n:void 0}set beaconCollectionDomain(n){n!==this.beaconCollectionDomain&&(n?this.setAttribute(Lt.BEACON_COLLECTION_DOMAIN,n):this.removeAttribute(Lt.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var n;return(n=this.getAttribute(Lt.MAX_RESOLUTION))!=null?n:void 0}set maxResolution(n){n!==this.maxResolution&&(n?this.setAttribute(Lt.MAX_RESOLUTION,n):this.removeAttribute(Lt.MAX_RESOLUTION))}get minResolution(){var n;return(n=this.getAttribute(Lt.MIN_RESOLUTION))!=null?n:void 0}set minResolution(n){n!==this.minResolution&&(n?this.setAttribute(Lt.MIN_RESOLUTION,n):this.removeAttribute(Lt.MIN_RESOLUTION))}get renditionOrder(){var n;return(n=this.getAttribute(Lt.RENDITION_ORDER))!=null?n:void 0}set renditionOrder(n){n!==this.renditionOrder&&(n?this.setAttribute(Lt.RENDITION_ORDER,n):this.removeAttribute(Lt.RENDITION_ORDER))}get programStartTime(){return Es(this.getAttribute(Lt.PROGRAM_START_TIME))}set programStartTime(n){n==null?this.removeAttribute(Lt.PROGRAM_START_TIME):this.setAttribute(Lt.PROGRAM_START_TIME,`${n}`)}get programEndTime(){return Es(this.getAttribute(Lt.PROGRAM_END_TIME))}set programEndTime(n){n==null?this.removeAttribute(Lt.PROGRAM_END_TIME):this.setAttribute(Lt.PROGRAM_END_TIME,`${n}`)}get assetStartTime(){return Es(this.getAttribute(Lt.ASSET_START_TIME))}set assetStartTime(n){n==null?this.removeAttribute(Lt.ASSET_START_TIME):this.setAttribute(Lt.ASSET_START_TIME,`${n}`)}get assetEndTime(){return Es(this.getAttribute(Lt.ASSET_END_TIME))}set assetEndTime(n){n==null?this.removeAttribute(Lt.ASSET_END_TIME):this.setAttribute(Lt.ASSET_END_TIME,`${n}`)}get extraSourceParams(){return this.hasAttribute(Tn.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(Tn.EXTRA_SOURCE_PARAMS)).entries()].reduce((n,[e,t])=>(n[e]=t,n),{}):eH}set extraSourceParams(n){n==null?this.removeAttribute(Tn.EXTRA_SOURCE_PARAMS):this.setAttribute(Tn.EXTRA_SOURCE_PARAMS,new URLSearchParams(n).toString())}get customDomain(){var n;return(n=this.getAttribute(Lt.CUSTOM_DOMAIN))!=null?n:void 0}set customDomain(n){n!==this.customDomain&&(n?this.setAttribute(Lt.CUSTOM_DOMAIN,n):this.removeAttribute(Lt.CUSTOM_DOMAIN))}get envKey(){var n;return(n=Cc(this,Lt.ENV_KEY))!=null?n:void 0}set envKey(n){this.setAttribute(Lt.ENV_KEY,`${n}`)}get noVolumePref(){return this.hasAttribute(Tn.NO_VOLUME_PREF)}set noVolumePref(n){n?this.setAttribute(Tn.NO_VOLUME_PREF,""):this.removeAttribute(Tn.NO_VOLUME_PREF)}get debug(){return Cc(this,Lt.DEBUG)!=null}set debug(n){n?this.setAttribute(Lt.DEBUG,""):this.removeAttribute(Lt.DEBUG)}get disableTracking(){return Cc(this,Lt.DISABLE_TRACKING)!=null}set disableTracking(n){this.toggleAttribute(Lt.DISABLE_TRACKING,!!n)}get disableCookies(){return Cc(this,Lt.DISABLE_COOKIES)!=null}set disableCookies(n){n?this.setAttribute(Lt.DISABLE_COOKIES,""):this.removeAttribute(Lt.DISABLE_COOKIES)}get streamType(){var n,e,t;return(t=(e=this.getAttribute(Lt.STREAM_TYPE))!=null?e:(n=this.media)==null?void 0:n.streamType)!=null?t:Jr.UNKNOWN}set streamType(n){this.setAttribute(Lt.STREAM_TYPE,`${n}`)}get defaultStreamType(){var n,e,t;return(t=(e=this.getAttribute(Tn.DEFAULT_STREAM_TYPE))!=null?e:(n=this.mediaController)==null?void 0:n.getAttribute(Tn.DEFAULT_STREAM_TYPE))!=null?t:Jr.ON_DEMAND}set defaultStreamType(n){n?this.setAttribute(Tn.DEFAULT_STREAM_TYPE,n):this.removeAttribute(Tn.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var n,e;return this.hasAttribute(Tn.TARGET_LIVE_WINDOW)?+this.getAttribute(Tn.TARGET_LIVE_WINDOW):(e=(n=this.media)==null?void 0:n.targetLiveWindow)!=null?e:Number.NaN}set targetLiveWindow(n){n==this.targetLiveWindow||Number.isNaN(n)&&Number.isNaN(this.targetLiveWindow)||(n==null?this.removeAttribute(Tn.TARGET_LIVE_WINDOW):this.setAttribute(Tn.TARGET_LIVE_WINDOW,`${+n}`))}get liveEdgeStart(){var n;return(n=this.media)==null?void 0:n.liveEdgeStart}get startTime(){return Es(Cc(this,Lt.START_TIME))}set startTime(n){this.setAttribute(Lt.START_TIME,`${n}`)}get preferPlayback(){let n=this.getAttribute(Lt.PREFER_PLAYBACK);if(n===fl.MSE||n===fl.NATIVE)return n}set preferPlayback(n){n!==this.preferPlayback&&(n===fl.MSE||n===fl.NATIVE?this.setAttribute(Lt.PREFER_PLAYBACK,n):this.removeAttribute(Lt.PREFER_PLAYBACK))}get metadata(){var n;return(n=this.media)==null?void 0:n.metadata}set metadata(n){if(Xi(this,Pi,td).call(this),!this.media){Vs("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...kx(this),...n}}get _hlsConfig(){var n;return(n=this.media)==null?void 0:n._hlsConfig}set _hlsConfig(n){if(Xi(this,Pi,td).call(this),!this.media){Vs("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=n}async addCuePoints(n){var e;if(Xi(this,Pi,td).call(this),!this.media){Vs("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(e=this.media)==null?void 0:e.addCuePoints(n)}get activeCuePoint(){var n;return(n=this.media)==null?void 0:n.activeCuePoint}get cuePoints(){var n,e;return(e=(n=this.media)==null?void 0:n.cuePoints)!=null?e:[]}addChapters(n){var e;if(Xi(this,Pi,td).call(this),!this.media){Vs("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(e=this.media)==null?void 0:e.addChapters(n)}get activeChapter(){var n;return(n=this.media)==null?void 0:n.activeChapter}get chapters(){var n,e;return(e=(n=this.media)==null?void 0:n.chapters)!=null?e:[]}getStartDate(){var n;return(n=this.media)==null?void 0:n.getStartDate()}get currentPdt(){var n;return(n=this.media)==null?void 0:n.currentPdt}get tokens(){let n=this.getAttribute(Tn.PLAYBACK_TOKEN),e=this.getAttribute(Tn.DRM_TOKEN),t=this.getAttribute(Tn.THUMBNAIL_TOKEN),r=this.getAttribute(Tn.STORYBOARD_TOKEN);return{...ti(this,b0),...n!=null?{playback:n}:{},...e!=null?{drm:e}:{},...t!=null?{thumbnail:t}:{},...r!=null?{storyboard:r}:{}}}set tokens(n){pl(this,b0,n??{})}get playbackToken(){var n;return(n=this.getAttribute(Tn.PLAYBACK_TOKEN))!=null?n:void 0}set playbackToken(n){this.setAttribute(Tn.PLAYBACK_TOKEN,`${n}`)}get drmToken(){var n;return(n=this.getAttribute(Tn.DRM_TOKEN))!=null?n:void 0}set drmToken(n){this.setAttribute(Tn.DRM_TOKEN,`${n}`)}get thumbnailToken(){var n;return(n=this.getAttribute(Tn.THUMBNAIL_TOKEN))!=null?n:void 0}set thumbnailToken(n){this.setAttribute(Tn.THUMBNAIL_TOKEN,`${n}`)}get storyboardToken(){var n;return(n=this.getAttribute(Tn.STORYBOARD_TOKEN))!=null?n:void 0}set storyboardToken(n){this.setAttribute(Tn.STORYBOARD_TOKEN,`${n}`)}addTextTrack(n,e,t,r){var i;let o=(i=this.media)==null?void 0:i.nativeEl;if(o)return lI(o,n,e,t,r)}removeTextTrack(n){var e;let t=(e=this.media)==null?void 0:e.nativeEl;if(t)return d5(t,n)}get textTracks(){var n;return(n=this.media)==null?void 0:n.textTracks}get castReceiver(){var n;return(n=this.getAttribute(Tn.CAST_RECEIVER))!=null?n:void 0}set castReceiver(n){n!==this.castReceiver&&(n?this.setAttribute(Tn.CAST_RECEIVER,n):this.removeAttribute(Tn.CAST_RECEIVER))}get castCustomData(){var n;return(n=this.media)==null?void 0:n.castCustomData}set castCustomData(n){if(!this.media){Vs("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=n}get noTooltips(){return this.hasAttribute(Tn.NO_TOOLTIPS)}set noTooltips(n){if(!n){this.removeAttribute(Tn.NO_TOOLTIPS);return}this.setAttribute(Tn.NO_TOOLTIPS,"")}get proudlyDisplayMuxBadge(){return this.hasAttribute(Tn.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(n){n?this.setAttribute(Tn.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(Tn.PROUDLY_DISPLAY_MUX_BADGE)}};y0=new WeakMap,E0=new WeakMap,b0=new WeakMap,jc=new WeakMap,T0=new WeakMap,Sm=new WeakMap,Pi=new WeakSet,td=function(){var n,e,t,r;if(!ti(this,E0)){pl(this,E0,!0),Xi(this,Pi,qc).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof ll.HTMLElement))throw""}catch{Vs("<media-theme> failed to upgrade!")}try{customElements.upgrade(this.media)}catch{Vs("underlying media element failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof L$))throw""}catch{Vs("<media-controller> failed to upgrade!")}Xi(this,Pi,Lx).call(this),Xi(this,Pi,Dx).call(this),Xi(this,Pi,Nx).call(this),pl(this,jc,(e=(n=this.mediaController)==null?void 0:n.hasAttribute(sr.USER_INACTIVE))!=null?e:!0),Xi(this,Pi,Px).call(this),(t=this.media)==null||t.addEventListener("streamtypechange",()=>Xi(this,Pi,qc).call(this)),(r=this.media)==null||r.addEventListener("loadstart",()=>Xi(this,Pi,qc).call(this))}},gM=function(){var n,e;try{(n=window==null?void 0:window.CSS)==null||n.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window==null?void 0:window.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},ww=function(n){Object.assign(ti(this,Sm),n),Xi(this,Pi,qc).call(this)},qc=function(n={}){Pq(Oq(Kq(this,{...ti(this,Sm),...n})),this.shadowRoot)},Lx=function(){let n=e=>{var t,r;if(!(e!=null&&e.startsWith("theme-")))return;let i=e.replace(/^theme-/,"");if(Aw.includes(i))return;let o=this.getAttribute(e);o!=null?(t=this.mediaTheme)==null||t.setAttribute(i,o):(r=this.mediaTheme)==null||r.removeAttribute(i)};new MutationObserver(e=>{for(let{attributeName:t}of e)n(t)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(n)},Dx=function(){let n=e=>{var t;let r=(t=this.media)==null?void 0:t.error;if(!(r instanceof Un)){let{message:o,code:l}=r??{};r=new Un(o,l)}if(!(r!=null&&r.fatal)){tu(r),r.data&&tu(`${r.name} data:`,r.data);return}let i=Ax(r);i.message&&dM(i),Vs(r),r.data&&Vs(`${r.name} data:`,r.data),Xi(this,Pi,ww).call(this,{isDialogOpen:!0})};this.addEventListener("error",n),this.media&&(this.media.errorTranslator=(e={})=>{var t,r,i;if(!(((t=this.media)==null?void 0:t.error)instanceof Un))return e;let o=Ax((r=this.media)==null?void 0:r.error);return{player_error_code:(i=this.media)==null?void 0:i.error.code,player_error_message:o.message?String(o.message):e.player_error_message,player_error_context:o.context?String(o.context):e.player_error_context}})},Nx=function(){var n,e,t,r;let i=()=>Xi(this,Pi,qc).call(this);(e=(n=this.media)==null?void 0:n.textTracks)==null||e.addEventListener("addtrack",i),(r=(t=this.media)==null?void 0:t.textTracks)==null||r.addEventListener("removetrack",i)},Px=function(){var n,e;if(!/Firefox/i.test(navigator.userAgent))return;let t,r=new WeakMap,i=()=>this.streamType===Jr.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,o=(c,f,m=!1)=>{i()||Array.from(c&&c.activeCues||[]).forEach(g=>{if(!(!g.snapToLines||g.line<-5||g.line>=0&&g.line<10))if(!f||this.paused){let p=g.text.split(`
`).length,y=-3;this.streamType===Jr.LIVE&&(y=-2);let v=y-p;if(g.line===v&&!m)return;r.has(g)||r.set(g,g.line),g.line=v}else setTimeout(()=>{g.line=r.get(g)||"auto"},500)})},l=()=>{var c,f;o(t,(f=(c=this.mediaController)==null?void 0:c.hasAttribute(sr.USER_INACTIVE))!=null?f:!1)},d=()=>{var c,f;let m=Array.from(((f=(c=this.mediaController)==null?void 0:c.media)==null?void 0:f.textTracks)||[]).filter(g=>["subtitles","captions"].includes(g.kind)&&g.mode==="showing")[0];m!==t&&(t==null||t.removeEventListener("cuechange",l)),t=m,t==null||t.addEventListener("cuechange",l),o(t,ti(this,jc))};d(),(n=this.textTracks)==null||n.addEventListener("change",d),(e=this.textTracks)==null||e.addEventListener("addtrack",d),this.addEventListener("userinactivechange",()=>{var c,f;let m=(f=(c=this.mediaController)==null?void 0:c.hasAttribute(sr.USER_INACTIVE))!=null?f:!0;ti(this,jc)!==m&&(pl(this,jc,m),o(t,ti(this,jc)))})};function Cc(n,e){return n.media?n.media.getAttribute(e):n.getAttribute(e)}var Mx=tH,pM=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class n extends pM{}globalThis.DocumentFragment=n}var nH=class extends pM{},rH={get(n){},define(n,e,t){},getName(n){return null},upgrade(n){},whenDefined(n){return Promise.resolve(nH)}},iH={customElements:rH},aH=typeof window>"u"||typeof globalThis.customElements>"u",vS=aH?iH:globalThis;vS.customElements.get("mux-player")||(vS.customElements.define("mux-player",Mx),vS.MuxPlayerElement=Mx);var vM=parseInt(jr.version)>=19,Ox={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},sH=n=>n==null,oH=(n,e)=>sH(e)?!1:n in e,lH=n=>n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),uH=(n,e)=>{if(!(!vM&&typeof e=="boolean"&&!e)){if(oH(n,Ox))return Ox[n];if(typeof e<"u")return/[A-Z]/.test(n)?lH(n):n}},dH=(n,e)=>!vM&&typeof n=="boolean"?"":n,cH=(n={})=>{let{ref:e,...t}=n;return Object.entries(t).reduce((r,[i,o])=>{let l=uH(i,o);if(!l)return r;let d=dH(o);return r[l]=d,r},{})};function Fx(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function fH(...n){return e=>{let t=!1,r=n.map(i=>{let o=Fx(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){let o=r[i];typeof o=="function"?o():Fx(n[i],null)}}}}function hH(...n){return bi.useCallback(fH(...n),n)}var mH=Object.prototype.hasOwnProperty,gH=(n,e)=>{if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(Array.isArray(n))return!Array.isArray(e)||n.length!==e.length?!1:n.some((i,o)=>e[o]===i);let t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(!mH.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0},yM=(n,e,t)=>!gH(e,n[t]),pH=(n,e,t)=>{n[t]=e},vH=(n,e,t,r=pH,i=yM)=>bi.useEffect(()=>{let o=t==null?void 0:t.current;o&&i(o,e,n)&&r(o,e,n)},[t==null?void 0:t.current,e]),jo=vH,yH=()=>{try{return"3.5.3"}catch{}return"UNKNOWN"},EH=yH(),bH=()=>EH,wi=(n,e,t)=>bi.useEffect(()=>{let r=e==null?void 0:e.current;if(!r||!t)return;let i=n,o=t;return r.addEventListener(i,o),()=>{r.removeEventListener(i,o)}},[e==null?void 0:e.current,t,n]),TH=jr.forwardRef(({children:n,...e},t)=>jr.createElement("mux-player",{suppressHydrationWarning:!0,...cH(e),ref:t},n)),_H=(n,e)=>{let{onAbort:t,onCanPlay:r,onCanPlayThrough:i,onEmptied:o,onLoadStart:l,onLoadedData:d,onLoadedMetadata:c,onProgress:f,onDurationChange:m,onVolumeChange:g,onRateChange:p,onResize:y,onWaiting:v,onPlay:A,onPlaying:I,onTimeUpdate:P,onPause:U,onSeeking:M,onSeeked:B,onStalled:ie,onSuspend:L,onEnded:w,onError:O,onCuePointChange:oe,onChapterChange:D,metadata:ve,tokens:Le,paused:te,playbackId:$e,playbackRates:Ue,currentTime:Re,themeProps:Xe,extraSourceParams:Ye,castCustomData:Ze,_hlsConfig:Ne,...ze}=e;return jo("tokens",Le,n),jo("playbackId",$e,n),jo("playbackRates",Ue,n),jo("metadata",ve,n),jo("extraSourceParams",Ye,n),jo("_hlsConfig",Ne,n),jo("themeProps",Xe,n),jo("castCustomData",Ze,n),jo("paused",te,n,(st,Rt)=>{Rt!=null&&(Rt?st.pause():st.play())},(st,Rt,jt)=>st.hasAttribute("autoplay")&&!st.hasPlayed?!1:yM(st,Rt,jt)),jo("currentTime",Re,n,(st,Rt)=>{Rt!=null&&(st.currentTime=Rt)}),wi("abort",n,t),wi("canplay",n,r),wi("canplaythrough",n,i),wi("emptied",n,o),wi("loadstart",n,l),wi("loadeddata",n,d),wi("loadedmetadata",n,c),wi("progress",n,f),wi("durationchange",n,m),wi("volumechange",n,g),wi("ratechange",n,p),wi("resize",n,y),wi("waiting",n,v),wi("play",n,A),wi("playing",n,I),wi("timeupdate",n,P),wi("pause",n,U),wi("seeking",n,M),wi("seeked",n,B),wi("stalled",n,ie),wi("suspend",n,L),wi("ended",n,w),wi("error",n,O),wi("cuepointchange",n,oe),wi("chapterchange",n,D),[ze]},EM=bH(),bM="mux-player-react",SH=jr.forwardRef((n,e)=>{var t;let r=bi.useRef(null),i=hH(r,e),[o]=_H(r,n),[l]=bi.useState((t=n.playerInitTime)!=null?t:RT());return jr.createElement(TH,{ref:i,defaultHiddenCaptions:n.defaultHiddenCaptions,playerSoftwareName:bM,playerSoftwareVersion:EM,playerInitTime:l,...o})}),AH=SH;const wH=Object.freeze(Object.defineProperty({__proto__:null,MaxResolution:V8,MediaError:Un,MinResolution:K8,RenditionOrder:Y8,default:AH,generatePlayerInitTime:RT,playerSoftwareName:bM,playerSoftwareVersion:EM},Symbol.toStringTag,{value:"Module"})),IH="https://www.youtube.com/embed",kH="https://www.youtube-nocookie.com/embed",RH="https://www.youtube.com/iframe_api",xH="YT",CH="onYouTubeIframeAPIReady",Ux=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})/,LH=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/.*?[?&]list=)([\w_-]+)/;function zx(n,e={}){const t={src:TM(n,e),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return e.config&&(t["data-config"]=JSON.stringify(e.config)),`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
        position: relative;
        min-width: 300px;
        min-height: 150px;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
      }
    </style>
    <iframe${DH(t)}></iframe>
  `}function TM(n,e){if(!n.src)return;const t=n.src.includes("-nocookie")?kH:IH,r={controls:n.controls===""?null:0,autoplay:n.autoplay,loop:n.loop,mute:n.muted,playsinline:n.playsinline,preload:n.preload??"metadata",enablejsapi:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1,...e.config};if(Ux.test(n.src)){const d=n.src.match(Ux),c=d&&d[1];return`${t}/${c}?${Bx(r)}`}const i=n.src.match(LH),l={listType:"playlist",list:i&&i[1],...r};return`${t}?${Bx(l)}`}var Cm,Lm,Td,_d,ru,Vv,Dm,pT,_M;class mv extends(globalThis.HTMLElement??class{}){constructor(){super();cn(this,pT);tr(this,"loadComplete",new bS);cn(this,Cm);cn(this,Lm);cn(this,Td,0);cn(this,_d,!1);cn(this,ru);tr(this,"isLoaded",!1);cn(this,Vv,null);cn(this,Dm,null);rr(this,pT,_M).call(this,"config")}get config(){return qe(this,Dm)}set config(t){Tt(this,Dm,t)}async load(){if(qe(this,Cm))return;this.shadowRoot||this.attachShadow({mode:"open"});const t=!qe(this,Lm);qe(this,Lm)&&(this.loadComplete=new bS,this.isLoaded=!1),Tt(this,Lm,!0),await Tt(this,Cm,Promise.resolve()),Tt(this,Cm,null),Tt(this,Td,0),this.dispatchEvent(new Event("emptied"));let r=this.api;if(this.api=null,!this.src){r==null||r.destroy();return}this.dispatchEvent(new Event("loadstart"));let i=this.shadowRoot.querySelector("iframe"),o=PH(this.attributes);t&&i&&Tt(this,Dm,JSON.parse(i.getAttribute("data-config")||"{}")),(!(i!=null&&i.src)||i.src!==TM(o,this))&&(this.shadowRoot.innerHTML=zx(o,this),i=this.shadowRoot.querySelector("iframe"));const l=await MH(RH,xH,CH);this.api=new l.Player(i,{events:{onReady:()=>{Tt(this,Td,1),this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("volumechange")),this.dispatchEvent(new Event("loadcomplete")),this.isLoaded=!0,this.loadComplete.resolve()},onError:g=>{console.error(g),Tt(this,Vv,{code:g.data,message:`YouTube iframe player error #${g.data}; visit https://developers.google.com/youtube/iframe_api_reference#onError for the full error message.`}),this.dispatchEvent(new Event("error"))}}});let d=!1;this.api.addEventListener("onStateChange",g=>{var p;const y=g.data;if((y===l.PlayerState.PLAYING||y===l.PlayerState.BUFFERING)&&(d||(d=!0,this.dispatchEvent(new Event("play")))),y===l.PlayerState.PLAYING)this.seeking&&(Tt(this,_d,!1),(p=qe(this,ru))==null||p.resolve(),this.dispatchEvent(new Event("seeked"))),Tt(this,Td,3),this.dispatchEvent(new Event("playing"));else if(y===l.PlayerState.PAUSED){const v=Math.abs(this.currentTime-c);!this.seeking&&v>.1&&(Tt(this,_d,!0),this.dispatchEvent(new Event("seeking"))),d=!1,this.dispatchEvent(new Event("pause"))}y===l.PlayerState.ENDED&&(d=!1,this.dispatchEvent(new Event("pause")),this.dispatchEvent(new Event("ended")),this.loop&&this.play())}),this.api.addEventListener("onPlaybackRateChange",()=>{this.dispatchEvent(new Event("ratechange"))}),this.api.addEventListener("onVolumeChange",()=>{this.dispatchEvent(new Event("volumechange"))}),this.api.addEventListener("onVideoProgress",()=>{this.dispatchEvent(new Event("timeupdate"))}),await this.loadComplete;let c=0;setInterval(()=>{var g;const p=Math.abs(this.currentTime-c),y=this.buffered.end(this.buffered.length-1);this.seeking&&y>.1?(Tt(this,_d,!1),(g=qe(this,ru))==null||g.resolve(),this.dispatchEvent(new Event("seeked"))):!this.seeking&&p>.1&&(Tt(this,_d,!0),this.dispatchEvent(new Event("seeking"))),c=this.currentTime},50);let f;const m=setInterval(()=>{const g=this.buffered.end(this.buffered.length-1);g>=this.duration&&(clearInterval(m),Tt(this,Td,4)),f!=g&&(f=g,this.dispatchEvent(new Event("progress")))},100)}async attributeChangedCallback(t,r,i){if(r!==i)switch(t){case"src":case"autoplay":case"controls":case"loop":case"playsinline":this.load()}}async play(){var t;return Tt(this,ru,null),await this.loadComplete,(t=this.api)==null||t.playVideo(),UH(this)}async pause(){var t;return await this.loadComplete,(t=this.api)==null?void 0:t.pauseVideo()}get seeking(){return qe(this,_d)}get readyState(){return qe(this,Td)}get src(){return this.getAttribute("src")}set src(t){this.src!=t&&this.setAttribute("src",t)}get error(){return qe(this,Vv)}get paused(){var t,r;return this.isLoaded?[-1,0,2,5].includes((r=(t=this.api)==null?void 0:t.getPlayerState)==null?void 0:r.call(t)):!this.autoplay}get duration(){var t,r;return((r=(t=this.api)==null?void 0:t.getDuration)==null?void 0:r.call(t))??NaN}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(t){this.autoplay!=t&&this.toggleAttribute("autoplay",!!t)}get buffered(){var t,r;if(!this.isLoaded)return TS();const i=((t=this.api)==null?void 0:t.getVideoLoadedFraction())*((r=this.api)==null?void 0:r.getDuration());return i>0?TS(0,i):TS()}get controls(){return this.hasAttribute("controls")}set controls(t){this.controls!=t&&this.toggleAttribute("controls",!!t)}get currentTime(){var t,r;return((r=(t=this.api)==null?void 0:t.getCurrentTime)==null?void 0:r.call(t))??0}set currentTime(t){this.currentTime!=t&&(Tt(this,ru,new bS),this.loadComplete.then(()=>{var r,i;(r=this.api)==null||r.seekTo(t,!0),this.paused&&((i=qe(this,ru))==null||i.then(()=>{var o;qe(this,ru)&&((o=this.api)==null||o.pauseVideo())}))}))}set defaultMuted(t){this.defaultMuted!=t&&this.toggleAttribute("muted",!!t)}get defaultMuted(){return this.hasAttribute("muted")}get loop(){return this.hasAttribute("loop")}set loop(t){this.loop!=t&&this.toggleAttribute("loop",!!t)}set muted(t){this.muted!=t&&this.loadComplete.then(()=>{var r,i;t?(r=this.api)==null||r.mute():(i=this.api)==null||i.unMute()})}get muted(){var t,r;return this.isLoaded?(r=(t=this.api)==null?void 0:t.isMuted)==null?void 0:r.call(t):this.defaultMuted}get playbackRate(){var t,r;return((r=(t=this.api)==null?void 0:t.getPlaybackRate)==null?void 0:r.call(t))??1}set playbackRate(t){this.playbackRate!=t&&this.loadComplete.then(()=>{var r;(r=this.api)==null||r.setPlaybackRate(t)})}get playsInline(){return this.hasAttribute("playsinline")}set playsInline(t){this.playsInline!=t&&this.toggleAttribute("playsinline",!!t)}get poster(){return this.getAttribute("poster")}set poster(t){this.poster!=t&&this.setAttribute("poster",`${t}`)}set volume(t){this.volume!=t&&this.loadComplete.then(()=>{var r;(r=this.api)==null||r.setVolume(t*100)})}get volume(){var t;return this.isLoaded?((t=this.api)==null?void 0:t.getVolume())/100:1}}Cm=new WeakMap,Lm=new WeakMap,Td=new WeakMap,_d=new WeakMap,ru=new WeakMap,Vv=new WeakMap,Dm=new WeakMap,pT=new WeakSet,_M=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const r=this[t];delete this[t],this[t]=r}},tr(mv,"getTemplateHTML",zx),tr(mv,"shadowRootOptions",{mode:"open"}),tr(mv,"observedAttributes",["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src"]);function DH(n){let e="";for(const t in n){const r=n[t];r===""?e+=` ${yS(t)}`:e+=` ${yS(t)}="${yS(`${r}`)}"`}return e}function yS(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}function Bx(n){return String(new URLSearchParams(NH(n)))}function NH(n){let e={};for(let t in n){let r=n[t];r===!0||r===""?e[t]=1:r===!1?e[t]=0:r!=null&&(e[t]=r)}return e}function PH(n){let e={};for(let t of n)e[t.name]=t.value;return e}const ES={};async function MH(n,e,t){return ES[n]?ES[n]:self[e]?(await OH(0),self[e]):ES[n]=new Promise(function(r,i){const o=document.createElement("script");o.src=n;const l=()=>r(self[e]);self[t]=l,o.onload=()=>!1,o.onerror=i,document.head.append(o)})}const OH=n=>new Promise(e=>setTimeout(e,n));function FH(n){return(...e)=>new Promise(t=>{n(...e,(...r)=>{r.length>1?t(r):t(r[0])})})}function UH(n){return FH((e,t)=>{let r;n.addEventListener(e,r=()=>{n.removeEventListener(e,r),t()})})("playing")}let bS=class extends Promise{constructor(e=()=>{}){let t,r;super((i,o)=>{e(i,o),t=i,r=o}),this.resolve=t,this.reject=r}};function TS(n,e){return Array.isArray(n)?_S(n):n==null||e==null||n===0&&e===0?_S([[0,0]]):_S([[n,e]])}function _S(n){return Object.defineProperties(n,{start:{value:e=>n[e][0]},end:{value:e=>n[e][1]}}),n}globalThis.customElements&&!globalThis.customElements.get("youtube-video")&&globalThis.customElements.define("youtube-video",mv);var zH=mv,BH=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),$H={className:"class",htmlFor:"for"};function SM(n){return n.toLowerCase()}function $x(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function jH({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=SM,toAttributeValue:d=$x}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(BH.has(B)){U[B]=ie;continue}const L=l($H[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=$x(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)jx(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)jx(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function jx(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var qH=jH({react:jr,tagName:"youtube-video",elementClass:zH,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":SM(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const HH=Object.freeze(Object.defineProperty({__proto__:null,default:qH},Symbol.toStringTag,{value:"Module"}));/*! @vimeo/player v2.29.0 | (c) 2025 Vimeo | MIT License | https://github.com/vimeo/player.js */function qx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qx(Object(t),!0).forEach(function(r){_0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ga(){Ga=function(){return n};var n={},e=Object.prototype,t=e.hasOwnProperty,r=Object.defineProperty||function(Le,te,$e){Le[te]=$e.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function c(Le,te,$e){return Object.defineProperty(Le,te,{value:$e,enumerable:!0,configurable:!0,writable:!0}),Le[te]}try{c({},"")}catch{c=function(te,$e,Ue){return te[$e]=Ue}}function f(Le,te,$e,Ue){var Re=te&&te.prototype instanceof p?te:p,Xe=Object.create(Re.prototype),Ye=new oe(Ue||[]);return r(Xe,"_invoke",{value:ie(Le,$e,Ye)}),Xe}function m(Le,te,$e){try{return{type:"normal",arg:Le.call(te,$e)}}catch(Ue){return{type:"throw",arg:Ue}}}n.wrap=f;var g={};function p(){}function y(){}function v(){}var A={};c(A,o,function(){return this});var I=Object.getPrototypeOf,P=I&&I(I(D([])));P&&P!==e&&t.call(P,o)&&(A=P);var U=v.prototype=p.prototype=Object.create(A);function M(Le){["next","throw","return"].forEach(function(te){c(Le,te,function($e){return this._invoke(te,$e)})})}function B(Le,te){function $e(Re,Xe,Ye,Ze){var Ne=m(Le[Re],Le,Xe);if(Ne.type!=="throw"){var ze=Ne.arg,st=ze.value;return st&&typeof st=="object"&&t.call(st,"__await")?te.resolve(st.__await).then(function(Rt){$e("next",Rt,Ye,Ze)},function(Rt){$e("throw",Rt,Ye,Ze)}):te.resolve(st).then(function(Rt){ze.value=Rt,Ye(ze)},function(Rt){return $e("throw",Rt,Ye,Ze)})}Ze(Ne.arg)}var Ue;r(this,"_invoke",{value:function(Re,Xe){function Ye(){return new te(function(Ze,Ne){$e(Re,Xe,Ze,Ne)})}return Ue=Ue?Ue.then(Ye,Ye):Ye()}})}function ie(Le,te,$e){var Ue="suspendedStart";return function(Re,Xe){if(Ue==="executing")throw new Error("Generator is already running");if(Ue==="completed"){if(Re==="throw")throw Xe;return ve()}for($e.method=Re,$e.arg=Xe;;){var Ye=$e.delegate;if(Ye){var Ze=L(Ye,$e);if(Ze){if(Ze===g)continue;return Ze}}if($e.method==="next")$e.sent=$e._sent=$e.arg;else if($e.method==="throw"){if(Ue==="suspendedStart")throw Ue="completed",$e.arg;$e.dispatchException($e.arg)}else $e.method==="return"&&$e.abrupt("return",$e.arg);Ue="executing";var Ne=m(Le,te,$e);if(Ne.type==="normal"){if(Ue=$e.done?"completed":"suspendedYield",Ne.arg===g)continue;return{value:Ne.arg,done:$e.done}}Ne.type==="throw"&&(Ue="completed",$e.method="throw",$e.arg=Ne.arg)}}}function L(Le,te){var $e=te.method,Ue=Le.iterator[$e];if(Ue===void 0)return te.delegate=null,$e==="throw"&&Le.iterator.return&&(te.method="return",te.arg=void 0,L(Le,te),te.method==="throw")||$e!=="return"&&(te.method="throw",te.arg=new TypeError("The iterator does not provide a '"+$e+"' method")),g;var Re=m(Ue,Le.iterator,te.arg);if(Re.type==="throw")return te.method="throw",te.arg=Re.arg,te.delegate=null,g;var Xe=Re.arg;return Xe?Xe.done?(te[Le.resultName]=Xe.value,te.next=Le.nextLoc,te.method!=="return"&&(te.method="next",te.arg=void 0),te.delegate=null,g):Xe:(te.method="throw",te.arg=new TypeError("iterator result is not an object"),te.delegate=null,g)}function w(Le){var te={tryLoc:Le[0]};1 in Le&&(te.catchLoc=Le[1]),2 in Le&&(te.finallyLoc=Le[2],te.afterLoc=Le[3]),this.tryEntries.push(te)}function O(Le){var te=Le.completion||{};te.type="normal",delete te.arg,Le.completion=te}function oe(Le){this.tryEntries=[{tryLoc:"root"}],Le.forEach(w,this),this.reset(!0)}function D(Le){if(Le){var te=Le[o];if(te)return te.call(Le);if(typeof Le.next=="function")return Le;if(!isNaN(Le.length)){var $e=-1,Ue=function Re(){for(;++$e<Le.length;)if(t.call(Le,$e))return Re.value=Le[$e],Re.done=!1,Re;return Re.value=void 0,Re.done=!0,Re};return Ue.next=Ue}}return{next:ve}}function ve(){return{value:void 0,done:!0}}return y.prototype=v,r(U,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,d,"GeneratorFunction"),n.isGeneratorFunction=function(Le){var te=typeof Le=="function"&&Le.constructor;return!!te&&(te===y||(te.displayName||te.name)==="GeneratorFunction")},n.mark=function(Le){return Object.setPrototypeOf?Object.setPrototypeOf(Le,v):(Le.__proto__=v,c(Le,d,"GeneratorFunction")),Le.prototype=Object.create(U),Le},n.awrap=function(Le){return{__await:Le}},M(B.prototype),c(B.prototype,l,function(){return this}),n.AsyncIterator=B,n.async=function(Le,te,$e,Ue,Re){Re===void 0&&(Re=Promise);var Xe=new B(f(Le,te,$e,Ue),Re);return n.isGeneratorFunction(te)?Xe:Xe.next().then(function(Ye){return Ye.done?Ye.value:Xe.next()})},M(U),c(U,d,"Generator"),c(U,o,function(){return this}),c(U,"toString",function(){return"[object Generator]"}),n.keys=function(Le){var te=Object(Le),$e=[];for(var Ue in te)$e.push(Ue);return $e.reverse(),function Re(){for(;$e.length;){var Xe=$e.pop();if(Xe in te)return Re.value=Xe,Re.done=!1,Re}return Re.done=!0,Re}},n.values=D,oe.prototype={constructor:oe,reset:function(Le){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!Le)for(var te in this)te.charAt(0)==="t"&&t.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=void 0)},stop:function(){this.done=!0;var Le=this.tryEntries[0].completion;if(Le.type==="throw")throw Le.arg;return this.rval},dispatchException:function(Le){if(this.done)throw Le;var te=this;function $e(Ne,ze){return Xe.type="throw",Xe.arg=Le,te.next=Ne,ze&&(te.method="next",te.arg=void 0),!!ze}for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var Re=this.tryEntries[Ue],Xe=Re.completion;if(Re.tryLoc==="root")return $e("end");if(Re.tryLoc<=this.prev){var Ye=t.call(Re,"catchLoc"),Ze=t.call(Re,"finallyLoc");if(Ye&&Ze){if(this.prev<Re.catchLoc)return $e(Re.catchLoc,!0);if(this.prev<Re.finallyLoc)return $e(Re.finallyLoc)}else if(Ye){if(this.prev<Re.catchLoc)return $e(Re.catchLoc,!0)}else{if(!Ze)throw new Error("try statement without catch or finally");if(this.prev<Re.finallyLoc)return $e(Re.finallyLoc)}}}},abrupt:function(Le,te){for(var $e=this.tryEntries.length-1;$e>=0;--$e){var Ue=this.tryEntries[$e];if(Ue.tryLoc<=this.prev&&t.call(Ue,"finallyLoc")&&this.prev<Ue.finallyLoc){var Re=Ue;break}}Re&&(Le==="break"||Le==="continue")&&Re.tryLoc<=te&&te<=Re.finallyLoc&&(Re=null);var Xe=Re?Re.completion:{};return Xe.type=Le,Xe.arg=te,Re?(this.method="next",this.next=Re.finallyLoc,g):this.complete(Xe)},complete:function(Le,te){if(Le.type==="throw")throw Le.arg;return Le.type==="break"||Le.type==="continue"?this.next=Le.arg:Le.type==="return"?(this.rval=this.arg=Le.arg,this.method="return",this.next="end"):Le.type==="normal"&&te&&(this.next=te),g},finish:function(Le){for(var te=this.tryEntries.length-1;te>=0;--te){var $e=this.tryEntries[te];if($e.finallyLoc===Le)return this.complete($e.completion,$e.afterLoc),O($e),g}},catch:function(Le){for(var te=this.tryEntries.length-1;te>=0;--te){var $e=this.tryEntries[te];if($e.tryLoc===Le){var Ue=$e.completion;if(Ue.type==="throw"){var Re=Ue.arg;O($e)}return Re}}throw new Error("illegal catch attempt")},delegateYield:function(Le,te,$e){return this.delegate={iterator:D(Le),resultName:te,nextLoc:$e},this.method==="next"&&(this.arg=void 0),g}},n}function Gx(n,e,t,r,i,o,l){try{var d=n[o](l),c=d.value}catch(f){t(f);return}d.done?e(c):Promise.resolve(c).then(r,i)}function Hc(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function l(c){Gx(o,r,i,l,d,"next",c)}function d(c){Gx(o,r,i,l,d,"throw",c)}l(void 0)})}}function AM(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function GH(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,kM(r.key),r)}}function wM(n,e,t){return e&&GH(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function _0(n,e,t){return e=kM(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VH(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&qv(n,e)}function jv(n){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jv(n)}function qv(n,e){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qv(n,e)}function IM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S0(n,e,t){return IM()?S0=Reflect.construct.bind():S0=function(i,o,l){var d=[null];d.push.apply(d,o);var c=Function.bind.apply(i,d),f=new c;return l&&qv(f,l.prototype),f},S0.apply(null,arguments)}function KH(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Iw(n){var e=typeof Map=="function"?new Map:void 0;return Iw=function(r){if(r===null||!KH(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return S0(r,arguments,jv(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),qv(i,r)},Iw(n)}function A0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function YH(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A0(n)}function WH(n){var e=IM();return function(){var r=jv(n),i;if(e){var o=jv(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return YH(this,i)}}function QH(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function kM(n){var e=QH(n,"string");return typeof e=="symbol"?e:String(e)}var RM=typeof global<"u"&&{}.toString.call(global)==="[object global]";function Vx(n,e){return n.indexOf(e.toLowerCase())===0?n:"".concat(e.toLowerCase()).concat(n.substr(0,1).toUpperCase()).concat(n.substr(1))}function XH(n){return!!(n&&n.nodeType===1&&"nodeName"in n&&n.ownerDocument&&n.ownerDocument.defaultView)}function ZH(n){return!isNaN(parseFloat(n))&&isFinite(n)&&Math.floor(n)==n}function _f(n){return/^(https?:)?\/\/((((player|www)\.)?vimeo\.com)|((player\.)?[a-zA-Z0-9-]+\.(videoji\.(hk|cn)|vimeo\.work)))(?=$|\/)/.test(n)}function xM(n){var e=/^https:\/\/player\.((vimeo\.com)|([a-zA-Z0-9-]+\.(videoji\.(hk|cn)|vimeo\.work)))\/video\/\d+/;return e.test(n)}function JH(n){for(var e=(n||"").match(/^(?:https?:)?(?:\/\/)?([^/?]+)/),t=(e&&e[1]||"").replace("player.",""),r=[".videoji.hk",".vimeo.work",".videoji.cn"],i=0,o=r;i<o.length;i++){var l=o[i];if(t.endsWith(l))return t}return"vimeo.com"}function CM(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.id,t=n.url,r=e||t;if(!r)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(ZH(r))return"https://vimeo.com/".concat(r);if(_f(r))return r.replace("http:","https:");throw e?new TypeError("“".concat(e,"” is not a valid video id.")):new TypeError("“".concat(r,"” is not a vimeo.com url."))}var Kx=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"addEventListener",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"removeEventListener",l=typeof t=="string"?[t]:t;return l.forEach(function(d){e[i](d,r)}),{cancel:function(){return l.forEach(function(c){return e[o](c,r)})}}},eG=typeof Array.prototype.indexOf<"u",tG=typeof window<"u"&&typeof window.postMessage<"u";if(!RM&&(!eG||!tG))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var Am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nG(n,e){return e={exports:{}},n(e,e.exports),e.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(n){if(n.WeakMap)return;var e=Object.prototype.hasOwnProperty,t=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),r=function(o,l,d){t?Object.defineProperty(o,l,{configurable:!0,writable:!0,value:d}):o[l]=d};n.WeakMap=function(){function o(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(r(this,"_id",d("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}r(o.prototype,"delete",function(f){if(l(this,"delete"),!i(f))return!1;var m=f[this._id];return m&&m[0]===f?(delete f[this._id],!0):!1}),r(o.prototype,"get",function(f){if(l(this,"get"),!!i(f)){var m=f[this._id];if(m&&m[0]===f)return m[1]}}),r(o.prototype,"has",function(f){if(l(this,"has"),!i(f))return!1;var m=f[this._id];return!!(m&&m[0]===f)}),r(o.prototype,"set",function(f,m){if(l(this,"set"),!i(f))throw new TypeError("Invalid value used as weak map key");var g=f[this._id];return g&&g[0]===f?(g[1]=m,this):(r(f,this._id,[f,m]),this)});function l(f,m){if(!i(f)||!e.call(f,"_id"))throw new TypeError(m+" method called on incompatible receiver "+typeof f)}function d(f){return f+"_"+c()+"."+c()}function c(){return Math.random().toString().substring(2)}return r(o,"_polyfill",!0),o}();function i(o){return Object(o)===o}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Am);var qs=nG(function(n){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(t,r,i){r[t]=r[t]||i(),n.exports&&(n.exports=r[t])})("Promise",Am,function(){var t,r,i,o=Object.prototype.toString,l=typeof setImmediate<"u"?function(M){return setImmediate(M)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(M,B,ie,L){return Object.defineProperty(M,B,{value:ie,writable:!0,configurable:L!==!1})}}catch{t=function(B,ie,L){return B[ie]=L,B}}i=function(){var M,B,ie;function L(w,O){this.fn=w,this.self=O,this.next=void 0}return{add:function(O,oe){ie=new L(O,oe),B?B.next=ie:M=ie,B=ie,ie=void 0},drain:function(){var O=M;for(M=B=r=void 0;O;)O.fn.call(O.self),O=O.next}}}();function d(U,M){i.add(U,M),r||(r=l(i.drain))}function c(U){var M,B=typeof U;return U!=null&&(B=="object"||B=="function")&&(M=U.then),typeof M=="function"?M:!1}function f(){for(var U=0;U<this.chain.length;U++)m(this,this.state===1?this.chain[U].success:this.chain[U].failure,this.chain[U]);this.chain.length=0}function m(U,M,B){var ie,L;try{M===!1?B.reject(U.msg):(M===!0?ie=U.msg:ie=M.call(void 0,U.msg),ie===B.promise?B.reject(TypeError("Promise-chain cycle")):(L=c(ie))?L.call(ie,B.resolve,B.reject):B.resolve(ie))}catch(w){B.reject(w)}}function g(U){var M,B=this;if(!B.triggered){B.triggered=!0,B.def&&(B=B.def);try{(M=c(U))?d(function(){var ie=new v(B);try{M.call(U,function(){g.apply(ie,arguments)},function(){p.apply(ie,arguments)})}catch(L){p.call(ie,L)}}):(B.msg=U,B.state=1,B.chain.length>0&&d(f,B))}catch(ie){p.call(new v(B),ie)}}}function p(U){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=U,M.state=2,M.chain.length>0&&d(f,M))}function y(U,M,B,ie){for(var L=0;L<M.length;L++)(function(O){U.resolve(M[O]).then(function(D){B(O,D)},ie)})(L)}function v(U){this.def=U,this.triggered=!1}function A(U){this.promise=U,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function I(U){if(typeof U!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new A(this);this.then=function(ie,L){var w={success:typeof ie=="function"?ie:!0,failure:typeof L=="function"?L:!1};return w.promise=new this.constructor(function(oe,D){if(typeof oe!="function"||typeof D!="function")throw TypeError("Not a function");w.resolve=oe,w.reject=D}),M.chain.push(w),M.state!==0&&d(f,M),w.promise},this.catch=function(ie){return this.then(void 0,ie)};try{U.call(void 0,function(ie){g.call(M,ie)},function(ie){p.call(M,ie)})}catch(B){p.call(M,B)}}var P=t({},"constructor",I,!1);return I.prototype=P,t(P,"__NPO__",0,!1),t(I,"resolve",function(M){var B=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new B(function(L,w){if(typeof L!="function"||typeof w!="function")throw TypeError("Not a function");L(M)})}),t(I,"reject",function(M){return new this(function(ie,L){if(typeof ie!="function"||typeof L!="function")throw TypeError("Not a function");L(M)})}),t(I,"all",function(M){var B=this;return o.call(M)!="[object Array]"?B.reject(TypeError("Not an array")):M.length===0?B.resolve([]):new B(function(L,w){if(typeof L!="function"||typeof w!="function")throw TypeError("Not a function");var O=M.length,oe=Array(O),D=0;y(B,M,function(Le,te){oe[Le]=te,++D===O&&L(oe)},w)})}),t(I,"race",function(M){var B=this;return o.call(M)!="[object Array]"?B.reject(TypeError("Not an array")):new B(function(L,w){if(typeof L!="function"||typeof w!="function")throw TypeError("Not a function");y(B,M,function(oe,D){L(D)},w)})}),I})}),ou=new WeakMap;function xp(n,e,t){var r=ou.get(n.element)||{};e in r||(r[e]=[]),r[e].push(t),ou.set(n.element,r)}function cT(n,e){var t=ou.get(n.element)||{};return t[e]||[]}function fT(n,e,t){var r=ou.get(n.element)||{};if(!r[e])return!0;if(!t)return r[e]=[],ou.set(n.element,r),!0;var i=r[e].indexOf(t);return i!==-1&&r[e].splice(i,1),ou.set(n.element,r),r[e]&&r[e].length===0}function rG(n,e){var t=cT(n,e);if(t.length<1)return!1;var r=t.shift();return fT(n,e,r),r}function iG(n,e){var t=ou.get(n);ou.set(e,t),ou.delete(n)}function GT(n){if(typeof n=="string")try{n=JSON.parse(n)}catch(e){return console.warn(e),{}}return n}function Lc(n,e,t){if(!(!n.element.contentWindow||!n.element.contentWindow.postMessage)){var r={method:e};t!==void 0&&(r.value=t);var i=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));i>=8&&i<10&&(r=JSON.stringify(r)),n.element.contentWindow.postMessage(r,n.origin)}}function aG(n,e){e=GT(e);var t=[],r;if(e.event){if(e.event==="error"){var i=cT(n,e.data.method);i.forEach(function(l){var d=new Error(e.data.message);d.name=e.data.name,l.reject(d),fT(n,e.data.method,l)})}t=cT(n,"event:".concat(e.event)),r=e.data}else if(e.method){var o=rG(n,e.method);o&&(t.push(o),r=e.value)}t.forEach(function(l){try{if(typeof l=="function"){l.call(n,r);return}l.resolve(r)}catch{}})}var sG=["airplay","audio_tracks","audiotrack","autopause","autoplay","background","byline","cc","chapter_id","chapters","chromecast","color","colors","controls","dnt","end_time","fullscreen","height","id","initial_quality","interactive_params","keyboard","loop","maxheight","max_quality","maxwidth","min_quality","muted","play_button_position","playsinline","portrait","preload","progress_bar","quality","quality_selector","responsive","skipping_forward","speed","start_time","texttrack","thumbnail_id","title","transcript","transparent","unmute_button","url","vimeo_logo","volume","watch_full_video","width"];function LM(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return sG.reduce(function(t,r){var i=n.getAttribute("data-vimeo-".concat(r));return(i||i==="")&&(t[r]=i===""?1:i),t},e)}function bk(n,e){var t=n.html;if(!e)throw new TypeError("An element must be provided");if(e.getAttribute("data-vimeo-initialized")!==null)return e.querySelector("iframe");var r=document.createElement("div");return r.innerHTML=t,e.appendChild(r.firstChild),e.setAttribute("data-vimeo-initialized","true"),e.querySelector("iframe")}function DM(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return new Promise(function(r,i){if(!_f(n))throw new TypeError("“".concat(n,"” is not a vimeo.com url."));var o=JH(n),l="https://".concat(o,"/api/oembed.json?url=").concat(encodeURIComponent(n));for(var d in e)e.hasOwnProperty(d)&&(l+="&".concat(d,"=").concat(encodeURIComponent(e[d])));var c="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;c.open("GET",l,!0),c.onload=function(){if(c.status===404){i(new Error("“".concat(n,"” was not found.")));return}if(c.status===403){i(new Error("“".concat(n,"” is not embeddable.")));return}try{var f=JSON.parse(c.responseText);if(f.domain_status_code===403){bk(f,t),i(new Error("“".concat(n,"” is not embeddable.")));return}r(f)}catch(m){i(m)}},c.onerror=function(){var f=c.status?" (".concat(c.status,")"):"";i(new Error("There was an error fetching the embed code from Vimeo".concat(f,".")))},c.send()})}function oG(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,e=[].slice.call(n.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),t=function(i){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(i))};e.forEach(function(r){try{if(r.getAttribute("data-vimeo-defer")!==null)return;var i=LM(r),o=CM(i);DM(o,i,r).then(function(l){return bk(l,r)}).catch(t)}catch(l){t(l)}})}function lG(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var e=function(r){if(_f(r.origin)&&!(!r.data||r.data.event!=="spacechange")){for(var i=n.querySelectorAll("iframe"),o=0;o<i.length;o++)if(i[o].contentWindow===r.source){var l=i[o].parentElement;l.style.paddingBottom="".concat(r.data.data[0].bottom,"px");break}}};window.addEventListener("message",e)}}function uG(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var e=function(r){if(_f(r.origin)){var i=GT(r.data);if(!(!i||i.event!=="ready"))for(var o=n.querySelectorAll("iframe"),l=0;l<o.length;l++){var d=o[l],c=d.contentWindow===r.source;if(xM(d.src)&&c){var f=new Tk(d);f.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",e)}}function dG(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var e=function(i){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(i))},t=function(i){if(_f(i.origin)){var o=GT(i.data);if(!(!o||o.event!=="ready"))for(var l=n.querySelectorAll("iframe"),d=function(){var m=l[c],g=m.contentWindow===i.source;if(xM(m.src)&&g){var p=new Tk(m);p.getVideoId().then(function(y){var v=new RegExp("[?&]vimeo_t_".concat(y,"=([^&#]*)")).exec(window.location.href);if(v&&v[1]){var A=decodeURI(v[1]);p.setCurrentTime(A)}}).catch(e)}},c=0;c<l.length;c++)d()}};window.addEventListener("message",t)}}function cG(){var n=function(){for(var r,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,l=i.length,d={};o<l;o++)if(r=i[o],r&&r[1]in document){for(o=0;o<r.length;o++)d[i[0][o]]=r[o];return d}return!1}(),e={fullscreenchange:n.fullscreenchange,fullscreenerror:n.fullscreenerror},t={request:function(i){return new Promise(function(o,l){var d=function f(){t.off("fullscreenchange",f),o()};t.on("fullscreenchange",d),i=i||document.documentElement;var c=i[n.requestFullscreen]();c instanceof Promise&&c.then(d).catch(l)})},exit:function(){return new Promise(function(i,o){if(!t.isFullscreen){i();return}var l=function c(){t.off("fullscreenchange",c),i()};t.on("fullscreenchange",l);var d=document[n.exitFullscreen]();d instanceof Promise&&d.then(l).catch(o)})},on:function(i,o){var l=e[i];l&&document.addEventListener(l,o)},off:function(i,o){var l=e[i];l&&document.removeEventListener(l,o)}};return Object.defineProperties(t,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),t}var fG={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},hG=function(n){VH(t,n);var e=WH(t);function t(r,i){var o,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=arguments.length>3?arguments[3]:void 0;return AM(this,t),o=e.call(this),_0(A0(o),"logger",void 0),_0(A0(o),"speedAdjustment",0),_0(A0(o),"adjustSpeed",function(){var c=Hc(Ga().mark(function f(m,g){var p;return Ga().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o.speedAdjustment!==g){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,m.getPlaybackRate();case 4:return v.t0=v.sent,v.t1=o.speedAdjustment,v.t2=v.t0-v.t1,v.t3=g,p=v.t2+v.t3,o.log("New playbackRate:  ".concat(p)),v.next=12,m.setPlaybackRate(p);case 12:o.speedAdjustment=g;case 13:case"end":return v.stop()}},f)}));return function(f,m){return c.apply(this,arguments)}}()),o.logger=d,o.init(i,r,Hx(Hx({},fG),l)),o}return wM(t,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:function(){var r=Hc(Ga().mark(function o(l,d,c){var f=this,m,g,p;return Ga().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.waitForTOReadyState(l,"open");case 2:if(c.role!=="viewer"){v.next=10;break}return v.next=5,this.updatePlayer(l,d,c);case 5:m=Kx(l,"change",function(){return f.updatePlayer(l,d,c)}),g=this.maintainPlaybackPosition(l,d,c),this.addEventListener("disconnect",function(){g.cancel(),m.cancel()}),v.next=14;break;case 10:return v.next=12,this.updateTimingObject(l,d);case 12:p=Kx(d,["seeked","play","pause","ratechange"],function(){return f.updateTimingObject(l,d)},"on","off"),this.addEventListener("disconnect",function(){return p.cancel()});case 14:case"end":return v.stop()}},o,this)}));function i(o,l,d){return r.apply(this,arguments)}return i}()},{key:"updateTimingObject",value:function(){var r=Hc(Ga().mark(function o(l,d){return Ga().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=l,f.next=3,d.getCurrentTime();case 3:return f.t1=f.sent,f.next=6,d.getPaused();case 6:if(!f.sent){f.next=10;break}f.t2=0,f.next=13;break;case 10:return f.next=12,d.getPlaybackRate();case 12:f.t2=f.sent;case 13:f.t3=f.t2,f.t4={position:f.t1,velocity:f.t3},f.t0.update.call(f.t0,f.t4);case 16:case"end":return f.stop()}},o)}));function i(o,l){return r.apply(this,arguments)}return i}()},{key:"updatePlayer",value:function(){var r=Hc(Ga().mark(function o(l,d,c){var f,m,g;return Ga().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(f=l.query(),m=f.position,g=f.velocity,typeof m=="number"&&d.setCurrentTime(m),typeof g!="number"){y.next=25;break}if(g!==0){y.next=11;break}return y.next=6,d.getPaused();case 6:if(y.t0=y.sent,y.t0!==!1){y.next=9;break}d.pause();case 9:y.next=25;break;case 11:if(!(g>0)){y.next=25;break}return y.next=14,d.getPaused();case 14:if(y.t1=y.sent,y.t1!==!0){y.next=19;break}return y.next=18,d.play().catch(function(){var v=Hc(Ga().mark(function A(I){return Ga().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(I.name==="NotAllowedError"&&c.autoPlayMuted)){U.next=5;break}return U.next=3,d.setMuted(!0);case 3:return U.next=5,d.play().catch(function(M){return console.error("Couldn't play the video from TimingSrcConnector. Error:",M)});case 5:case"end":return U.stop()}},A)}));return function(A){return v.apply(this,arguments)}}());case 18:this.updatePlayer(l,d,c);case 19:return y.next=21,d.getPlaybackRate();case 21:if(y.t2=y.sent,y.t3=g,y.t2===y.t3){y.next=25;break}d.setPlaybackRate(g);case 25:case"end":return y.stop()}},o,this)}));function i(o,l,d){return r.apply(this,arguments)}return i}()},{key:"maintainPlaybackPosition",value:function(i,o,l){var d=this,c=l.allowedDrift,f=l.maxAllowedDrift,m=l.minCheckInterval,g=l.maxRateAdjustment,p=l.maxTimeToCatchUp,y=Math.min(p,Math.max(m,f))*1e3,v=function(){var I=Hc(Ga().mark(function P(){var U,M,B,ie,L;return Ga().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(O.t0=i.query().velocity===0,O.t0){O.next=6;break}return O.next=4,o.getPaused();case 4:O.t1=O.sent,O.t0=O.t1===!0;case 6:if(!O.t0){O.next=8;break}return O.abrupt("return");case 8:return O.t2=i.query().position,O.next=11,o.getCurrentTime();case 11:if(O.t3=O.sent,U=O.t2-O.t3,M=Math.abs(U),d.log("Drift: ".concat(U)),!(M>f)){O.next=22;break}return O.next=18,d.adjustSpeed(o,0);case 18:o.setCurrentTime(i.query().position),d.log("Resync by currentTime"),O.next=29;break;case 22:if(!(M>c)){O.next=29;break}return B=M/p,ie=g,L=B<ie?(ie-B)/2:ie,O.next=28,d.adjustSpeed(o,L*Math.sign(U));case 28:d.log("Resync by playbackRate");case 29:case"end":return O.stop()}},P)}));return function(){return I.apply(this,arguments)}}(),A=setInterval(function(){return v()},y);return{cancel:function(){return clearInterval(A)}}}},{key:"log",value:function(i){var o;(o=this.logger)===null||o===void 0||o.call(this,"TimingSrcConnector: ".concat(i))}},{key:"waitForTOReadyState",value:function(i,o){return new Promise(function(l){var d=function c(){i.readyState===o?l():i.addEventListener("readystatechange",c,{once:!0})};d()})}}]),t}(Iw(EventTarget)),Fh=new WeakMap,SS=new WeakMap,ns={},Tk=function(){function n(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(AM(this,n),window.jQuery&&e instanceof jQuery&&(e.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),e=e[0]),typeof document<"u"&&typeof e=="string"&&(e=document.getElementById(e)),!XH(e))throw new TypeError("You must pass either a valid element or a valid id.");if(e.nodeName!=="IFRAME"){var i=e.querySelector("iframe");i&&(e=i)}if(e.nodeName==="IFRAME"&&!_f(e.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(Fh.has(e))return Fh.get(e);this._window=e.ownerDocument.defaultView,this.element=e,this.origin="*";var o=new qs(function(d,c){if(t._onMessage=function(g){if(!(!_f(g.origin)||t.element.contentWindow!==g.source)){t.origin==="*"&&(t.origin=g.origin);var p=GT(g.data),y=p&&p.event==="error",v=y&&p.data&&p.data.method==="ready";if(v){var A=new Error(p.data.message);A.name=p.data.name,c(A);return}var I=p&&p.event==="ready",P=p&&p.method==="ping";if(I||P){t.element.setAttribute("data-ready","true"),d();return}aG(t,p)}},t._window.addEventListener("message",t._onMessage),t.element.nodeName!=="IFRAME"){var f=LM(e,r),m=CM(f);DM(m,f,e).then(function(g){var p=bk(g,e);return t.element=p,t._originalElement=e,iG(e,p),Fh.set(t.element,t),g}).catch(c)}});if(SS.set(this,o),Fh.set(this.element,this),this.element.nodeName==="IFRAME"&&Lc(this,"ping"),ns.isEnabled){var l=function(){return ns.exit()};this.fullscreenchangeHandler=function(){ns.isFullscreen?xp(t,"event:exitFullscreen",l):fT(t,"event:exitFullscreen",l),t.ready().then(function(){Lc(t,"fullscreenchange",ns.isFullscreen)})},ns.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return wM(n,[{key:"callMethod",value:function(t){for(var r=this,i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];if(t==null)throw new TypeError("You must pass a method name.");return new qs(function(d,c){return r.ready().then(function(){xp(r,t,{resolve:d,reject:c}),Lc(r,t,o)}).catch(c)})}},{key:"get",value:function(t){var r=this;return new qs(function(i,o){return t=Vx(t,"get"),r.ready().then(function(){xp(r,t,{resolve:i,reject:o}),Lc(r,t)}).catch(o)})}},{key:"set",value:function(t,r){var i=this;return new qs(function(o,l){if(t=Vx(t,"set"),r==null)throw new TypeError("There must be a value to set.");return i.ready().then(function(){xp(i,t,{resolve:o,reject:l}),Lc(i,t,r)}).catch(l)})}},{key:"on",value:function(t,r){if(!t)throw new TypeError("You must pass an event name.");if(!r)throw new TypeError("You must pass a callback function.");if(typeof r!="function")throw new TypeError("The callback must be a function.");var i=cT(this,"event:".concat(t));i.length===0&&this.callMethod("addEventListener",t).catch(function(){}),xp(this,"event:".concat(t),r)}},{key:"off",value:function(t,r){if(!t)throw new TypeError("You must pass an event name.");if(r&&typeof r!="function")throw new TypeError("The callback must be a function.");var i=fT(this,"event:".concat(t),r);i&&this.callMethod("removeEventListener",t).catch(function(o){})}},{key:"loadVideo",value:function(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function(){var t=SS.get(this)||new qs(function(r,i){i(new Error("Unknown player. Probably unloaded."))});return qs.resolve(t)}},{key:"addCuePoint",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:r})}},{key:"removeCuePoint",value:function(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function(t,r){if(!t)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:t,kind:r})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return ns.isEnabled?ns.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return ns.isEnabled?ns.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return ns.isEnabled?qs.resolve(ns.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var t=this;return new qs(function(r){if(SS.delete(t),Fh.delete(t.element),t._originalElement&&(Fh.delete(t._originalElement),t._originalElement.removeAttribute("data-vimeo-initialized")),t.element&&t.element.nodeName==="IFRAME"&&t.element.parentNode&&(t.element.parentNode.parentNode&&t._originalElement&&t._originalElement!==t.element.parentNode?t.element.parentNode.parentNode.removeChild(t.element.parentNode):t.element.parentNode.removeChild(t.element)),t.element&&t.element.nodeName==="DIV"&&t.element.parentNode){t.element.removeAttribute("data-vimeo-initialized");var i=t.element.querySelector("iframe");i&&i.parentNode&&(i.parentNode.parentNode&&t._originalElement&&t._originalElement!==i.parentNode?i.parentNode.parentNode.removeChild(i.parentNode):i.parentNode.removeChild(i))}t._window.removeEventListener("message",t._onMessage),ns.isEnabled&&ns.off("fullscreenchange",t.fullscreenchangeHandler),r()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(t){return this.set("autopause",t)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(t){return this.set("cameraProps",t)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return qs.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(t){return this.set("color",t)}},{key:"setColors",value:function(t){if(!Array.isArray(t))return new qs(function(o,l){return l(new TypeError("Argument must be an array."))});var r=new qs(function(o){return o(null)}),i=[t[0]?this.set("colorOne",t[0]):r,t[1]?this.set("colorTwo",t[1]):r,t[2]?this.set("colorThree",t[2]):r,t[3]?this.set("colorFour",t[3]):r];return qs.all(i)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(t){return this.set("currentTime",t)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(t){return this.set("loop",t)}},{key:"setMuted",value:function(t){return this.set("muted",t)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(t){return this.set("playbackRate",t)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(t){return this.set("quality",t)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(t){return this.set("volume",t)}},{key:"setTimingSrc",value:function(){var e=Hc(Ga().mark(function r(i,o){var l=this,d;return Ga().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(i){f.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return f.next=4,this.ready();case 4:return d=new hG(this,i,o),Lc(this,"notifyTimingObjectConnect"),d.addEventListener("disconnect",function(){return Lc(l,"notifyTimingObjectDisconnect")}),f.abrupt("return",d);case 8:case"end":return f.stop()}},r,this)}));function t(r,i){return e.apply(this,arguments)}return t}()}]),n}();RM||(ns=cG(),oG(),lG(),uG(),dG());const mG="https://player.vimeo.com/video",gG=/vimeo\.com\/(?:video\/)?(\d+)(?:\/([\w-]+))?/;function Yx(n,e={}){const t={src:pG(n,e),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return e.config&&(t["data-config"]=JSON.stringify(e.config)),`
    <style>
      :host {
        display: inline-block;
        min-width: 300px;
        min-height: 150px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
      }
      :host(:not([controls])) {
        pointer-events: none;
      }
    </style>
    <iframe${vG(t)}></iframe>
  `}function pG(n,e){if(!n.src)return;const t=n.src.match(gG),r=t&&t[1],i=t&&t[2],o={controls:n.controls===""?null:0,autoplay:n.autoplay,loop:n.loop,muted:n.muted,playsinline:n.playsinline,preload:n.preload??"metadata",transparent:!1,autopause:n.autopause,h:i,...e.config};return`${mG}/${r}?${yG(o)}`}var Nm,Pm,Kv,Sd,Ad,wd,rs,tf,nf,Id,rf,kd,Mm,Om,af,vT,NM;class gv extends(globalThis.HTMLElement??class{}){constructor(){super();cn(this,vT);tr(this,"loadComplete",new Wx);cn(this,Nm);cn(this,Pm);cn(this,Kv);cn(this,Sd,0);cn(this,Ad,NaN);cn(this,wd,!1);cn(this,rs,!this.autoplay);cn(this,tf,1);cn(this,nf,0);cn(this,Id,0);cn(this,rf,!1);cn(this,kd,1);cn(this,Mm,NaN);cn(this,Om,NaN);cn(this,af,null);rr(this,vT,NM).call(this,"config")}requestFullscreen(){var t,r;return(r=(t=this.api)==null?void 0:t.requestFullscreen)==null?void 0:r.call(t)}exitFullscreen(){var t,r;return(r=(t=this.api)==null?void 0:t.exitFullscreen)==null?void 0:r.call(t)}requestPictureInPicture(){var t,r;return(r=(t=this.api)==null?void 0:t.requestPictureInPicture)==null?void 0:r.call(t)}exitPictureInPicture(){var t,r;return(r=(t=this.api)==null?void 0:t.exitPictureInPicture)==null?void 0:r.call(t)}get config(){return qe(this,af)}set config(t){Tt(this,af,t)}async load(){var t;if(qe(this,Nm))return;const r=!qe(this,Pm);qe(this,Pm)&&(this.loadComplete=new Wx),Tt(this,Pm,!0),await Tt(this,Nm,Promise.resolve()),Tt(this,Nm,null),Tt(this,Sd,0),Tt(this,Ad,NaN),Tt(this,wd,!1),Tt(this,rs,!this.autoplay),Tt(this,tf,1),Tt(this,nf,0),Tt(this,Id,0),Tt(this,rf,!1),Tt(this,kd,1),Tt(this,Id,0),Tt(this,Mm,NaN),Tt(this,Om,NaN),this.dispatchEvent(new Event("emptied"));let i=this.api;if(this.api=null,!this.src)return;this.dispatchEvent(new Event("loadstart"));const o={autoplay:this.autoplay,controls:this.controls,loop:this.loop,muted:this.defaultMuted,playsinline:this.playsInline,preload:this.preload??"metadata",transparent:!1,autopause:this.hasAttribute("autopause"),...qe(this,af)},l=async()=>{Tt(this,Id,1),this.dispatchEvent(new Event("loadedmetadata")),this.api&&(Tt(this,wd,await this.api.getMuted()),Tt(this,kd,await this.api.getVolume()),this.dispatchEvent(new Event("volumechange")),Tt(this,Ad,await this.api.getDuration()),this.dispatchEvent(new Event("durationchange"))),this.dispatchEvent(new Event("loadcomplete")),this.loadComplete.resolve()};if(qe(this,Kv)){this.api=i,await this.api.loadVideo({...o,url:this.src}),await l(),await this.loadComplete;return}Tt(this,Kv,!0);let d=(t=this.shadowRoot)==null?void 0:t.querySelector("iframe");r&&d&&Tt(this,af,JSON.parse(d.getAttribute("data-config")||"{}")),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=Yx(bG(this.attributes),this),d=this.shadowRoot.querySelector("iframe")),this.api=new Tk(d);const c=()=>{this.api.off("loaded",c),l()};this.api.on("loaded",c),this.api.on("bufferstart",()=>{qe(this,rs)&&(Tt(this,rs,!1),this.dispatchEvent(new Event("play"))),this.dispatchEvent(new Event("waiting"))}),this.api.on("play",()=>{qe(this,rs)&&(Tt(this,rs,!1),this.dispatchEvent(new Event("play")))}),this.api.on("playing",()=>{Tt(this,Id,3),Tt(this,rs,!1),this.dispatchEvent(new Event("playing"))}),this.api.on("seeking",()=>{Tt(this,rf,!0),this.dispatchEvent(new Event("seeking"))}),this.api.on("seeked",()=>{Tt(this,rf,!1),this.dispatchEvent(new Event("seeked"))}),this.api.on("pause",()=>{Tt(this,rs,!0),this.dispatchEvent(new Event("pause"))}),this.api.on("ended",()=>{Tt(this,rs,!0),this.dispatchEvent(new Event("ended"))}),this.api.on("ratechange",({playbackRate:f})=>{Tt(this,tf,f),this.dispatchEvent(new Event("ratechange"))}),this.api.on("volumechange",async({volume:f})=>{Tt(this,kd,f),this.api&&Tt(this,wd,await this.api.getMuted()),this.dispatchEvent(new Event("volumechange"))}),this.api.on("durationchange",({duration:f})=>{Tt(this,Ad,f),this.dispatchEvent(new Event("durationchange"))}),this.api.on("timeupdate",({seconds:f})=>{Tt(this,Sd,f),this.dispatchEvent(new Event("timeupdate"))}),this.api.on("progress",({seconds:f})=>{Tt(this,nf,f),this.dispatchEvent(new Event("progress"))}),this.api.on("resize",({videoWidth:f,videoHeight:m})=>{Tt(this,Mm,f),Tt(this,Om,m),this.dispatchEvent(new Event("resize"))}),await this.loadComplete}async attributeChangedCallback(t,r,i){if(r!==i){switch(t){case"autoplay":case"controls":case"src":{this.load();return}}switch(await this.loadComplete,t){case"loop":{this.api.setLoop(this.loop);break}}}}async play(){var t;Tt(this,rs,!1),this.dispatchEvent(new Event("play")),await this.loadComplete;try{await((t=this.api)==null?void 0:t.play())}catch(r){throw Tt(this,rs,!0),this.dispatchEvent(new Event("pause")),r}}async pause(){var t;return await this.loadComplete,(t=this.api)==null?void 0:t.pause()}get ended(){return qe(this,Sd)>=qe(this,Ad)}get seeking(){return qe(this,rf)}get readyState(){return qe(this,Id)}get videoWidth(){return qe(this,Mm)}get videoHeight(){return qe(this,Om)}get src(){return this.getAttribute("src")}set src(t){this.src!=t&&this.setAttribute("src",t)}get paused(){return qe(this,rs)}get duration(){return qe(this,Ad)}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(t){this.autoplay!=t&&this.toggleAttribute("autoplay",!!t)}get buffered(){return qe(this,nf)>0?Qx(0,qe(this,nf)):Qx()}get controls(){return this.hasAttribute("controls")}set controls(t){this.controls!=t&&this.toggleAttribute("controls",!!t)}get currentTime(){return qe(this,Sd)}set currentTime(t){this.currentTime!=t&&(Tt(this,Sd,t),this.loadComplete.then(()=>{var r;(r=this.api)==null||r.setCurrentTime(t).catch(()=>{})}))}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(t){this.defaultMuted!=t&&this.toggleAttribute("muted",!!t)}get loop(){return this.hasAttribute("loop")}set loop(t){this.loop!=t&&this.toggleAttribute("loop",!!t)}get muted(){return qe(this,wd)}set muted(t){this.muted!=t&&(Tt(this,wd,t),this.loadComplete.then(()=>{var r;(r=this.api)==null||r.setMuted(t).catch(()=>{})}))}get playbackRate(){return qe(this,tf)}set playbackRate(t){this.playbackRate!=t&&(Tt(this,tf,t),this.loadComplete.then(()=>{var r;(r=this.api)==null||r.setPlaybackRate(t).catch(()=>{})}))}get playsInline(){return this.hasAttribute("playsinline")}set playsInline(t){this.playsInline!=t&&this.toggleAttribute("playsinline",!!t)}get poster(){return this.getAttribute("poster")}set poster(t){this.poster!=t&&this.setAttribute("poster",`${t}`)}get volume(){return qe(this,kd)}set volume(t){this.volume!=t&&(Tt(this,kd,t),this.loadComplete.then(()=>{var r;(r=this.api)==null||r.setVolume(t).catch(()=>{})}))}}Nm=new WeakMap,Pm=new WeakMap,Kv=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,wd=new WeakMap,rs=new WeakMap,tf=new WeakMap,nf=new WeakMap,Id=new WeakMap,rf=new WeakMap,kd=new WeakMap,Mm=new WeakMap,Om=new WeakMap,af=new WeakMap,vT=new WeakSet,NM=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const r=this[t];delete this[t],this[t]=r}},tr(gv,"getTemplateHTML",Yx),tr(gv,"shadowRootOptions",{mode:"open"}),tr(gv,"observedAttributes",["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src"]);function vG(n){let e="";for(const t in n){const r=n[t];r===""?e+=` ${AS(t)}`:e+=` ${AS(t)}="${AS(`${r}`)}"`}return e}function AS(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}function yG(n){return String(new URLSearchParams(EG(n)))}function EG(n){let e={};for(let t in n){let r=n[t];r===!0||r===""?e[t]=1:r===!1?e[t]=0:r!=null&&(e[t]=r)}return e}function bG(n){let e={};for(let t of n)e[t.name]=t.value;return e}let Wx=class extends Promise{constructor(e=()=>{}){let t,r;super((i,o)=>{e(i,o),t=i,r=o}),this.resolve=t,this.reject=r}};function Qx(n,e){return Array.isArray(n)?wS(n):n==null||e==null||n===0&&e===0?wS([[0,0]]):wS([[n,e]])}function wS(n){return Object.defineProperties(n,{start:{value:e=>n[e][0]},end:{value:e=>n[e][1]}}),n}globalThis.customElements&&!globalThis.customElements.get("vimeo-video")&&globalThis.customElements.define("vimeo-video",gv);var TG=gv,_G=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),SG={className:"class",htmlFor:"for"};function PM(n){return n.toLowerCase()}function Xx(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function AG({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=PM,toAttributeValue:d=Xx}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(_G.has(B)){U[B]=ie;continue}const L=l(SG[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=Xx(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)Zx(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)Zx(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function Zx(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var wG=AG({react:jr,tagName:"vimeo-video",elementClass:TG,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":PM(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const IG=Object.freeze(Object.defineProperty({__proto__:null,default:wG},Symbol.toStringTag,{value:"Module"})),kG=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"];var _C;const kw=(_C=globalThis.document)==null?void 0:_C.createElement("template");kw&&(kw.innerHTML=`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video,
      audio {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
      }
    </style>
    <slot></slot>
  `);const MM=(n,{tag:e,is:t})=>{var o,l,d,c,OM,m,g,p,y,v,A,I,am,FM,UM,zM,BM,$M;const r=(o=globalThis.document)==null?void 0:o.createElement(e,{is:t}),i=r?Jx(r):[];return l=class extends n{constructor(){super();cn(this,I);cn(this,m);cn(this,g);cn(this,p,!1);cn(this,y,!1);cn(this,v);cn(this,A);this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.load!==l.prototype.load&&(this.loadComplete=new eC)}static get observedAttributes(){var D,ve;return rr(D=l,c,OM).call(D),[...((ve=r==null?void 0:r.constructor)==null?void 0:ve.observedAttributes)??[],"autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"]}get loadComplete(){return qe(this,g)}set loadComplete(oe){Tt(this,y,!1),Tt(this,g,oe),oe==null||oe.then(()=>{Tt(this,y,!0)})}get isLoaded(){return qe(this,y)}get nativeEl(){return qe(this,v)??this.shadowRoot.querySelector(e)??this.querySelector(e)}set nativeEl(oe){Tt(this,v,oe)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(oe){this.toggleAttribute("muted",!!oe)}get src(){return this.getAttribute("src")}set src(oe){this.setAttribute("src",`${oe}`)}get preload(){var oe;return this.getAttribute("preload")??((oe=this.nativeEl)==null?void 0:oe.preload)}set preload(oe){this.setAttribute("preload",`${oe}`)}attributeChangedCallback(oe,D,ve){rr(this,I,am).call(this),oe==="src"&&this.load!==l.prototype.load&&rr(this,I,BM).call(this),rr(this,I,$M).call(this,oe,D,ve)}connectedCallback(){rr(this,I,am).call(this)}},d=new WeakMap,c=new WeakSet,OM=function(){if(qe(this,d))return;Tt(this,d,!0);const oe=new Set(this.observedAttributes);oe.delete("muted");for(let D of i){if(D in this.prototype)continue;if(typeof r[D]=="function")this.prototype[D]=function(...Le){rr(this,I,am).call(this);const te=()=>this.call?this.call(D,...Le):this.nativeEl[D].apply(this.nativeEl,Le);return this.loadComplete&&!this.isLoaded?this.loadComplete.then(te):te()};else{let Le={get(){var $e,Ue;rr(this,I,am).call(this);let te=D.toLowerCase();if(oe.has(te)){const Re=this.getAttribute(te);return Re===null?!1:Re===""?!0:Re}return(($e=this.get)==null?void 0:$e.call(this,D))??((Ue=this.nativeEl)==null?void 0:Ue[D])??qe(this,A)[D]}};D!==D.toUpperCase()&&(Le.set=async function(te){rr(this,I,am).call(this);let $e=D.toLowerCase();if(oe.has($e)){te===!0||te===!1||te==null?this.toggleAttribute($e,!!te):this.setAttribute($e,te);return}if(this.loadComplete&&!this.isLoaded&&await this.loadComplete,this.set){this.set(D,te);return}this.nativeEl[D]=te}),Object.defineProperty(this.prototype,D,Le)}}},m=new WeakMap,g=new WeakMap,p=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,I=new WeakSet,am=async function(){var ve,Le;if(qe(this,m))return;Tt(this,m,!0),rr(this,I,UM).call(this),rr(this,I,zM).call(this);for(let te of i)rr(this,I,FM).call(this,te);const oe=new Map,D=this.shadowRoot.querySelector("slot:not([name])");D==null||D.addEventListener("slotchange",()=>{const te=new Map(oe);D.assignedElements().filter($e=>["track","source"].includes($e.localName)).forEach(async $e=>{var Re,Xe;te.delete($e);let Ue=oe.get($e);Ue||(Ue=$e.cloneNode(),oe.set($e,Ue)),this.loadComplete&&!this.isLoaded&&await this.loadComplete,(Xe=(Re=this.nativeEl).append)==null||Xe.call(Re,Ue)}),te.forEach($e=>$e.remove())});for(let te of this.constructor.Events)(Le=(ve=this.shadowRoot).addEventListener)==null||Le.call(ve,te,$e=>{$e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent($e.type,{detail:$e.detail}))},!0)},FM=function(oe){if(Object.prototype.hasOwnProperty.call(this,oe)){const D=this[oe];delete this[oe],this[oe]=D}},UM=function(){const oe=document.createElement(e,{is:t});oe.muted=this.hasAttribute("muted");for(let{name:D,value:ve}of this.attributes)oe.setAttribute(D,ve);Tt(this,A,{});for(let D of Jx(oe))qe(this,A)[D]=oe[D];oe.removeAttribute("src"),oe.load()},zM=async function(){if(this.loadComplete&&!this.isLoaded&&await this.loadComplete,!this.nativeEl){const oe=document.createElement(e,{is:t});oe.part=e,this.shadowRoot.append(oe)}this.nativeEl.muted=this.hasAttribute("muted")},BM=async function(){var oe;qe(this,p)&&(this.loadComplete=new eC),Tt(this,p,!0),await Promise.resolve(),await this.load(),(oe=this.loadComplete)==null||oe.resolve(),await this.loadComplete},$M=async function(oe,D,ve){var Le,te,$e,Ue;this.loadComplete&&!this.isLoaded&&await this.loadComplete,!["id","class",...this.constructor.skipAttributes].includes(oe)&&(ve===null?(te=(Le=this.nativeEl).removeAttribute)==null||te.call(Le,oe):(Ue=($e=this.nativeEl).setAttribute)==null||Ue.call($e,oe,ve))},cn(l,c),tr(l,"Events",kG),tr(l,"template",kw),tr(l,"skipAttributes",[]),cn(l,d),l};function Jx(n){let e=[];for(let t=Object.getPrototypeOf(n);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t))e.push(...Object.getOwnPropertyNames(t));return e}let eC=class extends Promise{constructor(e=()=>{}){let t,r;super((i,o)=>{e(i,o),t=i,r=o}),this.resolve=t,this.reject=r}};const RG=globalThis.document?MM(HTMLElement,{tag:"video"}):class{};globalThis.document&&MM(HTMLElement,{tag:"audio"});var tC,nC;const Rw=(tC=globalThis.document)==null?void 0:tC.createElement("template");Rw&&(Rw.innerHTML=`
  <div class="wistia_embed"></div>
  `);const xw=(nC=globalThis.document)==null?void 0:nC.createElement("template");xw&&(xw.innerHTML=`
  <style>
    :host {
      display: inline-block;
      min-width: 300px;
      min-height: 150px;
      position: relative;
    }
    ::slotted(.wistia_embed) {
      position: absolute;
      width: 100%;
      height: 100%;
    }
  </style>
  <slot></slot>
  `);class hT extends RG{get nativeEl(){var e;return((e=this.api)==null?void 0:e.elem())??this.querySelector("video")}async load(){var e;if((e=this.querySelector(".wistia_embed"))==null||e.remove(),!this.src)return;await new Promise(d=>setTimeout(d,50));const t=/(?:wistia\.com|wi\.st)\/(?:medias|embed)\/(.*)$/i,r=this.src.match(t)[1],i={autoPlay:this.autoplay,preload:this.preload??"metadata",playsinline:this.playsInline,endVideoBehavior:this.loop&&"loop",chromeless:!this.controls,playButton:this.controls,muted:this.defaultMuted};this.append(Rw.content.cloneNode(!0));const o=this.querySelector(".wistia_embed");o.id||(o.id=LG(r)),o.classList.add(`wistia_async_${r}`),await xG("https://fast.wistia.com/assets/external/E-v1.js","Wistia"),this.api=await new Promise(d=>{globalThis._wq.push({id:o.id,onReady:d,options:i})})}async attributeChangedCallback(e,t,r){if(e==="controls"){switch(await this.loadComplete,e){case"controls":this.api.bigPlayButtonEnabled(this.controls),this.controls?this.api.releaseChromeless():this.api.requestChromeless();break}return}super.attributeChangedCallback(e,t,r)}get duration(){var e;return(e=this.api)==null?void 0:e.duration()}play(){return this.api.play(),new Promise(e=>this.addEventListener("playing",e))}}tr(hT,"template",xw),tr(hT,"skipAttributes",["src"]);const IS={};async function xG(n,e){return IS[n]?IS[n]:self[e]?self[e]:IS[n]=new Promise((t,r)=>{const i=document.createElement("script");i.defer=!0,i.src=n,i.onload=()=>t(self[e]),i.onerror=r,document.head.append(i)})}let CG=0;function LG(n){const e=++CG;return`${n}${e}`}globalThis.customElements&&!globalThis.customElements.get("wistia-video")&&globalThis.customElements.define("wistia-video",hT);var DG=hT,NG=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),PG={className:"class",htmlFor:"for"};function jM(n){return n.toLowerCase()}function rC(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function MG({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=jM,toAttributeValue:d=rC}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(NG.has(B)){U[B]=ie;continue}const L=l(PG[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=rC(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)iC(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)iC(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function iC(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var OG=MG({react:jr,tagName:"wistia-video",elementClass:DG,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":jM(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const FG=Object.freeze(Object.defineProperty({__proto__:null,default:OG},Symbol.toStringTag,{value:"Module"})),UG="https://open.spotify.com",zG=/open\.spotify\.com\/(\w+)\/(\w+)/i,BG="https://open.spotify.com/embed-podcast/iframe-api/v1",$G="SpotifyIframeApi",jG="onSpotifyIframeApiReady";function aC(n,e={}){const t={src:qM(n,e),scrolling:"no",frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return`
    <style>
      :host {
        display: inline-block;
        min-width: 160px;
        min-height: 80px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      :host(:not([controls])) {
        display: none !important;
      }
    </style>
    <iframe${qG(t)}></iframe>
  `}function qM(n,e){var t,r,i;if(!n.src)return;const o=n.src.match(zG),l=o&&o[1],d=o&&o[2],c={t:(t=e.config)==null?void 0:t.startAt,theme:((r=e.config)==null?void 0:r.theme)==="dark"?"0":null},f=(i=e.config)!=null&&i.preferVideo?"/video":"";return`${UG}/embed/${l}/${d}${f}?${HG(c)}`}var Fm,Yv,Wv,tl,nl,rl,il,sf,of,Qv,yT,HM;class pv extends(globalThis.HTMLElement??class{}){constructor(){super();cn(this,yT);tr(this,"loadComplete",new oC);cn(this,Fm);cn(this,Yv);cn(this,Wv);cn(this,tl,!1);cn(this,nl,!1);cn(this,rl,!0);cn(this,il,0);cn(this,sf,NaN);cn(this,of,!1);cn(this,Qv,null);rr(this,yT,HM).call(this,"config")}async load(){var t,r,i;if(qe(this,Fm))return;qe(this,Yv)&&(this.loadComplete=new oC),Tt(this,Yv,!0),await Tt(this,Fm,Promise.resolve()),Tt(this,Fm,null),Tt(this,tl,!1),Tt(this,nl,!1),Tt(this,il,0),Tt(this,sf,NaN),Tt(this,of,!1),this.dispatchEvent(new Event("emptied"));let o=this.api;if(this.api=null,!this.src)return;this.dispatchEvent(new Event("loadstart"));const l={t:(t=this.config)==null?void 0:t.startAt,theme:((r=this.config)==null?void 0:r.theme)==="dark"?"0":null,preferVideo:(i=this.config)==null?void 0:i.preferVideo};if(qe(this,Wv))this.api=o,this.api.iframeElement.src=qM(sC(this.attributes),this);else{Tt(this,Wv,!0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=aC(sC(this.attributes),this));let d=this.shadowRoot.querySelector("iframe");const c=await VG(BG,$G,jG);this.api=await new Promise(f=>c.createController(d,l,f)),this.api.iframeElement=d,this.api.addListener("ready",()=>{this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("volumechange"))}),this.api.addListener("playback_update",f=>{if(qe(this,nl)&&qe(this,rl)&&(f.data.isBuffering||!f.data.isPaused)){Tt(this,nl,!1),this.currentTime=1;return}if(f.data.duration/1e3!==qe(this,sf)&&(Tt(this,nl,!1),Tt(this,sf,f.data.duration/1e3),this.dispatchEvent(new Event("durationchange"))),f.data.position/1e3!==qe(this,il)&&(Tt(this,of,!1),Tt(this,nl,!1),Tt(this,il,f.data.position/1e3),this.dispatchEvent(new Event("timeupdate"))),!qe(this,tl)&&!qe(this,rl)&&f.data.isPaused){Tt(this,rl,!0),this.dispatchEvent(new Event("pause"));return}if(qe(this,rl)&&(f.data.isBuffering||!f.data.isPaused)){Tt(this,rl,!1),this.dispatchEvent(new Event("play")),Tt(this,tl,f.data.isBuffering),qe(this,tl)?this.dispatchEvent(new Event("waiting")):this.dispatchEvent(new Event("playing"));return}if(qe(this,tl)&&!f.data.isPaused){Tt(this,tl,!1),this.dispatchEvent(new Event("playing"));return}if(!this.paused&&!this.seeking&&!qe(this,nl)&&Math.ceil(this.currentTime)>=this.duration){if(Tt(this,nl,!0),this.loop){this.currentTime=1;return}this.continuous||(this.pause(),this.dispatchEvent(new Event("ended")));return}})}this.loadComplete.resolve(),await this.loadComplete}async attributeChangedCallback(t,r,i){if(r!==i)switch(t){case"src":{this.load();return}}}async play(){var t;return Tt(this,rl,!1),Tt(this,tl,!0),this.dispatchEvent(new Event("play")),await this.loadComplete,(t=this.api)==null?void 0:t.resume()}async pause(){var t;return await this.loadComplete,(t=this.api)==null?void 0:t.pause()}get config(){return qe(this,Qv)}set config(t){Tt(this,Qv,t)}get paused(){return qe(this,rl)??!0}get muted(){return!1}set muted(t){}get volume(){return 1}set volume(t){}get ended(){return Math.ceil(this.currentTime)>=this.duration}get seeking(){return qe(this,of)}get loop(){return this.hasAttribute("loop")}set loop(t){this.loop!=t&&this.toggleAttribute("loop",!!t)}get currentTime(){return qe(this,il)}set currentTime(t){if(this.currentTime==t)return;Tt(this,of,!0);let r=qe(this,il);Tt(this,il,t),this.dispatchEvent(new Event("timeupdate")),Tt(this,il,r),this.loadComplete.then(()=>{var i;(i=this.api)==null||i.seek(t)})}get duration(){return qe(this,sf)}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",`${t}`)}}Fm=new WeakMap,Yv=new WeakMap,Wv=new WeakMap,tl=new WeakMap,nl=new WeakMap,rl=new WeakMap,il=new WeakMap,sf=new WeakMap,of=new WeakMap,Qv=new WeakMap,yT=new WeakSet,HM=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const r=this[t];delete this[t],this[t]=r}},tr(pv,"getTemplateHTML",aC),tr(pv,"shadowRootOptions",{mode:"open"}),tr(pv,"observedAttributes",["controls","loop","src"]);function qG(n){let e="";for(const t in n){const r=n[t];r===""?e+=` ${t}`:e+=` ${t}="${r}"`}return e}function HG(n){return String(new URLSearchParams(GG(n)))}function GG(n){let e={};for(let t in n){let r=n[t];r===!0||r===""?e[t]=1:r===!1?e[t]=0:r!=null&&(e[t]=r)}return e}function sC(n){let e={};for(let t of n)e[t.name]=t.value;return e}const kS={};async function VG(n,e,t){return kS[n]?kS[n]:self[e]?Promise.resolve(self[e]):kS[n]=new Promise(function(r,i){const o=document.createElement("script");o.src=n;const l=d=>r(d);self[t]=l,o.onload=()=>!1,o.onerror=i,document.head.append(o)})}let oC=class extends Promise{constructor(e=()=>{}){let t,r;super((i,o)=>{e(i,o),t=i,r=o}),this.resolve=t,this.reject=r}};globalThis.customElements&&!globalThis.customElements.get("spotify-audio")&&globalThis.customElements.define("spotify-audio",pv);var KG=pv,YG=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),WG={className:"class",htmlFor:"for"};function GM(n){return n.toLowerCase()}function lC(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function QG({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=GM,toAttributeValue:d=lC}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(YG.has(B)){U[B]=ie;continue}const L=l(WG[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=lC(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)uC(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)uC(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function uC(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var XG=QG({react:jr,tagName:"spotify-audio",elementClass:KG,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":GM(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const ZG=Object.freeze(Object.defineProperty({__proto__:null,default:XG},Symbol.toStringTag,{value:"Module"})),Cw="https://player.twitch.tv",JG=/(?:www\.|go\.)?twitch\.tv\/(?:videos?\/|\?video=)(\d+)($|\?)/,e7=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,dC={IDLE:"Idle",ENDED:"Ended"},Cp={PAUSE:2,PLAY:3,SEEK:4,SET_MUTED:10,SET_VOLUME:11};function cC(n,e={}){const t={src:VM(n,e),frameborder:"0",width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; picture-in-picture;",sandbox:"allow-modals allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox",scrolling:"no"};return e.config&&(t["data-config"]=JSON.stringify(e.config)),`
    <style>
      :host {
        display: inline-block;
        min-width: 300px;
        min-height: 150px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      :host(:not([controls])) {
        pointer-events: none;
      }
    </style>
    <iframe${n7(t)}></iframe>
  `}function VM(n,e){var t;if(!n.src)return;const r=n.src.match(JG),i=n.src.match(e7),o={parent:(t=globalThis.location)==null?void 0:t.hostname,controls:n.controls===""?null:!1,autoplay:n.autoplay===""?null:!1,muted:n.muted,preload:n.preload,...e.config};if(r){const l=r[1];return`${Cw}/?video=v${l}&${fC(o)}`}else if(i){const l=i[1];return`${Cw}/?channel=${l}&${fC(o)}`}return""}var Um,zm,Rd,Ci,Xv,Zv,Jv,Bm,lf,uf,$m,ey,ul,sm,KM;class vv extends(globalThis.HTMLElement??class{}){constructor(){super();cn(this,ul);tr(this,"loadComplete",new hC);cn(this,Um);cn(this,zm);cn(this,Rd);cn(this,Ci,{});cn(this,Xv,0);cn(this,Zv,!1);cn(this,Jv,1);cn(this,Bm,!this.autoplay);cn(this,lf,!1);cn(this,uf,0);cn(this,$m,null);cn(this,ey,async t=>{var r,i,o,l;if(!qe(this,Rd).contentWindow)return;const{data:d,source:c}=t;if(c===qe(this,Rd).contentWindow){if(d.namespace==="twitch-embed")await new Promise(m=>setTimeout(m,10)),d.eventName==="ready"?(this.dispatchEvent(new Event("loadcomplete")),this.loadComplete.resolve(),Tt(this,uf,1),this.dispatchEvent(new Event("loadedmetadata"))):d.eventName==="seek"?(Tt(this,lf,!0),this.dispatchEvent(new Event("seeking"))):d.eventName==="playing"?(qe(this,lf)&&(Tt(this,lf,!1),this.dispatchEvent(new Event("seeked"))),Tt(this,uf,3),this.dispatchEvent(new Event("playing"))):this.dispatchEvent(new Event(d.eventName));else if(d.namespace==="twitch-embed-player-proxy"&&d.eventName==="UPDATE_STATE"){const m=qe(this,Ci).duration,g=qe(this,Ci).currentTime,p=qe(this,Ci).volume,y=qe(this,Ci).muted,v=(i=(r=qe(this,Ci).stats)==null?void 0:r.videoStats)==null?void 0:i.bufferSize;Tt(this,Ci,{...qe(this,Ci),...d.params}),m!==qe(this,Ci).duration&&this.dispatchEvent(new Event("durationchange")),g!==qe(this,Ci).currentTime&&this.dispatchEvent(new Event("timeupdate")),(p!==qe(this,Ci).volume||y!==qe(this,Ci).muted)&&this.dispatchEvent(new Event("volumechange")),v!==((l=(o=qe(this,Ci).stats)==null?void 0:o.videoStats)==null?void 0:l.bufferSize)&&this.dispatchEvent(new Event("progress"))}}});rr(this,ul,KM).call(this,"config")}get config(){return qe(this,$m)}set config(t){Tt(this,$m,t)}async load(){if(qe(this,Um))return;this.shadowRoot||this.attachShadow({mode:"open"});const t=!qe(this,zm);if(qe(this,zm)&&(this.loadComplete=new hC),Tt(this,zm,!0),await Tt(this,Um,Promise.resolve()),Tt(this,Um,null),Tt(this,uf,0),this.dispatchEvent(new Event("emptied")),!this.src){this.shadowRoot.innerHTML="",globalThis.removeEventListener("message",qe(this,ey));return}this.dispatchEvent(new Event("loadstart"));let r=this.shadowRoot.querySelector("iframe");const i=t7(this.attributes);t&&r&&Tt(this,$m,JSON.parse(r.getAttribute("data-config")||"{}")),(!(r!=null&&r.src)||r.src!==VM(i,this))&&(this.shadowRoot.innerHTML=cC(i,this),r=this.shadowRoot.querySelector("iframe")),Tt(this,Rd,r),globalThis.addEventListener("message",qe(this,ey))}attributeChangedCallback(t,r,i){if(r!==i)switch(t){case"src":case"controls":{this.load();break}}}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}get readyState(){return qe(this,uf)}get seeking(){return qe(this,lf)}get buffered(){var t,r;return i7(0,((r=(t=qe(this,Ci).stats)==null?void 0:t.videoStats)==null?void 0:r.bufferSize)??0)}get paused(){return qe(this,Ci).playback?qe(this,Ci).playback===dC.IDLE:qe(this,Bm)}get ended(){return qe(this,Ci).playback?qe(this,Ci).playback===dC.ENDED:!1}get duration(){return qe(this,Ci).duration??NaN}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(t){this.autoplay!=t&&this.toggleAttribute("autoplay",!!t)}get controls(){return this.hasAttribute("controls")}set controls(t){this.controls!=t&&this.toggleAttribute("controls",!!t)}get currentTime(){return qe(this,Ci).currentTime?qe(this,Ci).currentTime:qe(this,Xv)}set currentTime(t){Tt(this,Xv,t),this.loadComplete.then(()=>{rr(this,ul,sm).call(this,Cp.SEEK,t)})}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(t){this.toggleAttribute("muted",!!t)}get loop(){return this.hasAttribute("loop")}set loop(t){this.toggleAttribute("loop",!!t)}get muted(){return qe(this,Zv)}set muted(t){Tt(this,Zv,t),this.loadComplete.then(()=>{rr(this,ul,sm).call(this,Cp.SET_MUTED,t)})}get volume(){return qe(this,Jv)}set volume(t){Tt(this,Jv,t),this.loadComplete.then(()=>{rr(this,ul,sm).call(this,Cp.SET_VOLUME,t)})}get playsInline(){return this.hasAttribute("playsinline")}set playsInline(t){this.toggleAttribute("playsinline",!!t)}play(){Tt(this,Bm,!1),rr(this,ul,sm).call(this,Cp.PLAY)}pause(){Tt(this,Bm,!0),rr(this,ul,sm).call(this,Cp.PAUSE)}}Um=new WeakMap,zm=new WeakMap,Rd=new WeakMap,Ci=new WeakMap,Xv=new WeakMap,Zv=new WeakMap,Jv=new WeakMap,Bm=new WeakMap,lf=new WeakMap,uf=new WeakMap,$m=new WeakMap,ey=new WeakMap,ul=new WeakSet,sm=function(t,r){if(!qe(this,Rd).contentWindow)return;const i={eventName:t,params:r,namespace:"twitch-embed-player-proxy"};qe(this,Rd).contentWindow.postMessage(i,Cw)},KM=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const r=this[t];delete this[t],this[t]=r}},tr(vv,"getTemplateHTML",cC),tr(vv,"shadowRootOptions",{mode:"open"}),tr(vv,"observedAttributes",["autoplay","controls","loop","muted","playsinline","preload","src"]);function t7(n){let e={};for(let t of n)e[t.name]=t.value;return e}function n7(n){let e="";for(const t in n){const r=n[t];r===""?e+=` ${RS(t)}`:e+=` ${RS(t)}="${RS(`${r}`)}"`}return e}function RS(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}function fC(n){return String(new URLSearchParams(r7(n)))}function r7(n){let e={};for(let t in n){let r=n[t];r===!0||r===""?e[t]=!0:r===!1?e[t]=!1:r!=null&&(e[t]=r)}return e}let hC=class extends Promise{constructor(e=()=>{}){let t,r;super((i,o)=>{e(i,o),t=i,r=o}),this.resolve=t,this.reject=r}};function i7(n,e){return Array.isArray(n)?xS(n):e==null||e===0?xS([[0,0]]):xS([[n,e]])}function xS(n){return Object.defineProperties(n,{start:{value:e=>n[e][0]},end:{value:e=>n[e][1]}}),n}globalThis.customElements&&!globalThis.customElements.get("twitch-video")&&globalThis.customElements.define("twitch-video",vv);var a7=vv,s7=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),o7={className:"class",htmlFor:"for"};function YM(n){return n.toLowerCase()}function mC(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function l7({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=YM,toAttributeValue:d=mC}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(s7.has(B)){U[B]=ie;continue}const L=l(o7[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=mC(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)gC(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)gC(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function gC(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var u7=l7({react:jr,tagName:"twitch-video",elementClass:a7,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":YM(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const d7=Object.freeze(Object.defineProperty({__proto__:null,default:u7},Symbol.toStringTag,{value:"Module"})),c7="https://www.tiktok.com/player/v1",f7=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,od={INIT:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3},h7={[od.INIT]:"emptied",[od.PAUSED]:"pause",[od.ENDED]:"ended",[od.PLAYING]:"play",[od.BUFFERING]:"waiting"};function pC(n,e={}){const t={src:WM(n,e),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; autoplay; fullscreen; encrypted-media; gyroscope; picture-in-picture"};return e.config&&(t["data-config"]=JSON.stringify(e.config)),`
    <style>
      :host {
        display:inline-block;
        min-width: 300px;
        min-height: 150px;
        position: relative;
      }
      iframe {
        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:100%;
        border:0;
      }
    </style>
    <iframe ${v7(t)} title="TikTok video"></iframe>
  `}function WM(n,e={}){if(!n.src)return;const t=n.src.match(f7),r=t&&t[1],i={controls:n.controls===""?null:0,autoplay:n.autoplay,muted:n.muted,loop:n.loop,rel:0,...e.config};return`${c7}/${r}?${p7(i)}`}var jm,qm,df,Hm,Gm,Vm,cf,ty,ff,ny,Fa,om,QM,XM,ZM,JM;const yv=class yv extends(globalThis.HTMLElement??class{}){constructor(){super();cn(this,Fa);tr(this,"loadComplete",new vC);cn(this,jm);cn(this,qm);cn(this,df,!1);cn(this,Hm,0);cn(this,Gm,!0);cn(this,Vm,null);cn(this,cf,100);cn(this,ty,0);cn(this,ff);cn(this,ny,t=>{var r;if(t.source!==((r=qe(this,ff))==null?void 0:r.contentWindow))return;const i=t.data;if(i!=null&&i["x-tiktok-player"])switch(i.type){case"onPlayerReady":this.loadComplete.resolve();break;case"onStateChange":{Tt(this,Gm,[od.INIT,od.PAUSED,od.ENDED].includes(i.value));const o=h7[i.value];o&&this.dispatchEvent(new Event(o));break}case"onCurrentTime":Tt(this,Hm,i.value.currentTime),Tt(this,ty,i.value.duration),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("timeupdate"));break;case"onVolumeChange":Tt(this,cf,i.value),this.dispatchEvent(new Event("volumechange"));break;case"onMute":Tt(this,df,!!i.value),Tt(this,cf,i.value?0:qe(this,cf)),this.dispatchEvent(new Event("volumechange"));break;case"onError":this.dispatchEvent(new Event("error"));break;default:console.warn("Unhandled TikTok player message:",i);break}});rr(this,Fa,JM).call(this,"config")}static get observedAttributes(){return["src","controls","loop","autoplay","muted"]}async load(){if(qe(this,jm))return;this.shadowRoot||this.attachShadow(yv.shadowRootOptions);const t=!qe(this,qm);if(qe(this,qm)&&(this.loadComplete=new vC),Tt(this,qm,!0),await Tt(this,jm,Promise.resolve()),Tt(this,jm,null),Tt(this,Hm,0),Tt(this,df,!1),Tt(this,Gm,!0),!this.src){this.shadowRoot.innerHTML="",globalThis.removeEventListener("message",qe(this,ny));return}let r=this.shadowRoot.querySelector("iframe");const i=m7(this.attributes);t&&r&&Tt(this,Vm,JSON.parse(r.getAttribute("data-config")||"{}")),(!(r!=null&&r.src)||r.src!==WM(i,this))&&(this.shadowRoot.innerHTML=pC(i,this),r=this.shadowRoot.querySelector("iframe")),Tt(this,ff,r),globalThis.addEventListener("message",qe(this,ny))}async attributeChangedCallback(t,r,i){if(r!==i)switch(t){case"muted":{await this.loadComplete,this.muted=i!=null;break}case"autoplay":case"controls":case"loop":case"src":{this.load();return}}}get config(){return qe(this,Vm)}set config(t){Tt(this,Vm,t)}async play(){await this.loadComplete,rr(this,Fa,om).call(this,"play")}async pause(){await this.loadComplete,rr(this,Fa,om).call(this,"pause")}get volume(){return qe(this,cf)/100}set volume(t){console.warn("Volume control is not supported for TikTok videos.")}get currentTime(){return qe(this,Hm)}set currentTime(t){rr(this,Fa,QM).call(this,t)}get muted(){return qe(this,df)}set muted(t){Tt(this,df,t),t?rr(this,Fa,XM).call(this):rr(this,Fa,ZM).call(this)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(t){this.toggleAttribute("muted",!!t)}get paused(){return qe(this,Gm)}get duration(){return qe(this,ty)}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t??"")}};jm=new WeakMap,qm=new WeakMap,df=new WeakMap,Hm=new WeakMap,Gm=new WeakMap,Vm=new WeakMap,cf=new WeakMap,ty=new WeakMap,ff=new WeakMap,ny=new WeakMap,Fa=new WeakSet,om=function(t,r){var i;if(!((i=qe(this,ff))!=null&&i.contentWindow))return;const o={"x-tiktok-player":!0,type:t,...r!==void 0?{value:r}:{}};qe(this,ff).contentWindow.postMessage(o,"*")},QM=async function(t){await this.loadComplete,rr(this,Fa,om).call(this,"seekTo",Number(t))},XM=async function(){await this.loadComplete,rr(this,Fa,om).call(this,"mute")},ZM=async function(){await this.loadComplete,rr(this,Fa,om).call(this,"unMute")},JM=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const r=this[t];delete this[t],this[t]=r}},tr(yv,"getTemplateHTML",pC),tr(yv,"shadowRootOptions",{mode:"open"});let mT=yv;class vC extends Promise{constructor(e=()=>{}){let t,r;super((i,o)=>{e(i,o),t=i,r=o}),this.resolve=t,this.reject=r}}function m7(n){let e={};for(let t of n)e[t.name]=t.value;return e}function g7(n){let e={};for(let t in n){let r=n[t];r===!0||r===""?e[t]=1:r===!1?e[t]=0:r!=null&&(e[t]=r)}return e}function p7(n){return String(new URLSearchParams(g7(n)))}function v7(n){let e="";for(const t in n){const r=n[t];r===""?e+=` ${CS(t)}`:e+=` ${CS(t)}="${CS(`${r}`)}"`}return e}function CS(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}globalThis.customElements&&!globalThis.customElements.get("tiktok-video")&&globalThis.customElements.define("tiktok-video",mT);var y7=mT,E7=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),b7={className:"class",htmlFor:"for"};function eO(n){return n.toLowerCase()}function yC(n){if(typeof n=="boolean")return n?"":void 0;if(typeof n!="function"&&!(typeof n=="object"&&n!==null))return n}function T7({react:n,tagName:e,elementClass:t,events:r,displayName:i,defaultProps:o,toAttributeName:l=eO,toAttributeValue:d=yC}){const c=Number.parseInt(n.version)>=19,f=n.forwardRef((m,g)=>{var p,y;const v=n.useRef(null),A=n.useRef(new Map),I={},P={},U={},M={};for(const[B,ie]of Object.entries(m)){if(E7.has(B)){U[B]=ie;continue}const L=l(b7[B]??B);if(t.prototype&&B in t.prototype&&!(B in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(O=>O===L))){M[B]=ie;continue}if(B.startsWith("on")){I[B]=ie;continue}const w=d(ie);if(L&&w!=null&&(P[L]=String(w),c||(U[L]=w)),L&&c){const O=yC(ie);w!==O?U[L]=w:U[L]=ie}}if(typeof window<"u"){for(const B in I){const ie=I[B],L=B.endsWith("Capture"),w=((r==null?void 0:r[B])??B.slice(2).toLowerCase()).slice(0,L?-7:void 0);n.useLayoutEffect(()=>{const O=v==null?void 0:v.current;if(!(!O||typeof ie!="function"))return O.addEventListener(w,ie,L),()=>{O.removeEventListener(w,ie,L)}},[v==null?void 0:v.current,ie])}n.useLayoutEffect(()=>{if(v.current===null)return;const B=new Map;for(const ie in M)EC(v.current,ie,M[ie]),A.current.delete(ie),B.set(ie,M[ie]);for(const[ie,L]of A.current)EC(v.current,ie,void 0);A.current=B})}if(typeof window>"u"&&(t!=null&&t.getTemplateHTML)&&(t!=null&&t.shadowRootOptions)){const{mode:B,delegatesFocus:ie}=t.shadowRootOptions,L=n.createElement("template",{shadowrootmode:B,shadowrootdelegatesfocus:ie,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(P,m)}});U.children=[L,U.children]}return n.createElement(e,{...o,...U,ref:n.useCallback(B=>{v.current=B,typeof g=="function"?g(B):g!==null&&(g.current=B)},[g])})});return f.displayName=i??t.name,f}function EC(n,e,t){var r;n[e]=t,t==null&&e in(((r=globalThis.HTMLElement)==null?void 0:r.prototype)??{})&&n.removeAttribute(e)}var _7=T7({react:jr,tagName:"tiktok-video",elementClass:y7,toAttributeName(n){return n==="muted"?"":n==="defaultMuted"?"muted":eO(n)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/const S7=Object.freeze(Object.defineProperty({__proto__:null,default:_7},Symbol.toStringTag,{value:"Module"})),LS="64px",DS={},A7=({src:n,light:e,oEmbedUrl:t,onClickPreview:r,playIcon:i,previewTabIndex:o,previewAriaLabel:l})=>{const[d,c]=bi.useState(null);bi.useEffect(()=>{!n||!e||!t||f({src:n,light:e,oEmbedUrl:t})},[n,e,t]);const f=async({src:I,light:P,oEmbedUrl:U})=>{if(jr.isValidElement(P))return;if(typeof P=="string"){c(P);return}if(DS[I]){c(DS[I]);return}c(null);const B=await(await fetch(U.replace("{url}",I))).json();if(B.thumbnail_url){const ie=B.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");c(ie),DS[I]=ie}},m=I=>{(I.key==="Enter"||I.key===" ")&&(r==null||r(I))},g=I=>{r==null||r(I)},p=jr.isValidElement(e),y={display:"flex",alignItems:"center",justifyContent:"center"},v={preview:{width:"100%",height:"100%",backgroundImage:d&&!p?`url(${d})`:void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer",...y},shadow:{background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:LS,width:LS,height:LS,position:p?"absolute":void 0,...y},playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},A=jr.createElement("div",{style:v.shadow,className:"react-player__shadow"},jr.createElement("div",{style:v.playIcon,className:"react-player__play-icon"}));return jr.createElement("div",{style:v.preview,className:"react-player__preview",tabIndex:o,onClick:g,onKeyPress:m,...l?{"aria-label":l}:{}},p?e:null,i||A)};var w7=A7;const I7=Object.freeze(Object.defineProperty({__proto__:null,default:w7},Symbol.toStringTag,{value:"Module"}));/*! For license information please see dash.all.min.js.LICENSE.txt */var k7={7267:function(n,e){e.byteLength=function(f){var m=d(f),g=m[0],p=m[1];return 3*(g+p)/4-p},e.toByteArray=function(f){var m,g,p=d(f),y=p[0],v=p[1],A=new i(function(U,M,B){return 3*(M+B)/4-B}(0,y,v)),I=0,P=v>0?y-4:y;for(g=0;g<P;g+=4)m=r[f.charCodeAt(g)]<<18|r[f.charCodeAt(g+1)]<<12|r[f.charCodeAt(g+2)]<<6|r[f.charCodeAt(g+3)],A[I++]=m>>16&255,A[I++]=m>>8&255,A[I++]=255&m;return v===2&&(m=r[f.charCodeAt(g)]<<2|r[f.charCodeAt(g+1)]>>4,A[I++]=255&m),v===1&&(m=r[f.charCodeAt(g)]<<10|r[f.charCodeAt(g+1)]<<4|r[f.charCodeAt(g+2)]>>2,A[I++]=m>>8&255,A[I++]=255&m),A},e.fromByteArray=function(f){for(var m,g=f.length,p=g%3,y=[],v=16383,A=0,I=g-p;A<I;A+=v)y.push(c(f,A,A+v>I?I:A+v));return p===1?(m=f[g-1],y.push(t[m>>2]+t[m<<4&63]+"==")):p===2&&(m=(f[g-2]<<8)+f[g-1],y.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),y.join("")};for(var t=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)t[l]=o[l],r[o.charCodeAt(l)]=l;function d(f){var m=f.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=f.indexOf("=");return g===-1&&(g=m),[g,g===m?0:4-g%4]}function c(f,m,g){for(var p,y,v=[],A=m;A<g;A+=3)p=(f[A]<<16&16711680)+(f[A+1]<<8&65280)+(255&f[A+2]),v.push(t[(y=p)>>18&63]+t[y>>12&63]+t[y>>6&63]+t[63&y]);return v.join("")}r[45]=62,r[95]=63},44:function(n,e,t){var r=t(7267),i=t(7986),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(Q){return+Q!=Q&&(Q=0),c.alloc(+Q)},e.INSPECT_MAX_BYTES=50;var l=2147483647;function d(Q){if(Q>l)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var J=new Uint8Array(Q);return Object.setPrototypeOf(J,c.prototype),J}function c(Q,J,F){if(typeof Q=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(Q)}return f(Q,J,F)}function f(Q,J,F){if(typeof Q=="string")return function(ce,He){if(typeof He=="string"&&He!==""||(He="utf8"),!c.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var ut=0|A(ce,He),Ve=d(ut),Je=Ve.write(ce,He);return Je!==ut&&(Ve=Ve.slice(0,Je)),Ve}(Q,J);if(ArrayBuffer.isView(Q))return function(ce){if(Pe(ce,Uint8Array)){var He=new Uint8Array(ce);return y(He.buffer,He.byteOffset,He.byteLength)}return p(ce)}(Q);if(Q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(Pe(Q,ArrayBuffer)||Q&&Pe(Q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pe(Q,SharedArrayBuffer)||Q&&Pe(Q.buffer,SharedArrayBuffer)))return y(Q,J,F);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=Q.valueOf&&Q.valueOf();if(K!=null&&K!==Q)return c.from(K,J,F);var Ee=function(ce){if(c.isBuffer(ce)){var He=0|v(ce.length),ut=d(He);return ut.length===0||ce.copy(ut,0,0,He),ut}return ce.length!==void 0?typeof ce.length!="number"||Oe(ce.length)?d(0):p(ce):ce.type==="Buffer"&&Array.isArray(ce.data)?p(ce.data):void 0}(Q);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return c.from(Q[Symbol.toPrimitive]("string"),J,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}function m(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function g(Q){return m(Q),d(Q<0?0:0|v(Q))}function p(Q){for(var J=Q.length<0?0:0|v(Q.length),F=d(J),K=0;K<J;K+=1)F[K]=255&Q[K];return F}function y(Q,J,F){if(J<0||Q.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<J+(F||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=J===void 0&&F===void 0?new Uint8Array(Q):F===void 0?new Uint8Array(Q,J):new Uint8Array(Q,J,F),Object.setPrototypeOf(K,c.prototype),K}function v(Q){if(Q>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|Q}function A(Q,J){if(c.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||Pe(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);var F=Q.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&F===0)return 0;for(var Ee=!1;;)switch(J){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return st(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*F;case"hex":return F>>>1;case"base64":return Rt(Q).length;default:if(Ee)return K?-1:st(Q).length;J=(""+J).toLowerCase(),Ee=!0}}function I(Q,J,F){var K=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0)<=(J>>>=0))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return $e(this,J,F);case"utf8":case"utf-8":return D(this,J,F);case"ascii":return Le(this,J,F);case"latin1":case"binary":return te(this,J,F);case"base64":return oe(this,J,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,J,F);default:if(K)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),K=!0}}function P(Q,J,F){var K=Q[J];Q[J]=Q[F],Q[F]=K}function U(Q,J,F,K,Ee){if(Q.length===0)return-1;if(typeof F=="string"?(K=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),Oe(F=+F)&&(F=Ee?0:Q.length-1),F<0&&(F=Q.length+F),F>=Q.length){if(Ee)return-1;F=Q.length-1}else if(F<0){if(!Ee)return-1;F=0}if(typeof J=="string"&&(J=c.from(J,K)),c.isBuffer(J))return J.length===0?-1:M(Q,J,F,K,Ee);if(typeof J=="number")return J&=255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(Q,J,F):Uint8Array.prototype.lastIndexOf.call(Q,J,F):M(Q,[J],F,K,Ee);throw new TypeError("val must be string, number or Buffer")}function M(Q,J,F,K,Ee){var ce,He=1,ut=Q.length,Ve=J.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(Q.length<2||J.length<2)return-1;He=2,ut/=2,Ve/=2,F/=2}function Je(ot,xt){return He===1?ot[xt]:ot.readUInt16BE(xt*He)}if(Ee){var Ke=-1;for(ce=F;ce<ut;ce++)if(Je(Q,ce)===Je(J,Ke===-1?0:ce-Ke)){if(Ke===-1&&(Ke=ce),ce-Ke+1===Ve)return Ke*He}else Ke!==-1&&(ce-=ce-Ke),Ke=-1}else for(F+Ve>ut&&(F=ut-Ve),ce=F;ce>=0;ce--){for(var it=!0,Et=0;Et<Ve;Et++)if(Je(Q,ce+Et)!==Je(J,Et)){it=!1;break}if(it)return ce}return-1}function B(Q,J,F,K){F=Number(F)||0;var Ee=Q.length-F;K?(K=Number(K))>Ee&&(K=Ee):K=Ee;var ce=J.length;K>ce/2&&(K=ce/2);for(var He=0;He<K;++He){var ut=parseInt(J.substr(2*He,2),16);if(Oe(ut))return He;Q[F+He]=ut}return He}function ie(Q,J,F,K){return jt(st(J,Q.length-F),Q,F,K)}function L(Q,J,F,K){return jt(function(Ee){for(var ce=[],He=0;He<Ee.length;++He)ce.push(255&Ee.charCodeAt(He));return ce}(J),Q,F,K)}function w(Q,J,F,K){return jt(Rt(J),Q,F,K)}function O(Q,J,F,K){return jt(function(Ee,ce){for(var He,ut,Ve,Je=[],Ke=0;Ke<Ee.length&&!((ce-=2)<0);++Ke)ut=(He=Ee.charCodeAt(Ke))>>8,Ve=He%256,Je.push(Ve),Je.push(ut);return Je}(J,Q.length-F),Q,F,K)}function oe(Q,J,F){return J===0&&F===Q.length?r.fromByteArray(Q):r.fromByteArray(Q.slice(J,F))}function D(Q,J,F){F=Math.min(Q.length,F);for(var K=[],Ee=J;Ee<F;){var ce,He,ut,Ve,Je=Q[Ee],Ke=null,it=Je>239?4:Je>223?3:Je>191?2:1;if(Ee+it<=F)switch(it){case 1:Je<128&&(Ke=Je);break;case 2:(192&(ce=Q[Ee+1]))==128&&(Ve=(31&Je)<<6|63&ce)>127&&(Ke=Ve);break;case 3:ce=Q[Ee+1],He=Q[Ee+2],(192&ce)==128&&(192&He)==128&&(Ve=(15&Je)<<12|(63&ce)<<6|63&He)>2047&&(Ve<55296||Ve>57343)&&(Ke=Ve);break;case 4:ce=Q[Ee+1],He=Q[Ee+2],ut=Q[Ee+3],(192&ce)==128&&(192&He)==128&&(192&ut)==128&&(Ve=(15&Je)<<18|(63&ce)<<12|(63&He)<<6|63&ut)>65535&&Ve<1114112&&(Ke=Ve)}Ke===null?(Ke=65533,it=1):Ke>65535&&(Ke-=65536,K.push(Ke>>>10&1023|55296),Ke=56320|1023&Ke),K.push(Ke),Ee+=it}return function(Et){var ot=Et.length;if(ot<=ve)return String.fromCharCode.apply(String,Et);for(var xt="",En=0;En<ot;)xt+=String.fromCharCode.apply(String,Et.slice(En,En+=ve));return xt}(K)}e.kMaxLength=l,c.TYPED_ARRAY_SUPPORT=function(){try{var Q=new Uint8Array(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Uint8Array.prototype),Object.setPrototypeOf(Q,J),Q.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(Q,J,F){return f(Q,J,F)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(Q,J,F){return function(K,Ee,ce){return m(K),K<=0?d(K):Ee!==void 0?typeof ce=="string"?d(K).fill(Ee,ce):d(K).fill(Ee):d(K)}(Q,J,F)},c.allocUnsafe=function(Q){return g(Q)},c.allocUnsafeSlow=function(Q){return g(Q)},c.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==c.prototype},c.compare=function(Q,J){if(Pe(Q,Uint8Array)&&(Q=c.from(Q,Q.offset,Q.byteLength)),Pe(J,Uint8Array)&&(J=c.from(J,J.offset,J.byteLength)),!c.isBuffer(Q)||!c.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===J)return 0;for(var F=Q.length,K=J.length,Ee=0,ce=Math.min(F,K);Ee<ce;++Ee)if(Q[Ee]!==J[Ee]){F=Q[Ee],K=J[Ee];break}return F<K?-1:K<F?1:0},c.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(Q,J){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return c.alloc(0);var F;if(J===void 0)for(J=0,F=0;F<Q.length;++F)J+=Q[F].length;var K=c.allocUnsafe(J),Ee=0;for(F=0;F<Q.length;++F){var ce=Q[F];if(Pe(ce,Uint8Array))Ee+ce.length>K.length?c.from(ce).copy(K,Ee):Uint8Array.prototype.set.call(K,ce,Ee);else{if(!c.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(K,Ee)}Ee+=ce.length}return K},c.byteLength=A,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var Q=this.length;if(Q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var J=0;J<Q;J+=2)P(this,J,J+1);return this},c.prototype.swap32=function(){var Q=this.length;if(Q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var J=0;J<Q;J+=4)P(this,J,J+3),P(this,J+1,J+2);return this},c.prototype.swap64=function(){var Q=this.length;if(Q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var J=0;J<Q;J+=8)P(this,J,J+7),P(this,J+1,J+6),P(this,J+2,J+5),P(this,J+3,J+4);return this},c.prototype.toString=function(){var Q=this.length;return Q===0?"":arguments.length===0?D(this,0,Q):I.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(Q){if(!c.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q||c.compare(this,Q)===0},c.prototype.inspect=function(){var Q="",J=e.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(Q+=" ... "),"<Buffer "+Q+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(Q,J,F,K,Ee){if(Pe(Q,Uint8Array)&&(Q=c.from(Q,Q.offset,Q.byteLength)),!c.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(J===void 0&&(J=0),F===void 0&&(F=Q?Q.length:0),K===void 0&&(K=0),Ee===void 0&&(Ee=this.length),J<0||F>Q.length||K<0||Ee>this.length)throw new RangeError("out of range index");if(K>=Ee&&J>=F)return 0;if(K>=Ee)return-1;if(J>=F)return 1;if(this===Q)return 0;for(var ce=(Ee>>>=0)-(K>>>=0),He=(F>>>=0)-(J>>>=0),ut=Math.min(ce,He),Ve=this.slice(K,Ee),Je=Q.slice(J,F),Ke=0;Ke<ut;++Ke)if(Ve[Ke]!==Je[Ke]){ce=Ve[Ke],He=Je[Ke];break}return ce<He?-1:He<ce?1:0},c.prototype.includes=function(Q,J,F){return this.indexOf(Q,J,F)!==-1},c.prototype.indexOf=function(Q,J,F){return U(this,Q,J,F,!0)},c.prototype.lastIndexOf=function(Q,J,F){return U(this,Q,J,F,!1)},c.prototype.write=function(Q,J,F,K){if(J===void 0)K="utf8",F=this.length,J=0;else if(F===void 0&&typeof J=="string")K=J,F=this.length,J=0;else{if(!isFinite(J))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");J>>>=0,isFinite(F)?(F>>>=0,K===void 0&&(K="utf8")):(K=F,F=void 0)}var Ee=this.length-J;if((F===void 0||F>Ee)&&(F=Ee),Q.length>0&&(F<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var ce=!1;;)switch(K){case"hex":return B(this,Q,J,F);case"utf8":case"utf-8":return ie(this,Q,J,F);case"ascii":case"latin1":case"binary":return L(this,Q,J,F);case"base64":return w(this,Q,J,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,Q,J,F);default:if(ce)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),ce=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ve=4096;function Le(Q,J,F){var K="";F=Math.min(Q.length,F);for(var Ee=J;Ee<F;++Ee)K+=String.fromCharCode(127&Q[Ee]);return K}function te(Q,J,F){var K="";F=Math.min(Q.length,F);for(var Ee=J;Ee<F;++Ee)K+=String.fromCharCode(Q[Ee]);return K}function $e(Q,J,F){var K=Q.length;(!J||J<0)&&(J=0),(!F||F<0||F>K)&&(F=K);for(var Ee="",ce=J;ce<F;++ce)Ee+=gt[Q[ce]];return Ee}function Ue(Q,J,F){for(var K=Q.slice(J,F),Ee="",ce=0;ce<K.length-1;ce+=2)Ee+=String.fromCharCode(K[ce]+256*K[ce+1]);return Ee}function Re(Q,J,F){if(Q%1!=0||Q<0)throw new RangeError("offset is not uint");if(Q+J>F)throw new RangeError("Trying to access beyond buffer length")}function Xe(Q,J,F,K,Ee,ce){if(!c.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Ee||J<ce)throw new RangeError('"value" argument is out of bounds');if(F+K>Q.length)throw new RangeError("Index out of range")}function Ye(Q,J,F,K,Ee,ce){if(F+K>Q.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function Ze(Q,J,F,K,Ee){return J=+J,F>>>=0,Ee||Ye(Q,0,F,4),i.write(Q,J,F,K,23,4),F+4}function Ne(Q,J,F,K,Ee){return J=+J,F>>>=0,Ee||Ye(Q,0,F,8),i.write(Q,J,F,K,52,8),F+8}c.prototype.slice=function(Q,J){var F=this.length;(Q=~~Q)<0?(Q+=F)<0&&(Q=0):Q>F&&(Q=F),(J=J===void 0?F:~~J)<0?(J+=F)<0&&(J=0):J>F&&(J=F),J<Q&&(J=Q);var K=this.subarray(Q,J);return Object.setPrototypeOf(K,c.prototype),K},c.prototype.readUintLE=c.prototype.readUIntLE=function(Q,J,F){Q>>>=0,J>>>=0,F||Re(Q,J,this.length);for(var K=this[Q],Ee=1,ce=0;++ce<J&&(Ee*=256);)K+=this[Q+ce]*Ee;return K},c.prototype.readUintBE=c.prototype.readUIntBE=function(Q,J,F){Q>>>=0,J>>>=0,F||Re(Q,J,this.length);for(var K=this[Q+--J],Ee=1;J>0&&(Ee*=256);)K+=this[Q+--J]*Ee;return K},c.prototype.readUint8=c.prototype.readUInt8=function(Q,J){return Q>>>=0,J||Re(Q,1,this.length),this[Q]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(Q,J){return Q>>>=0,J||Re(Q,2,this.length),this[Q]|this[Q+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(Q,J){return Q>>>=0,J||Re(Q,2,this.length),this[Q]<<8|this[Q+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(Q,J){return Q>>>=0,J||Re(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+16777216*this[Q+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(Q,J){return Q>>>=0,J||Re(Q,4,this.length),16777216*this[Q]+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},c.prototype.readIntLE=function(Q,J,F){Q>>>=0,J>>>=0,F||Re(Q,J,this.length);for(var K=this[Q],Ee=1,ce=0;++ce<J&&(Ee*=256);)K+=this[Q+ce]*Ee;return K>=(Ee*=128)&&(K-=Math.pow(2,8*J)),K},c.prototype.readIntBE=function(Q,J,F){Q>>>=0,J>>>=0,F||Re(Q,J,this.length);for(var K=J,Ee=1,ce=this[Q+--K];K>0&&(Ee*=256);)ce+=this[Q+--K]*Ee;return ce>=(Ee*=128)&&(ce-=Math.pow(2,8*J)),ce},c.prototype.readInt8=function(Q,J){return Q>>>=0,J||Re(Q,1,this.length),128&this[Q]?-1*(255-this[Q]+1):this[Q]},c.prototype.readInt16LE=function(Q,J){Q>>>=0,J||Re(Q,2,this.length);var F=this[Q]|this[Q+1]<<8;return 32768&F?4294901760|F:F},c.prototype.readInt16BE=function(Q,J){Q>>>=0,J||Re(Q,2,this.length);var F=this[Q+1]|this[Q]<<8;return 32768&F?4294901760|F:F},c.prototype.readInt32LE=function(Q,J){return Q>>>=0,J||Re(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},c.prototype.readInt32BE=function(Q,J){return Q>>>=0,J||Re(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},c.prototype.readFloatLE=function(Q,J){return Q>>>=0,J||Re(Q,4,this.length),i.read(this,Q,!0,23,4)},c.prototype.readFloatBE=function(Q,J){return Q>>>=0,J||Re(Q,4,this.length),i.read(this,Q,!1,23,4)},c.prototype.readDoubleLE=function(Q,J){return Q>>>=0,J||Re(Q,8,this.length),i.read(this,Q,!0,52,8)},c.prototype.readDoubleBE=function(Q,J){return Q>>>=0,J||Re(Q,8,this.length),i.read(this,Q,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(Q,J,F,K){Q=+Q,J>>>=0,F>>>=0,K||Xe(this,Q,J,F,Math.pow(2,8*F)-1,0);var Ee=1,ce=0;for(this[J]=255&Q;++ce<F&&(Ee*=256);)this[J+ce]=Q/Ee&255;return J+F},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(Q,J,F,K){Q=+Q,J>>>=0,F>>>=0,K||Xe(this,Q,J,F,Math.pow(2,8*F)-1,0);var Ee=F-1,ce=1;for(this[J+Ee]=255&Q;--Ee>=0&&(ce*=256);)this[J+Ee]=Q/ce&255;return J+F},c.prototype.writeUint8=c.prototype.writeUInt8=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,1,255,0),this[J]=255&Q,J+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,2,65535,0),this[J]=255&Q,this[J+1]=Q>>>8,J+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,2,65535,0),this[J]=Q>>>8,this[J+1]=255&Q,J+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,4,4294967295,0),this[J+3]=Q>>>24,this[J+2]=Q>>>16,this[J+1]=Q>>>8,this[J]=255&Q,J+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,4,4294967295,0),this[J]=Q>>>24,this[J+1]=Q>>>16,this[J+2]=Q>>>8,this[J+3]=255&Q,J+4},c.prototype.writeIntLE=function(Q,J,F,K){if(Q=+Q,J>>>=0,!K){var Ee=Math.pow(2,8*F-1);Xe(this,Q,J,F,Ee-1,-Ee)}var ce=0,He=1,ut=0;for(this[J]=255&Q;++ce<F&&(He*=256);)Q<0&&ut===0&&this[J+ce-1]!==0&&(ut=1),this[J+ce]=(Q/He|0)-ut&255;return J+F},c.prototype.writeIntBE=function(Q,J,F,K){if(Q=+Q,J>>>=0,!K){var Ee=Math.pow(2,8*F-1);Xe(this,Q,J,F,Ee-1,-Ee)}var ce=F-1,He=1,ut=0;for(this[J+ce]=255&Q;--ce>=0&&(He*=256);)Q<0&&ut===0&&this[J+ce+1]!==0&&(ut=1),this[J+ce]=(Q/He|0)-ut&255;return J+F},c.prototype.writeInt8=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,1,127,-128),Q<0&&(Q=255+Q+1),this[J]=255&Q,J+1},c.prototype.writeInt16LE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,2,32767,-32768),this[J]=255&Q,this[J+1]=Q>>>8,J+2},c.prototype.writeInt16BE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,2,32767,-32768),this[J]=Q>>>8,this[J+1]=255&Q,J+2},c.prototype.writeInt32LE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,4,2147483647,-2147483648),this[J]=255&Q,this[J+1]=Q>>>8,this[J+2]=Q>>>16,this[J+3]=Q>>>24,J+4},c.prototype.writeInt32BE=function(Q,J,F){return Q=+Q,J>>>=0,F||Xe(this,Q,J,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[J]=Q>>>24,this[J+1]=Q>>>16,this[J+2]=Q>>>8,this[J+3]=255&Q,J+4},c.prototype.writeFloatLE=function(Q,J,F){return Ze(this,Q,J,!0,F)},c.prototype.writeFloatBE=function(Q,J,F){return Ze(this,Q,J,!1,F)},c.prototype.writeDoubleLE=function(Q,J,F){return Ne(this,Q,J,!0,F)},c.prototype.writeDoubleBE=function(Q,J,F){return Ne(this,Q,J,!1,F)},c.prototype.copy=function(Q,J,F,K){if(!c.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(F||(F=0),K||K===0||(K=this.length),J>=Q.length&&(J=Q.length),J||(J=0),K>0&&K<F&&(K=F),K===F||Q.length===0||this.length===0)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),Q.length-J<K-F&&(K=Q.length-J+F);var Ee=K-F;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(J,F,K):Uint8Array.prototype.set.call(Q,this.subarray(F,K),J),Ee},c.prototype.fill=function(Q,J,F,K){if(typeof Q=="string"){if(typeof J=="string"?(K=J,J=0,F=this.length):typeof F=="string"&&(K=F,F=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!c.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(Q.length===1){var Ee=Q.charCodeAt(0);(K==="utf8"&&Ee<128||K==="latin1")&&(Q=Ee)}}else typeof Q=="number"?Q&=255:typeof Q=="boolean"&&(Q=Number(Q));if(J<0||this.length<J||this.length<F)throw new RangeError("Out of range index");if(F<=J)return this;var ce;if(J>>>=0,F=F===void 0?this.length:F>>>0,Q||(Q=0),typeof Q=="number")for(ce=J;ce<F;++ce)this[ce]=Q;else{var He=c.isBuffer(Q)?Q:c.from(Q,K),ut=He.length;if(ut===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(ce=0;ce<F-J;++ce)this[ce+J]=He[ce%ut]}return this};var ze=/[^+/0-9A-Za-z-_]/g;function st(Q,J){var F;J=J||1/0;for(var K=Q.length,Ee=null,ce=[],He=0;He<K;++He){if((F=Q.charCodeAt(He))>55295&&F<57344){if(!Ee){if(F>56319){(J-=3)>-1&&ce.push(239,191,189);continue}if(He+1===K){(J-=3)>-1&&ce.push(239,191,189);continue}Ee=F;continue}if(F<56320){(J-=3)>-1&&ce.push(239,191,189),Ee=F;continue}F=65536+(Ee-55296<<10|F-56320)}else Ee&&(J-=3)>-1&&ce.push(239,191,189);if(Ee=null,F<128){if((J-=1)<0)break;ce.push(F)}else if(F<2048){if((J-=2)<0)break;ce.push(F>>6|192,63&F|128)}else if(F<65536){if((J-=3)<0)break;ce.push(F>>12|224,F>>6&63|128,63&F|128)}else{if(!(F<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;ce.push(F>>18|240,F>>12&63|128,F>>6&63|128,63&F|128)}}return ce}function Rt(Q){return r.toByteArray(function(J){if((J=(J=J.split("=")[0]).trim().replace(ze,"")).length<2)return"";for(;J.length%4!=0;)J+="=";return J}(Q))}function jt(Q,J,F,K){for(var Ee=0;Ee<K&&!(Ee+F>=J.length||Ee>=Q.length);++Ee)J[Ee+F]=Q[Ee];return Ee}function Pe(Q,J){return Q instanceof J||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===J.name}function Oe(Q){return Q!=Q}var gt=function(){for(var Q="0123456789abcdef",J=new Array(256),F=0;F<16;++F)for(var K=16*F,Ee=0;Ee<16;++Ee)J[K+Ee]=Q[F]+Q[Ee];return J}()},6877:function(n,e){var t={parseBuffer:function(o){return new r(o).parse()},addBoxProcessor:function(o,l){typeof o=="string"&&typeof l=="function"&&(i.prototype._boxProcessors[o]=l)},createFile:function(){return new r},createBox:function(o,l,d){var c=i.create(o);return l&&l.append(c,d),c},createFullBox:function(o,l,d){var c=t.createBox(o,l,d);return c.version=0,c.flags=0,c},Utils:{}};t.Utils.dataViewToString=function(o,l){var d=l||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(d).decode(o);var c=[],f=0;if(d==="utf-8")for(;f<o.byteLength;){var m=o.getUint8(f++);m<128||(m<224?(m=(31&m)<<6,m|=63&o.getUint8(f++)):m<240?(m=(15&m)<<12,m|=(63&o.getUint8(f++))<<6,m|=63&o.getUint8(f++)):(m=(7&m)<<18,m|=(63&o.getUint8(f++))<<12,m|=(63&o.getUint8(f++))<<6,m|=63&o.getUint8(f++))),c.push(String.fromCharCode(m))}else for(;f<o.byteLength;)c.push(String.fromCharCode(o.getUint8(f++)));return c.join("")},t.Utils.utf8ToByteArray=function(o){var l,d;if(typeof TextEncoder<"u")l=new TextEncoder().encode(o);else for(l=[],d=0;d<o.length;++d){var c=o.charCodeAt(d);c<128?l.push(c):c<2048?(l.push(192|c>>6),l.push(128|63&c)):c<65536?(l.push(224|c>>12),l.push(128|63&c>>6),l.push(128|63&c)):(l.push(240|c>>18),l.push(128|63&c>>12),l.push(128|63&c>>6),l.push(128|63&c))}return l},t.Utils.appendBox=function(o,l,d){if(l._offset=o._cursor.offset,l._root=o._root?o._root:o,l._raw=o._raw,l._parent=o,d!==-1)if(d!=null){var c,f=-1;if(typeof d=="number")f=d;else{if(typeof d=="string")c=d;else{if(typeof d!="object"||!d.type)return void o.boxes.push(l);c=d.type}for(var m=0;m<o.boxes.length;m++)if(c===o.boxes[m].type){f=m+1;break}}o.boxes.splice(f,0,l)}else o.boxes.push(l)},e.parseBuffer=t.parseBuffer,e.addBoxProcessor=t.addBoxProcessor,e.createFile=t.createFile,e.createBox=t.createBox,e.createFullBox=t.createFullBox,e.Utils=t.Utils,t.Cursor=function(o){this.offset=o===void 0?0:o};var r=function(o){this._cursor=new t.Cursor,this.boxes=[],o&&(this._raw=new DataView(o))};r.prototype.fetch=function(o){var l=this.fetchAll(o,!0);return l.length?l[0]:null},r.prototype.fetchAll=function(o,l){var d=[];return r._sweep.call(this,o,d,l),d},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var o=i.parse(this);if(o.type===void 0)break;this.boxes.push(o)}return this},r._sweep=function(o,l,d){for(var c in this.type&&this.type==o&&l.push(this),this.boxes){if(l.length&&d)return;r._sweep.call(this.boxes[c],o,l,d)}},r.prototype.write=function(){var o,l=0;for(o=0;o<this.boxes.length;o++)l+=this.boxes[o].getLength(!1);var d=new Uint8Array(l);for(this._rawo=new DataView(d.buffer),this.bytes=d,this._cursor.offset=0,o=0;o<this.boxes.length;o++)this.boxes[o].write();return d.buffer},r.prototype.append=function(o,l){t.Utils.appendBox(this,o,l)};var i=function(){this._cursor=new t.Cursor};i.parse=function(o){var l=new i;return l._offset=o._cursor.offset,l._root=o._root?o._root:o,l._raw=o._raw,l._parent=o,l._parseBox(),o._cursor.offset=l._raw.byteOffset+l._raw.byteLength,l},i.create=function(o){var l=new i;return l.type=o,l.boxes=[],l},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],i.prototype._boxProcessors={},i.prototype._procField=function(o,l,d){this._parsing?this[o]=this._readField(l,d):this._writeField(l,d,this[o])},i.prototype._procFieldArray=function(o,l,d,c){var f;if(this._parsing)for(this[o]=[],f=0;f<l;f++)this[o][f]=this._readField(d,c);else for(f=0;f<this[o].length;f++)this._writeField(d,c,this[o][f])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(o,l,d){var c;if(this._parsing)for(this[o]=[],c=0;c<l;c++)this[o].push({}),d.call(this,this[o][c]);else for(c=0;c<l;c++)d.call(this,this[o][c])},i.prototype._procSubEntries=function(o,l,d,c){var f;if(this._parsing)for(o[l]=[],f=0;f<d;f++)o[l].push({}),c.call(this,o[l][f]);else for(f=0;f<d;f++)c.call(this,o[l][f])},i.prototype._procEntryField=function(o,l,d,c){this._parsing?o[l]=this._readField(d,c):this._writeField(d,c,o[l])},i.prototype._procSubBoxes=function(o,l){var d;if(this._parsing)for(this[o]=[],d=0;d<l;d++)this[o].push(i.parse(this));else for(d=0;d<l;d++)this._rawo?this[o][d].write():this.size+=this[o][d].getLength()},i.prototype._readField=function(o,l){switch(o){case"uint":return this._readUint(l);case"int":return this._readInt(l);case"template":return this._readTemplate(l);case"string":return l===-1?this._readTerminatedString():this._readString(l);case"data":return this._readData(l);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},i.prototype._readInt=function(o){var l=null,d=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:l=this._raw.getInt8(d);break;case 16:l=this._raw.getInt16(d);break;case 32:l=this._raw.getInt32(d);break;case 64:var c=this._raw.getInt32(d),f=this._raw.getInt32(d+4);l=c*Math.pow(2,32)+f}return this._cursor.offset+=o>>3,l},i.prototype._readUint=function(o){var l,d,c=null,f=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:c=this._raw.getUint8(f);break;case 16:c=this._raw.getUint16(f);break;case 24:c=((l=this._raw.getUint16(f))<<8)+(d=this._raw.getUint8(f+2));break;case 32:c=this._raw.getUint32(f);break;case 64:l=this._raw.getUint32(f),d=this._raw.getUint32(f+4),c=l*Math.pow(2,32)+d}return this._cursor.offset+=o>>3,c},i.prototype._readString=function(o){for(var l="",d=0;d<o;d++){var c=this._readUint(8);l+=String.fromCharCode(c)}return l},i.prototype._readTemplate=function(o){return this._readUint(o/2)+this._readUint(o/2)/Math.pow(2,o/2)},i.prototype._readTerminatedString=function(){for(var o="";this._cursor.offset-this._offset<this._raw.byteLength;){var l=this._readUint(8);if(l===0)break;o+=String.fromCharCode(l)}return o},i.prototype._readData=function(o){var l=o>0?o:this._raw.byteLength-(this._cursor.offset-this._offset);if(l>0){var d=new Uint8Array(this._raw.buffer,this._cursor.offset,l);return this._cursor.offset+=l,d}return null},i.prototype._readUTF8String=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;return o>0&&(l=new DataView(this._raw.buffer,this._cursor.offset,o),this._cursor.offset+=o),l&&t.Utils.dataViewToString(l)},i.prototype._readUTF8TerminatedString=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;if(o>0){var d;for(l=new DataView(this._raw.buffer,this._cursor.offset,o),d=0;d<o&&l.getUint8(d)!==0;d++);l=new DataView(this._raw.buffer,this._cursor.offset,d),this._cursor.offset+=Math.min(d+1,o)}return l&&t.Utils.dataViewToString(l)},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(o,l){t.Utils.appendBox(this,o,l)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.size+=this.boxes[o].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.boxes[o].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(o,l){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setInt8(d,l);break;case 16:this._rawo.setInt16(d,l);break;case 32:this._rawo.setInt32(d,l);break;case 64:var c=Math.floor(l/Math.pow(2,32)),f=l-c*Math.pow(2,32);this._rawo.setUint32(d,c),this._rawo.setUint32(d+4,f)}this._cursor.offset+=o>>3}else this.size+=o>>3},i.prototype._writeUint=function(o,l){if(this._rawo){var d,c,f=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setUint8(f,l);break;case 16:this._rawo.setUint16(f,l);break;case 24:d=(16776960&l)>>8,c=255&l,this._rawo.setUint16(f,d),this._rawo.setUint8(f+2,c);break;case 32:this._rawo.setUint32(f,l);break;case 64:c=l-(d=Math.floor(l/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(f,d),this._rawo.setUint32(f+4,c)}this._cursor.offset+=o>>3}else this.size+=o>>3},i.prototype._writeString=function(o,l){for(var d=0;d<o;d++)this._writeUint(8,l.charCodeAt(d))},i.prototype._writeTerminatedString=function(o){if(o.length!==0){for(var l=0;l<o.length;l++)this._writeUint(8,o.charCodeAt(l));this._writeUint(8,0)}},i.prototype._writeTemplate=function(o,l){var d=Math.floor(l),c=(l-d)*Math.pow(2,o/2);this._writeUint(o/2,d),this._writeUint(o/2,c)},i.prototype._writeData=function(o){if(o)if(this._rawo){if(o instanceof Array){for(var l=this._cursor.offset-this._rawo.byteOffset,d=0;d<o.length;d++)this._rawo.setInt8(l+d,o[d]);this._cursor.offset+=o.length}o instanceof Uint8Array&&(this._root.bytes.set(o,this._cursor.offset),this._cursor.offset+=o.length)}else this.size+=o.length},i.prototype._writeUTF8String=function(o){var l=t.Utils.utf8ToByteArray(o);if(this._rawo)for(var d=new DataView(this._rawo.buffer,this._cursor.offset,l.length),c=0;c<l.length;c++)d.setUint8(c,l[c]);else this.size+=l.length},i.prototype._writeField=function(o,l,d){switch(o){case"uint":this._writeUint(l,d);break;case"int":this._writeInt(l,d);break;case"template":this._writeTemplate(l,d);break;case"string":l==-1?this._writeTerminatedString(d):this._writeString(l,d);break;case"data":this._writeData(d);break;case"utf8":this._writeUTF8String(d)}},i.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_offset",this.version===1?"int":"uint",32)})},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"segment_duration","uint",this.version===1?64:32),this._procEntryField(o,"media_time","int",this.version===1?64:32),this._procEntryField(o,"media_rate_integer","int",16),this._procEntryField(o,"media_rate_fraction","int",16)})},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var o=-1;this._parsing&&(o=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",o,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},i.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},i.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},i.prototype._boxProcessors.meta=function(){this._procFullBox()},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},i.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,function(o){this._procEntryField(o,"entity_id","uint",32)}),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var o=-1;this._parsing&&(o=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",o,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(o){this._parsing||(o.reference=(1&o.reference_type)<<31,o.reference|=2147483647&o.referenced_size,o.sap=(1&o.starts_with_SAP)<<31,o.sap|=(3&o.SAP_type)<<28,o.sap|=268435455&o.SAP_delta_time),this._procEntryField(o,"reference","uint",32),this._procEntryField(o,"subsegment_duration","uint",32),this._procEntryField(o,"sap","uint",32),this._parsing&&(o.reference_type=o.reference>>31&1,o.referenced_size=2147483647&o.reference,o.starts_with_SAP=o.sap>>31&1,o.SAP_type=o.sap>>28&7,o.SAP_delta_time=268435455&o.sap)})},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(o){this._procEntryField(o,"ranges_count","uint",32),this._procSubEntries(o,"ranges",o.ranges_count,function(l){this._procEntryField(l,"level","uint",8),this._procEntryField(l,"range_size","uint",24)})})},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_delta","uint",32)})},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_delta","uint",32),this._procEntryField(o,"subsample_count","uint",16),this._procSubEntries(o,"subsamples",o.subsample_count,function(l){this._procEntryField(l,"subsample_size","uint",this.version===1?32:16),this._procEntryField(l,"subsample_priority","uint",8),this._procEntryField(l,"discardable","uint",8),this._procEntryField(l,"codec_specific_parameters","uint",32)})})},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(o){this._procEntryField(o,"time","uint",this.version===1?64:32),this._procEntryField(o,"moof_offset","uint",this.version===1?64:32),this._procEntryField(o,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(o,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(o,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(o){256&this.flags&&this._procEntryField(o,"sample_duration","uint",32),512&this.flags&&this._procEntryField(o,"sample_size","uint",32),1024&this.flags&&this._procEntryField(o,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(o,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},9826:function(n){var e,t=typeof Reflect=="object"?Reflect:null,r=t&&typeof t.apply=="function"?t.apply:function(I,P,U){return Function.prototype.apply.call(I,P,U)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var i=Number.isNaN||function(I){return I!=I};function o(){o.init.call(this)}n.exports=o,n.exports.once=function(I,P){return new Promise(function(U,M){function B(L){I.removeListener(P,ie),M(L)}function ie(){typeof I.removeListener=="function"&&I.removeListener("error",B),U([].slice.call(arguments))}A(I,P,ie,{once:!0}),P!=="error"&&function(L,w){typeof L.on=="function"&&A(L,"error",w,{once:!0})}(I,B)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function d(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}function c(I){return I._maxListeners===void 0?o.defaultMaxListeners:I._maxListeners}function f(I,P,U,M){var B,ie,L,w;if(d(U),(ie=I._events)===void 0?(ie=I._events=Object.create(null),I._eventsCount=0):(ie.newListener!==void 0&&(I.emit("newListener",P,U.listener?U.listener:U),ie=I._events),L=ie[P]),L===void 0)L=ie[P]=U,++I._eventsCount;else if(typeof L=="function"?L=ie[P]=M?[U,L]:[L,U]:M?L.unshift(U):L.push(U),(B=c(I))>0&&L.length>B&&!L.warned){L.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=I,O.type=P,O.count=L.length,w=O,console&&console.warn&&console.warn(w)}return I}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(I,P,U){var M={fired:!1,wrapFn:void 0,target:I,type:P,listener:U},B=m.bind(M);return B.listener=U,M.wrapFn=B,B}function p(I,P,U){var M=I._events;if(M===void 0)return[];var B=M[P];return B===void 0?[]:typeof B=="function"?U?[B.listener||B]:[B]:U?function(ie){for(var L=new Array(ie.length),w=0;w<L.length;++w)L[w]=ie[w].listener||ie[w];return L}(B):v(B,B.length)}function y(I){var P=this._events;if(P!==void 0){var U=P[I];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}function v(I,P){for(var U=new Array(P),M=0;M<P;++M)U[M]=I[M];return U}function A(I,P,U,M){if(typeof I.on=="function")M.once?I.once(P,U):I.on(P,U);else{if(typeof I.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I);I.addEventListener(P,function B(ie){M.once&&I.removeEventListener(P,B),U(ie)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");l=I}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(I){for(var P=[],U=1;U<arguments.length;U++)P.push(arguments[U]);var M=I==="error",B=this._events;if(B!==void 0)M=M&&B.error===void 0;else if(!M)return!1;if(M){var ie;if(P.length>0&&(ie=P[0]),ie instanceof Error)throw ie;var L=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw L.context=ie,L}var w=B[I];if(w===void 0)return!1;if(typeof w=="function")r(w,this,P);else{var O=w.length,oe=v(w,O);for(U=0;U<O;++U)r(oe[U],this,P)}return!0},o.prototype.addListener=function(I,P){return f(this,I,P,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(I,P){return f(this,I,P,!0)},o.prototype.once=function(I,P){return d(P),this.on(I,g(this,I,P)),this},o.prototype.prependOnceListener=function(I,P){return d(P),this.prependListener(I,g(this,I,P)),this},o.prototype.removeListener=function(I,P){var U,M,B,ie,L;if(d(P),(M=this._events)===void 0)return this;if((U=M[I])===void 0)return this;if(U===P||U.listener===P)--this._eventsCount==0?this._events=Object.create(null):(delete M[I],M.removeListener&&this.emit("removeListener",I,U.listener||P));else if(typeof U!="function"){for(B=-1,ie=U.length-1;ie>=0;ie--)if(U[ie]===P||U[ie].listener===P){L=U[ie].listener,B=ie;break}if(B<0)return this;B===0?U.shift():function(w,O){for(;O+1<w.length;O++)w[O]=w[O+1];w.pop()}(U,B),U.length===1&&(M[I]=U[0]),M.removeListener!==void 0&&this.emit("removeListener",I,L||P)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(I){var P,U,M;if((U=this._events)===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[I]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete U[I]),this;if(arguments.length===0){var B,ie=Object.keys(U);for(M=0;M<ie.length;++M)(B=ie[M])!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(P=U[I])=="function")this.removeListener(I,P);else if(P!==void 0)for(M=P.length-1;M>=0;M--)this.removeListener(I,P[M]);return this},o.prototype.listeners=function(I){return p(this,I,!0)},o.prototype.rawListeners=function(I){return p(this,I,!1)},o.listenerCount=function(I,P){return typeof I.listenerCount=="function"?I.listenerCount(P):y.call(I,P)},o.prototype.listenerCount=y,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(n){n.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,o,l;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(o=i;o--!=0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(l=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=i;o--!=0;)if(!Object.prototype.hasOwnProperty.call(r,l[o]))return!1;for(o=i;o--!=0;){var d=l[o];if(!e(t[d],r[d]))return!1}return!0}return t!=t&&r!=r}},7986:function(n,e){e.read=function(t,r,i,o,l){var d,c,f=8*l-o-1,m=(1<<f)-1,g=m>>1,p=-7,y=i?l-1:0,v=i?-1:1,A=t[r+y];for(y+=v,d=A&(1<<-p)-1,A>>=-p,p+=f;p>0;d=256*d+t[r+y],y+=v,p-=8);for(c=d&(1<<-p)-1,d>>=-p,p+=o;p>0;c=256*c+t[r+y],y+=v,p-=8);if(d===0)d=1-g;else{if(d===m)return c?NaN:1/0*(A?-1:1);c+=Math.pow(2,o),d-=g}return(A?-1:1)*c*Math.pow(2,d-o)},e.write=function(t,r,i,o,l,d){var c,f,m,g=8*d-l-1,p=(1<<g)-1,y=p>>1,v=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=o?0:d-1,I=o?1:-1,P=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,c=p):(c=Math.floor(Math.log(r)/Math.LN2),r*(m=Math.pow(2,-c))<1&&(c--,m*=2),(r+=c+y>=1?v/m:v*Math.pow(2,1-y))*m>=2&&(c++,m/=2),c+y>=p?(f=0,c=p):c+y>=1?(f=(r*m-1)*Math.pow(2,l),c+=y):(f=r*Math.pow(2,y-1)*Math.pow(2,l),c=0));l>=8;t[i+A]=255&f,A+=I,f/=256,l-=8);for(c=c<<l|f,g+=l;g>0;t[i+A]=255&c,A+=I,c/=256,g-=8);t[i+A-I]|=128*P}},5474:function(n,e,t){(function(r){r.parser=function(F,K){return new l(F,K)},r.SAXParser=l,r.SAXStream=c,r.createStream=function(F,K){return new c(F,K)},r.MAX_BUFFER_LENGTH=65536;var i,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function l(F,K){if(!(this instanceof l))return new l(F,K);var Ee=this;(function(ce){for(var He=0,ut=o.length;He<ut;He++)ce[o[He]]=""})(Ee),Ee.q=Ee.c="",Ee.bufferCheckPosition=r.MAX_BUFFER_LENGTH,Ee.opt=K||{},Ee.opt.lowercase=Ee.opt.lowercase||Ee.opt.lowercasetags,Ee.looseCase=Ee.opt.lowercase?"toLowerCase":"toUpperCase",Ee.tags=[],Ee.closed=Ee.closedRoot=Ee.sawRoot=!1,Ee.tag=Ee.error=null,Ee.strict=!!F,Ee.noscript=!(!F&&!Ee.opt.noscript),Ee.state=te.BEGIN,Ee.strictEntities=Ee.opt.strictEntities,Ee.ENTITIES=Ee.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),Ee.attribList=[],Ee.opt.xmlns&&(Ee.ns=Object.create(U)),Ee.trackPosition=Ee.opt.position!==!1,Ee.trackPosition&&(Ee.position=Ee.line=Ee.column=0),Ue(Ee,"onready")}r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(F){function K(){}return K.prototype=F,new K}),Object.keys||(Object.keys=function(F){var K=[];for(var Ee in F)F.hasOwnProperty(Ee)&&K.push(Ee);return K}),l.prototype={end:function(){Ne(this)},write:function(F){var K=this;if(this.error)throw this.error;if(K.closed)return Ze(K,"Cannot write after close. Assign an onready handler.");if(F===null)return Ne(K);typeof F=="object"&&(F=F.toString());for(var Ee=0,ce="";ce=J(F,Ee++),K.c=ce,ce;)switch(K.trackPosition&&(K.position++,ce===`
`?(K.line++,K.column=0):K.column++),K.state){case te.BEGIN:if(K.state=te.BEGIN_WHITESPACE,ce==="\uFEFF")continue;Q(K,ce);continue;case te.BEGIN_WHITESPACE:Q(K,ce);continue;case te.TEXT:if(K.sawRoot&&!K.closedRoot){for(var He=Ee-1;ce&&ce!=="<"&&ce!=="&";)(ce=J(F,Ee++))&&K.trackPosition&&(K.position++,ce===`
`?(K.line++,K.column=0):K.column++);K.textNode+=F.substring(He,Ee-1)}ce!=="<"||K.sawRoot&&K.closedRoot&&!K.strict?(!oe(f,ce)||K.sawRoot&&!K.closedRoot||ze(K,"Text data outside of root node."),ce==="&"?K.state=te.TEXT_ENTITY:K.textNode+=ce):(K.state=te.OPEN_WAKA,K.startTagPosition=K.position);continue;case te.SCRIPT:ce==="<"?K.state=te.SCRIPT_ENDING:K.script+=ce;continue;case te.SCRIPT_ENDING:ce==="/"?K.state=te.CLOSE_TAG:(K.script+="<"+ce,K.state=te.SCRIPT);continue;case te.OPEN_WAKA:if(ce==="!")K.state=te.SGML_DECL,K.sgmlDecl="";else if(!O(f,ce))if(O(M,ce))K.state=te.OPEN_TAG,K.tagName=ce;else if(ce==="/")K.state=te.CLOSE_TAG,K.tagName="";else if(ce==="?")K.state=te.PROC_INST,K.procInstName=K.procInstBody="";else{if(ze(K,"Unencoded <"),K.startTagPosition+1<K.position){var ut=K.position-K.startTagPosition;ce=new Array(ut).join(" ")+ce}K.textNode+="<"+ce,K.state=te.TEXT}continue;case te.SGML_DECL:(K.sgmlDecl+ce).toUpperCase()===v?(Re(K,"onopencdata"),K.state=te.CDATA,K.sgmlDecl="",K.cdata=""):K.sgmlDecl+ce==="--"?(K.state=te.COMMENT,K.comment="",K.sgmlDecl=""):(K.sgmlDecl+ce).toUpperCase()===A?(K.state=te.DOCTYPE,(K.doctype||K.sawRoot)&&ze(K,"Inappropriately located doctype declaration"),K.doctype="",K.sgmlDecl=""):ce===">"?(Re(K,"onsgmldeclaration",K.sgmlDecl),K.sgmlDecl="",K.state=te.TEXT):(O(p,ce)&&(K.state=te.SGML_DECL_QUOTED),K.sgmlDecl+=ce);continue;case te.SGML_DECL_QUOTED:ce===K.q&&(K.state=te.SGML_DECL,K.q=""),K.sgmlDecl+=ce;continue;case te.DOCTYPE:ce===">"?(K.state=te.TEXT,Re(K,"ondoctype",K.doctype),K.doctype=!0):(K.doctype+=ce,ce==="["?K.state=te.DOCTYPE_DTD:O(p,ce)&&(K.state=te.DOCTYPE_QUOTED,K.q=ce));continue;case te.DOCTYPE_QUOTED:K.doctype+=ce,ce===K.q&&(K.q="",K.state=te.DOCTYPE);continue;case te.DOCTYPE_DTD:K.doctype+=ce,ce==="]"?K.state=te.DOCTYPE:O(p,ce)&&(K.state=te.DOCTYPE_DTD_QUOTED,K.q=ce);continue;case te.DOCTYPE_DTD_QUOTED:K.doctype+=ce,ce===K.q&&(K.state=te.DOCTYPE_DTD,K.q="");continue;case te.COMMENT:ce==="-"?K.state=te.COMMENT_ENDING:K.comment+=ce;continue;case te.COMMENT_ENDING:ce==="-"?(K.state=te.COMMENT_ENDED,K.comment=Ye(K.opt,K.comment),K.comment&&Re(K,"oncomment",K.comment),K.comment=""):(K.comment+="-"+ce,K.state=te.COMMENT);continue;case te.COMMENT_ENDED:ce!==">"?(ze(K,"Malformed comment"),K.comment+="--"+ce,K.state=te.COMMENT):K.state=te.TEXT;continue;case te.CDATA:ce==="]"?K.state=te.CDATA_ENDING:K.cdata+=ce;continue;case te.CDATA_ENDING:ce==="]"?K.state=te.CDATA_ENDING_2:(K.cdata+="]"+ce,K.state=te.CDATA);continue;case te.CDATA_ENDING_2:ce===">"?(K.cdata&&Re(K,"oncdata",K.cdata),Re(K,"onclosecdata"),K.cdata="",K.state=te.TEXT):ce==="]"?K.cdata+="]":(K.cdata+="]]"+ce,K.state=te.CDATA);continue;case te.PROC_INST:ce==="?"?K.state=te.PROC_INST_ENDING:O(f,ce)?K.state=te.PROC_INST_BODY:K.procInstName+=ce;continue;case te.PROC_INST_BODY:if(!K.procInstBody&&O(f,ce))continue;ce==="?"?K.state=te.PROC_INST_ENDING:K.procInstBody+=ce;continue;case te.PROC_INST_ENDING:ce===">"?(Re(K,"onprocessinginstruction",{name:K.procInstName,body:K.procInstBody}),K.procInstName=K.procInstBody="",K.state=te.TEXT):(K.procInstBody+="?"+ce,K.state=te.PROC_INST_BODY);continue;case te.OPEN_TAG:O(B,ce)?K.tagName+=ce:(st(K),ce===">"?Pe(K):ce==="/"?K.state=te.OPEN_TAG_SLASH:(oe(f,ce)&&ze(K,"Invalid character in tag name"),K.state=te.ATTRIB));continue;case te.OPEN_TAG_SLASH:ce===">"?(Pe(K,!0),Oe(K)):(ze(K,"Forward-slash in opening tag not followed by >"),K.state=te.ATTRIB);continue;case te.ATTRIB:if(O(f,ce))continue;ce===">"?Pe(K):ce==="/"?K.state=te.OPEN_TAG_SLASH:O(M,ce)?(K.attribName=ce,K.attribValue="",K.state=te.ATTRIB_NAME):ze(K,"Invalid attribute name");continue;case te.ATTRIB_NAME:ce==="="?K.state=te.ATTRIB_VALUE:ce===">"?(ze(K,"Attribute without value"),K.attribValue=K.attribName,jt(K),Pe(K)):O(f,ce)?K.state=te.ATTRIB_NAME_SAW_WHITE:O(B,ce)?K.attribName+=ce:ze(K,"Invalid attribute name");continue;case te.ATTRIB_NAME_SAW_WHITE:if(ce==="=")K.state=te.ATTRIB_VALUE;else{if(O(f,ce))continue;ze(K,"Attribute without value"),K.tag.attributes[K.attribName]="",K.attribValue="",Re(K,"onattribute",{name:K.attribName,value:""}),K.attribName="",ce===">"?Pe(K):O(M,ce)?(K.attribName=ce,K.state=te.ATTRIB_NAME):(ze(K,"Invalid attribute name"),K.state=te.ATTRIB)}continue;case te.ATTRIB_VALUE:if(O(f,ce))continue;O(p,ce)?(K.q=ce,K.state=te.ATTRIB_VALUE_QUOTED):(ze(K,"Unquoted attribute value"),K.state=te.ATTRIB_VALUE_UNQUOTED,K.attribValue=ce);continue;case te.ATTRIB_VALUE_QUOTED:if(ce!==K.q){ce==="&"?K.state=te.ATTRIB_VALUE_ENTITY_Q:K.attribValue+=ce;continue}jt(K),K.q="",K.state=te.ATTRIB_VALUE_CLOSED;continue;case te.ATTRIB_VALUE_CLOSED:O(f,ce)?K.state=te.ATTRIB:ce===">"?Pe(K):ce==="/"?K.state=te.OPEN_TAG_SLASH:O(M,ce)?(ze(K,"No whitespace between attributes"),K.attribName=ce,K.attribValue="",K.state=te.ATTRIB_NAME):ze(K,"Invalid attribute name");continue;case te.ATTRIB_VALUE_UNQUOTED:if(oe(y,ce)){ce==="&"?K.state=te.ATTRIB_VALUE_ENTITY_U:K.attribValue+=ce;continue}jt(K),ce===">"?Pe(K):K.state=te.ATTRIB;continue;case te.CLOSE_TAG:if(K.tagName)ce===">"?Oe(K):O(B,ce)?K.tagName+=ce:K.script?(K.script+="</"+K.tagName,K.tagName="",K.state=te.SCRIPT):(oe(f,ce)&&ze(K,"Invalid tagname in closing tag"),K.state=te.CLOSE_TAG_SAW_WHITE);else{if(O(f,ce))continue;oe(M,ce)?K.script?(K.script+="</"+ce,K.state=te.SCRIPT):ze(K,"Invalid tagname in closing tag."):K.tagName=ce}continue;case te.CLOSE_TAG_SAW_WHITE:if(O(f,ce))continue;ce===">"?Oe(K):ze(K,"Invalid characters in closing tag");continue;case te.TEXT_ENTITY:case te.ATTRIB_VALUE_ENTITY_Q:case te.ATTRIB_VALUE_ENTITY_U:var Ve,Je;switch(K.state){case te.TEXT_ENTITY:Ve=te.TEXT,Je="textNode";break;case te.ATTRIB_VALUE_ENTITY_Q:Ve=te.ATTRIB_VALUE_QUOTED,Je="attribValue";break;case te.ATTRIB_VALUE_ENTITY_U:Ve=te.ATTRIB_VALUE_UNQUOTED,Je="attribValue"}ce===";"?(K[Je]+=gt(K),K.entity="",K.state=Ve):O(K.entity.length?L:ie,ce)?K.entity+=ce:(ze(K,"Invalid character in entity name"),K[Je]+="&"+K.entity+ce,K.entity="",K.state=Ve);continue;default:throw new Error(K,"Unknown state: "+K.state)}return K.position>=K.bufferCheckPosition&&function(Ke){for(var it=Math.max(r.MAX_BUFFER_LENGTH,10),Et=0,ot=0,xt=o.length;ot<xt;ot++){var En=Ke[o[ot]].length;if(En>it)switch(o[ot]){case"textNode":Xe(Ke);break;case"cdata":Re(Ke,"oncdata",Ke.cdata),Ke.cdata="";break;case"script":Re(Ke,"onscript",Ke.script),Ke.script="";break;default:Ze(Ke,"Max buffer length exceeded: "+o[ot])}Et=Math.max(Et,En)}var tn=r.MAX_BUFFER_LENGTH-Et;Ke.bufferCheckPosition=tn+Ke.position}(K),K},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var F;Xe(F=this),F.cdata!==""&&(Re(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(Re(F,"onscript",F.script),F.script="")}};try{i=t(3515).Stream}catch{i=function(){}}var d=r.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function c(F,K){if(!(this instanceof c))return new c(F,K);i.apply(this),this._parser=new l(F,K),this.writable=!0,this.readable=!0;var Ee=this;this._parser.onend=function(){Ee.emit("end")},this._parser.onerror=function(ce){Ee.emit("error",ce),Ee._parser.error=null},this._decoder=null,d.forEach(function(ce){Object.defineProperty(Ee,"on"+ce,{get:function(){return Ee._parser["on"+ce]},set:function(He){if(!He)return Ee.removeAllListeners(ce),Ee._parser["on"+ce]=He,He;Ee.on(ce,He)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(i.prototype,{constructor:{value:c}}),c.prototype.write=function(F){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(F)){if(!this._decoder){var K=t(748).StringDecoder;this._decoder=new K("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},c.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},c.prototype.on=function(F,K){var Ee=this;return Ee._parser["on"+F]||d.indexOf(F)===-1||(Ee._parser["on"+F]=function(){var ce=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ce.splice(0,0,F),Ee.emit.apply(Ee,ce)}),i.prototype.on.call(Ee,F,K)};var f=`\r
	 `,m="0124356789",g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",p=`'"`,y=f+">",v="[CDATA[",A="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/2000/xmlns/",U={xml:I,xmlns:P};f=w(f),m=w(m),g=w(g);var M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,B=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ie=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,L=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function w(F){return F.split("").reduce(function(K,Ee){return K[Ee]=!0,K},{})}function O(F,K){return function(Ee){return Object.prototype.toString.call(Ee)==="[object RegExp]"}(F)?!!K.match(F):F[K]}function oe(F,K){return!O(F,K)}p=w(p),y=w(y);var D,ve,Le,te=0;for(var $e in r.STATE={BEGIN:te++,BEGIN_WHITESPACE:te++,TEXT:te++,TEXT_ENTITY:te++,OPEN_WAKA:te++,SGML_DECL:te++,SGML_DECL_QUOTED:te++,DOCTYPE:te++,DOCTYPE_QUOTED:te++,DOCTYPE_DTD:te++,DOCTYPE_DTD_QUOTED:te++,COMMENT_STARTING:te++,COMMENT:te++,COMMENT_ENDING:te++,COMMENT_ENDED:te++,CDATA:te++,CDATA_ENDING:te++,CDATA_ENDING_2:te++,PROC_INST:te++,PROC_INST_BODY:te++,PROC_INST_ENDING:te++,OPEN_TAG:te++,OPEN_TAG_SLASH:te++,ATTRIB:te++,ATTRIB_NAME:te++,ATTRIB_NAME_SAW_WHITE:te++,ATTRIB_VALUE:te++,ATTRIB_VALUE_QUOTED:te++,ATTRIB_VALUE_CLOSED:te++,ATTRIB_VALUE_UNQUOTED:te++,ATTRIB_VALUE_ENTITY_Q:te++,ATTRIB_VALUE_ENTITY_U:te++,CLOSE_TAG:te++,CLOSE_TAG_SAW_WHITE:te++,SCRIPT:te++,SCRIPT_ENDING:te++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(F){var K=r.ENTITIES[F],Ee=typeof K=="number"?String.fromCharCode(K):K;r.ENTITIES[F]=Ee}),r.STATE)r.STATE[r.STATE[$e]]=$e;function Ue(F,K,Ee){F[K]&&F[K](Ee)}function Re(F,K,Ee){F.textNode&&Xe(F),Ue(F,K,Ee)}function Xe(F){F.textNode=Ye(F.opt,F.textNode),F.textNode&&Ue(F,"ontext",F.textNode),F.textNode=""}function Ye(F,K){return F.trim&&(K=K.trim()),F.normalize&&(K=K.replace(/\s+/g," ")),K}function Ze(F,K){return Xe(F),F.trackPosition&&(K+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),K=new Error(K),F.error=K,Ue(F,"onerror",K),F}function Ne(F){return F.sawRoot&&!F.closedRoot&&ze(F,"Unclosed root tag"),F.state!==te.BEGIN&&F.state!==te.BEGIN_WHITESPACE&&F.state!==te.TEXT&&Ze(F,"Unexpected end"),Xe(F),F.c="",F.closed=!0,Ue(F,"onend"),l.call(F,F.strict,F.opt),F}function ze(F,K){if(typeof F!="object"||!(F instanceof l))throw new Error("bad call to strictFail");F.strict&&Ze(F,K)}function st(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var K=F.tags[F.tags.length-1]||F,Ee=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(Ee.ns=K.ns),F.attribList.length=0,Re(F,"onopentagstart",Ee)}function Rt(F,K){var Ee=F.indexOf(":")<0?["",F]:F.split(":"),ce=Ee[0],He=Ee[1];return K&&F==="xmlns"&&(ce="xmlns",He=""),{prefix:ce,local:He}}function jt(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName))F.attribName=F.attribValue="";else{if(F.opt.xmlns){var K=Rt(F.attribName,!0),Ee=K.prefix,ce=K.local;if(Ee==="xmlns")if(ce==="xml"&&F.attribValue!==I)ze(F,"xml: prefix must be bound to "+I+`
Actual: `+F.attribValue);else if(ce==="xmlns"&&F.attribValue!==P)ze(F,"xmlns: prefix must be bound to "+P+`
Actual: `+F.attribValue);else{var He=F.tag,ut=F.tags[F.tags.length-1]||F;He.ns===ut.ns&&(He.ns=Object.create(ut.ns)),He.ns[ce]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,Re(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}}function Pe(F,K){if(F.opt.xmlns){var Ee=F.tag,ce=Rt(F.tagName);Ee.prefix=ce.prefix,Ee.local=ce.local,Ee.uri=Ee.ns[ce.prefix]||"",Ee.prefix&&!Ee.uri&&(ze(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),Ee.uri=ce.prefix);var He=F.tags[F.tags.length-1]||F;Ee.ns&&He.ns!==Ee.ns&&Object.keys(Ee.ns).forEach(function(fn){Re(F,"onopennamespace",{prefix:fn,uri:Ee.ns[fn]})});for(var ut=0,Ve=F.attribList.length;ut<Ve;ut++){var Je=F.attribList[ut],Ke=Je[0],it=Je[1],Et=Rt(Ke,!0),ot=Et.prefix,xt=Et.local,En=ot===""?"":Ee.ns[ot]||"",tn={name:Ke,value:it,prefix:ot,local:xt,uri:En};ot&&ot!=="xmlns"&&!En&&(ze(F,"Unbound namespace prefix: "+JSON.stringify(ot)),tn.uri=ot),F.tag.attributes[Ke]=tn,Re(F,"onattribute",tn)}F.attribList.length=0}F.tag.isSelfClosing=!!K,F.sawRoot=!0,F.tags.push(F.tag),Re(F,"onopentag",F.tag),K||(F.noscript||F.tagName.toLowerCase()!=="script"?F.state=te.TEXT:F.state=te.SCRIPT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function Oe(F){if(!F.tagName)return ze(F,"Weird empty close tag."),F.textNode+="</>",void(F.state=te.TEXT);if(F.script){if(F.tagName!=="script")return F.script+="</"+F.tagName+">",F.tagName="",void(F.state=te.SCRIPT);Re(F,"onscript",F.script),F.script=""}var K=F.tags.length,Ee=F.tagName;F.strict||(Ee=Ee[F.looseCase]());for(var ce=Ee;K--&&F.tags[K].name!==ce;)ze(F,"Unexpected close tag");if(K<0)return ze(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",void(F.state=te.TEXT);F.tagName=Ee;for(var He=F.tags.length;He-- >K;){var ut=F.tag=F.tags.pop();F.tagName=F.tag.name,Re(F,"onclosetag",F.tagName);var Ve={};for(var Je in ut.ns)Ve[Je]=ut.ns[Je];var Ke=F.tags[F.tags.length-1]||F;F.opt.xmlns&&ut.ns!==Ke.ns&&Object.keys(ut.ns).forEach(function(it){var Et=ut.ns[it];Re(F,"onclosenamespace",{prefix:it,uri:Et})})}K===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=te.TEXT}function gt(F){var K,Ee=F.entity,ce=Ee.toLowerCase(),He="";return F.ENTITIES[Ee]?F.ENTITIES[Ee]:F.ENTITIES[ce]?F.ENTITIES[ce]:((Ee=ce).charAt(0)==="#"&&(Ee.charAt(1)==="x"?(Ee=Ee.slice(2),He=(K=parseInt(Ee,16)).toString(16)):(Ee=Ee.slice(1),He=(K=parseInt(Ee,10)).toString(10))),Ee=Ee.replace(/^0+/,""),He.toLowerCase()!==Ee?(ze(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(K))}function Q(F,K){K==="<"?(F.state=te.OPEN_WAKA,F.startTagPosition=F.position):oe(f,K)&&(ze(F,"Non-whitespace before first tag."),F.textNode=K,F.state=te.TEXT)}function J(F,K){var Ee="";return K<F.length&&(Ee=F.charAt(K)),Ee}te=r.STATE,String.fromCodePoint||(D=String.fromCharCode,ve=Math.floor,Le=function(){var F,K,Ee=[],ce=-1,He=arguments.length;if(!He)return"";for(var ut="";++ce<He;){var Ve=Number(arguments[ce]);if(!isFinite(Ve)||Ve<0||Ve>1114111||ve(Ve)!==Ve)throw RangeError("Invalid code point: "+Ve);Ve<=65535?Ee.push(Ve):(F=55296+((Ve-=65536)>>10),K=Ve%1024+56320,Ee.push(F,K)),(ce+1===He||Ee.length>16384)&&(ut+=D.apply(null,Ee),Ee.length=0)}return ut},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Le,configurable:!0,writable:!0}):String.fromCodePoint=Le)})(e)},6739:function(n,e,t){(function(r,i,o,l,d){function c(J){if("contents"in J)for(var F=("styleAttrs"in J)?J.styleAttrs[l.byName.ruby.qname]:null,K=J.kind==="span"&&(F==="container"||F==="textContainer"||F==="baseContainer"),Ee=J.contents.length-1;Ee>=0;Ee--)!K||"styleAttrs"in J.contents[Ee]&&l.byName.ruby.qname in J.contents[Ee].styleAttrs?c(J.contents[Ee]):delete J.contents[Ee]}function f(J,F,K,Ee){var ce=Ee&&Ee.timeContainer==="seq",He=0;Ee&&(He=ce&&K?K.end:Ee.begin),F.begin=F.explicit_begin?F.explicit_begin+He:He;var ut=F.begin,Ve=null;if("sets"in F)for(var Je=0;Je<F.sets.length;Je++)f(J,F.sets[Je],Ve,F),ut=F.timeContainer==="seq"?F.sets[Je].end:Math.max(ut,F.sets[Je].end),Ve=F.sets[Je];if("contents"in F){if("contents"in F)for(var Ke=0;Ke<F.contents.length;Ke++)f(J,F.contents[Ke],Ve,F),ut=F.timeContainer==="seq"?F.contents[Ke].end:Math.max(ut,F.contents[Ke].end),Ve=F.contents[Ke]}else ut=ce?F.begin:Number.POSITIVE_INFINITY;F.explicit_end!==null&&F.explicit_dur!==null?F.end=Math.min(F.begin+F.explicit_dur,He+F.explicit_end):F.explicit_end===null&&F.explicit_dur!==null?F.end=F.begin+F.explicit_dur:F.explicit_end!==null&&F.explicit_dur===null?F.end=He+F.explicit_end:F.end=ut,delete F.explicit_begin,delete F.explicit_dur,delete F.explicit_end,J._registerEvent(F)}function m(J){this.node=J}function g(){this.events=[],this.head=new p,this.body=null}function p(){this.styling=new y,this.layout=new I}function y(){this.styles={},this.initials={}}function v(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function A(){this.styleAttrs=null}function I(){this.regions={}}function P(J,F){U.call(this,"image"),this.src=J,this.type=F}function U(J){this.kind=J}function M(J){this.id=J}function B(J){this.regionID=J}function ie(J){this.styleAttrs=J}function L(J){this.sets=J}function w(J){this.contents=J}function O(J,F,K){this.explicit_begin=J,this.explicit_end=F,this.explicit_dur=K}function oe(){U.call(this,"body")}function D(){U.call(this,"div")}function ve(){U.call(this,"p")}function Le(){U.call(this,"span")}function te(){U.call(this,"span")}function $e(){U.call(this,"br")}function Ue(){}function Re(){}function Xe(J){return J&&"xml:id"in J.attributes&&J.attributes["xml:id"].value||null}function Ye(J){return J&&"style"in J.attributes?J.attributes.style.value.split(" "):[]}function Ze(J,F){var K={};if(J!==null)for(var Ee in J.attributes){var ce=J.attributes[Ee].uri+" "+J.attributes[Ee].local,He=l.byQName[ce];if(He!==void 0){var ut=He.parse(J.attributes[Ee].value);ut!==null?(K[ce]=ut,He===l.byName.zIndex&&Pe(F,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Oe(F,"Cannot parse styling attribute "+ce+" --> "+J.attributes[Ee].value)}}return K}function Ne(J,F,K){for(var Ee in J.attributes)if(J.attributes[Ee].uri===F&&J.attributes[Ee].local===K)return J.attributes[Ee].value;return null}function ze(J,F,K){var Ee,ce=null;return(Ee=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?F!==null&&(ce=parseFloat(Ee[1])/F):(Ee=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?J!==null&&(ce=parseFloat(Ee[1])/J):(Ee=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?ce=parseFloat(Ee[1])/1e3:(Ee=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?ce=parseFloat(Ee[1]):(Ee=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?ce=3600*parseFloat(Ee[1]):(Ee=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?ce=60*parseFloat(Ee[1]):(Ee=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?ce=3600*parseInt(Ee[1])+60*parseInt(Ee[2])+parseFloat(Ee[3]):(Ee=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&F!==null&&(ce=3600*parseInt(Ee[1])+60*parseInt(Ee[2])+parseInt(Ee[3])+(Ee[4]===null?0:parseInt(Ee[4])/F)),ce}function st(J,F,K){for(;F.styleRefs.length>0;){var Ee=F.styleRefs.pop();Ee in J.styles?(st(J,J.styles[Ee],K),jt(J.styles[Ee].styleAttrs,F.styleAttrs)):Oe(K,"Non-existant style id referenced")}}function Rt(J,F,K,Ee){for(var ce=F.length-1;ce>=0;ce--){var He=F[ce];He in J.styles?jt(J.styles[He].styleAttrs,K):Oe(Ee,"Non-existant style id referenced")}}function jt(J,F){for(var K in J)J.hasOwnProperty(K)&&(K in F||(F[K]=J[K]))}function Pe(J,F){if(J&&J.warn&&J.warn(F))throw F}function Oe(J,F){if(J&&J.error&&J.error(F))throw F}function gt(J,F){throw J&&J.fatal&&J.fatal(F),F}function Q(J,F){for(var K,Ee=0,ce=J.length-1;Ee<=ce;){var He=J[K=Math.floor((Ee+ce)/2)];if(He<F)Ee=K+1;else{if(!(He>F))return{found:!0,index:K};ce=K-1}}return{found:!1,index:Ee}}r.fromXML=function(J,F,K){var Ee=i.parser(!0,{xmlns:!0}),ce=[],He=[],ut=[],Ve=0,Je=null;Ee.onclosetag=function(xt){if(ce[0]instanceof Ue)Je.head!==null&&Je.head.styling!==null&&Rt(Je.head.styling,ce[0].styleRefs,ce[0].styleAttrs,F),delete ce[0].styleRefs;else if(ce[0]instanceof y)for(var En in ce[0].styles)ce[0].styles.hasOwnProperty(En)&&st(ce[0],ce[0].styles[En],F);else if(ce[0]instanceof ve||ce[0]instanceof Le){if(ce[0].contents.length>1){var tn,fn=[ce[0].contents[0]];for(tn=1;tn<ce[0].contents.length;tn++)ce[0].contents[tn]instanceof te&&fn[fn.length-1]instanceof te?fn[fn.length-1].text+=ce[0].contents[tn].text:fn.push(ce[0].contents[tn]);ce[0].contents=fn}ce[0]instanceof Le&&ce[0].contents.length===1&&ce[0].contents[0]instanceof te&&(ce[0].text=ce[0].contents[0].text,delete ce[0].contents)}else ce[0]instanceof m&&(ce[0].node.uri===o.ns_tt&&ce[0].node.local==="metadata"?Ve--:Ve>0&&K&&"onCloseTag"in K&&K.onCloseTag());ut.shift(),He.shift(),ce.shift()},Ee.ontext=function(xt){if(ce[0]!==void 0)if(ce[0]instanceof Le||ce[0]instanceof ve){if(ce[0]instanceof Le){var En=ce[0].styleAttrs[l.byName.ruby.qname];if(En==="container"||En==="textContainer"||En==="baseContainer")return}var tn=new te;tn.initFromText(Je,ce[0],xt,He[0],ut[0],F),ce[0].contents.push(tn)}else ce[0]instanceof m&&Ve>0&&K&&"onText"in K&&K.onText(xt)},Ee.onopentag=function(xt){var En=xt.attributes["xml:space"];En?ut.unshift(En.value):ut.length===0?ut.unshift("default"):ut.unshift(ut[0]);var tn=xt.attributes["xml:lang"];if(tn?He.unshift(tn.value):He.length===0?He.unshift(""):He.unshift(He[0]),xt.uri===o.ns_tt)if(xt.local==="tt")Je!==null&&gt(F,"Two <tt> elements at ("+this.line+","+this.column+")"),(Je=new g).initFromNode(xt,He[0],F),ce.unshift(Je);else if(xt.local==="head")ce[0]instanceof g||gt(F,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),ce.unshift(Je.head);else if(xt.local==="styling")ce[0]instanceof p||gt(F,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),ce.unshift(Je.head.styling);else if(xt.local==="style"){var fn;ce[0]instanceof y?((fn=new v).initFromNode(xt,F),fn.id?Je.head.styling.styles[fn.id]=fn:Oe(F,"<style> element missing @id attribute"),ce.unshift(fn)):ce[0]instanceof Ue?((fn=new v).initFromNode(xt,F),jt(fn.styleAttrs,ce[0].styleAttrs),ce.unshift(fn)):gt(F,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(xt.local==="initial"){var Ht;if(ce[0]instanceof y){for(var nr in(Ht=new A).initFromNode(xt,F),Ht.styleAttrs)Ht.styleAttrs.hasOwnProperty(nr)&&(Je.head.styling.initials[nr]=Ht.styleAttrs[nr]);ce.unshift(Ht)}else gt(F,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(xt.local==="layout")ce[0]instanceof p||gt(F,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),ce.unshift(Je.head.layout);else if(xt.local==="region"){ce[0]instanceof I||gt(F,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var vr=new Ue;vr.initFromNode(Je,xt,He[0],F),!vr.id||vr.id in Je.head.layout.regions?Oe(F,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Je.head.layout.regions[vr.id]=vr,ce.unshift(vr)}else if(xt.local==="body"){ce[0]instanceof g||gt(F,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),Je.body!==null&&gt(F,"Second <body> element at "+this.line+","+this.column+")");var Fr=new oe;Fr.initFromNode(Je,xt,He[0],F),Je.body=Fr,ce.unshift(Fr)}else if(xt.local==="div"){ce[0]instanceof D||ce[0]instanceof oe||gt(F,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Lr=new D;Lr.initFromNode(Je,ce[0],xt,He[0],F);var mr=Lr.styleAttrs[l.byName.backgroundImage.qname];mr&&(Lr.contents.push(new P(mr)),delete Lr.styleAttrs[l.byName.backgroundImage.qname]),ce[0].contents.push(Lr),ce.unshift(Lr)}else if(xt.local==="image"){ce[0]instanceof D||gt(F,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var ki=new P;ki.initFromNode(Je,ce[0],xt,He[0],F),ce[0].contents.push(ki),ce.unshift(ki)}else if(xt.local==="p"){ce[0]instanceof D||gt(F,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var $t=new ve;$t.initFromNode(Je,ce[0],xt,He[0],F),ce[0].contents.push($t),ce.unshift($t)}else if(xt.local==="span"){ce[0]instanceof Le||ce[0]instanceof ve||gt(F,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Bt=new Le;Bt.initFromNode(Je,ce[0],xt,He[0],ut[0],F),ce[0].contents.push(Bt),ce.unshift(Bt)}else if(xt.local==="br"){ce[0]instanceof Le||ce[0]instanceof ve||gt(F,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Pt=new $e;Pt.initFromNode(Je,ce[0],xt,He[0],F),ce[0].contents.push(Pt),ce.unshift(Pt)}else if(xt.local==="set"){ce[0]instanceof Le||ce[0]instanceof ve||ce[0]instanceof D||ce[0]instanceof oe||ce[0]instanceof Ue||ce[0]instanceof $e||gt(F,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var kt=new Re;kt.initFromNode(Je,ce[0],xt,F),ce[0].sets.push(kt),ce.unshift(kt)}else ce.unshift(new m(xt));else ce.unshift(new m(xt));if(ce[0]instanceof m){if(xt.uri===o.ns_tt&&xt.local==="metadata")Ve++;else if(Ve>0&&K&&"onOpenTag"in K){var an=[];for(var sn in xt.attributes)an[xt.attributes[sn].uri+" "+xt.attributes[sn].local]={uri:xt.attributes[sn].uri,local:xt.attributes[sn].local,value:xt.attributes[sn].value};K.onOpenTag(xt.uri,xt.local,an)}}},Ee.write(J).close(),delete Je.head.styling.styles;var Ke=!1;for(var it in Je.head.layout.regions)if(Je.head.layout.regions.hasOwnProperty(it)){Ke=!0;break}if(!Ke){var Et=Ue.prototype.createDefaultRegion(Je.lang);Je.head.layout.regions[Et.id]=Et}for(var ot in Je.head.layout.regions)Je.head.layout.regions.hasOwnProperty(ot)&&f(Je,Je.head.layout.regions[ot],null,null);return Je.body&&f(Je,Je.body,null,null),Je.body&&c(Je.body),Je},g.prototype.initFromNode=function(J,F,K){var Ee=function(Ve,Je){var Ke=Ne(Ve,o.ns_ttp,"cellResolution"),it=15,Et=32;if(Ke!==null){var ot=/(\d+) (\d+)/.exec(Ke);ot!==null?(Et=parseInt(ot[1]),it=parseInt(ot[2])):Pe(Je,"Malformed cellResolution value (using initial value instead)")}return{w:Et,h:it}}(J,K);this.cellLength={h:new d.ComputedLength(0,1/Ee.h),w:new d.ComputedLength(1/Ee.w,0)};var ce=function(Ve,Je){var Ke,it=Ne(Ve,o.ns_ttp,"frameRate"),Et=30;it!==null&&((Ke=/(\d+)/.exec(it))!==null?Et=parseInt(Ke[1]):Pe(Je,"Malformed frame rate attribute (using initial value instead)"));var ot=Ne(Ve,o.ns_ttp,"frameRateMultiplier"),xt=1;ot!==null&&((Ke=/(\d+) (\d+)/.exec(ot))!==null?xt=parseInt(Ke[1])/parseInt(Ke[2]):Pe(Je,"Malformed frame rate multiplier attribute (using initial value instead)"));var En=xt*Et,tn=1,fn=Ne(Ve,o.ns_ttp,"tickRate");return fn===null?it!==null&&(tn=En):(Ke=/(\d+)/.exec(fn))!==null?tn=parseInt(Ke[1]):Pe(Je,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:En,tickRate:tn}}(J,K);this.effectiveFrameRate=ce.effectiveFrameRate,this.tickRate=ce.tickRate,this.aspectRatio=function(Ve,Je){var Ke=Ne(Ve,o.ns_ittp,"aspectRatio");Ke===null&&(Ke=Ne(Ve,o.ns_ttp,"displayAspectRatio"));var it=null;if(Ke!==null){var Et=/(\d+)\s+(\d+)/.exec(Ke);if(Et!==null){var ot=parseInt(Et[1]),xt=parseInt(Et[2]);ot!==0&&xt!==0?it=ot/xt:Oe(Je,"Illegal aspectRatio values (ignoring)")}else Oe(Je,"Malformed aspectRatio attribute (ignoring)")}return it}(J,K);var He=Ne(J,o.ns_ttp,"timeBase");He!==null&&He!=="media"&&gt(K,"Unsupported time base");var ut=function(Ve,Je){var Ke=Ne(Ve,o.ns_tts,"extent");if(Ke===null)return null;var it=Ke.split(" ");if(it.length!==2)return Pe(Je,"Malformed extent (ignoring)"),null;var Et=d.parseLength(it[0]),ot=d.parseLength(it[1]);return ot&&Et?{h:ot,w:Et}:(Pe(Je,"Malformed extent values (ignoring)"),null)}(J,K);ut===null?this.pxLength={h:null,w:null}:(ut.h.unit==="px"&&ut.w.unit==="px"||gt(K,"Extent on TT must be in px or absent"),this.pxLength={h:new d.ComputedLength(0,1/ut.h.value),w:new d.ComputedLength(1/ut.w.value,0)}),this.dimensions={h:new d.ComputedLength(0,1),w:new d.ComputedLength(1,0)},this.lang=F},g.prototype._registerEvent=function(J){if(!(J.end<=J.begin)){var F=Q(this.events,J.begin);if(F.found||this.events.splice(F.index,0,J.begin),J.end!==Number.POSITIVE_INFINITY){var K=Q(this.events,J.end);K.found||this.events.splice(K.index,0,J.end)}}},g.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},g.prototype.getMediaTimeEvents=function(){return this.events},v.prototype.initFromNode=function(J,F){this.id=Xe(J),this.styleAttrs=Ze(J,F),this.styleRefs=Ye(J)},A.prototype.initFromNode=function(J,F){for(var K in this.styleAttrs={},J.attributes)if(J.attributes[K].uri===o.ns_itts||J.attributes[K].uri===o.ns_ebutts||J.attributes[K].uri===o.ns_tts){var Ee=J.attributes[K].uri+" "+J.attributes[K].local;this.styleAttrs[Ee]=J.attributes[K].value}},P.prototype.initFromNode=function(J,F,K,Ee,ce){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||Oe(ce,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||Oe(ce,"Invalid image@type attribute"),ie.prototype.initFromNode.call(this,J,F,K,ce),O.prototype.initFromNode.call(this,J,F,K,ce),L.prototype.initFromNode.call(this,J,F,K,ce),B.prototype.initFromNode.call(this,J,F,K,ce),this.lang=Ee},M.prototype.initFromNode=function(J,F,K,Ee){this.id=Xe(K)},B.prototype.initFromNode=function(J,F,K,Ee){this.regionID=function(ce){return ce&&"region"in ce.attributes?ce.attributes.region.value:""}(K)},ie.prototype.initFromNode=function(J,F,K,Ee){this.styleAttrs=Ze(K,Ee),J.head!==null&&J.head.styling!==null&&Rt(J.head.styling,Ye(K),this.styleAttrs,Ee)},L.prototype.initFromNode=function(J,F,K,Ee){this.sets=[]},w.prototype.initFromNode=function(J,F,K,Ee){this.contents=[]},O.prototype.initFromNode=function(J,F,K,Ee){var ce=function(He,ut,Ve,Je){var Ke=null;Ve&&"begin"in Ve.attributes&&(Ke=ze(He.tickRate,He.effectiveFrameRate,Ve.attributes.begin.value))===null&&Pe(Je,"Malformed begin value "+Ve.attributes.begin.value+" (using 0)");var it=null;Ve&&"dur"in Ve.attributes&&(it=ze(He.tickRate,He.effectiveFrameRate,Ve.attributes.dur.value))===null&&Pe(Je,"Malformed dur value "+Ve.attributes.dur.value+" (ignoring)");var Et=null;return Ve&&"end"in Ve.attributes&&(Et=ze(He.tickRate,He.effectiveFrameRate,Ve.attributes.end.value))===null&&Pe(Je,"Malformed end value (ignoring)"),{explicit_begin:Ke,explicit_end:Et,explicit_dur:it}}(J,0,K,Ee);this.explicit_begin=ce.explicit_begin,this.explicit_end=ce.explicit_end,this.explicit_dur=ce.explicit_dur,this.timeContainer=function(He,ut){var Ve=He&&"timeContainer"in He.attributes?He.attributes.timeContainer.value:null;return Ve&&Ve!=="par"?Ve==="seq"?"seq":(Oe(ut,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,Ee)},oe.prototype.initFromNode=function(J,F,K,Ee){ie.prototype.initFromNode.call(this,J,null,F,Ee),O.prototype.initFromNode.call(this,J,null,F,Ee),L.prototype.initFromNode.call(this,J,null,F,Ee),B.prototype.initFromNode.call(this,J,null,F,Ee),w.prototype.initFromNode.call(this,J,null,F,Ee),this.lang=K},D.prototype.initFromNode=function(J,F,K,Ee,ce){ie.prototype.initFromNode.call(this,J,F,K,ce),O.prototype.initFromNode.call(this,J,F,K,ce),L.prototype.initFromNode.call(this,J,F,K,ce),B.prototype.initFromNode.call(this,J,F,K,ce),w.prototype.initFromNode.call(this,J,F,K,ce),this.lang=Ee},ve.prototype.initFromNode=function(J,F,K,Ee,ce){ie.prototype.initFromNode.call(this,J,F,K,ce),O.prototype.initFromNode.call(this,J,F,K,ce),L.prototype.initFromNode.call(this,J,F,K,ce),B.prototype.initFromNode.call(this,J,F,K,ce),w.prototype.initFromNode.call(this,J,F,K,ce),this.lang=Ee},Le.prototype.initFromNode=function(J,F,K,Ee,ce,He){ie.prototype.initFromNode.call(this,J,F,K,He),O.prototype.initFromNode.call(this,J,F,K,He),L.prototype.initFromNode.call(this,J,F,K,He),B.prototype.initFromNode.call(this,J,F,K,He),w.prototype.initFromNode.call(this,J,F,K,He),this.space=ce,this.lang=Ee},te.prototype.initFromText=function(J,F,K,Ee,ce,He){O.prototype.initFromNode.call(this,J,F,null,He),this.text=K,this.space=ce,this.lang=Ee},$e.prototype.initFromNode=function(J,F,K,Ee,ce){B.prototype.initFromNode.call(this,J,F,K,ce),O.prototype.initFromNode.call(this,J,F,K,ce),this.lang=Ee},Ue.prototype.createDefaultRegion=function(J){var F=new Ue;return M.call(F,""),ie.call(F,{}),L.call(F,[]),O.call(F,0,Number.POSITIVE_INFINITY,null),this.lang=J,F},Ue.prototype.initFromNode=function(J,F,K,Ee){M.prototype.initFromNode.call(this,J,null,F,Ee),O.prototype.initFromNode.call(this,J,null,F,Ee),L.prototype.initFromNode.call(this,J,null,F,Ee),this.styleAttrs=Ze(F,Ee),this.styleRefs=Ye(F),this.lang=K},Re.prototype.initFromNode=function(J,F,K,Ee){O.prototype.initFromNode.call(this,J,F,K,Ee);var ce=Ze(K,Ee);for(var He in this.qname=null,this.value=null,ce)if(ce.hasOwnProperty(He)){if(this.qname){Oe(Ee,"More than one style specified on set");break}this.qname=He,this.value=ce[He]}}})(e,typeof sax>"u"?t(5474):sax,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},1612:function(n,e,t){var r=/firefox/i.test(navigator.userAgent);(function(i,o,l){function d(w,O,oe,D){var ve;if(oe.kind==="region")(ve=document.createElement("div")).style.position="absolute";else if(oe.kind==="body")ve=document.createElement("div");else if(oe.kind==="div")ve=document.createElement("div");else if(oe.kind==="image"){if(ve=document.createElement("img"),w.imgResolver!==null&&oe.src!==null){var Le=w.imgResolver(oe.src,ve);Le&&(ve.src=Le),ve.height=w.regionH,ve.width=w.regionW}}else if(oe.kind==="p")ve=document.createElement("p");else if(oe.kind==="span")if(oe.styleAttrs[l.byName.ruby.qname]==="container")ve=document.createElement("ruby"),w.ruby=!0;else if(oe.styleAttrs[l.byName.ruby.qname]==="base")ve=document.createElement("span");else if(oe.styleAttrs[l.byName.ruby.qname]==="text")ve=document.createElement("rt");else if(oe.styleAttrs[l.byName.ruby.qname]==="baseContainer")ve=document.createElement("rbc");else if(oe.styleAttrs[l.byName.ruby.qname]==="textContainer")ve=document.createElement("rtc");else{if(oe.styleAttrs[l.byName.ruby.qname]==="delimiter")return;ve=document.createElement("span")}else oe.kind==="br"&&(ve=document.createElement("br"));if(ve){if(oe.lang&&(oe.kind!=="region"&&oe.lang===D.lang||(ve.lang=oe.lang)),O.appendChild(ve),ve.style.margin="0",oe.kind==="region"){var te=oe.styleAttrs[l.byName.writingMode.qname];te==="lrtb"||te==="lr"?(w.ipd="lr",w.bpd="tb"):te==="rltb"||te==="rl"?(w.ipd="rl",w.bpd="tb"):te==="tblr"?(w.ipd="tb",w.bpd="lr"):te!=="tbrl"&&te!=="tb"||(w.ipd="tb",w.bpd="rl")}else if(oe.kind==="p"&&w.bpd==="tb"){var $e=oe.styleAttrs[l.byName.direction.qname];w.ipd=$e==="ltr"?"lr":"rl"}for(var Ue=0;Ue<A.length;Ue++){var Re=A[Ue],Xe=oe.styleAttrs[Re.qname];Xe!==void 0&&Re.map!==null&&Re.map(w,ve,oe,Xe)}var Ye=ve,Ze=oe.styleAttrs[l.byName.linePadding.qname];if(Ze&&!Ze.isZero()){var Ne=Ze.toUsedLength(w.w,w.h);if(Ne>0){var ze=Math.ceil(Ne)+"px";w.bpd==="tb"?(Ye.style.paddingLeft=ze,Ye.style.paddingRight=ze):(Ye.style.paddingTop=ze,Ye.style.paddingBottom=ze),w.lp=Ze}}var st=oe.styleAttrs[l.byName.multiRowAlign.qname];if(st&&st!=="auto"){var Rt=document.createElement("span");Rt.style.display="inline-block",Rt.style.textAlign=st,ve.appendChild(Rt),Ye=Rt,w.mra=st}var jt=oe.styleAttrs[l.byName.rubyReserve.qname];if(jt&&jt[0]!=="none"&&(w.rubyReserve=jt),oe.styleAttrs[l.byName.fillLineGap.qname]&&(w.flg=!0),oe.kind==="span"&&oe.text){var Pe=oe.styleAttrs[l.byName.textEmphasis.qname];if(Pe&&Pe.style!=="none"&&(w.textEmphasis=!0),l.byName.textCombine.qname in oe.styleAttrs&&oe.styleAttrs[l.byName.textCombine.qname]==="all")ve.textContent=oe.text,ve._isd_element=oe,Pe&&y(w,ve,0,Pe);else for(var Oe="",gt=0;gt<oe.text.length;gt++){Oe+=oe.text.charAt(gt);var Q=oe.text.charCodeAt(gt);if(Q<55296||Q>56319||gt===oe.text.length-1){var J=document.createElement("span");J.textContent=Oe,Pe&&y(w,J,0,Pe),ve.appendChild(J),Oe="",J._isd_element=oe}}}if("contents"in oe)for(var F=0;F<oe.contents.length;F++)d(w,Ye,oe.contents[F],oe);var K=[];if(oe.kind==="p"&&(p(w,Ye,K,null),w.rubyReserve&&(function(Ve,Je){for(var Ke=0;Ke<Ve.length;Ke++){var it,Et,ot=document.createElement("ruby"),xt=document.createElement("span");xt.textContent="​",ot.appendChild(xt);var En,tn=Je.rubyReserve[1].toUsedLength(Je.w,Je.h)+"px";Je.rubyReserve[0]==="both"||Je.rubyReserve[0]==="outside"&&Ve.length==1?((it=document.createElement("rtc")).style[M]=U?"after":"under",it.textContent="​",it.style.fontSize=tn,(Et=document.createElement("rtc")).style[M]=U?"before":"over",Et.textContent="​",Et.style.fontSize=tn,ot.appendChild(it),ot.appendChild(Et)):((it=document.createElement("rtc")).textContent="​",it.style.fontSize=tn,En=Je.rubyReserve[0]==="after"||Je.rubyReserve[0]==="outside"&&Ke>0?U?"after":Je.bpd==="tb"||Je.bpd==="rl"?"under":"over":U?"before":Je.bpd==="tb"||Je.bpd==="rl"?"over":"under",it.style[M]=En,ot.appendChild(it));for(var fn=null,Ht=0;Ht<Ve[Ke].rbc.length;Ht++)if(Ve[Ke].rbc[Ht].localName==="ruby"){fn=Ve[Ke].rbc[Ht];for(var nr=0;nr<fn.style.length;nr++)ot.style.setProperty(fn.style.item(nr),fn.style.getPropertyValue(fn.style.item(nr)));break}(fn=fn||Ve[Ke].elements[0].node).parentElement.insertBefore(ot,fn)}}(K,w),w.rubyReserve=null),(w.ruby||w.rubyReserve)&&(function(Ve,Je){for(var Ke=0;Ke<Ve.length;Ke++)for(var it=0;it<Ve[Ke].rbc.length;it++){var Et;Ve[Ke].rbc[it].style[M]||(Et=U?Ke===0?"before":"after":Je.bpd==="tb"||Je.bpd==="rl"?Ke===0?"over":"under":Ke===0?"under":"over",Ve[Ke].rbc[it].style[M]=Et)}}(K,w),w.ruby=null),w.textEmphasis&&(function(Ve,Je){for(var Ke=0;Ke<Ve.length;Ke++)for(var it=0;it<Ve[Ke].te.length;it++){var Et;Ve[Ke].te[it].style[ie]&&Ve[Ke].te[it].style[ie]!=="none"||(Et=Je.bpd==="tb"?Ke===0?"left over":"left under":Je.bpd==="rl"?Ke===0?"right under":"left under":Ke===0?"left under":"right under",Ve[Ke].te[it].style[ie]=Et)}}(K,w),w.textEmphasis=null),w.mra&&(function(Ve){for(var Je=0;Je<Ve.length-1;Je++){var Ke=Ve[Je].elements.length;if(Ke!==0&&Ve[Je].br===!1){var it=document.createElement("br"),Et=Ve[Je].elements[Ke-1].node;Et.parentElement.insertBefore(it,Et.nextSibling)}}}(K),w.mra=null),w.lp&&(function(Ve,Je,Ke){if(Ve!==null)for(var it=0;it<Ve.length;it++){var Et=Ve[it].elements.length,ot=Math.ceil(Je)+"px",xt="-"+Math.ceil(Je)+"px";if(Et!==0){var En=Ve[it].elements[Ve[it].start_elem],tn=Ve[it].elements[Ve[it].end_elem];if(En===tn){var fn=En.node.getBoundingClientRect();if(fn.width==0||fn.height==0)continue}Ke.ipd==="lr"?(En.node.style.marginLeft=xt,En.node.style.paddingLeft=ot):Ke.ipd==="rl"?(En.node.style.paddingRight=ot,En.node.style.marginRight=xt):Ke.ipd==="tb"&&(En.node.style.paddingTop=ot,En.node.style.marginTop=xt),Ke.ipd==="lr"?(r||(tn.node.style.marginRight=xt),tn.node.style.paddingRight=ot):Ke.ipd==="rl"?(tn.node.style.paddingLeft=ot,r||(tn.node.style.marginLeft=xt)):Ke.ipd==="tb"&&(tn.node.style.paddingBottom=ot,tn.node.style.marginBottom=xt)}}}(K,w.lp.toUsedLength(w.w,w.h),w),w.lp=null),function(Ve,Je){for(var Ke=0;Ke<Ve.length;Ke++)for(var it=Ve[Ke],Et=1;Et<it.elements.length;){var ot=it.elements[Et-1],xt=it.elements[Et];f(ot.node,xt.node,Je)?it.elements.splice(Et,1):Et++}for(var En,tn,fn=[],Ht=0;Ht<Ve.length;Ht++)for(var nr=0;nr<Ve[Ht].elements.length;nr++)(tn=c(En=Ve[Ht].elements[nr].node,fn,!1))&&(En.style.backgroundColor=tn);for(var vr=0;vr<fn.length;vr++)fn[vr].style.backgroundColor=""}(K,w),w.flg)){var Ee=g(Ye.getBoundingClientRect(),w);(function(Ve,Je,Ke,it){for(var Et=Math.sign(Ke-Je),ot=0;ot<=Ve.length;ot++){var xt,En,tn,fn;if(xt=ot===0?Math.round(Je):ot===Ve.length?Math.round(Ke):Math.round((Ve[ot-1].after+Ve[ot].before)/2),ot>0&&Ve[ot-1])for(tn=0;tn<Ve[ot-1].elements.length;tn++)En=Et*(xt-(fn=Ve[ot-1].elements[tn]).after)+"px",it.bpd==="lr"?fn.node.style.paddingRight=En:it.bpd==="rl"?fn.node.style.paddingLeft=En:it.bpd==="tb"&&(fn.node.style.paddingBottom=En);if(ot<Ve.length)for(tn=0;tn<Ve[ot].elements.length;tn++)En=Et*((fn=Ve[ot].elements[tn]).before-xt)+"px",it.bpd==="lr"?fn.node.style.paddingLeft=En:it.bpd==="rl"?fn.node.style.paddingRight=En:it.bpd==="tb"&&(fn.node.style.paddingTop=En)}})(K,Ee.before,Ee.after,w),w.flg=null}if(oe.kind==="region"&&w.bpd==="tb"&&w.enableRollUp&&oe.contents.length>0&&oe.styleAttrs[l.byName.displayAlign.qname]==="after"){p(w,Ye,K,null);var ce=new m(oe.id===""?"_":oe.id,K);if(w.currentISDState[ce.id]=ce,w.previousISDState&&ce.id in w.previousISDState&&w.previousISDState[ce.id].plist.length>0&&ce.plist.length>1&&ce.plist[ce.plist.length-2].text===w.previousISDState[ce.id].plist[w.previousISDState[ce.id].plist.length-1].text){var He=ve.firstElementChild,ut=ce.plist[ce.plist.length-1].after-ce.plist[ce.plist.length-1].before;He.style.bottom="-"+ut+"px",He.style.transition="transform 0.4s",He.style.position="relative",He.style.transform="translateY(-"+ut+"px)"}}}else L(w.errorHandler,"Error processing ISD element kind: "+oe.kind)}function c(w,O,oe){return w.style.backgroundColor?(oe&&!O.includes(w)&&O.push(w),w.style.backgroundColor):w.parentElement.nodeName==="SPAN"||w.parentElement.nodeName==="RUBY"||w.parentElement.nodeName==="RBC"||w.parentElement.nodeName==="RTC"||w.parentElement.nodeName==="RT"?c(w.parentElement,O,!0):void 0}function f(w,O,oe){if(w.tagName==="SPAN"&&O.tagName==="SPAN"&&w._isd_element===O._isd_element){if(!w._isd_element)return L(oe.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;w.textContent+=O.textContent;for(var D=0;D<O.style.length;D++){var ve=O.style[D];(ve.indexOf("border")>=0||ve.indexOf("padding")>=0||ve.indexOf("margin")>=0)&&(w.style[ve]=O.style[ve])}return O.parentElement.removeChild(O),!0}return!1}function m(w,O){this.id=w,this.plist=O}function g(w,O){var oe={before:null,after:null,start:null,end:null};return O.bpd==="tb"?(oe.before=w.top,oe.after=w.bottom,O.ipd==="lr"?(oe.start=w.left,oe.end=w.right):(oe.start=w.right,oe.end=w.left)):O.bpd==="lr"?(oe.before=w.left,oe.after=w.right,oe.start=w.top,oe.end=w.bottom):O.bpd==="rl"&&(oe.before=w.right,oe.after=w.left,oe.start=w.top,oe.end=w.bottom),oe}function p(w,O,oe,D){if(O.localName!=="rt"&&O.localName!=="rtc"){var ve,Le,te,$e,Ue=O.style.backgroundColor||D;if(O.childElementCount===0)if(O.localName==="span"||O.localName==="rb"){var Re=g(O.getBoundingClientRect(),w);if(oe.length!==0&&(ve=Re.before,Le=Re.after,te=oe[oe.length-1].before,Le<($e=oe[oe.length-1].after)&&ve>te||$e<=Le&&te>=ve)){var Xe=Math.sign(Re.after-Re.before),Ye=Math.sign(Re.end-Re.start);Xe*(Re.before-oe[oe.length-1].before)<0&&(oe[oe.length-1].before=Re.before),Xe*(Re.after-oe[oe.length-1].after)>0&&(oe[oe.length-1].after=Re.after),Ye*(Re.start-oe[oe.length-1].start)<0&&(oe[oe.length-1].start=Re.start,oe[oe.length-1].start_elem=oe[oe.length-1].elements.length),Ye*(Re.end-oe[oe.length-1].end)>0&&(oe[oe.length-1].end=Re.end,oe[oe.length-1].end_elem=oe[oe.length-1].elements.length)}else oe.push({before:Re.before,after:Re.after,start:Re.start,end:Re.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});oe[oe.length-1].text+=O.textContent,oe[oe.length-1].elements.push({node:O,bgcolor:Ue,before:Re.before,after:Re.after})}else O.localName==="br"&&oe.length!==0&&(oe[oe.length-1].br=!0);else for(var Ze=O.firstChild;Ze;)Ze.nodeType===Node.ELEMENT_NODE&&(p(w,Ze,oe,Ue),Ze.localName==="ruby"||Ze.localName==="rtc"?oe.length>0&&oe[oe.length-1].rbc.push(Ze):Ze.localName==="span"&&Ze.style[B]&&Ze.style[B]!=="none"&&oe.length>0&&oe[oe.length-1].te.push(Ze)),Ze=Ze.nextSibling}}function y(w,O,oe,D){var ve;D.style!=="none"&&(D.style==="auto"?O.style[B]="filled":O.style[B]=D.style+" "+D.symbol,(D.position==="before"||D.position==="after")&&(ve=w.bpd==="tb"?D.position==="before"?"left over":"left under":w.bpd==="rl"?D.position==="before"?"right under":"left under":D.position==="before"?"left under":"right under",O.style[ie]=ve))}function v(w,O){this.qname=w,this.map=O}i.render=function(w,O,oe,D,ve,Le,te,$e,Ue){var Re=D||O.clientHeight,Xe=ve||O.clientWidth;if(w.aspectRatio!==null){var Ye=Re*w.aspectRatio;Ye>Xe?Re=Math.round(Xe/w.aspectRatio):Xe=Ye}var Ze=document.createElement("div");Ze.style.position="relative",Ze.style.width=Xe+"px",Ze.style.height=Re+"px",Ze.style.margin="auto",Ze.style.top=0,Ze.style.bottom=0,Ze.style.left=0,Ze.style.right=0,Ze.style.zIndex=0;var Ne={h:Re,w:Xe,regionH:null,regionW:null,imgResolver:oe,displayForcedOnlyMode:Le||!1,isd:w,errorHandler:te,previousISDState:$e,enableRollUp:Ue||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(O.appendChild(Ze),"contents"in w)for(var ze=0;ze<w.contents.length;ze++)d(Ne,Ze,w.contents[ze],w);return Ne.currentISDState};for(var A=[new v("http://www.w3.org/ns/ttml#styling backgroundColor",function(w,O,oe,D){D[3]!==0&&(O.style.backgroundColor="rgba("+D[0].toString()+","+D[1].toString()+","+D[2].toString()+","+(D[3]/255).toString()+")")}),new v("http://www.w3.org/ns/ttml#styling color",function(w,O,oe,D){O.style.color="rgba("+D[0].toString()+","+D[1].toString()+","+D[2].toString()+","+(D[3]/255).toString()+")"}),new v("http://www.w3.org/ns/ttml#styling direction",function(w,O,oe,D){O.style.direction=D}),new v("http://www.w3.org/ns/ttml#styling display",function(w,O,oe,D){}),new v("http://www.w3.org/ns/ttml#styling displayAlign",function(w,O,oe,D){O.style.display="flex",O.style.flexDirection="column",D==="before"?O.style.justifyContent="flex-start":D==="center"?O.style.justifyContent="center":D==="after"&&(O.style.justifyContent="flex-end")}),new v("http://www.w3.org/ns/ttml#styling extent",function(w,O,oe,D){w.regionH=D.h.toUsedLength(w.w,w.h),w.regionW=D.w.toUsedLength(w.w,w.h);var ve=0,Le=0,te=oe.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];te&&(ve=te[0].toUsedLength(w.w,w.h)+te[2].toUsedLength(w.w,w.h),Le=te[1].toUsedLength(w.w,w.h)+te[3].toUsedLength(w.w,w.h)),O.style.height=w.regionH-ve+"px",O.style.width=w.regionW-Le+"px"}),new v("http://www.w3.org/ns/ttml#styling fontFamily",function(w,O,oe,D){for(var ve=[],Le=0;Le<D.length;Le++)D[Le]=D[Le].trim(),D[Le]==="monospaceSerif"?(ve.push("Courier New"),ve.push('"Liberation Mono"'),ve.push("Courier"),ve.push("monospace")):D[Le]==="proportionalSansSerif"?(ve.push("Arial"),ve.push("Helvetica"),ve.push('"Liberation Sans"'),ve.push("sans-serif")):D[Le]==="monospace"?ve.push("monospace"):D[Le]==="sansSerif"?ve.push("sans-serif"):D[Le]==="serif"?ve.push("serif"):D[Le]==="monospaceSansSerif"?(ve.push("Consolas"),ve.push("monospace")):D[Le]==="proportionalSerif"?ve.push("serif"):ve.push(D[Le]);if(ve.length>0){for(var te=[ve[0]],$e=1;$e<ve.length;$e++)te.indexOf(ve[$e])==-1&&te.push(ve[$e]);ve=te}O.style.fontFamily=ve.join(",")}),new v("http://www.w3.org/ns/ttml#styling shear",function(w,O,oe,D){if(D!==0){var ve=-.9*D;w.bpd==="tb"?O.style.transform="skewX("+ve+"deg)":O.style.transform="skewY("+ve+"deg)"}}),new v("http://www.w3.org/ns/ttml#styling fontSize",function(w,O,oe,D){O.style.fontSize=D.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling fontStyle",function(w,O,oe,D){O.style.fontStyle=D}),new v("http://www.w3.org/ns/ttml#styling fontWeight",function(w,O,oe,D){O.style.fontWeight=D}),new v("http://www.w3.org/ns/ttml#styling lineHeight",function(w,O,oe,D){O.style.lineHeight=D==="normal"?"normal":D.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling opacity",function(w,O,oe,D){O.style.opacity=D}),new v("http://www.w3.org/ns/ttml#styling origin",function(w,O,oe,D){O.style.top=D.h.toUsedLength(w.w,w.h)+"px",O.style.left=D.w.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling overflow",function(w,O,oe,D){O.style.overflow=D}),new v("http://www.w3.org/ns/ttml#styling padding",function(w,O,oe,D){var ve=[];ve[0]=D[0].toUsedLength(w.w,w.h)+"px",ve[1]=D[3].toUsedLength(w.w,w.h)+"px",ve[2]=D[2].toUsedLength(w.w,w.h)+"px",ve[3]=D[1].toUsedLength(w.w,w.h)+"px",O.style.padding=ve.join(" ")}),new v("http://www.w3.org/ns/ttml#styling position",function(w,O,oe,D){O.style.top=D.h.toUsedLength(w.w,w.h)+"px",O.style.left=D.w.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling rubyAlign",function(w,O,oe,D){O.style.rubyAlign=D==="spaceAround"?"space-around":"center"}),new v("http://www.w3.org/ns/ttml#styling rubyPosition",function(w,O,oe,D){var ve;D!=="before"&&D!=="after"||(ve=U?D:w.bpd==="tb"||w.bpd==="rl"?D==="before"?"over":"under":D==="before"?"under":"over",O.parentElement.style[M]=ve)}),new v("http://www.w3.org/ns/ttml#styling showBackground",null),new v("http://www.w3.org/ns/ttml#styling textAlign",function(w,O,oe,D){var ve;ve=D==="start"?w.ipd==="rl"?"right":"left":D==="end"?w.ipd==="rl"?"left":"right":D,O.style.textAlign=ve}),new v("http://www.w3.org/ns/ttml#styling textDecoration",function(w,O,oe,D){O.style.textDecoration=D.join(" ").replace("lineThrough","line-through")}),new v("http://www.w3.org/ns/ttml#styling textOutline",function(w,O,oe,D){}),new v("http://www.w3.org/ns/ttml#styling textShadow",function(w,O,oe,D){var ve=oe.styleAttrs[l.byName.textOutline.qname];if(D==="none"&&ve==="none")O.style.textShadow="";else{var Le=[];if(ve!=="none"){var te="rgba("+ve.color[0].toString()+","+ve.color[1].toString()+","+ve.color[2].toString()+","+(ve.color[3]/255).toString()+")";Le.push("1px 1px 1px "+te),Le.push("-1px 1px 1px "+te),Le.push("1px -1px 1px "+te),Le.push("-1px -1px 1px "+te)}if(D!=="none")for(var $e=0;$e<D.length;$e++)Le.push(D[$e].x_off.toUsedLength(w.w,w.h)+"px "+D[$e].y_off.toUsedLength(w.w,w.h)+"px "+D[$e].b_radius.toUsedLength(w.w,w.h)+"px rgba("+D[$e].color[0].toString()+","+D[$e].color[1].toString()+","+D[$e].color[2].toString()+","+(D[$e].color[3]/255).toString()+")");O.style.textShadow=Le.join(",")}}),new v("http://www.w3.org/ns/ttml#styling textCombine",function(w,O,oe,D){O.style.textCombineUpright=D}),new v("http://www.w3.org/ns/ttml#styling textEmphasis",function(w,O,oe,D){}),new v("http://www.w3.org/ns/ttml#styling unicodeBidi",function(w,O,oe,D){var ve;ve=D==="bidiOverride"?"bidi-override":D,O.style.unicodeBidi=ve}),new v("http://www.w3.org/ns/ttml#styling visibility",function(w,O,oe,D){O.style.visibility=D}),new v("http://www.w3.org/ns/ttml#styling wrapOption",function(w,O,oe,D){D==="wrap"?oe.space==="preserve"?O.style.whiteSpace="pre-wrap":O.style.whiteSpace="normal":oe.space==="preserve"?O.style.whiteSpace="pre":O.style.whiteSpace="noWrap"}),new v("http://www.w3.org/ns/ttml#styling writingMode",function(w,O,oe,D){D==="lrtb"||D==="lr"||D==="rltb"||D==="rl"?O.style.writingMode="horizontal-tb":D==="tblr"?O.style.writingMode="vertical-lr":D!=="tbrl"&&D!=="tb"||(O.style.writingMode="vertical-rl")}),new v("http://www.w3.org/ns/ttml#styling zIndex",function(w,O,oe,D){O.style.zIndex=D}),new v("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(w,O,oe,D){w.displayForcedOnlyMode&&D===!1&&(O.style.visibility="hidden")})],I={},P=0;P<A.length;P++)I[A[P].qname]=A[P];var U="webkitRubyPosition"in window.getComputedStyle(document.documentElement),M=U?"webkitRubyPosition":"rubyPosition",B="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",ie="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function L(w,O){if(w&&w.error&&w.error(O))throw O}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},8905:function(n,e,t){(function(r,i,o,l){r.generateISD=function(v,A,I){var P,U=new g(v),M={},B={},ie=v.head.styling.initials[o.byName.showBackground.qname],L=v.head.styling.initials[o.byName.backgroundColor.qname];for(var w in v.head.layout.regions)if(v.head.layout.regions.hasOwnProperty(w)){var O=v.head.layout.regions[w],oe=O.styleAttrs[o.byName.showBackground.qname]||ie,D=O.styleAttrs[o.byName.backgroundColor.qname]||L;B[O.id]=(oe==="always"||oe===void 0)&&D!==void 0&&!(A<O.begin||A>=O.end)}for(var ve in v.body&&v.body.regionID&&(B[v.body.regionID]=!0),P=v.body!==null?function te($e,Ue){if(Ue.contents){var Re={};for(var Xe in Ue)Ue.hasOwnProperty(Xe)&&(Re[Xe]=Ue[Xe]);return Re.contents=[],Ue.contents.filter(function(Ye){return!($e<Ye.begin||$e>=Ye.end)}).forEach(function(Ye){var Ze=te($e,Ye);Ze.regionID&&(B[Ze.regionID]=!0),Ze!==null&&Re.contents.push(Ze)}),Re}return Ue}(A,v.body):null,B[""]!==void 0&&(B[""]=!0),B)if(B[ve]){var Le=c(v,A,v.head.layout.regions[ve],P,null,"",v.head.layout.regions[ve],I,M);Le!==null&&U.contents.push(Le.element)}return U};var d=[o.byName.color.qname,o.byName.textCombine.qname,o.byName.textDecoration.qname,o.byName.textEmphasis.qname,o.byName.textOutline.qname,o.byName.textShadow.qname];function c(v,A,I,P,U,M,B,ie,L){if(A<B.begin||A>=B.end)return null;var w="regionID"in B&&B.regionID!==""?B.regionID:M;if(U!==null&&w!==I.id&&(!("contents"in B)||"contents"in B&&B.contents.length===0||w!==""))return null;var O=new p(B);if("sets"in B)for(var oe=0;oe<B.sets.length;oe++)A<B.sets[oe].begin||A>=B.sets[oe].end||(O.styleAttrs[B.sets[oe].qname]=B.sets[oe].value);var D={};for(var ve in O.styleAttrs)if(O.styleAttrs.hasOwnProperty(ve)&&(D[ve]=!0,O.kind==="region"&&ve===o.byName.writingMode.qname&&!(o.byName.direction.qname in O.styleAttrs))){var Le=O.styleAttrs[ve];Le==="lrtb"||Le==="lr"?O.styleAttrs[o.byName.direction.qname]="ltr":Le!=="rltb"&&Le!=="rl"||(O.styleAttrs[o.byName.direction.qname]="rtl")}if(U!==null)for(var te=0;te<o.all.length;te++){var $e=o.all[te];if($e.qname===o.byName.textDecoration.qname){var Ue=U.styleAttrs[$e.qname],Re=O.styleAttrs[$e.qname],Xe=[];Re===void 0?Xe=Ue:Re.indexOf("none")===-1?((Re.indexOf("noUnderline")===-1&&Ue.indexOf("underline")!==-1||Re.indexOf("underline")!==-1)&&Xe.push("underline"),(Re.indexOf("noLineThrough")===-1&&Ue.indexOf("lineThrough")!==-1||Re.indexOf("lineThrough")!==-1)&&Xe.push("lineThrough"),(Re.indexOf("noOverline")===-1&&Ue.indexOf("overline")!==-1||Re.indexOf("overline")!==-1)&&Xe.push("overline")):Xe.push("none"),O.styleAttrs[$e.qname]=Xe}else if($e.qname!==o.byName.fontSize.qname||$e.qname in O.styleAttrs||O.kind!=="span"||O.styleAttrs[o.byName.ruby.qname]!=="textContainer")if($e.qname!==o.byName.fontSize.qname||$e.qname in O.styleAttrs||O.kind!=="span"||O.styleAttrs[o.byName.ruby.qname]!=="text")$e.inherit&&$e.qname in U.styleAttrs&&!($e.qname in O.styleAttrs)&&(O.styleAttrs[$e.qname]=U.styleAttrs[$e.qname]);else{var Ye=U.styleAttrs[o.byName.fontSize.qname];U.styleAttrs[o.byName.ruby.qname]==="textContainer"?O.styleAttrs[$e.qname]=Ye:O.styleAttrs[$e.qname]=new l.ComputedLength(.5*Ye.rw,.5*Ye.rh)}else{var Ze=U.styleAttrs[o.byName.fontSize.qname];O.styleAttrs[$e.qname]=new l.ComputedLength(.5*Ze.rw,.5*Ze.rh)}}for(var Ne=0;Ne<o.all.length;Ne++){var ze=o.all[Ne];if(!(ze.qname in O.styleAttrs)&&!(ze.qname===o.byName.position.qname&&o.byName.origin.qname in O.styleAttrs||ze.qname===o.byName.origin.qname&&o.byName.position.qname in O.styleAttrs)){var st=v.head.styling.initials[ze.qname]||ze.initial;if(st!==null&&(O.kind==="region"||ze.inherit===!1&&st!==null)){var Rt=ze.parse(st);Rt!==null?(O.styleAttrs[ze.qname]=Rt,D[ze.qname]=!0):y(ie,"Invalid initial value for '"+ze.qname+"' on element '"+O.kind)}}}for(var jt=0;jt<o.all.length;jt++){var Pe=o.all[jt];if(Pe.qname in D&&Pe.compute!==null){var Oe=Pe.compute(v,U,O,O.styleAttrs[Pe.qname],L);Oe!==null?O.styleAttrs[Pe.qname]=Oe:(O.styleAttrs[Pe.qname]=Pe.compute(v,U,O,Pe.parse(Pe.initial),L),y(ie,"Style '"+Pe.qname+"' on element '"+O.kind+"' cannot be computed"))}}if(O.styleAttrs[o.byName.display.qname]==="none")return null;var gt=null;U===null?gt=P===null?[]:[P]:"contents"in B&&(gt=B.contents);for(var Q=0;gt!==null&&Q<gt.length;Q++){var J=c(v,A,I,P,O,w,gt[Q],ie,L);J!==null&&O.contents.push(J.element)}for(var F in O.styleAttrs)if(O.styleAttrs.hasOwnProperty(F)){var K=!1;if(O.kind==="span"){var Ee=O.styleAttrs[o.byName.ruby.qname];(K=(Ee==="container"||Ee==="textContainer"||Ee==="baseContainer")&&d.indexOf(F)!==-1)||(K=Ee!=="container"&&F===o.byName.rubyAlign.qname),K||(K=!(Ee==="textContainer"||Ee==="text")&&F===o.byName.rubyPosition.qname)}if(!K){var ce=o.byQName[F];"applies"in ce&&(K=ce.applies.indexOf(O.kind)===-1)}K&&delete O.styleAttrs[F]}var He=O.styleAttrs[o.byName.ruby.qname];if(O.kind==="p"||O.kind==="span"&&(He==="textContainer"||He==="text")){var ut=[];f(O,ut),function(Ve){for(var Je,Ke=0;Ke<Ve.length;)if((Je=Ve[Ke]).kind!=="br"&&Je.space!=="preserve"){var it=Je.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(it)&&(Ke===0||(Et=Ve[Ke-1]).kind==="br"||/[\r\n\t ]$/.test(Et.text))&&(it=it.substring(1)),Je.text=it,it.length===0?Ve.splice(Ke,1):Ke++}else Ke++;var Et,ot;for(Ke=0;Ke<Ve.length;Ke++)(Je=Ve[Ke]).kind!=="br"&&Je.space!=="preserve"?/[ ]$/.test(Je.text)&&(Ke===Ve.length-1||(ot=Ve[Ke+1]).kind==="br"||ot.space==="preserve"&&/^[\r\n]/.test(ot.text))&&(Je.text=Je.text.slice(0,-1)):Ke++}(ut),m(O)}return O.kind==="div"&&o.byName.backgroundImage.qname in O.styleAttrs||O.kind==="br"||O.kind==="image"||"contents"in O&&O.contents.length>0||O.kind==="span"&&O.text!==null||O.kind==="region"&&O.styleAttrs[o.byName.showBackground.qname]==="always"?{region_id:w,element:O}:null}function f(v,A){if("contents"in v)for(var I=0;I<v.contents.length;I++){var P=v.contents[I],U=P.styleAttrs[o.byName.ruby.qname];(P.kind!=="span"||U!=="textContainer"&&U!=="text")&&("contents"in P?f(P,A):(P.kind==="span"&&P.text.length!==0||P.kind==="br")&&A.push(P))}}function m(v){if(v.kind==="br")return!1;if("text"in v)return v.text.length===0;if("contents"in v){for(var A=v.contents.length;A--;)m(v.contents[A])&&v.contents.splice(A,1);return v.contents.length===0}}function g(v){this.contents=[],this.aspectRatio=v.aspectRatio,this.lang=v.lang}function p(v){for(var A in this.kind=v.kind||"region",this.lang=v.lang,v.id&&(this.id=v.id),this.styleAttrs={},v.styleAttrs)v.styleAttrs.hasOwnProperty(A)&&(this.styleAttrs[A]=v.styleAttrs[A]);"src"in v&&(this.src=v.src),"type"in v&&(this.type=v.type),"text"in v?this.text=v.text:(this.kind==="region"||"contents"in v)&&(this.contents=[]),"space"in v&&(this.space=v.space)}function y(v,A){if(v&&v.error&&v.error(A))throw A}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},7640:function(n,e,t){e.generateISD=t(8905).generateISD,e.fromXML=t(6739).fromXML,e.renderHTML=t(1612).render},977:function(n,e){(function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"})(e)},1219:function(n,e,t){(function(r,i,o){function l(f,m,g,p,y,v,A,I){this.name=m,this.ns=f,this.qname=f+" "+m,this.inherit=y,this.animatable=v,this.initial=g,this.applies=p,this.parse=A,this.compute=I}for(var d in r.all=[new l(i.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,o.parseColor,null),new l(i.ns_tts,"color","white",["span"],!0,!0,o.parseColor,null),new l(i.ns_tts,"direction","ltr",["p","span"],!0,!0,function(f){return f},null),new l(i.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(f){return f},null),new l(i.ns_tts,"displayAlign","before",["region"],!1,!0,function(f){return f},null),new l(i.ns_tts,"extent","auto",["tt","region"],!1,!0,function(f){if(f==="auto")return f;var m=f.split(" ");if(m.length!==2)return null;var g=o.parseLength(m[0]),p=o.parseLength(m[1]);return p&&g?{h:p,w:g}:null},function(f,m,g,p,y){var v,A;if(p==="auto")v=new o.ComputedLength(0,1);else if((v=o.toComputedLength(p.h.value,p.h.unit,null,f.dimensions.h,null,f.pxLength.h))===null)return null;if(p==="auto")A=new o.ComputedLength(1,0);else if((A=o.toComputedLength(p.w.value,p.w.unit,null,f.dimensions.w,null,f.pxLength.w))===null)return null;return{h:v,w:A}}),new l(i.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(f){for(var m=f.split(","),g=[],p=0;p<m.length;p++)m[p]=m[p].trim(),m[p].charAt(0)!=="'"&&m[p].charAt(0)!=='"'&&m[p]==="default"?g.push("monospaceSerif"):g.push(m[p]);return g},null),new l(i.ns_tts,"shear","0%",["p"],!0,!0,o.parseLength,function(f,m,g,p){return p.unit!=="%"?null:Math.abs(p.value)>100?100*Math.sign(p.value):p.value}),new l(i.ns_tts,"fontSize","1c",["span","p"],!0,!0,o.parseLength,function(f,m,g,p,y){return o.toComputedLength(p.value,p.unit,m!==null?m.styleAttrs[r.byName.fontSize.qname]:f.cellLength.h,m!==null?m.styleAttrs[r.byName.fontSize.qname]:f.cellLength.h,f.cellLength.h,f.pxLength.h)}),new l(i.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(f){return f},null),new l(i.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(f){return f},null),new l(i.ns_tts,"lineHeight","normal",["p"],!0,!0,function(f){return f==="normal"?f:o.parseLength(f)},function(f,m,g,p,y){var v;if(p==="normal")v=p;else if((v=o.toComputedLength(p.value,p.unit,g.styleAttrs[r.byName.fontSize.qname],g.styleAttrs[r.byName.fontSize.qname],f.cellLength.h,f.pxLength.h))===null)return null;return v}),new l(i.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(i.ns_tts,"origin","auto",["region"],!1,!0,function(f){if(f==="auto")return f;var m=f.split(" ");if(m.length!==2)return null;var g=o.parseLength(m[0]),p=o.parseLength(m[1]);return p&&g?{h:p,w:g}:null},function(f,m,g,p,y){var v,A;if(p==="auto")v=new o.ComputedLength(0,0);else if((v=o.toComputedLength(p.h.value,p.h.unit,null,f.dimensions.h,null,f.pxLength.h))===null)return null;if(p==="auto")A=new o.ComputedLength(0,0);else if((A=o.toComputedLength(p.w.value,p.w.unit,null,f.dimensions.w,null,f.pxLength.w))===null)return null;return{h:v,w:A}}),new l(i.ns_tts,"overflow","hidden",["region"],!1,!0,function(f){return f},null),new l(i.ns_tts,"padding","0px",["region"],!1,!0,function(f){var m=f.split(" ");if(m.length>4)return null;for(var g=[],p=0;p<m.length;p++){var y=o.parseLength(m[p]);if(!y)return null;g.push(y)}return g},function(f,m,g,p,y){var v;if(p.length===1)v=[p[0],p[0],p[0],p[0]];else if(p.length===2)v=[p[0],p[1],p[0],p[1]];else if(p.length===3)v=[p[0],p[1],p[2],p[1]];else{if(p.length!==4)return null;v=[p[0],p[1],p[2],p[3]]}var A=g.styleAttrs[r.byName.writingMode.qname];if(A==="lrtb"||A==="lr")v=[v[0],v[3],v[2],v[1]];else if(A==="rltb"||A==="rl")v=[v[0],v[1],v[2],v[3]];else if(A==="tblr")v=[v[3],v[0],v[1],v[2]];else{if(A!=="tbrl"&&A!=="tb")return null;v=[v[3],v[2],v[1],v[0]]}for(var I=[],P=0;P<v.length;P++)if(v[P].value===0)I[P]=new o.ComputedLength(0,0);else if(I[P]=o.toComputedLength(v[P].value,v[P].unit,g.styleAttrs[r.byName.fontSize.qname],P===0||P===2?g.styleAttrs[r.byName.extent.qname].h:g.styleAttrs[r.byName.extent.qname].w,P===0||P===2?f.cellLength.h:f.cellLength.w,P===0||P===2?f.pxLength.h:f.pxLength.w),I[P]===null)return null;return I}),new l(i.ns_tts,"position","top left",["region"],!1,!0,function(f){return o.parsePosition(f)},function(f,m,g,p){var y,v;return(y=o.toComputedLength(p.v.offset.value,p.v.offset.unit,null,new o.ComputedLength(-g.styleAttrs[r.byName.extent.qname].h.rw,f.dimensions.h.rh-g.styleAttrs[r.byName.extent.qname].h.rh),null,f.pxLength.h))===null?null:(p.v.edge==="bottom"&&(y=new o.ComputedLength(-y.rw-g.styleAttrs[r.byName.extent.qname].h.rw,f.dimensions.h.rh-y.rh-g.styleAttrs[r.byName.extent.qname].h.rh)),v=o.toComputedLength(p.h.offset.value,p.h.offset.unit,null,new o.ComputedLength(f.dimensions.w.rw-g.styleAttrs[r.byName.extent.qname].w.rw,-g.styleAttrs[r.byName.extent.qname].w.rh),null,f.pxLength.w),y===null?null:(p.h.edge==="right"&&(v=new o.ComputedLength(f.dimensions.w.rw-v.rw-g.styleAttrs[r.byName.extent.qname].w.rw,-v.rh-g.styleAttrs[r.byName.extent.qname].w.rh)),{h:y,w:v}))}),new l(i.ns_tts,"ruby","none",["span"],!1,!0,function(f){return f},null),new l(i.ns_tts,"rubyAlign","center",["span"],!0,!0,function(f){return f!=="center"&&f!=="spaceAround"?null:f},null),new l(i.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(f){return f},null),new l(i.ns_tts,"rubyReserve","none",["p"],!0,!0,function(f){var m=f.split(" "),g=[null,null];if(m.length===0||m.length>2||m[0]!=="none"&&m[0]!=="both"&&m[0]!=="after"&&m[0]!=="before"&&m[0]!=="outside")return null;if(g[0]=m[0],m.length===2&&m[0]!=="none"){var p=o.parseLength(m[1]);if(!p)return null;g[1]=p}return g},function(f,m,g,p,y){if(p[0]==="none")return p;var v;return(v=p[1]===null?new o.ComputedLength(.5*g.styleAttrs[r.byName.fontSize.qname].rw,.5*g.styleAttrs[r.byName.fontSize.qname].rh):o.toComputedLength(p[1].value,p[1].unit,g.styleAttrs[r.byName.fontSize.qname],g.styleAttrs[r.byName.fontSize.qname],f.cellLength.h,f.pxLength.h))===null?null:[p[0],v]}),new l(i.ns_tts,"showBackground","always",["region"],!1,!0,function(f){return f},null),new l(i.ns_tts,"textAlign","start",["p"],!0,!0,function(f){return f},function(f,m,g,p,y){return p==="left"?"start":p==="right"?"end":p}),new l(i.ns_tts,"textCombine","none",["span"],!0,!0,function(f){return f==="none"||f==="all"?f:null},null),new l(i.ns_tts,"textDecoration","none",["span"],!0,!0,function(f){return f.split(" ")},null),new l(i.ns_tts,"textEmphasis","none",["span"],!0,!0,function(f){for(var m=f.split(" "),g={style:null,symbol:null,color:null,position:null},p=0;p<m.length;p++)if(m[p]==="none"||m[p]==="auto")g.style=m[p];else if(m[p]==="filled"||m[p]==="open")g.style=m[p];else if(m[p]==="circle"||m[p]==="dot"||m[p]==="sesame")g.symbol=m[p];else if(m[p]==="current")g.color=m[p];else if(m[p]==="outside"||m[p]==="before"||m[p]==="after")g.position=m[p];else if(g.color=o.parseColor(m[p]),g.color===null)return null;return g.style==null&&g.symbol==null?g.style="auto":(g.symbol=g.symbol||"circle",g.style=g.style||"filled"),g.position=g.position||"outside",g.color=g.color||"current",g},null),new l(i.ns_tts,"textOutline","none",["span"],!0,!0,function(f){if(f==="none")return f;var m={},g=f.split(" ");if(g.length===0||g.length>2)return null;var p=o.parseColor(g[0]);if(m.color=p,p!==null&&g.shift(),g.length!==1)return null;var y=o.parseLength(g[0]);return y?(m.thickness=y,m):null},function(f,m,g,p,y){if(p==="none")return p;var v={};return p.color===null?v.color=g.styleAttrs[r.byName.color.qname]:v.color=p.color,v.thickness=o.toComputedLength(p.thickness.value,p.thickness.unit,g.styleAttrs[r.byName.fontSize.qname],g.styleAttrs[r.byName.fontSize.qname],f.cellLength.h,f.pxLength.h),v.thickness===null?null:v}),new l(i.ns_tts,"textShadow","none",["span"],!0,!0,o.parseTextShadow,function(f,m,g,p){if(p==="none")return p;for(var y=[],v=0;v<p.length;v++){var A={};if(A.x_off=o.toComputedLength(p[v][0].value,p[v][0].unit,null,g.styleAttrs[r.byName.fontSize.qname],null,f.pxLength.w),A.x_off===null||(A.y_off=o.toComputedLength(p[v][1].value,p[v][1].unit,null,g.styleAttrs[r.byName.fontSize.qname],null,f.pxLength.h),A.y_off===null))return null;if(p[v][2]===null)A.b_radius=0;else if(A.b_radius=o.toComputedLength(p[v][2].value,p[v][2].unit,null,g.styleAttrs[r.byName.fontSize.qname],null,f.pxLength.h),A.b_radius===null)return null;p[v][3]===null?A.color=g.styleAttrs[r.byName.color.qname]:A.color=p[v][3],y.push(A)}return y}),new l(i.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(f){return f},null),new l(i.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(f){return f},null),new l(i.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(f){return f},null),new l(i.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(f){return f},null),new l(i.ns_tts,"zIndex","auto",["region"],!1,!0,function(f){var m;return f==="auto"?m=f:(m=parseInt(f),isNaN(m)&&(m=null)),m},null),new l(i.ns_ebutts,"linePadding","0c",["p"],!0,!1,o.parseLength,function(f,m,g,p,y){return o.toComputedLength(p.value,p.unit,null,null,f.cellLength.w,null)}),new l(i.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(f){return f},null),new l(i.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(f){return f},null),new l(i.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(f){return f==="true"},null),new l(i.ns_itts,"fillLineGap","false",["p"],!0,!0,function(f){return f==="true"},null)],r.byQName={},r.all)r.byQName[r.all[d].qname]=r.all[d];for(var c in r.byName={},r.all)r.byName[r.all[c].name]=r.all[c]})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscUtils>"u"?t(6404):imscUtils)},6404:function(n,e){(function(t){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(c){var f,m=null,g=l[c.toLowerCase()];return g!==void 0?m=g:(f=r.exec(c))!==null?m=[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16),f[4]!==void 0?parseInt(f[4],16):255]:(f=i.exec(c))!==null?m=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),255]:(f=o.exec(c))!==null&&(m=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])]),m};var d=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(c){var f,m=null;return(f=d.exec(c))!==null&&(m={value:parseFloat(f[1]),unit:f[2]}),m},t.parseTextShadow=function(c){for(var f=c.match(/([^\(,\)]|\([^\)]+\))+/g),m=[],g=0;g<f.length;g++){var p=f[g].split(" ");if(p.length===1&&p[0]==="none")return"none";if(p.length>1&&p.length<5){var y=[null,null,null,null],v=t.parseLength(p.shift());if(v===null||(y[0]=v,(v=t.parseLength(p.shift()))===null))return null;if(y[1]=v,p.length===0){m.push(y);continue}if((v=t.parseLength(p[0]))!==null&&(y[2]=v,p.shift()),p.length===0){m.push(y);continue}var A=t.parseColor(p[0]);if(A===null)return null;y[3]=A,m.push(y)}}return m},t.parsePosition=function(c){var f=c.split(" "),m=function(P){return P==="center"||P==="left"||P==="top"||P==="bottom"||P==="right"};if(f.length>4)return null;for(var g=0;g<f.length;g++)if(!m(f[g])){var p=t.parseLength(f[g]);if(p===null)return null;f[g]=p}for(var y={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},v=0;v<f.length;){var A=f[v++];if(m(A)){var I={value:0,unit:"%"};f.length!==2&&v<f.length&&!m(f[v])&&(I=f[v++]),A==="right"?(y.h.edge=A,y.h.offset=I):A==="bottom"?(y.v.edge=A,y.v.offset=I):A==="left"?y.h.offset=I:A==="top"&&(y.v.offset=I)}else{if(f.length!==1&&f.length!==2)return null;v===1?y.h.offset=A:y.v.offset=A}}return y},t.ComputedLength=function(c,f){this.rw=c,this.rh=f},t.ComputedLength.prototype.toUsedLength=function(c,f){return c*this.rw+f*this.rh},t.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},t.toComputedLength=function(c,f,m,g,p,y){return f==="%"&&g?new t.ComputedLength(g.rw*c/100,g.rh*c/100):f==="em"&&m?new t.ComputedLength(m.rw*c,m.rh*c):f==="c"&&p?new t.ComputedLength(c*p.rw,c*p.rh):f==="px"&&y?new t.ComputedLength(c*y.rw,c*y.rh):f==="rh"?new t.ComputedLength(0,c/100):f==="rw"?new t.ComputedLength(c/100,0):null}})(e)},7523:function(n){typeof Object.create=="function"?n.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3282:function(n){function e(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function t(i,o){for(var l,d="",c=0,f=-1,m=0,g=0;g<=i.length;++g){if(g<i.length)l=i.charCodeAt(g);else{if(l===47)break;l=47}if(l===47){if(!(f===g-1||m===1))if(f!==g-1&&m===2){if(d.length<2||c!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var p=d.lastIndexOf("/");if(p!==d.length-1){p===-1?(d="",c=0):c=(d=d.slice(0,p)).length-1-d.lastIndexOf("/"),f=g,m=0;continue}}else if(d.length===2||d.length===1){d="",c=0,f=g,m=0;continue}}o&&(d.length>0?d+="/..":d="..",c=2)}else d.length>0?d+="/"+i.slice(f+1,g):d=i.slice(f+1,g),c=g-f-1;f=g,m=0}else l===46&&m!==-1?++m:m=-1}return d}var r={resolve:function(){for(var i,o="",l=!1,d=arguments.length-1;d>=-1&&!l;d--){var c;d>=0?c=arguments[d]:(i===void 0&&(i=process.cwd()),c=i),e(c),c.length!==0&&(o=c+"/"+o,l=c.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,l=i.charCodeAt(i.length-1)===47;return(i=t(i,!o)).length!==0||o||(i="."),i.length>0&&l&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var l=arguments[o];e(l),l.length>0&&(i===void 0?i=l:i+="/"+l)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i))===(o=r.resolve(o)))return"";for(var l=1;l<i.length&&i.charCodeAt(l)===47;++l);for(var d=i.length,c=d-l,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var m=o.length-f,g=c<m?c:m,p=-1,y=0;y<=g;++y){if(y===g){if(m>g){if(o.charCodeAt(f+y)===47)return o.slice(f+y+1);if(y===0)return o.slice(f+y)}else c>g&&(i.charCodeAt(l+y)===47?p=y:y===0&&(p=0));break}var v=i.charCodeAt(l+y);if(v!==o.charCodeAt(f+y))break;v===47&&(p=y)}var A="";for(y=l+p+1;y<=d;++y)y!==d&&i.charCodeAt(y)!==47||(A.length===0?A+="..":A+="/..");return A.length>0?A+o.slice(f+p):(f+=p,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),l=o===47,d=-1,c=!0,f=i.length-1;f>=1;--f)if((o=i.charCodeAt(f))===47){if(!c){d=f;break}}else c=!1;return d===-1?l?"/":".":l&&d===1?"//":i.slice(0,d)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var l,d=0,c=-1,f=!0;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var m=o.length-1,g=-1;for(l=i.length-1;l>=0;--l){var p=i.charCodeAt(l);if(p===47){if(!f){d=l+1;break}}else g===-1&&(f=!1,g=l+1),m>=0&&(p===o.charCodeAt(m)?--m==-1&&(c=l):(m=-1,c=g))}return d===c?c=g:c===-1&&(c=i.length),i.slice(d,c)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!f){d=l+1;break}}else c===-1&&(f=!1,c=l+1);return c===-1?"":i.slice(d,c)},extname:function(i){e(i);for(var o=-1,l=0,d=-1,c=!0,f=0,m=i.length-1;m>=0;--m){var g=i.charCodeAt(m);if(g!==47)d===-1&&(c=!1,d=m+1),g===46?o===-1?o=m:f!==1&&(f=1):o!==-1&&(f=-1);else if(!c){l=m+1;break}}return o===-1||d===-1||f===0||f===1&&o===d-1&&o===l+1?"":i.slice(o,d)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return function(o,l){var d=l.dir||l.root,c=l.base||(l.name||"")+(l.ext||"");return d?d===l.root?d+c:d+"/"+c:c}(0,i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var l,d=i.charCodeAt(0),c=d===47;c?(o.root="/",l=1):l=0;for(var f=-1,m=0,g=-1,p=!0,y=i.length-1,v=0;y>=l;--y)if((d=i.charCodeAt(y))!==47)g===-1&&(p=!1,g=y+1),d===46?f===-1?f=y:v!==1&&(v=1):f!==-1&&(v=-1);else if(!p){m=y+1;break}return f===-1||g===-1||v===0||v===1&&f===g-1&&f===m+1?g!==-1&&(o.base=o.name=m===0&&c?i.slice(1,g):i.slice(m,g)):(m===0&&c?(o.name=i.slice(1,f),o.base=i.slice(1,g)):(o.name=i.slice(m,f),o.base=i.slice(m,g)),o.ext=i.slice(f,g)),m>0?o.dir=i.slice(0,m-1):c&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,n.exports=r},3515:function(n,e,t){n.exports=i;var r=t(9826).EventEmitter;function i(){r.call(this)}t(7523)(i,r),i.Readable=t(2762),i.Writable=t(3726),i.Duplex=t(884),i.Transform=t(6756),i.PassThrough=t(1390),i.finished=t(2896),i.pipeline=t(8460),i.Stream=i,i.prototype.pipe=function(o,l){var d=this;function c(A){o.writable&&o.write(A)===!1&&d.pause&&d.pause()}function f(){d.readable&&d.resume&&d.resume()}d.on("data",c),o.on("drain",f),o._isStdio||l&&l.end===!1||(d.on("end",g),d.on("close",p));var m=!1;function g(){m||(m=!0,o.end())}function p(){m||(m=!0,typeof o.destroy=="function"&&o.destroy())}function y(A){if(v(),r.listenerCount(this,"error")===0)throw A}function v(){d.removeListener("data",c),o.removeListener("drain",f),d.removeListener("end",g),d.removeListener("close",p),d.removeListener("error",y),o.removeListener("error",y),d.removeListener("end",v),d.removeListener("close",v),o.removeListener("close",v)}return d.on("error",y),o.on("error",y),d.on("end",v),d.on("close",v),o.on("close",v),o.emit("pipe",d),o}},1602:function(n){var e={};function t(i,o,l){l||(l=Error);var d=function(c){var f,m;function g(p,y,v){return c.call(this,function(A,I,P){return typeof o=="string"?o:o(A,I,P)}(p,y,v))||this}return m=c,(f=g).prototype=Object.create(m.prototype),f.prototype.constructor=f,f.__proto__=m,g}(l);d.prototype.name=l.name,d.prototype.code=i,e[i]=d}function r(i,o){if(Array.isArray(i)){var l=i.length;return i=i.map(function(d){return String(d)}),l>2?"one of ".concat(o," ").concat(i.slice(0,l-1).join(", "),", or ")+i[l-1]:l===2?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}return"of ".concat(o," ").concat(String(i))}t("ERR_INVALID_OPT_VALUE",function(i,o){return'The value "'+o+'" is invalid for option "'+i+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(i,o,l){var d,c,f,m,g;if(typeof o=="string"&&(c="not ",o.substr(0,4)===c)?(d="must not be",o=o.replace(/^not /,"")):d="must be",function(y,v,A){return(A===void 0||A>y.length)&&(A=y.length),y.substring(A-9,A)===v}(i," argument"))f="The ".concat(i," ").concat(d," ").concat(r(o,"type"));else{var p=(typeof g!="number"&&(g=0),g+1>(m=i).length||m.indexOf(".",g)===-1?"argument":"property");f='The "'.concat(i,'" ').concat(p," ").concat(d," ").concat(r(o,"type"))}return f+". Received type ".concat(typeof l)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=e},884:function(n,e,t){var r=Object.keys||function(p){var y=[];for(var v in p)y.push(v);return y};n.exports=f;var i=t(2762),o=t(3726);t(7523)(f,i);for(var l=r(o.prototype),d=0;d<l.length;d++){var c=l[d];f.prototype[c]||(f.prototype[c]=o.prototype[c])}function f(p){if(!(this instanceof f))return new f(p);i.call(this,p),o.call(this,p),this.allowHalfOpen=!0,p&&(p.readable===!1&&(this.readable=!1),p.writable===!1&&(this.writable=!1),p.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||process.nextTick(g,this)}function g(p){p.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}})},1390:function(n,e,t){n.exports=i;var r=t(6756);function i(o){if(!(this instanceof i))return new i(o);r.call(this,o)}t(7523)(i,r),i.prototype._transform=function(o,l,d){d(null,o)}},2762:function(n,e,t){var r;n.exports=O,O.ReadableState=w,t(9826).EventEmitter;var i,o=function(Pe,Oe){return Pe.listeners(Oe).length},l=t(2611),d=t(44).Buffer,c=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},f=t(7199);i=f&&f.debuglog?f.debuglog("stream"):function(){};var m,g,p,y=t(3791),v=t(2410),A=t(1749).getHighWaterMark,I=t(1602).codes,P=I.ERR_INVALID_ARG_TYPE,U=I.ERR_STREAM_PUSH_AFTER_EOF,M=I.ERR_METHOD_NOT_IMPLEMENTED,B=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(7523)(O,l);var ie=v.errorOrDestroy,L=["error","close","destroy","pause","resume"];function w(Pe,Oe,gt){r=r||t(884),Pe=Pe||{},typeof gt!="boolean"&&(gt=Oe instanceof r),this.objectMode=!!Pe.objectMode,gt&&(this.objectMode=this.objectMode||!!Pe.readableObjectMode),this.highWaterMark=A(this,Pe,"readableHighWaterMark",gt),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Pe.emitClose!==!1,this.autoDestroy=!!Pe.autoDestroy,this.destroyed=!1,this.defaultEncoding=Pe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pe.encoding&&(m||(m=t(748).StringDecoder),this.decoder=new m(Pe.encoding),this.encoding=Pe.encoding)}function O(Pe){if(r=r||t(884),!(this instanceof O))return new O(Pe);var Oe=this instanceof r;this._readableState=new w(Pe,this,Oe),this.readable=!0,Pe&&(typeof Pe.read=="function"&&(this._read=Pe.read),typeof Pe.destroy=="function"&&(this._destroy=Pe.destroy)),l.call(this)}function oe(Pe,Oe,gt,Q,J){i("readableAddChunk",Oe);var F,K=Pe._readableState;if(Oe===null)K.reading=!1,function(Ee,ce){if(i("onEofChunk"),!ce.ended){if(ce.decoder){var He=ce.decoder.end();He&&He.length&&(ce.buffer.push(He),ce.length+=ce.objectMode?1:He.length)}ce.ended=!0,ce.sync?te(Ee):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,$e(Ee)))}}(Pe,K);else if(J||(F=function(Ee,ce){var He,ut;return ut=ce,d.isBuffer(ut)||ut instanceof c||typeof ce=="string"||ce===void 0||Ee.objectMode||(He=new P("chunk",["string","Buffer","Uint8Array"],ce)),He}(K,Oe)),F)ie(Pe,F);else if(K.objectMode||Oe&&Oe.length>0)if(typeof Oe=="string"||K.objectMode||Object.getPrototypeOf(Oe)===d.prototype||(Oe=function(Ee){return d.from(Ee)}(Oe)),Q)K.endEmitted?ie(Pe,new B):D(Pe,K,Oe,!0);else if(K.ended)ie(Pe,new U);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!gt?(Oe=K.decoder.write(Oe),K.objectMode||Oe.length!==0?D(Pe,K,Oe,!1):Ue(Pe,K)):D(Pe,K,Oe,!1)}else Q||(K.reading=!1,Ue(Pe,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function D(Pe,Oe,gt,Q){Oe.flowing&&Oe.length===0&&!Oe.sync?(Oe.awaitDrain=0,Pe.emit("data",gt)):(Oe.length+=Oe.objectMode?1:gt.length,Q?Oe.buffer.unshift(gt):Oe.buffer.push(gt),Oe.needReadable&&te(Pe)),Ue(Pe,Oe)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pe){this._readableState&&(this._readableState.destroyed=Pe)}}),O.prototype.destroy=v.destroy,O.prototype._undestroy=v.undestroy,O.prototype._destroy=function(Pe,Oe){Oe(Pe)},O.prototype.push=function(Pe,Oe){var gt,Q=this._readableState;return Q.objectMode?gt=!0:typeof Pe=="string"&&((Oe=Oe||Q.defaultEncoding)!==Q.encoding&&(Pe=d.from(Pe,Oe),Oe=""),gt=!0),oe(this,Pe,Oe,!1,gt)},O.prototype.unshift=function(Pe){return oe(this,Pe,null,!0,!1)},O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(Pe){m||(m=t(748).StringDecoder);var Oe=new m(Pe);this._readableState.decoder=Oe,this._readableState.encoding=this._readableState.decoder.encoding;for(var gt=this._readableState.buffer.head,Q="";gt!==null;)Q+=Oe.write(gt.data),gt=gt.next;return this._readableState.buffer.clear(),Q!==""&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this};var ve=1073741824;function Le(Pe,Oe){return Pe<=0||Oe.length===0&&Oe.ended?0:Oe.objectMode?1:Pe!=Pe?Oe.flowing&&Oe.length?Oe.buffer.head.data.length:Oe.length:(Pe>Oe.highWaterMark&&(Oe.highWaterMark=function(gt){return gt>=ve?gt=ve:(gt--,gt|=gt>>>1,gt|=gt>>>2,gt|=gt>>>4,gt|=gt>>>8,gt|=gt>>>16,gt++),gt}(Pe)),Pe<=Oe.length?Pe:Oe.ended?Oe.length:(Oe.needReadable=!0,0))}function te(Pe){var Oe=Pe._readableState;i("emitReadable",Oe.needReadable,Oe.emittedReadable),Oe.needReadable=!1,Oe.emittedReadable||(i("emitReadable",Oe.flowing),Oe.emittedReadable=!0,process.nextTick($e,Pe))}function $e(Pe){var Oe=Pe._readableState;i("emitReadable_",Oe.destroyed,Oe.length,Oe.ended),Oe.destroyed||!Oe.length&&!Oe.ended||(Pe.emit("readable"),Oe.emittedReadable=!1),Oe.needReadable=!Oe.flowing&&!Oe.ended&&Oe.length<=Oe.highWaterMark,Ne(Pe)}function Ue(Pe,Oe){Oe.readingMore||(Oe.readingMore=!0,process.nextTick(Re,Pe,Oe))}function Re(Pe,Oe){for(;!Oe.reading&&!Oe.ended&&(Oe.length<Oe.highWaterMark||Oe.flowing&&Oe.length===0);){var gt=Oe.length;if(i("maybeReadMore read 0"),Pe.read(0),gt===Oe.length)break}Oe.readingMore=!1}function Xe(Pe){var Oe=Pe._readableState;Oe.readableListening=Pe.listenerCount("readable")>0,Oe.resumeScheduled&&!Oe.paused?Oe.flowing=!0:Pe.listenerCount("data")>0&&Pe.resume()}function Ye(Pe){i("readable nexttick read 0"),Pe.read(0)}function Ze(Pe,Oe){i("resume",Oe.reading),Oe.reading||Pe.read(0),Oe.resumeScheduled=!1,Pe.emit("resume"),Ne(Pe),Oe.flowing&&!Oe.reading&&Pe.read(0)}function Ne(Pe){var Oe=Pe._readableState;for(i("flow",Oe.flowing);Oe.flowing&&Pe.read()!==null;);}function ze(Pe,Oe){return Oe.length===0?null:(Oe.objectMode?gt=Oe.buffer.shift():!Pe||Pe>=Oe.length?(gt=Oe.decoder?Oe.buffer.join(""):Oe.buffer.length===1?Oe.buffer.first():Oe.buffer.concat(Oe.length),Oe.buffer.clear()):gt=Oe.buffer.consume(Pe,Oe.decoder),gt);var gt}function st(Pe){var Oe=Pe._readableState;i("endReadable",Oe.endEmitted),Oe.endEmitted||(Oe.ended=!0,process.nextTick(Rt,Oe,Pe))}function Rt(Pe,Oe){if(i("endReadableNT",Pe.endEmitted,Pe.length),!Pe.endEmitted&&Pe.length===0&&(Pe.endEmitted=!0,Oe.readable=!1,Oe.emit("end"),Pe.autoDestroy)){var gt=Oe._writableState;(!gt||gt.autoDestroy&&gt.finished)&&Oe.destroy()}}function jt(Pe,Oe){for(var gt=0,Q=Pe.length;gt<Q;gt++)if(Pe[gt]===Oe)return gt;return-1}O.prototype.read=function(Pe){i("read",Pe),Pe=parseInt(Pe,10);var Oe=this._readableState,gt=Pe;if(Pe!==0&&(Oe.emittedReadable=!1),Pe===0&&Oe.needReadable&&((Oe.highWaterMark!==0?Oe.length>=Oe.highWaterMark:Oe.length>0)||Oe.ended))return i("read: emitReadable",Oe.length,Oe.ended),Oe.length===0&&Oe.ended?st(this):te(this),null;if((Pe=Le(Pe,Oe))===0&&Oe.ended)return Oe.length===0&&st(this),null;var Q,J=Oe.needReadable;return i("need readable",J),(Oe.length===0||Oe.length-Pe<Oe.highWaterMark)&&i("length less than watermark",J=!0),Oe.ended||Oe.reading?i("reading or ended",J=!1):J&&(i("do read"),Oe.reading=!0,Oe.sync=!0,Oe.length===0&&(Oe.needReadable=!0),this._read(Oe.highWaterMark),Oe.sync=!1,Oe.reading||(Pe=Le(gt,Oe))),(Q=Pe>0?ze(Pe,Oe):null)===null?(Oe.needReadable=Oe.length<=Oe.highWaterMark,Pe=0):(Oe.length-=Pe,Oe.awaitDrain=0),Oe.length===0&&(Oe.ended||(Oe.needReadable=!0),gt!==Pe&&Oe.ended&&st(this)),Q!==null&&this.emit("data",Q),Q},O.prototype._read=function(Pe){ie(this,new M("_read()"))},O.prototype.pipe=function(Pe,Oe){var gt=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=Pe;break;case 1:Q.pipes=[Q.pipes,Pe];break;default:Q.pipes.push(Pe)}Q.pipesCount+=1,i("pipe count=%d opts=%j",Q.pipesCount,Oe);var J=Oe&&Oe.end===!1||Pe===process.stdout||Pe===process.stderr?Je:F;function F(){i("onend"),Pe.end()}Q.endEmitted?process.nextTick(J):gt.once("end",J),Pe.on("unpipe",function Ke(it,Et){i("onunpipe"),it===gt&&Et&&Et.hasUnpiped===!1&&(Et.hasUnpiped=!0,i("cleanup"),Pe.removeListener("close",ut),Pe.removeListener("finish",Ve),Pe.removeListener("drain",K),Pe.removeListener("error",He),Pe.removeListener("unpipe",Ke),gt.removeListener("end",F),gt.removeListener("end",Je),gt.removeListener("data",ce),Ee=!0,!Q.awaitDrain||Pe._writableState&&!Pe._writableState.needDrain||K())});var K=function(Ke){return function(){var it=Ke._readableState;i("pipeOnDrain",it.awaitDrain),it.awaitDrain&&it.awaitDrain--,it.awaitDrain===0&&o(Ke,"data")&&(it.flowing=!0,Ne(Ke))}}(gt);Pe.on("drain",K);var Ee=!1;function ce(Ke){i("ondata");var it=Pe.write(Ke);i("dest.write",it),it===!1&&((Q.pipesCount===1&&Q.pipes===Pe||Q.pipesCount>1&&jt(Q.pipes,Pe)!==-1)&&!Ee&&(i("false write response, pause",Q.awaitDrain),Q.awaitDrain++),gt.pause())}function He(Ke){i("onerror",Ke),Je(),Pe.removeListener("error",He),o(Pe,"error")===0&&ie(Pe,Ke)}function ut(){Pe.removeListener("finish",Ve),Je()}function Ve(){i("onfinish"),Pe.removeListener("close",ut),Je()}function Je(){i("unpipe"),gt.unpipe(Pe)}return gt.on("data",ce),function(Ke,it,Et){if(typeof Ke.prependListener=="function")return Ke.prependListener(it,Et);Ke._events&&Ke._events[it]?Array.isArray(Ke._events[it])?Ke._events[it].unshift(Et):Ke._events[it]=[Et,Ke._events[it]]:Ke.on(it,Et)}(Pe,"error",He),Pe.once("close",ut),Pe.once("finish",Ve),Pe.emit("pipe",gt),Q.flowing||(i("pipe resume"),gt.resume()),Pe},O.prototype.unpipe=function(Pe){var Oe=this._readableState,gt={hasUnpiped:!1};if(Oe.pipesCount===0)return this;if(Oe.pipesCount===1)return Pe&&Pe!==Oe.pipes||(Pe||(Pe=Oe.pipes),Oe.pipes=null,Oe.pipesCount=0,Oe.flowing=!1,Pe&&Pe.emit("unpipe",this,gt)),this;if(!Pe){var Q=Oe.pipes,J=Oe.pipesCount;Oe.pipes=null,Oe.pipesCount=0,Oe.flowing=!1;for(var F=0;F<J;F++)Q[F].emit("unpipe",this,{hasUnpiped:!1});return this}var K=jt(Oe.pipes,Pe);return K===-1||(Oe.pipes.splice(K,1),Oe.pipesCount-=1,Oe.pipesCount===1&&(Oe.pipes=Oe.pipes[0]),Pe.emit("unpipe",this,gt)),this},O.prototype.on=function(Pe,Oe){var gt=l.prototype.on.call(this,Pe,Oe),Q=this._readableState;return Pe==="data"?(Q.readableListening=this.listenerCount("readable")>0,Q.flowing!==!1&&this.resume()):Pe==="readable"&&(Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,i("on readable",Q.length,Q.reading),Q.length?te(this):Q.reading||process.nextTick(Ye,this))),gt},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(Pe,Oe){var gt=l.prototype.removeListener.call(this,Pe,Oe);return Pe==="readable"&&process.nextTick(Xe,this),gt},O.prototype.removeAllListeners=function(Pe){var Oe=l.prototype.removeAllListeners.apply(this,arguments);return Pe!=="readable"&&Pe!==void 0||process.nextTick(Xe,this),Oe},O.prototype.resume=function(){var Pe=this._readableState;return Pe.flowing||(i("resume"),Pe.flowing=!Pe.readableListening,function(Oe,gt){gt.resumeScheduled||(gt.resumeScheduled=!0,process.nextTick(Ze,Oe,gt))}(this,Pe)),Pe.paused=!1,this},O.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(Pe){var Oe=this,gt=this._readableState,Q=!1;for(var J in Pe.on("end",function(){if(i("wrapped end"),gt.decoder&&!gt.ended){var K=gt.decoder.end();K&&K.length&&Oe.push(K)}Oe.push(null)}),Pe.on("data",function(K){i("wrapped data"),gt.decoder&&(K=gt.decoder.write(K)),gt.objectMode&&K==null||(gt.objectMode||K&&K.length)&&(Oe.push(K)||(Q=!0,Pe.pause()))}),Pe)this[J]===void 0&&typeof Pe[J]=="function"&&(this[J]=function(K){return function(){return Pe[K].apply(Pe,arguments)}}(J));for(var F=0;F<L.length;F++)Pe.on(L[F],this.emit.bind(this,L[F]));return this._read=function(K){i("wrapped _read",K),Q&&(Q=!1,Pe.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=t(5857)),g(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Pe){this._readableState&&(this._readableState.flowing=Pe)}}),O._fromList=ze,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(O.from=function(Pe,Oe){return p===void 0&&(p=t(3411)),p(O,Pe,Oe)})},6756:function(n,e,t){n.exports=m;var r=t(1602).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,l=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=r.ERR_TRANSFORM_WITH_LENGTH_0,c=t(884);function f(y,v){var A=this._transformState;A.transforming=!1;var I=A.writecb;if(I===null)return this.emit("error",new o);A.writechunk=null,A.writecb=null,v!=null&&this.push(v),I(y);var P=this._readableState;P.reading=!1,(P.needReadable||P.length<P.highWaterMark)&&this._read(P.highWaterMark)}function m(y){if(!(this instanceof m))return new m(y);c.call(this,y),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",g)}function g(){var y=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(v,A){p(y,v,A)})}function p(y,v,A){if(v)return y.emit("error",v);if(A!=null&&y.push(A),y._writableState.length)throw new d;if(y._transformState.transforming)throw new l;return y.push(null)}t(7523)(m,c),m.prototype.push=function(y,v){return this._transformState.needTransform=!1,c.prototype.push.call(this,y,v)},m.prototype._transform=function(y,v,A){A(new i("_transform()"))},m.prototype._write=function(y,v,A){var I=this._transformState;if(I.writecb=A,I.writechunk=y,I.writeencoding=v,!I.transforming){var P=this._readableState;(I.needTransform||P.needReadable||P.length<P.highWaterMark)&&this._read(P.highWaterMark)}},m.prototype._read=function(y){var v=this._transformState;v.writechunk===null||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},m.prototype._destroy=function(y,v){c.prototype._destroy.call(this,y,function(A){v(A)})}},3726:function(n,e,t){function r(Ue){var Re=this;this.next=null,this.entry=null,this.finish=function(){(function(Xe,Ye){var Ze=Xe.entry;for(Xe.entry=null;Ze;){var Ne=Ze.callback;Ye.pendingcb--,Ne(void 0),Ze=Ze.next}Ye.corkedRequestsFree.next=Xe})(Re,Ue)}}var i;n.exports=O,O.WritableState=w;var o,l={deprecate:t(9e3)},d=t(2611),c=t(44).Buffer,f=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m=t(2410),g=t(1749).getHighWaterMark,p=t(1602).codes,y=p.ERR_INVALID_ARG_TYPE,v=p.ERR_METHOD_NOT_IMPLEMENTED,A=p.ERR_MULTIPLE_CALLBACK,I=p.ERR_STREAM_CANNOT_PIPE,P=p.ERR_STREAM_DESTROYED,U=p.ERR_STREAM_NULL_VALUES,M=p.ERR_STREAM_WRITE_AFTER_END,B=p.ERR_UNKNOWN_ENCODING,ie=m.errorOrDestroy;function L(){}function w(Ue,Re,Xe){i=i||t(884),Ue=Ue||{},typeof Xe!="boolean"&&(Xe=Re instanceof i),this.objectMode=!!Ue.objectMode,Xe&&(this.objectMode=this.objectMode||!!Ue.writableObjectMode),this.highWaterMark=g(this,Ue,"writableHighWaterMark",Xe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ye=Ue.decodeStrings===!1;this.decodeStrings=!Ye,this.defaultEncoding=Ue.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ze){(function(Ne,ze){var st=Ne._writableState,Rt=st.sync,jt=st.writecb;if(typeof jt!="function")throw new A;if(function(Oe){Oe.writing=!1,Oe.writecb=null,Oe.length-=Oe.writelen,Oe.writelen=0}(st),ze)(function(Oe,gt,Q,J,F){--gt.pendingcb,Q?(process.nextTick(F,J),process.nextTick($e,Oe,gt),Oe._writableState.errorEmitted=!0,ie(Oe,J)):(F(J),Oe._writableState.errorEmitted=!0,ie(Oe,J),$e(Oe,gt))})(Ne,st,Rt,ze,jt);else{var Pe=Le(st)||Ne.destroyed;Pe||st.corked||st.bufferProcessing||!st.bufferedRequest||ve(Ne,st),Rt?process.nextTick(D,Ne,st,Pe,jt):D(Ne,st,Pe,jt)}})(Re,Ze)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ue.emitClose!==!1,this.autoDestroy=!!Ue.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function O(Ue){var Re=this instanceof(i=i||t(884));if(!Re&&!o.call(O,this))return new O(Ue);this._writableState=new w(Ue,this,Re),this.writable=!0,Ue&&(typeof Ue.write=="function"&&(this._write=Ue.write),typeof Ue.writev=="function"&&(this._writev=Ue.writev),typeof Ue.destroy=="function"&&(this._destroy=Ue.destroy),typeof Ue.final=="function"&&(this._final=Ue.final)),d.call(this)}function oe(Ue,Re,Xe,Ye,Ze,Ne,ze){Re.writelen=Ye,Re.writecb=ze,Re.writing=!0,Re.sync=!0,Re.destroyed?Re.onwrite(new P("write")):Xe?Ue._writev(Ze,Re.onwrite):Ue._write(Ze,Ne,Re.onwrite),Re.sync=!1}function D(Ue,Re,Xe,Ye){Xe||function(Ze,Ne){Ne.length===0&&Ne.needDrain&&(Ne.needDrain=!1,Ze.emit("drain"))}(Ue,Re),Re.pendingcb--,Ye(),$e(Ue,Re)}function ve(Ue,Re){Re.bufferProcessing=!0;var Xe=Re.bufferedRequest;if(Ue._writev&&Xe&&Xe.next){var Ye=Re.bufferedRequestCount,Ze=new Array(Ye),Ne=Re.corkedRequestsFree;Ne.entry=Xe;for(var ze=0,st=!0;Xe;)Ze[ze]=Xe,Xe.isBuf||(st=!1),Xe=Xe.next,ze+=1;Ze.allBuffers=st,oe(Ue,Re,!0,Re.length,Ze,"",Ne.finish),Re.pendingcb++,Re.lastBufferedRequest=null,Ne.next?(Re.corkedRequestsFree=Ne.next,Ne.next=null):Re.corkedRequestsFree=new r(Re),Re.bufferedRequestCount=0}else{for(;Xe;){var Rt=Xe.chunk,jt=Xe.encoding,Pe=Xe.callback;if(oe(Ue,Re,!1,Re.objectMode?1:Rt.length,Rt,jt,Pe),Xe=Xe.next,Re.bufferedRequestCount--,Re.writing)break}Xe===null&&(Re.lastBufferedRequest=null)}Re.bufferedRequest=Xe,Re.bufferProcessing=!1}function Le(Ue){return Ue.ending&&Ue.length===0&&Ue.bufferedRequest===null&&!Ue.finished&&!Ue.writing}function te(Ue,Re){Ue._final(function(Xe){Re.pendingcb--,Xe&&ie(Ue,Xe),Re.prefinished=!0,Ue.emit("prefinish"),$e(Ue,Re)})}function $e(Ue,Re){var Xe=Le(Re);if(Xe&&(function(Ze,Ne){Ne.prefinished||Ne.finalCalled||(typeof Ze._final!="function"||Ne.destroyed?(Ne.prefinished=!0,Ze.emit("prefinish")):(Ne.pendingcb++,Ne.finalCalled=!0,process.nextTick(te,Ze,Ne)))}(Ue,Re),Re.pendingcb===0&&(Re.finished=!0,Ue.emit("finish"),Re.autoDestroy))){var Ye=Ue._readableState;(!Ye||Ye.autoDestroy&&Ye.endEmitted)&&Ue.destroy()}return Xe}t(7523)(O,d),w.prototype.getBuffer=function(){for(var Ue=this.bufferedRequest,Re=[];Ue;)Re.push(Ue),Ue=Ue.next;return Re},function(){try{Object.defineProperty(w.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(Ue){return!!o.call(this,Ue)||this===O&&Ue&&Ue._writableState instanceof w}})):o=function(Ue){return Ue instanceof this},O.prototype.pipe=function(){ie(this,new I)},O.prototype.write=function(Ue,Re,Xe){var Ye,Ze=this._writableState,Ne=!1,ze=!Ze.objectMode&&(Ye=Ue,c.isBuffer(Ye)||Ye instanceof f);return ze&&!c.isBuffer(Ue)&&(Ue=function(st){return c.from(st)}(Ue)),typeof Re=="function"&&(Xe=Re,Re=null),ze?Re="buffer":Re||(Re=Ze.defaultEncoding),typeof Xe!="function"&&(Xe=L),Ze.ending?function(st,Rt){var jt=new M;ie(st,jt),process.nextTick(Rt,jt)}(this,Xe):(ze||function(st,Rt,jt,Pe){var Oe;return jt===null?Oe=new U:typeof jt=="string"||Rt.objectMode||(Oe=new y("chunk",["string","Buffer"],jt)),!Oe||(ie(st,Oe),process.nextTick(Pe,Oe),!1)}(this,Ze,Ue,Xe))&&(Ze.pendingcb++,Ne=function(st,Rt,jt,Pe,Oe,gt){if(!jt){var Q=function(Ee,ce,He){return Ee.objectMode||Ee.decodeStrings===!1||typeof ce!="string"||(ce=c.from(ce,He)),ce}(Rt,Pe,Oe);Pe!==Q&&(jt=!0,Oe="buffer",Pe=Q)}var J=Rt.objectMode?1:Pe.length;Rt.length+=J;var F=Rt.length<Rt.highWaterMark;if(F||(Rt.needDrain=!0),Rt.writing||Rt.corked){var K=Rt.lastBufferedRequest;Rt.lastBufferedRequest={chunk:Pe,encoding:Oe,isBuf:jt,callback:gt,next:null},K?K.next=Rt.lastBufferedRequest:Rt.bufferedRequest=Rt.lastBufferedRequest,Rt.bufferedRequestCount+=1}else oe(st,Rt,!1,J,Pe,Oe,gt);return F}(this,Ze,ze,Ue,Re,Xe)),Ne},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var Ue=this._writableState;Ue.corked&&(Ue.corked--,Ue.writing||Ue.corked||Ue.bufferProcessing||!Ue.bufferedRequest||ve(this,Ue))},O.prototype.setDefaultEncoding=function(Ue){if(typeof Ue=="string"&&(Ue=Ue.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ue+"").toLowerCase())>-1))throw new B(Ue);return this._writableState.defaultEncoding=Ue,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(Ue,Re,Xe){Xe(new v("_write()"))},O.prototype._writev=null,O.prototype.end=function(Ue,Re,Xe){var Ye=this._writableState;return typeof Ue=="function"?(Xe=Ue,Ue=null,Re=null):typeof Re=="function"&&(Xe=Re,Re=null),Ue!=null&&this.write(Ue,Re),Ye.corked&&(Ye.corked=1,this.uncork()),Ye.ending||function(Ze,Ne,ze){Ne.ending=!0,$e(Ze,Ne),ze&&(Ne.finished?process.nextTick(ze):Ze.once("finish",ze)),Ne.ended=!0,Ze.writable=!1}(this,Ye,Xe),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ue){this._writableState&&(this._writableState.destroyed=Ue)}}),O.prototype.destroy=m.destroy,O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(Ue,Re){Re(Ue)}},5857:function(n,e,t){var r;function i(U,M,B){return(M=function(ie){var L=function(w){if(typeof w!="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var oe=O.call(w,"string");if(typeof oe!="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)}(ie);return typeof L=="symbol"?L:String(L)}(M))in U?Object.defineProperty(U,M,{value:B,enumerable:!0,configurable:!0,writable:!0}):U[M]=B,U}var o=t(2896),l=Symbol("lastResolve"),d=Symbol("lastReject"),c=Symbol("error"),f=Symbol("ended"),m=Symbol("lastPromise"),g=Symbol("handlePromise"),p=Symbol("stream");function y(U,M){return{value:U,done:M}}function v(U){var M=U[l];if(M!==null){var B=U[p].read();B!==null&&(U[m]=null,U[l]=null,U[d]=null,M(y(B,!1)))}}function A(U){process.nextTick(v,U)}var I=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((i(r={get stream(){return this[p]},next:function(){var U=this,M=this[c];if(M!==null)return Promise.reject(M);if(this[f])return Promise.resolve(y(void 0,!0));if(this[p].destroyed)return new Promise(function(w,O){process.nextTick(function(){U[c]?O(U[c]):w(y(void 0,!0))})});var B,ie=this[m];if(ie)B=new Promise(function(w,O){return function(oe,D){w.then(function(){O[f]?oe(y(void 0,!0)):O[g](oe,D)},D)}}(ie,this));else{var L=this[p].read();if(L!==null)return Promise.resolve(y(L,!1));B=new Promise(this[g])}return this[m]=B,B}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var U=this;return new Promise(function(M,B){U[p].destroy(null,function(ie){ie?B(ie):M(y(void 0,!0))})})}),r),I);n.exports=function(U){var M,B=Object.create(P,(i(M={},p,{value:U,writable:!0}),i(M,l,{value:null,writable:!0}),i(M,d,{value:null,writable:!0}),i(M,c,{value:null,writable:!0}),i(M,f,{value:U._readableState.endEmitted,writable:!0}),i(M,g,{value:function(ie,L){var w=B[p].read();w?(B[m]=null,B[l]=null,B[d]=null,ie(y(w,!1))):(B[l]=ie,B[d]=L)},writable:!0}),M));return B[m]=null,o(U,function(ie){if(ie&&ie.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=B[d];return L!==null&&(B[m]=null,B[l]=null,B[d]=null,L(ie)),void(B[c]=ie)}var w=B[l];w!==null&&(B[m]=null,B[l]=null,B[d]=null,w(y(void 0,!0))),B[f]=!0}),U.on("readable",A.bind(null,B)),B}},3791:function(n,e,t){function r(g,p){var y=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);p&&(v=v.filter(function(A){return Object.getOwnPropertyDescriptor(g,A).enumerable})),y.push.apply(y,v)}return y}function i(g){for(var p=1;p<arguments.length;p++){var y=arguments[p]!=null?arguments[p]:{};p%2?r(Object(y),!0).forEach(function(v){o(g,v,y[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(y)):r(Object(y)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(y,v))})}return g}function o(g,p,y){return(p=d(p))in g?Object.defineProperty(g,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):g[p]=y,g}function l(g,p){for(var y=0;y<p.length;y++){var v=p[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,d(v.key),v)}}function d(g){var p=function(y){if(typeof y!="object"||y===null)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var A=v.call(y,"string");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(g);return typeof p=="symbol"?p:String(p)}var c=t(44).Buffer,f=t(3779).inspect,m=f&&f.custom||"inspect";n.exports=function(){function g(){(function(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")})(this,g),this.head=null,this.tail=null,this.length=0}var p,y;return p=g,(y=[{key:"push",value:function(v){var A={data:v,next:null};this.length>0?this.tail.next=A:this.head=A,this.tail=A,++this.length}},{key:"unshift",value:function(v){var A={data:v,next:this.head};this.length===0&&(this.tail=A),this.head=A,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var A=this.head,I=""+A.data;A=A.next;)I+=v+A.data;return I}},{key:"concat",value:function(v){if(this.length===0)return c.alloc(0);for(var A,I,P,U=c.allocUnsafe(v>>>0),M=this.head,B=0;M;)A=M.data,I=U,P=B,c.prototype.copy.call(A,I,P),B+=M.data.length,M=M.next;return U}},{key:"consume",value:function(v,A){var I;return v<this.head.data.length?(I=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):I=v===this.head.data.length?this.shift():A?this._getString(v):this._getBuffer(v),I}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var A=this.head,I=1,P=A.data;for(v-=P.length;A=A.next;){var U=A.data,M=v>U.length?U.length:v;if(M===U.length?P+=U:P+=U.slice(0,v),(v-=M)==0){M===U.length?(++I,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=U.slice(M));break}++I}return this.length-=I,P}},{key:"_getBuffer",value:function(v){var A=c.allocUnsafe(v),I=this.head,P=1;for(I.data.copy(A),v-=I.data.length;I=I.next;){var U=I.data,M=v>U.length?U.length:v;if(U.copy(A,A.length-v,0,M),(v-=M)==0){M===U.length?(++P,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=U.slice(M));break}++P}return this.length-=P,A}},{key:m,value:function(v,A){return f(this,i(i({},A),{},{depth:0,customInspect:!1}))}}])&&l(p.prototype,y),Object.defineProperty(p,"prototype",{writable:!1}),g}()},2410:function(n){function e(i,o){r(i,o),t(i)}function t(i){i._writableState&&!i._writableState.emitClose||i._readableState&&!i._readableState.emitClose||i.emit("close")}function r(i,o){i.emit("error",o)}n.exports={destroy:function(i,o){var l=this,d=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return d||c?(o?o(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,i)):process.nextTick(r,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(f){!o&&f?l._writableState?l._writableState.errorEmitted?process.nextTick(t,l):(l._writableState.errorEmitted=!0,process.nextTick(e,l,f)):process.nextTick(e,l,f):o?(process.nextTick(t,l),o(f)):process.nextTick(t,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(i,o){var l=i._readableState,d=i._writableState;l&&l.autoDestroy||d&&d.autoDestroy?i.destroy(o):i.emit("error",o)}}},2896:function(n,e,t){var r=t(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}n.exports=function o(l,d,c){if(typeof d=="function")return o(l,null,d);d||(d={}),c=function(M){var B=!1;return function(){if(!B){B=!0;for(var ie=arguments.length,L=new Array(ie),w=0;w<ie;w++)L[w]=arguments[w];M.apply(this,L)}}}(c||i);var f=d.readable||d.readable!==!1&&l.readable,m=d.writable||d.writable!==!1&&l.writable,g=function(){l.writable||y()},p=l._writableState&&l._writableState.finished,y=function(){m=!1,p=!0,f||c.call(l)},v=l._readableState&&l._readableState.endEmitted,A=function(){f=!1,v=!0,m||c.call(l)},I=function(M){c.call(l,M)},P=function(){var M;return f&&!v?(l._readableState&&l._readableState.ended||(M=new r),c.call(l,M)):m&&!p?(l._writableState&&l._writableState.ended||(M=new r),c.call(l,M)):void 0},U=function(){l.req.on("finish",y)};return function(M){return M.setHeader&&typeof M.abort=="function"}(l)?(l.on("complete",y),l.on("abort",P),l.req?U():l.on("request",U)):m&&!l._writableState&&(l.on("end",g),l.on("close",g)),l.on("end",A),l.on("finish",y),d.error!==!1&&l.on("error",I),l.on("close",P),function(){l.removeListener("complete",y),l.removeListener("abort",P),l.removeListener("request",U),l.req&&l.req.removeListener("finish",y),l.removeListener("end",g),l.removeListener("close",g),l.removeListener("finish",y),l.removeListener("end",A),l.removeListener("error",I),l.removeListener("close",P)}}},3411:function(n){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(n,e,t){var r,i=t(1602).codes,o=i.ERR_MISSING_ARGS,l=i.ERR_STREAM_DESTROYED;function d(m){if(m)throw m}function c(m){m()}function f(m,g){return m.pipe(g)}n.exports=function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];var y,v=function(I){return I.length?typeof I[I.length-1]!="function"?d:I.pop():d}(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new o("streams");var A=g.map(function(I,P){var U=P<g.length-1;return function(M,B,ie,L){L=function(oe){var D=!1;return function(){D||(D=!0,oe.apply(void 0,arguments))}}(L);var w=!1;M.on("close",function(){w=!0}),r===void 0&&(r=t(2896)),r(M,{readable:B,writable:ie},function(oe){if(oe)return L(oe);w=!0,L()});var O=!1;return function(oe){if(!w&&!O)return O=!0,function(D){return D.setHeader&&typeof D.abort=="function"}(M)?M.abort():typeof M.destroy=="function"?M.destroy():void L(oe||new l("pipe"))}}(I,U,P>0,function(M){y||(y=M),M&&A.forEach(c),U||(A.forEach(c),v(y))})});return g.reduce(f)}},1749:function(n,e,t){var r=t(1602).codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(i,o,l,d){var c=function(f,m,g){return f.highWaterMark!=null?f.highWaterMark:m?f[g]:null}(o,d,l);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new r(d?l:"highWaterMark",c);return Math.floor(c)}return i.objectMode?16:16384}}},2611:function(n,e,t){n.exports=t(9826).EventEmitter},748:function(n,e,t){var r=t(4598).Buffer,i=r.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(v){var A;switch(this.encoding=function(I){var P=function(U){if(!U)return"utf8";for(var M;;)switch(U){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return U;default:if(M)return;U=(""+U).toLowerCase(),M=!0}}(I);if(typeof P!="string"&&(r.isEncoding===i||!i(I)))throw new Error("Unknown encoding: "+I);return P||I}(v),this.encoding){case"utf16le":this.text=c,this.end=f,A=4;break;case"utf8":this.fillLast=d,A=4;break;case"base64":this.text=m,this.end=g,A=3;break;default:return this.write=p,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(A)}function l(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function d(v){var A=this.lastTotal-this.lastNeed,I=function(P,U){if((192&U[0])!=128)return P.lastNeed=0,"�";if(P.lastNeed>1&&U.length>1){if((192&U[1])!=128)return P.lastNeed=1,"�";if(P.lastNeed>2&&U.length>2&&(192&U[2])!=128)return P.lastNeed=2,"�"}}(this,v);return I!==void 0?I:this.lastNeed<=v.length?(v.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,A,0,v.length),void(this.lastNeed-=v.length))}function c(v,A){if((v.length-A)%2==0){var I=v.toString("utf16le",A);if(I){var P=I.charCodeAt(I.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",A,v.length-1)}function f(v){var A=v&&v.length?this.write(v):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,I)}return A}function m(v,A){var I=(v.length-A)%3;return I===0?v.toString("base64",A):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",A,v.length-I))}function g(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function p(v){return v.toString(this.encoding)}function y(v){return v&&v.length?this.write(v):""}e.StringDecoder=o,o.prototype.write=function(v){if(v.length===0)return"";var A,I;if(this.lastNeed){if((A=this.fillLast(v))===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<v.length?A?A+this.text(v,I):this.text(v,I):A||""},o.prototype.end=function(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+"�":A},o.prototype.text=function(v,A){var I=function(U,M,B){var ie=M.length-1;if(ie<B)return 0;var L=l(M[ie]);return L>=0?(L>0&&(U.lastNeed=L-1),L):--ie<B||L===-2?0:(L=l(M[ie]))>=0?(L>0&&(U.lastNeed=L-2),L):--ie<B||L===-2?0:(L=l(M[ie]))>=0?(L>0&&(L===2?L=0:U.lastNeed=L-3),L):0}(this,v,A);if(!this.lastNeed)return v.toString("utf8",A);this.lastTotal=I;var P=v.length-(I-this.lastNeed);return v.copy(this.lastChar,0,P),v.toString("utf8",A,P)},o.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},4598:function(n,e,t){var r=t(44),i=r.Buffer;function o(d,c){for(var f in d)c[f]=d[f]}function l(d,c,f){return i(d,c,f)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?n.exports=r:(o(r,e),e.Buffer=l),o(i,l),l.from=function(d,c,f){if(typeof d=="number")throw new TypeError("Argument must not be a number");return i(d,c,f)},l.alloc=function(d,c,f){if(typeof d!="number")throw new TypeError("Argument must be a number");var m=i(d);return c!==void 0?typeof f=="string"?m.fill(c,f):m.fill(c):m.fill(0),m},l.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return i(d)},l.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(d)}},8571:function(n,e,t){var r;(function(i,o){var l="function",d="undefined",c="object",f="string",m="major",g="model",p="name",y="type",v="vendor",A="version",I="architecture",P="console",U="mobile",M="tablet",B="smarttv",ie="wearable",L="embedded",w="Amazon",O="Apple",oe="ASUS",D="BlackBerry",ve="Browser",Le="Chrome",te="Firefox",$e="Google",Ue="Huawei",Re="LG",Xe="Microsoft",Ye="Motorola",Ze="Opera",Ne="Samsung",ze="Sharp",st="Sony",Rt="Xiaomi",jt="Zebra",Pe="Facebook",Oe="Chromium OS",gt="Mac OS",Q=function(it){for(var Et={},ot=0;ot<it.length;ot++)Et[it[ot].toUpperCase()]=it[ot];return Et},J=function(it,Et){return typeof it===f&&F(Et).indexOf(F(it))!==-1},F=function(it){return it.toLowerCase()},K=function(it,Et){if(typeof it===f)return it=it.replace(/^\s\s*/,""),typeof Et===d?it:it.substring(0,500)},Ee=function(it,Et){for(var ot,xt,En,tn,fn,Ht,nr=0;nr<Et.length&&!fn;){var vr=Et[nr],Fr=Et[nr+1];for(ot=xt=0;ot<vr.length&&!fn&&vr[ot];)if(fn=vr[ot++].exec(it))for(En=0;En<Fr.length;En++)Ht=fn[++xt],typeof(tn=Fr[En])===c&&tn.length>0?tn.length===2?typeof tn[1]==l?this[tn[0]]=tn[1].call(this,Ht):this[tn[0]]=tn[1]:tn.length===3?typeof tn[1]!==l||tn[1].exec&&tn[1].test?this[tn[0]]=Ht?Ht.replace(tn[1],tn[2]):o:this[tn[0]]=Ht?tn[1].call(this,Ht,tn[2]):o:tn.length===4&&(this[tn[0]]=Ht?tn[3].call(this,Ht.replace(tn[1],tn[2])):o):this[tn]=Ht||o;nr+=2}},ce=function(it,Et){for(var ot in Et)if(typeof Et[ot]===c&&Et[ot].length>0){for(var xt=0;xt<Et[ot].length;xt++)if(J(Et[ot][xt],it))return ot==="?"?o:ot}else if(J(Et[ot],it))return ot==="?"?o:ot;return it},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ut={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,A],[/opios[\/ ]+([\w\.]+)/i],[A,[p,Ze+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[A,[p,Ze+" GX"]],[/\bopr\/([\w\.]+)/i],[A,[p,Ze]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[A,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,A],[/\bddg\/([\w\.]+)/i],[A,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[p,"UC"+ve]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[A,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[A,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[A,[p,"Smart Lenovo "+ve]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+ve],A],[/\bfocus\/([\w\.]+)/i],[A,[p,te+" Focus"]],[/\bopt\/([\w\.]+)/i],[A,[p,Ze+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[p,Ze+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[p,"MIUI "+ve]],[/fxios\/([-\w\.]+)/i],[A,[p,te]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+ve]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+ve],A],[/samsungbrowser\/([\w\.]+)/i],[A,[p,Ne+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],A],[/metasr[\/ ]?([\d\.]+)/i],[A,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,A],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,Pe],A],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,A],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[A,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[p,Le+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Le+" WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[p,"Android "+ve]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,A],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[A,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[A,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[A,ce,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[p,te+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,A],[/(cobalt)\/([\w\.]+)/i],[p,[A,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[I,"amd64"]],[/(ia32(?=;))/i],[[I,F]],[/((?:i[346]|x)86)[;\)]/i],[[I,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[I,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[I,"armhf"]],[/windows (ce|mobile); ppc;/i],[[I,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[I,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[I,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[I,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[v,Ne],[y,M]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[g,[v,Ne],[y,U]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[v,O],[y,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[v,O],[y,M]],[/(macintosh);/i],[g,[v,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[v,ze],[y,U]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[v,Ue],[y,M]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[v,Ue],[y,U]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[g,/_/g," "],[v,Rt],[y,U]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[v,Rt],[y,M]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[v,"OPPO"],[y,U]],[/\b(opd2\d{3}a?) bui/i],[g,[v,"OPPO"],[y,M]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[v,"Vivo"],[y,U]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[g,[v,"Realme"],[y,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[v,Ye],[y,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[v,Ye],[y,M]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[v,Re],[y,M]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[v,Re],[y,U]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[v,"Lenovo"],[y,M]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[v,"Nokia"],[y,U]],[/(pixel c)\b/i],[g,[v,$e],[y,M]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[v,$e],[y,U]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[v,st],[y,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[v,st],[y,M]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[v,"OnePlus"],[y,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[v,w],[y,M]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[v,w],[y,U]],[/(playbook);[-\w\),; ]+(rim)/i],[g,v,[y,M]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[v,D],[y,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[v,oe],[y,M]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[v,oe],[y,U]],[/(nexus 9)/i],[g,[v,"HTC"],[y,M]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[g,/_/g," "],[y,U]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[v,"Acer"],[y,M]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[v,"Meizu"],[y,U]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[g,[v,"Ulefone"],[y,U]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,g,[y,U]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,g,[y,M]],[/(surface duo)/i],[g,[v,Xe],[y,M]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[v,"Fairphone"],[y,U]],[/(u304aa)/i],[g,[v,"AT&T"],[y,U]],[/\bsie-(\w*)/i],[g,[v,"Siemens"],[y,U]],[/\b(rct\w+) b/i],[g,[v,"RCA"],[y,M]],[/\b(venue[\d ]{2,7}) b/i],[g,[v,"Dell"],[y,M]],[/\b(q(?:mv|ta)\w+) b/i],[g,[v,"Verizon"],[y,M]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[v,"Barnes & Noble"],[y,M]],[/\b(tm\d{3}\w+) b/i],[g,[v,"NuVision"],[y,M]],[/\b(k88) b/i],[g,[v,"ZTE"],[y,M]],[/\b(nx\d{3}j) b/i],[g,[v,"ZTE"],[y,U]],[/\b(gen\d{3}) b.+49h/i],[g,[v,"Swiss"],[y,U]],[/\b(zur\d{3}) b/i],[g,[v,"Swiss"],[y,M]],[/\b((zeki)?tb.*\b) b/i],[g,[v,"Zeki"],[y,M]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],g,[y,M]],[/\b(ns-?\w{0,9}) b/i],[g,[v,"Insignia"],[y,M]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[v,"NextBook"],[y,M]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],g,[y,U]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],g,[y,U]],[/\b(ph-1) /i],[g,[v,"Essential"],[y,U]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[v,"Envizen"],[y,M]],[/\b(trio[-\w\. ]+) b/i],[g,[v,"MachSpeed"],[y,M]],[/\btu_(1491) b/i],[g,[v,"Rotor"],[y,M]],[/(shield[\w ]+) b/i],[g,[v,"Nvidia"],[y,M]],[/(sprint) (\w+)/i],[v,g,[y,U]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[v,Xe],[y,U]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[v,jt],[y,M]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[v,jt],[y,U]],[/smart-tv.+(samsung)/i],[v,[y,B]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[v,Ne],[y,B]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,Re],[y,B]],[/(apple) ?tv/i],[v,[g,O+" TV"],[y,B]],[/crkey/i],[[g,Le+"cast"],[v,$e],[y,B]],[/droid.+aft(\w+)( bui|\))/i],[g,[v,w],[y,B]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[v,ze],[y,B]],[/(bravia[\w ]+)( bui|\))/i],[g,[v,st],[y,B]],[/(mitv-\w{5}) bui/i],[g,[v,Rt],[y,B]],[/Hbbtv.*(technisat) (.*);/i],[v,g,[y,B]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,K],[g,K],[y,B]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,B]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,g,[y,P]],[/droid.+; (shield) bui/i],[g,[v,"Nvidia"],[y,P]],[/(playstation [345portablevi]+)/i],[g,[v,st],[y,P]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[v,Xe],[y,P]],[/((pebble))app/i],[v,g,[y,ie]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[v,O],[y,ie]],[/droid.+; (glass) \d/i],[g,[v,$e],[y,ie]],[/droid.+; (wt63?0{2,3})\)/i],[g,[v,jt],[y,ie]],[/(quest( \d| pro)?)/i],[g,[v,Pe],[y,ie]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[y,L]],[/(aeobc)\b/i],[g,[v,w],[y,L]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[g,[y,U]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[y,M]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,M]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,U]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,A],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,A],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[A,ce,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[A,ce,He],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,gt],[A,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[A,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,A],[/\(bb(10);/i],[A,[p,D]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[A,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[p,te+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[A,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[A,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[A,[p,Le+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,Oe],A],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,A],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],A],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,A]]},Ve=function(it,Et){if(typeof it===c&&(Et=it,it=o),!(this instanceof Ve))return new Ve(it,Et).getResult();var ot=typeof i!==d&&i.navigator?i.navigator:o,xt=it||(ot&&ot.userAgent?ot.userAgent:""),En=ot&&ot.userAgentData?ot.userAgentData:o,tn=Et?function(Ht,nr){var vr={};for(var Fr in Ht)nr[Fr]&&nr[Fr].length%2==0?vr[Fr]=nr[Fr].concat(Ht[Fr]):vr[Fr]=Ht[Fr];return vr}(ut,Et):ut,fn=ot&&ot.userAgent==xt;return this.getBrowser=function(){var Ht,nr={};return nr[p]=o,nr[A]=o,Ee.call(nr,xt,tn.browser),nr[m]=typeof(Ht=nr[A])===f?Ht.replace(/[^\d\.]/g,"").split(".")[0]:o,fn&&ot&&ot.brave&&typeof ot.brave.isBrave==l&&(nr[p]="Brave"),nr},this.getCPU=function(){var Ht={};return Ht[I]=o,Ee.call(Ht,xt,tn.cpu),Ht},this.getDevice=function(){var Ht={};return Ht[v]=o,Ht[g]=o,Ht[y]=o,Ee.call(Ht,xt,tn.device),fn&&!Ht[y]&&En&&En.mobile&&(Ht[y]=U),fn&&Ht[g]=="Macintosh"&&ot&&typeof ot.standalone!==d&&ot.maxTouchPoints&&ot.maxTouchPoints>2&&(Ht[g]="iPad",Ht[y]=M),Ht},this.getEngine=function(){var Ht={};return Ht[p]=o,Ht[A]=o,Ee.call(Ht,xt,tn.engine),Ht},this.getOS=function(){var Ht={};return Ht[p]=o,Ht[A]=o,Ee.call(Ht,xt,tn.os),fn&&!Ht[p]&&En&&En.platform&&En.platform!="Unknown"&&(Ht[p]=En.platform.replace(/chrome os/i,Oe).replace(/macos/i,gt)),Ht},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return xt},this.setUA=function(Ht){return xt=typeof Ht===f&&Ht.length>500?K(Ht,500):Ht,this},this.setUA(xt),this};Ve.VERSION="1.0.38",Ve.BROWSER=Q([p,A,m]),Ve.CPU=Q([I]),Ve.DEVICE=Q([g,v,y,P,U,B,M,ie,L]),Ve.ENGINE=Ve.OS=Q([p,A]),typeof e!==d?(n.exports&&(e=n.exports=Ve),e.UAParser=Ve):t.amdO?(r=(function(){return Ve}).call(e,t,e,n))===o||(n.exports=r):typeof i!==d&&(i.UAParser=Ve);var Je=typeof i!==d&&(i.jQuery||i.Zepto);if(Je&&!Je.ua){var Ke=new Ve;Je.ua=Ke.getResult(),Je.ua.get=function(){return Ke.getUA()},Je.ua.set=function(it){Ke.setUA(it);var Et=Ke.getResult();for(var ot in Et)Je.ua[ot]=Et[ot]}}})(typeof window=="object"?window:this)},9e3:function(n,e,t){function r(i){try{if(!t.g.localStorage)return!1}catch{return!1}var o=t.g.localStorage[i];return o!=null&&String(o).toLowerCase()==="true"}n.exports=function(i,o){if(r("noDeprecation"))return i;var l=!1;return function(){if(!l){if(r("throwDeprecation"))throw new Error(o);r("traceDeprecation")?console.trace(o):console.warn(o),l=!0}return i.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(n,e,t){t.r(e),t.d(e,{Debug:function(){return o.default},FactoryMaker:function(){return i.default},MediaPlayer:function(){return r.default}});var r=t(255),i=t(138),o=t(649),l=t(8986),d=typeof window<"u"&&window||global,c=d.dashjs;c||(c=d.dashjs={}),c.MediaPlayer=r.default,c.FactoryMaker=i.default,c.Debug=o.default,c.Version=(0,l.getVersionString)(),e.default=c},649:function(n,e,t){t.r(e);var r=t(8850),i=t(3621),o=t(138);function l(c){c=c||{};const f=this.context,m=(0,r.default)(f).getInstance(),g=c.settings,p=[];let y,v,A,I;function P(O){return O&&O.bind?O.bind(window.console):window.console.log.bind(window.console)}function U(){for(var O=arguments.length,oe=new Array(O),D=0;D<O;D++)oe[D]=arguments[D];w(1,this,...oe)}function M(){for(var O=arguments.length,oe=new Array(O),D=0;D<O;D++)oe[D]=arguments[D];w(2,this,...oe)}function B(){for(var O=arguments.length,oe=new Array(O),D=0;D<O;D++)oe[D]=arguments[D];w(3,this,...oe)}function ie(){for(var O=arguments.length,oe=new Array(O),D=0;D<O;D++)oe[D]=arguments[D];w(4,this,...oe)}function L(){for(var O=arguments.length,oe=new Array(O),D=0;D<O;D++)oe[D]=arguments[D];w(5,this,...oe)}function w(O,oe){let D="",ve=null;v&&(ve=new Date().getTime(),D+="["+(ve-I)+"]"),A&&oe&&oe.getClassName&&(D+="["+oe.getClassName()+"]",oe.getType&&(D+="["+oe.getType()+"]")),D.length>0&&(D+=" ");for(var Le=arguments.length,te=new Array(Le>2?Le-2:0),$e=2;$e<Le;$e++)te[$e-2]=arguments[$e];Array.apply(null,te).forEach(function(Ue){D+=Ue+" "}),p[O]&&g&&g.get().debug.logLevel>=O&&p[O](D),g&&g.get().debug.dispatchEvent&&m.trigger(i.default.LOG,{message:D,level:O})}return y={getLogger:function(O){return{fatal:U.bind(O),error:M.bind(O),warn:B.bind(O),info:ie.bind(O),debug:L.bind(O)}},setLogTimestampVisible:function(O){v=O},setCalleeNameVisible:function(O){A=O}},v=!0,A=!0,I=new Date().getTime(),typeof window<"u"&&window.console&&(p[1]=P(window.console.error),p[2]=P(window.console.error),p[3]=P(window.console.warn),p[4]=P(window.console.info),p[5]=P(window.console.debug)),y}l.__dashjs_factory_name="Debug";const d=o.default.getSingletonFactory(l);d.LOG_LEVEL_NONE=0,d.LOG_LEVEL_FATAL=1,d.LOG_LEVEL_ERROR=2,d.LOG_LEVEL_WARNING=3,d.LOG_LEVEL_INFO=4,d.LOG_LEVEL_DEBUG=5,o.default.updateSingletonFactory(l.__dashjs_factory_name,d),e.default=d},8850:function(n,e,t){t.r(e);var r=t(138),i=t(1191);function o(){let d={};function c(p,y,v){let A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},I=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(!p)throw new Error("event type cannot be null or undefined");if(!y||typeof y!="function")throw new Error("listener must be a function: "+y);let P=A.priority||0;if(m(p,y,v)>=0)return;d[p]=d[p]||[];const U={callback:y,scope:v,priority:P,executeOnlyOnce:I};v&&v.getStreamId&&(U.streamId=v.getStreamId()),v&&v.getType&&(U.mediaType=v.getType()),A&&A.mode&&(U.mode=A.mode),d[p].some((M,B)=>{if(M&&P>M.priority)return d[p].splice(B,0,U),!0})||d[p].push(U)}function f(p,y,v){if(!p||!y||!d[p])return;const A=m(p,y,v);A<0||(d[p][A]=null)}function m(p,y,v){let A=-1;return d[p]&&d[p].some((I,P)=>{if(I&&I.callback===y&&(!v||v===I.scope))return A=P,!0}),A}return{on:function(p,y,v){c(p,y,v,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{})},once:function(p,y,v){c(p,y,v,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},!0)},off:f,trigger:function(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!p||!d[p])return;if(y=y||{},y.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");y.type=p,v.streamId&&(y.streamId=v.streamId),v.mediaType&&(y.mediaType=v.mediaType);const A=[];d[p].filter(I=>!(!I||v.streamId&&I.streamId&&I.streamId!==v.streamId||v.mediaType&&I.mediaType&&I.mediaType!==v.mediaType||v.mode&&I.mode&&I.mode!==v.mode||!I.mode&&v.mode&&v.mode===i.default.EVENT_MODE_ON_RECEIVE)).forEach(I=>{I&&I.callback.call(I.scope,y),I.executeOnlyOnce&&A.push(I)}),A.forEach(I=>{f(p,I.callback,I.scope)})},reset:function(){d={}}}}o.__dashjs_factory_name="EventBus";const l=r.default.getSingletonFactory(o);l.EVENT_PRIORITY_LOW=0,l.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(o.__dashjs_factory_name,l),e.default=l},138:function(n,e,t){t.r(e);const r=function(){let i,o=[];const l={},d={};function c(p,y){for(const v in o){const A=o[v];if(A.context===p&&A.name===y)return A.instance}return null}function f(p,y){return y[p]}function m(p,y,v){p in v&&(v[p]=y)}function g(p,y,v){let A;const I=p.__dashjs_factory_name,P=y[I];if(P){let U=P.instance;if(!P.override)return U.apply({context:y,factory:i},v);A=p.apply({context:y},v),U=U.apply({context:y,factory:i,parent:A},v);for(const M in U)A.hasOwnProperty(M)&&(A[M]=U[M])}else A=p.apply({context:y},v);return A.getClassName=function(){return I},A}return i={extend:function(p,y,v,A){!A[p]&&y&&(A[p]={instance:y,override:v})},getSingletonInstance:c,setSingletonInstance:function(p,y,v){for(const A in o){const I=o[A];if(I.context===p&&I.name===y)return void(o[A].instance=v)}o.push({name:y,context:p,instance:v})},deleteSingletonInstances:function(p){o=o.filter(y=>y.context!==p)},getSingletonFactory:function(p){let y=f(p.__dashjs_factory_name,l);return y||(y=function(v){let A;return v===void 0&&(v={}),{getInstance:function(){return A||(A=c(v,p.__dashjs_factory_name)),A||(A=g(p,v,arguments),o.push({name:p.__dashjs_factory_name,context:v,instance:A})),A}}},l[p.__dashjs_factory_name]=y),y},getSingletonFactoryByName:function(p){return f(p,l)},updateSingletonFactory:function(p,y){m(p,y,l)},getClassFactory:function(p){let y=f(p.__dashjs_factory_name,d);return y||(y=function(v){return v===void 0&&(v={}),{create:function(){return g(p,v,arguments)}}},d[p.__dashjs_factory_name]=y),y},getClassFactoryByName:function(p){return f(p,d)},updateClassFactory:function(p,y){m(p,y,d)}},i}();e.default=r},8261:function(n,e,t){t.r(e);var r=t(138),i=t(7263),o=t(649),l=t(5212),d=t(7568),c=t(8850),f=t(3621);function m(){let p;const y=this.context,v=(0,c.default)(y).getInstance(),A={"streaming.delay.liveDelay":f.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":f.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":f.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":f.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":f.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":f.default.SETTING_UPDATED_MIN_BITRATE},I={debug:{logLevel:o.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:l.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:l.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:l.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:l.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},...l.default.THUMBNAILS_SCHEME_ID_URIS.map(M=>({schemeIdUri:M}))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:l.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:l.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:l.default.TRACK_SWITCH_MODE_NEVER_REPLACE},ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:l.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[d.HTTPRequest.MPD_TYPE]:500,[d.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[d.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[d.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[d.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[d.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[d.HTTPRequest.LICENSE]:1e3,[d.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[d.HTTPRequest.MPD_TYPE]:3,[d.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[d.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[d.HTTPRequest.INIT_SEGMENT_TYPE]:3,[d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[d.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[d.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[d.HTTPRequest.LICENSE]:3,[d.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0},bolaRule:{active:!0},insufficientBufferRule:{active:!0,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1},loLPRule:{active:!1}},throughput:{averageCalculationMode:l.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:l.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:l.default.CMCD_MODE_QUERY,enabledKeys:l.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let P=i.default.clone(I);function U(M,B,ie){for(let L in M)M.hasOwnProperty(L)&&(B.hasOwnProperty(L)?typeof M[L]!="object"||M[L]instanceof RegExp||M[L]instanceof Array||M[L]===null?(B[L]=i.default.clone(M[L]),A[ie+L]&&v.trigger(A[ie+L])):U(M[L],B[L],ie.slice()+L+"."):console.error("Settings parameter "+ie+L+" is not supported"))}return p={get:function(){return P},update:function(M){typeof M=="object"&&U(M,P,"")},reset:function(){P=i.default.clone(I)}},p}m.__dashjs_factory_name="Settings";let g=r.default.getSingletonFactory(m);e.default=g},7263:function(n,e,t){t.r(e);var r=t(3282),i=t(8571),o=t(5212);class l{static mixin(c,f,m){let g,p={};if(c)for(let y in f)f.hasOwnProperty(y)&&(g=f[y],y in c&&(c[y]===g||y in p&&p[y]===g)||(typeof c[y]=="object"&&c[y]!==null?c[y]=l.mixin(c[y],g,m):c[y]=m(g)));return c}static clone(c){if(!c||typeof c!="object")return c;if(c instanceof RegExp)return new RegExp(c);let f;if(c instanceof Array){f=[];for(let m=0,g=c.length;m<g;++m)m in c&&f.push(l.clone(c[m]))}else f={};return l.mixin(f,c,l.clone)}static addAdditionalQueryParameterToUrl(c,f){try{if(!f||f.length===0)return c;let m=c;return f.forEach(g=>{let{key:p,value:y}=g;const v=m.includes("?")?"&":"?";m+=`${v}${encodeURIComponent(p)}=${encodeURIComponent(y)}`}),m}catch{return c}}static removeQueryParameterFromUrl(c,f){if(!c||!f)return c;const m=new URL(c),g=new URLSearchParams(m.search);if(!g||g.size===0||!g.has(f))return c;g.delete(f);const p=Array.from(g.entries()).map(v=>{let[A,I]=v;return`${A}=${I}`}).join("&"),y=`${m.origin}${m.pathname}`;return p?`${y}?${p}`:y}static parseHttpHeaders(c){let f={};if(!c)return f;let m=c.trim().split(`\r
`);for(let g=0,p=m.length;g<p;g++){let y=m[g],v=y.indexOf(": ");v>0&&(f[y.substring(0,v)]=y.substring(v+2))}return f}static parseQueryParams(c){const f=[],m=new URLSearchParams(c);for(const[g,p]of m.entries())f.push({key:decodeURIComponent(g),value:decodeURIComponent(p)});return f}static generateUuid(){let c=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){const m=(c+16*Math.random())%16|0;return c=Math.floor(c/16),(f=="x"?m:3&m|8).toString(16)})}static generateHashCode(c){let f=0;if(c.length===0)return f;for(let m=0;m<c.length;m++)f=(f<<5)-f+c.charCodeAt(m),f|=0;return f}static getRelativeUrl(c,f){try{const m=new URL(c),g=new URL(f);if(m.protocol=g.protocol,m.origin!==g.origin)return f;let p=r.relative(m.pathname.substr(0,m.pathname.lastIndexOf("/")),g.pathname.substr(0,g.pathname.lastIndexOf("/")));const y=p.length===0?1:0;return p+=g.pathname.substr(g.pathname.lastIndexOf("/")+y,g.pathname.length-1),g.pathname.length<p.length?g.pathname:p}catch{return f}}static getHostFromUrl(c){try{return new URL(c).host}catch{return null}}static parseUserAgent(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const f=c===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(f)}catch{return{}}}static stringHasProtocol(c){return/(http(s?)):\/\//i.test(c)}static bufferSourceToDataView(c){return l.toDataView(c,DataView)}static bufferSourceToInt8(c){return l.toDataView(c,Uint8Array)}static uint8ArrayToString(c){return new TextDecoder("utf-8").decode(c)}static bufferSourceToHex(c){const f=l.bufferSourceToInt8(c);let m="";for(let g of f)g=g.toString(16),g.length===1&&(g="0"+g),m+=g;return m}static toDataView(c,f){const m=l.getArrayBuffer(c);let g=1;"BYTES_PER_ELEMENT"in DataView&&(g=DataView.BYTES_PER_ELEMENT);const p=((c.byteOffset||0)+c.byteLength)/g,y=(c.byteOffset||0)/g,v=Math.floor(Math.max(0,Math.min(y,p)));return new f(m,v,Math.floor(Math.min(v+Math.max(1/0,0),p))-v)}static getArrayBuffer(c){return c instanceof ArrayBuffer?c:c.buffer}static getCodecFamily(c){const{base:f,profile:m}=l._getCodecParts(c);switch(f){case"mp4a":switch(m){case"69":case"6b":case"40.34":return o.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return o.default.CODEC_FAMILIES.AAC;case"a5":return o.default.CODEC_FAMILIES.AC3;case"e6":return o.default.CODEC_FAMILIES.EC3;case"b2":return o.default.CODEC_FAMILIES.DTSX;case"a9":return o.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return o.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return o.default.CODEC_FAMILIES.HEVC;default:return f}return f}static _getCodecParts(c){const[f,...m]=c.split(".");return{base:f,profile:m.join(".")}}}e.default=l},8986:function(n,e,t){t.r(e),t.d(e,{getVersionString:function(){return i}});const r="5.0.3";function i(){return r}},8748:function(n,e,t){t.r(e),e.default=class{extend(r,i){if(!r)return;let o=!!i&&i.override,l=!!i&&i.publicOnly;for(const d in r)!r.hasOwnProperty(d)||this[d]&&!o||l&&r[d].indexOf("public_")===-1||(this[d]=r[d])}}},5734:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.QUOTA_EXCEEDED="quotaExceeded",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEEK_TARGET="seekTarget",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate"}}e.default=i},3621:function(n,e,t){t.r(e);var r=t(5734);class i extends r.default{}let o=new i;e.default=o},7252:function(n,e,t){t.r(e),e.default=class{extend(r,i){if(!r)return;let o=!!i&&i.override,l=!!i&&i.publicOnly;for(const d in r)!r.hasOwnProperty(d)||this[d]&&!o||l&&r[d].indexOf("public_")===-1||(this[d]=r[d])}}},8854:function(n,e,t){t.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(n,e,t){t.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},255:function(n,e,t){t.r(e),t.d(e,{default:function(){return EE}});class r{constructor(){this.time=null,this.verboseLevel=0}log(b,T){if(this.verboseLevel>=b){const S=typeof T=="function"?T():T;console.log(`${this.time} [${b}] ${S}`)}}}class i{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(b){const T=["foreground","underline","italics","background","flash"];for(let S=0;S<T.length;S++){const k=T[S];Object.prototype.hasOwnProperty.call(b,k)&&(this[k]=b[k])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(b){return this.foreground===b.foreground&&this.underline===b.underline&&this.italics===b.italics&&this.background===b.background&&this.flash===b.flash}copy(b){this.foreground=b.foreground,this.underline=b.underline,this.italics=b.italics,this.background=b.background,this.flash=b.flash}}class o{constructor(){this.uchar=" ",this.penState=new i}reset(){this.uchar=" ",this.penState.reset()}setChar(b,T){this.uchar=b,this.penState.copy(T)}setPenState(b){this.penState.copy(b)}equals(b){return this.uchar===b.uchar&&this.penState.equals(b.penState)}copy(b){this.uchar=b.uchar,this.penState.copy(b.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}const l=100,d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c=function(_){return String.fromCharCode(d[_]||_)};class f{constructor(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new r;this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new i;for(let T=0;T<l;T++)this.chars.push(new o);this.logger=b}equals(b){for(let T=0;T<l;T++)if(!this.chars[T].equals(b.chars[T]))return!1;return!0}copy(b){for(let T=0;T<l;T++)this.chars[T].copy(b.chars[T])}isEmpty(){let b=!0;for(let T=0;T<l;T++)if(!this.chars[T].isEmpty()){b=!1;break}return b}setCursor(b){this.pos!==b&&(this.pos=b),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=l)}moveCursor(b){const T=this.pos+b;if(b>1)for(let S=this.pos+1;S<T+1;S++)this.chars[S].setPenState(this.currPenState);this.setCursor(T)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(b){b>=144&&this.backSpace();const T=c(b);this.pos>=l?this.logger.log(0,()=>"Cannot insert "+b.toString(16)+" ("+T+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(T,this.currPenState),this.moveCursor(1))}clearFromPos(b){let T;for(T=b;T<l;T++)this.chars[T].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const b=[];let T=!0;for(let S=0;S<l;S++){const k=this.chars[S].uchar;k!==" "&&(T=!1),b.push(k)}return T?"":b.join("")}setPenStyles(b){this.currPenState.setStyles(b),this.chars[this.pos].setPenState(this.currPenState)}}const m=15;class g{constructor(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new r;this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let T=0;T<m;T++)this.rows.push(new f(b));this.logger=b}reset(){for(let b=0;b<m;b++)this.rows[b].clear();this.currRow=14}equals(b){let T=!0;for(let S=0;S<m;S++)if(!this.rows[S].equals(b.rows[S])){T=!1;break}return T}copy(b){for(let T=0;T<m;T++)this.rows[T].copy(b.rows[T])}isEmpty(){let b=!0;for(let T=0;T<m;T++)if(!this.rows[T].isEmpty()){b=!1;break}return b}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(b){this.rows[this.currRow].insertChar(b)}setPen(b){this.rows[this.currRow].setPenStyles(b)}moveCursor(b){this.rows[this.currRow].moveCursor(b)}setCursor(b){this.logger.log(2,"setCursor: "+b),this.rows[this.currRow].setCursor(b)}setPAC(b){this.logger.log(2,()=>"pacData = "+JSON.stringify(b));let T=b.row-1;if(this.nrRollUpRows&&T<this.nrRollUpRows-1&&(T=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==T){for(let H=0;H<m;H++)this.rows[H].clear();const C=this.currRow+1-this.nrRollUpRows,$=this.lastOutputScreen;if($){const H=$.rows[C].cueStartTime,x=this.logger.time;if(H!==null&&x!==null&&H<x)for(let W=0;W<this.nrRollUpRows;W++)this.rows[T-this.nrRollUpRows+W+1].copy($.rows[C+W])}}this.currRow=T;const S=this.rows[this.currRow];if(b.indent!==null){const C=b.indent,$=Math.max(C-1,0);S.setCursor(b.indent),b.color=S.chars[$].penState.foreground}const k={foreground:b.color,underline:b.underline,italics:b.italics,background:"black",flash:!1};this.setPen(k)}setBkgData(b){this.logger.log(2,()=>"bkgData = "+JSON.stringify(b)),this.backSpace(),this.setPen(b),this.insertChar(32)}setRollUpRows(b){this.nrRollUpRows=b}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const b=this.currRow+1-this.nrRollUpRows,T=this.rows.splice(b,1)[0];T.clear(),this.rows.splice(this.currRow,0,T),this.logger.log(2,"Rolling up")}getDisplayText(b){b=b||!1;const T=[];let S="",k=-1;for(let C=0;C<m;C++){const $=this.rows[C].getTextString();$&&(k=C+1,b?T.push("Row "+k+": '"+$+"'"):T.push($.trim()))}return T.length>0&&(S=b?"["+T.join(" | ")+"]":T.join(`
`)),S}getTextAndFormat(){return this.rows}}class p{constructor(b,T){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new r;this.chNr=b,this.outputFilter=T,this.mode=null,this.displayedMemory=new g(S),this.nonDisplayedMemory=new g(S),this.lastOutputScreen=new g(S),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=S,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var b,T;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),(T=(b=this.outputFilter)===null||b===void 0?void 0:b.reset)===null||T===void 0||T.call(b),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}setPAC(b){this.writeScreen.setPAC(b)}setBkgData(b){this.writeScreen.setBkgData(b)}setMode(b){b!==this.mode&&(this.mode=b,this.logger.log(2,()=>"MODE="+b),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=b)}insertChars(b){for(let S=0;S<b.length;S++)this.writeScreen.insertChar(b[S]);const T=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>T+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(b){this.logger.log(2,"RU("+b+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(b)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const b=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=b,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(b){this.logger.log(2,"TO("+b+") - Tab Offset"),this.writeScreen.moveCursor(b)}ccMIDROW(b){const T={flash:!1};if(T.underline=b%2==1,T.italics=b>=46,T.italics)T.foreground="white";else{const S=Math.floor(b/2)-16,k=["white","green","blue","cyan","red","yellow","magenta"];T.foreground=k[S]}this.logger.log(2,"MIDROW: "+JSON.stringify(T)),this.writeScreen.setPen(T)}outputDataUpdate(){let b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];const T=this.logger.time;T!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,T,this.lastOutputScreen),b&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:T):this.cueStartTime=T,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(b){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,b,this.displayedMemory),this.cueStartTime=b))}}const y=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function v(_,b,T){return T.a===_&&T.b===b}const A=function(_){const b=[];for(let T=0;T<_.length;T++)b.push(_[T].toString(16));return b},I={17:2,18:4,21:6,22:8,23:10,19:13,20:15},P={25:2,26:4,29:6,30:8,31:10,27:13,28:15},U={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},M={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function B(_,b,T){T.a=_,T.b=b}class ie{constructor(b,T,S){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const k=this.logger=new r;this.channels=[null,new p(b,T,k),new p(b+1,S,k)]}addData(b,T){this.lastTime=b,this.logger.time=b;for(let S=0;S<T.length;S+=2){const k=127&T[S],C=127&T[S+1];let $=!1,H=null;if(this.lastTime!==null&&(b=this.lastTime+.5*S*1001/3e4,this.logger.time=b),k===0&&C===0)continue;this.logger.log(3,()=>"["+A([T[S],T[S+1]])+"] -> ("+A([k,C])+")");const x=this.cmdHistory;if(k>=16&&k<=31){if(v(k,C,x)){B(null,null,x),this.logger.log(3,()=>"Repeated command ("+A([k,C])+") is dropped");continue}B(k,C,this.cmdHistory),$=this.parseCmd(k,C),$||($=this.parseMidrow(k,C)),$||($=this.parsePAC(k,C)),$||($=this.parseBackgroundAttributes(k,C))}else B(null,null,x);if(!$&&(H=this.parseChars(k,C),H.length)){const W=this.currentChannel;W&&W>0?this.channels[W].insertChars(H):this.logger.log(2,"No channel found yet. TEXT-MODE?")}$||H||this.logger.log(2,()=>"Couldn't parse cleaned data "+A([k,C])+" orig: "+A([T[S],T[S+1]]))}}parseCmd(b,T){if(!((b===20||b===28||b===21||b===29)&&T>=32&&T<=47||(b===23||b===31)&&T>=33&&T<=35))return!1;const S=b===20||b===21||b===23?1:2,k=this.channels[S];return b===20||b===21||b===28||b===29?T===32?k.ccRCL():T===33?k.ccBS():T===34?k.ccAOF():T===35?k.ccAON():T===36?k.ccDER():T===37?k.ccRU(2):T===38?k.ccRU(3):T===39?k.ccRU(4):T===40?k.ccFON():T===41?k.ccRDC():T===42?k.ccTR():T===43?k.ccRTD():T===44?k.ccEDM():T===45?k.ccCR():T===46?k.ccENM():T===47&&k.ccEOC():k.ccTO(T-32),this.currentChannel=S,!0}parseMidrow(b,T){let S=0;if((b===17||b===25)&&T>=32&&T<=47){if(S=b===17?1:2,S!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const k=this.channels[S];return!!k&&(k.ccMIDROW(T),this.logger.log(3,()=>"MIDROW ("+A([b,T])+")"),!0)}return!1}parsePAC(b,T){let S;if(!((b>=17&&b<=23||b>=25&&b<=31)&&T>=64&&T<=127||(b===16||b===24)&&T>=64&&T<=95))return!1;const k=b<=23?1:2;S=T>=64&&T<=95?k===1?U[b]:M[b]:k===1?I[b]:P[b];const C=this.channels[k];return!!C&&(C.setPAC(this.interpretPAC(S,T)),this.currentChannel=k,!0)}interpretPAC(b,T){let S;const k={color:null,italics:!1,indent:null,underline:!1,row:b};return S=T>95?T-96:T-64,k.underline=!(1&~S),S<=13?k.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(S/2)]:S<=15?(k.italics=!0,k.color="white"):k.indent=4*Math.floor((S-16)/2),k}parseChars(b,T){let S,k=[],C=null;if(b>=25?(S=2,C=b-8):(S=1,C=b),C>=17&&C<=19){let $;$=C===17?T+80:C===18?T+112:T+144,this.logger.log(2,()=>"Special char '"+c($)+"' in channel "+S),k=[$]}else b>=32&&b<=127&&(k=T===0?[b]:[b,T]);return k&&this.logger.log(3,()=>"Char codes =  "+A(k).join(",")),k}parseBackgroundAttributes(b,T){if(!((b===16||b===24)&&T>=32&&T<=47||(b===23||b===31)&&T>=45&&T<=47))return!1;let S;const k={};b===16||b===24?(S=Math.floor((T-32)/2),k.background=y[S],T%2==1&&(k.background=k.background+"_semi")):T===45?k.background="transparent":(k.foreground="black",T===47&&(k.underline=!0));const C=b<=23?1:2;return this.channels[C].setBkgData(k),!0}reset(){for(let b=0;b<Object.keys(this.channels).length;b++){const T=this.channels[b];T&&T.reset()}B(null,null,this.cmdHistory)}cueSplitAtTime(b){for(let T=0;T<this.channels.length;T++){const S=this.channels[T];S&&S.cueSplitAtTime(b)}}}var L=t(5212),w=t(8854),O={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},oe=t(8850),D=t(3621),ve=t(138),Le=t(649),te=t(1191);function $e(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C,$,H,x,W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V,j,X,pe,Ae;function be(){Z(),le=!1,N=0,z=0,he=0,X=!1,ge=!0,Ie=!1,pe=!1,ee=NaN,se=NaN,x&&(b.off(D.default.DATA_UPDATE_COMPLETED,bt,T),b.off(D.default.MANIFEST_UPDATED,Zt,T),b.off(D.default.STREAMS_COMPOSED,rn,T),b.off(te.default.PLAYBACK_ENDED,Qt,T),b.off(te.default.STREAM_INITIALIZING,rt,T),b.off(te.default.REPRESENTATION_SWITCH,Ct,T),b.off(te.default.BUFFER_LEVEL_STATE_CHANGED,mn,T),ft(),x.removeEventListener("canplay",qt),x.removeEventListener("canplaythrough",Yt),x.removeEventListener("play",Nn),x.removeEventListener("waiting",Ft),x.removeEventListener("playing",gn),x.removeEventListener("pause",Sn),x.removeEventListener("error",ln),x.removeEventListener("seeking",wn),x.removeEventListener("seeked",On),x.removeEventListener("timeupdate",We),x.removeEventListener("progress",ht),x.removeEventListener("ratechange",ct),x.removeEventListener("loadedmetadata",_t),x.removeEventListener("loadeddata",Gt),x.removeEventListener("stalled",Wt),x.removeEventListener("ended",In),x.removeEventListener("volumechange",mt)),Y=null,x=null,G=null,re=null}function Se(){return parseFloat((Me(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)-ae()).toFixed(5))}function Me(pt){const Ce=pt||G;return Ce.start+Ce.duration}function Fe(){let pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];G&&x&&x.getElement()?(pt&&re&&_e(ae()),x.play()):le=!0}function Z(){G&&x&&x.pause()}function ne(pt){let Ce=arguments.length>1&&arguments[1]!==void 0&&arguments[1],et=arguments.length>2&&arguments[2]!==void 0&&arguments[2],yt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];G&&x&&x.getElement()&&pt!==(isNaN(ee)?x.getTime():ee)&&(V=et===!0,V||(ee=pt),S.info("Requesting seek to time: "+pt+(V?" (internal)":"")),re&&yt&&_e(pt),x.setCurrentTime(pt,Ce))}function we(){if(!G||!x||!re)return;const pt=k&&k.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO,Ce=$.getCurrentDVRInfo(pt);return Ce&&Ce.range?Ce.range.end:0}function _e(pt){const Ce=new Date(W.getClientReferenceTime()),et=H.getRegularPeriods()[0];N=W.calcPresentationTimeFromWallTime(Ce,et)-pt}function ae(){return G&&x?x.getTime():null}function me(){return G&&x?x.isPaused():null}function ye(){return G&&x?x.isSeeking():null}function fe(){return G&&x?x.isStalled():null}function ke(){return G&&x?x.getPlaybackRate():null}function xe(){return G&&x?x.getEnded():null}function je(){return re}function Ge(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(me()||!re||x.getReadyState()===0||ye()||X)return;pt||(pt=k.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO);const Ce=ae(),et=function(yt,tt){const zt=$.getCurrentDVRInfo(tt),Jt=zt?zt.range:null;let kn;return Jt?(kn=yt>Jt.end?Math.max(Jt.end-N,Jt.start):yt>0&&yt+.25<Jt.start&&Math.abs(yt-Jt.start)<31536e4?Ie?Math.max(Jt.end-N,Jt.start):Jt.start:yt,kn):NaN}(Ce,pt);!isNaN(et)&&et!==Ce&&!ye()&&(fe()||j||x.getReadyState()===1)&&(S.debug(`UpdateCurrentTime: Seek to actual time: ${et} from currentTime: ${Ce}`),ne(et,!1,!1))}function nt(){Y===null&&(Y=setInterval(()=>{(function(){if(b.trigger(D.default.WALLCLOCK_TIME_UPDATED,{isDynamic:re,time:new Date}),je()){const pt=Date.now();(isNaN(se)||pt>se+Ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(k.addDVRMetric(),me()?function(){const Ce=Date.now();(!de||Ce>de+500)&&(de=Ce,We())}():Ge(),se=pt)}})()},Ae.get().streaming.wallclockTimeUpdateInterval))}function ft(){clearInterval(Y),Y=null}function bt(pt){const Ce=pt.currentRepresentation,et=Ce?Ce.mediaInfo.streamInfo:null;et!==null&&G.id===et.id&&(G=et)}function qt(){b.trigger(D.default.CAN_PLAY)}function Yt(){b.trigger(D.default.CAN_PLAY_THROUGH)}function mn(pt){pt.streamId===k.getActiveStreamInfo().id&&(j=pt.state===O.BUFFER_EMPTY,Ae.get().streaming.buffer.setStallState&&x.setStallState(pt.mediaType,pt.state===O.BUFFER_EMPTY))}function Nn(){S.info("Native video element event: play"),Ge(),nt(),b.trigger(D.default.PLAYBACK_STARTED,{startTime:ae()})}function Ft(){S.info("Native video element event: waiting"),b.trigger(D.default.PLAYBACK_WAITING,{playingTime:ae()})}function gn(){S.info("Native video element event: playing"),V=!1,b.trigger(D.default.PLAYBACK_PLAYING,{playingTime:ae()})}function Sn(){S.info("Native video element event: pause"),b.trigger(D.default.PLAYBACK_PAUSED,{ended:xe()})}function wn(){if(V)return;let pt=ae();isNaN(ee)||ee===pt||(pt=ee),ee=NaN,S.info("Seeking to: "+pt),nt(),b.trigger(D.default.PLAYBACK_SEEKING,{seekTime:pt,streamId:G.id})}function On(){S.info("Native video element event: seeked"),V=!1,b.trigger(D.default.PLAYBACK_SEEKED)}function We(){G&&b.trigger(D.default.PLAYBACK_TIME_UPDATED,{timeToEnd:Se(),time:ae(),streamId:G.id})}function ht(){b.trigger(D.default.PLAYBACK_PROGRESS,{streamId:G.id})}function ct(){const pt=ke();S.info("Native video element event: ratechange: ",pt),b.trigger(D.default.PLAYBACK_RATE_CHANGED,{playbackRate:pt})}function _t(){S.info("Native video element event: loadedmetadata"),b.trigger(D.default.PLAYBACK_METADATA_LOADED),nt()}function Gt(){S.info("Native video element event: loadeddata"),b.trigger(D.default.PLAYBACK_LOADED_DATA)}function In(){S.info("Native video element event: ended"),Z(),ft();const pt=k?k.getActiveStreamInfo():null;pt&&b.trigger(D.default.PLAYBACK_ENDED,{isLast:pt.isLast})}function mt(){b.trigger(D.default.PLAYBACK_VOLUME_CHANGED)}function Qt(pt){if(Y&&pt.isLast){S.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const Ce=pt.seekTime?pt.seekTime:Me();x.setCurrentTime(Ce),Z(),ft()}}function ln(pt){const Ce=pt.target||pt.srcElement;b.trigger(D.default.PLAYBACK_ERROR,{error:Ce.error})}function en(){re=!1}function Wt(pt){b.trigger(D.default.PLAYBACK_STALLED,{e:pt})}function rt(pt){var Ce;(Ce=pt.mediaInfo)&&Ce.supplementalProperties&&Ce.supplementalProperties.find(et=>et.schemeIdUri===L.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME)&&(S.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ie=!0)}function Ct(pt){const Ce=k.getActiveStreamInfo();pt&&Ce&&pt.currentRepresentation&&pt.streamId&&pt.streamId===Ce.id&&pt.mediaType&&(pt.mediaType===L.default.VIDEO||pt.mediaType===L.default.AUDIO)&&(ge=pt.currentRepresentation.availabilityTimeComplete,Ie=!ge,Ie&&!pe&&(pe=!0))}function Zt(){X=!0}function rn(){X=!1}return T={computeAndSetLiveDelay:function(pt,Ce){let et,yt,tt;const zt=!isNaN(pt)&&isFinite(pt)?pt:NaN;let Jt=H.getSuggestedPresentationDelay();const kn=C.getServiceDescriptionSettings();return et=isNaN(Ae.get().streaming.delay.liveDelay)?Ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(Ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(zt)?kn&&!isNaN(kn.liveDelay)&&kn.liveDelay>0?kn.liveDelay:Ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Jt!==null&&!isNaN(Jt)&&Jt>0?Jt:isNaN(zt)?Ce&&!isNaN(Ce.minBufferTime)?4*Ce.minBufferTime:4*G.manifestInfo.minBufferTime:4*zt:zt*Ae.get().streaming.delay.liveDelayFragmentCount:Ae.get().streaming.delay.liveDelay,tt=H.getAvailabilityStartTime(),tt!==null&&(he=tt),yt=Ce&&Ce.dvrWindowSize>0?Math.min(et,Ce.dvrWindowSize):et,N=yt,z=yt,yt},getAvailabilityStartTime:function(){return he},getBufferLevel:function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ce=null;return k.getActiveStreamProcessors().forEach(et=>{if(!pt||pt.length===0||pt.indexOf(et.getType())===-1){const yt=et.getBufferLevel();Ce=Ce===null?yt:Math.min(Ce,yt)}}),Ce},getCurrentLiveLatency:function(){if(!re||isNaN(he))return NaN;let pt=ae();if(isNaN(pt)||pt===0)return 0;const Ce=new Date().getTime()+1e3*W.getClientTimeOffset();return Math.max(((Ce-he-1e3*pt)/1e3).toFixed(3),0)},getEnded:xe,getInitialCatchupModeActivated:function(){return pe},getIsDynamic:je,getIsManifestUpdateInProgress:function(){return X},getLiveDelay:function(){return N},getLowLatencyModeEnabled:function(){return Ie},getOriginalLiveDelay:function(){return z},getPlaybackRate:ke,getPlaybackStalled:function(){return j},getPlayedRanges:function(){return G&&x?x.getPlayedRanges():null},getStreamController:function(){return k},getStreamEndTime:Me,getTime:ae,getTimeToStreamEnd:Se,initialize:function(pt,Ce){G=pt,Ce!==!0&&(x.addEventListener("canplay",qt),x.addEventListener("canplaythrough",Yt),x.addEventListener("play",Nn),x.addEventListener("waiting",Ft),x.addEventListener("playing",gn),x.addEventListener("pause",Sn),x.addEventListener("error",ln),x.addEventListener("seeking",wn),x.addEventListener("seeked",On),x.addEventListener("timeupdate",We),x.addEventListener("progress",ht),x.addEventListener("ratechange",ct),x.addEventListener("loadedmetadata",_t),x.addEventListener("loadeddata",Gt),x.addEventListener("stalled",Wt),x.addEventListener("ended",In),x.addEventListener("volumechange",mt),re=G.manifestInfo.isDynamic,j=!1,V=!1,b.on(D.default.DATA_UPDATE_COMPLETED,bt,T),b.on(D.default.MANIFEST_UPDATED,Zt,T),b.on(D.default.STREAMS_COMPOSED,rn,T),b.on(te.default.PLAYBACK_ENDED,Qt,T,{priority:oe.default.EVENT_PRIORITY_HIGH}),b.on(te.default.STREAM_INITIALIZING,rt,T),b.on(te.default.REPRESENTATION_SWITCH,Ct,T),b.on(te.default.BUFFER_LEVEL_STATE_CHANGED,mn,T),b.on(te.default.DYNAMIC_TO_STATIC,en,T),le&&(le=!1,Fe()))},isPaused:me,isProgressing:function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;return new Promise(Ce=>{let et=-1,yt=null;const tt=Jt=>{clearTimeout(yt),yt=null,b.off(te.default.PLAYBACK_TIME_UPDATED,zt,T),Ce(Jt)},zt=Jt=>{et<0?et=Jt.time:Jt.time>et+.1&&tt(!0)};yt=setTimeout(()=>{tt(!1)},pt),b.on(te.default.PLAYBACK_TIME_UPDATED,zt,T)})},isSeeking:ye,isStalled:fe,pause:Z,play:Fe,reset:be,seek:ne,seekToCurrentLive:function(){let pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ce=arguments.length>1&&arguments[1]!==void 0&&arguments[1],et=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const yt=we();yt!==0&&ne(yt-N,pt,Ce,et)},seekToOriginalLive:function(){let pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ce=arguments.length>1&&arguments[1]!==void 0&&arguments[1],et=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const yt=we();yt!==0&&(N=z,ne(yt-N,pt,Ce,et))},setConfig:function(pt){pt&&(pt.streamController&&(k=pt.streamController),pt.serviceDescriptionController&&(C=pt.serviceDescriptionController),pt.dashMetrics&&($=pt.dashMetrics),pt.adapter&&(H=pt.adapter),pt.videoModel&&(x=pt.videoModel),pt.timelineConverter&&(W=pt.timelineConverter),pt.settings&&(Ae=pt.settings))},updateCurrentTime:Ge},S=(0,Le.default)(_).getInstance().getLogger(T),be(),T}$e.__dashjs_factory_name="PlaybackController";var Ue=ve.default.getSingletonFactory($e),Re=t(7568);class Xe{constructor(b){this.action=Xe.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=b||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===Re.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(b){this.type=b&&b.init?Re.HTTPRequest.INIT_SEGMENT_TYPE:Re.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=b&&b.url?b.url:null,this.range=b&&b.range?b.range.start+"-"+b.range.end:null,this.mediaType=b&&b.mediaType?b.mediaType:null,this.representation=b&&b.representation?b.representation:null}}Xe.ACTION_DOWNLOAD="download",Xe.ACTION_COMPLETE="complete";var Ye=Xe;const Ze="loading",Ne="executed",ze="failed";function st(_){const b=(_=_||{}).eventBus,T=_.events,S=_.dashMetrics,k=_.fragmentLoader,C=_.debug,$=_.streamInfo,H=_.type;let x,W,Y,N;function z(V){return!!V&&function(j){let X=!1;return j.some(pe=>{if(Ae=V,be=pe,!isNaN(Ae.index)&&Ae.startTime===be.startTime&&Ae.adaptationIndex===be.adaptationIndex&&Ae.type===be.type||function(Se,Me){return Se.representation.id===Me.representation.id}(V,pe)||function(Se,Me){return Se.action===Ye.ACTION_COMPLETE&&Se.action===Me.action}(V,pe))return X=!0,X;var Ae,be}),X}(Y)}function G(V){return isNaN(V.duration)?.25:Math.min(V.duration/8,.5)}function re(V){Y=Y.filter(j=>{const X=G(j);return isNaN(j.startTime)||V!==void 0&&j.startTime>=V-X})}function le(V,j){j<=V+.5||(Y=Y.filter(X=>{const pe=G(X);return isNaN(X.startTime)||X.startTime>=j-pe||isNaN(X.duration)||X.startTime+X.duration<=V+pe}))}function de(V,j,X){for(let pe=V.length-1;pe>=0;pe--){const Ae=V[pe],be=Ae.startTime,Se=be+Ae.duration;if(X=isNaN(X)?G(Ae):X,!isNaN(be)&&!isNaN(Se)&&j+X>=be&&j-X<Se||isNaN(be)&&isNaN(j))return Ae}return null}function se(V,j){S.addSchedulingInfo(V,j),S.addRequestsQueue(V.mediaType,N,Y)}function he(V){V.sender===k&&(N.splice(N.indexOf(V.request),1),V.response&&!V.error&&Y.push(V.request),se(V.request,V.error?ze:Ne),b.trigger(T.FRAGMENT_LOADING_COMPLETED,{request:V.request,response:V.response,error:V.error,sender:this},{streamId:$.id,mediaType:H}))}function ge(V){V.sender===k&&b.trigger(T.FRAGMENT_LOADING_PROGRESS,{request:V.request,response:V.response,error:V.error,sender:this},{streamId:$.id,mediaType:H})}function Ie(V){V.sender===k&&b.trigger(T.FRAGMENT_LOADING_ABANDONED,{request:V.request},{streamId:$.id,mediaType:H})}function ee(){Y=[],N=[],k&&k.resetInitialSettings()}return x={abortRequests:function(){W.debug("abort requests"),k.abort(),N=[]},executeRequest:function(V){V.action===Ye.ACTION_DOWNLOAD?(se(V,Ze),N.push(V),function(j){b.trigger(T.FRAGMENT_LOADING_STARTED,{request:j},{streamId:$.id,mediaType:H}),k.load(j)}(V)):W.warn("Unknown request action.")},getRequests:function(V){const j=V?V.state instanceof Array?V.state:[V.state]:[];let X=[];return j.forEach(pe=>{const Ae=function(be){let Se;switch(be){case Ze:Se=N;break;case Ne:Se=Y;break;default:Se=[]}return Se}(pe);X=X.concat(function(be,Se){return Se.hasOwnProperty("time")?[de(be,Se.time,Se.threshold)]:be.filter(Me=>{for(const Fe in Se)if(Fe!=="state"&&Se.hasOwnProperty(Fe)&&Me[Fe]!=Se[Fe])return!1;return!0})}(Ae,V))}),X},getStreamId:function(){return $.id},getType:function(){return H},isFragmentLoaded:z,isFragmentLoadedOrPending:function(V){let j,X=!1,pe=0;if(X=z(V),!X)for(pe=0;pe<N.length;pe++)j=N[pe],V.url===j.url&&V.startTime===j.startTime&&(X=!0);return X},removeExecutedRequestsAfterTime:function(V){Y=Y.filter(j=>isNaN(j.startTime)||V!==void 0&&j.startTime<V)},removeExecutedRequestsBeforeTime:re,reset:function(){b.off(T.LOADING_COMPLETED,he,this),b.off(T.LOADING_DATA_PROGRESS,ge,this),b.off(T.LOADING_ABANDONED,Ie,this),k&&k.reset(),ee()},resetInitialSettings:ee,syncExecutedRequestsWithBufferedRange:function(V,j){if(!V||V.length===0)return void re();let X=0;for(let pe=0,Ae=V.length;pe<Ae;pe++)le(X,V.start(pe)),X=V.end(pe);j>0&&le(X,j)}},W=C.getLogger(x),ee(),b.on(T.LOADING_COMPLETED,he,x),b.on(T.LOADING_DATA_PROGRESS,ge,x),b.on(T.LOADING_ABANDONED,Ie,x),x}st.__dashjs_factory_name="FragmentModel";const Rt=ve.default.getClassFactory(st);Rt.FRAGMENT_MODEL_LOADING=Ze,Rt.FRAGMENT_MODEL_EXECUTED=Ne,Rt.FRAGMENT_MODEL_CANCELED="canceled",Rt.FRAGMENT_MODEL_FAILED=ze,ve.default.updateClassFactory(st.__dashjs_factory_name,Rt);var jt=Rt,Pe=t(1944),Oe=t(8748);class gt extends Oe.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var Q=new gt,J=t(8261);function F(_){const b=this.context,T=(0,J.default)(b).getInstance(),S=_.textController,k=_.eventBus;let C,$,H,x,W,Y,N=[],z=[],G=!1,re=_.mediaSource,le=null;function de(be){return be.mimeType+';codecs="'+be.codecs+'"'}function se(be){return x=S.getTextSourceBuffer(be),Promise.resolve()}function he(){if(typeof x.addEventListener=="function")try{x.addEventListener("updateend",X,!1),x.addEventListener("error",pe,!1),x.addEventListener("abort",pe,!1)}catch{Y=setInterval(X,50)}else Y=setInterval(X,50)}function ge(){try{typeof x.removeEventListener=="function"&&(x.removeEventListener("updateend",X,!1),x.removeEventListener("error",pe,!1),x.removeEventListener("abort",pe,!1)),clearInterval(Y)}catch(be){H.error(be)}}function Ie(be){return new Promise(Se=>{x&&T.get().streaming.buffer.useAppendWindow?Ae(()=>{try{if(!x)return void Se();let Me=re.duration,Fe=0;be&&!isNaN(be.start)&&!isNaN(be.duration)&&isFinite(be.duration)&&(Me=be.start+be.duration),be&&!isNaN(be.start)&&(Fe=be.start),x.appendWindowEnd===Me&&x.appendWindowStart===Fe||(x.appendWindowStart=0,x.appendWindowEnd=Me+.01,x.appendWindowStart=Math.max(Fe-.1,0),H.debug(`Updated append window for ${W.type}. Set start to ${x.appendWindowStart} and end to ${x.appendWindowEnd}`)),Se()}catch{H.warn("Failed to set append window"),Se()}}):Se()})}function ee(be){return new Promise(Se=>{x?Ae(()=>{try{x.timestampOffset===be||isNaN(be)||(x.timestampOffset=be,H.debug(`Set MSE timestamp offset to ${be}`)),Se()}catch{Se()}}):Se()})}function V(){if(!G&&z.length>0){G=!0;const be=z[0];z.splice(0,1);const Se=function(){G=!1,z.length>0&&V.call(this),be&&be.data&&be.data.segmentType&&be.data.segmentType!==Re.HTTPRequest.INIT_SEGMENT_TYPE&&delete be.data.bytes,be.promise.resolve({chunk:be.data})};try{if(le=be.request,be.data.bytes.byteLength===0)Se.call(this);else{try{H.debug(`Appending ${be.data.segmentType} from period ${be.data.streamId} to buffer. Request URL: ${be.request.url}, Representation: ID: ${be.data.representation.id}, bitrate: ${be.data.representation.bitrateInKbit}`)}catch{}x.appendBuffer?x.appendBuffer(be.data.bytes):x.append(be.data.bytes,be.data),Ae(Se.bind(this))}}catch(Me){H.fatal('SourceBuffer append failed "'+Me+'"'),z.length>0?V():G=!1,delete be.data.bytes,be.promise.reject({chunk:be.data,error:new Pe.default(Me.code,Me.message)})}}}function j(){N.length>0&&!x.updating&&(N.shift()(),j())}function X(){x.updating||j()}function pe(be){const Se=be.target||{};(function(Me,Fe){let Z=Fe||{};k.trigger(Me,Z,{streamId:W.streamInfo.id,mediaType:$})})(D.default.SOURCE_BUFFER_ERROR,{error:Se,lastRequestAppended:le})}function Ae(be){try{N.push(be),x.updating||j()}catch(Se){H.error(Se)}}return C={abort:function(){return new Promise(be=>{try{z=[],re.readyState==="open"?Ae(()=>{try{x&&x.abort(),be()}catch{be()}}):(x&&x.setTextTrack&&re.readyState==="ended"&&x.abort(),be())}catch{be()}})},abortBeforeAppend:function(){return new Promise(be=>{Ae(()=>{const Se=x.appendWindowStart,Me=x.appendWindowEnd;x&&(x.abort(),x.appendWindowStart=Se,x.appendWindowEnd=Me),be()})})},append:function(be){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((Me,Fe)=>{be?(z.push({data:be,promise:{resolve:Me,reject:Fe},request:Se}),Ae(V.bind(this))):Fe({chunk:be,error:new Pe.default(Q.APPEND_ERROR_CODE,Q.APPEND_ERROR_MESSAGE)})})},changeType:function(be){const Se=de(be);return new Promise(Me=>{Ae(()=>{x.changeType&&(H.debug(`Changing SourceBuffer codec to ${Se}`),x.changeType(Se)),Me()})})},getAllBufferRanges:function(){try{return x.buffered}catch(be){return H.error("getAllBufferRanges exception: "+be.message),null}},getBuffer:function(){return x},getType:function(){return $},initializeForFirstUse:function(be,Se){W=be;const Me=be.streamInfo;$=W.type;const Fe=Se?de(Se):be.codec;try{if(Fe.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return se(Me);x=re.addSourceBuffer(Fe),he();const Z=[];return Z.push(Ie(W.streamInfo)),Se&&Se.mseTimeOffset!==void 0&&Z.push(ee(Se.mseTimeOffset)),Promise.all(Z)}catch(Z){return W.type==L.default.TEXT&&!W.isFragmented||Fe.indexOf('codecs="stpp')!==-1||Fe.indexOf('codecs="vtt')!==-1||Fe.indexOf("text/vtt")!==-1?se(Me):Promise.reject(Z)}},initializeForStreamSwitch:function(be,Se,Me){W=be,$=W.type,function(Fe){x=Fe.getBuffer()}(Me),he()},remove:function(be){return new Promise((Se,Me)=>{const Fe=be.start,Z=be.end;Fe>=0&&Z>Fe?Ae(function(){try{x.remove(Fe,Z),Ae(function(){Se({from:Fe,to:Z,unintended:!1}),be.resolve&&be.resolve()})}catch(ne){Me({from:Fe,to:Z,unintended:!1,error:new Pe.default(Q.REMOVE_ERROR_CODE,Q.REMOVE_ERROR_MESSAGE)}),be.reject&&be.reject(ne)}}):Se()})},removeEventListeners:ge,reset:function(){if(x){try{N=[],ge(),G=!1,z=[],x.getClassName&&x.getClassName()==="TextSourceBuffer"||(H.debug("Removing sourcebuffer from media source"),re.removeSourceBuffer(x))}catch{}x=null}le=null},updateAppendWindow:Ie,updateTimestampOffset:ee},H=(0,Le.default)(b).getInstance().getLogger(C),C}F.__dashjs_factory_name="SourceBufferSink";var K=ve.default.getClassFactory(F);function Ee(_){const b=this.context;let T,S,k,C=[],$=_;function H(x,W){return C=C.filter(Y=>!((isNaN(W)||Y.start<W)&&(isNaN(x)||Y.end>x))),Promise.resolve()}return T={getAllBufferRanges:function(){let x=[];for(let Y=0;Y<C.length;Y++){let N=C[Y];x.length===0||N.start>x[x.length-1].end?x.push({start:N.start,end:N.end}):x[x.length-1].end=N.end}const W={start:function(Y){return x[Y].start},end:function(Y){return x[Y].end}};return Object.defineProperty(W,"length",{get:function(){return x.length}}),W},append:function(x){return x.segmentType!=="InitializationSegment"?(C.push(x),C.sort(function(W,Y){return W.start-Y.start}),k=null):k=x,S.debug("PreBufferSink appended chunk s: "+x.start+"; e: "+x.end),$&&$({chunk:x}),Promise.resolve()},remove:H,abort:function(){return Promise.resolve()},discharge:function(x,W){const Y=function(N,z){return C.filter(G=>(isNaN(z)||G.start<z)&&(isNaN(N)||G.end>N))}(x,W);return k&&(Y.push(k),k=null),H(x,W),Y},reset:function(){C=[],k=null,$=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(x){x()},getBuffer:function(){return this}},S=(0,Le.default)(b).getInstance().getLogger(T),T}Ee.__dashjs_factory_name="PreBufferSink";var ce=ve.default.getClassFactory(Ee);function He(){let _={};return{save:function(b){const T=b.streamId,S=b.representation.id;_[T]=_[T]||{},_[T][S]=b},extract:function(b,T){return _&&_[b]&&_[b][T]?_[b][T]:null},reset:function(){_={}}}}He.__dashjs_factory_name="InitCache";var ut=ve.default.getSingletonFactory(He);const Ve=.01,Je="BufferController";function Ke(_){const b=(_=_||{}).capabilities,T=this.context,S=(0,oe.default)(T).getInstance(),k=_.fragmentModel,C=_.playbackController,$=_.representationController,H=_.settings,x=_.streamInfo,W=_.textController,Y=_.type;let N,z,G,re,le,de,se,he,ge,Ie,ee,V,j,X,pe,Ae,be,Se,Me,Fe,Z;function ne(rt){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((Zt,rn)=>{de=rt,ge&&Ct&&typeof ge.discharge=="function"?(Ie=ge,we(Ct).then(()=>{Zt()}).catch(pt=>{rn(pt)})):Zt()})}function we(rt){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Zt=arguments.length>2?arguments[2]:void 0;return new Promise((rn,pt)=>{Se&&rt?de?(ee=!1,function(Ce,et,yt){return new Promise(tt=>{ge=K(T).create({mediaSource:de,textController:W,eventBus:S}),function(zt,Jt,kn){const jn=$.getCurrentRepresentation();return Jt&&Jt[Y]&&(Y===L.default.VIDEO||Y===L.default.AUDIO)?function(xn,Tr,zr,ui){ge.initializeForStreamSwitch(xn,Tr,zr[Y]);const Gi=[];return Gi.push(ge.abortBeforeAppend()),Gi.push(ct()),Gi.push(xe(Tr,ui)),Tr&&Tr.mseTimeOffset!==void 0&&Gi.push(ht(Tr)),Promise.allSettled(Gi)}(zt,jn,Jt,kn):function(xn,Tr){return ge.initializeForFirstUse(xn,Tr)}(zt,jn)}(Ce,et,yt).then(()=>ht($.getCurrentRepresentation())).then(()=>{tt(ge)}).catch(zt=>{z.warn("Caught error on create SourceBuffer: "+zt),tt(ge)})})}(rt,Ct,Zt).then(Ce=>{rn(Ce)}).catch(Ce=>{pt(Ce)})):(ee=!0,function(){return new Promise((Ce,et)=>{ge=ce(T).create(fe.bind(this)),ht($.getCurrentRepresentation()).then(()=>{Ce(ge)}).catch(()=>{et()})})}().then(Ce=>{rn(Ce)}).catch(Ce=>{pt(Ce)})):rn(null)})}function _e(rt){H.get().streaming.cacheInitSegments&&(z.info("Init fragment finished loading saving to",Y+"'s init cache"),Se.save(rt.chunk)),z.debug(`Appending init fragment for type ${Y}, representationId ${rt.chunk.representation.id} and bandwidth ${rt.chunk.representation.bandwidth}`),me(rt.chunk)}function ae(rt){me(rt.chunk,rt.request)}function me(rt){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ge&&(ge.append(rt,Ct).then(Zt=>{fe(Zt)}).catch(Zt=>{fe(Zt)}),rt.representation.mediaInfo.type===L.default.VIDEO&&en(D.default.VIDEO_CHUNK_RECEIVED,{chunk:rt}))}function ye(rt){if(rt&&rt.length>0)for(let Ct=0,Zt=rt.length;Ct<Zt;Ct++)z.debug("Buffered range: "+rt.start(Ct)+" - "+rt.end(Ct)+", currentTime = ",C.getTime())}function fe(rt){if(rt.error)return rt.error.code===22&&function(){if(be=!0,le=.8*mt(),z.warn("Quota exceeded, Critical Buffer: "+le),le>0){const rn=Math.max(.2*le,1),pt=le-rn,Ce=Math.min(H.get().streaming.buffer.bufferTimeAtTopQuality,.9*pt),et=Math.min(H.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*pt),yt={streaming:{buffer:{bufferToKeep:parseFloat(rn.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Ce.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(et.toFixed(5))}}};H.update(yt)}}(),void(rt.error.code!==22&&ln()||(z.warn("Clearing playback buffer to overcome quota exceed situation"),en(D.default.QUOTA_EXCEEDED,{criticalBufferLevel:le,quotaExceededTime:rt.chunk.start}),wn(Sn())));if(!ge||(Yt(),be=!1,X=rt.chunk,!X||!X.endFragment))return;X&&!isNaN(X.index)&&(se=Math.max(X.index,se),mn());const Ct=ge.getAllBufferRanges();X.segmentType===Re.HTTPRequest.MEDIA_SEGMENT_TYPE&&(ye(Ct),nt(),function(){if(isNaN(Z)||ee)return;if(Y!==L.default.AUDIO&&Y!==L.default.VIDEO)return void(Z=NaN);const rn=C.getTime(),pt=qt(rn,0),Ce=qt(Z,0);if(pt&&Ce&&pt.start===Ce.start)return void(Z=NaN);const et=$.getCurrentRepresentation().segmentDuration,yt=qt(Z,et);yt&&(H.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(rn-Z)>et?Z<=yt.end&&C.seek(Math.max(Z,yt.start),!1,!0):rn<yt.start&&C.seek(yt.start,!1,!0))}());let Zt=!1;V&&(V.indexOf(X)>0&&(Zt=!0),V=null),X&&!Zt&&en(D.default.BYTES_APPENDED_END_FRAGMENT,{startTime:X.start,index:X.index,bufferedRanges:Ct,segmentType:X.segmentType,mediaType:Y,representationId:X.representation.id})}function ke(rt,Ct){const Zt=[];return Zt.push(ht(rt)),Zt.push(ge?ge.abort():Promise.resolve()),Zt.push(xe(rt,Ct)),Promise.allSettled(Zt)}function xe(rt,Ct){return rt&&Ct?rt&&Ct&&rt.mimeType===Ct.mimeType&&rt.codecFamily===Ct.codecFamily?(z.debug(`Switching to new codec ${rt.codecs} without changeType as previous codec ${Ct.codecs} is compatible.`),Promise.resolve()):H.get().streaming.buffer.useChangeType&&b.supportsChangeType()?(z.debug(`Using changeType() to switch from codec ${Ct.codecs} to ${rt.codecs}`),ge.changeType(rt)):(z.debug("changeType() not available"),Promise.resolve()):(z.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve())}function je(){return new Promise((rt,Ct)=>{let Zt=Ge();if(!Zt||Zt.length===0)return nt(),void rt();wn(Zt).then(()=>{rt()}).catch(rn=>{Ct(rn)})})}function Ge(rt){const Ct=[],Zt=ge.getAllBufferRanges();if(!Zt||Zt.length===0)return Ct;if(!rt&&rt!==0||isNaN(rt))Ct.push({start:Zt.start(0),end:Zt.end(Zt.length-1)+.5});else{const rn=function(Ce,et){const yt=H.get().streaming.buffer.bufferToKeep,tt=et.start(0);if(Ce-tt>yt){let zt=Math.max(0,Ce-yt);const Jt=k.getRequests({state:jt.FRAGMENT_MODEL_EXECUTED,time:Ce,threshold:Ve})[0];if(Jt&&(zt=Math.min(Jt.startTime,zt)),zt>0)return{start:tt,end:zt}}return null}(rt,Zt),pt=function(Ce,et){const yt=et.end(et.length-1)+.5,tt=Qt(Ce),zt=x.manifestInfo.duration>=H.get().streaming.buffer.longFormContentDurationThreshold?H.get().streaming.buffer.bufferTimeAtTopQualityLongForm:H.get().streaming.buffer.bufferTimeAtTopQuality;let Jt=isNaN(tt)?Ce:Math.min(tt,Ce+zt);if(Jt>=et.end(et.length-1))return null;const kn=k.getRequests({state:jt.FRAGMENT_MODEL_EXECUTED,time:Ce,threshold:Ve})[0];if(kn&&(Jt=Math.max(kn.startTime+kn.duration,Jt)),H.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let jn=0;jn<et.length;jn++)if(et.start(jn)<=Ce&&Ce<=et.end(jn)&&et.start(jn)<=Jt&&Jt<=et.end(jn)){let xn=Jt;Jt=jn+1<et.length?et.start(jn+1):et.end(jn)+1,z.debug("Buffered range ["+et.start(jn)+", "+et.end(jn)+"] overlaps with targetTime "+Ce+" and range to be pruned ["+xn+", "+yt+"], using ["+Jt+", "+yt+"] instead"+(Jt<yt?"":" (no actual pruning)"));break}}return Jt<et.end(et.length-1)?{start:Jt,end:yt}:null}(rt,Zt);rn&&Ct.push(rn),pt&&Ct.push(pt)}return Ct}function nt(){(!Fe||Y===L.default.TEXT&&W.isTextEnabled())&&Yt()}function ft(){Nn()}function bt(){Nn(),Z=NaN}function qt(rt,Ct){if(!ge)return null;const Zt=ge.getAllBufferRanges();let rn,pt,Ce=0,et=0,yt=null,tt=null,zt=0;const Jt=isNaN(Ct)?.15:Ct;if(Zt!=null){for(pt=0,rn=Zt.length;pt<rn;pt++)if(Ce=Zt.start(pt),et=Zt.end(pt),yt===null)zt=Math.abs(Ce-rt),(rt>=Ce&&rt<et||zt<=Jt)&&(yt=Ce,tt=et);else{if(zt=Ce-tt,!(zt<=Jt))break;tt=et}if(yt!==null)return{start:yt,end:tt}}return null}function Yt(){if(C){let rt=C.getTime()||0;ee&&(rt=isNaN(Z)?0:Z);const Ct=H.get().streaming.gaps.jumpGaps&&!isNaN(H.get().streaming.gaps.smallGapLimit)?H.get().streaming.gaps.smallGapLimit:NaN;re=Math.max(function(Zt,rn){let pt,Ce;return H.get().streaming.gaps.jumpGaps&&(rn=H.get().streaming.gaps.smallGapLimit),pt=qt(Zt,rn),Ce=pt===null?0:pt.end-Zt,Ce}(rt,Ct),0),en(D.default.BUFFER_LEVEL_UPDATED,{mediaType:Y,bufferLevel:re}),Nn()}}function mn(){const rt=se>=he-1,Ct=C.getTimeToStreamEnd(x)-re<1e-5;!rt&&!Ct||G||(In(!0),z.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${x.id} and type ${Y}`))}function Nn(){if(Y!==L.default.AUDIO&&Y!==L.default.VIDEO)return;const rt=C.getLowLatencyModeEnabled()?H.get().streaming.buffer.lowLatencyStallThreshold:H.get().streaming.buffer.stallThreshold;re<=rt&&!G?Ft(O.BUFFER_EMPTY):(G||re>rt)&&Ft(O.BUFFER_LOADED)}function Ft(rt){j===rt||rt===O.BUFFER_EMPTY&&C.getTime()===0||Y===L.default.TEXT&&!W.isTextEnabled()||(j=rt,en(D.default.BUFFER_LEVEL_STATE_CHANGED,{state:rt}),en(rt===O.BUFFER_LOADED?D.default.BUFFER_LOADED:D.default.BUFFER_EMPTY),z.debug(rt===O.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function gn(){ge&&Y!==L.default.TEXT&&(G||wn(Sn()))}function Sn(){const rt=[],Ct=ge.getAllBufferRanges();if(!Ct||Ct.length===0)return rt;const Zt=C.getTime();let rn=Math.max(0,Zt-H.get().streaming.buffer.bufferToKeep);const pt=k.getRequests({state:jt.FRAGMENT_MODEL_EXECUTED,time:Zt,threshold:Ve})[0];if(pt)rn=Math.min(pt.startTime,rn);else if(Zt===0&&C.getIsDynamic())return[];if(Ct.start(0)<=rn){const Ce={start:0,end:rn};for(let et=0;et<Ct.length&&Ct.end(et)<=rn;et++)Ce.end=Ct.end(et);Ce.start<Ce.end&&rt.push(Ce)}return rt}function wn(rt){return new Promise((Ct,Zt)=>{if(!rt||!ge||rt.length===0)return Yt(),void Ct();const rn=[];rt.forEach(pt=>{rn.push(function(Ce){return new Promise((et,yt)=>{Ce.resolve=et,Ce.reject=yt,Me.push(Ce)})}(pt))}),Ae||On(),Promise.all(rn).then(()=>{Ct()}).catch(pt=>{Zt(pt)})})}function On(){try{if(Me.length===0||!ge)return z.debug("Nothing to prune, halt pruning"),Me=[],void(Ae=!1);const rt=ge.getBuffer();if(!rt||!rt.buffered||rt.buffered.length===0)return z.debug("SourceBuffer is empty (or does not exist), halt pruning"),Me=[],void(Ae=!1);const Ct=Me.shift();z.debug(`${Y}: Removing buffer from: ${Ct.start} to ${Ct.end}`),Ae=!0,C.getTime()<Ct.end&&In(!1),ge.remove(Ct).then(Zt=>{We(Zt)}).catch(Zt=>{We(Zt)})}catch{Ae=!1}}function We(rt){z.debug("onRemoved buffer from:",rt.from,"to",rt.to),ge&&(ye(ge.getAllBufferRanges()),Me.length===0&&(Ae=!1,Yt()),rt.unintended&&(z.warn("Detected unintended removal from:",rt.from,"to",rt.to,"setting streamprocessor time to",rt.from),en(D.default.SEEK_TARGET,{time:rt.from})),Ae?On():(Fe?Fe=!1:Yt(),en(D.default.BUFFER_CLEARED,{from:rt.from,to:rt.to,unintended:rt.unintended,hasEnoughSpaceToAppend:ln(),quotaExceeded:be})))}function ht(rt){return new Promise(Ct=>{rt&&rt.mseTimeOffset!==void 0&&ge&&ge.updateTimestampOffset?ge.updateTimestampOffset(rt.mseTimeOffset).then(()=>{Ct()}).catch(()=>{Ct()}):Ct()})}function ct(){return ge&&!G?ge.updateAppendWindow(x):Promise.resolve()}function _t(){pe++,pe*(H.get().streaming.wallclockTimeUpdateInterval/1e3)>=H.get().streaming.buffer.bufferPruningInterval&&(pe=0,gn())}function Gt(){Nn()}function In(rt){G=rt,G?en(D.default.BUFFERING_COMPLETED):he=Number.POSITIVE_INFINITY}function mt(){try{const rt=ge.getAllBufferRanges();let Ct,Zt,rn=0;if(!rt)return rn;for(Zt=0,Ct=rt.length;Zt<Ct;Zt++)rn+=rt.end(Zt)-rt.start(Zt);return rn}catch{return 0}}function Qt(rt){try{let Ct=rt;const Zt=ge.getAllBufferRanges();if(!Zt||Zt.length===0)return NaN;let rn=0;for(;Ct===rt&&rn<Zt.length;){const pt=Zt.start(rn),Ce=Zt.end(rn);Ct>=pt&&Ct<=Ce&&(Ct=Ce),rn+=1}return Ct===rt?NaN:Ct}catch{return NaN}}function ln(){const rt=mt();return isNaN(rt)||rt<le}function en(rt,Ct){let Zt=Ct||{};S.trigger(rt,Zt,{streamId:x.id,mediaType:Y})}function Wt(rt,Ct){if(le=Number.POSITIVE_INFINITY,j=void 0,he=Number.POSITIVE_INFINITY,se=0,X=null,G=!1,Ae=!1,be=!1,re=0,pe=0,Me=[],Z=NaN,ee=!1,ge){let Zt=ge;ge=null,rt||(Ct?Zt.removeEventListeners():Zt.abort().then(()=>{Zt.reset(Ct),Zt=null}))}Fe=!1}return N={appendInitSegmentFromCache:function(rt){const Ct=Se.extract(x.id,rt);return!!Ct&&(z.debug(`Appending init fragment for type ${Y}, representationId ${Ct.representation.id} and bandwidth ${Ct.representation.bandwidth}`),me(Ct),!0)},clearBuffers:wn,createBufferSink:we,dischargePreBuffer:function(){if(ge&&Ie&&typeof Ie.discharge=="function"){const rt=Ie.getAllBufferRanges();if(rt.length>0){let rn="Beginning "+Y+"PreBuffer discharge, adding buffer for:";for(let pt=0;pt<rt.length;pt++)rn+=" start: "+rt.start(pt)+", end: "+rt.end(pt)+";";z.debug(rn)}else z.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");V=[];let Ct=Ie.discharge(),Zt=null;for(let rn=0;rn<Ct.length;rn++){const pt=Ct[rn];if(pt.segmentType!==Re.HTTPRequest.INIT_SEGMENT_TYPE){const Ce=Se.extract(pt.streamId,pt.representation.id);Ce&&Zt!==Ce&&(V.push(Ce),ge.append(Ce),Zt=Ce)}V.push(pt),ge.append(pt)}Ie.reset(),Ie=null}},getAllRangesWithSafetyFactor:Ge,getBuffer:function(){return ge},getBufferControllerType:function(){return Je},getBufferLevel:function(){return re},getContinuousBufferTimeForTargetTime:Qt,getIsBufferingCompleted:function(){return G},getIsPruningInProgress:function(){return Ae},getMediaSource:function(){return de},getRangeAt:qt,getStreamId:function(){return x.id},getType:function(){return Y},hasBufferAtTime:function(rt){try{const Ct=ge.getAllBufferRanges();if(!Ct||Ct.length===0)return!1;let Zt=0;for(;Zt<Ct.length;){const rn=Ct.start(Zt),pt=Ct.end(Zt);if(rt>=rn&&rt<=pt)return!0;Zt+=1}return!1}catch(Ct){return z.error(Ct),!1}},initialize:function(rt){ne(rt),S.on(D.default.INIT_FRAGMENT_LOADED,_e,N),S.on(D.default.MEDIA_FRAGMENT_LOADED,ae,N),S.on(D.default.WALLCLOCK_TIME_UPDATED,_t,N),S.on(te.default.PLAYBACK_PLAYING,bt,N),S.on(te.default.PLAYBACK_PROGRESS,nt,N),S.on(te.default.PLAYBACK_TIME_UPDATED,nt,N),S.on(te.default.PLAYBACK_RATE_CHANGED,Gt,N),S.on(te.default.PLAYBACK_STALLED,ft,N)},prepareForAbandonQualitySwitch:function(rt,Ct){return ke(rt,Ct)},prepareForDefaultQualitySwitch:function(rt,Ct){return ke(rt,Ct)},prepareForFastQualitySwitch:function(rt,Ct){return ke(rt,Ct)},prepareForForceReplacementQualitySwitch:function(rt,Ct){return new Promise(Zt=>{const rn=[];rn.push(ge.abort()),rn.push(ct()),rn.push(je()),rn.push(ht(rt)),rn.push(xe(rt,Ct)),Promise.allSettled(rn).then(()=>{In(!1),Zt()})})},prepareForNonReplacementTrackSwitch:function(rt,Ct){return new Promise(Zt=>{const rn=[];rn.push(ct()),rn.push(xe(rt,Ct)),Promise.allSettled(rn).then(()=>{Zt()})})},prepareForPlaybackSeek:function(){return G&&In(!1),ge.abort()},prepareForReplacementTrackSwitch:function(rt,Ct){return new Promise(Zt=>{const rn=[];rn.push(ge.abort()),rn.push(ct()),rn.push(xe(rt,Ct)),rn.push(je()),rn.push(ht(rt)),Promise.allSettled(rn).then(()=>{In(!1),Zt()})})},pruneAllSafely:je,pruneBuffer:gn,reset:function(rt,Ct){S.off(D.default.INIT_FRAGMENT_LOADED,_e,this),S.off(D.default.MEDIA_FRAGMENT_LOADED,ae,this),S.off(D.default.WALLCLOCK_TIME_UPDATED,_t,this),S.off(te.default.PLAYBACK_PLAYING,bt,this),S.off(te.default.PLAYBACK_PROGRESS,nt,this),S.off(te.default.PLAYBACK_TIME_UPDATED,nt,this),S.off(te.default.PLAYBACK_RATE_CHANGED,Gt,this),S.off(te.default.PLAYBACK_STALLED,ft,this),Wt(rt,Ct)},segmentRequestingCompleted:function(rt){isNaN(rt)||(he=rt,mn())},setIsBufferingCompleted:In,setMediaSource:ne,setSeekTarget:function(rt){Z=rt},updateAppendWindow:ct,updateBufferTimestampOffset:ht},z=(0,Le.default)(T).getInstance().getLogger(N),Se=ut(T).getInstance(),Wt(),N}Ke.__dashjs_factory_name=Je;var it=ve.default.getClassFactory(Ke);const Et="NotFragmentedTextBufferController";function ot(_){_=_||{};const b=this.context,T=(0,oe.default)(b).getInstance(),S=_.textController,k=_.errHandler,C=_.streamInfo,$=_.type;let H,x,W,Y,N,z;function G(de){Y=de}function re(de){x!==de&&(x=de,x&&function(se){let he={};T.trigger(se,he,{streamId:C.id,mediaType:$})}(D.default.BUFFERING_COMPLETED))}function le(de){de.chunk.bytes&&!x&&(z.save(de.chunk),N.append(de.chunk),re(!0))}return H={initialize:function(de){G(de)},getStreamId:function(){return C.id},getType:function(){return $},getBufferControllerType:function(){return Et},createBufferSink:function(de){return new Promise((se,he)=>{try{N=K(b).create({mediaSource:Y,textController:S,eventBus:T}),N.initializeForFirstUse(de),W||(N.getBuffer()&&typeof N.getBuffer().initialize=="function"&&N.getBuffer().initialize(),W=!0),se(N)}catch(ge){k.error(new Pe.default(Q.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Q.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+$)),he(ge)}})},dischargePreBuffer:function(){},getBuffer:function(){return N},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:G,getMediaSource:function(){return Y},appendInitSegmentFromCache:function(de){return z.extract(C.id,de)!==null},getIsBufferingCompleted:function(){return x},setIsBufferingCompleted:re,getIsPruningInProgress:function(){return!1},reset:function(de){T.off(D.default.INIT_FRAGMENT_LOADED,le,H),!de&&N&&(N.abort(),N.reset(),N=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return x=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},W=!1,Y=null,x=!1,z=ut(b).getInstance(),T.on(D.default.INIT_FRAGMENT_LOADED,le,H),H}ot.__dashjs_factory_name=Et;var xt=ve.default.getClassFactory(ot);function En(_){_=_||{};const b=this.context,T=(0,oe.default)(b).getInstance(),S=_.dashMetrics,k=_.mediaPlayerModel,C=_.fragmentModel,$=_.abrController,H=_.playbackController,x=_.textController,W=_.type,Y=_.bufferController,N=_.representationController,z=_.settings;let G,re,le,de,se,he,ge,Ie,ee,V,j,X;function pe(){j=!0}function Ae(){j=!1}function be(ye){if(Y.getIsBufferingCompleted())return;Se();const fe=isNaN(ye)?0:ye;se=setTimeout(Me,fe)}function Se(){se&&(clearTimeout(se),se=null)}function Me(){try{if(function(){try{return W===L.default.TEXT&&!x.isTextEnabled()||H.isPaused()&&(!H.getStreamController().getInitialPlayback()||!H.getStreamController().getAutoPlay())&&!z.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void Se();if(function(){try{return!!j&&N.getCurrentRepresentation()&&(Ie==null||ee||function(){const ye=N.getCurrentRepresentation();if(!W||!ye)return!0;let fe=ye&&ye.segmentDuration&&!isNaN(ye.segmentDuration)?ye.segmentDuration:0;const ke=S.getCurrentBufferLevel(W),xe=Fe();return(xe<=fe||H.getLowLatencyModeEnabled()||W===L.default.AUDIO&&he)&&(fe=0),ke+fe<xe}())}catch{return!1}}()){let ye=!1;X&&(ye=$.checkPlaybackQuality(W,re.id)),ye||function(){const fe=N.getCurrentRepresentation();V||fe.id!==Ie||ee?(ee?(le.debug("Switch track for "+W+", representation id = "+fe.id),ee=!1):le.debug("Quality has changed, get init request for representationid = "+fe.id),T.trigger(D.default.INIT_FRAGMENT_NEEDED,{representationId:fe.id,sender:G},{streamId:re.id,mediaType:W}),X=!1,V=!1):(le.debug(`Media segment needed for ${W} and stream id ${re.id}`),T.trigger(D.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:re.id,mediaType:W}),X=!0)}()}else be(H.getLowLatencyModeEnabled()?z.get().streaming.scheduling.lowLatencyTimeout:z.get().streaming.scheduling.defaultTimeout)}catch{be(H.getLowLatencyModeEnabled()?z.get().streaming.scheduling.lowLatencyTimeout:z.get().streaming.scheduling.defaultTimeout)}}function Fe(){let ye=NaN;const fe=N.getCurrentRepresentation();return W&&fe&&(ye=W===L.default.TEXT?function(){try{if(x.isTextEnabled()){const ke=N.getCurrentRepresentation();if(isNaN(ke.fragmentDuration)){const xe=S.getCurrentSchedulingInfo(O.SCHEDULING_INFO);return xe?xe.duration:0}return ke.fragmentDuration}return 0}catch{return 0}}():W===L.default.AUDIO&&he?function(){try{const ke=S.getCurrentBufferLevel(L.default.VIDEO),xe=N.getCurrentRepresentation();return isNaN(xe.fragmentDuration)?ke+1:Math.max(ke+1,xe.fragmentDuration)}catch{return 0}}():function(){try{const ke=N.getCurrentRepresentation(),xe=ke.mediaInfo.streamInfo;return $.isPlayingAtTopQuality(ke)?xe.manifestInfo.duration>=z.get().streaming.buffer.longFormContentDurationThreshold?z.get().streaming.buffer.bufferTimeAtTopQualityLongForm:z.get().streaming.buffer.bufferTimeAtTopQuality:k.getBufferTimeDefaultUnadjusted()}catch{return k.getBufferTimeDefaultUnadjusted()}}()),ye}function Z(){ne(!0)}function ne(ye){if(H&&C){const fe=C.getRequests({state:jt.FRAGMENT_MODEL_EXECUTED,time:H.getTime(),threshold:0})[0];fe&&H.getTime()>=fe.startTime&&((!ge.representation||fe.representation.mediaInfo.type===ge.representation.mediaInfo.type&&fe.representation.mediaInfo.index!==ge.representation.mediaInfo.index)&&ye&&(le.debug(`Track change rendered for streamId ${re.id} and type ${W}`),T.trigger(D.default.TRACK_CHANGE_RENDERED,{mediaType:W,oldMediaInfo:ge&&ge.representation&&ge.representation.mediaInfo?ge.representation.mediaInfo:null,newMediaInfo:fe.representation.mediaInfo,streamId:re.id})),ge.representation&&fe.representation.id===ge.representation.id||!ye||(le.debug(`Quality change rendered for streamId ${re.id} and type ${W}`),T.trigger(D.default.QUALITY_CHANGE_RENDERED,{mediaType:W,oldRepresentation:ge.representation?ge.representation:null,newRepresentation:fe.representation,streamId:re.id})),ge.representation=fe.representation)}}function we(){C.abortRequests(),Se()}function _e(){z.get().streaming.scheduling.scheduleWhilePaused||be()}function ae(ye){S.updatePlayListTraceMetrics({playbackspeed:ye.playbackRate.toString()})}function me(){X=!0,de=0,Ie=null,ge={representation:null},ee=!1,V=!1,j=!0}return G={clearScheduleTimer:Se,getBufferTarget:Fe,getPlaybackController:function(){return H},getStreamId:function(){return re.id},getSwitchTrack:function(){return ee},getTimeToLoadDelay:function(){return de},getType:function(){return W},initialize:function(ye){he=ye,T.on(D.default.URL_RESOLUTION_FAILED,we,G),T.on(te.default.PLAYBACK_STARTED,_e,G),T.on(te.default.PLAYBACK_RATE_CHANGED,ae,G),T.on(te.default.PLAYBACK_TIME_UPDATED,Z,G),T.on(te.default.MANAGED_MEDIA_SOURCE_START_STREAMING,pe,G),T.on(te.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Ae,G)},reset:function(){T.off(D.default.URL_RESOLUTION_FAILED,we,G),T.off(te.default.PLAYBACK_STARTED,_e,G),T.off(te.default.PLAYBACK_RATE_CHANGED,ae,G),T.off(te.default.PLAYBACK_TIME_UPDATED,Z,G),T.off(te.default.MANAGED_MEDIA_SOURCE_START_STREAMING,pe,G),T.off(te.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Ae,G),Se(),ne(!1),me(),re=null},setCheckPlaybackQuality:function(ye){X=ye},setInitSegmentRequired:function(ye){V=ye},setLastInitializedRepresentationId:function(ye){Ie=ye},setSwitchTrack:function(ye){ee=ye},setTimeToLoadDelay:function(ye){de=ye},startScheduleTimer:be},le=(0,Le.default)(b).getInstance().getLogger(G),me(),re=_.streamInfo,G}En.__dashjs_factory_name="ScheduleController";var tn=ve.default.getClassFactory(En);const fn=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var Ht=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.media=null,this.mediaRange=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}};function nr(_,b,T,S,k,C,$,H){let x=new Ht;var W;return x.representation=_,x.duration=b,x.presentationStartTime=T,x.mediaStartTime=S,x.availabilityStartTime=k.calcAvailabilityStartTimeFromPresentationTime(C,_,$),x.availabilityEndTime=k.calcAvailabilityEndTimeFromPresentationTime(C+b,_,$),x.wallStartTime=k.calcWallTimeForSegment(x,$),x.replacementNumber=(W=H,x.representation.startNumber+W),x.index=H,x}function vr(_,b,T,S){const k=b.adaptation.period;if(isFinite(k.duration)&&k.start+k.duration<=T.presentationStartTime)return!1;if(S){if(b.availabilityTimeOffset==="INF")return!0;const C=_.getClientReferenceTime();return T.availabilityStartTime.getTime()<=C&&(!isFinite(T.availabilityEndTime)||T.availabilityEndTime.getTime()>=C)}return!0}function Fr(_,b,T,S,k,C){return _&&function($,H,x,W,Y,N){return $.replace(fn,(z,G,re,le)=>{let de,se;switch(G){case void 0:return"$";case"RepresentationID":de=H;break;case"Number":de=x;break;case"SubNumber":de=W;break;case"Bandwidth":de=Y;break;case"Time":if(typeof N=="string")return N;de=N&&Math.round(N);break;default:de=null}if(de==null)return z;switch(le){case void 0:case"d":case"i":case"u":se=de.toString();break;case"o":se=de.toString(8);break;case"x":se=de.toString(16);break;case"X":se=de.toString(16).toUpperCase();break;default:se=de.toString()}const he=parseInt(re,10)||1;return se.padStart(he,"0")})}(_,b,T,S,k,C)}function Lr(_,b,T,S){let k,C,$;k=T.segmentDuration,isNaN(k)&&(k=T.adaptation.period.duration),C=parseFloat((T.adaptation.period.start+S*k).toFixed(5)),$=parseFloat((C+k).toFixed(5));const H=nr(T,k,C,_.calcMediaTimeFromPresentationTime(C,T),_,$,b,S);return vr(_,T,H,b)?H:null}function mr(_,b,T,S,k,C,$,H,x,W){const Y=S/C,N=k/C;let z,G,re;return z=_.calcPresentationTimeFromMediaTime(Y,T),G=z+N,re=nr(T,N,z,Y,_,G,b,x),vr(_,T,re,b)?(re.replacementTime=W||S,re.media=Fr($,void 0,re.replacementNumber,void 0,void 0,re.replacementTime),re.mediaRange=H,re):null}function ki(_){const b=(_=_||{}).eventBus,T=_.events,S=_.abrController,k=_.dashMetrics,C=_.playbackController,$=_.timelineConverter,H=_.type,x=_.streamInfo,W=_.segmentsController,Y=_.isDynamic;let N,z,G;function re(){return H}function le(){return G}function de(){G=null,z=[]}function se(V){return new Promise((j,X)=>{const pe=V.hasInitialization(),Ae=V.hasSegments(),be=[];be.push(W.updateInitData(V,pe)),be.push(W.updateSegmentData(V,Ae)),Promise.all(be).then(Se=>{var Me;Se[0]&&!Se[0].error&&(V=function(Fe,Z){return Z&&!Z.error&&Z.representation?Z.representation:Fe}(V,Se[0])),Se[1]&&!Se[1].error&&(V=function(Fe,Z){if(!Z||Z.error)return;const ne=Z.segments,we=[];let _e,ae,me,ye,fe=0;for(_e=0,ae=ne?ne.length:0;_e<ae;_e++)me=ne[_e],ye=mr($,Y,Fe,me.startTime,me.duration,me.timescale,me.media,me.mediaRange,fe),ye&&(we.push(ye),ye=null,fe++);return we.length>0&&(Fe.segments=we),Fe}(V,Se[1])),V.fragmentDuration=V.segmentDuration?V.segmentDuration:V.segments&&V.segments.length>0?V.segments[0].duration:NaN,(Me=V).mediaFinishedInformation=W.getMediaFinishedInformation(Me),function(Fe){let Z,ne=k.getCurrentManifestUpdate(),we=!1;if(ne){for(let _e=0;_e<ne.representationInfo.length;_e++)if(Z=ne.representationInfo[_e],Z.index===Fe.index&&Z.mediaType===re()){we=!0;break}we||k.addManifestUpdateRepresentationInfo(Fe,re())}}(V),j()}).catch(Se=>{X(Se)})})}function he(V){if(!z||z.length===0)return null;const j=z.filter(X=>X.id===V);return j.length>0?j[0]:null}function ge(V){b.trigger(T.DATA_UPDATE_COMPLETED,{currentRepresentation:G,error:V},{streamId:x.id,mediaType:H})}function Ie(V){G&&G.id===V.id||function(j){(function(){if(!(S&&k&&C&&$))throw new Error(L.default.MISSING_CONFIG_ERROR)})();const X=new Date,pe=1e3*C.getTime();j&&k.addRepresentationSwitch(j.adaptation.type,X,pe,j.id),b.trigger(te.default.REPRESENTATION_SWITCH,{mediaType:H,streamId:x.id,currentRepresentation:j},{streamId:x.id,mediaType:H})}(V),G=V}function ee(V){if(V.newDuration){const j=le();j&&j.adaptation.period&&(j.adaptation.period.duration=V.newDuration)}}return N={getCurrentRepresentation:le,getRepresentationById:he,getStreamId:function(){return x.id},getType:re,prepareQualityChange:function(V){const j=z.filter(X=>X.id===V.id);j.length>0&&Ie(j[0])},reset:function(){b.off(te.default.MANIFEST_VALIDITY_CHANGED,ee,N),de()},updateData:function(V,j,X){return new Promise((pe,Ae)=>{if(z=V,Ie(he(X)),H!==L.default.VIDEO&&H!==L.default.AUDIO&&(H!==L.default.TEXT||!j))return ge(),void pe();const be=[];for(let Se=0,Me=z.length;Se<Me;Se++){const Fe=z[Se];be.push(se(Fe))}Promise.all(be).then(()=>{(function(){S.setPlaybackQuality(H,x,G);const Se=k.getCurrentDVRInfo(H);Se&&k.updateManifestUpdateInfo({latency:Se.range.end-C.getTime()}),ge()})(),pe()}).catch(Se=>{Ae(Se)})})}},de(),b.on(te.default.MANIFEST_VALIDITY_CHANGED,ee,N),N}ki.__dashjs_factory_name="RepresentationController";var $t=ve.default.getClassFactory(ki),Bt=t(656);function Pt(_){const b=(_=_||{}).eventBus,T=_.debug,S=_.urlUtils,k=_.type,C=_.streamInfo,$=_.segmentsController,H=_.timelineConverter,x=_.baseURLController;let W,Y,N,z,G;function re(){return k}function le(){N=null}function de(ee,V,j){const X=x.resolve(j.path);let pe,Ae,be={};return X&&V!==X.url&&S.isRelative(V)?(pe=X.url,Ae=X.serviceLocation,be=X.queryParams,V&&(pe=S.resolve(V,pe))):pe=V,!S.isRelative(pe)&&(ee.url=pe,ee.serviceLocation=Ae,ee.queryParams=be,!0)}function se(ee,V){if(V==null)return null;const j=new Ye,X=V.representation,pe=X.bandwidth,Ae=Fr(V.media,X.id,V.replacementNumber,void 0,pe,V.replacementTime);return j.mediaType=re(),j.bandwidth=X.bandwidth,j.type=Re.HTTPRequest.MEDIA_SEGMENT_TYPE,j.range=V.mediaRange,j.startTime=V.presentationStartTime,j.mediaStartTime=V.mediaStartTime,j.duration=V.duration,j.timescale=X.timescale,j.availabilityStartTime=V.availabilityStartTime,j.availabilityEndTime=V.availabilityEndTime,j.availabilityTimeComplete=X.availabilityTimeComplete,j.wallStartTime=V.wallStartTime,j.index=V.index,j.adaptationIndex=X.adaptation.index,j.representation=X,de(j,Ae,X)?j:void 0}function he(ee,V,j){let X=null;if(!V||!V.segmentInfoType)return X;const pe=$.getSegmentByTime(V,j);return pe&&(N=pe,Y.debug("Index for time "+j+" is "+pe.index),X=se(0,pe)),X}function ge(ee,V,j){let X=null;const pe=$.getSegmentByIndex(V,j,N?N.mediaStartTime:-1);if(pe)X=se(0,pe),N=pe;else{if(z&&!G)return Y.debug(re()+" No segment found at index: "+j+". Wait for next loop"),null;G=!0}return X}function Ie(){Y.debug("Dynamic stream complete"),G=!0}return W={getCurrentIndex:function(){return N?N.index:-1},getInitRequest:function(ee,V){return V?function(j,X,pe){const Ae=new Ye,be=X.adaptation.period,Se=be.start;if(Ae.mediaType=pe,Ae.type=Re.HTTPRequest.INIT_SEGMENT_TYPE,Ae.range=X.range,Ae.availabilityStartTime=H.calcAvailabilityStartTimeFromPresentationTime(Se,X,z),Ae.availabilityEndTime=H.calcAvailabilityEndTimeFromPresentationTime(Se+be.duration,X,z),Ae.representation=X,de(Ae,X.initialization,X))return Ae.url=Fr(Ae.url,void 0,void 0,void 0,X.bandwidth),Ae}(0,V,re()):null},getNextSegmentRequest:function(ee,V){if(!V||!V.segmentInfoType)return null;let j=N?N.index+1:0;return V&&N&&V.endNumber&&N.replacementNumber&&N.replacementNumber>=V.endNumber?(G=!0,null):ge(0,V,j)},getNextSegmentRequestIdempotent:function(ee,V){let j=null,X=N?N.index+1:0;const pe=$.getSegmentByIndex(V,X,N?N.mediaStartTime:-1);return pe?(j=se(0,pe),j):null},getSegmentRequestForTime:he,getStreamId:function(){return C.id},getStreamInfo:function(){return C},getType:re,getValidTimeAheadOfTargetTime:function(ee,V,j,X){try{if(isNaN(ee)||!V||!j)return NaN;if(ee<0&&(ee=0),isNaN(X)&&(X=.5),he(0,j,ee))return ee;if(j.adaptation.period.start+j.adaptation.period.duration<ee)return NaN;const pe=isFinite(j.adaptation.period.duration)?j.adaptation.period.start+j.adaptation.period.duration:ee+30;let Ae=Math.min(ee+X,pe),be=NaN,Se=null;for(;Ae<=pe;){let Me=null;if(Ae<=pe&&(Me=he(0,j,Ae)),Me){be=Ae,Se=Me;break}Ae+=X}if(Se){const Me=Se.startTime+Se.duration;return ee>Se.startTime&&Me-ee>X?ee:!isNaN(Se.startTime)&&ee<Se.startTime&&be>Se.startTime?Se.startTime+.001:Math.min(Me-X,be)}return be}catch{return NaN}},initialize:function(ee){z=ee,G=!1,$.initialize(ee)},isLastSegmentRequested:function(ee,V){return!ee||!N?!1:G?!0:!isFinite(ee.adaptation.period.duration)||N.presentationStartTime+N.duration>V?!1:ee.mediaFinishedInformation&&!isNaN(ee.mediaFinishedInformation.numberOfSegments)&&!isNaN(N.index)&&N.index>=ee.mediaFinishedInformation.numberOfSegments-1&&(!z||ee.segmentInfoType===w.default.SEGMENT_TEMPLATE||z&&ee.segmentInfoType===w.default.SEGMENT_LIST&&ee.adaptation.period.nextPeriodId)?!0:!!(z&&ee.adaptation.period.nextPeriodId&&ee.segmentInfoType===w.default.SEGMENT_TIMELINE&&ee.mediaFinishedInformation&&!isNaN(ee.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&N&&!isNaN(N.mediaStartTime)&&!isNaN(N.duration)&&N.mediaStartTime+N.duration>=ee.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(ee,V){return V&&V.segmentInfoType?ge(0,V,N?N.index:0):null},reset:function(){le(),b.off(te.default.DYNAMIC_TO_STATIC,Ie,W)}},Y=T.getLogger(W),le(),b.on(te.default.DYNAMIC_TO_STATIC,Ie,W),W}Pt.__dashjs_factory_name="DashHandler";var kt=ve.default.getClassFactory(Pt);function an(){let _;const b=/^[a-z][a-z0-9+\-_.]*:/i,T=/^https?:\/\//i,S=/^https:\/\//i,k=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,C=(G,re)=>{try{return new window.URL(G,re).toString()}catch{return G}},$=(G,re)=>{let le=H;if(!re||!Y(G))return G;N(G)&&(le=x),z(G)&&(le=W);const de=le(re),se=de.charAt(de.length-1)!=="/"&&G.charAt(0)!=="/"?"/":"";return[de,G].join(se)};function H(G){const re=G.indexOf("/"),le=G.lastIndexOf("/");return re!==-1?le===re+1?G:(G.indexOf("?")!==-1&&(G=G.substring(0,G.indexOf("?"))),G.substring(0,le+1)):""}function x(G){const re=G.match(k);return re?re[1]:""}function W(G){const re=G.match(b);return re?re[0]:""}function Y(G){return!b.test(G)}function N(G){return Y(G)&&G.charAt(0)==="/"}function z(G){return G.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),_=C}catch{}finally{_=_||$}}(),{parseBaseUrl:H,parseOrigin:x,parseScheme:W,isRelative:Y,isPathAbsolute:N,isSchemeRelative:z,isHTTPURL:function(G){return T.test(G)},isHTTPS:function(G){return S.test(G)},removeHostname:function(G){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(G)[2].substring(1)},resolve:function(G,re){return _(G,re)}}}an.__dashjs_factory_name="DefaultURLUtils";var sn=ve.default.getSingletonFactory(an);function un(){let _,b,T=[];const S=this.context;function k(C,$,H){let x=function(W){let Y;for(Y=0;Y<T.length;Y++)if(T[Y].regex.test(W))return T[Y].utils;return b}(H||$);return x&&typeof x[C]=="function"?x[C]($,H):b[C]($,H)}return b=sn(S).getInstance(),_={registerUrlRegex:function(C,$){T.push({regex:C,utils:$})},parseBaseUrl:function(C){return k("parseBaseUrl",C)},parseOrigin:function(C){return k("parseOrigin",C)},parseScheme:function(C){return k("parseScheme",C)},isRelative:function(C){return k("isRelative",C)},isPathAbsolute:function(C){return k("isPathAbsolute",C)},isSchemeRelative:function(C){return k("isSchemeRelative",C)},isHTTPURL:function(C){return k("isHTTPURL",C)},isHTTPS:function(C){return k("isHTTPS",C)},removeHostname:function(C){return k("removeHostname",C)},resolve:function(C,$){return k("resolve",C,$)}},_}un.__dashjs_factory_name="URLUtils";var hn=ve.default.getSingletonFactory(un);class Ot{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Ot.INITIAL_PLAYOUT_START_REASON="initial_playout",Ot.SEEK_START_REASON="seek",Ot.RESUME_FROM_PAUSE_START_REASON="resume",Ot.METRICS_COLLECTION_START_REASON="metrics_collection_start";class Mt{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function dn(_,b){const T=(_=_||{}).timelineConverter,S=_.dashMetrics;let k;function C(){if(!T)throw new Error(L.default.MISSING_CONFIG_ERROR)}function $(x,W){const Y=x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentTemplate||x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentList,N=Y.SegmentTimeline,z=Y.SegmentURL;let G,re,le,de,se,he,ge,Ie=0,ee=-1;ge=x.timescale,G=N.S;let V=!1;for(le=0,de=G.length;le<de&&!V;le++)for(re=G[le],he=0,re.hasOwnProperty("r")&&(he=re.r),re.hasOwnProperty("t")&&(Ie=re.t),he<0&&(he=H(x,G[le+1],re,ge,Ie/ge)),se=0;se<=he&&!V;se++)ee++,V=W(Ie,Y,z,re,ge,ee,le),V&&(x.segmentDuration=re.d/ge),Ie+=re.d}function H(x,W,Y,N,z){let G;if(W&&W.hasOwnProperty("t"))G=W.t/N;else try{let re=0;if(isNaN(x.adaptation.period.start)||isNaN(x.adaptation.period.duration)||!isFinite(x.adaptation.period.duration)){const le=S.getCurrentDVRInfo();re=isNaN(le.end)?0:le.end}else re=x.adaptation.period.start+x.adaptation.period.duration;G=T.calcMediaTimeFromPresentationTime(re,x),x.segmentDuration=Y.d/N}catch{G=0}return Math.max(Math.ceil((G-z)/(Y.d/N))-1,0)}return k={getSegmentByIndex:function(x,W,Y){if(C(),!x)return null;let N=null,z=!1;return $(x,function(G,re,le,de,se,he,ge){if(z||Y<0){let Ie=re.media,ee=de.mediaRange;return le&&(Ie=le[ge].media||"",ee=le[ge].mediaRange),N=mr(T,b,x,G,de.d,se,Ie,ee,he,de.tManifest),!0}return G>=Y*se-.5*de.d&&(z=!0),!1}),N},getSegmentByTime:function(x,W){if(C(),!x)return null;W===void 0&&(W=null);let Y=null;const N=T.calcMediaTimeFromPresentationTime(W,x);return $(x,function(z,G,re,le,de,se,he){const ge=parseFloat((N*de).toPrecision(15));if(ge<z+le.d&&ge>=z){let Ie=G.media,ee=le.mediaRange;return re&&(Ie=re[he].media||"",ee=re[he].mediaRange),Y=mr(T,b,x,z,le.d,de,Ie,ee,se,le.tManifest),!0}return!1}),Y},getMediaFinishedInformation:function(x){if(!x)return 0;const W=(x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentTemplate||x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentList).SegmentTimeline;let Y,N,z,G,re,le,de,se=0,he=0,ge=0;for(de=x.timescale,Y=W.S,G=Y.length,z=0;z<G;z++)for(N=Y[z],le=0,N.hasOwnProperty("r")&&(le=N.r),N.hasOwnProperty("t")&&(se=N.t,he=se/de),le<0&&(le=H(x,Y[z+1],N,de,he)),re=0;re<=le;re++)ge++,se+=N.d,he=se/de;return{numberOfSegments:ge,mediaTimeOfLastSignaledSegment:he}}},k}Mt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Mt.REBUFFERING_REASON="rebuffering",Mt.USER_REQUEST_STOP_REASON="user_request",Mt.END_OF_PERIOD_STOP_REASON="end_of_period",Mt.END_OF_CONTENT_STOP_REASON="end_of_content",Mt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Mt.FAILURE_STOP_REASON="failure",dn.__dashjs_factory_name="TimelineSegmentsGetter";var ar=ve.default.getClassFactory(dn);function Xt(_,b){const T=(_=_||{}).timelineConverter;let S;function k(){if(!T||!T.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(L.default.MISSING_CONFIG_ERROR)}function C($,H){if(k(),!$)return null;const x=$.adaptation.period.mpd.manifest.Period[$.adaptation.period.index].AdaptationSet[$.adaptation.index].Representation[$.index].SegmentTemplate;H=Math.max(H,0);const W=Lr(T,b,$,H);if(W){if($.endNumber&&W.replacementNumber>$.endNumber)return null;W.replacementTime=Math.round(H*$.segmentDuration*$.timescale,10),W.media=Fr(x.media,void 0,W.replacementNumber,void 0,void 0,W.replacementTime)}return W}return S={getSegmentByIndex:C,getSegmentByTime:function($,H){if(k(),!$)return null;const x=$.segmentDuration;if(isNaN(x))return null;let W=T.calcPeriodRelativeTimeFromMpdRelativeTime($,H);return C($,Math.floor(W/x))},getMediaFinishedInformation:function($){const H={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!$)return H;const x=$.segmentDuration;return isNaN(x)?H.numberOfSegments=1:H.numberOfSegments=Math.ceil($.adaptation.period.duration/x),H}},S}Xt.__dashjs_factory_name="TemplateSegmentsGetter";var Pn=ve.default.getClassFactory(Xt);function Jn(_,b){const T=(_=_||{}).timelineConverter;let S;function k(){if(!T||!T.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(L.default.MISSING_CONFIG_ERROR)}function C($,H){if(k(),!$)return null;const x=$.adaptation.period.mpd.manifest.Period[$.adaptation.period.index].AdaptationSet[$.adaptation.index].Representation[$.index].SegmentList,W=x.SegmentURL.length,Y=$&&!isNaN($.startNumber)?$.startNumber:1,N=Math.max(Y-1,0),z=Math.max(H-N,0);let G=null;if(z<W){const re=x.SegmentURL[z];G=Lr(T,b,$,H),G&&(G.replacementTime=(Y+H-1)*$.segmentDuration,G.media=re.media?re.media:"",G.mediaRange=re.mediaRange,G.indexRange=re.indexRange)}return G}return S={getSegmentByIndex:C,getSegmentByTime:function($,H){if(k(),!$)return null;const x=$.segmentDuration;if(isNaN(x))return null;const W=T.calcPeriodRelativeTimeFromMpdRelativeTime($,H);return C($,Math.floor(W/x))},getMediaFinishedInformation:function($){const H={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!$)return H;const x=$.adaptation.period.mpd.manifest.Period[$.adaptation.period.index].AdaptationSet[$.adaptation.index].Representation[$.index].SegmentList,W=$&&!isNaN($.startNumber)?$.startNumber:1,Y=Math.max(W-1,0);return H.numberOfSegments=Y+x.SegmentURL.length,H}},S}Jn.__dashjs_factory_name="ListSegmentsGetter";var $n=ve.default.getClassFactory(Jn);function Yn(_){const b=(_=_||{}).timelineConverter;let T;function S(){if(!b||!b.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(L.default.MISSING_CONFIG_ERROR)}function k(C,$){if(S(),!C)return null;const H=C.segments?C.segments.length:-1;let x;if($<H&&(x=C.segments[$],x&&x.index===$))return x;for(let W=0;W<H;W++)if(x=C.segments[W],x&&x.index===$)return x;return null}return T={getSegmentByIndex:k,getSegmentByTime:function(C,$){S();const H=function(x,W){if(!x)return-1;const Y=x.segments,N=Y?Y.length:null;let z,G,re,le,de,se=-1;if(Y&&N>0){for(de=0;de<N;de++)if(G=Y[de],re=G.presentationStartTime,le=G.duration,z=le/2,W+z>=re&&W-z<re+le){se=G.index;break}}return se}(C,$);return k(C,H)},getMediaFinishedInformation:function(C){const $={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return C&&C.segments&&($.numberOfSegments=C.segments.length),$}},T}Yn.__dashjs_factory_name="SegmentBaseGetter";var gr=ve.default.getClassFactory(Yn);function Cn(_){_=_||{};const b=this.context,T=_.dashConstants,S=_.type,k=_.segmentBaseController;let C,$;function H(x){return x?x.segments?$[T.SEGMENT_BASE]:$[x.segmentInfoType]:null}return C={initialize:function(x){$[T.SEGMENT_TIMELINE]=ar(b).create(_,x),$[T.SEGMENT_TEMPLATE]=Pn(b).create(_,x),$[T.SEGMENT_LIST]=$n(b).create(_,x),$[T.SEGMENT_BASE]=gr(b).create(_,x)},updateInitData:function(x,W){return W?Promise.resolve():k.getSegmentBaseInitSegment({representation:x,mediaType:S})},updateSegmentData:function(x,W){return W?Promise.resolve():k.getSegmentList({mimeType:x.mimeType,representation:x,mediaType:S})},getSegmentByIndex:function(x,W,Y){const N=H(x);return N?N.getSegmentByIndex(x,W,Y):null},getSegmentByTime:function(x,W){const Y=H(x);return Y?Y.getSegmentByTime(x,W):null},getMediaFinishedInformation:function(x){const W=H(x);return W?W.getMediaFinishedInformation(x):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},$={},C}Cn.__dashjs_factory_name="SegmentsController";var Nt=ve.default.getClassFactory(Cn);function vt(){let _;return _={ntpToUTC:function(b){const T=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(T.getTime()+b).getTime()}},_}vt.__dashjs_factory_name="TimeUtils";var on=ve.default.getSingletonFactory(vt),pn=class{constructor(_){this.newMediaInfo=_.newMediaInfo,this.previouslySelectedRepresentation=_.previouslySelectedRepresentation,this.newRepresentation=_.newRepresentation}};function Hn(_){_=_||{};let b,T,S,k,C,$,H,x,W,Y,N,z,G,re,le,de,se=this.context,he=(0,oe.default)(se).getInstance(),ge=_.abrController,Ie=_.adapter,ee=_.boxParser,V=_.capabilities,j=_.dashMetrics,X=_.errHandler,pe=_.fragmentModel,Ae=_.manifestModel,be=_.mediaController,Se=_.mediaPlayerModel,Me=_.mimeType,Fe=_.playbackController,Z=_.segmentBlacklistController,ne=_.settings,we=_.streamInfo,_e=_.textController,ae=_.timelineConverter,me=_.type;function ye(){return we.id}function fe(){return me}function ke(){x=[],S=null,T=0,le=!1,re=!1,Y=!1,de=!1,Nn()}function xe(tt){return!isNaN(tt)&&!isNaN(we.duration)&&isFinite(we.duration)&&tt>=we.start+we.duration}function je(tt){let zt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(tt.sender){if(Fe.getIsManifestUpdateInProgress())ft();else if((!S.isText||_e.isTextEnabled())&&b&&tt.representationId&&!b.appendInitSegmentFromCache(tt.representationId)){const Jt=N.getCurrentRepresentation();if(Jt.range===0)return void Ge();const kn=k?k.getInitRequest(S,Jt):null;kn?pe.executeRequest(kn):zt&&(z.setInitSegmentRequired(!0),ft())}}}function Ge(tt){let zt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Fe.getIsManifestUpdateInProgress()||b.getIsPruningInProgress())return void ft();let Jt=function(){let kn;if(isNaN(T)||fe()===L.default.TEXT&&!_e.isTextEnabled())return null;if(k){const jn=rt();kn=le?k.getSegmentRequestForTime(S,jn,T):re?k.repeatSegmentRequest(S,jn):k.getNextSegmentRequest(S,jn)}return kn}();Jt?(le=!1,re=!1,function(kn){isNaN(kn.startTime+kn.duration)||(T=kn.startTime+kn.duration),kn.delayLoadingTime=new Date().getTime()+z.getTimeToLoadDelay(),z.setTimeToLoadDelay(0),function(jn){let xn=jn.url;return jn.range&&(xn=xn.concat("_",jn.range)),Z.contains(xn)}(kn)?(H.warn(`Fragment request url ${kn.url} for stream id ${we.id} and media type ${me} is on the ignore list and will be skipped`),ft()):(H.debug(`Next fragment request url for stream id ${we.id} and media type ${me} is ${kn.url} with request range ${kn.range}`),pe.executeRequest(kn))}(Jt)):function(kn){const jn=N.getCurrentRepresentation();try{if(ne.get().streaming.gaps.enableSeekFix&&(le||Fe.getTime()===0)){let xn;if($?$&&jn.segmentInfoType===w.default.SEGMENT_TIMELINE&&(xn=k.getValidTimeAheadOfTargetTime(T,S,jn,ne.get().streaming.gaps.threshold)):(xn=k.getValidTimeAheadOfTargetTime(T,S,jn,ne.get().streaming.gaps.threshold),isNaN(xn)&&T>=jn.adaptation.period.mpd.mediaPresentationDuration-jn.segmentDuration&&(xn=T-.1)),!isNaN(xn)&&xn!==T)return void(Fe.isSeeking()||Fe.getTime()===0?(H.warn(`Adjusting playback time ${xn} because of gap in the manifest. Seeking by ${xn-T}`),Fe.seek(xn,!1,!1)):(H.warn(`Adjusting buffering time ${xn} because of gap in the manifest. Adjusting time by ${xn-T}`),yt(xn),kn&&ft()))}}catch(xn){H.error(xn)}nt()||kn&&ft()}(zt)}function nt(){const tt=N.getCurrentRepresentation(),zt=k.isLastSegmentRequested(tt,T);if(zt){const Jt=k.getCurrentIndex();H.debug(`Segment requesting for stream ${we.id} has finished`),he.trigger(D.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Jt},{streamId:we.id,mediaType:me}),b.segmentRequestingCompleted(Jt),Wt()}return zt}function ft(){z.startScheduleTimer(Fe.getLowLatencyModeEnabled()?ne.get().streaming.scheduling.lowLatencyTimeout:ne.get().streaming.scheduling.defaultTimeout)}function bt(tt){j.addBufferState(me,tt.state,z.getBufferTarget()),tt.state!==O.BUFFER_EMPTY||Fe.isSeeking()||(H.info("Buffer is empty! Stalling!"),j.pushPlayListTraceMetrics(new Date,Mt.REBUFFERING_REASON))}function qt(tt){pe.syncExecutedRequestsWithBufferedRange(b.getBuffer().getAllBufferRanges(),we.duration),tt.quotaExceeded&&tt.from>Fe.getTime()&&yt(tt.from),tt.hasEnoughSpaceToAppend&&tt.quotaExceeded&&z.startScheduleTimer()}function Yt(tt){if(!tt||!tt.lastRequestAppended||!tt.lastRequestAppended.url)return;let zt=tt.lastRequestAppended.url;tt.lastRequestAppended.range&&(zt=zt.concat("_",tt.lastRequestAppended.range)),H.warn(`Blacklisting segment with url ${zt}`),Z.add(zt)}function mn(tt){if(H.debug(`Appended bytes for ${tt.mediaType} and stream id ${tt.streamId}`),tt.segmentType===Re.HTTPRequest.INIT_SEGMENT_TYPE){const zt=tt.representationId;z.setLastInitializedRepresentationId(zt),H.info("["+me+"] lastInitializedRepresentationId changed to "+zt)}W&&W.enabled?ht(W.newRepresentation,W.oldRepresentation):de||z.startScheduleTimer(0)}function Nn(){W={newRepresentation:null,oldRepresentation:null,enabled:!1}}function Ft(tt){return new Promise(zt=>{if(!N)return Promise.resolve();let Jt=null;var kn;Jt=tt.newRepresentation?{selectedRepresentation:(kn=tt).newRepresentation,currentMediaInfo:kn.newMediaInfo}:S!==null&&Ie.areMediaInfosEqual(S,tt.newMediaInfo)?function(xn){return{currentMediaInfo:xn.newMediaInfo,selectedRepresentation:N.getCurrentRepresentation()}}(tt):function(xn){let Tr=NaN;return Tr=!ne.get().streaming.abr.autoSwitchBitrate[xn.newMediaInfo.type]&&xn.previouslySelectedRepresentation?xn.previouslySelectedRepresentation.bitrateInKbit:ge.getInitialBitrateFor(me),{selectedRepresentation:ge.getOptimalRepresentationForBitrate(xn.newMediaInfo,Tr,!1),currentMediaInfo:xn.newMediaInfo}}(tt),gn(Jt.currentMediaInfo),he.trigger();const jn=ge.getPossibleVoRepresentations(S,!1);return N.updateData(jn,S.isFragmented,Jt.selectedRepresentation.id).then(()=>{(function(){const xn=N.getCurrentRepresentation();b.getIsBufferingCompleted()||b.updateBufferTimestampOffset(xn)})(),zt()}).catch(xn=>{H.error(xn),zt()})})}function gn(tt){Ie.areMediaInfosEqual(S,tt)||he.trigger(te.default.NEW_TRACK_SELECTED,{value:tt}),S=tt,ge.handleNewMediaInfo(S),he.trigger(D.default.MEDIAINFO_UPDATED,{mediaType:me,streamId:we.id,currentMediaInfo:S})}function Sn(tt){const zt=tt.newRepresentation,Jt=tt.oldRepresentation;zt&&Jt||H.warn("_handleDifferentSwitchTypes() is missing the target representations"),tt.reason&&tt.reason.forceReplace?function(kn,jn){pe.abortRequests(),he.trigger(D.default.BUFFER_REPLACEMENT_STARTED,{mediaType:me,streamId:we.id},{mediaType:me,streamId:we.id}),z.setCheckPlaybackQuality(!1),b.prepareForForceReplacementQualitySwitch(kn,jn).then(()=>{wn()}).catch(()=>{wn()})}(zt,Jt):tt&&tt.reason&&tt.reason.forceAbandon?function(kn,jn){b.prepareForAbandonQualitySwitch(kn,jn).then(()=>{On()}).catch(()=>{On()})}(zt,Jt):Se.getFastSwitchEnabled()?function(kn,jn){const xn=Fe.getTime();let Tr=1.5*(isNaN(kn.fragmentDuration)?1:kn.fragmentDuration);const zr=pe.getRequests({state:jt.FRAGMENT_MODEL_EXECUTED,time:xn+Tr,threshold:0})[0];if(zr&&!S.isText){const ui=b.getBufferLevel(),Gi=ge.getAbandonmentStateFor(we.id,me);zr.bandwidth<kn.bandwidth&&ui>=Tr&&Gi===O.ALLOW_LOAD?b.prepareForFastQualitySwitch(kn,jn).then(()=>{We(xn,Tr)}).catch(()=>{We(xn,Tr)}):ht(kn,jn)}else ht(kn,jn)}(zt,Jt):ht(zt,Jt),j.pushPlayListTraceMetrics(new Date,Mt.REPRESENTATION_SWITCH_STOP_REASON),j.createPlaylistTraceMetrics(zt.id,1e3*Fe.getTime(),Fe.getPlaybackRate())}function wn(){pt(),Nn(),Y=!1}function On(){pe.abortRequests(),re=!0,z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),Y=!1}function We(tt,zt){pe.abortRequests(),yt(tt+zt),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),Y=!1}function ht(tt,zt){const Jt=pe.getRequests({state:jt.FRAGMENT_MODEL_LOADING});if(Jt&&Jt.length>0)return H.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),W.newRepresentation=tt,W.oldRepresentation=zt,void(W.enabled=!0);b.prepareForDefaultQualitySwitch(tt,zt).then(()=>{ct()}).catch(()=>{ct()})}function ct(){z.setCheckPlaybackQuality(!1),S.segmentAlignment||S.subSegmentAlignment?z.startScheduleTimer():Ce(),Nn(),Y=!1}function _t(tt){H.info("onFragmentLoadingAbandoned request: "+tt.request.url+" has been aborted"),Fe.isSeeking()||z.getSwitchTrack()||Y||(H.info("onFragmentLoadingAbandoned request: "+tt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),tt.request&&tt.request.isInitializationRequest()?z.setInitSegmentRequired(!0):yt(tt.request.startTime+tt.request.duration/2),z.startScheduleTimer(0))}function Gt(tt){H.info("OnFragmentLoadingCompleted for stream id "+we.id+" and media type "+me+" - Url:",tt.request?tt.request.url:"undefined",tt.request.range?", Range:"+tt.request.range:""),S.isText&&z.startScheduleTimer(0),tt.error&&tt.request.serviceLocation&&function(zt){H.info("Fragment loading completed with an error"),zt&&zt.request&&zt.request.type&&(zt.request.type===Re.HTTPRequest.INIT_SEGMENT_TYPE?je({representationId:zt.request.representation.id,sender:{}},!1):zt.request.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE&&(yt(zt.request.startTime+zt.request.duration/2),Ge({},!1)))}(tt)}function In(){yt(Fe.getTime()),en().startScheduleTimer()}function mt(tt){const zt=tt.currentTrackInfo;if(!zt)return;const Jt=x.find(kn=>kn.index===zt.index&&kn.lang===zt.lang);Jt&&Ft(new pn({newMediaInfo:Jt})).then(()=>{b.setIsBufferingCompleted(!1),yt(Fe.getTime()),z.setInitSegmentRequired(!0),z.startScheduleTimer()})}function Qt(tt){yt(tt.quotaExceededTime),Wt()}function ln(){return b?b.getBuffer():null}function en(){return z}function Wt(){z&&z.clearScheduleTimer()}function rt(){let tt,zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;return isNaN(zt)?tt=N?N.getCurrentRepresentation():null:((0,Bt.checkInteger)(zt),tt=N?N.getRepresentationById(zt):null),tt}function Ct(){return!!b&&b.getIsBufferingCompleted()}function Zt(tt){if(!ne.get().streaming.enableManifestTimescaleMismatchFix)return;const zt=tt.chunk,Jt=zt.bytes,kn=rt(zt.representation.id);kn&&(kn.timescale=ee.getMediaTimescaleFromMoov(Jt))}function rn(tt){const zt=tt.chunk,Jt=zt.bytes,kn=rt(zt.representation.id);if(kn){let jn;if(ne.get().streaming.parseInbandPrft&&tt.request.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE){jn=jn||ee.parse(Jt);const zr=function(ui,Gi){const Os=ui.getBoxes("prft"),so=[];return Os.forEach(zu=>{so.push(function(Vi,oo){let ha="unknown";switch(Vi.flags){case 0:ha=w.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:ha=w.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:ha=w.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let Ki=1e3*Vi.ntp_timestamp_sec+Vi.ntp_timestamp_frac/2**32*1e3;return Ki=on(se).getInstance().ntpToUTC(Ki),{type:ha,ntpTimestamp:Ki,mediaTime:Vi.media_time/oo}}(zu,Gi))}),so}(jn,kn.timescale);zr&&zr.length&&he.trigger(te.default.INBAND_PRFT,{data:zr},{streamId:we.id,mediaType:me})}const xn=Ie.getEventsFor(kn.mediaInfo,null,we),Tr=Ie.getEventsFor(kn,kn,we);if(xn&&xn.length>0||Tr&&Tr.length>0){const zr=tt.request;jn=jn||ee.parse(Jt);const ui=function(Gi,Os,so,zu){try{const Vi={},oo=[],ha=so.concat(zu);for(let ma=0,uo=ha.length;ma<uo;ma++)Vi[ha[ma].schemeIdUri+"/"+ha[ma].value]=ha[ma];const Ki=Gi.getBoxes("emsg");if(!Ki||Ki.length===0)return oo;const Fs=Gi.getBox("sidx"),Us=!Fs||isNaN(Fs.earliest_presentation_time)||isNaN(Fs.timescale)?Os&&!isNaN(Os.mediaStartTime)?Os.mediaStartTime:0:Fs.earliest_presentation_time/Fs.timescale,Tc=Math.max(Us,0),lo=N.getCurrentRepresentation();for(let ma=0,uo=Ki.length;ma<uo;ma++){const _c=Ie.getEvent(Ki[ma],Vi,Tc,lo);_c&&oo.push(_c)}return oo}catch{return[]}}(jn,zr,xn,Tr);he.trigger(D.default.INBAND_EVENTS,{events:ui},{streamId:we.id})}}}function pt(){const tt=Fe.getTime();ne.get().streaming.buffer.flushBufferAtTrackSwitch&&Fe.seek(tt+.001,!1,!0),yt(tt),b.setSeekTarget(tt),z.startScheduleTimer()}function Ce(){const tt=Fe.getTime(),zt=b.getContinuousBufferTimeForTargetTime(tt);yt(isNaN(zt)?tt:zt),z.startScheduleTimer()}function et(tt){tt&&!isNaN(tt.time)&&(yt(tt.time),b.setSeekTarget(tt.time))}function yt(tt){T=tt,le=!0}return C={checkAndHandleCompletedBuffering:nt,clearScheduleTimer:Wt,createBufferSinks:function(tt,zt){const Jt=ln();return Jt?Promise.resolve(Jt):b?b.createBufferSink(S,tt,zt):Promise.resolve(null)},dischargePreBuffer:function(){b.dischargePreBuffer()},finalisePlayList:function(tt,zt){j.pushPlayListTraceMetrics(tt,zt)},getAllMediaInfos:function(){return x},getBuffer:ln,getBufferController:function(){return b},getBufferLevel:function(){return b?b.getBufferLevel():0},getFragmentModel:function(){return pe},getMediaInfo:function(){return S},getMediaSource:function(){return b.getMediaSource()},getRepresentation:rt,getRepresentationController:function(){return N},getScheduleController:en,getStreamId:ye,getStreamInfo:function(){return we},getType:fe,initialize:function(tt,zt,Jt){G=Nt(se).create({events:D.default,eventBus:he,streamInfo:we,timelineConverter:ae,dashConstants:w.default,segmentBaseController:_.segmentBaseController,type:me}),k=kt(se).create({streamInfo:we,type:me,timelineConverter:ae,dashMetrics:j,mediaPlayerModel:Se,baseURLController:_.baseURLController,errHandler:X,segmentsController:G,settings:ne,boxParser:ee,events:D.default,eventBus:he,errors:Q,debug:(0,Le.default)(se).getInstance(),dashConstants:w.default,constants:L.default,urlUtils:hn(se).getInstance()}),$=we.manifestInfo.isDynamic,k.initialize($),ge.registerStreamType(me,C),N=$t(se).create({streamInfo:we,type:me,abrController:ge,dashMetrics:j,playbackController:Fe,timelineConverter:ae,dashConstants:w.default,events:D.default,eventBus:he,errors:Q,isDynamic:$,adapter:Ie,segmentsController:G}),b=function(kn,jn){let xn=null;return kn?(xn=kn!==L.default.TEXT||jn?it(se).create({abrController:ge,capabilities:V,errHandler:X,fragmentModel:pe,manifestModel:Ae,mediaController:be,mediaPlayerModel:Se,playbackController:Fe,representationController:N,settings:ne,streamInfo:we,textController:_e,type:kn}):xt(se).create({errHandler:X,fragmentModel:pe,mimeType:Me,settings:ne,streamInfo:we,textController:_e,type:kn}),xn):(X.error(new Pe.default(Q.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Q.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(me,Jt),b&&b.initialize(tt),z=tn(se).create({streamInfo:we,type:me,mimeType:Me,adapter:Ie,dashMetrics:j,mediaPlayerModel:Se,fragmentModel:pe,abrController:ge,playbackController:Fe,textController:_e,mediaController:be,bufferController:b,representationController:N,settings:ne}),z.initialize(zt),T=0,le=!1,re=!1},isBufferingCompleted:Ct,prepareInnerPeriodPlaybackSeeking:function(tt){return new Promise(zt=>{if(b.hasBufferAtTime(tt.seekTime))return b.pruneBuffer(),xe(b.getContinuousBufferTimeForTargetTime(tt.seekTime))&&b.setIsBufferingCompleted(!0),void zt();Wt(),pe.abortRequests(),b.prepareForPlaybackSeek().then(()=>{const Jt=b.getAllRangesWithSafetyFactor(tt.seekTime);return b.clearBuffers(Jt)}).then(()=>{const Jt=b.getContinuousBufferTimeForTargetTime(tt.seekTime);if(xe(Jt))b.setIsBufferingCompleted(!0),zt();else{const kn=isNaN(Jt)?tt.seekTime:Jt;yt(kn),b.setSeekTarget(kn);const jn=[];jn.push(b.updateAppendWindow());const xn=rt();jn.push(b.updateBufferTimestampOffset(xn)),Promise.all(jn).then(()=>{z.setInitSegmentRequired(!0),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),zt()})}}).catch(Jt=>{H.error(Jt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((tt,zt)=>{try{Wt(),pe.abortRequests(),b.prepareForPlaybackSeek().then(()=>b.pruneAllSafely()).then(()=>{tt()})}catch(Jt){zt(Jt)}})},prepareQualityChange:function(tt){tt.newRepresentation&&(W&&W.enabled&&H.warn(`Canceling queued representation switch to ${W.newRepresentation.id} for ${me}`),tt.isAdaptationSetSwitch?(H.debug(`Preparing quality switch to different AdaptationSet for type ${me}`),function(zt){const Jt=zt.newRepresentation;Y=!0,Wt(),z.setSwitchTrack(!0);const kn=Jt.mediaInfo;gn(kn),Ft(new pn({newMediaInfo:kn,newRepresentation:Jt})).then(()=>{Sn(zt)})}(tt)):(H.debug(`Preparing quality within the same AdaptationSet for type ${me}`),function(zt){const Jt=zt.newRepresentation;Y=!0,Wt(),N.prepareQualityChange(Jt),Sn(zt)}(tt)))},prepareTrackSwitch:function(tt){let zt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(Jt=>{H.debug(`Preparing track switch for type ${me}`);const kn=me===L.default.TEXT||zt||ne.get().streaming.trackSwitchMode[me]===L.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Fe.getTimeToStreamEnd(we)>ne.get().streaming.buffer.stallThreshold;b.getIsBufferingCompleted()&&!kn?function(jn){return new Promise(xn=>{const Tr=N.getCurrentRepresentation();b.prepareForNonReplacementTrackSwitch(Tr,jn).then(()=>{he.trigger(D.default.BUFFERING_COMPLETED,{},{streamId:we.id,mediaType:me}),xn()}).catch(()=>{he.trigger(D.default.BUFFERING_COMPLETED,{},{streamId:we.id,mediaType:me}),xn()})})}(tt).then(()=>{Jt()}):(z.setSwitchTrack(!0),kn?function(jn){return new Promise(xn=>{he.trigger(D.default.BUFFER_REPLACEMENT_STARTED,{mediaType:me,streamId:we.id},{mediaType:me,streamId:we.id}),pe.abortRequests();const Tr=rt();b.prepareForReplacementTrackSwitch(Tr,jn).then(()=>{pt(),xn()}).catch(()=>{pt(),xn()})})}(tt).then(()=>{Jt()}):function(jn){return new Promise(xn=>{const Tr=()=>{const zr=pe.getRequests({state:jt.FRAGMENT_MODEL_LOADING});if(zr&&zr.length!==0)he.once(te.default.FRAGMENT_LOADING_COMPLETED,Tr,C);else{const ui=rt();b.prepareForNonReplacementTrackSwitch(ui,jn).then(()=>{Ce(),xn()}).catch(Gi=>{H.error(Gi),Ce(),xn()})}};Tr()})}(tt).then(()=>{Jt()}))})},probeNextRequest:function(){const tt=rt();return k.getNextSegmentRequestIdempotent(S,tt)},reset:function(tt,zt){k&&k.reset(),b&&(b.reset(tt,zt),b=null),z&&(z.reset(),z=null),N&&(N.reset(),N=null),G&&(G=null),ge&&ge.unRegisterStreamType(ye(),me),he.off(D.default.INIT_FRAGMENT_NEEDED,je,C),he.off(D.default.MEDIA_FRAGMENT_NEEDED,Ge,C),he.off(D.default.INIT_FRAGMENT_LOADED,Zt,C),he.off(D.default.MEDIA_FRAGMENT_LOADED,rn,C),he.off(D.default.BUFFER_LEVEL_STATE_CHANGED,bt,C),he.off(D.default.BUFFER_CLEARED,qt,C),he.off(D.default.SEEK_TARGET,et,C),he.off(D.default.FRAGMENT_LOADING_ABANDONED,_t,C),he.off(D.default.FRAGMENT_LOADING_COMPLETED,Gt,C),he.off(D.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,In,C),he.off(D.default.SET_NON_FRAGMENTED_TEXT,mt,C),he.off(D.default.QUOTA_EXCEEDED,Qt,C),he.off(D.default.SOURCE_BUFFER_ERROR,Yt,C),he.off(D.default.BYTES_APPENDED_END_FRAGMENT,mn,C),ke(),me=null,we=null},selectMediaInfo:Ft,setExplicitBufferingTime:yt,setMediaInfoArray:function(tt){x=tt},setMediaSource:function(tt){return b.setMediaSource(tt,S)},setTrackSwitchInProgress:function(tt){de=tt},updateStreamInfo:function(tt){return we=tt,Ct()?Promise.resolve():b.updateAppendWindow()}},H=(0,Le.default)(se).getInstance().getLogger(C),ke(),he.on(D.default.INIT_FRAGMENT_NEEDED,je,C),he.on(D.default.MEDIA_FRAGMENT_NEEDED,Ge,C),he.on(D.default.INIT_FRAGMENT_LOADED,Zt,C),he.on(D.default.MEDIA_FRAGMENT_LOADED,rn,C),he.on(D.default.BUFFER_LEVEL_STATE_CHANGED,bt,C),he.on(D.default.BUFFER_CLEARED,qt,C),he.on(D.default.SEEK_TARGET,et,C),he.on(D.default.FRAGMENT_LOADING_ABANDONED,_t,C),he.on(D.default.FRAGMENT_LOADING_COMPLETED,Gt,C),he.on(D.default.QUOTA_EXCEEDED,Qt,C),he.on(D.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,In,C),he.on(D.default.SET_NON_FRAGMENTED_TEXT,mt,C),he.on(D.default.SOURCE_BUFFER_ERROR,Yt,C),he.on(D.default.BYTES_APPENDED_END_FRAGMENT,mn,C),C}Hn.__dashjs_factory_name="StreamProcessor";var yr=ve.default.getClassFactory(Hn),Ur=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},_r=t(7263);function Wr(){let _,b;function T(){b&&(b.onloadend=b.onerror=b.onprogress=b.onload=null,b.abort(),b=null)}return _={load:function(S,k){if(b=null,b=new XMLHttpRequest,b.open(S.method,S.url,!0),S.responseType&&(b.responseType=S.responseType),S.headers)for(let C in S.headers){let $=S.headers[C];$&&b.setRequestHeader(C,$)}return b.withCredentials=S.credentials==="include",b.timeout=S.timeout,b.onload=function(){k.url=this.responseURL,k.status=this.status,k.statusText=this.statusText,k.headers=_r.default.parseHttpHeaders(this.getAllResponseHeaders()),k.data=this.response},S.customData&&(b.onloadend=S.customData.onloadend,b.onprogress=S.customData.onprogress,b.onabort=S.customData.onabort,b.ontimeout=S.customData.ontimeout),b.send(),S.customData.abort=T.bind(this),!0},abort:T,getXhr:function(){return b},reset:function(){T(),_=null},resetInitialSettings:function(){T()}},_}Wr.__dashjs_factory_name="XHRLoader";var Zr=ve.default.getClassFactory(Wr);function ri(){const _=this.context,b=(0,J.default)(_).getInstance();let T,S,k;function C(N,z,G){N.customData.reader.read().then(G).catch(function(){$(N)})}function $(N){N.customData.onloadend&&N.customData.onloadend()}function H(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function x(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function W(N,z){try{if((N=N.filter(G=>G.bytes>z/4/N.length)).length>1){let G=0;const re=(N[N.length-1].timestamp-N[0].timestamp)/N.length;return N.forEach((le,de)=>{const se=N[de+1];if(se){const he=se.timestamp-le.timestamp;G+=he<re?he:0}}),G}return null}catch{return null}}function Y(N,z){return 8*N/z}return k=(0,Le.default)(_).getInstance().getLogger(T),T={abort:x,calculateDownloadedTime:W,load:function(N,z){const G=function(de){const se=new Headers;if(de.headers)for(let he in de.headers){let ge=de.headers[he];ge&&se.append(he,ge)}return se}(N),re=function(de){let se;return typeof window.AbortController=="function"&&(se=new AbortController,de.customData.abortController=se,se.signal.onabort=de.customData.onabort),de.customData.abort=x.bind(de),se}(N),le=function(de,se,he){return new Request(de.url,{method:de.method,headers:se,credentials:de.credentials,signal:he?he.signal:void 0})}(N,G,re);fetch(le).then(de=>{(function(se,he,ge){(function(Fe,Z){Fe.status=Z.status,Fe.statusText=Z.statusText,Fe.url=Z.url;const ne={};for(const we of Z.headers.keys())ne[we]=Z.headers.get(we);Fe.headers=ne})(ge,se),se.ok||he.customData.onloadend();let Ie=0,ee=!1,V=new Uint8Array,j=0;he.customData.reader=se.body.getReader();let X=[],pe=[],Ae=[],be=!0;const Se=b.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,Me=Fe=>{let{value:Z,done:ne}=Fe;ne?function(){if(V){const we=function(){let _e=null;return Se===L.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?_e=function(){const ae=function(me,ye){try{let fe,ke;if(fe=me.slice(0,-1),ke=ye.slice(0,-1),fe.length!==ke.length&&k.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${fe.length}, Mdat: ${ke.length}`),fe.length<=1)return null;let xe=[],je=0,Ge=0;for(let nt=0;nt<fe.length;nt++)if(fe[nt]&&ke[nt]){let ft=ke[nt].timestamp-fe[nt].timestamp;if(ft>1){const bt=Y(ke[nt].bytes,ft);xe.push(bt),Ge=0}else{Ge===0&&(Ge=fe[nt].timestamp,je=0);let bt=ke[nt].timestamp-Ge;if(bt>1){je+=ke[nt].bytes;const qt=Y(je,bt);xe.push(qt),Ge=0}else je+=ke[nt].bytes}}return xe.length>0?xe.reduce((nt,ft)=>nt+ft,0)/xe.length:null}catch{return null}}(pe,Ae);return ae?8*Ie/ae:null}():Se===L.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(_e=W(X,Ie)),_e}();he.customData.onprogress({loaded:Ie,total:Ie,lengthComputable:!0,time:we}),ge.data=V.buffer}he.customData.onloadend()}():(Z&&Z.length>0&&function(we){V=function(ae,me){if(ae.length===0)return me;const ye=new Uint8Array(ae.length+me.length);return ye.set(ae),ye.set(me,ae.length),ye}(V,we),Ie+=we.length,X.push({timestamp:H(),bytes:we.length}),Se===L.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&be&&S.findLastTopIsoBoxCompleted(["moof"],V,j).found&&(be=!1,pe.push({timestamp:H()}));const _e=S.findLastTopIsoBoxCompleted(["moov","mdat"],V,j);_e.found?function(ae){const me=function(ye){let fe;return ye===V.length?(fe=V,V=new Uint8Array):(fe=new Uint8Array(V.subarray(0,ye)),V=V.subarray(ye)),fe}(ae.startOffsetOfLastFoundTargetBox+ae.sizeOfLastFoundTargetBox);Se!==L.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||be||(be=!0,Ae.push({timestamp:H(),bytes:me.length})),he.customData.onprogress({data:me.buffer,lengthComputable:!1,noTrace:!0}),j=0}(_e):function(ae){j=ae.startOffsetOfLastCompletedBox+ae.sizeOfLastCompletedBox,ee||(he.customData.onprogress({lengthComputable:!1,noTrace:!0}),ee=!0)}(_e)}(Z),C(he,0,Me))};C(he,0,Me)})(de,N,z)}).catch(()=>{$(N)})},reset:function(){},setConfig:function(N){S=N.boxParser}},T}ri.__dashjs_factory_name="FetchLoader";var Ua=ve.default.getClassFactory(ri),za=t(913),ks=class{constructor(){this.period=null,this.index=-1,this.type=null}};class Ui{constructor(b,T,S,k){this.url=b||"",this.serviceLocation=T||b||"",this.dvbPriority=S||1,this.dvbWeight=k||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}Ui.DEFAULT_DVB_PRIORITY=1,Ui.DEFAULT_DVB_WEIGHT=1;var na=Ui,ji=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(_){_&&(this.schemeIdUri=_.schemeIdUri?_.schemeIdUri:null,this.value=_.value!==null&&_.value!==void 0?_.value.toString():null,this.id=_.id?_.id:null,_[w.default.DVB_URL]&&(this.dvbUrl=_[w.default.DVB_URL]),_[w.default.DVB_MIMETYPE]&&(this.dvbMimeType=_[w.default.DVB_MIMETYPE]),_[w.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=_[w.default.DVB_FONTFAMILY]))}inArray(_){return!!_&&_.some(b=>this.schemeIdUri===b.schemeIdUri&&(this.value?this.value.toString().match(b.value):"".match(b.value)))}},wf=class extends ji{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(_){super.init(_),_&&(this.version=_.version,this.sessionID=_.sessionID,this.contentID=_.contentID,this.mode=_.mode??"query",this.keys=_.keys?_.keys.split(" "):null,this.includeInRequests=_.includeInRequests?_.includeInRequests.split(" "):["segment"],this.schemeIdUri=_.schemeIdUri)}},If=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},mi=class extends ji{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(_){super.init(_),_&&(this.ref=_.hasOwnProperty(w.default.REF)?_[w.default.REF]:null,this.refId=_.hasOwnProperty(w.default.REF_ID)?_[w.default.REF_ID]:null,this.robustness=_.hasOwnProperty(w.default.ROBUSTNESS)?_[w.default.ROBUSTNESS]:null,this.cencDefaultKid=_.hasOwnProperty(w.default.CENC_DEFAULT_KID)?_[w.default.CENC_DEFAULT_KID]:null,this.pssh=_.hasOwnProperty(w.default.PSSH)?_[w.default.PSSH]:null,this.pro=_.hasOwnProperty(w.default.PRO)?_[w.default.PRO]:null,this.laUrl=_.hasOwnProperty(w.default.LA_URL)?_[w.default.LA_URL]:_.hasOwnProperty(w.default.LA_URL_LOWER_CASE)?_[w.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(_){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach(b=>{this[b]===null&&(this[b]=_[b])})}},kf=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},Io=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},fu=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},Kt=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},An=class{constructor(_,b){this.url=_||"",this.serviceLocation=b||null,this.queryParams={}}},Gn=t(7393),Er=class{constructor(_,b,T){this.url=_||"",this.serviceLocation=b||null,this.ttl=T||NaN,this.queryParams={}}};class lr{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}lr.DEFAULT_ID="defaultId";var Ri=lr,Sr=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},kr=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN,this.endNumber=null}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==w.default.BASE_URL&&this.segmentInfoType!==w.default.SEGMENT_BASE&&!this.indexRange}},Rr=t(5717);function Ar(){let _,b,T,S;const k=this.context,C=hn(k).getInstance(),$=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function H(Z,ne){if(!Z)throw new Error("adaptation is not defined");if(!ne)throw new Error("type is not defined");if(Z.Representation&&Z.Representation.length){const _e=V(Z.Representation[0]);if(_e&&_e.some(ae=>L.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(ae.schemeIdUri)>=0))return ne===L.default.IMAGE}if(Z.ContentComponent&&Z.ContentComponent.length>0){if(Z.ContentComponent.length>1)return ne===L.default.MUXED;if(Z.ContentComponent[0].contentType===ne)return!0}const we=ne===L.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ne);if(Z.Representation&&Z.Representation.length){const _e=Z.Representation[0].codecs;if(we.test(_e))return!0}if(Z.hasOwnProperty(w.default.MIME_TYPE))return we.test(Z.mimeType);if(Z.Representation){let _e;for(let ae=0;ae<Z.Representation.length;ae++)if(_e=Z.Representation[ae],_e.hasOwnProperty(w.default.MIME_TYPE))return we.test(_e.mimeType)}return!1}function x(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(w.default.SEGMENT_TEMPLATE)||Z.hasOwnProperty(w.default.SEGMENT_TIMELINE)||Z.hasOwnProperty(w.default.SEGMENT_LIST)||Z.hasOwnProperty(w.default.SEGMENT_BASE))return!0;if(Z.Representation&&Z.Representation.length>0){const ne=Z.Representation[0];if(ne.hasOwnProperty(w.default.SEGMENT_TEMPLATE)||ne.hasOwnProperty(w.default.SEGMENT_TIMELINE)||ne.hasOwnProperty(w.default.SEGMENT_LIST)||ne.hasOwnProperty(w.default.SEGMENT_BASE))return!0}return!1}function W(Z){return H(Z,L.default.VIDEO)}function Y(Z){return H(Z,L.default.TEXT)}function N(Z){return H(Z,L.default.IMAGE)}function z(Z){return Z&&Z.Representation&&Z.Representation.sort((ne,we)=>ne.bandwidth-we.bandwidth),Z}function G(Z,ne){return Z&&Z.Period&&$(ne)&&Z.Period[ne]?Z.Period[ne].AdaptationSet:[]}function re(Z){return Z&&Z.Period?Z.Period:[]}function le(Z){const ne=de(Z);return ne&&ne.length>0}function de(Z){let ne=[];if(!Z)return ne;const we=se(Z);return ne=ne.concat(we),Z.hasOwnProperty(w.default.ADAPTATION_SET)&&Z[w.default.ADAPTATION_SET].length>0&&Z[w.default.ADAPTATION_SET].forEach(_e=>{const ae=se(_e);ne=ne.concat(ae)}),ne}function se(Z){return Z&&Z.hasOwnProperty(w.default.CONTENT_PROTECTION)&&Z.ContentProtection.length!==0?Z[w.default.CONTENT_PROTECTION].map(ne=>{const we=new mi;return we.init(ne),we}):[]}function he(Z){let ne=!1;return Z&&Z.hasOwnProperty("type")&&(ne=Z.type===w.default.DYNAMIC),ne}function ge(Z){if(!Z)return null;const ne=Z[w.default.FRAMERATE];if(!ne)return null;if(typeof ne=="string"&&ne.includes("/")){const[we,_e]=ne.split("/").map(ae=>parseInt(ae,10));if(!isNaN(we)&&!isNaN(_e)&&_e!==0)return we/_e}return parseInt(ne)}function Ie(Z,ne){return ne&&ne.hasOwnProperty(Z)&&ne[Z].length?ne[Z].map(we=>{const _e=new ji;return _e.init(we),_e}):[]}function ee(Z,ne){if(!ne)return[];let we=function(_e,ae){if(!ae||!ae.length)return[];let me=ae[0][_e]||[];return me.length===0?[]:ae.length===1?me:me.filter(ye=>ae.slice(1).every(fe=>fe.hasOwnProperty(_e)&&fe[_e].some(ke=>ke.schemeIdUri===ye.schemeIdUri&&ke.value===ye.value)))}(Z,ne[w.default.REPRESENTATION]);return ne.hasOwnProperty(Z)&&ne[Z].length&&we.push(...ne[Z]),we.map(_e=>{const ae=new ji;return ae.init(_e),ae})}function V(Z){return Ie(w.default.ESSENTIAL_PROPERTY,Z)}function j(Z){return Ie(w.default.SUPPLEMENTAL_PROPERTY,Z)}function X(Z){if(!Z||!Z.S)return NaN;let ne=Z.S[0],we=Z.S[1];return ne.hasOwnProperty("d")?ne.d:we.t-ne.t}function pe(Z){const ne=Z.presentationTimeOffset;return Z.adaptation.period.start-ne}function Ae(Z,ne){if(!Z)throw new Error("Period cannot be null or undefined");let we=Ri.DEFAULT_ID+"_"+ne;return Z.hasOwnProperty(w.default.ID)&&Z.id.toString().length>0&&Z.id!=="__proto__"&&(we=Z.id.toString()),we}function be(Z,ne,we){const _e=[];let ae;if(!Z)return _e;for(ae=0;ae<Z.length;ae++){const me=new fu;if(me.timescale=1,me.representation=ne,!Z[ae].hasOwnProperty(L.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");me.schemeIdUri=Z[ae].schemeIdUri,Z[ae].hasOwnProperty(w.default.TIMESCALE)&&(me.timescale=Z[ae].timescale),Z[ae].hasOwnProperty(w.default.VALUE)&&(me.value=Z[ae].value),_e.push(me),me.period=we}return _e}function Se(Z){const ne=[],we=Z.BaseURL||[Z.baseUri];let _e=!1;return we.some(ae=>{if(ae){const me=new na;let ye=ae.__text||ae;return C.isRelative(ye)&&(_e=!0,Z.baseUri&&(ye=C.resolve(ye,Z.baseUri))),me.url=ye,ae.hasOwnProperty(w.default.SERVICE_LOCATION)&&ae.serviceLocation.length?me.serviceLocation=ae.serviceLocation:me.serviceLocation=ye,ae.hasOwnProperty(w.default.DVB_PRIORITY)&&(me.dvbPriority=ae[w.default.DVB_PRIORITY]),ae.hasOwnProperty(w.default.DVB_WEIGHT)&&(me.dvbWeight=ae[w.default.DVB_WEIGHT]),ae.hasOwnProperty(w.default.AVAILABILITY_TIME_OFFSET)&&(me.availabilityTimeOffset=ae[w.default.AVAILABILITY_TIME_OFFSET]),ae.hasOwnProperty(w.default.AVAILABILITY_TIME_COMPLETE)&&(me.availabilityTimeComplete=ae[w.default.AVAILABILITY_TIME_COMPLETE]!=="false"),ne.push(me),_e}}),ne}function Me(Z){const ne=new kf;return ne.serverUrl=Z.__text,Z.hasOwnProperty(w.default.DEFAULT_SERVICE_LOCATION)&&(ne.defaultServiceLocation=Z[w.default.DEFAULT_SERVICE_LOCATION],ne.defaultServiceLocationArray=ne.defaultServiceLocation.split(" ")),Z.hasOwnProperty(w.default.QUERY_BEFORE_START)&&(ne.queryBeforeStart=Z[w.default.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(w.default.CLIENT_REQUIREMENT)&&(ne.clientRequirement=Z[w.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),ne}function Fe(Z){const ne=new If;return Z.hasOwnProperty(w.default.CMCD_PARAMETERS)&&Z[w.default.CMCD_PARAMETERS].schemeIdUri===L.default.CTA_5004_2023_SCHEME&&(ne.cmcdParameters=new wf,ne.cmcdParameters.init(Z[w.default.CMCD_PARAMETERS])),Z.hasOwnProperty(w.default.SERVICE_LOCATIONS)&&Z[w.default.SERVICE_LOCATIONS]!==""&&(ne.serviceLocations=Z[w.default.SERVICE_LOCATIONS],ne.serviceLocationsArray=ne.serviceLocations.toString().split(" ")),Z.hasOwnProperty(w.default.ADAPTATION_SETS)&&Z[w.default.ADAPTATION_SETS]!==""&&(ne.adaptationSets=Z[w.default.ADAPTATION_SETS],ne.adaptationSetsArray=ne.adaptationSets.toString().split(" ")),ne}return _={getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(w.default.ACCESSIBILITY)&&Z[w.default.ACCESSIBILITY].length?Z[w.default.ACCESSIBILITY].map(ne=>{const we=new ji;return we.init(ne),we}):[]},getAdaptationForId:function(Z,ne,we){const _e=G(ne,we);let ae,me;for(ae=0,me=_e.length;ae<me;ae++)if(_e[ae].hasOwnProperty(w.default.ID)&&_e[ae].id===Z)return _e[ae];return null},getAdaptationForIndex:function(Z,ne,we){const _e=G(ne,we);return _e.length>0&&$(Z)?_e[Z]:null},getAdaptationsForPeriod:function(Z){const ne=Z&&$(Z.index)?Z.mpd.manifest.Period[Z.index]:null,we=[];let _e,ae,me;if(ne&&ne.AdaptationSet)for(me=0;me<ne.AdaptationSet.length;me++)ae=ne.AdaptationSet[me],_e=new ks,ae.hasOwnProperty(w.default.ID)&&(_e.id=ae.id),_e.index=me,_e.period=Z,H(ae,L.default.MUXED)?_e.type=L.default.MUXED:H(ae,L.default.AUDIO)?_e.type=L.default.AUDIO:W(ae)?_e.type=L.default.VIDEO:Y(ae)?_e.type=L.default.TEXT:N(ae)?_e.type=L.default.IMAGE:b.warn("Unknown Adaptation stream type"),we.push(_e);return we},getAdaptationsForType:function(Z,ne,we){const _e=G(Z,ne);let ae,me;const ye=[];for(ae=0,me=_e.length;ae<me;ae++)H(_e[ae],we)&&ye.push(z(_e[ae]));return ye},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(w.default.AUDIO_CHANNEL_CONFIGURATION)&&Z[w.default.AUDIO_CHANNEL_CONFIGURATION].length?Z[w.default.AUDIO_CHANNEL_CONFIGURATION].map(ne=>{const we=new ji;return we.init(ne),we}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(w.default.AUDIO_CHANNEL_CONFIGURATION)&&Z[w.default.AUDIO_CHANNEL_CONFIGURATION].length?Z[w.default.AUDIO_CHANNEL_CONFIGURATION].map(ne=>{const we=new ji;return we.init(ne),we}):[]},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(w.default.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getBaseURLsFromElement:Se,getBitrateListForAdaptation:function(Z){const ne=z(Z);return(ne&&ne.Representation?ne.Representation:[]).map(we=>({bandwidth:we.bandwidth,width:we.width||0,height:we.height||0,scanType:we.scanType||null,id:we.id||null}))},getCodec:function(Z,ne,we){let _e=null;if(Z&&Z.Representation&&Z.Representation.length>0){const ae=$(ne)&&ne>=0&&ne<Z.Representation.length?Z.Representation[ne]:Z.Representation[0];ae&&(_e=ae.mimeType+';codecs="'+ae.codecs+'"',we&&ae.width!==void 0&&(_e+=';width="'+ae.width+'";height="'+ae.height+'"'))}return _e&&(_e=_e.replace(/\sprofiles=[^;]*/g,"")),_e},getCombinedEssentialPropertiesForAdaptationSet:function(Z){return ee(w.default.ESSENTIAL_PROPERTY,Z)},getCombinedSupplementalPropertiesForAdaptationSet:function(Z){return ee(w.default.SUPPLEMENTAL_PROPERTY,Z)},getContentProtectionByAdaptation:function(Z){return se(Z)},getContentProtectionByManifest:function(Z){let ne=[];if(!Z)return ne;const we=se(Z);return ne=ne.concat(we),Z.hasOwnProperty(w.default.PERIOD)&&Z[w.default.PERIOD].length>0&&Z[w.default.PERIOD].forEach(_e=>{const ae=de(_e);ne=ne.concat(ae)}),ne},getContentProtectionByPeriod:de,getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(w.default.CONTENT_STEERING))return Me(Z[w.default.CONTENT_STEERING][0])},getDuration:function(Z){let ne;return ne=Z&&Z.hasOwnProperty(w.default.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,ne},getEssentialPropertiesForAdaptationSet:function(Z){return Ie(w.default.ESSENTIAL_PROPERTY,Z)},getEssentialPropertiesForRepresentation:V,getEventStreamForAdaptationSet:function(Z,ne,we){let _e,ae,me;return Z&&Z.Period&&ne&&ne.period&&$(ne.period.index)&&(ae=Z.Period[ne.period.index],ae&&ae.AdaptationSet&&$(ne.index)&&(me=ae.AdaptationSet[ne.index],me&&(_e=me.InbandEventStream))),be(_e,null,we)},getEventStreamForRepresentation:function(Z,ne,we){let _e,ae,me,ye;return Z&&Z.Period&&ne&&ne.adaptation&&ne.adaptation.period&&$(ne.adaptation.period.index)&&(ae=Z.Period[ne.adaptation.period.index],ae&&ae.AdaptationSet&&$(ne.adaptation.index)&&(me=ae.AdaptationSet[ne.adaptation.index],me&&me.Representation&&$(ne.index)&&(ye=me.Representation[ne.index],ye&&(_e=ye.InbandEventStream)))),be(_e,ne,we)},getEventsForPeriod:function(Z){const ne=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,we=ne?ne.Period:null,_e=we&&Z&&$(Z.index)?we[Z.index].EventStream:null,ae=[];let me,ye;if(_e)for(me=0;me<_e.length;me++){const fe=new fu;if(fe.period=Z,fe.timescale=1,!_e[me].hasOwnProperty(L.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(fe.schemeIdUri=_e[me][L.default.SCHEME_ID_URI],_e[me].hasOwnProperty(w.default.TIMESCALE)&&(fe.timescale=_e[me][w.default.TIMESCALE]),_e[me].hasOwnProperty(w.default.VALUE)&&(fe.value=_e[me][w.default.VALUE]),_e[me].hasOwnProperty(w.default.PRESENTATION_TIME_OFFSET)&&(fe.presentationTimeOffset=_e[me][w.default.PRESENTATION_TIME_OFFSET]),ye=0;_e[me].Event&&ye<_e[me].Event.length;ye++){const ke=_e[me].Event[ye],xe=new Io;xe.presentationTime=0,xe.eventStream=fe,ke.hasOwnProperty(w.default.PRESENTATION_TIME)&&(xe.presentationTime=ke.presentationTime);const je=fe.presentationTimeOffset?fe.presentationTimeOffset/fe.timescale:0;xe.calculatedPresentationTime=xe.presentationTime/fe.timescale+Z.start-je,ke.hasOwnProperty(w.default.DURATION)&&(xe.duration=ke.duration/fe.timescale),ke.hasOwnProperty(w.default.ID)?xe.id=parseInt(ke.id):xe.id=null,ke.Signal&&ke.Signal.Binary?xe.messageData=S.decodeArray(ke.Signal.Binary.toString()):xe.messageData=ke.messageData||ke.__cdata||ke.__text,ae.push(xe)}}return ae},getFramerate:ge,getId:function(Z){return Z&&Z[w.default.ID]||null},getIndexForAdaptation:function(Z,ne,we){if(!Z)return-1;const _e=G(ne,we);for(let ae=0;ae<_e.length;ae++)if((0,Gn.default)(k).getInstance().areEqual(_e[ae],Z))return ae;return-1},getIsDynamic:he,getIsFragmented:x,getIsText:Y,getIsTypeOf:H,getLabelsForAdaptation:function(Z){if(!Z||!Z.Label)return[];const ne=[];for(let we=0;we<Z.Label.length;we++)ne.push({lang:Z.Label[we].lang,text:Z.Label[we].__text||Z.Label[we]});return ne},getLanguageForAdaptation:function(Z){let ne="";return Z&&Z.hasOwnProperty(w.default.LANG)&&(ne=Z.lang),ne},getLocation:function(Z){return Z&&Z.hasOwnProperty(w.default.LOCATION)?Z[w.default.LOCATION].map(ne=>{const we=ne.__text||ne,_e=ne.hasOwnProperty(w.default.SERVICE_LOCATION)?ne[w.default.SERVICE_LOCATION]:null;return new An(we,_e)}):[]},getManifestUpdatePeriod:function(Z){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,we=NaN;return Z&&Z.hasOwnProperty(w.default.MINIMUM_UPDATE_PERIOD)&&(we=Z.minimumUpdatePeriod),isNaN(we)?we:Math.max(we-ne,1)},getMimeType:function(Z){return Z&&Z.Representation&&Z.Representation.length>0?Z.Representation[0].mimeType:null},getMpd:function(Z){const ne=new Kt;return Z&&(ne.manifest=Z,Z.hasOwnProperty(w.default.AVAILABILITY_START_TIME)?ne.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(ne.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(w.default.AVAILABILITY_END_TIME)&&(ne.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(w.default.MINIMUM_UPDATE_PERIOD)&&(ne.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(w.default.MEDIA_PRESENTATION_DURATION)&&(ne.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(w.default.SUGGESTED_PRESENTATION_DELAY)&&(ne.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(w.default.TIMESHIFT_BUFFER_DEPTH)&&(ne.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(w.default.MAX_SEGMENT_DURATION)&&(ne.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(w.default.PUBLISH_TIME)&&(ne.publishTime=new Date(Z.publishTime))),ne},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(w.default.PATCH_LOCATION)?Z[w.default.PATCH_LOCATION].map(ne=>{const we=ne.__text||ne,_e=ne.hasOwnProperty(w.default.SERVICE_LOCATION)?ne[w.default.SERVICE_LOCATION]:null;let ae=ne.hasOwnProperty(w.default.TTL)?1e3*parseFloat(ne[w.default.TTL]):NaN;return new Er(we,_e,ae)}):[]},getProducerReferenceTimesForAdaptation:function(Z){const ne=Z&&Z.hasOwnProperty(w.default.PRODUCER_REFERENCE_TIME)?Z[w.default.PRODUCER_REFERENCE_TIME]:[];(Z&&Z.hasOwnProperty(w.default.REPRESENTATION)?Z[w.default.REPRESENTATION]:[]).forEach(_e=>{_e.hasOwnProperty(w.default.PRODUCER_REFERENCE_TIME)&&ne.push(..._e[w.default.PRODUCER_REFERENCE_TIME])});const we=[];return ne.forEach(_e=>{const ae=new Sr;_e.hasOwnProperty(w.default.ID)&&(ae[w.default.ID]=parseInt(_e[w.default.ID]),_e.hasOwnProperty(w.default.WALL_CLOCK_TIME)&&(ae[w.default.WALL_CLOCK_TIME]=_e[w.default.WALL_CLOCK_TIME],_e.hasOwnProperty(w.default.PRESENTATION_TIME)&&(ae[w.default.PRESENTATION_TIME]=_e[w.default.PRESENTATION_TIME],_e.hasOwnProperty(w.default.INBAND)&&(ae[w.default.INBAND]=_e[w.default.INBAND]!=="false"),_e.hasOwnProperty(w.default.TYPE)&&(ae[w.default.TYPE]=_e[w.default.TYPE]),we.push(ae))))}),we},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(w.default.PUBLISH_TIME)?new Date(Z[w.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(Z,ne){const we=re(ne);return we.length>0&&$(Z)?we[Z]:null},getRealPeriods:re,getRegularPeriods:function(Z){const ne=!!Z&&he(Z.manifest),we=[];let _e,ae,me=null,ye=null,fe=null,ke=null;for(ae=0,_e=Z&&Z.manifest&&Z.manifest.Period?Z.manifest.Period.length:0;ae<_e;ae++)ye=Z.manifest.Period[ae],ye.hasOwnProperty(w.default.START)?(ke=new Ri,ke.start=ye.start):me!==null&&me.hasOwnProperty(w.default.DURATION)&&fe!==null?(ke=new Ri,ke.start=parseFloat((fe.start+fe.duration).toFixed(5))):ae!==0||ne||(ke=new Ri,ke.start=0),fe!==null&&isNaN(fe.duration)&&(ke!==null?fe.duration=parseFloat((ke.start-fe.start).toFixed(5)):b.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),ke!==null&&(ke.id=Ae(ye,ae),ke.index=ae,ke.mpd=Z,ke.isEncrypted=le(ye),ye.hasOwnProperty(w.default.DURATION)&&(ke.duration=ye.duration),fe&&(fe.nextPeriodId=ke.id),we.push(ke),me=ye,fe=ke),ye=null,ke=null;return we.length===0||fe!==null&&isNaN(fe.duration)&&(fe.duration=parseFloat((function(xe){(function(){if(!T||!T.hasOwnProperty("error"))throw new Error(L.default.MISSING_CONFIG_ERROR)})();const je=he(xe.mpd.manifest);let Ge;return xe.mpd.manifest.mediaPresentationDuration?Ge=xe.mpd.manifest.mediaPresentationDuration:xe.duration?Ge=xe.duration:je?Ge=Number.POSITIVE_INFINITY:T.error(new Pe.default(Q.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",xe)),Ge}(fe)-fe.start).toFixed(5))),we},getRepresentationCount:function(Z){return Z&&Z.Representation?Z.Representation.length:0},getRepresentationFor:function(Z,ne){return ne&&ne.Representation&&ne.Representation.length>0&&$(Z)?ne.Representation[Z]:null},getRepresentationSortFunction:function(){return(Z,ne)=>Z.bandwidth-ne.bandwidth},getRepresentationsForAdaptation:function(Z,ne){const we=[],_e=function(ye){if(ye&&ye.period&&$(ye.period.index)){const fe=ye.period.mpd.manifest.Period[ye.period.index];if(fe&&fe.AdaptationSet&&$(ye.index))return z(fe.AdaptationSet[ye.index])}}(Z);let ae,me;if(_e&&_e.Representation){if(Z&&Z.period&&$(Z.period.index)){const ye=Se(Z.period.mpd.manifest);ye&&(me=ye[0])}for(let ye=0,fe=_e.Representation.length;ye<fe;++ye){const ke=_e.Representation[ye],xe=new kr;if(xe.index=ye,xe.adaptation=Z,xe.mediaInfo=ne,ke.hasOwnProperty(w.default.ID)&&(xe.id=ke.id),ke.hasOwnProperty(w.default.CODECS)&&(xe.codecs=ke.codecs,xe.codecFamily=_r.default.getCodecFamily(xe.codecs)),ke.hasOwnProperty(w.default.MIME_TYPE)&&(xe.mimeType=ke[w.default.MIME_TYPE]),ke.hasOwnProperty(w.default.CODEC_PRIVATE_DATA)&&(xe.codecPrivateData=ke.codecPrivateData),ke.hasOwnProperty(w.default.BANDWITH)&&(xe.bandwidth=ke.bandwidth,xe.bitrateInKbit=ke.bandwidth/1e3),ke.hasOwnProperty(w.default.WIDTH)&&(xe.width=ke.width),ke.hasOwnProperty(w.default.HEIGHT)&&(xe.height=ke.height),ke.hasOwnProperty(w.default.SCAN_TYPE)&&(xe.scanType=ke.scanType),ke.hasOwnProperty(w.default.FRAMERATE)&&(xe.frameRate=ge(ke)),ke.hasOwnProperty(w.default.QUALITY_RANKING)&&(xe.qualityRanking=ke[w.default.QUALITY_RANKING]),ke.hasOwnProperty(w.default.MAX_PLAYOUT_RATE)&&(xe.maxPlayoutRate=ke.maxPlayoutRate),ke.hasOwnProperty(w.default.SEGMENT_BASE)?(ae=ke.SegmentBase,xe.segmentInfoType=w.default.SEGMENT_BASE):ke.hasOwnProperty(w.default.SEGMENT_LIST)?(ae=ke.SegmentList,ae.hasOwnProperty(w.default.SEGMENT_TIMELINE)?xe.segmentInfoType=w.default.SEGMENT_TIMELINE:xe.segmentInfoType=w.default.SEGMENT_LIST):ke.hasOwnProperty(w.default.SEGMENT_TEMPLATE)?(ae=ke.SegmentTemplate,ae.hasOwnProperty(w.default.SEGMENT_TIMELINE)?xe.segmentInfoType=w.default.SEGMENT_TIMELINE:xe.segmentInfoType=w.default.SEGMENT_TEMPLATE,ae.hasOwnProperty(w.default.INITIALIZATION_MINUS)&&(xe.initialization=ae.initialization.split("$Bandwidth$").join(ke.bandwidth).split("$RepresentationID$").join(ke.id))):xe.segmentInfoType=w.default.BASE_URL,xe.essentialProperties=V(ke),xe.supplementalProperties=j(ke),ae){if(ae.hasOwnProperty(w.default.INITIALIZATION)){const je=ae.Initialization;je.hasOwnProperty(w.default.SOURCE_URL)&&(xe.initialization=je.sourceURL),je.hasOwnProperty(w.default.RANGE)&&(xe.range=je.range)}else Y(_e)&&x(_e)&&_e.mimeType&&_e.mimeType.indexOf("application/mp4")===-1&&(xe.range=0);ae.hasOwnProperty(w.default.TIMESCALE)&&(xe.timescale=ae.timescale),ae.hasOwnProperty(w.default.DURATION)?xe.segmentDuration=ae.duration/xe.timescale:ke.hasOwnProperty(w.default.SEGMENT_TEMPLATE)&&(ae=ke.SegmentTemplate,ae.hasOwnProperty(w.default.SEGMENT_TIMELINE)&&(xe.segmentDuration=X(ae.SegmentTimeline)/xe.timescale)),ae.hasOwnProperty(w.default.MEDIA)&&(xe.media=ae.media),ae.hasOwnProperty(w.default.START_NUMBER)&&(xe.startNumber=parseInt(ae.startNumber)),ae.hasOwnProperty(w.default.INDEX_RANGE)&&(xe.indexRange=ae.indexRange),ae.hasOwnProperty(w.default.PRESENTATION_TIME_OFFSET)&&(xe.presentationTimeOffset=ae.presentationTimeOffset/xe.timescale),ae.hasOwnProperty(w.default.AVAILABILITY_TIME_OFFSET)?xe.availabilityTimeOffset=ae.availabilityTimeOffset:me&&me.availabilityTimeOffset!==void 0&&(xe.availabilityTimeOffset=me.availabilityTimeOffset),ae.hasOwnProperty(w.default.AVAILABILITY_TIME_COMPLETE)?xe.availabilityTimeComplete=ae.availabilityTimeComplete!=="false":me&&me.availabilityTimeComplete!==void 0&&(xe.availabilityTimeComplete=me.availabilityTimeComplete),ae.hasOwnProperty(w.default.END_NUMBER)&&(xe.endNumber=ae[w.default.END_NUMBER])}xe.mseTimeOffset=pe(xe),xe.path=[Z.period.index,Z.index,ye],isNaN(xe.width)||isNaN(xe.height)||isNaN(xe.frameRate)||(xe.pixelsPerSecond=Math.max(1,xe.width*xe.height*xe.frameRate),isNaN(xe.bandwidth)||(xe.bitsPerPixel=xe.bandwidth/xe.pixelsPerSecond)),we.push(xe)}}return we},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(w.default.ROLE)&&Z[w.default.ROLE].length?Z[w.default.ROLE].map(ne=>{ne.schemeIdUri===L.default.DASH_ROLE_SCHEME_ID&&ne.value==="Main"&&(ne.value=w.default.MAIN);const we=new ji;return we.init(ne),we}):[]},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(w.default.SEGMENT_ALIGNMENT))&&Z[w.default.SEGMENT_ALIGNMENT]==="true"},getSelectionPriority:function(Z){try{const ne=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(ne)?1:ne}catch{return 1}},getServiceDescriptions:function(Z){const ne=[];if(Z&&Z.hasOwnProperty(w.default.SERVICE_DESCRIPTION))for(const we of Z.ServiceDescription){let _e=null,ae=null,me=null,ye=null,fe=null,ke=null,xe=null,je=null;for(const Ge in we)if(we.hasOwnProperty(Ge))if(Ge===w.default.ID)_e=we[Ge];else if(Ge===w.default.SERVICE_DESCRIPTION_SCOPE)ae=we[Ge].schemeIdUri;else if(Ge===w.default.SERVICE_DESCRIPTION_LATENCY)me={target:parseInt(we[Ge].target),max:parseInt(we[Ge].max),min:parseInt(we[Ge].min),referenceId:parseInt(we[Ge].referenceId)};else if(Ge===w.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)ye={max:parseFloat(we[Ge].max),min:parseFloat(we[Ge].min)};else if(Ge===w.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)fe={mediaType:we[Ge].mediaType,max:parseInt(we[Ge].max),min:parseInt(we[Ge].min),target:parseInt(we[Ge].target),type:we[Ge].type,maxQualityDifference:parseInt(we[Ge].maxQualityDifference)};else if(Ge===w.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)ke={mediaType:we[Ge].mediaType,max:parseInt(we[Ge].max),min:parseInt(we[Ge].min),target:parseInt(we[Ge].target)};else if(Ge===w.default.CONTENT_STEERING){let nt=we[Ge];nt=Array.isArray(nt)?nt.at(nt.length-1):nt,xe=Me(nt)}else Ge===w.default.CLIENT_DATA_REPORTING&&(je=Fe(we[Ge]));ne.push({id:_e,schemeIdUri:ae,latency:me,playbackRate:ye,operatingQuality:fe,operatingBandwidth:ke,contentSteering:xe,clientDataReporting:je})}return ne},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(w.default.SUB_SEGMENT_ALIGNMENT))&&Z[w.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(w.default.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getSupplementalPropertiesForAdaptationSet:function(Z){return Ie(w.default.SUPPLEMENTAL_PROPERTY,Z)},getSupplementalPropertiesForRepresentation:j,getUTCTimingSources:function(Z){const ne=he(Z),we=!!Z&&Z.hasOwnProperty(w.default.AVAILABILITY_START_TIME),_e=Z?Z.UTCTiming:null,ae=[];return(ne||we)&&_e&&_e.forEach(function(me){const ye=new Rr.default;me.hasOwnProperty(L.default.SCHEME_ID_URI)&&(ye.schemeIdUri=me.schemeIdUri,me.hasOwnProperty(w.default.VALUE)&&(ye.value=me.value.toString(),ae.push(ye)))}),ae},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(w.default.VIEWPOINT)&&Z[w.default.VIEWPOINT].length?Z[w.default.VIEWPOINT].map(ne=>{const we=new ji;return we.init(ne),we}):[]},hasProfile:function(Z,ne){let we=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(we=Z.profiles.indexOf(ne)!==-1),we},isPeriodEncrypted:le,setConfig:function(Z){Z&&(Z.errHandler&&(T=Z.errHandler),Z.BASE64&&(S=Z.BASE64))}},b=(0,Le.default)(k).getInstance().getLogger(_),_}Ar.__dashjs_factory_name="DashManifestModel";var Mr=ve.default.getSingletonFactory(Ar);const Ba={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},xi=Ba,ss="v",ko="l",Rf="d",Ro="s";class Ra{constructor(b,T){Array.isArray(b)&&(b=b.map(S=>S instanceof Ra?S:new Ra(S))),this.value=b,this.params=T}}const Rs="Dict";function xo(_,b,T,S){return new Error(`failed to ${_} "${k=b,Array.isArray(k)?JSON.stringify(k):k instanceof Map?"Map{}":k instanceof Set?"Set{}":typeof k=="object"?JSON.stringify(k):String(k)}" as ${T}`,{cause:S});var k}function Ka(_,b,T){return xo("serialize",_,b,T)}class hu{constructor(b){this.description=b}}const Or="Bare Item",mu="Boolean",gu="Byte Sequence",pu="Integer";function Fd(_){return _<-999999999999999||999999999999999<_}function vu(_){if(Fd(_))throw Ka(_,pu);return _.toString()}function Ud(_,b){if(_<0)return-Ud(-_,b);const T=Math.pow(10,b);if(Math.abs(_*T%1-.5)<Number.EPSILON){const S=Math.floor(_*T);return(S%2==0?S:S+1)/T}return Math.round(_*T)/T}const qr="Decimal";function xs(_){const b=Ud(_,3);if(Math.floor(Math.abs(b)).toString().length>12)throw Ka(_,qr);const T=b.toString();return T.includes(".")?T:`${T}.0`}const qi="String",Ta=/[\x00-\x1f\x7f]+/;function os(_){return _.description||_.toString().slice(7,-1)}const Hi="Token";function Co(_){const b=os(_);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(b)===!1)throw Ka(b,Hi);return b}function zi(_){switch(typeof _){case"number":if(!Number.isFinite(_))throw Ka(_,Or);return Number.isInteger(_)?vu(_):xs(_);case"string":return function(b){if(Ta.test(b))throw Ka(b,qi);return`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(_);case"symbol":return Co(_);case"boolean":return function(b){if(typeof b!="boolean")throw Ka(b,mu);return b?"?1":"?0"}(_);case"object":if(_ instanceof Date)return function(b){return`@${vu(b.getTime()/1e3)}`}(_);if(_ instanceof Uint8Array)return function(b){if(ArrayBuffer.isView(b)===!1)throw Ka(b,gu);return`:${T=b,btoa(String.fromCharCode(...T))}:`;var T}(_);if(_ instanceof hu)return Co(_);default:throw Ka(_,Or)}}const ay="Key";function xf(_){if(/^[a-z*][a-z0-9\-_.*]*$/.test(_)===!1)throw Ka(_,ay);return _}function Tl(_){return _==null?"":Object.entries(_).map(b=>{let[T,S]=b;return S===!0?`;${xf(T)}`:`;${xf(T)}=${zi(S)}`}).join("")}function sy(_){return _ instanceof Ra?`${zi(_.value)}${Tl(_.params)}`:zi(_)}const zd=_=>Math.round(_),_l=_=>100*zd(_/100),oy={br:zd,d:zd,bl:_l,dl:_l,mtp:_l,nor:(_,b)=>(b!=null&&b.baseUrl&&(_=function(T,S){const k=new URL(T),C=new URL(S);if(k.origin!==C.origin)return T;const $=k.pathname.split("/").slice(1),H=C.pathname.split("/").slice(1,-1);for(;$[0]===H[0];)$.shift(),H.shift();for(;H.length;)H.shift(),$.unshift("..");return $.join("/")}(_,b.baseUrl)),encodeURIComponent(_)),rtp:_l,tb:zd};function ly(_){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _?function(T,S){return function(k){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{whitespace:!0};if(typeof k!="object")throw Ka(k,Rs);const $=k instanceof Map?k.entries():Object.entries(k),H=C!=null&&C.whitespace?" ":"";return Array.from($).map(x=>{let[W,Y]=x;Y instanceof Ra==0&&(Y=new Ra(Y));let N=xf(W);var z;return Y.value===!0?N+=Tl(Y.params):(N+="=",Array.isArray(Y.value)?N+=`(${(z=Y).value.map(sy).join(" ")})${Tl(z.params)}`:N+=sy(Y)),N}).join(`,${H}`)}(T,S)}(function(T,S){const k={};if(T==null||typeof T!="object")return k;const C=Object.keys(T).sort(),$=Object.assign({},oy,S==null?void 0:S.formatters),H=S==null?void 0:S.filter;return C.forEach(x=>{if(H!=null&&H(x))return;let W=T[x];const Y=$[x];Y&&(W=Y(W,S)),x==="v"&&W===1||x=="pr"&&W===1||function(N){return typeof N=="number"?Number.isFinite(N):N!=null&&N!==""&&N!==!1}(W)&&(function(N){return N==="ot"||N==="sf"||N==="st"}(x)&&typeof W=="string"&&(W=new hu(W)),k[x]=W)}),k}(_,b),Object.assign({whitespace:!1},b)):""}const Bd="CMCD-Object",Sl="CMCD-Request",Al="CMCD-Session",Cf="CMCD-Status",VT={[Bd]:["br","d","ot","tb"],[Sl]:["bl","dl","mtp","nor","nrr","su"],[Al]:["cid","pr","sf","sid","st","v"],[Cf]:["bs","rtp"]},uy="segment";function Lf(){let _,b,T,S,k,C,$,H,x,W,Y,N,z,G,re,le,de=this.context,se=(0,oe.default)(de).getInstance(),he=(0,J.default)(de).getInstance(),ge=(0,Le.default)(de).getInstance();function Ie(){S={pr:1,nor:null,st:null,sf:null,sid:`${_r.default.generateUuid()}`,cid:null},z={},N={},G={},Y=void 0,re=void 0,le=!1,X()}function ee(){X()}function V(){re||(re=Date.now())}function j(){re&&!S.msd&&(S.msd=Date.now()-re)}function X(){if(!$)return;const ye=$.getStreamController();if(!ye||typeof ye.getActiveStream!="function")return;const fe=ye.getActiveStream();fe&&(W=fe.getStreamProcessors())}function pe(ye){try{const fe=be(),ke=fe.version?fe.keys:he.get().streaming.cmcd.enabledKeys;return Object.keys(ye).filter(xe=>ke.includes(xe)).reduce((xe,je)=>(xe[je]=ye[je],xe),{})}catch{return ye}}function Ae(){const ye=be();return function(fe){if(Object.keys(fe).length){if(parseInt(fe.version)!==1)return T.error("version parameter must be defined in 1."),!1;if(!fe.keys)return T.error("keys parameter must be defined."),!1}const ke=fe.version,xe=he.get().streaming.cmcd&&he.get().streaming.cmcd.enabled;return ke||xe}(ye)&&function(fe){let ke=he.get().streaming.cmcd.includeInRequests;fe.version&&(ke=fe.includeInRequests??[uy]);const xe=L.default.CMCD_AVAILABLE_REQUESTS,je=ke.filter(Ge=>!xe.includes(Ge));return je.length===ke.length?(T.error("None of the request types are supported."),!1):(je.map(Ge=>{T.warn(`request type ${Ge} is not supported.`)}),!0)}(ye)&&function(fe){const ke=L.default.CMCD_AVAILABLE_KEYS,xe=L.default.CMCD_V2_AVAILABLE_KEYS,je=fe.version?fe.keys:he.get().streaming.cmcd.enabledKeys,Ge=he.get().streaming.cmcd.version,nt=je.filter(ft=>!(ke.includes(ft)||Ge===2&&xe.includes(ft)));return nt.length===je.length&&je.length>0?(T.error(`None of the keys are implemented for CMCD version ${Ge}.`),!1):(nt.map(ft=>{T.warn(`key parameter ${ft} is not implemented for CMCD version ${Ge}.`)}),!0)}(ye)}function be(){let ye={};if(H){const fe=H.getServiceDescriptionSettings();he.get().streaming.cmcd.applyParametersFromMpd&&fe.clientDataReporting&&fe.clientDataReporting.cmcdParameters&&(ye=fe.clientDataReporting.cmcdParameters)}return ye}function Se(ye){try{let ke=null;if(ye.type,(fe=ye.mediaType)!==L.default.VIDEO&&fe!==L.default.AUDIO||Y&&Y!=L.default.AUDIO||(Y=fe),function(xe){const je=be();let Ge=he.get().streaming.cmcd.includeInRequests;je.version&&(Ge=je.includeInRequests?je.includeInRequests:[uy]);const nt={[Re.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[Re.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[Re.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[Re.HTTPRequest.MPD_TYPE]:"mpd",[Re.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[Re.HTTPRequest.OTHER_TYPE]:"other"};return Ge.some(ft=>nt[xe]===ft)}(ye.type)){if(ye.type===Re.HTTPRequest.MPD_TYPE)return function(){const xe=Z();return xe.ot=xi.MANIFEST,xe}();if(ye.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE)return Fe(ye.mediaType),Me(ye,ye.mediaType);if(ye.type===Re.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const xe=Z();return xe.ot=xi.INIT,xe.su=!0,xe}();if(ye.type===Re.HTTPRequest.OTHER_TYPE||ye.type===Re.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const xe=Z();return xe.ot=xi.OTHER,xe}();if(ye.type===Re.HTTPRequest.LICENSE)return function(){const xe=Z();return xe.ot=xi.KEY,xe}();if(ye.type===Re.HTTPRequest.CONTENT_STEERING_TYPE)return function(xe){const je=Y?Me(xe,Y):Z();return je.ot=xi.OTHER,je}(ye)}return ke}catch{return null}var fe}function Me(ye,fe){var Ft;Fe(fe);const ke=Z(),xe=function(gn){try{return parseInt(gn.bandwidth/1e3)}catch{return null}}(ye),je=function(gn){try{return isNaN(gn.duration)?NaN:Math.round(1e3*gn.duration)}catch{return null}}(ye),Ge=function(gn){try{return 100*parseInt(x.getSafeAverageThroughput(gn)/100)}catch{return null}}(fe),nt=function(gn){try{const Sn=S.pr,wn=C.getCurrentBufferLevel(gn);return isNaN(Sn)||isNaN(wn)?null:100*parseInt(wn/Sn*10)}catch{return null}}(fe),ft=ne(fe),bt=function(gn){try{const Sn=k.getPossibleVoRepresentationsFilteredBySettings(gn).map(wn=>wn.bitrateInKbit);return Math.max(...Sn)}catch{return null}}((Ft=ye.representation)==null?void 0:Ft.mediaInfo),qt=S.pr,Yt=function(gn){if(W&&W.length!==0){for(let Sn of W)if(Sn.getType()===gn)return Sn.probeNextRequest()}}(fe);let mn;fe===L.default.VIDEO&&(mn=xi.VIDEO),fe===L.default.AUDIO&&(mn=xi.AUDIO),fe===L.default.TEXT&&(mn=ye.representation.mediaInfo.mimeType==="application/mp4"?xi.TIMED_TEXT:xi.CAPTION);let Nn=he.get().streaming.cmcd.rtp;return Nn||(Nn=function(gn){try{let Sn=$.getPlaybackRate();Sn||(Sn=1);let{bandwidth:wn,mediaType:On,representation:We,duration:ht}=gn;if(!We.mediaInfo)return NaN;let ct=ne(On);ct===0&&(ct=500);let _t=wn*ht/1e3/(ct/Sn/1e3),Gt=he.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(he.get().streaming.cmcd.rtpSafetyFactor)?he.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(_t*Gt/100)+1)}catch{return NaN}}(ye)),isNaN(Nn)||(ke.rtp=Nn),Yt&&(ye.url!==Yt.url?ke.nor=encodeURIComponent(_r.default.getRelativeUrl(ye.url,Yt.url)):Yt.range&&(ke.nrr=Yt.range)),xe&&(ke.br=xe),mn&&(ke.ot=mn),isNaN(je)||(ke.d=je),isNaN(Ge)||(ke.mtp=Ge),isNaN(nt)||(ke.dl=nt),isNaN(ft)||(ke.bl=ft),isNaN(bt)||(ke.tb=bt),isNaN(qt)||qt===1||(ke.pr=qt),z[fe]&&(ke.bs=!0,z[fe]=!1),!N[fe]&&G[fe]||(ke.su=!0,N[fe]=!1,G[fe]=!0),ke}function Fe(ye){G.hasOwnProperty(ye)||(G[ye]=!1),N.hasOwnProperty(ye)||(N[ye]=!1),z.hasOwnProperty(ye)||(z[ye]=!1)}function Z(){const ye=be(),fe={};let ke=he.get().streaming.cmcd.cid?he.get().streaming.cmcd.cid:S.cid;if(ke=ye.contentID?ye.contentID:ke,fe.v=he.get().streaming.cmcd.version??1,fe.sid=he.get().streaming.cmcd.sid?he.get().streaming.cmcd.sid:S.sid,fe.sid=ye.sessionID?ye.sessionID:fe.sid,fe.sid=`${fe.sid}`,ke&&(fe.cid=`${ke}`),isNaN(S.pr)||S.pr===1||S.pr===null||(fe.pr=S.pr),S.st&&(fe.st=S.st),S.sf&&(fe.sf=S.sf),fe.v===2){let xe=1e3*$.getCurrentLiveLatency();isNaN(xe)||(fe.ltc=xe);const je=S.msd;le||isNaN(je)||(fe.msd=je,le=!0)}return fe}function ne(ye){try{const fe=C.getCurrentBufferLevel(ye);return isNaN(fe)?null:100*parseInt(10*fe)}catch{return null}}function we(ye){try{S.pr=ye.playbackRate}catch{}}function _e(ye){try{const fe=_.getIsDynamic(ye.data)?ko:ss,ke=ye.protocol&&ye.protocol==="MSS"?Ro:Rf;S.st=`${fe}`,S.sf=`${ke}`}catch{}}function ae(ye){try{ye.state&&ye.mediaType&&ye.state===te.default.BUFFER_EMPTY&&(z[ye.mediaType]||(z[ye.mediaType]=!0),N[ye.mediaType]||(N[ye.mediaType]=!0))}catch{}}function me(){for(let ye in z)z.hasOwnProperty(ye)&&(z[ye]=!0);for(let ye in N)N.hasOwnProperty(ye)&&(N[ye]=!0)}return b={getCmcdData:Se,getQueryParameter:function(ye){try{if(Ae()){const fe=Se(ye),ke=ly(pe(fe));return se.trigger(za.default.CMCD_DATA_GENERATED,{url:ye.url,mediaType:ye.mediaType,cmcdData:fe,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch{return null}},getHeaderParameters:function(ye){try{if(Ae()){const fe=Se(ye),ke=function(xe){let je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const Ge={};if(!xe)return Ge;const nt=Object.entries(xe),ft=Object.entries(VT).concat(Object.entries((je==null?void 0:je.customHeaderMap)||{})),bt=nt.reduce((qt,Yt)=>{var mn,Nn;const[Ft,gn]=Yt,Sn=((mn=ft.find(wn=>wn[1].includes(Ft)))===null||mn===void 0?void 0:mn[0])||Sl;return(Nn=qt[Sn])!==null&&Nn!==void 0||(qt[Sn]={}),qt[Sn][Ft]=gn,qt},{});return Object.entries(bt).reduce((qt,Yt)=>{let[mn,Nn]=Yt;return qt[mn]=ly(Nn,je),qt},Ge)}(pe(fe),he.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[Sl]:["ltc"],[Al]:["msd"]}});return se.trigger(za.default.CMCD_DATA_GENERATED,{url:ye.url,mediaType:ye.mediaType,cmcdData:fe,headers:ke}),ke}return null}catch{return null}},getCmcdParametersFromManifest:be,setConfig:function(ye){ye&&(ye.abrController&&(k=ye.abrController),ye.dashMetrics&&(C=ye.dashMetrics),ye.throughputController&&(x=ye.throughputController),ye.playbackController&&($=ye.playbackController),ye.serviceDescriptionController&&(H=ye.serviceDescriptionController))},reset:function(){se.off(te.default.PLAYBACK_RATE_CHANGED,we,this),se.off(te.default.MANIFEST_LOADED,_e,this),se.off(te.default.BUFFER_LEVEL_STATE_CHANGED,ae,b),se.off(te.default.PLAYBACK_SEEKED,me,b),se.off(te.default.PLAYBACK_STARTED,V,b),se.off(te.default.PLAYBACK_PLAYING,j,b),Ie()},initialize:function(ye){se.on(te.default.PLAYBACK_RATE_CHANGED,we,b),se.on(te.default.MANIFEST_LOADED,_e,b),se.on(te.default.BUFFER_LEVEL_STATE_CHANGED,ae,b),se.on(te.default.PLAYBACK_SEEKED,me,b),se.on(te.default.PERIOD_SWITCH_COMPLETED,ee,b),ye?se.on(te.default.MANIFEST_LOADING_STARTED,V,b):se.on(te.default.PLAYBACK_STARTED,V,b),se.on(te.default.PLAYBACK_PLAYING,j,b)},isCmcdEnabled:Ae},_=Mr(de).getInstance(),T=ge.getLogger(b),Ie(),b}Lf.__dashjs_factory_name="CmcdModel";var $d=ve.default.getSingletonFactory(Lf);const wl="CMSD-Dynamic",og="CMSD-Static",ls=Ba;function Qr(_,b,T){return xo("parse",_,b,T)}const Il="List";function ra(_,b){return{value:_,src:b}}const yu="Inner List",jd="Date",lg=`${pu} or ${qr}`;function xa(_){let b,T=1,S="";const k=Qr(_,lg);if(_[0]==="-"&&(T=-1,_=_.substring(1)),_.length<=0)throw k;const C=/^(\d+)?/g,$=C.exec(_);if($[0].length===0)throw k;if(S+=$[1],(_=_.substring(C.lastIndex))[0]==="."){if(S.length>12)throw k;const H=/^(\.\d+)?/g,x=H.exec(_);if(_=_.substring(H.lastIndex),x[0].length===0||x[1].length>4||(S+=x[1],S.length>16))throw k;b=parseFloat(S)*T}else{if(S.length>15)throw k;if(b=parseInt(S)*T,Fd(b))throw Qr(S,lg)}return ra(b,_)}function kl(_,b){const T=_[0];if(T==='"')return function(S){let k="",C=0;if(S[C]!=='"')throw Qr(S,qi);for(C++;S.length>C;){if(S[C]==="\\"){if(S.length<=C+1||(C++,S[C]!=='"'&&S[C]!=="\\"))throw Qr(S,qi);k+=S[C]}else{if(S[C]==='"')return ra(k,S.substring(++C));if(Ta.test(S[C]))throw Qr(S,qi);k+=S[C]}C++}throw Qr(S,qi)}(_);if(/^[-0-9]/.test(T))return xa(_);if(T==="?")return function(S){let k=0;if(S[k]!=="?")throw Qr(S,mu);if(k++,S[k]==="1")return ra(!0,S.substring(++k));if(S[k]==="0")return ra(!1,S.substring(++k));throw Qr(S,mu)}(_);if(T===":")return function(S){if(S[0]!==":"||(S=S.substring(1)).includes(":")===!1)throw Qr(S,gu);const k=/(^.*?)(:)/g,C=k.exec(S)[1];return S=S.substring(k.lastIndex),ra(new Uint8Array([...atob(C)].map($=>$.charCodeAt(0))),S)}(_);if(/^[a-zA-Z*]/.test(T))return function(S,k){if(/^[a-zA-Z*]$/.test(S[0])===!1)throw Qr(S,Hi);const C=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,$=C.exec(S)[1];return S=S.substring(C.lastIndex),ra(Symbol.for($),S)}(_);if(T==="@")return function(S){let k=0;if(S[k]!=="@")throw Qr(S,jd);k++;const C=xa(S.substring(k));if(Number.isInteger(C.value)===!1)throw Qr(S,jd);return ra(new Date(1e3*C.value),C.src)}(_);throw Qr(_,Or)}function Df(_){let b=0;if(/^[a-z*]$/.test(_[b])===!1)throw Qr(_,ay);let T="";for(;_.length>b;){if(/^[a-z0-9_\-.*]$/.test(_[b])===!1)return ra(T,_.substring(b));T+=_[b],b++}return ra(T,_.substring(b))}function Rl(_,b){let T;for(;_.length>0&&_[0]===";";){const S=Df(_=_.substring(1).trim()),k=S.value;let C=!0;if((_=S.src)[0]==="="){const $=kl(_=_.substring(1));C=$.value,_=$.src}T==null&&(T={}),T[k]=C}return ra(T,_)}function dy(_,b){const T=kl(_),S=Rl(_=T.src);return _=S.src,ra(new Ra(T.value,S.value),_)}function Nf(_,b){return _[0]==="("?function(T,S){if(T[0]!=="(")throw Qr(T,yu);T=T.substring(1);const k=[];for(;T.length>0;){if((T=T.trim())[0]===")"){const $=Rl(T=T.substring(1));return ra(new Ra(k,$.value),$.src)}const C=dy(T);if(k.push(C.value),(T=C.src)[0]!==" "&&T[0]!==")")throw Qr(T,yu)}throw Qr(T,yu)}(_):dy(_)}const ug=og.toLowerCase(),qd=wl.toLowerCase(),Pf=["mb","st","sf","v"],Mf="stream",KT={video:ls.VIDEO,audio:ls.AUDIO,text:ls.TIMED_TEXT,stream:Mf};function cy(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C;function $(){k={},C={}}function H(z){z&&Object.keys(z).forEach(G=>{Pf.includes(G)||delete z[G]})}function x(z){try{return(G=z)?Object.entries(function(re,le){try{const{src:de,value:se}=function(he,ge){const Ie={};for(;he.length>0;){let ee;const V=Df(he),j=V.value;if((he=V.src)[0]==="="){const X=Nf(he.substring(1),ge);ee=X.value,he=X.src}else{const X=Rl(he,ge);ee=new Ra(!0,X.value),he=X.src}if(Ie[j]=ee,(he=he.trim()).length===0)return ra(Ie,he);if(he[0]!==","||(he=he.substring(1).trim()).length===0||he[0]===",")throw Qr(he,Rs)}return ra(Ie,he)}(re.trim(),le);if(de!=="")throw Qr(de,Rs);return se}catch(de){throw Qr(re,Rs,de)}}(G)).reduce((re,le)=>{let[de,se]=le;const{value:he}=se;return re[de]=typeof he=="symbol"?os(he):he,re},{}):{}}catch(re){S.error("Failed to parse CMSD-Static response header value:",re)}var G}function W(z){try{const re=(G=z)?function(de,se){try{const{src:he,value:ge}=function(Ie,ee){const V=[];for(;Ie.length>0;){const j=Nf(Ie,ee);if(V.push(j.value),(Ie=j.src.trim()).length===0)return ra(V,Ie);if(Ie[0]!==","||(Ie=Ie.substring(1).trim()).length===0||Ie[0]===",")throw Qr(Ie,Il)}return ra(V,Ie)}(de.trim(),se);if(he!=="")throw Qr(he,Il);return ge}catch(he){throw Qr(de,Il,he)}}(G):[],le=re[re.length-1];return(le==null?void 0:le.params)||{}}catch(re){return S.error("Failed to parse CMSD-Dynamic response header value:",re),{}}var G}function Y(z){return KT[z]||ls.OTHER}function N(z,G,re){const le=z===og?k:C,de=le[G]||{},se=le[Mf]||{};return de[re]||se[re]}return T={setConfig:function(){},initialize:function(){},reset:function(){$()},parseResponseHeaders:function(z,G){let re=null,le=null;for(const se in z){const he=z[se];switch(se){case ug:re=x(he),b.trigger(D.default.CMSD_STATIC_HEADER,re);break;case qd:le||(le=W(he))}}let de=Mf;return re&&re.ot?de=re.ot:G&&(de=Y(G)),H(k[de]),H(C[de]),re&&(k[de]=Object.assign(k[de]||{},re)),le&&(C[de]=Object.assign(C[de]||{},le)),{static:re,dynamic:le}},getMaxBitrate:function(z){let G=Y(z);return N(wl,G,"mb")||-1},getEstimatedThroughput:function(z){let G=Y(z);return N(wl,G,"etp")||null},getResponseDelay:function(z){let G=Y(z);return N(wl,G,"rd")||null},getRoundTripTime:function(z){let G=Y(z);return N(wl,G,"rtt")||null}},S=(0,Le.default)(_).getInstance().getLogger(T),$(),T}cy.__dashjs_factory_name="CmsdModel";var fy=ve.default.getSingletonFactory(cy),Of=t(1926);function hy(){let _,b;function T(){b={}}return _={reset:function(){T()},processResponseHeaders:function(S){if(!(S&&S.headers&&S.request&&S.request.url))return;const k=S.headers[L.default.COMMON_ACCESS_TOKEN_HEADER];if(k){const C=_r.default.getHostFromUrl(S.request.url);C&&(b[C]=k)}},getCommonAccessTokenForUrl:function(S){if(!S)return null;const k=_r.default.getHostFromUrl(S);return k?b[k]?b[k]:null:void 0}},T(),_}hy.__dashjs_factory_name="CommonAccessTokenController";var YT=ve.default.getSingletonFactory(hy);function my(){let _,b;return _={setConfig:function(T){T&&T.serviceDescriptionController&&(b=T.serviceDescriptionController)},isAdaptationsIncluded:function(T){var k;const{adaptationSetsArray:S}=((k=b==null?void 0:b.getServiceDescriptionSettings())==null?void 0:k.clientDataReporting)??{};return!S||(S==null?void 0:S.length)===0||S.includes(T)},isServiceLocationIncluded:function(T,S){var C;if(T===Re.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:k}=((C=b==null?void 0:b.getServiceDescriptionSettings())==null?void 0:C.clientDataReporting)??{};return!k||(k==null?void 0:k.length)===0||k.includes(S)}},_}my.__dashjs_factory_name="ClientDataReportingController";var gy=ve.default.getSingletonFactory(my);function py(){let _,b,T;const S=this.context;function k(C,$,H,x,W){var N;const Y=function(z,G){let re=[];return re=G===w.default.PERIOD?z[w.default.SUPPLEMENTAL_PROPERTY]||[]:[...z[w.default.ESSENTIAL_PROPERTY]||[],...z[w.default.SUPPLEMENTAL_PROPERTY]||[]],re.find(le=>le.schemeIdUri===L.default.URL_QUERY_INFO_SCHEME&&le.UrlQueryInfo||le.schemeIdUri===L.default.EXT_URL_QUERY_INFO_SCHEME&&le.ExtUrlQueryInfo)}($,W);(function(z,G,re,le){re.initialQueryString="";let de="";const se=(z==null?void 0:z.ExtUrlQueryInfo)||(z==null?void 0:z.UrlQueryInfo);de=se&&se.queryString?G&&G.length>0?G+"&"+se.queryString:se.queryString:G,(se==null?void 0:se.useMPDUrlQuery)==="true"&&le&&(de=de?de+"&"+le:le),re.initialQueryString=de})(Y,x.initialQueryString,C,H),function(z,G,re){var de,se;if(!z)return void(G.finalQueryString=re);const le=((de=z==null?void 0:z.ExtUrlQueryInfo)==null?void 0:de.queryTemplate)||((se=z==null?void 0:z.UrlQueryInfo)==null?void 0:se.queryTemplate)||"";G.finalQueryString=le===w.default.QUERY_PART?G==null?void 0:G.initialQueryString:""}(Y,C,x.finalQueryString),C.sameOriginOnly=(N=Y==null?void 0:Y.ExtUrlQueryInfo)==null?void 0:N.sameOriginOnly,C.queryParams=_r.default.parseQueryParams(C==null?void 0:C.finalQueryString),C.includeInRequests=function(z,G){var re;return z?(re=z.ExtUrlQueryInfo)!=null&&re.includeInRequests?z.ExtUrlQueryInfo.includeInRequests.split(" "):[w.default.SEGMENT_TYPE]:G}(Y,x.includeInRequests)}return b=(0,Le.default)(S).getInstance().getLogger(_),_={getFinalQueryString:function(C){try{if(!T)return null;if(C.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE||C.type===Re.HTTPRequest.INIT_SEGMENT_TYPE){const $=C.representation;if(!$)return null;const H=$.adaptation,x=H.period,W=T.period[x.index].adaptation[H.index].representation[$.index],Y=new URL(C.url),N=!W.sameOriginOnly||T.origin===Y.origin;if(W.includeInRequests.includes(w.default.SEGMENT_TYPE)&&N)return W.queryParams}else if(C.type===Re.HTTPRequest.MPD_TYPE){if([w.default.MPD_TYPE,w.default.MPD_PATCH_TYPE].some($=>T.includeInRequests.includes($)))return T.queryParams}else if(C.type===Re.HTTPRequest.CONTENT_STEERING_TYPE&&T.includeInRequests.includes(w.default.STEERING_TYPE))return T.queryParams}catch($){return b.error($),null}},createFinalQueryStrings:function(C){T={origin:new URL(C.url).origin,period:[]};const $=C.url.split("?")[1];k(T,C,$,{initialQueryString:"",includeInRequests:[]},w.default.MPD),C.Period.forEach(H=>{const x={adaptation:[]};k(x,H,$,T,w.default.PERIOD),H.AdaptationSet.forEach(W=>{const Y={representation:[]};k(Y,W,$,x,w.default.ADAPTATION_SET),W.Representation.forEach(N=>{const z={};k(z,N,$,Y,w.default.REPRESENTATION),Y.representation.push(z)}),x.adaptation.push(Y)}),T.period.push(x)})}},_}py.__dashjs_factory_name="ExtUrlQueryInfoController";var dg=ve.default.getSingletonFactory(py),cg=class{constructor(_){this.url=_.url,this.method=_.method,this.responseType=_.responseType!==void 0?_.responseType:null,this.headers=_.headers!==void 0?_.headers:{},this.credentials=_.credentials!==void 0?_.credentials:null,this.mode=_.mode!==void 0?_.mode:null,this.timeout=_.timeout!==void 0?_.timeout:0,this.cmcd=_.cmcd!==void 0?_.cmcd:null,this.customData=_.customData!==void 0?_.customData:null}},fg=class{constructor(_){this.request=_.request,this.url=_.url!==void 0?_.url:null,this.redirected=_.redirected!==void 0&&_.redirected,this.status=_.status!==void 0?_.status:null,this.statusText=_.statusText!==void 0?_.statusText:"",this.type=_.type!==void 0?_.type:"",this.headers=_.headers!==void 0?_.headers:{},this.data=_.data!==void 0?_.data:null,this.resourceTiming=_.resourceTiming!==void 0?_.resourceTiming:null}};function vy(_){_=_||{};const b=this.context,T=_.errHandler,S=_.dashMetrics,k=_.mediaPlayerModel,C=_.boxParser,$=_.errors,H=_.requestTimeout||0,x=(0,oe.default)(b).getInstance(),W=(0,J.default)(b).getInstance();let Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V,j;function X(pe,Ae){const be=function(){Z()},Se=function(Ft){const gn=new Date;fe&&(fe=!1,(!Ft.lengthComputable||Ft.lengthComputable&&Ft.total!==Ft.loaded)&&(me.firstByteDate=gn,ft.resourceTiming.responseStart=gn.getTime())),Ft.lengthComputable&&(me.bytesLoaded=ft.length=Ft.loaded,me.bytesTotal=ft.resourceTiming.encodedBodySize=Ft.total,ft.length=Ft.total,ft.resourceTiming.encodedBodySize=Ft.loaded),Ft.noTrace||(ye.push({s:xe,d:Ft.time?Ft.time:gn.getTime()-xe.getTime(),b:[Ft.loaded?Ft.loaded-je:0],t:Ft.throughput}),me.traces=ye,xe=gn,je=Ft.loaded),Ge&&(clearTimeout(Ge),Ge=null),W.get().streaming.fragmentRequestProgressTimeout>0&&(Ge=setTimeout(function(){j.warn("Abort request "+nt.url+" due to progress timeout"),qt.abort(nt),be()},W.get().streaming.fragmentRequestProgressTimeout)),pe.progress&&Ft&&pe.progress(Ft)},Me=function(){Z(!0)},Fe=function(Ft){let gn;if(Ft.lengthComputable){let Sn=Ft.loaded/Ft.total*100;gn="Request timeout: loaded: "+Ft.loaded+", out of: "+Ft.total+" : "+Sn.toFixed(3)+"% Completed"}else gn="Request timeout: non-computable download size";j.warn(gn)},Z=function(){let Ft=arguments.length>0&&arguments[0]!==void 0&&arguments[0];N.indexOf(nt)!==-1&&N.splice(N.indexOf(nt),1),Ge&&(clearTimeout(Ge),Ge=null),Ie.processResponseHeaders(ft),ne(),we(),function(gn){const Sn=ge.getResponseInterceptors();return Sn?Sn.reduce((wn,On)=>wn.then(We=>On(We)),Promise.resolve(gn)):Promise.resolve(gn)}(ft).then(gn=>{if(ft=gn,function(Sn,wn,On){const We=Sn.customData.request,ht=W.get().streaming.cmsd&&W.get().streaming.cmsd.enabled?de.parseResponseHeaders(wn.headers,We.mediaType):null;S.addHttpRequest(We,wn.url,wn.status,wn.headers,On,ht)}(nt,ft,ye),Ft)pe.abort&&pe.abort(me);else if(me.type===Re.HTTPRequest.MPD_TYPE&&(S.addManifestUpdate(me),x.trigger(D.default.MANIFEST_LOADING_FINISHED,{requestObject:me})),ft.status>=200&&ft.status<=299&&ft.data)pe.success&&pe.success(ft.data,ft.statusText,ft.url),pe.complete&&pe.complete(me,ft.statusText);else{try{ft.status===404&&W.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&me.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE&&k.getRetryAttemptsForType(Re.HTTPRequest.MEDIA_SEGMENT_TYPE)===Ae&&x.trigger(D.default.ATTEMPT_BACKGROUND_SYNC)}catch{}ae()}})},ne=function(){me.startDate=ke,me.endDate=new Date,me.firstByteDate=me.firstByteDate||ke},we=function(){ft.resourceTiming.responseEnd=Date.now(),function(Ft,gn){if(!W.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||Ft.range)return;const Sn=performance.getEntriesByType("resource");if(Sn===void 0||Sn.length<=0)return;let wn=0,On=null;for(;wn<Sn.length;){if(Sn[wn].name===Ft.url){On=Sn[wn];break}wn+=1}(function(We){return We&&!isNaN(We.responseStart)&&We.responseStart>0&&!isNaN(We.responseEnd)&&We.responseEnd>0&&!isNaN(We.transferSize)&&We.transferSize>0})(On)&&(Ft.customData.request.resourceTimingValues=On,gn.resourceTiming.startTime=On.startTime,gn.resourceTiming.encodedBodySize=On.encodedBodySize,gn.resourceTiming.responseStart=On.startTime,gn.resourceTiming.responseEnd=On.responseEnd,gn.resourceTiming.duration=On.duration)}(nt,ft)},_e=function(Ft,gn,Sn){return new Promise(wn=>{(function(On){const We=ge.getRequestInterceptors();return We?We.reduce((ht,ct)=>ht.then(_t=>ct(_t)),Promise.resolve(On)):Promise.resolve(On)})(gn).then(On=>{(gn=On).customData.onloadend=be,gn.customData.onprogress=Se,gn.customData.onabort=Me,gn.customData.ontimeout=Fe,Sn.resourceTiming.startTime=Date.now(),Ft.load(gn,Sn),wn()})})},ae=function(){if(Ae>0){Ae--,pe&&pe.request&&(pe.request.retryAttempts+=1);let Ft={config:pe};G.push(Ft),Ft.timeout=setTimeout(function(){G.indexOf(Ft)!==-1&&(G.splice(G.indexOf(Ft),1),X(pe,Ae))},k.getRetryIntervalsForType(me.type))}else{if(me.type===Re.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;T.error(new Pe.default(re[me.type],me.url+" is not available",{request:me,response:ft})),pe.error&&pe.error(me,"error",ft.statusText,ft),pe.complete&&pe.complete(me,ft.statusText)}},me=pe.request,ye=[];let fe,ke,xe,je,Ge,nt,ft;if(me.bytesLoaded=NaN,me.bytesTotal=NaN,me.firstByteDate=null,me.traces=[],fe=!0,ke=new Date,xe=ke,je=0,Ge=null,!S||!T)throw new Error("config object is not correct or missing");const bt=function(Ft){let gn,Sn;return Ft.hasOwnProperty("availabilityTimeComplete")&&Ft.availabilityTimeComplete===!1&&window.fetch&&Ft.responseType==="arraybuffer"&&Ft.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE?(he||(he=Ua(b).create(),he.setConfig({dashMetrics:S,boxParser:C})),gn=he,Sn=L.default.FILE_LOADER_TYPES.FETCH):(se||(se=Zr(b).create()),gn=se,Sn=L.default.FILE_LOADER_TYPES.XHR),{loader:gn,fileLoaderType:Sn}}(me),qt=bt.loader;var Yt;me.fileLoaderType=bt.fileLoaderType,me.headers={},function(Ft){var wn,On;const gn=Ft==null?void 0:Ft.serviceLocation,Sn=(On=(wn=Ft==null?void 0:Ft.mediaInfo)==null?void 0:wn.id)==null?void 0:On.toString();if(ee.isServiceLocationIncluded(Ft.type,gn)&&ee.isAdaptationsIncluded(Sn)&&le.isCmcdEnabled()){const We=le.getCmcdParametersFromManifest(),ht=We.mode?We.mode:W.get().streaming.cmcd.mode;if(ht===L.default.CMCD_MODE_QUERY){Ft.url=_r.default.removeQueryParameterFromUrl(Ft.url,L.default.CMCD_QUERY_KEY);const ct=function(_t){try{const Gt=[],In=le.getQueryParameter(_t);return In&&Gt.push(In),Gt}catch{return[]}}(Ft);Ft.url=_r.default.addAdditionalQueryParameterToUrl(Ft.url,ct)}else ht===L.default.CMCD_MODE_HEADER&&(Ft.headers=Object.assign(Ft.headers,le.getHeaderParameters(Ft)))}}(Yt=me),Yt.retryAttempts===0&&function(Ft){let gn=V.getFinalQueryString(Ft);gn&&(Ft.url=_r.default.addAdditionalQueryParameterToUrl(Ft.url,gn))}(Yt),function(Ft){if(Ft.queryParams){const gn=Object.keys(Ft.queryParams).map(Sn=>({key:Sn,value:Ft.queryParams[Sn]}));Ft.url=_r.default.addAdditionalQueryParameterToUrl(Ft.url,gn)}}(Yt),function(Ft){const gn=Ie.getCommonAccessTokenForUrl(Ft.url);gn&&(Ft.headers[L.default.COMMON_ACCESS_TOKEN_HEADER]=gn)}(Yt),me.range&&(me.headers.Range="bytes="+me.range);const mn=ge.getXHRWithCredentialsForType(me.type);nt=new cg({url:me.url,method:Re.HTTPRequest.GET,responseType:me.responseType,headers:me.headers,credentials:mn?"include":"omit",timeout:H,cmcd:le.getCmcdData(me),customData:{request:me}}),ft=new fg({request:nt,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let Nn=new Date().getTime();if(isNaN(me.delayLoadingTime)||Nn>=me.delayLoadingTime)return N.push(nt),_e(qt,nt,ft);{let Ft={httpRequest:nt,httpResponse:ft};return z.push(Ft),Ft.delayTimeout=setTimeout(function(){if(z.indexOf(Ft)!==-1){z.splice(z.indexOf(Ft),1);try{ke=new Date,xe=ke,N.push(Ft.httpRequest),_e(qt,Ft.httpRequest,Ft.httpResponse)}catch{Ft.httpRequest.onloadend()}}},me.delayLoadingTime-Nn),Promise.resolve()}}return Y={abort:function(){G.forEach(pe=>{clearTimeout(pe.timeout),pe.config.request&&pe.config.abort&&pe.config.abort(pe.config.request)}),G=[],z.forEach(pe=>clearTimeout(pe.delayTimeout)),z=[],N.forEach(pe=>{const Ae=pe.customData;Ae&&(Ae.request&&Ae.request.type===Re.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(Ae.onloadend=Ae.onprogress=void 0,Ae.abort&&Ae.abort()))}),N=[]},load:function(pe){return pe.request?X(pe,k.getRetryAttemptsForType(pe.request.type)):(pe.error&&pe.error(pe.request,"error"),Promise.resolve())},reset:function(){N=[],z=[],G=[],se&&se.reset(),he&&he.reset(),se=null,he=null},resetInitialSettings:function(){se&&se.resetInitialSettings()},setConfig:function(pe){pe&&(pe.commonAccessTokenController&&(Ie=pe.commonAccessTokenController),pe.extUrlQueryInfoController&&(V=pe.extUrlQueryInfoController))}},j=(0,Le.default)(b).getInstance().getLogger(Y),N=[],z=[],G=[],le=$d(b).getInstance(),ee=gy(b).getInstance(),de=fy(b).getInstance(),ge=(0,Of.default)(b).getInstance(),Ie=YT(b).getInstance(),V=dg(b).getInstance(),re={[Re.HTTPRequest.MPD_TYPE]:$.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[Re.HTTPRequest.XLINK_EXPANSION_TYPE]:$.DOWNLOAD_ERROR_ID_XLINK_CODE,[Re.HTTPRequest.INIT_SEGMENT_TYPE]:$.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[Re.HTTPRequest.MEDIA_SEGMENT_TYPE]:$.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Re.HTTPRequest.INDEX_SEGMENT_TYPE]:$.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Re.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:$.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Re.HTTPRequest.OTHER_TYPE]:$.DOWNLOAD_ERROR_ID_CONTENT_CODE},Y}vy.__dashjs_factory_name="HTTPLoader";var WT=ve.default.getClassFactory(vy);function Ff(){let _,b;function T(){b={}}function S(){T()}return S(),_={getLoader:function(k){for(var C in b)if(b.hasOwnProperty(C)&&k.startsWith(C))return b[C];return WT},registerLoader:function(k,C){b[k]=C},unregisterLoader:function(k){b[k]&&delete b[k]},unregisterAllLoader:T,reset:S},_}Ff.__dashjs_factory_name="SchemeLoaderFactory";var yy=ve.default.getSingletonFactory(Ff);function Ey(_){_=_||{};const b=this.context;let T,S,k;return S=yy(b).getInstance(),T={abort:function(){k&&k.abort()},load:function(C){k||(k=S.getLoader(C&&C.request?C.request.url:null)(b).create({errHandler:_.errHandler,mediaPlayerModel:_.mediaPlayerModel,dashMetrics:_.dashMetrics,boxParser:_.boxParser?_.boxParser:null,constants:_.constants?_.constants:null,dashConstants:_.dashConstants?_.dashConstants:null,urlUtils:_.urlUtils?_.urlUtils:null,requestTimeout:isNaN(_.requestTimeout)?0:_.requestTimeout,errors:_.errors})),k.load(C)},reset:function(){S&&(S.reset(),S=null),k&&typeof k.reset=="function"&&k.reset(),k=null},resetInitialSettings:function(){k&&typeof k.resetInitialSettings=="function"&&k.resetInitialSettings()}},T}Ey.__dashjs_factory_name="URLLoader";var Eu=ve.default.getClassFactory(Ey),by=class extends Ye{constructor(_){super(_),this.checkForExistenceOnly=!0}};function Ty(_){_=_||{};const b=this.context,T=_.eventBus,S=_.events,k=_.urlUtils,C=_.errors,$=_.streamId;let H,x;return H={abort:function(){x&&x.abort()},checkForExistence:function(W){const Y=function(N){T.trigger(S.CHECK_FOR_EXISTENCE_COMPLETED,{request:W,exists:N})};if(W){let N=new by(W.url);x.load({request:N,success:function(){Y(!0)},error:function(){Y(!1)}})}else Y(!1)},load:function(W){const Y=function(N,z){T.trigger(S.LOADING_COMPLETED,{request:W,response:N||null,error:z||null,sender:H})};W?x.load({request:W,progress:function(N){T.trigger(S.LOADING_PROGRESS,{request:W,stream:N.stream,streamId:$}),N.data&&T.trigger(S.LOADING_DATA_PROGRESS,{request:W,response:N.data||null,error:null,sender:H})},success:function(N){Y(N)},error:function(N,z,G){Y(void 0,new Pe.default(C.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,G,z))},abort:function(N){N&&T.trigger(S.LOADING_ABANDONED,{mediaType:N.mediaType,request:N,sender:H})}}):Y(void 0,new Pe.default(C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){x&&(x.abort(),x.reset(),x=null)},resetInitialSettings:function(){x&&x.resetInitialSettings()}},x=Eu(b).create({errHandler:_.errHandler,errors:C,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,urlUtils:k,constants:L.default,boxParser:_.boxParser,dashConstants:_.dashConstants,requestTimeout:_.settings.get().streaming.fragmentRequestTimeout}),H}Ty.__dashjs_factory_name="FragmentLoader";var QT=ve.default.getClassFactory(Ty);function _y(_){_=_||{};const b=this.context,T=(0,oe.default)(b).getInstance(),S=_.errHandler,k=_.mediaPlayerModel,C=_.dashMetrics,$=(0,Le.default)(b).getInstance(),H=_.streamInfo;let x,W,Y;function N(){return H.id}function z(){for(let re in Y)Y[re].reset();Y={}}function G(re){if(!re.sender)return;const le=re.request,de=re.response,se=le.isInitializationRequest(),he=le.representation.mediaInfo.streamInfo;if(re.error&&(le.mediaType===L.default.AUDIO||le.mediaType===L.default.VIDEO||le.mediaType===L.default.TEXT&&le.representation.mediaInfo.isFragmented)&&T.trigger(D.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:re.request.serviceLocation}),!de||!he)return void W.warn("No "+le.mediaType+" bytes to push or stream is inactive.");const ge=function(Ie,ee,V,j){const X=new Ur;return X.streamId=V,X.segmentType=ee.type,X.start=ee.startTime,X.duration=ee.duration,X.end=X.start+X.duration,X.bytes=Ie,X.index=ee.index,X.representation=ee.representation,X.endFragment=j,X}(de,le,H.id,re.type!==D.default.FRAGMENT_LOADING_PROGRESS);T.trigger(se?D.default.INIT_FRAGMENT_LOADED:D.default.MEDIA_FRAGMENT_LOADED,{chunk:ge,request:le},{streamId:he.id,mediaType:le.mediaType})}return x={getStreamId:N,getModel:function(re){let le=Y[re];return le||(le=jt(b).create({streamInfo:H,type:re,dashMetrics:C,fragmentLoader:QT(b).create({dashMetrics:C,mediaPlayerModel:k,errHandler:S,settings:_.settings,boxParser:_.boxParser,eventBus:T,events:D.default,errors:Q,dashConstants:_.dashConstants,urlUtils:_.urlUtils,streamId:N()}),debug:$,eventBus:T,events:D.default}),Y[re]=le),le},reset:function(){T.off(te.default.FRAGMENT_LOADING_COMPLETED,G,this),T.off(te.default.FRAGMENT_LOADING_PROGRESS,G,this),z()}},W=$.getLogger(x),z(),T.on(te.default.FRAGMENT_LOADING_COMPLETED,G,x),T.on(te.default.FRAGMENT_LOADING_PROGRESS,G,x),x}_y.__dashjs_factory_name="FragmentController";var XT=ve.default.getClassFactory(_y),ZT=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},JT=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};class hg{constructor(b){if(this.offset=b._offset,this.type=b.type,this.size=b.size,this.boxes=[],b.boxes)for(let T=0;T<b.boxes.length;T++)this.boxes.push(new hg(b.boxes[T]));switch(this.isComplete=!0,b.type){case"sidx":if(this.timescale=b.timescale,this.earliest_presentation_time=b.earliest_presentation_time,this.first_offset=b.first_offset,this.references=b.references,b.references){this.references=[];for(let T=0;T<b.references.length;T++){let S={reference_type:b.references[T].reference_type,referenced_size:b.references[T].referenced_size,subsegment_duration:b.references[T].subsegment_duration};this.references.push(S)}}break;case"emsg":this.id=b.id,this.version=b.version===1?1:0,this.value=b.value,this.timescale=b.timescale,this.scheme_id_uri=b.scheme_id_uri,this.presentation_time_delta=b.version===1?b.presentation_time:b.presentation_time_delta,this.event_duration=b.event_duration,this.message_data=b.message_data;break;case"mdhd":this.timescale=b.timescale;break;case"mfhd":this.sequence_number=b.sequence_number;break;case"subs":this.entry_count=b.entry_count,this.entries=b.entries;break;case"tfhd":this.base_data_offset=b.base_data_offset,this.sample_description_index=b.sample_description_index,this.default_sample_duration=b.default_sample_duration,this.default_sample_size=b.default_sample_size,this.default_sample_flags=b.default_sample_flags,this.flags=b.flags;break;case"tfdt":this.version=b.version,this.baseMediaDecodeTime=b.baseMediaDecodeTime,this.flags=b.flags;break;case"trun":if(this.sample_count=b.sample_count,this.first_sample_flags=b.first_sample_flags,this.data_offset=b.data_offset,this.flags=b.flags,this.samples=b.samples,b.samples){this.samples=[];for(let T=0,S=b.samples.length;T<S;T++){let k={sample_size:b.samples[T].sample_size,sample_duration:b.samples[T].sample_duration,sample_composition_time_offset:b.samples[T].sample_composition_time_offset};this.samples.push(k)}}break;case"prft":this.version=b.version,this.reference_track_ID=b.reference_track_ID,this.ntp_timestamp_sec=b.ntp_timestamp_sec,this.ntp_timestamp_frac=b.ntp_timestamp_frac,this.media_time=b.media_time,this.flags=b.flags}}getChildBox(b){for(let T=0;T<this.boxes.length;T++)if(this.boxes[T].type===b)return this.boxes[T]}getChildBoxes(b){let T=[];for(let S=0;S<this.boxes.length;S++)this.boxes[S].type===b&&T.push(this.boxes[S]);return T}}var mg=hg;function bu(){let _,b;function T(k){let C=[];if(!k||!b||typeof b.fetchAll!="function")return C;let $,H=b.fetchAll(k);for(let x=0,W=H.length;x<W;x++)$=S(H[x]),$&&C.push($);return C}function S(k){if(!k)return null;let C=new mg(k);return k.hasOwnProperty("_incomplete")&&(C.isComplete=!k._incomplete),C}return _={getBox:function(k){return k&&b&&b.boxes&&b.boxes.length!==0&&typeof b.fetch=="function"?S(b.fetch(k)):null},getBoxes:T,setData:function(k){b=k},getLastBox:function(){if(!b||!b.boxes||!b.boxes.length)return null;let k=T(b.boxes[b.boxes.length-1].type);return k.length>0?k[k.length-1]:null}},_}bu.__dashjs_factory_name="IsoFile";var e_=ve.default.getClassFactory(bu),Tu=t(6877),Uf=class{constructor(_){let{found:b,sizeOfLastCompletedBox:T,sizeOfLastFoundTargetBox:S,startOffsetOfLastCompletedBox:k,startOffsetOfLastFoundTargetBox:C,typeOfLastCompletedBox:$,typeOfLastTargetBox:H}=_;this.found=b!==void 0&&b,this.sizeOfLastCompletedBox=T!==void 0?T:0,this.sizeOfLastFoundTargetBox=S!==void 0?S:0,this.startOffsetOfLastCompletedBox=k!==void 0?k:0,this.startOffsetOfLastFoundTargetBox=C!==void 0?C:0,this.typeOfLastCompletedBox=$!==void 0?$:null,this.typeOfLastTargetBox=H!==void 0?H:null}};function gg(){let _,b,T=this.context;function S($){if(!$)return null;$.fileStart===void 0&&($.fileStart=0);let H=Tu.parseBuffer($),x=e_(T).create();return x.setData(H),x}function k($,H){return $[H+3]>>>0|$[H+2]<<8>>>0|$[H+1]<<16>>>0|$[H]<<24>>>0}function C($,H){return String.fromCharCode($[H++])+String.fromCharCode($[H++])+String.fromCharCode($[H++])+String.fromCharCode($[H])}return b={findInitRange:function($){let H,x,W=null;const Y=S($);if(!Y)return W;const N=Y.getBox("ftyp"),z=Y.getBox("moov");return _.debug("Searching for initialization."),z&&z.isComplete&&(H=N?N.offset:z.offset,x=z.offset+z.size-1,W=H+"-"+x,_.debug("Found the initialization.  Range: "+W)),W},findLastTopIsoBoxCompleted:function($,H,x){if(x===void 0&&(x=0),!H||x+8>=H.byteLength)return new Uf({found:!1});const W=H instanceof ArrayBuffer?new Uint8Array(H):H;let Y,N=0,z=0,G=null;for(;x<W.byteLength;){const re=k(W,x),le=C(W,x+4);if(re===0)break;x+re<=W.byteLength&&($.indexOf(le)>=0?Y=new Uf({found:!0,startOffsetOfLastFoundTargetBox:x,sizeOfLastFoundTargetBox:re,typeOfLastTargetBox:le}):(N=x,z=re,G=le)),x+=re}return Y||new Uf({found:!1,startOffsetOfLastCompletedBox:N,sizeOfLastCompletedBox:z,typeOfLastCompletedBox:G})},getMediaTimescaleFromMoov:function($){let H=S($),x=H?H.getBox("mdhd"):void 0;return x?x.timescale:NaN},getSamplesInfo:function($){if(!$||$.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let H,x,W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V,j,X=S($),pe=X.getBoxes("moof"),Ae=X.getBoxes("mfhd");V=X.getBoxes("moof").length,ee=Ae[Ae.length-1].sequence_number,W=0,z=[];let be=-1,Se=-1;for(se=0;se<pe.length;se++){let Me=pe[se],Fe=Me.getChildBoxes("traf");for(le=0;le<Fe.length;le++){let Z=Fe[le],ne=Z.getChildBox("tfhd"),we=Z.getChildBox("tfdt");N=we.baseMediaDecodeTime;let _e=Z.getChildBoxes("trun"),ae=Z.getChildBoxes("subs");for(de=0;de<_e.length;de++){let me=_e[de];for(W=me.sample_count,Ie=(ne.base_data_offset||0)+(me.data_offset||0),re=0;re<W;re++){G=me.samples[re],H=G.sample_duration!==void 0?G.sample_duration:ne.default_sample_duration,Y=G.sample_size!==void 0?G.sample_size:ne.default_sample_size,x=G.sample_composition_time_offset!==void 0?G.sample_composition_time_offset:0;let ye={dts:N,cts:N+x,duration:H,offset:Me.offset+Ie,size:Y,subSizes:[Y]};if(ae)for(he=0;he<ae.length;he++){let fe=ae[he];if(be<fe.entry_count-1&&re>Se&&(be++,Se+=fe.entries[be].sample_delta),re==Se){ye.subSizes=[];let ke=fe.entries[be];for(ge=0;ge<ke.subsample_count;ge++)ye.subSizes.push(ke.subsamples[ge].subsample_size)}}z.push(ye),Ie+=Y,N+=H}}j=N-we.baseMediaDecodeTime}}return{sampleList:z,lastSequenceNumber:ee,totalDuration:j,numSequences:V}},parse:S},_=(0,Le.default)(T).getInstance().getLogger(b),b}gg.__dashjs_factory_name="BoxParser";var Hd=ve.default.getSingletonFactory(gg);function pg(_){const b=this.context,T=_.adapter,S=_.baseURLController,k=_.streamInfo,C=_.timelineConverter,$=_.debug,H=_.eventBus,x=_.events,W=_.dashConstants,Y=hn(b).getInstance();let N,z,G,re,le,de,se,he,ge;function Ie(V,j){const X=new JT;X.id=V.id,X.bitrate=V.bandwidth,X.width=V.width,X.height=V.height,X.tilesHor=1,X.tilesVert=1,V.essentialProperties&&V.essentialProperties.forEach(pe=>{if(L.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(pe.schemeIdUri)>=0&&pe.value){const Ae=pe.value.split("x");Ae.length!==2||isNaN(Ae[0])||isNaN(Ae[1])||(X.tilesHor=parseInt(Ae[0],10),X.tilesVert=parseInt(Ae[1],10))}}),j?se.updateSegmentData(V).then(pe=>{(function(Ae,be,Se){let Me=[];const Fe=function(Z,ne){const we=[];let _e,ae,me,ye,fe=0;for(_e=0,ae=Z.segments.length;_e<ae;_e++)me=Z.segments[_e],ye=mr(C,T.getIsDynamic(),ne,me.startTime,me.duration,me.timescale,me.media,me.mediaRange,fe),ye&&(we.push(ye),ye=null,fe++);return we}(Se,be);be.segments=Fe,be.fragmentDuration=be.segmentDuration||(be.segments&&be.segments.length>0?be.segments[0].duration:NaN),Ae.segmentDuration=be.segments[0].duration,Ae.readThumbnail=function(Z,ne){let we=null;Me.some(_e=>{if(_e.start<=Z&&_e.end>Z)return we=_e.url,!0}),we?ne(we):be.segments.some(_e=>{if(_e.mediaStartTime<=Z&&_e.mediaStartTime+_e.duration>Z){const ae=S.resolve(be.path),me=new cg({method:"get",url:ae.url,responseType:"arraybuffer",customData:{request:{range:_e.mediaRange},onloadend:function(fe){let ke=ge.getSamplesInfo(fe.target.response),xe=new Blob([fe.target.response.slice(ke.sampleList[0].offset,ke.sampleList[0].offset+ke.sampleList[0].size)],{type:"image/jpeg"}),je=window.URL.createObjectURL(xe);Me.push({start:_e.mediaStartTime,end:_e.mediaStartTime+_e.duration,url:je}),ne&&ne(je)}}}),ye=new fg({request:me});return he.load(me,ye),!0}})}})(X,V,pe)}):(X.startNumber=V.startNumber,X.segmentDuration=V.segmentDuration,X.timescale=V.timescale,X.templateUrl=function(pe){const Ae=Y.isRelative(pe.media)?Y.resolve(pe.media,S.resolve(pe.path).url):pe.media;return Ae?Fr(Ae,pe.id):""}(V)),X.tilesHor>0&&X.tilesVert>0&&(X.widthPerTile=X.width/X.tilesHor,X.heightPerTile=X.height/X.tilesVert,z.push(X))}function ee(){z=[],G=[],le=-1,de=null,re&&(re.reset(),re=null)}return N={addTracks:function(){if(!k||!T||(de=T.getMediaInfoForType(k,L.default.IMAGE),!de))return;const V=T.getVoRepresentations(de);V&&V.length>0&&V.forEach(j=>{(j.segmentInfoType===w.default.SEGMENT_TEMPLATE&&j.segmentDuration>0&&j.media||j.segmentInfoType===w.default.SEGMENT_TIMELINE)&&Ie(j),j.segmentInfoType===w.default.SEGMENT_BASE&&Ie(j,!0),G.push(j)}),z.length>0&&z.sort((j,X)=>j.bitrate-X.bitrate)},getCurrentTrack:function(){return le<0?null:z[le]},getCurrentTrackIndex:function(){return le},getRepresentations:function(){return G},getThumbnailRequestForTime:function(V){let j;const X=T.getVoRepresentations(de);for(let pe=0;pe<X.length;pe++)if(z[le].id===X[pe].id){j=X[pe];break}return re.getSegmentRequestForTime(de,j,V)},getTracks:function(){return z},reset:ee,setTrackById:function(V){if(!z||z.length===0)return;const j=z.findIndex(X=>X.id===V);j!==-1&&(le=j)},setTrackByIndex:function(V){z&&z.length!==0&&(V>=z.length&&(V=z.length-1),le=V)}},ee(),he=Zr(b).create({}),ge=Hd(b).getInstance(),se=Nt(b).create({events:x,eventBus:H,streamInfo:k,timelineConverter:C,dashConstants:W,dashMetrics:_.dashMetrics,segmentBaseController:_.segmentBaseController,type:L.default.IMAGE}),re=kt(b).create({streamInfo:k,type:L.default.IMAGE,timelineConverter:C,segmentsController:se,baseURLController:S,debug:$,eventBus:H,events:x,dashConstants:W,urlUtils:Y}),re.initialize(!!T&&T.getIsDynamic()),N}pg.__dashjs_factory_name="ThumbnailTracks";var _u=ve.default.getClassFactory(pg);function Sy(_){const b=this.context,T=_.streamInfo;let S,k;function C(H){k.setTrackByIndex(H)}function $(){k&&k.reset()}return S={getCurrentTrack:function(){return k.getCurrentTrack()},getCurrentTrackIndex:function(){return k.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return k.getRepresentations()},getStreamId:function(){return T.id},initialize:function(){k.addTracks();const H=k.getTracks();H&&H.length>0&&C(0)},provide:function(H,x){if(typeof x!="function")return;const W=k.getCurrentTrack();let Y,N;if(!W||W.segmentDuration<=0||H==null)return void x(null);N=k.getThumbnailRequestForTime(H),N&&(W.segmentDuration=N.duration),Y=H%W.segmentDuration;const z=Math.floor(Y*W.tilesHor*W.tilesVert/W.segmentDuration),G=new ZT;if(G.width=Math.floor(W.widthPerTile),G.height=Math.floor(W.heightPerTile),G.x=Math.floor(z%W.tilesHor)*W.widthPerTile,G.y=Math.floor(z/W.tilesHor)*W.heightPerTile,"readThumbnail"in W)return W.readThumbnail(H,re=>{G.url=re,x(G)});if(N)G.url=N.url,W.segmentDuration=NaN;else{const re=Math.floor(H/W.segmentDuration);G.url=function(le,de){const se=de+le.startNumber;return Fr(le.templateUrl,void 0,se,void 0,le.bandwidth,(se-1)*le.segmentDuration*le.timescale)}(W,re)}x(G)},reset:$,setTrackByIndex:C,setTrackById:function(H){k.setTrackById(H)}},$(),k=_u(b).create({streamInfo:T,adapter:_.adapter,baseURLController:_.baseURLController,timelineConverter:_.timelineConverter,debug:_.debug,eventBus:_.eventBus,events:_.events,dashConstants:_.dashConstants,dashMetrics:_.dashMetrics,segmentBaseController:_.segmentBaseController}),S}Sy.__dashjs_factory_name="ThumbnailController";var t_=ve.default.getClassFactory(Sy);function Ay(_){let b;_=_||{};let T=[];const S=(0,oe.default)(this.context).getInstance(),k=_.updateEventName,C=_.addBlacklistEventName;function $(x){T.indexOf(x)===-1&&(T.push(x),S.trigger(k,{entry:x}))}function H(x){$(x.entry)}return b={add:$,remove:function(x){const W=T.indexOf(x);W!==-1&&T.splice(W,1)},contains:function(x){return!!(T.length&&x&&x.length)&&T.indexOf(x)!==-1},reset:function(){C&&S.off(C,H,b),T=[]}},C&&S.on(C,H,b),b}Ay.__dashjs_factory_name="BlackListController";var zf=ve.default.getClassFactory(Ay);const wy=[L.default.VIDEO,L.default.AUDIO,L.default.TEXT,L.default.MUXED,L.default.IMAGE];function Su(_){_=_||{};const b=this.context,T=(0,oe.default)(b).getInstance(),S=hn(b).getInstance(),k=_.manifestModel,C=_.mediaPlayerModel,$=_.dashMetrics,H=_.manifestUpdater,x=_.adapter,W=_.timelineConverter,Y=_.capabilities,N=_.errHandler,z=_.abrController,G=_.playbackController,re=_.throughputController,le=_.eventController,de=_.mediaController,se=_.protectionController,he=_.textController,ge=_.videoModel;let Ie=_.streamInfo;const ee=_.settings;let V,j,X,pe,Ae,be,Se,Me,Fe,Z,ne,we,_e,ae,me,ye;function fe(mt,Qt,ln){return new Promise((en,Wt)=>{qt(),mn();let rt=ge.getElement();const Ct=[];wy.forEach(Zt=>{if((Zt!==L.default.TEXT||mt)&&(Zt!==L.default.VIDEO||!rt||rt&&/^VIDEO$/i.test(rt.nodeName))){const rn=ln.find(pt=>pt.mediaInfo.type===Zt);Ct.push(ke(Zt,mt,rn))}}),Promise.all(Ct).then(()=>{return Zt=Qt,new Promise(rn=>{const pt={},Ce=X.map(et=>{const yt=et.getRepresentation();return et.createBufferSinks(Zt,yt)});Promise.all(Ce).then(et=>{et.forEach(yt=>{yt&&(pt[yt.getType()]=yt)}),rn(pt)}).catch(()=>{rn(pt)})});var Zt}).then(Zt=>{if(X.length===0){const rn="No streams to play.";N.error(new Pe.default(Q.MANIFEST_ERROR_ID_NOSTREAMS_CODE,rn,k.getValue())),j.fatal(rn)}else _t();mt&&he.createTracks(Ie),en(Zt)}).catch(Zt=>{Wt(Zt)})})}function ke(mt,Qt,ln){let en,Wt=x.getAllMediaInfoForType(Ie,mt),rt=[],Ct=null;if(!Wt||Wt.length===0)return j.info("No "+mt+" data."),Promise.resolve();mt===L.default.VIDEO&&(Se=!0),mt===L.default.AUDIO&&(Me=!0);for(let rn=0,pt=Wt.length;rn<pt;rn++)Ct=Wt[rn],mt===L.default.TEXT&&Ct.isEmbedded&&(he.addEmbeddedTrack(Ie,Ct),rt.push(Ct)),xe(Ct)&&de.addTrack(Ct);if(rt.length>0&&(de.setInitialMediaSettingsForType(mt,Ie),he.addMediaInfosToBuffer(Ie,mt,rt)),Wt=Wt.filter(rn=>!rn.isEmbedded),Wt.length===0)return Promise.resolve();if(mt===L.default.IMAGE)return Z=t_(b).create({streamInfo:Ie,adapter:x,baseURLController:_.baseURLController,timelineConverter:_.timelineConverter,debug:ae,eventBus:T,events:D.default,dashConstants:w.default,dashMetrics:_.dashMetrics,segmentBaseController:_.segmentBaseController}),Z.initialize(),Promise.resolve();T.trigger(D.default.STREAM_INITIALIZING,{streamInfo:Ie,mediaInfo:Ct}),de.setInitialMediaSettingsForType(mt,Ie);let Zt=function(rn,pt){const Ce=rn&&rn.length>0?rn[0]:null;let et=Fe.getModel(Ce?Ce.type:null);const yt=Ce?Ce.type:null,tt=Ce?Ce.mimeType:null,zt=Ce?Ce.isFragmented:null;let Jt=yr(b).create({abrController:z,adapter:x,baseURLController:_.baseURLController,boxParser:_e,capabilities:Y,dashMetrics:_.dashMetrics,errHandler:N,fragmentModel:et,manifestModel:k,mediaController:de,mediaPlayerModel:C,mimeType:tt,playbackController:G,segmentBaseController:_.segmentBaseController,segmentBlacklistController:ne,settings:ee,streamInfo:Ie,textController:he,throughputController:re,timelineConverter:W,type:yt});return Jt.initialize(pt,Se,zt),X.push(Jt),Jt.setMediaInfoArray(rn),yt===L.default.TEXT&&he.addMediaInfosToBuffer(Ie,yt,rn,et),Jt}(Wt,Qt);if(en=de.getCurrentTrackFor(mt,Ie.id),en){const rn=mt===L.default.TEXT&&en.isEmbedded?Wt[0]:en,pt=new pn({newMediaInfo:rn,previouslySelectedRepresentation:ln});return Zt.selectMediaInfo(pt)}return Promise.resolve()}function xe(mt){const Qt=mt?mt.type:null;let ln;return Qt===L.default.MUXED?(ln="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",j.fatal(ln),N.error(new Pe.default(Q.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,ln,k.getValue())),!1):!(Qt!==L.default.TEXT&&Qt!==L.default.IMAGE&&mt.contentProtection&&mt.contentProtection.length>0&&!Y.supportsEncryptedMedia()&&(N.error(new Pe.default(Q.CAPABILITY_MEDIAKEYS_ERROR_CODE,Q.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function je(mt){let Qt=X?X.length:0;for(let ln=0;ln<Qt;ln++){let en=X[ln].getFragmentModel();en.abortRequests(),en.resetInitialSettings(),X[ln].reset(!1,mt)}he&&he.deactivateStream(Ie),Z&&(Z.reset(),Z=null),X=[],Ae=!1,be=!1,Gt(!1),nt(!1),T.trigger(D.default.STREAM_DEACTIVATED,{streamInfo:Ie})}function Ge(mt){je(mt),pe=!1,Se=!1,Me=!1,me=!1,ye=[]}function nt(mt){me=mt}function ft(){return Ie?Ie.start:NaN}function bt(){return Ie?Ie.id:null}function qt(){if(!ge||!z)throw new Error(L.default.MISSING_CONFIG_ERROR)}function Yt(mt){mt.error&&(N.error(mt.error),j.fatal(mt.error.message))}function mn(){if(le){const mt=x.getEventsFor(Ie);mt&&mt.length>0&&le.addInlineEvents(mt,Ie.id)}}function Nn(mt){let Qt=Ft(mt);return Qt?Qt.getMediaInfo():null}function Ft(mt){return mt?X.find(Qt=>Qt.getType()===mt):null}function gn(){let mt=ht();const Qt=mt.length;if(Qt!==0){for(let ln=0;ln<Qt;ln++)if(!mt[ln].isBufferingCompleted()&&(mt[ln].getType()===L.default.AUDIO||mt[ln].getType()===L.default.VIDEO))return void j.debug("onBufferingCompleted - One streamProcessor has finished but",mt[ln].getType(),"one is not buffering completed");j.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),be=!0,T.trigger(D.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Ie},{streamInfo:Ie})}else j.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function Sn(mt){le&&le.addInbandEvents(mt.events,Ie.id)}function wn(){_t()}function On(mt){return mt&&mt.type?We(mt.type):null}function We(mt){return mt?ht().filter(function(Qt){return Qt.getType()===mt})[0]:null}function ht(){let mt,Qt,ln=[];for(let en=0;en<X.length;en++)Qt=X[en],mt=Qt.getType(),mt!==L.default.AUDIO&&mt!==L.default.VIDEO&&mt!==L.default.TEXT||ln.push(Qt);return ln}function ct(){const mt=X.length;for(let Qt=0;Qt<mt&&X[Qt];Qt++)X[Qt].getScheduleController().startScheduleTimer()}function _t(){const mt=X.length;if(se){se.clearMediaInfoArray();for(let Qt=0;Qt<mt&&X[Qt];Qt++){const ln=X[Qt].getType(),en=X[Qt].getMediaInfo();if(ln===L.default.AUDIO||ln===L.default.VIDEO||ln===L.default.TEXT&&en&&en.isFragmented){let Wt=X[Qt].getMediaInfo();Wt&&se.initializeForMedia(Wt)}}se.handleKeySystemFromManifest()}pe||(pe=!0,ge.waitForReadyState(L.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{T.trigger(D.default.STREAM_INITIALIZED,{streamInfo:Ie})}))}function Gt(mt){we=mt}function In(){return we}return V={activate:function(mt,Qt){let ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise((en,Wt)=>{if(!Ae)return In()?(Ae=!0,T.trigger(D.default.STREAM_ACTIVATED,{streamInfo:Ie}),void en(Qt)):void function(rt,Ct){return fe(rt,Ct,arguments.length>2&&arguments[2]!==void 0?arguments[2]:[])}(mt,Qt,ln).then(rt=>{Ae=!0,ln&&ln.length>0&&ct(),T.trigger(D.default.STREAM_ACTIVATED,{streamInfo:Ie}),en(rt)}).catch(rt=>{Wt(rt)});en(Qt)})},checkAndHandleCompletedBuffering:function(){be||X.forEach(mt=>{mt.checkAndHandleCompletedBuffering()})},deactivate:je,getAdapter:function(){return x},getCurrentMediaInfoForType:function(mt){const Qt=We(mt);return Qt?Qt.getMediaInfo():null},getCurrentRepresentationForType:function(mt){const Qt=We(mt);return Qt?Qt.getRepresentation():null},getDuration:function(){return Ie?Ie.duration:NaN},getHasAudioTrack:function(){return Me},getHasFinishedBuffering:function(){return be},getHasVideoTrack:function(){return Se},getId:bt,getIsActive:function(){return Ae},getIsEndedEventSignaled:function(){return me},getPreloaded:In,getRepresentationForTypeById:function(mt,Qt){let ln;if(mt===L.default.IMAGE){if(!Z)return null;ln=Z.getPossibleVoRepresentations()}else ln=function(rt){let Ct=Ft(rt);return Ct?Ct.getAllMediaInfos():[]}(mt).flatMap(rt=>z.getPossibleVoRepresentationsFilteredBySettings(rt,!0));if(!ln||ln.length===0)return null;const en=ln.filter(Wt=>Wt.id===Qt);return en&&en.length>0?en[0]:null},getRepresentationForTypeByIndex:function(mt,Qt){let ln;if(mt===L.default.IMAGE){if(!Z)return null;ln=Z.getPossibleVoRepresentations()}else{const en=Nn(mt);ln=z.getPossibleVoRepresentationsFilteredBySettings(en,!0)}return ln[Qt=Math.max(Math.min(Qt,ln.length-1),0)]},getRepresentationsByType:function(mt){if(qt(),mt===L.default.IMAGE)return Z?Z.getPossibleVoRepresentations():[];const Qt=Nn(mt);return z.getPossibleVoRepresentationsFilteredBySettings(Qt,!0)},getStartTime:ft,getStreamId:function(){return Ie?Ie.id:null},getStreamInfo:function(){return Ie},getStreamProcessors:ht,getThumbnailController:function(){return Z},initialize:function(){T.on(D.default.BUFFERING_COMPLETED,gn,V),T.on(D.default.INBAND_EVENTS,Sn,V),T.on(D.default.DATA_UPDATE_COMPLETED,wn,V),se&&(T.on(D.default.KEY_ERROR,Yt,V),T.on(D.default.SERVER_CERTIFICATE_UPDATED,Yt,V),T.on(D.default.LICENSE_REQUEST_COMPLETE,Yt,V),T.on(D.default.KEY_SYSTEM_SELECTED,Yt,V),T.on(D.default.KEY_SESSION_CREATED,Yt,V)),he.initializeForStream(Ie),T.trigger(D.default.STREAM_UPDATED,{streamInfo:Ie})},initializeForTextWithMediaSource:function(mt){return new Promise((Qt,ln)=>{ke(L.default.TEXT,mt,null).then(()=>function(){const en=We(L.default.TEXT);return en?en.createBufferSinks():Promise.resolve()}()).then(()=>{he.createTracks(Ie),Qt()}).catch(en=>{ln(en)})})},prepareQualityChange:function(mt){const Qt=We(mt.mediaType);Qt&&Qt.prepareQualityChange(mt)},prepareTrackChange:function(mt){if(!Ae||!Ie)return;be=!1;let Qt=mt.newMediaInfo,ln=k.getValue(),en=On(Qt);if(!en)return;let Wt=G.getTime();if(j.info("Stream -  Process track changed at current time "+Wt),ln.refreshManifestOnSwitchTrack)ye.push(mt),H.getIsUpdating()||(j.debug("Stream -  Refreshing manifest for switch track"),H.refreshManifest());else{en.clearScheduleTimer(),en.setTrackSwitchInProgress(!0);const rt=en.getRepresentation();en.selectMediaInfo(new pn({newMediaInfo:Qt})).then(()=>{const Ct=!!(mt&&mt.options&&mt.options.hasOwnProperty("replaceBuffer"))&&mt.options.replaceBuffer;return en.prepareTrackSwitch(rt,Ct)}).then(()=>{en.setTrackSwitchInProgress(!1)})}},reset:function(mt){Fe&&(Fe.reset(),Fe=null),z&&Ie&&z.clearDataForStream(Ie.id),ne&&(ne.reset(),ne=null),he&&Ie&&he.clearDataForStream(Ie.id),de&&Ie&&de.clearDataForStream(Ie.id),Ge(mt),Ie=null,T.off(D.default.BUFFERING_COMPLETED,gn,V),T.off(D.default.INBAND_EVENTS,Sn,V),T.off(D.default.DATA_UPDATE_COMPLETED,wn,V),se&&(T.off(D.default.KEY_ERROR,Yt,V),T.off(D.default.SERVER_CERTIFICATE_UPDATED,Yt,V),T.off(D.default.LICENSE_REQUEST_COMPLETE,Yt,V),T.off(D.default.KEY_SYSTEM_SELECTED,Yt,V),T.off(D.default.KEY_SESSION_CREATED,Yt,V))},setIsEndedEventSignaled:nt,setMediaSource:function(mt){return new Promise((Qt,ln)=>{const en=[];for(let Wt=0;Wt<X.length;)xe(X[Wt].getMediaInfo())?(en.push(X[Wt].setMediaSource(mt)),Wt++):(X[Wt].reset(),X.splice(Wt,1));Promise.all(en).then(()=>{for(let Wt=0;Wt<X.length;Wt++)X[Wt].dischargePreBuffer();if(X.length===0){const Wt="No streams to play.";N.error(new Pe.default(Q.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Wt+"nostreams",k.getValue())),j.fatal(Wt)}Qt()}).catch(Wt=>{j.error(Wt),ln(Wt)})})},startPreloading:function(mt,Qt){let ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise((en,Wt)=>{In()?Wt():(j.info(`[startPreloading] Preloading next stream with id ${bt()}`),Gt(!0),fe(mt,Qt,ln).then(()=>{for(let rt=0;rt<X.length&&X[rt];rt++)X[rt].setExplicitBufferingTime(ft()),X[rt].getScheduleController().startScheduleTimer();en()}).catch(()=>{Gt(!1),Wt()}))})},startScheduleControllers:ct,triggerProtectionError:function(mt){Yt(mt)},updateData:function(mt){return new Promise(Qt=>{Ie=mt,le&&mn();let ln,en=[];for(let Wt=0,rt=X.length;Wt<rt;Wt++){let Ct=X[Wt];const Zt=Ct.getMediaInfo();en.push(Ct.updateStreamInfo(Ie));let rn=x.getAllMediaInfoForType(Ie,Ct.getType());if(rn=rn.filter(pt=>!pt.isEmbedded),Ct.setMediaInfoArray(rn),rn)for(let pt=0;pt<rn.length;pt++)x.areMediaInfosEqual(Zt,rn[pt])&&en.push(Ct.selectMediaInfo(new pn({newMediaInfo:rn[pt]})))}Promise.all(en).then(()=>{let Wt=[];for(;ye.length>0;){let rt=ye.pop(),Ct=rt.newMediaInfo;if(ln=On(rt.oldMediaInfo),!ln)return;const Zt=ln.getRepresentation();ln.setTrackSwitchInProgress(!0),Wt.push(ln.prepareTrackSwitch(Zt)),Wt.push(ln.selectMediaInfo(new pn({newMediaInfo:Ct})))}return Promise.all(Wt)}).then(()=>{_t(),ln&&ln.setTrackSwitchInProgress(!1),T.trigger(D.default.STREAM_UPDATED,{streamInfo:Ie}),Qt()}).catch(Wt=>{N.error(Wt)})})}},function(){try{ae=(0,Le.default)(b).getInstance(),j=ae.getLogger(V),Ge(),_e=Hd(b).getInstance(),ne=zf(b).create({updateEventName:D.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:D.default.SEGMENT_LOCATION_BLACKLIST_ADD}),Fe=XT(b).create({streamInfo:Ie,mediaPlayerModel:C,dashMetrics:$,errHandler:N,settings:ee,boxParser:_e,dashConstants:w.default,urlUtils:S})}catch(mt){throw mt}}(),V}Su.__dashjs_factory_name="Stream";var Gd=ve.default.getClassFactory(Su),n_=class{constructor(_){this.url=_||null,this.type=Re.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},Bf=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function Iy(){const _=this.context,b=hn(_).getInstance();let T,S,k,C,$,H,x,W,Y,N,z,G,re,le,de;function se(Se){Ie(Se,"baseUrl")}function he(Se){Ie(Se,"location")}function ge(Se){var Me,Fe;Se&&Se.throughputValues&&Se.throughputValues.serviceLocation&&(Me=Se.throughputValues.serviceLocation,Fe=Se.throughputValues,$[Me]||($[Me]=[]),$[Me].push(Fe),$[Me].length>4&&$[Me].shift())}function Ie(Se,Me){if(Se&&Se.request&&Se.request.serviceLocation){const Fe=Se.request.serviceLocation;C[Me].all.indexOf(Fe)===-1&&C[Me].all.push(Fe),C[Me].current=Fe}}function ee(){const Se=z.getValue();let Me=de.getContentSteering(Se);return Me||(Me=G.getServiceDescriptionSettings().contentSteering),Me}function V(){return new Promise(Se=>{try{const Me=ee();if(!Me||!Me.serverUrl)return void Se();const Fe=function(ne){let we=ne.serverUrl;k&&k.reloadUri&&(we=b.isRelative(k.reloadUri)?b.resolve(k.reloadUri,ne.serverUrl):k.reloadUri);const _e=[],ae=C.baseUrl.all.concat(C.location.all);if(ae.length>0){const me=ae.map(ke=>{const xe=function(je){if(!je||!$[je]||$[je].length===0)return-1;const Ge=re.getArithmeticMean($[je],$[je].length,!0);return parseInt(1e3*Ge)}(ke);return{serviceLocation:ke,throughput:xe}});let ye="",fe="";me.forEach((ke,xe)=>{xe!==0&&(ye+=",",fe+=","),ye+=ke.serviceLocation,fe+=ke.throughput>-1?ke.throughput:""}),_e.push({key:"_DASH_pathway",value:`"${ye}"`}),_e.push({key:"_DASH_throughput",value:fe})}return we=_r.default.addAdditionalQueryParameterToUrl(we,_e),we}(Me),Z=new n_(Fe);x.load({request:Z,success:ne=>{(function(we){we&&we[w.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(we[w.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(k=new Bf,k.version=we[w.default.CONTENT_STEERING_RESPONSE.VERSION],we[w.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(we[w.default.CONTENT_STEERING_RESPONSE.TTL])&&(k.ttl=we[w.default.CONTENT_STEERING_RESPONSE.TTL]),we[w.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(k.reloadUri=we[w.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),we[w.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(k.pathwayPriority=we[w.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),we[w.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(k.pathwayClones=we[w.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],k.pathwayClones=k.pathwayClones.filter(_e=>function(ae){return ae[w.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&ae[w.default.CONTENT_STEERING_RESPONSE.ID]&&ae[w.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ae[w.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][w.default.CONTENT_STEERING_RESPONSE.HOST]}(_e))),pe())})(ne),le.trigger(te.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:k,url:Fe}),Se()},error:(ne,we,_e,ae)=>{(function(me,ye){try{switch(S.warn("Error fetching data from content steering server",me),ye.status){case 410:break;case 429:const fe=ye&&ye.getResponseHeader?ye.getResponseHeader("retry-after"):null;fe!==null&&(k||(k={}),k.ttl=parseInt(fe)),pe();break;default:pe()}}catch(fe){S.error(fe)}})(ne,ae),Se(ne)},complete:()=>{C.baseUrl.all=j(C.baseUrl),C.location.all=j(C.location)}})}catch(Me){Se(Me)}})}function j(Se){return Se.all&&Se.all.length!==0&&Se.current?Se.all.filter(Me=>Me===Se.current):[]}function X(Se){try{const Me=[];return Se&&Se.length!==0&&k&&k.pathwayClones&&k.pathwayClones.length!==0&&k.pathwayClones.forEach(Fe=>{let Z=Se.filter(we=>Fe[w.default.CONTENT_STEERING_RESPONSE.BASE_ID]===we.serviceLocation),ne=null;if(Z&&Z.length>0&&(ne=Z[0]),ne){const we=new URL(ne.url);let _e=Fe[w.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][w.default.CONTENT_STEERING_RESPONSE.HOST];_e=_r.default.stringHasProtocol(_e)?_e:`${we.protocol}//${_e}`;const ae={synthesizedUrl:`${_e}${we.pathname}`,serviceLocation:Fe[w.default.CONTENT_STEERING_RESPONSE.ID],queryParams:Fe[w.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][w.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:ne};Me.push(ae)}}),Me}catch(Me){return S.error(Me),[]}}function pe(){k&&k.ttl&&!isNaN(k.ttl)&&(H&&clearTimeout(H),H=setTimeout(()=>{V()},1e3*k.ttl))}function Ae(){H&&clearTimeout(H),H=null}function be(){k=null,$={},C={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ae()}return T={reset:function(){be(),le.off(te.default.FRAGMENT_LOADING_STARTED,se,T),le.off(te.default.MANIFEST_LOADING_STARTED,he,T),le.off(te.default.THROUGHPUT_MEASUREMENT_STORED,ge,T)},setConfig:function(Se){Se&&(Se.adapter&&(de=Se.adapter),Se.errHandler&&(W=Se.errHandler),Se.dashMetrics&&(Y=Se.dashMetrics),Se.mediaPlayerModel&&(N=Se.mediaPlayerModel),Se.manifestModel&&(z=Se.manifestModel),Se.serviceDescriptionController&&(G=Se.serviceDescriptionController),Se.throughputController&&(re=Se.throughputController),Se.eventBus&&(le=Se.eventBus))},loadSteeringData:V,getCurrentSteeringResponseData:function(){return k},shouldQueryBeforeStart:function(){const Se=ee();return!!Se&&Se.queryBeforeStart},getSteeringDataFromManifest:ee,stopSteeringRequestTimer:Ae,getSynthesizedBaseUrlElements:function(Se){try{return X(Se).map(Me=>{const Fe=new na(Me.synthesizedUrl,Me.serviceLocation);return Fe.queryParams=Me.queryParams,Fe.dvbPriority=Me.reference.dvbPriority,Fe.dvbWeight=Me.reference.dvbWeight,Fe.availabilityTimeOffset=Me.reference.availabilityTimeOffset,Fe.availabilityTimeComplete=Me.reference.availabilityTimeComplete,Fe})}catch(Me){return S.error(Me),[]}},getSynthesizedLocationElements:function(Se){try{return X(Se).map(Me=>{const Fe=new An(Me.synthesizedUrl,Me.serviceLocation);return Fe.queryParams=Me.queryParams,Fe})}catch(Me){return S.error(Me),[]}},initialize:function(){x=Eu(_).create({errHandler:W,dashMetrics:Y,mediaPlayerModel:N,errors:Q}),le.on(te.default.FRAGMENT_LOADING_STARTED,se,T),le.on(te.default.MANIFEST_LOADING_STARTED,he,T),le.on(te.default.THROUGHPUT_MEASUREMENT_STORED,ge,T)}},S=(0,Le.default)(_).getInstance().getLogger(T),be(),T}Iy.__dashjs_factory_name="ContentSteeringController";var $f=ve.default.getSingletonFactory(Iy);function jf(){const _=this.context,b=(0,J.default)(_).getInstance();let T,S,k;return T={select:function(C){if(!C||C.length===0)return null;let $=null;return b.get().streaming.applyContentSteering&&($=function(H){const x=k.getCurrentSteeringResponseData();return x&&x.pathwayPriority&&x.pathwayPriority.length>0?function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],N=0,z=null;for(;N<W.length;){const G=W[N],re=Y.findIndex(le=>le.serviceLocation&&le.serviceLocation===G);if(re!==-1&&!S.contains(Y[re].serviceLocation)){z=Y[re];break}N+=1}return z}(x.pathwayPriority,H):null}(C)),$||($=function(H){return H[0]}(C)),$},setConfig:function(C){C.blacklistController&&(S=C.blacklistController),C.contentSteeringController&&(k=C.contentSteeringController)},reset:function(){S.reset()}},S=zf(_).create({updateEventName:D.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:D.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),k=$f(_).getInstance(),T}jf.__dashjs_factory_name="LocationSelector";var vg=ve.default.getClassFactory(jf);function yg(){const _=this.context,b=(0,oe.default)(_).getInstance(),T=hn(_).getInstance();let S,k,C,$,H,x,W,Y,N,z,G,re,le,de;function se(){C=NaN,W=!1,H=!0,x=!1,he()}function he(){$!==null&&(clearTimeout($),$=null)}function ge(be){he(),x||(isNaN(be)&&!isNaN(C)&&(be=1e3*C),isNaN(be)||(k.debug("Refresh manifest in "+be+" milliseconds."),$=setTimeout(V,be)))}function Ie(){let be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];W=!0;const Se=N.getValue();let Me=Se.url;Me&&(Me=_r.default.removeQueryParameterFromUrl(Me,L.default.CMCD_QUERY_KEY));let Fe=null;const Z=G.getPatchLocation(Se),ne=z.select(Z);let we=null;if(ne&&!be)Me=ne.url,Fe=ne.serviceLocation,we=ne.queryParams;else{const _e=function(me){const ye=G.getLocation(me),fe=le.getSynthesizedLocationElements(ye);return ye.concat(fe)}(Se),ae=z.select(_e);ae&&(Me=ae.url,Fe=ae.serviceLocation,we=ae.queryParams)}T.isRelative(Me)&&(Me=T.resolve(Me,Se.url)),Y.load(Me,Fe,we)}function ee(be){if(be){if(G.getIsPatch(be)){let Fe=be;be=N.getValue();let Z=G.isPatchValid(be,Fe),ne=Z;if(Z){let we=G.getPublishTime(be);G.applyPatchToManifest(be,Fe);let _e=G.getPublishTime(be);ne=we.getTime()!==_e.getTime()}if(!ne)return k.debug("Patch provided is invalid, performing full manifest refresh"),void Ie(!0);be.loadedTime=new Date}}else(be=N.getValue()).loadedTime=new Date;if(N.getValue()&&N.getValue().type===w.default.DYNAMIC&&be.type===w.default.STATIC)return b.trigger(D.default.DYNAMIC_TO_STATIC),W=!1,void(x=!0);N.setValue(be);const Se=new Date,Me=(Se.getTime()-be.loadedTime.getTime())/1e3;C=G.getManifestUpdatePeriod(be,Me),1e3*C>2147483647&&(C=2147483647e-3),b.trigger(D.default.MANIFEST_UPDATED,{manifest:be}),k.info("Manifest has been refreshed at "+Se+"["+Se.getTime()/1e3+"] "),H||ge()}function V(){H||(W?ge(de.get().streaming.manifestUpdateRetryInterval):Ie())}function j(be){be.error?be.error.code===Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&re.error(be.error):ee(be.manifest)}function X(){H=!1,ge()}function pe(){H=!de.get().streaming.scheduling.scheduleWhilePaused,H&&he()}function Ae(){W=!1}return S={initialize:function(){se(),b.on(D.default.STREAMS_COMPOSED,Ae,this),b.on(te.default.PLAYBACK_STARTED,X,this),b.on(te.default.PLAYBACK_PAUSED,pe,this),b.on(D.default.INTERNAL_MANIFEST_LOADED,j,this)},setManifest:function(be){ee(be)},refreshManifest:Ie,getIsUpdating:function(){return W},setConfig:function(be){be&&(be.manifestModel&&(N=be.manifestModel),be.adapter&&(G=be.adapter),be.manifestLoader&&(Y=be.manifestLoader),be.errHandler&&(re=be.errHandler),be.locationSelector&&(z=be.locationSelector),be.settings&&(de=be.settings),be.contentSteeringController&&(le=be.contentSteeringController))},reset:function(){b.off(te.default.PLAYBACK_STARTED,X,this),b.off(te.default.PLAYBACK_PAUSED,pe,this),b.off(D.default.STREAMS_COMPOSED,Ae,this),b.off(D.default.INTERNAL_MANIFEST_LOADED,j,this),se()}},k=(0,Le.default)(_).getInstance().getLogger(S),z=vg(_).create(),S}yg.__dashjs_factory_name="ManifestUpdater";var Eg=ve.default.getClassFactory(yg);function qf(){const _=this.context,b=(0,oe.default)(_).getInstance(),T=hn(_).getInstance();let S,k,C,$,H,x,W,Y,N,z,G,re,le,de,se,he;function ge(){Y=[],N=[],z=null,G=null,le=null,re=NaN,C=!1,$=!1,de=H.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ie(){H.get().streaming.utcSynchronization.enabled&&!C&&!$&&le&&le.value&&le.schemeIdUri&&!isNaN(re)&&!isNaN(H.get().streaming.utcSynchronization.backgroundAttempts)&&(G&&(Date.now()-G)/1e3<30||(Y=[],$=!0,ee(isNaN(H.get().streaming.utcSynchronization.backgroundAttempts)?2:H.get().streaming.utcSynchronization.backgroundAttempts)))}function ee(ae){try{if(ae<=0)return void we();const me=Date.now();x[le.schemeIdUri](le.value,function(ye){const fe=Date.now(),ke=j(me,fe,ye);Y.push(ke),ee(ae-1)},function(){we()})}catch{we()}}function V(){let ae=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||0;if(!N||N.length===0||ae>=N.length)return void X();let me=N[ae];if(me)if(x.hasOwnProperty(me.schemeIdUri)){const ye=new Date().getTime();x[me.schemeIdUri](me.value,function(fe){const ke=new Date().getTime(),xe=j(ye,ke,fe);le=me,X(xe)},function(){V(ae+1)})}else V(ae+1);else X()}function j(ae,me,ye){return ye-(me-(me-ae)/2)}function X(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,me=isNaN(ae);me&&H.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let ye=W.getLatestMPDRequestHeaderValueByID("Date"),fe=ye!==null?new Date(ye).getTime():Number.NaN;isNaN(fe)?ne(!0):ne(!1,fe-Date.now())}():ne(me,ae)}function pe(ae){let me=Date.parse(ae);return isNaN(me)&&(me=function(ye){let fe,ke,xe=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ye);return fe=Date.UTC(parseInt(xe[1],10),parseInt(xe[2],10)-1,parseInt(xe[3],10),parseInt(xe[4],10),parseInt(xe[5],10),xe[6]&&(parseInt(xe[6],10)||0),xe[7]&&1e3*parseFloat(xe[7])||0),xe[9]&&xe[10]&&(ke=60*parseInt(xe[9],10)+parseInt(xe[10],10),fe+=(xe[8]==="+"?-1:1)*ke*60*1e3),new Date(fe).getTime()}(ae)),me}function Ae(ae){return Date.parse(ae)}function be(ae){return Date.parse(ae)}function Se(ae,me,ye){ye()}function Me(ae,me,ye){let fe=pe(ae);isNaN(fe)?ye():me(fe)}function Fe(ae,me,ye,fe,ke){let xe,je,Ge=!1,nt=new XMLHttpRequest,ft=ke?Re.HTTPRequest.HEAD:Re.HTTPRequest.GET,bt=me.match(/\S+/g);if(me=bt.shift(),xe=function(){Ge||(Ge=!0,bt.length?Fe(ae,bt.join(" "),ye,fe,ke):fe())},je=function(){let qt,Yt;nt.status===200&&(qt=ke?nt.getResponseHeader("Date"):nt.response,Yt=ae(qt),isNaN(Yt)||(ye(Yt),Ge=!0))},T.isRelative(me)){const qt=he.resolve();qt&&(me=T.resolve(me,qt.url))}nt.open(ft,me),nt.timeout=5e3,nt.onload=je,nt.onloadend=xe,nt.send()}function Z(ae,me,ye){Fe(be,ae,me,ye,!0)}function ne(ae,me){if(isNaN(re)||isNaN(me)||ae||function(ye){try{const fe=_e(ye),ke=isNaN(de)?30:de,xe=isNaN(H.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:H.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,je=isNaN(H.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:H.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Ge=isNaN(H.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:H.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let nt;fe?(nt=Math.min(ke*xe,je),k.debug(`Increasing timeBetweenSyncAttempts to ${nt}`)):(nt=Math.max(ke/xe,Ge),k.debug(`Decreasing timeBetweenSyncAttempts to ${nt}`)),de=nt}catch{}}(me),!ae&&!isNaN(me)){z=Date.now(),C=!1;const ye=isNaN(re);re=me,ye&&Ie(),k.debug(`Completed UTC sync. Setting client - server offset to ${me}`)}ae&&(le=null,C=!1,se.error(new Pe.default(Q.TIME_SYNC_FAILED_ERROR_CODE,Q.TIME_SYNC_FAILED_ERROR_MESSAGE))),b.trigger(D.default.UPDATE_TIME_SYNC_OFFSET,{offset:me}),b.trigger(D.default.TIME_SYNCHRONIZATION_COMPLETED)}function we(){if(!Y||Y.length===0)return;const ae=Y.reduce((me,ye)=>me+ye,0)/Y.length;_e(ae)?k.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(k.debug(`Completed background UTC sync. Setting client - server offset to ${ae}`),re=ae,b.trigger(D.default.UPDATE_TIME_SYNC_OFFSET,{offset:re})),$=!1,G=Date.now()}function _e(ae){try{if(isNaN(re))return!0;const me=H.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(H.get().streaming.utcSynchronization.maximumAllowedDrift)?H.get().streaming.utcSynchronization.maximumAllowedDrift:100;return ae>=re-me&&ae<=re+me}catch{return!0}}return S={initialize:function(){ge(),x={"urn:mpeg:dash:utc:http-head:2014":Z,"urn:mpeg:dash:utc:http-xsdate:2014":Fe.bind(null,pe),"urn:mpeg:dash:utc:http-iso:2014":Fe.bind(null,Ae),"urn:mpeg:dash:utc:direct:2014":Me,"urn:mpeg:dash:utc:http-head:2012":Z,"urn:mpeg:dash:utc:http-xsdate:2012":Fe.bind(null,pe),"urn:mpeg:dash:utc:http-iso:2012":Fe.bind(null,Ae),"urn:mpeg:dash:utc:direct:2012":Me,"urn:mpeg:dash:utc:http-ntp:2014":Se,"urn:mpeg:dash:utc:ntp:2014":Se,"urn:mpeg:dash:utc:sntp:2014":Se}},attemptSync:function(ae,me){N=ae,C||(function(ye){try{if(!ye||!H.get().streaming.utcSynchronization.enabled)return!1;const fe=isNaN(de)?30:de;return!(z&&fe&&!isNaN(fe))||(Date.now()-z)/1e3>=fe}catch{return!0}}(me)?(C=!0,V()):b.trigger(D.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(ae){ae&&(ae.dashMetrics&&(W=ae.dashMetrics),ae.baseURLController&&(he=ae.baseURLController),ae.errHandler&&(se=ae.errHandler),ae.settings&&(H=ae.settings))},reset:function(){ge(),b.off(D.default.ATTEMPT_BACKGROUND_SYNC,Ie,S)}},k=(0,Le.default)(_).getInstance().getLogger(S),b.on(D.default.ATTEMPT_BACKGROUND_SYNC,Ie,S),S}qf.__dashjs_factory_name="TimeSyncController";const bg=ve.default.getSingletonFactory(qf);bg.HTTP_TIMEOUT_MS=5e3,ve.default.updateSingletonFactory(qf.__dashjs_factory_name,bg);var r_=bg;function ky(){let _,b,T,S,k;const C=this.context,$=(0,oe.default)(C).getInstance();return _={attachMediaSource:function(H){let x=window.URL.createObjectURL(b);return H.setSource(x),S==="managedMediaSource"&&(H.setDisableRemotePlayback(!0),b.addEventListener("startstreaming",()=>{$.trigger(te.default.MANAGED_MEDIA_SOURCE_START_STREAMING)}),b.addEventListener("endstreaming",()=>{$.trigger(te.default.MANAGED_MEDIA_SOURCE_END_STREAMING)})),x},createMediaSource:function(){let H="WebKitMediaSource"in window,x="MediaSource"in window;return"ManagedMediaSource"in window?(b=new ManagedMediaSource,S="managedMediaSource",k.info("Created ManagedMediaSource")):x?(b=new MediaSource,S="mediaSource",k.info("Created MediaSource")):H&&(b=new WebKitMediaSource,k.info("Created WebkitMediaSource")),b},detachMediaSource:function(H){H.setSource(null)},setConfig:function(H){H&&H.settings&&(T=H.settings)},setDuration:function H(x){b&&b.readyState==="open"&&(x===null&&isNaN(x)||b.duration!==x&&(x!==1/0||T.get().streaming.buffer.mediaSourceDurationInfinity||(x=Math.pow(2,32)),function(W){let Y=W.sourceBuffers;for(let N=0;N<Y.length;N++)if(Y[N].updating)return!0;return!1}(b)?setTimeout(H.bind(null,x),50):(k.info("Set MediaSource duration:"+x),b.duration=x)))},setSeekable:function(H,x){b&&typeof b.setLiveSeekableRange=="function"&&typeof b.clearLiveSeekableRange=="function"&&b.readyState==="open"&&H>=0&&H<x&&(b.clearLiveSeekableRange(),b.setLiveSeekableRange(H,x))},signalEndOfStream:function(H){if(!H||H.readyState!=="open")return;let x=H.sourceBuffers;for(let W=0;W<x.length;W++)if(x[W].updating||x[W].buffered.length===0)return;k.info("call to mediaSource endOfStream"),H.endOfStream()}},k=(0,Le.default)(C).getInstance().getLogger(_),_}ky.__dashjs_factory_name="MediaSourceController";var i_=ve.default.getSingletonFactory(ky);function Ry(){const _="urn:mpeg:dash:event:2012",T="urn:mpeg:dash:event:callback:2015",C="discarded",$="updated",H="added",x=this.context,W=(0,oe.default)(x).getInstance();let Y,N,z,G,re,le,de,se,he,ge,Ie;function ee(){if(!de||!se)throw new Error("setConfig function has to be called previously")}function V(){Ie=!1,z={},G={},re=null,ge=!1,le=Date.now()/1e3}function j(){try{if(!ge){ge=!0;const ne=se.getTime();let we=ne-le;we=le>0?Math.max(0,we):0,X(G,we,ne),X(z,we,ne),pe(G),pe(z),le=ne,ge=!1}}catch(ne){ge=!1,N.error(ne)}}function X(ne,we,_e){try{Me(ne,function(me){if(me!==void 0){const ye=isNaN(me.duration)?0:me.duration;me.calculatedPresentationTime<=_e&&me.calculatedPresentationTime+we+ye>=_e?Z(me,te.default.EVENT_MODE_ON_START):(Fe(_e,ye+we,me.calculatedPresentationTime)||function(fe){try{const ke=fe.eventStream.period.start+fe.eventStream.period.duration;return fe.calculatedPresentationTime>ke}catch(ke){return N.error(ke),!1}}(me))&&(N.debug(`Removing event ${me.id} from period ${me.eventStream.period.id} as it is expired or invalid`),function(fe,ke){try{const xe=ke.eventStream.schemeIdUri,je=ke.eventStream.period.id,Ge=ke.eventStream.value,nt=ke.id;fe[je][xe]=fe[je][xe].filter(ft=>Ge&&ft.eventStream.value&&ft.eventStream.value!==Ge||ft.id!==nt),fe[je][xe].length===0&&delete fe[je][xe]}catch(xe){N.error(xe)}}(ne,me))}})}catch(ae){N.error(ae)}}function pe(ne){try{for(const we in ne)ne.hasOwnProperty(we)&&Object.keys(ne[we]).length===0&&delete ne[we]}catch(we){N.error(we)}}function Ae(ne,we){let _e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const ae=ne.eventStream.schemeIdUri,me=ne.eventStream.value,ye=ne.id;let fe=C;we[ae]||(we[ae]=[]);const ke=we[ae].findIndex(xe=>(!me||xe.eventStream.value&&xe.eventStream.value===me)&&xe.id===ye);if(ke===-1)we[ae].push(ne),ne.triggeredReceivedEvent=!1,ne.triggeredStartEvent=!1,fe=H;else if(_e){const xe=we[ae][ke];ne.triggeredReceivedEvent=xe.triggeredReceivedEvent,ne.triggeredStartEvent=xe.triggeredStartEvent,we[ae][ke]=ne,fe=$}return fe}function be(ne){try{if(ne.eventStream.value==1){const we=ne.calculatedPresentationTime;let _e;_e=ne.calculatedPresentationTime==4294967295?NaN:ne.calculatedPresentationTime+ne.duration,W.trigger(te.default.MANIFEST_VALIDITY_CHANGED,{id:ne.id,validUntil:we,newDuration:_e,newManifestValidAfter:NaN},{mode:te.default.EVENT_MODE_ON_START})}}catch(we){N.error(we)}}function Se(ne){try{const we=se.getTime();Me(ne,function(_e){const ae=_e.eventStream&&_e.eventStream.period&&!isNaN(_e.eventStream.period.duration)?_e.eventStream.period.duration:NaN,me=_e.eventStream&&_e.eventStream.period&&!isNaN(_e.eventStream.period.start)?_e.eventStream.period.start:NaN;if(isNaN(ae)||isNaN(me))return;const ye=_e.calculatedPresentationTime;Math.abs(ye-we)<300&&Z(_e,te.default.EVENT_MODE_ON_START)})}catch(we){N.error(we)}}function Me(ne,we){try{if(ne){const _e=Object.keys(ne);for(let ae=0;ae<_e.length;ae++){const me=ne[_e[ae]],ye=Object.keys(me);for(let fe=0;fe<ye.length;fe++)me[ye[fe]].forEach(ke=>{ke!==void 0&&we(ke)})}}}catch(_e){N.error(_e)}}function Fe(ne,we,_e){try{return ne-we>_e}catch(ae){return N.error(ae),!1}}function Z(ne,we){try{const _e=se.getTime(),ae=ne.id;if(we===te.default.EVENT_MODE_ON_RECEIVE&&!ne.triggeredReceivedEvent)return N.debug(`Received event ${ae}`),ne.triggeredReceivedEvent=!0,void W.trigger(ne.eventStream.schemeIdUri,{event:ne},{mode:we});ne.triggeredStartEvent||(ne.eventStream.schemeIdUri===_&&ne.eventStream.value==1?ne.duration===0&&ne.presentationTimeDelta===0||(N.debug(`Starting manifest refresh event ${ae} at ${_e}`),function(){try{ee(),de.refreshManifest()}catch(me){N.error(me)}}()):ne.eventStream.schemeIdUri===T&&ne.eventStream.value==1?(N.debug(`Starting callback event ${ae} at ${_e}`),function(me){try{let ye=Zr(x).create({});const fe=new cg({method:"get",url:me,responseType:"arraybuffer",customData:{}}),ke=new fg({request:fe});ye.load(fe,ke)}catch(ye){N.error(ye)}}(ne.messageData instanceof Uint8Array?_r.default.uint8ArrayToString(ne.messageData):ne.messageData)):(N.debug(`Starting event ${ae} from period ${ne.eventStream.period.id} at ${_e}`),W.trigger(ne.eventStream.schemeIdUri,{event:ne},{mode:we}),he.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout(()=>{delete ne.messageData,delete ne.parsedMessageData},he.get().streaming.events.deleteEventMessageDataTimeout)),ne.triggeredStartEvent=!0)}catch(_e){N.error(_e)}}return Y={addInlineEvents:function(ne,we){try{if(ee(),z[we]||(z[we]={}),ne)for(let _e=0;_e<ne.length;_e++){let ae=ne[_e];if(!Fe(se.getTime(),isNaN(ae.duration)?0:ae.duration,ae.calculatedPresentationTime)){let me=Ae(ae,z[we],!0);me===H?(N.debug(`Added inline event with id ${ae.id} from period ${we}`),Z(ae,te.default.EVENT_MODE_ON_RECEIVE)):me===$&&N.debug(`Updated inline event with id ${ae.id} from period ${we}`)}}}catch(_e){throw _e}},addInbandEvents:function(ne,we){try{ee(),G[we]||(G[we]={});for(let _e=0;_e<ne.length;_e++){let ae=ne[_e];Fe(se.getTime(),isNaN(ae.duration)?0:ae.duration,ae.calculatedPresentationTime)||(Ae(ae,G[we],!1)===H?(ae.eventStream.schemeIdUri===_&&be(ae),N.debug(`Added inband event with id ${ae.id} from period ${we}`),Z(ae,te.default.EVENT_MODE_ON_RECEIVE)):N.debug(`Inband event with scheme_id_uri ${ae.eventStream.schemeIdUri}, value ${ae.eventStream.value}, period id ${we} and event id ${ae.id} was ignored because it has been added before.`))}j()}catch(_e){throw _e}},getInbandEvents:function(){return G},getInlineEvents:function(){return z},start:function(){try{ee(),N.debug("Start Event Controller");const ne=he.get().streaming.events.eventControllerRefreshDelay;Ie||isNaN(ne)||(Ie=!0,re=setInterval(j,ne))}catch(ne){throw ne}},setConfig:function(ne){try{if(!ne)return;ne.manifestUpdater&&(de=ne.manifestUpdater),ne.playbackController&&(se=ne.playbackController),ne.settings&&(he=ne.settings)}catch(we){throw we}},reset:function(){(function(){try{re!==null&&Ie&&(clearInterval(re),re=null,Ie=!1,function(){try{Se(G),Se(z)}catch(ne){N.error(ne)}}())}catch(ne){throw ne}})(),V()}},N=(0,Le.default)(x).getInstance().getLogger(Y),V(),Y}Ry.__dashjs_factory_name="EventController";var us=ve.default.getSingletonFactory(Ry),Cs={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},Tg=t(445),_g=t(1923);function Sg(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C,$,H,x,W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V,j,X,pe,Ae,be,Se,Me,Fe,Z,ne,we,_e,ae,me,ye,fe,ke,xe,je,Ge,nt,ft,bt,qt,Yt,mn,Nn,Ft;function gn(){if(!(H&&H.hasOwnProperty("load")&&j&&j.hasOwnProperty("initialize")&&j.hasOwnProperty("reset")&&j.hasOwnProperty("getClientTimeOffset")&&x&&V&&Y&&me))throw new Error(L.default.MISSING_CONFIG_ERROR)}function Sn(){(function(){try{const at=W.getStreamsInfo();if(!pe&&at.length===0)throw new Error("There are no periods in the MPD");pe&&at.length>0&&Y.updateManifestUpdateInfo({currentTime:me.getTime(),buffered:ae.getBufferRange(),presentationStartTime:at[0].start,clientTimeOffset:j.getClientTimeOffset()}),X.length>0&&function(bn){bn.length!==0?X=X.filter(Ln=>{const Mn=bn.filter(br=>br.id===Ln.getId()).length>0||Ln.getId()===pe.getId();return Mn||(S.debug(`Removing stream ${Ln.getId()}`),Ln.reset(!0),Ln=null),Mn}):S.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(at);const Vt=[];for(let bn=0,Ln=at.length;bn<Ln;bn++){const Mn=at[bn];Vt.push(On(Mn)),Y.addManifestUpdateStreamInfo(Mn)}Promise.all(Vt).then(()=>new Promise((bn,Ln)=>{pe?bn():We(at,bn,Ln)})).then(()=>{b.trigger(D.default.STREAMS_COMPOSED),Jt()}).catch(bn=>{throw bn})}catch(at){V.error(new Pe.default(Q.MANIFEST_ERROR_ID_NOSTREAMS_CODE,at.message+" nostreamscomposed",x.getValue())),we=!0,wh()}})()}function wn(){Yt=!0}function On(at){let Vt=ma(at.id);return Vt?Vt.updateData(at):(Vt=Gd(_).create({manifestModel:x,mediaPlayerModel:fe,dashMetrics:Y,manifestUpdater:$,adapter:W,timelineConverter:j,capabilities:k,capabilitiesFilter:C,errHandler:V,baseURLController:re,segmentBaseController:le,textController:be,abrController:se,playbackController:me,throughputController:he,eventController:Ie,mediaController:ge,protectionController:Ae,videoModel:ae,streamInfo:at,settings:qt}),X.push(Vt),Vt.initialize(),Promise.resolve())}function We(at,Vt,bn){try{Zt();const Ln=Y.getCurrentDVRInfo().range;if(Ln.end<Ln.start){mn&&clearTimeout(mn);const br=Math.min(1e3*(-1*(Ln.end-Ln.start)+2),2147483647);return S.debug(`Waiting for ${br} ms before playback can start`),b.trigger(D.default.AST_IN_FUTURE,{delay:br}),void(mn=setTimeout(()=>{We(at,Vt,bn)},br))}qt.get().streaming.applyProducerReferenceTime&&ye.calculateProducerReferenceTimeOffsets(at);const Mn=at[0].manifestInfo;if(qt.get().streaming.applyServiceDescription&&ye.applyServiceDescription(Mn),W.getIsDynamic()){const br=Os(0,Mn);me.computeAndSetLiveDelay(br,Mn)}(qt.get().streaming.applyContentSteering&&G.shouldQueryBeforeStart()?G.loadSteeringData():Promise.resolve()).then(()=>{const br=x.getValue();br&&re.update(br),ht(),Vt()}).catch(br=>{S.error(br),ht(),Vt()})}catch(Ln){bn(Ln)}}function ht(){const at=function(){let Ln;if(W.getIsDynamic()){const Mn=Y.getCurrentDVRInfo();Ln=(Mn&&Mn.range?Mn.range.end:0)-me.getOriginalLiveDelay();const br=Mn?Mn.range:null;if(br){if(isNaN(Nn)&&Nn.toString().indexOf("posix:")===-1){const Na=zr(!0);isNaN(Na)||(S.info(`Start time from URI parameters: ${Na}`),Ln=Math.min(Ln,Na))}else{S.info(`Start time provided by the app: ${Nn}`);const Na=ui(!0,Nn);isNaN(Na)||(Ln=Math.min(Ln,Na))}const vi=qt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Ln=Math.max(Ln,br.start+vi)}}else if(Ln=Sc()[0].getStreamInfo().start,isNaN(Nn)){const Mn=zr(!1);isNaN(Mn)||(S.info(`Start time from URI parameters: ${Mn}`),Ln=Math.max(Ln,Mn))}else{S.info(`Start time provided by the app: ${Nn}`);const Mn=ui(!1,Nn);isNaN(Mn)||(Ln=Math.max(Ln,Mn))}return Ln}();let Vt=Ct(at);const bn=Vt!==null?Vt:X[0];b.trigger(D.default.INITIAL_STREAM_SWITCH,{startTime:at}),ct(bn,null,at),nt||(nt=setInterval(function(){!Z&&me.getTimeToStreamEnd()<=0&&!me.isSeeking()&&b.trigger(D.default.PLAYBACK_ENDED,{isLast:lo().isLast})},200))}function ct(at,Vt,bn){try{if(Z||!at||Vt===at&&at.getIsActive())return;Z=!0,b.trigger(D.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:Vt?Vt.getStreamInfo():null,toStreamInfo:at.getStreamInfo()});let Ln=!1,Mn=[];pe=at,Vt&&(Ln=Wt(at,Vt),Mn=In(Vt),Vt.deactivate(Ln)),bn=isNaN(bn)?!Ln&&Vt?at.getStreamInfo().start:NaN:bn,S.info(`Switch to stream ${at.getId()}. Seektime is ${bn}, current playback time is ${me.getTime()}. Seamless period switch is set to ${Ln}`),bt=bt.filter(br=>br.getId()!==pe.getId()),me.initialize(lo(),!!Vt),ae.getElement()?_t({seekTime:bn,keepBuffers:Ln,streamActivated:!1,representationsFromPreviousPeriod:Mn}):Gt({seekTime:bn,keepBuffers:Ln})}catch{Z=!1}}function _t(at){let Vt;function bn(){if(!_e||_e.readyState!=="open")return;S.debug("MediaSource is open!"),window.URL.revokeObjectURL(Vt),_e.removeEventListener("sourceopen",bn),_e.removeEventListener("webkitsourceopen",bn),Tr();const Mn=Y.getCurrentDVRInfo();N.setSeekable(Mn.range.start,Mn.range.end),at.streamActivated?(isNaN(at.seekTime)||me.seek(at.seekTime,!0,!0),pe.setMediaSource(_e).then(()=>{pe.initializeForTextWithMediaSource(_e)})):Gt(at)}function Ln(){_e.addEventListener("sourceopen",bn,!1),_e.addEventListener("webkitsourceopen",bn,!1),Vt=N.attachMediaSource(ae),S.debug("MediaSource attached to element.  Waiting on open...")}_e?at.keepBuffers?Gt(at):(N.detachMediaSource(ae),Ln()):(_e=N.createMediaSource(),Ln())}function Gt(at){const Vt=at.representationsFromPreviousPeriod||[];pe.activate(_e,at.keepBuffers?ft:void 0,Vt).then(bn=>{bn&&(ft=bn),isNaN(at.seekTime)||(b.trigger(D.default.SEEK_TARGET,{time:at.seekTime},{streamId:pe.getId()}),me.seek(at.seekTime,!1,!0),pe.startScheduleControllers()),Z=!1,b.trigger(D.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:lo()})})}function In(at){return(at?at.getStreamProcessors():[]).map(Vt=>Vt.getRepresentation())}function mt(at){const Vt=Ct(at.seekTime);Vt&&Vt!==pe?Vt&&Vt!==pe&&(Qt(),function(bn,Ln){const Mn=bn&&!isNaN(bn.seekTime)?bn.seekTime:NaN,br=pe.getStreamProcessors().map(vi=>vi.prepareOuterPeriodPlaybackSeeking(bn));Promise.all(br).then(()=>{ct(Ln,pe,Mn)}).catch(vi=>{V.error(vi)})}(at,Vt)):(Qt(),function(bn){pe.getStreamProcessors().forEach(Ln=>Ln.prepareInnerPeriodPlaybackSeeking(bn)),ha(Mt.USER_REQUEST_STOP_REASON)}(at)),Ki(Ot.SEEK_START_REASON)}function Qt(){ln()}function ln(){bt&&bt.length>0&&(bt.forEach(at=>{at.deactivate(!0)}),bt=[])}function en(at){if(at.newMediaInfo.streamInfo.id===pe.getId()){if(ln(),qt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&at.oldMediaInfo&&at.oldMediaInfo.codec!==at.newMediaInfo.codec){const Vt=me.getTime();return pe.deactivate(!1),void _t({seekTime:Vt,keepBuffers:!1,streamActivated:!1})}pe.prepareTrackChange(at)}}function Wt(at,Vt){try{return qt.get().streaming.buffer.reuseExistingSourceBuffers&&(k.isProtectionCompatible(Vt.getStreamInfo(),at.getStreamInfo())||Yt)&&k.supportsChangeType()&&qt.get().streaming.buffer.useChangeType}catch{return!1}}function rt(at){let Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(_e&&!at.getPreloaded()&&Wt(at,Vt)){const bn=In(Vt);at.startPreloading(_e,ft,bn).then(()=>{bt.push(at)})}}function Ct(at){if(isNaN(at))return null;const Vt=X.length;for(let bn=0;bn<Vt;bn++){const Ln=X[bn];if(at<parseFloat((Ln.getStartTime()+Ln.getDuration()).toFixed(5)))return Ln}return null}function Zt(){try{const at=W.getIsDynamic(),Vt=W.getStreamsInfo()[0].manifestInfo,bn=me.getTime(),Ln=j.calcTimeShiftBufferWindow(X,at),Mn=jn();if(Ln.start===void 0||Ln.end===void 0)return;Mn&&Mn.length!==0?Mn.forEach(br=>{Y.addDVRInfo(br.getType(),bn,Vt,Ln)}):Y.addDVRInfo(L.default.VIDEO,bn,Vt,Ln)}catch{}}function rn(at){if(je&&Fe){const Vt=fe.getInitialBufferLevel(),bn=[L.default.TEXT];(isNaN(Vt)||Vt<=me.getBufferLevel(bn)||W.getIsDynamic()&&Vt>me.getLiveDelay())&&(je=!1,Ki(Ot.INITIAL_PLAYOUT_START_REASON),me.play())}at&&at.mediaType&&Y.addBufferLevel(at.mediaType,new Date,1e3*at.bufferLevel)}function pt(at){at.streamInfo.id===pe.getId()&&ln(),ma(at.streamInfo.id).prepareQualityChange(at)}function Ce(){if(W.getIsDynamic()&&me.getOriginalLiveDelay()!==0&&pe){const at=W.getStreamsInfo();if(at.length>0){const Vt=at[0].manifestInfo,bn=Os(0,Vt);me.computeAndSetLiveDelay(bn,Vt)}}}function et(){if(Vi()){const at=ae.getPlaybackQuality();at&&Y.addDroppedFrames(at)}}function yt(){S.debug("[onPlaybackStarted]"),!je&&xe&&Ki(Ot.RESUME_FROM_PAUSE_START_REASON),je&&(je=!1),Ge&&(Ge=!1,qt.get().streaming.applyContentSteering&&!G.shouldQueryBeforeStart()&&G.loadSteeringData()),xe=!1}function tt(at){S.debug("[onPlaybackPaused]"),at.ended||(xe=!0,ha(Mt.USER_REQUEST_STOP_REASON))}function zt(at){S.debug(`Stream with id ${at.streamInfo.id} finished buffering`);const Vt=at.streamInfo.isLast;_e&&Vt?(S.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),N.signalEndOfStream(_e)):Jt()}function Jt(){if(!pe)return;if(!pe.getHasFinishedBuffering())return void pe.checkAndHandleCompletedBuffering();const at=function(){let bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const Ln=bn||pe||null;if(Ln){const Mn=Ln.getStreamInfo();return X.filter(function(br){const vi=br.getStreamInfo();return vi.start>Mn.start&&Mn.id!==vi.id})}}catch{return[]}}(pe);let Vt=0;for(;Vt<at.length;){const bn=at[Vt],Ln=Vt===0?pe:at[Vt-1];!bn.getPreloaded()&&Ln.getHasFinishedBuffering()&&_e&&rt(bn,Ln),Vt+=1}}function kn(){nt&&(clearInterval(nt),nt=null)}function jn(){return pe?pe.getStreamProcessors():[]}function xn(at){if(pe&&!pe.getIsEndedEventSignaled()){pe.setIsEndedEventSignaled(!0);const Vt=function(){const bn=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||pe||null;if(!bn)return null;const Ln=bn.getStreamInfo(),Mn=Ln.start;let br=0,vi=-1,Na=NaN;for(;br<X.length;){const bE=X[br].getStreamInfo(),Ih=bE.start-Mn;Ih>0&&(isNaN(Na)||Ih<Na)&&Ln.id!==bE.id&&(Na=Ih,vi=br),br+=1}return vi>=0?X[vi]:null}();Vt?(S.debug(`StreamController onEnded, found next stream with id ${Vt.getStreamInfo().id}. Switching from ${pe.getStreamInfo().id} to ${Vt.getStreamInfo().id}`),ct(Vt,pe,NaN)):(S.debug("StreamController no next stream found"),pe.setIsEndedEventSignaled(!1)),ha(Vt?Mt.END_OF_PERIOD_STOP_REASON:Mt.END_OF_CONTENT_STOP_REASON)}at&&at.isLast&&(kn(),G.stopSteeringRequestTimer())}function Tr(at){const Vt=at||lo().manifestInfo.duration;N.setDuration(Vt)}function zr(at){const Vt=de.getURIFragmentData();if(!Vt||!Vt.t)return NaN;const bn=Sc()[0].getStreamInfo().start;return Vt.t=Vt.t.split(",")[0],Gi(at,Vt.t,bn)}function ui(at,Vt){let bn=0;return at||(bn=Sc()[0].getStreamInfo().start),Gi(at,Vt,bn)}function Gi(at,Vt,bn){const Ln=W.getRegularPeriods()[0],Mn=Vt.toString(),br=Mn.indexOf("posix:")!==-1?Mn.substring(6)==="now"?Date.now()/1e3:parseFloat(Mn.substring(6)):NaN;return at&&!isNaN(br)?j.calcPresentationTimeFromWallTime(new Date(1e3*br),Ln):parseFloat(Mn)+bn}function Os(at,Vt){try{let bn=NaN;return Vt&&!isNaN(Vt.maxFragmentDuration)&&isFinite(Vt.maxFragmentDuration)?Vt.maxFragmentDuration:isFinite(bn)?bn:NaN}catch{return NaN}}function so(){const at=x.getValue();re.initialize(at)}function zu(at){if(at.error)we=!0,wh();else{S.info("Manifest updated... updating data system wide.");const Vt=at.manifest;W.updatePeriods(Vt),C.filterUnsupportedFeatures(Vt).then(()=>{re.initialize(Vt);let bn=W.getUTCTimingSources();!W.getIsDynamic()||bn&&bn.length!==0||b.trigger(te.default.CONFORMANCE_VIOLATION,{level:Cs.LEVELS.WARNING,event:Cs.EVENTS.NO_UTC_TIMING_ELEMENT});let Ln=W.getIsDynamic()?bn.concat(ke.getUTCTimingSources()):bn;z.attemptSync(Ln,W.getIsDynamic()),Me.createFinalQueryStrings(Vt)})}}function Vi(){return!!pe&&pe.getHasVideoTrack()}function oo(){return!!pe&&pe.getHasAudioTrack()}function ha(at,Vt){Vt=Vt||new Date,jn().forEach(bn=>{bn.finalisePlayList(Vt,at)}),Y.addPlayList()}function Ki(at){Y.createPlaylistMetrics(1e3*me.getTime(),at)}function Fs(at){Ae.updateKeyStatusesMap(at),function(){const Vt=jn();let bn=!1;Vt.forEach(Ln=>{const Mn=Ln.getMediaInfo();!Mn||k.areKeyIdsUsable(Mn)?Mn&&k.areKeyIdsExpired(Mn)&&function(br){const vi=ma(br.getStreamId());vi&&vi.triggerProtectionError({error:new Pe.default(_g.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_g.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(Ln):(bn=!0,function(br){const vi=br.getAllMediaInfos().filter(Na=>k.areKeyIdsUsable(Na));if(vi&&vi.length!==0)ge.setTrack(vi[0],{replaceBuffer:!0});else{const Na=br.getType();V.error(new Pe.default(Q.NO_SUPPORTED_KEY_IDS,`Type: ${Na}: ${Q.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(Ln))}),bn&&(me.getTime()===0?b.once(te.default.FRAGMENT_LOADING_COMPLETED,()=>{Us()},T):me.isProgressing(500).then(Ln=>{Ln||Us()}))}()}function Us(){const at=me.getTime();me.seek(at+.01,!1,!1)}function Tc(at){if(!at.error)return;let Vt;switch(at.error.code){case 1:Vt="MEDIA_ERR_ABORTED";break;case 2:Vt="MEDIA_ERR_NETWORK";break;case 3:Vt="MEDIA_ERR_DECODE",Ft.counts.mediaErrorDecode+=1;break;case 4:Vt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Vt="MEDIA_ERR_ENCRYPTED";break;default:Vt="UNKNOWN"}Vt==="MEDIA_ERR_DECODE"&&qt.get().errors.recoverAttempts.mediaErrorDecode>=Ft.counts.mediaErrorDecode?function(){S.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const bn=me.getTime();pe.deactivate(!1),S.info(`MediaSource has been resetted. Resuming playback from time ${bn}`),_t({seekTime:bn,keepBuffers:!1,streamActivated:!1})}():(ne=!0,at.error.message&&(Vt+=" ("+at.error.message+")"),at.error.msExtendedCode&&(Vt+=" (0x"+(at.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),S.fatal("Video Element Error: "+Vt),at.error&&S.fatal(at.error),V.error(new Pe.default(at.error.code,Vt)),wh())}function lo(){return pe?pe.getStreamInfo():null}function ma(at){for(let Vt=0,bn=X.length;Vt<bn;Vt++)if(X[Vt].getId()===at)return X[Vt];return null}function uo(at){isNaN(at.newDuration)||Tr(at.newDuration)}function _c(){X=[],Nn=NaN,Ae=null,Z=!1,pe=null,ne=!1,we=!1,je=!0,Ge=!0,xe=!1,Fe=!0,nt=null,Yt=!1,bt=[],mn=null,Ft={counts:{mediaErrorDecode:0}}}function wh(){gn(),z.reset(),ha(ne||we?Mt.FAILURE_STOP_REASON:Mt.USER_REQUEST_STOP_REASON);for(let at=0,Vt=X?X.length:0;at<Vt;at++)X[at].reset(ne);b.off(te.default.PLAYBACK_TIME_UPDATED,et,T),b.off(te.default.PLAYBACK_SEEKING,mt,T),b.off(te.default.PLAYBACK_ERROR,Tc,T),b.off(te.default.PLAYBACK_STARTED,yt,T),b.off(te.default.PLAYBACK_PAUSED,tt,T),b.off(te.default.PLAYBACK_ENDED,xn,T),b.off(te.default.METRIC_ADDED,cp,T),b.off(te.default.MANIFEST_VALIDITY_CHANGED,uo,T),b.off(te.default.BUFFER_LEVEL_UPDATED,rn,T),b.off(te.default.QUALITY_CHANGE_REQUESTED,pt,T),b.off(te.default.CONTENT_STEERING_REQUEST_COMPLETED,so,T),D.default.KEY_SESSION_UPDATED&&b.off(D.default.KEY_SESSION_UPDATED,wn,T),b.off(D.default.MANIFEST_UPDATED,zu,T),b.off(D.default.STREAM_BUFFERING_COMPLETED,zt,T),b.off(D.default.TIME_SYNCHRONIZATION_COMPLETED,Sn,T),b.off(D.default.CURRENT_TRACK_CHANGED,en,T),b.off(D.default.SETTING_UPDATED_LIVE_DELAY,Ce,T),b.off(D.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Ce,T),b.off(Tg.default.INTERNAL_KEY_STATUSES_CHANGED,Fs,T),re.reset(),$.reset(),Ie.reset(),Y.clearAllCurrentMetrics(),x.setValue(null),H.reset(),j.reset(),ee.reset(),_e&&(N.detachMediaSource(ae),_e=null),ae=null,Ae&&(Ae=null,Se=null,x.getValue()&&b.trigger(D.default.PROTECTION_DESTROYED,{data:x.getValue().url})),kn(),b.trigger(D.default.STREAM_TEARDOWN_COMPLETE),_c()}function cp(at){if(at.metric===O.DVR_INFO){const Vt=oo()?L.default.AUDIO:L.default.VIDEO;at.mediaType===Vt&&N.setSeekable(at.value.range.start,at.value.range.end)}}function Sc(){return X}return T={addDVRMetric:Zt,getActiveStream:function(){return pe},getActiveStreamInfo:lo,getActiveStreamProcessors:jn,getAutoPlay:function(){return Fe},getHasMediaOrInitialisationError:function(){return ne||we},getInitialPlayback:function(){return je},getIsStreamSwitchInProgress:function(){return Z},getStreamById:ma,getStreamForTime:Ct,getStreams:Sc,getTimeRelativeToStreamId:function(at,Vt){let bn=null,Ln=0,Mn=0,br=null;for(let vi=0;vi<X.length;vi++){if(bn=X[vi],Mn=bn.getStartTime(),br=bn.getDuration(),Number.isFinite(Mn)&&(Ln=Mn),bn.getId()===Vt)return at-Ln;Number.isFinite(br)&&(Ln+=br)}return null},hasAudioTrack:oo,hasVideoTrack:Vi,initialize:function(at,Vt){gn(),Fe=at,Se=Vt,j.initialize(),$=Eg(_).create(),$.setConfig({manifestModel:x,adapter:W,manifestLoader:H,errHandler:V,settings:qt,contentSteeringController:G}),$.initialize(),Ie=us(_).getInstance(),Ie.setConfig({manifestUpdater:$,playbackController:me,settings:qt}),Ie.start(),Me=dg(_).getInstance(),z.setConfig({dashMetrics:Y,baseURLController:re,errHandler:V,settings:qt}),z.initialize(),N.setConfig({settings:qt}),Ae&&(b.trigger(D.default.PROTECTION_CREATED,{controller:Ae}),Ae.setMediaElement(ae.getElement()),Se&&Ae.setProtectionData(Se)),b.on(te.default.PLAYBACK_TIME_UPDATED,et,T),b.on(te.default.PLAYBACK_SEEKING,mt,T),b.on(te.default.PLAYBACK_ERROR,Tc,T),b.on(te.default.PLAYBACK_STARTED,yt,T),b.on(te.default.PLAYBACK_PAUSED,tt,T),b.on(te.default.PLAYBACK_ENDED,xn,T),b.on(te.default.METRIC_ADDED,cp,T),b.on(te.default.MANIFEST_VALIDITY_CHANGED,uo,T),b.on(te.default.BUFFER_LEVEL_UPDATED,rn,T),b.on(te.default.QUALITY_CHANGE_REQUESTED,pt,T),b.on(te.default.CONTENT_STEERING_REQUEST_COMPLETED,so,T),D.default.KEY_SESSION_UPDATED&&b.on(D.default.KEY_SESSION_UPDATED,wn,T),b.on(D.default.MANIFEST_UPDATED,zu,T),b.on(D.default.STREAM_BUFFERING_COMPLETED,zt,T),b.on(D.default.TIME_SYNCHRONIZATION_COMPLETED,Sn,T),b.on(D.default.CURRENT_TRACK_CHANGED,en,T),b.on(D.default.SETTING_UPDATED_LIVE_DELAY,Ce,T),b.on(D.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Ce,T),b.on(Tg.default.INTERNAL_KEY_STATUSES_CHANGED,Fs,T)},load:function(at){let Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;gn(),Nn=Vt,H.load(at)},loadWithManifest:function(at){let Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;(function(){if(!$||!$.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),Nn=Vt,$.setManifest(at)},refreshManifest:function(){$.getIsUpdating()||$.refreshManifest()},reset:wh,setConfig:function(at){at&&(at.capabilities&&(k=at.capabilities),at.capabilitiesFilter&&(C=at.capabilitiesFilter),at.manifestLoader&&(H=at.manifestLoader),at.manifestModel&&(x=at.manifestModel),at.mediaPlayerModel&&(fe=at.mediaPlayerModel),at.customParametersModel&&(ke=at.customParametersModel),at.protectionController&&(Ae=at.protectionController),at.adapter&&(W=at.adapter),at.dashMetrics&&(Y=at.dashMetrics),at.errHandler&&(V=at.errHandler),at.timelineConverter&&(j=at.timelineConverter),at.videoModel&&(ae=at.videoModel),at.playbackController&&(me=at.playbackController),at.throughputController&&(he=at.throughputController),at.serviceDescriptionController&&(ye=at.serviceDescriptionController),at.contentSteeringController&&(G=at.contentSteeringController),at.textController&&(be=at.textController),at.abrController&&(se=at.abrController),at.mediaController&&(ge=at.mediaController),at.settings&&(qt=at.settings),at.baseURLController&&(re=at.baseURLController),at.uriFragmentModel&&(de=at.uriFragmentModel),at.segmentBaseController&&(le=at.segmentBaseController),at.manifestUpdater&&($=at.manifestUpdater))},setProtectionData:function(at){Se=at,Ae&&Ae.setProtectionData(Se)},switchToVideoElement:function(at){pe&&(me.initialize(lo()),_t({seekTime:at,keepBuffers:!1,streamActivated:!0}))}},S=(0,Le.default)(_).getInstance().getLogger(T),z=r_(_).getInstance(),N=i_(_).getInstance(),ee=ut(_).getInstance(),_c(),T}Sg.__dashjs_factory_name="StreamController";var Ag=ve.default.getSingletonFactory(Sg);function Hf(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C,$,H,x,W,Y,N,z,G;function re(){G.debug("Stopping the gap controller"),$&&(clearInterval($),$=null),function(){b.off(D.default.WALLCLOCK_TIME_UPDATED,ge,this),b.off(D.default.INITIAL_STREAM_SWITCH,he,this),b.off(D.default.PLAYBACK_SEEKING,le,this),b.off(D.default.BUFFER_REPLACEMENT_STARTED,de,T),b.off(D.default.TRACK_CHANGE_RENDERED,se,T)}(),$=null,H=NaN,C=0,N=null,z={}}function le(){N&&(clearTimeout(N),N=null)}function de(V){try{if(V.streamId!==W.getActiveStreamInfo().id||V.mediaType!==L.default.VIDEO&&V.mediaType!==L.default.AUDIO)return;V.streamId===W.getActiveStreamInfo().id&&(z[V.mediaType]=!0)}catch(j){G.error(j)}}function se(V){V&&V.mediaType&&(z[V.mediaType]=!1)}function he(){$||function(){try{$||(G.debug("Starting the gap controller"),$=setInterval(()=>{Ie()&&ee(x.getTime())},100))}catch{}}()}function ge(){if(Ie(k.get().streaming.gaps.enableSeekFix)&&(C++,C>=10)){const V=x.getTime();S===V?ee(V,!0):(S=V,H=NaN),C=0}}function Ie(){let V=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!W.getActiveStream())return!1;const j=Object.keys(z).some(pe=>z[pe]),X=!!V&&function(){const pe=W.getActiveStream(),Ae=parseFloat((pe.getStartTime()+pe.getDuration()).toFixed(5));return x.getTime()+k.get().streaming.gaps.threshold>=Ae}();return!j&&k.get().streaming.gaps.jumpGaps&&W.getActiveStreamProcessors().length>0&&(!x.isSeeking()||X)&&!x.isPaused()&&!W.getIsStreamSwitchInProgress()&&!W.getHasMediaOrInitialisationError()}function ee(V){let j=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const X=k.get().streaming.gaps.enableStallFix,pe=k.get().streaming.gaps.stallSeek,Ae=k.get().streaming.gaps.smallGapLimit,be=k.get().streaming.gaps.jumpLargeGaps,Se=Y.getBufferRange();let Me,Fe=NaN,Z=!1;if(Me=function(we,_e){try{if(!we||we.length<=1&&_e>0)return NaN;let ae=NaN,me=0;for(;isNaN(ae)&&me<we.length;){const ye=me>0?we.end(me-1):0;_e<we.start(me)&&ye-_e<k.get().streaming.gaps.threshold&&(ae=me),me+=1}return ae}catch{return null}}(Se,V),!isNaN(Me)){const we=Se.start(Me),_e=we-V;_e>0&&(_e<=Ae||be)&&(Fe=we)}const ne=x.getTimeToStreamEnd();if(isNaN(Fe)&&j&&isFinite(ne)&&!isNaN(ne)&&ne<Ae&&(Fe=parseFloat(x.getStreamEndTime().toFixed(5)),Z=!0),X&&isNaN(Fe)&&j&&isNaN(Me)&&function(we,_e){for(let ae=0,me=we.length;ae<me;ae++)if(_e>=we.start(ae)&&_e<=we.end(ae))return!0;return!1}(Se,V)&&(pe===0?(G.warn("Toggle play pause to break stall"),Y.pause(),Y.play()):(G.warn(`Jumping ${pe}s to break stall`),Fe=V+pe)),Fe>0&&H!==Fe&&Fe>V&&!N){const we=Fe-V;if(Z){const _e=W.getStreamForTime(Fe),ae=_e&&!!_e.getPreloaded();G.warn(`Jumping to end of stream because of gap from ${V} to ${Fe}. Gap duration: ${we}`),x.seek(Fe,!0,ae)}else{const _e=x.getIsDynamic(),ae=Me>0?Se.end(Me-1):V,me=_e?1e3*Math.max(0,we-.1):0;N=window.setTimeout(()=>{x.seek(Fe,!0,!0),G.warn(`Jumping gap occuring in period ${W.getActiveStream().getStreamId()} starting at ${ae} and ending at ${Fe}. Jumping by: ${Fe-ae}`),N=null},me)}H=Fe}}return T={reset:re,setConfig:function(V){V&&(V.settings&&(k=V.settings),V.playbackController&&(x=V.playbackController),V.streamController&&(W=V.streamController),V.videoModel&&(Y=V.videoModel))},initialize:function(){(function(){b.on(D.default.WALLCLOCK_TIME_UPDATED,ge,this),b.on(D.default.INITIAL_STREAM_SWITCH,he,this),b.on(D.default.PLAYBACK_SEEKING,le,this),b.on(D.default.BUFFER_REPLACEMENT_STARTED,de,T),b.on(D.default.TRACK_CHANGE_RENDERED,se,T)})()}},G=(0,Le.default)(_).getInstance().getLogger(T),re(),T}Hf.__dashjs_factory_name="GapController";var a_=ve.default.getSingletonFactory(Hf);function xy(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C,$,H,x,W,Y,N;function z(){S=!1;const ee=_r.default.parseUserAgent();k=ee&&ee.browser&&ee.browser.name&&ee.browser.name.toLowerCase()==="safari"}function G(){S=!1}function re(ee){if(ee.streamId!==H.getActiveStreamInfo().id||!Y)return;const V=x.getLiveDelay();x.getBufferLevel()>V/2&&(Y=!1)}function le(ee){ee.streamId===H.getActiveStreamInfo().id&&(Y=ee.state===O.BUFFER_EMPTY)}function de(){W.getCatchupModeEnabled()||C.setPlaybackRate(1)}function se(){x.getIsDynamic()&&W.getCatchupModeEnabled()&&(W.getCatchupPlaybackRates().max>0||W.getCatchupPlaybackRates().min<0)&&!x.isPaused()&&!x.isSeeking()&&function(){try{return!x.getTime()>0||S?!1:ge()===L.default.LIVE_CATCHUP_MODE_LOLP?function(ee,V){try{return Math.abs(he())>0||ee<V}catch{return!1}}(x.getBufferLevel(),$.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(he())>0}catch{return!1}}()}catch{return!1}}()&&function(){if(!S&&C){let ee;const V=C.getPlaybackRate(),j=W.getCatchupPlaybackRates(),X=x.getBufferLevel(),pe=he(),Ae=W.getCatchupMaxDrift();if(!isNaN(Ae)&&Ae>0&&pe>Ae)N.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),S=!0,x.seekToCurrentLive(!0,!1);else{const be=x.getCurrentLiveLatency(),Se=x.getLiveDelay();ee=ge()===L.default.LIVE_CATCHUP_MODE_LOLP?function(Fe,Z,ne,we,_e){let ae;if(_e<we){const me=Math.abs(Fe.min),ye=5*(_e-we);ae=1-me+2*me/(1+Math.pow(Math.E,-ye)),N.debug("[LoL+ playback control_buffer-based] bufferLevel: "+_e+", newRate: "+ae)}else{if(Math.abs(Z-ne)<=.02*ne)ae=1;else{const ye=Z-ne,fe=ye<0?Math.abs(Fe.min):Fe.max,ke=5*ye;ae=1-fe+2*fe/(1+Math.pow(Math.E,-ke))}N.debug("[LoL+ playback control_latency-based] latency: "+Z+", newRate: "+ae)}return ae}(j,be,Se,$.get().streaming.liveCatchup.playbackBufferMin,X):function(Fe,Z,ne,we){if(Y)return 1;const _e=Z-ne,ae=_e<0?Math.abs(Fe.min):Fe.max,me=5*_e;let ye=1-ae+2*ae/(1+Math.pow(Math.E,-me));return x.getPlaybackStalled()&&we<=ne/2&&_e>0&&(ye=1),ye}(j,be,Se,X);const Me=k?.25:.02/(.5/j.max);(ee&&Math.abs(V-ee)>=Me||ee==1)&&(N.debug(`[CatchupController]: Setting playback rate to ${ee}`),C.setPlaybackRate(ee))}}}()}function he(){return x.getCurrentLiveLatency()-x.getLiveDelay()}function ge(){const ee=$.get().streaming.liveCatchup.playbackBufferMin;return $.get().streaming.liveCatchup.mode!==L.default.LIVE_CATCHUP_MODE_LOLP||ee===null||isNaN(ee)?L.default.LIVE_CATCHUP_MODE_DEFAULT:L.default.LIVE_CATCHUP_MODE_LOLP}function Ie(){W.getCatchupPlaybackRates(!0)}return T={reset:function(){b.off(te.default.BUFFER_LEVEL_UPDATED,re,T),b.off(te.default.BUFFER_LEVEL_STATE_CHANGED,le,T),b.off(te.default.PLAYBACK_PROGRESS,se,T),b.off(te.default.PLAYBACK_TIME_UPDATED,se,T),b.off(te.default.PLAYBACK_SEEKED,G,T),b.off(D.default.SETTING_UPDATED_CATCHUP_ENABLED,de,T),b.off(D.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ie,T),b.off(D.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ie,T),b.off(te.default.STREAM_INITIALIZED,Ie,T),z(),C.setPlaybackRate(1,!0)},setConfig:function(ee){ee&&(ee.settings&&($=ee.settings),ee.videoModel&&(C=ee.videoModel),ee.streamController&&(H=ee.streamController),ee.playbackController&&(x=ee.playbackController),ee.mediaPlayerModel&&(W=ee.mediaPlayerModel))},initialize:function(){b.on(te.default.BUFFER_LEVEL_UPDATED,re,T),b.on(te.default.BUFFER_LEVEL_STATE_CHANGED,le,T),b.on(te.default.PLAYBACK_PROGRESS,se,T),b.on(te.default.PLAYBACK_TIME_UPDATED,se,T),b.on(te.default.PLAYBACK_SEEKED,G,T),b.on(D.default.SETTING_UPDATED_CATCHUP_ENABLED,de,T),b.on(D.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ie,T),b.on(D.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ie,T),b.on(te.default.STREAM_INITIALIZED,Ie,T),Ie()}},N=(0,Le.default)(_).getInstance().getLogger(T),z(),T}xy.__dashjs_factory_name="CatchupController";var Au=ve.default.getSingletonFactory(xy);const wg=[L.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],wu="video",Gf="audio";function Ig(){const _=this.context;let b,T,S,k,C;function $(){T={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},S=[]}function H(x,W,Y){try{T[x][W]=Y/1e3}catch(N){k.error(N)}}return b={getServiceDescriptionSettings:function(){return T},getProducerReferenceTimeOffsets:function(){return S},calculateProducerReferenceTimeOffsets:function(x){try{let W=[];if(x&&x.length>0){const Y=[L.default.VIDEO,L.default.AUDIO,L.default.TEXT],N=C.getAvailabilityStartTime()/1e3;x.forEach(z=>{const G=Y.reduce((re,le)=>re.concat(C.getAllMediaInfoForType(z,le)),[]).reduce((re,le)=>(C.getProducerReferenceTimes(z,le).forEach(de=>{const se=C.getVoRepresentations(le);if(se&&se.length>0&&se[0].adaptation&&se[0].segmentInfoType===w.default.SEGMENT_TEMPLATE){const he=se[0],ge=new Date(de[w.default.WALL_CLOCK_TIME]).getTime()/1e3-(de[w.default.PRESENTATION_TIME]/he[w.default.TIMESCALE]-he[w.default.PRESENTATION_TIME_OFFSET]+z.start),Ie=N-ge;re.push({id:de[w.default.ID],to:Ie})}}),re),[]);W=W.concat(G)})}S=W}catch(W){k.error(W),S=[]}},applyServiceDescription:function(x){if(!x||!x.serviceDescriptions)return;const W=x.serviceDescriptions.filter(z=>wg.includes(z.schemeIdUri)),Y=x.serviceDescriptions.filter(z=>z.schemeIdUri==null);let N=W.length>0?W[W.length-1]:Y[Y.length-1];N&&(N.latency&&N.latency.target>0&&function(z){let G;if(z.schemeIdUri,L.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,G=function(re){return{liveDelay:re.latency.target/1e3,maxDrift:!isNaN(re.latency.max)&&re.latency.max>re.latency.target?(re.latency.max-re.latency.target+500)/1e3:NaN,referenceId:re.latency.referenceId||NaN}}(z),S.length>0){let{to:re,id:le}=function(de){let se,he=0,ge=S.filter(Ie=>Ie.id===de.referenceId);return ge.length===0?(he=S.length>0?S[0].to:0,se=S[0].id||NaN):(he=ge[0].to||0,se=ge[0].id||NaN),{to:he,id:se}}(G);T.liveDelay=G.liveDelay-re,T.liveCatchup.maxDrift=G.maxDrift,k.debug(`
                Found latency properties coming from service description. Applied time offset of ${re} from ProducerReferenceTime element with id ${le}.
                Live Delay: ${G.liveDelay-re}, Live catchup max drift: ${G.maxDrift}
            `)}else T.liveDelay=G.liveDelay,T.liveCatchup.maxDrift=G.maxDrift,k.debug(`Found latency properties coming from service description: Live Delay: ${G.liveDelay}, Live catchup max drift: ${G.maxDrift}`)}(N),N.playbackRate&&function(z){const G=z.playbackRate.min?Math.round(1e3*(z.playbackRate.min-1))/1e3:NaN,re=z.playbackRate.max?Math.round(1e3*(z.playbackRate.max-1))/1e3:NaN;T.liveCatchup.playbackRate.min=G,T.liveCatchup.playbackRate.max=re,k.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${G}`),k.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${re}`)}(N),N.operatingQuality,N.operatingBandwidth&&function(z){if(!z||!z.operatingBandwidth||!z.operatingBandwidth.mediaType||z.operatingBandwidth.mediaType==="all")return;const G={};G.minBandwidth=z.operatingBandwidth.min,G.maxBandwidth=z.operatingBandwidth.max,G.targetBandwidth=z.operatingBandwidth.target;const re=[];z.operatingBandwidth.mediaType===wu||z.operatingBandwidth.mediaType===Gf?re.push(z.operatingBandwidth.mediaType):z.operatingBandwidth.mediaType==="any"&&(re.push(Gf),re.push(wu)),re.forEach(le=>{isNaN(G.minBandwidth)||H("minBitrate",le,G.minBandwidth),isNaN(G.maxBandwidth)||H("maxBitrate",le,G.maxBandwidth),isNaN(G.targetBandwidth)||H("initialBitrate",le,G.targetBandwidth)})}(N),N.contentSteering&&function(z){T.contentSteering=z.contentSteering}(N),N.clientDataReporting&&function(z){T.clientDataReporting=z.clientDataReporting}(N))},reset:function(){$()},setConfig:function(x){x&&x.adapter&&(C=x.adapter)}},k=(0,Le.default)(_).getInstance().getLogger(b),$(),b}Ig.__dashjs_factory_name="ServiceDescriptionController";var Vf=ve.default.getSingletonFactory(Ig);function Ya(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=[];if(_.irregular)return _.irregular;if(_.regular)return _.regular;if(_.language){b=b.concat(_.language,_.extendedLanguageSubtags||[],_.script||[],_.region||[],_.variants||[]);const T=_.extensions||[];let S=-1;for(;++S<T.length;){const k=T[S];k.singleton&&k.extensions&&k.extensions.length>0&&b.push(k.singleton,...k.extensions)}}return _.privateuse&&_.privateuse.length>0&&b.push("x",..._.privateuse),b.join("-")}function ua(_){const b=typeof _=="string"?_.charCodeAt(0):_;return b>=97&&b<=122||b>=65&&b<=90}function xl(_){const b=typeof _=="string"?_.charCodeAt(0):_;return b>=48&&b<=57}function ds(_){return ua(_)||xl(_)}const Cy=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],kg={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},Ly={}.hasOwnProperty;function Zs(_){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const T={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},S=String(_),k=S.toLowerCase();let C=0;if(_==null)throw new Error("Expected string, got `"+_+"`");if(Ly.call(kg,k)){const H=kg[k];return b.normalize!==void 0&&b.normalize!==null&&!b.normalize||typeof H!="string"?(T[Cy.includes(k)?"regular":"irregular"]=S,T):Zs(H)}for(;ua(k.charCodeAt(C))&&C<9;)C++;if(C>1&&C<9){if(T.language=S.slice(0,C),C<4){let H=0;for(;k.charCodeAt(C)===45&&ua(k.charCodeAt(C+1))&&ua(k.charCodeAt(C+2))&&ua(k.charCodeAt(C+3))&&!ua(k.charCodeAt(C+4));){if(H>2)return $(C,3,"Too many extended language subtags, expected at most 3 subtags");T.extendedLanguageSubtags.push(S.slice(C+1,C+4)),C+=4,H++}}for(k.charCodeAt(C)===45&&ua(k.charCodeAt(C+1))&&ua(k.charCodeAt(C+2))&&ua(k.charCodeAt(C+3))&&ua(k.charCodeAt(C+4))&&!ua(k.charCodeAt(C+5))&&(T.script=S.slice(C+1,C+5),C+=5),k.charCodeAt(C)===45&&(ua(k.charCodeAt(C+1))&&ua(k.charCodeAt(C+2))&&!ua(k.charCodeAt(C+3))?(T.region=S.slice(C+1,C+3),C+=3):xl(k.charCodeAt(C+1))&&xl(k.charCodeAt(C+2))&&xl(k.charCodeAt(C+3))&&!xl(k.charCodeAt(C+4))&&(T.region=S.slice(C+1,C+4),C+=4));k.charCodeAt(C)===45;){const H=C+1;let x=H;for(;ds(k.charCodeAt(x));){if(x-H>7)return $(x,1,"Too long variant, expected at most 8 characters");x++}if(!(x-H>4||x-H>3&&xl(k.charCodeAt(H))))break;T.variants.push(S.slice(H,x)),C=x}for(;k.charCodeAt(C)===45&&k.charCodeAt(C+1)!==120&&ds(k.charCodeAt(C+1))&&k.charCodeAt(C+2)===45&&ds(k.charCodeAt(C+3));){let H=C+2,x=0;for(;k.charCodeAt(H)===45&&ds(k.charCodeAt(H+1))&&ds(k.charCodeAt(H+2));){const W=H+1;for(H=W+2,x++;ds(k.charCodeAt(H));){if(H-W>7)return $(H,2,"Too long extension, expected at most 8 characters");H++}}if(!x)return $(H,4,"Empty extension, extensions must have at least 2 characters of content");T.extensions.push({singleton:S.charAt(C+1),extensions:S.slice(C+3,H).split("-")}),C=H}}else C=0;if(C===0&&k.charCodeAt(C)===120||k.charCodeAt(C)===45&&k.charCodeAt(C+1)===120){C=C?C+2:1;let H=C;for(;k.charCodeAt(H)===45&&ds(k.charCodeAt(H+1));){const x=C+1;for(H=x;ds(k.charCodeAt(H));){if(H-x>7)return $(H,5,"Too long private-use area, expected at most 8 characters");H++}T.privateuse.push(S.slice(C+1,H)),C=H}}return C!==S.length?$(C,6,"Found superfluous content after tag"):T;function $(H,x,W){return b.warning&&b.warning(W,x,H),b.forgiving?T:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function Dy(_,b){return function(T,S){let k=Js(T,"tag");const C=Js(S??"*","range"),$=[];let H=-1;for(;++H<C.length;){const x=C[H].toLowerCase();if(!b&&x==="*")continue;let W=-1;const Y=[];for(;++W<k.length;)if(_(k[W].toLowerCase(),x)){if(!b)return k[W];$.push(k[W])}else Y.push(k[W]);k=Y}return b?$:void 0}}const Kf=Dy(function(_,b){const T=_.split("-"),S=b.split("-");let k=0,C=0;if(S[C]!=="*"&&T[k]!==S[C])return!1;for(k++,C++;C<S.length;)if(S[C]!=="*"){if(!T[k])return!1;if(T[k]!==S[C]){if(T[k].length===1)return!1;k++}else k++,C++}else C++;return!0},!0);function Js(_,b){const T=_&&typeof _=="string"?[_]:_;if(!T||typeof T!="object"||!("length"in T))throw new Error("Invalid "+b+" `"+T+"`, expected non-empty string");return T}const Vd=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],Cl=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],Rg={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},Yf={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},Lo={}.hasOwnProperty;function Wf(_){const{language:b,script:T,region:S}=_;let k;var C,$;return T&&S&&(k=Yf[Ya({language:b,script:T,region:S})])?(_.script=void 0,_.region=void 0):T&&(k=Yf[Ya({language:b,script:T})])?_.script=void 0:S&&(k=Yf[Ya({language:b,region:S})])?_.region=void 0:b&&(k=Yf[b]),k&&(_.language=void 0,C=_,$=Zs(k),C.language||(C.language=$.language),C.script||(C.script=$.script),C.region||(C.region=$.region),$.variants&&C.variants.push(...$.variants)),Ya(_)}function Kd(_,b){const T={},S=Zs(String(_||"").toLowerCase(),T),k=Ya(S);if(!k)return k;let C=-1;for(;++C<Vd.length;){let $=Vd[C].from;$.slice(0,4)==="und-"&&S.language&&($=S.language+$.slice(3)),Kf(k,$).length>0&&Ny(S,$,Vd[C].to)}for(C=-1;++C<Cl.length;)ii(S,Cl[C].from.field,Cl[C].from.value)&&Qf(S,Cl[C].to.field,Cl[C].to.value);if(function($){Wf($);const{language:H,script:x,region:W}=$;if(!H)return $;const Y=Ya({language:H,script:x,region:W});Y===Wf(Zs(H))?($.script=void 0,$.region=void 0):W&&Y===Wf(Zs(H+"-"+W))?$.script=void 0:x&&Y===Wf(Zs(H+"-"+x))&&($.region=void 0)}(S),S.variants.sort(),S.extensions.sort(Xf),T.warning){let $;for($ in Rg)if(Lo.call(Rg,$)){const H=Rg[$],x=S[$];if(x&&Lo.call(H,x)){const W=H[x];T.warning("Deprecated "+$+" `"+x+"`, expected one of `"+W.join("`, `")+"`",-1,7)}}}return S.script&&(S.script=S.script.charAt(0).toUpperCase()+S.script.slice(1)),S.region&&(S.region=S.region.toUpperCase()),Ya(S)}function Ny(_,b,T){const S=Zs(b),k=Zs(T),C=[],$=S.language;let H;for(H in S)if(Lo.call(S,H)){const x=S[H];x&&ii(_,H,x)&&C.push(H)}for(H in k)if(Lo.call(k,H)){const x=k[H];$&&x&&(C.includes(H)||!_[H])&&Qf(_,H,H==="language"&&x==="und"?$:x)}}function ii(_,b,T){let S,k=!1;if(T){const C=_[b];if(S=C,Array.isArray(C)){S=[];let $=-1;for(;++$<C.length;){const H=C[$];T.includes(H)?k=!0:S.push(H)}}else C===T&&(S=null,k=!0);_[b]=S}return k}function Qf(_,b,T){const S=_[b];if(Array.isArray(S)){const k=Array.isArray(T)?T:[T];let C=-1;for(;++C<k.length;){const $=k[C];S.includes($)||S.push($)}}else _[b]=T}function Xf(_,b){return _.singleton>b.singleton?1:_.singleton<b.singleton?-1:0}const Yd={0:void 0,1:1,2:2,3:3,4:4,5:5,6:5,7:7,8:2,9:3,10:4,11:6,12:7,13:22,14:7,15:10,16:9,17:11,18:13,19:11,20:13};function xg(_){return _==0?0:_.toString(2).match(/1/g).length}function Wd(_,b){let T,S=parseInt("0x"+_,16),k=S&b[0],C=S&b[1];return T=xg(k)+2*xg(C),T}function Ll(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C,$,H,x,W,Y,N,z;function G(fe){if(!(fe&&fe.currentRepresentation&&fe.currentRepresentation.mediaInfo&&fe.currentRepresentation.mediaInfo.type))return;const ke=fe.currentRepresentation.mediaInfo.type;x[ke]=fe.currentRepresentation}function re(fe,ke){return fe&&k[ke]&&k[ke][fe]?k[ke][fe].list:[]}function le(fe,ke){return fe&&k[ke]&&k[ke][fe]?k[ke][fe].current:null}function de(fe){let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fe||!fe.streamInfo)return;const xe=fe.type,je=fe.streamInfo.id,Ge=le(xe,je);if(k[je]&&k[je][xe]&&(k[je][xe].current=fe,k[je][xe].current&&(xe!==L.default.TEXT&&!ge(fe,Ge)||xe===L.default.TEXT&&fe.isFragmented)&&b.trigger(D.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:Ge,newMediaInfo:fe,switchMode:C.get().streaming.trackSwitchMode[xe],options:ke},{streamId:je}),!ke.hasOwnProperty("noSettingsSave")||!ke.noSettingsSave)){let nt=function(ft){const bt={lang:ft.lang,viewpoint:ft.viewpoint,roles:ft.roles,accessibility:ft.accessibility,audioChannelConfiguration:ft.audioChannelConfiguration,codec:ft.codec};return bt.lang||bt.viewpoint||bt.role&&bt.role.length>0||bt.accessibility&&bt.accessibility.length>0||bt.audioChannelConfiguration&&bt.audioChannelConfiguration.length>0?bt:null}(fe);if(!nt||!k[je][xe].storeLastSettings)return;nt.roles&&(nt.role=nt.roles[0],delete nt.roles),nt.accessibility&&(nt.accessibility=nt.accessibility[0]),nt.audioChannelConfiguration&&(nt.audioChannelConfiguration=nt.audioChannelConfiguration[0]),H[xe]=nt,z.setSavedMediaSettings(xe,nt)}}function se(fe,ke){fe&&ke&&($[fe]=ke)}function he(fe){return fe?$[fe]:null}function ge(fe,ke){if(!fe&&!ke)return!0;if(!fe||!ke)return!1;const xe=fe.id===ke.id,je=JSON.stringify(fe.viewpoint)===JSON.stringify(ke.viewpoint),Ge=fe.lang===ke.lang,nt=fe.codec===ke.codec,ft=JSON.stringify(fe.roles)===JSON.stringify(ke.roles),bt=JSON.stringify(fe.accessibility)===JSON.stringify(ke.accessibility),qt=JSON.stringify(fe.audioChannelConfiguration)===JSON.stringify(ke.audioChannelConfiguration);return xe&&nt&&je&&Ge&&ft&&bt&&qt}function Ie(){k={},H={},x={},$={audio:null,video:null,text:null},b.off(te.default.REPRESENTATION_SWITCH,G,T)}function ee(fe,ke,xe){let je=[];return fe.forEach(function(Ge){ke(xe,Ge)&&je.push(Ge)}),je.length!==0||ke===Ae&&C.get().streaming.assumeDefaultRoleAsMain&&ye(xe.role,{schemeIdUri:L.default.DASH_ROLE_SCHEME_ID,value:w.default.MAIN})&&(S.info("no track with Role set to main - assuming main as default and searching again"),je=ee(fe,be,null),je.length!==0)?je:(S.info("Filter-Function ("+ke.name+") resulted in no tracks; setting ignored"),fe)}function V(fe,ke){try{return!fe.lang||fe.lang instanceof RegExp?ke.lang.match(fe.lang):ke.lang!==""&&Kf(ke.lang,Kd(fe.lang)).length>0}catch{return!1}}function j(fe,ke){return fe.index===void 0||fe.index===null||ke.index===fe.index}function X(fe,ke){return fe.id===void 0||fe.id===null||ke.id===fe.id}function pe(fe,ke){return!fe.viewpoint||!!ke.viewpoint.filter(function(xe){return ye(xe,fe.viewpoint)})[0]}function Ae(fe,ke){let xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!!ke.roles&&(!fe.role||!!ke.roles.filter(function(je){return ye(je,fe.role)})[0]||ke.type===L.default.AUDIO&&xe)}function be(fe,ke){return!ke.roles||ke.roles.length===0}function Se(fe,ke){let xe;return xe=fe.accessibility?!!ke.accessibility.filter(function(je){return ye(je,fe.accessibility)})[0]:!ke.accessibility.length,xe}function Me(fe,ke){return!fe.audioChannelConfiguration||!!ke.audioChannelConfiguration.filter(function(xe){return ye(xe,fe.audioChannelConfiguration)})[0]}function Fe(fe,ke){return!fe.codec||fe.codec===ke.codec}function Z(fe){let ke=0,xe=[];return fe.forEach(je=>{isNaN(je.selectionPriority)||(je.selectionPriority>ke?(ke=je.selectionPriority,xe=[je]):je.selectionPriority===ke&&xe.push(je))}),xe}function ne(fe){let ke,xe=0,je=[];return fe.forEach(function(Ge){ke=Math.max.apply(Math,Ge.bitrateList.map(function(nt){return nt.bandwidth})),ke>xe?(xe=ke,je=[Ge]):ke===xe&&je.push(Ge)}),je}function we(fe){return fe[0]&&fe[0].type===L.default.VIDEO?function(ke){let xe,je=1/0,Ge=[];return ke.forEach(function(nt){xe=nt.bitrateList.reduce(function(bt,qt){const Yt=Math.max(1,qt.width*qt.height);return bt+qt.bandwidth/Yt},0)/nt.bitrateList.length,xe<je?(je=xe,Ge=[nt]):xe===je&&Ge.push(nt)}),Ge}(fe):fe[0]&&fe[0].type===L.default.AUDIO?function(ke){let xe=1/0,je=[];return ke.forEach(function(Ge){let nt=Ge.audioChannelConfiguration.reduce(function(bt,qt){return bt+(function(Yt){let mn;if(!Yt||!Yt.schemeIdUri||!Yt.value)return;const Nn=Yt.schemeIdUri,Ft=Yt.value;return Nn==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||Nn==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?mn=Yd[Ft]:Nn==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?mn=function(gn){if(gn.length===4)return Wd(gn,[63880,1648])}(Ft):Nn==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?mn=function(gn){if(gn.length===6)return gn==="800000"?24:Wd(gn,[56834,205245])}(Ft):Nn==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?mn=parseInt(Ft):Nn==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(mn=function(gn){if(!(gn.length>8))return Wd(gn,[4294901727,0])}(Ft)),mn}(qt)||0)},0)/Ge.audioChannelConfiguration.length;Ge.hasOwnProperty("supplementalProperties")&&Ge.supplementalProperties.some(bt=>bt.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&bt.value==="JOC")&&(nt=16),nt||(nt=1);let ft=Ge.bitrateList.reduce(function(bt,qt){return bt+qt.bandwidth/nt},0)/Ge.bitrateList.length;ft<xe?(xe=ft,je=[Ge]):ft===xe&&je.push(Ge)}),je}(fe):fe}function _e(fe){let ke,xe=0,je=[];return fe.forEach(function(Ge){ke=Ge.representationCount,ke>xe?(xe=ke,je=[Ge]):ke===xe&&je.push(Ge)}),je}function ae(fe,ke){if(fe===L.default.TEXT)return function(Ge){if(!Ge||Ge.length===0)return null;const nt=Ge.filter(ft=>!(ft&&ft.roles&&ft.roles.length>0)||ft.roles.every(bt=>bt.schemeIdUri!==L.default.DASH_ROLE_SCHEME_ID||bt.value!==w.default.FORCED_SUBTITLE));return nt.length>0?nt[0]:Ge[0]}(ke);let xe;const je=W.getCustomInitialTrackSelectionFunction();if(xe=function(Ge){try{let nt;return nt=function(ft){try{const bt=ft.filter(qt=>{const Yt=qt.type;return qt.bitrateList.some(mn=>{const Nn=Y.getAbrBitrateParameter("maxBitrate",Yt),Ft=Y.getAbrBitrateParameter("minBitrate",Yt);return!(Nn>-1&&mn.bandwidth>1e3*Nn||Ft>-1&&mn.bandwidth<1e3*Ft)})});return bt.length>0?bt:ft}catch(bt){return S.error(bt),ft}}(Ge),nt=function(ft){try{if(!C.get().streaming.abr.limitBitrateByPortal)return ft;const{elementWidth:bt}=N.getVideoElementSize(),qt=ft.filter(Yt=>Yt.type!==L.default.VIDEO||Yt.bitrateList.some(mn=>mn.width<=bt));return qt.length>0?qt:ft}catch(bt){return S.error(bt),ft}}(nt),nt}catch(nt){return S.error(nt),Ge}}(ke),je&&typeof je=="function")xe=je(xe);else if(x[fe])xe=function(Ge,nt){if(!Ge||Ge.length===0||!nt||!x[nt])return Ge;const ft=x[nt].bandwidth;if(!ft||isNaN(ft))return Ge;let bt={min:NaN,track:null};return Ge.forEach(qt=>{qt.bitrateList.forEach(Yt=>{const mn=Math.abs(Yt.bandwidth-ft);(isNaN(bt.min)||mn<bt.min)&&(bt.min=mn,bt.track=qt)})}),bt.track?[bt.track]:Ge}(xe,fe);else if(C.get().streaming.ignoreSelectionPriority||(S.info("Trying to find track with highest selectionPriority"),xe=function(Ge){return Z(Ge)}(xe)),xe.length>1&&C.get().streaming.prioritizeRoleMain&&(S.info("Trying to find a main track"),xe=ee(xe,Ae,{role:{schemeIdUri:L.default.DASH_ROLE_SCHEME_ID,value:w.default.MAIN}})),xe.length>1){S.info("Selecting track based on selectionModeForInitialTrack");let Ge=C.get().streaming.selectionModeForInitialTrack;switch(Ge){case L.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:xe=function(nt){let ft=ne(nt);return ft.length>1&&(ft=_e(ft)),ft}(xe);break;case L.default.TRACK_SELECTION_MODE_FIRST_TRACK:xe=me(xe);break;case L.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:xe=function(nt){let ft=we(nt);return ft.length>1&&(ft=ne(ft)),ft}(xe);break;case L.default.TRACK_SELECTION_MODE_WIDEST_RANGE:xe=function(nt){let ft=_e(nt);return ft.length>1&&(ft=ne(nt)),ft}(xe);break;default:S.warn(`Track selection mode ${Ge} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),xe=me(xe)}}return xe.length>0?xe[0]:ke[0]}function me(fe){return fe[0]}function ye(fe,ke){return!(!fe||!ke)&&JSON.stringify({schemeIdUri:fe.schemeIdUri,value:fe.value})===JSON.stringify({schemeIdUri:ke.schemeIdUri,value:ke.value})}return T={addTrack:function(fe){if(!fe)return;const ke=fe.type;if((xe=ke)!==L.default.AUDIO&&xe!==L.default.VIDEO&&xe!==L.default.TEXT&&xe!==L.default.IMAGE)return;var xe;let je=fe.streamInfo.id;k[je]||(k[je]=function(){const nt=C.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:nt,current:null},video:{list:[],storeLastSettings:nt,current:null},text:{list:[],storeLastSettings:nt,current:null},image:{list:[],storeLastSettings:nt,current:null}}}());const Ge=k[je][ke].list;for(let nt=0,ft=Ge.length;nt<ft;++nt)if(ge(Ge[nt],fe))return;Ge.push(fe)},areTracksEqual:ge,clearDataForStream:function(fe){k[fe]&&delete k[fe]},getCurrentTrackFor:le,getInitialSettings:he,getTracksFor:re,getTracksWithHighestSelectionPriority:Z,getTracksWithHighestBitrate:ne,getTracksWithHighestEfficiency:we,getTracksWithWidestRange:_e,initialize:function(){b.on(te.default.REPRESENTATION_SWITCH,G,T)},isCurrentTrack:function(fe){if(!fe)return!1;const ke=fe.type,xe=fe.streamInfo.id;return k[xe]&&k[xe][ke]&&ge(k[xe][ke].current,fe)},matchSettings:function(fe,ke){let xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let je=!1;if(fe.lang){if(fe.lang instanceof RegExp)je=ke.lang.match(fe.lang);else if(ke.lang!==""){const Yt=Kd(fe.lang);Yt&&(je=Kf(ke.lang,Yt).length>0)}}else je=!0;const Ge=fe.index===void 0||fe.index===null||ke.index===fe.index,nt=!fe.viewpoint||!!ke.viewpoint.filter(function(Yt){return ye(Yt,fe.viewpoint)})[0],ft=!fe.role||!!ke.roles.filter(function(Yt){return ye(Yt,fe.role)})[0];let bt=!fe.accessibility||!!ke.accessibility.filter(function(Yt){return ye(Yt,fe.accessibility)})[0],qt=!fe.audioChannelConfiguration||!!ke.audioChannelConfiguration.filter(function(Yt){return ye(Yt,fe.audioChannelConfiguration)})[0];return je&&Ge&&nt&&(ft||ke.type===L.default.AUDIO&&xe)&&bt&&qt}catch{return!1}},matchSettingsAccessibility:Se,matchSettingsAudioChannelConfig:Me,matchSettingsIndex:j,matchSettingsLang:V,matchSettingsRole:Ae,matchSettingsViewPoint:pe,reset:Ie,saveTextSettingsDisabled:function(){z.setSavedMediaSettings(L.default.TEXT,null)},selectInitialTrack:ae,setConfig:function(fe){fe&&(fe.domStorage&&(z=fe.domStorage),fe.settings&&(C=fe.settings),fe.customParametersModel&&(W=fe.customParametersModel),fe.mediaPlayerModel&&(Y=fe.mediaPlayerModel),fe.videoModel&&(N=fe.videoModel))},setInitialMediaSettingsForType:function(fe,ke){let xe=H[fe]||he(fe);const je=re(fe,ke.id);let Ge=[];xe&&Object.keys(xe).length!==0||(xe=z.getSavedMediaSettings(fe),xe&&delete xe.codec,se(fe,xe)),je&&je.length!==0&&(xe&&(Ge=Array.from(je),S.info("Filtering "+Ge.length+" "+fe+" tracks based on settings"),Ge=ee(Ge,X,xe),Ge=ee(Ge,V,xe),Ge=ee(Ge,j,xe),Ge=ee(Ge,pe,xe),fe===L.default.AUDIO&&H[fe]||(Ge=ee(Ge,Ae,xe)),Ge=ee(Ge,Se,xe),Ge=ee(Ge,Me,xe),Ge=ee(Ge,Fe,xe),S.info("Filtering "+fe+" tracks ended, found "+Ge.length+" matching track(s).")),Ge.length===0?de(ae(fe,je)):Ge.length>1?de(ae(fe,Ge)):de(Ge[0]))},setInitialSettings:se,setTrack:de},S=(0,Le.default)(_).getInstance().getLogger(T),Ie(),T}Ll.__dashjs_factory_name="MediaController";const Qd=ve.default.getSingletonFactory(Ll);ve.default.updateSingletonFactory(Ll.__dashjs_factory_name,Qd);var Iu=Qd;const Xd=NaN;class Py{constructor(b,T){this.data={baseUrls:b||null,selectedIdx:T||Xd},this.children=[]}}function My(){let _,b,T,S;const k=this.context,C=(0,Gn.default)(k).getInstance();function $(Y,N,z){const G=H(z);Y[N]?C.areEqual(G,Y[N].data.baseUrls)||(Y[N].data.baseUrls=G,Y[N].data.selectedIdx=Xd):Y[N]=new Py(G)}function H(Y){let N=T.getBaseURLsFromElement(Y);const z=S.getSynthesizedBaseUrlElements(N);return z&&z.length>0&&z.forEach(G=>{const re=N.findIndex(le=>le.serviceLocation===G.serviceLocation);re!==-1?N[re]=G:N.push(G)}),N}function x(Y,N){const z=N||b;Y(z.data),z.children&&z.children.forEach(G=>x(Y,G))}function W(){b=new Py}return _={reset:W,update:function(Y){(function(N){(function(){if(!T||!T.hasOwnProperty("getBaseURLsFromElement")||!T.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const z=H(N);C.areEqual(z,b.data.baseUrls)||(b.data.baseUrls=z,b.data.selectedIdx=Xd),N&&N.Period&&N.Period.forEach((G,re)=>{$(b.children,re,G),G.AdaptationSet&&G.AdaptationSet.forEach((le,de)=>{$(b.children[re].children,de,le),le.Representation&&le.Representation.sort(T.getRepresentationSortFunction()).forEach((se,he)=>{$(b.children[re].children[de].children,he,se)})})})})(Y)},getForPath:function(Y){let N=b;const z=[N.data];return Y&&Y.forEach(G=>{N=N.children[G],N&&z.push(N.data)}),z.filter(G=>G.baseUrls.length)},invalidateSelectedIndexes:function(Y){x(N=>{isNaN(N.selectedIdx)||Y===N.baseUrls[N.selectedIdx].serviceLocation&&(N.selectedIdx=Xd)})},setConfig:function(Y){Y.adapter&&(T=Y.adapter),Y.contentSteeringController&&(S=Y.contentSteeringController)},getBaseUrls:function(Y){return H(Y)}},W(),_}My.__dashjs_factory_name="BaseURLTreeModel";var Oy=ve.default.getClassFactory(My);function Zd(_){let b;const T=(_=_||{}).blacklistController;return b={select:function(S){return S&&function(k){let C,$,H=0,x=[],W=0;if($=k.sort(function(Y,N){let z=Y.dvbPriority-N.dvbPriority;return isNaN(z)?0:z}).filter(function(Y,N,z){return!N||z[0].dvbPriority&&Y.dvbPriority&&z[0].dvbPriority===Y.dvbPriority}),$.length)return $.length>1&&($.forEach(Y=>{H+=Y.dvbWeight,x.push(H)}),C=Math.floor(Math.random()*(H-1)),x.every((Y,N)=>(W=N,!(C<Y)))),$[W]}(function(k){let C=[];return k.filter(function($){return!T.contains($.serviceLocation)||($.dvbPriority&&C.push($.dvbPriority),!1)}).filter(function($){return!C.length||!$.dvbPriority||C.indexOf($.dvbPriority)===-1})}(S))}},b}Zd.__dashjs_factory_name="DVBSelector";var Zf=ve.default.getClassFactory(Zd);function Jf(_){let b;const T=(_=_||{}).blacklistController;return b={select:function(S){let k,C=0;return S&&S.some(($,H)=>(C=H,!T.contains($.serviceLocation)))&&(k=S[C]),k}},b}Jf.__dashjs_factory_name="BasicSelector";var Cg=ve.default.getClassFactory(Jf);function eh(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C=[];function $(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Y=0,N=NaN;for(;Y<x.length;){const z=x[Y],G=W.findIndex(re=>re.serviceLocation&&re.serviceLocation===z);if(G!==-1&&!k.contains(W[G].serviceLocation)){N=G;break}Y+=1}return N}function H(x){const W=S.getCurrentSteeringResponseData();if(!W)return;const Y=x.entry,N=setTimeout(()=>{k.remove(Y),C.splice(C.indexOf(N,1))},1e3*W.ttl);C.push(N)}return T={selectBaseUrlIndex:function(x){let W=NaN;if(isNaN(x.selectedIdx)){const N=S.getSteeringDataFromManifest();N&&N.defaultServiceLocationArray.length>0&&(W=$(N.defaultServiceLocationArray,x.baseUrls))}const Y=S.getCurrentSteeringResponseData();return x.baseUrls&&x.baseUrls.length&&Y&&Y.pathwayPriority&&Y.pathwayPriority.length&&(W=$(Y.pathwayPriority,x.baseUrls)),W},setConfig:function(x){x.blacklistController&&(k=x.blacklistController),x.contentSteeringController&&(S=x.contentSteeringController),b.on(x.addBlacklistEventName,H,T)},reset:function(){C.forEach(x=>clearTimeout(x)),C=[]}},S=$f(_).getInstance(),T}eh.__dashjs_factory_name="ContentSteeringSelector";var Lg=ve.default.getClassFactory(eh);function Fy(){const _=this.context,b=(0,oe.default)(_).getInstance(),T=(0,J.default)(_).getInstance();let S,k,C,$,H,x;function W(){H.reset(),k.reset()}return S={chooseSelector:function(Y){(0,Bt.checkParameterType)(Y,"boolean"),x=Y?$:C},select:function(Y){if(!Y)return;if(T.get().streaming.applyContentSteering){const z=H.selectBaseUrlIndex(Y);isNaN(z)||z===-1||(Y.selectedIdx=z)}if(!isNaN(Y.selectedIdx))return Y.baseUrls[Y.selectedIdx];let N=x.select(Y.baseUrls);return N?(Y.selectedIdx=Y.baseUrls.indexOf(N),N):(b.trigger(D.default.URL_RESOLUTION_FAILED,{error:new Pe.default(Q.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Q.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(x===C&&W()))},reset:W,setConfig:function(Y){Y.selector&&(x=Y.selector),Y.contentSteeringSelector&&(H=Y.contentSteeringSelector)}},k=zf(_).create({updateEventName:D.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:D.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),C=Cg(_).create({blacklistController:k}),$=Zf(_).create({blacklistController:k}),H=Lg(_).create(),H.setConfig({blacklistController:k,addBlacklistEventName:D.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),x=C,S}Fy.__dashjs_factory_name="BaseURLSelector";var Uy=ve.default.getClassFactory(Fy);function zy(){let _,b;const T=this.context,S=(0,oe.default)(T).getInstance(),k=hn(T).getInstance();let C,$,H;function x(Y){C.update(Y),$.chooseSelector(b.getIsDVB(Y)),S.trigger(te.default.BASE_URLS_UPDATED,{baseUrls:W(Y)})}function W(Y){return C.getBaseUrls(Y)}return _={reset:function(){C.reset(),$.reset()},initialize:function(Y){C.setConfig({adapter:b,contentSteeringController:H}),x(Y)},resolve:function(Y){const N=C.getForPath(Y).reduce((z,G)=>{const re=$.select(G);return re?(k.isRelative(re.url)?z.url=k.resolve(re.url,z.url):(z.url=re.url,z.serviceLocation=re.serviceLocation),z.availabilityTimeOffset=re.availabilityTimeOffset,z.availabilityTimeComplete=re.availabilityTimeComplete,z.queryParams=re.queryParams,z):new na},new na);if(!k.isRelative(N.url))return N},setConfig:function(Y){Y.baseURLTreeModel&&(C=Y.baseURLTreeModel),Y.baseURLSelector&&($=Y.baseURLSelector),Y.adapter&&(b=Y.adapter),Y.contentSteeringController&&(H=Y.contentSteeringController)},getBaseUrls:W,update:x},C=Oy(T).create(),$=Uy(T).create(),S.on(D.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Y){C.invalidateSelectedIndexes(Y.entry)},_),_}zy.__dashjs_factory_name="BaseURLController";var s_=ve.default.getClassFactory(zy),th=class extends Ye{constructor(_,b){super(),this.url=_||null,this.type=b||null,this.mediaType=L.default.STREAM,this.responseType=""}};function eo(_){_=_||{};const b=this.context,T=(0,oe.default)(b).getInstance();let S,k=Eu(b).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,errors:Q});return S={load:function(C,$,H){const x=function(W,Y){$.resolved=!0,$.resolvedContent=W||null,T.trigger(D.default.XLINK_ELEMENT_LOADED,{element:$,resolveObject:H,error:W||Y?null:new Pe.default(Q.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Q.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+C)})};if(C==="urn:mpeg:dash:resolve-to-zero:2013")x(null,!0);else{const W=new th(C,Re.HTTPRequest.XLINK_EXPANSION_TYPE);k.load({request:W,success:function(Y){x(Y)},error:function(){x(null)}})}},reset:function(){k&&(k.abort(),k=null)}},S}eo.__dashjs_factory_name="XlinkLoader";var By=ve.default.getClassFactory(eo);const cs="onLoad";function fs(_){_=_||{};let b=this.context,T=(0,oe.default)(b).getInstance();const S=hn(b).getInstance();let k,C,$,H;function x(G,re,le){let de,se,he={};he.elements=G,he.type=re,he.resolveType=le,he.elements.length===0&&Y(he);for(let ge=0;ge<he.elements.length;ge++)de=he.elements[ge],se=S.isHTTPURL(de.url)?de.url:de.originalContent.BaseURL+de.url,H.load(se,de,he)}function W(G){let re,le,de="";if(re=G.element,le=G.resolveObject,re.resolvedContent){let se=0;re.resolvedContent.indexOf("<?xml")===0&&(se=re.resolvedContent.indexOf("?>")+2),de=re.resolvedContent.substr(0,se)+"<response>"+re.resolvedContent.substr(se)+"</response>",re.resolvedContent=C.parseXml(de).response}(function(se){let he,ge;for(he=0;he<se.elements.length;he++)if(ge=se.elements[he],ge.resolved===!1)return!1;return!0})(le)&&Y(le)}function Y(G){let re,le,de=[];if(function(se){let he,ge,Ie,ee,V,j,X=[];for(ee=se.elements.length-1;ee>=0;ee--){if(he=se.elements[ee],ge=he.type,he.resolvedContent){if(he.resolvedContent)for(V=0;V<he.resolvedContent[ge].length;V++)Ie=he.resolvedContent[ge][V],X.push(Ie)}else delete he.originalContent["xlink:actuate"],delete he.originalContent["xlink:href"],X.push(he.originalContent);for(he.parentElement[ge].splice(he.index,1),j=0;j<X.length;j++)he.parentElement[ge].splice(he.index+j,0,X[j]);X=[]}se.elements.length>0&&C.getIron().run($)}(G),G.resolveType==="onActuate"&&T.trigger(D.default.XLINK_READY,{manifest:$}),G.resolveType===cs)switch(G.type){case w.default.PERIOD:for(re=0;re<$[w.default.PERIOD].length;re++)le=$[w.default.PERIOD][re],le.hasOwnProperty(w.default.ADAPTATION_SET)&&(de=de.concat(N(le[w.default.ADAPTATION_SET],le,w.default.ADAPTATION_SET,cs))),le.hasOwnProperty(w.default.EVENT_STREAM)&&(de=de.concat(N(le[w.default.EVENT_STREAM],le,w.default.EVENT_STREAM,cs)));x(de,w.default.ADAPTATION_SET,cs);break;case w.default.ADAPTATION_SET:T.trigger(D.default.XLINK_READY,{manifest:$})}}function N(G,re,le,de){let se,he,ge,Ie=[];for(he=G.length-1;he>=0;he--)se=G[he],se.hasOwnProperty("xlink:href")&&se["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&G.splice(he,1);for(he=0;he<G.length;he++)se=G[he],se.hasOwnProperty("xlink:href")&&se.hasOwnProperty("xlink:actuate")&&se["xlink:actuate"]===de&&(ge=z(se["xlink:href"],re,le,he,de,se),Ie.push(ge));return Ie}function z(G,re,le,de,se,he){return{url:G,parentElement:re,type:le,index:de,resolveType:se,originalContent:he,resolvedContent:null,resolved:!1}}return k={resolveManifestOnLoad:function(G){let re;$=G,$.Period?(re=N($.Period,$,w.default.PERIOD,cs),x(re,w.default.PERIOD,cs)):T.trigger(D.default.XLINK_READY,{manifest:$})},setParser:function(G){G&&(C=G)},reset:function(){T.off(D.default.XLINK_ELEMENT_LOADED,W,k),H&&(H.reset(),H=null)}},T.on(D.default.XLINK_ELEMENT_LOADED,W,k),H=By(b).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,settings:_.settings}),k}fs.__dashjs_factory_name="XlinkController";var Jd=ve.default.getClassFactory(fs);function Ls(_){function b(k,C){for(let $ in k)C.hasOwnProperty($)||(C[$]=k[$])}function T(k,C,$){for(let H=0,x=k.length;H<x;++H){const W=k[H];if(C[W.name])if($[W.name]){if(W.merge){const Y=C[W.name],N=$[W.name];typeof Y=="object"&&typeof N=="object"?b(Y,N):$[W.name]=Y+N}}else $[W.name]=C[W.name]}}function S(k,C){for(let $=0,H=k.children.length;$<H;++$){const x=k.children[$],W=C[x.name];if(W)for(let Y=0,N=W.length;Y<N;++Y){const z=W[Y];T(k.properties,C,z),S(x,z)}}}return{run:function(k){if(k===null||typeof k!="object")return k;if(k.Period&&"period"in _){const C=_.period,$=k.Period;for(let H=0,x=$.length;H<x;++H){const W=$[H];if(S(C,W),"adaptationset"in _){const Y=W.AdaptationSet;if(Y){const N=_.adaptationset;for(let z=0,G=Y.length;z<G;++z)S(N,Y[z])}}}}return k}}}Ls.__dashjs_factory_name="ObjectIron";var Dg=ve.default.getClassFactory(Ls),nh=class{constructor(_,b){this._test=_,this._converter=b}get test(){return this._test}get converter(){return this._converter}};const $y=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var Dl=class extends nh{constructor(){super((_,b,T)=>{const S=[w.default.MIN_BUFFER_TIME,w.default.MEDIA_PRESENTATION_DURATION,w.default.MINIMUM_UPDATE_PERIOD,w.default.TIMESHIFT_BUFFER_DEPTH,w.default.MAX_SEGMENT_DURATION,w.default.MAX_SUBSEGMENT_DURATION,w.default.SUGGESTED_PRESENTATION_DELAY,w.default.START,L.default.START_TIME,w.default.DURATION],k=S.length;for(let C=0;C<k;C++)if(b===S[C])return $y.test(T);return!1},_=>{const b=$y.exec(_);let T=31536e3*parseFloat(b[3]||0)+2592e3*parseFloat(b[5]||0)+86400*parseFloat(b[7]||0)+3600*parseFloat(b[9]||0)+60*parseFloat(b[11]||0)+parseFloat(b[13]||0);return b[1]!==void 0&&(T=-T),T})}};const ku=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var Ru=class extends nh{constructor(){super((_,b,T)=>ku.test(T),_=>{const b=ku.exec(_);let T;if(T=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),b[6]&&parseInt(b[6],10)||0,b[7]&&1e3*parseFloat(b[7])||0),b[9]&&b[10]){const S=60*parseInt(b[9],10)+parseInt(b[10],10);T+=(b[8]==="+"?-1:1)*S*60*1e3}return new Date(T)})}};const rh=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ng=[w.default.ID];var xu=class extends nh{constructor(){super((_,b,T)=>rh.test(T)&&Ng.indexOf(b)===-1,_=>parseFloat(_))}},Do=class extends nh{constructor(){super((_,b)=>{const T={[w.default.ADAPTATION_SET]:[w.default.LANG],[w.default.REPRESENTATION]:[w.default.LANG],[w.default.CONTENT_COMPONENT]:[w.default.LANG],[w.default.LABEL]:[w.default.LANG],[w.default.GROUP_LABEL]:[w.default.LANG]};if(T.hasOwnProperty(_)){let S=T[_];return S!==void 0&&S.indexOf(b)>=0}return!1},_=>Kd(_)||String(_))}},oi=class{constructor(_){var b;this._name=_,this._merge=(b=_)&&b.length&&b.charAt(0)===b.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},Hr=class{constructor(_,b,T){this._name=_||"",this._properties=[],this._children=T||[],Array.isArray(b)&&b.forEach(S=>{this._properties.push(new oi(S))})}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},No=class extends Hr{constructor(){const _=[w.default.PROFILES,w.default.WIDTH,w.default.HEIGHT,w.default.SAR,w.default.FRAMERATE,w.default.AUDIO_SAMPLING_RATE,w.default.MIME_TYPE,w.default.SEGMENT_PROFILES,w.default.CODECS,w.default.MAXIMUM_SAP_PERIOD,w.default.START_WITH_SAP,w.default.MAX_PLAYOUT_RATE,w.default.CODING_DEPENDENCY,w.default.SCAN_TYPE,w.default.FRAME_PACKING,w.default.AUDIO_CHANNEL_CONFIGURATION,w.default.CONTENT_PROTECTION,w.default.INBAND_EVENT_STREAM];super(w.default.ADAPTATION_SET,_,[new Hr(w.default.REPRESENTATION,_,[new Hr(w.default.SUB_REPRESENTATION,_)])])}},da=class extends Hr{constructor(){const _=[w.default.SEGMENT_BASE,w.default.SEGMENT_TEMPLATE,w.default.SEGMENT_LIST];super(w.default.PERIOD,_,[new Hr(w.default.ADAPTATION_SET,_,[new Hr(w.default.REPRESENTATION,_)])])}};const _a={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&apos;":"'"};function Po(_,b){const T=b.split(/(&[#a-zA-Z0-9]+;)/);if(T.length<=1)return b;for(let S=1;S<T.length;S+=2){const k=T[S];if(k.charAt(1)==="#"){let C;C=k.charAt(2)==="x"?parseInt(k.substring(3,k.length-1),16):parseInt(k.substring(2,k.length-1),10),!isNaN(C)&&C>=0&&C<=1114111&&(T[S]=String.fromCodePoint(C))}else _.hasOwnProperty(k)&&(T[S]=_[k])}return T.join("")}function Cu(_,b){var T=(b=b||{}).pos||0,S=!!b.keepComments,k=!!b.keepWhitespace,C=b.attrMatchers||[],$=b.nodesAsArray||[],H="<",x=60,W=">",Y=62,N=45,z=47,G=33,re=39,le=34,de=91,se=93;function he(Ae,be){for(var Se=[];_[T];)if(_.charCodeAt(T)==x){if(_.charCodeAt(T+1)===z){var Me=T+2;if(T=_.indexOf(W,T),_.substring(Me,T).indexOf(Ae)==-1){var Fe=_.substring(0,T).split(`
`);throw new Error(`Unexpected close tag
Line: `+(Fe.length-1)+`
Column: `+(Fe[Fe.length-1].length+1)+`
Char: `+_[T])}return T+1&&(T+=1),Se}if(_.charCodeAt(T+1)===G){if(_.charCodeAt(T+2)==N){const me=T;for(;T!==-1&&(_.charCodeAt(T)!==Y||_.charCodeAt(T-1)!=N||_.charCodeAt(T-2)!=N||T==-1);)T=_.indexOf(W,T+1);T===-1&&(T=_.length),S&&Se.push(_.substring(me,T+1))}else{if(_.charCodeAt(T+2)===de&&_.charCodeAt(T+8)===de&&_.substr(T+3,5).toLowerCase()==="cdata"){var Z=_.indexOf("]]>",T);Z==-1?(Se.push(_.substr(T+9)),T=_.length):(Se.push(_.substring(T+9,Z)),T=Z+3);continue}{const me=T+1;T+=2;for(var ne=!1;(_.charCodeAt(T)!==Y||ne===!0)&&_[T];)_.charCodeAt(T)===de?ne=!0:ne===!0&&_.charCodeAt(T)===se&&(ne=!1),T++;Se.push(_.substring(me,T))}}T++;continue}var we=j();if(Se.push(we),we.tagName[0]==="?"&&(Se.push(...we.children),we.children=[]),be){let me=we.tagName;$.indexOf(me)!==-1?(be[me]||(be[me]=[]),be[me].push(we)):be[me]=we}}else{var _e=(ae=void 0,ae=T,(T=_.indexOf(H,T)-1)==-2&&(T=_.length),Po(_a,_.slice(ae,T+1)));k||(_e=_e.trim()),be?be.__text=_e:Se.push(_e),T++}var ae;return Se}function ge(Ae,be,Se){if(Ae==="S")return parseInt(Se);let Me=Po(_a,Se);return C.forEach(Fe=>{Fe.test(Ae,be,Se)&&(Me=Fe.converter(Se))}),Me}var Ie=`\r
	>/= `;function ee(){for(var Ae=T;Ie.indexOf(_[T])===-1&&_[T];)T++;return _.slice(Ae,T)}var V=b.noChildNodes||["img","br","input","meta","link","hr"];function j(){T++;const Ae=ee();let be=[],Se={tagName:Ae},Me=Se.tagName.indexOf(":");for(Me!==-1&&(Se.__prefix=Se.tagName.substr(0,Me),Se.tagName=Se.tagName.substr(Me+1));_.charCodeAt(T)!==Y&&_[T];){var Fe=_.charCodeAt(T);if(Fe>64&&Fe<91||Fe>96&&Fe<123){for(var Z=ee(),ne=_.charCodeAt(T);ne&&ne!==re&&ne!==le&&!(ne>64&&ne<91||ne>96&&ne<123)&&ne!==Y;)T++,ne=_.charCodeAt(T);if(ne===re||ne===le){var we=(_e=void 0,ae=void 0,_e=_[T],ae=T+1,T=_.indexOf(_e,ae),_.slice(ae,T));if(T===-1)return Se}else we=null,T--;we=ge(Se.tagName,Z,we),Se[Z]=we}T++}var _e,ae;if(_.charCodeAt(T-1)!==z)if(Ae=="script"){var me=T+1;T=_.indexOf("<\/script>",T),be=[_.slice(me,T)],T+=9}else Ae=="style"?(me=T+1,T=_.indexOf("</style>",T),be=[_.slice(me,T)],T+=8):V.indexOf(Ae)===-1?(T++,be=he(Ae,Se)):T++;else T++;return Se.__children=be,Se}var X,pe=null;if(b.attrValue!==void 0)for(b.attrName=b.attrName||"id",pe=[];X=new RegExp("\\s"+b.attrName+`\\s*=['"]`+b.attrValue+`['"]`).exec(_),(T=X?X.index:-1)!==-1;)(T=_.lastIndexOf("<",T))!==-1&&pe.push(j()),_=_.substr(T),T=0;else pe=b.parseNode?j():he("");return b.filter&&(pe=ec(pe,b.filter)),b.simplify?Sa(Array.isArray(pe)?pe:[pe]):(b.setPos&&(pe.pos=T),pe)}function Sa(_){var b={};if(!_.length)return"";if(_.length===1&&typeof _[0]=="string")return _[0];for(var T in _.forEach(function(S){if(typeof S=="object"){b[S.tagName]||(b[S.tagName]=[]);var k=Sa(S.children);b[S.tagName].push(k),Object.keys(S.attributes).length&&typeof k!="string"&&(k._attributes=S.attributes)}}),b)b[T].length==1&&(b[T]=b[T][0]);return b}function ec(_,b){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";var k=[];return _.forEach(function(C,$){if(typeof C=="object"&&b(C,$,T,S)&&k.push(C),C.children){var H=ec(C.children,b,T+1,(S?S+".":"")+$+"."+C.tagName);k=k.concat(H)}}),k}const jy=[w.default.PERIOD,w.default.BASE_URL,w.default.ADAPTATION_SET,w.default.REPRESENTATION,w.default.CONTENT_PROTECTION,w.default.ROLE,w.default.ACCESSIBILITY,w.default.AUDIO_CHANNEL_CONFIGURATION,w.default.CONTENT_COMPONENT,w.default.ESSENTIAL_PROPERTY,w.default.LABEL,w.default.S,w.default.SEGMENT_URL,w.default.EVENT,w.default.EVENT_STREAM,w.default.LOCATION,w.default.SERVICE_DESCRIPTION,w.default.SUPPLEMENTAL_PROPERTY,w.default.METRICS,w.default.REPORTING,w.default.PATCH_LOCATION,w.default.REPLACE,w.default.ADD,w.default.REMOVE,w.default.UTC_TIMING,w.default.INBAND_EVENT_STREAM,w.default.PRODUCER_REFERENCE_TIME,w.default.CONTENT_STEERING];function Pg(_){_=_||{};const b=this.context,T=_.debug;let S,k,C,$;function H(x){try{let W=Cu(x,{parseNode:!0,attrMatchers:C,nodesAsArray:jy}),Y={};if(W.tagName.toLowerCase().indexOf("xml")!==-1)for(let N in W){if(Array.isArray(W[N])){Y[N]=W[N][0];break}if(typeof W[N]=="object"){Y[N]=W[N];break}}else Y[W.tagName]=W,delete W.tagName;return Y}catch{return null}}return S={getIron:function(){return $},parseXml:H,parse:function(x){let W;const Y=window.performance.now();if(W=H(x),!W)throw new Error("failed to parse the manifest");W.Patch?(W=W.Patch,W.add&&W.add.forEach(z=>$.run(z)),W.replace&&W.replace.forEach(z=>$.run(z))):(W=W.MPD,$.run(W));const N=window.performance.now();return k.info("Parsing complete: "+(N-Y).toPrecision(3)+"ms"),W.protocol="DASH",W}},k=T.getLogger(S),C=[new Dl,new Ru,new xu,new Do],$=Dg(b).create({adaptationset:new No,period:new da}),S}Pg.__dashjs_factory_name="DashParser";var ih=ve.default.getClassFactory(Pg);function Mg(_){_=_||{};const b=this.context,T=_.debug,S=_.settings,k=(0,oe.default)(b).getInstance(),C=hn(b).getInstance();let $,H,x,W,Y,N=_.mssHandler,z=_.errHandler;function G(re){k.trigger(D.default.INTERNAL_MANIFEST_LOADED,{manifest:re.manifest})}return $={load:function(re){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const se=new Date,he=new th(re,Re.HTTPRequest.MPD_TYPE);le&&(he.serviceLocation=le),de&&(he.queryParams=de),he.startDate||(he.startDate=se),k.trigger(D.default.MANIFEST_LOADING_STARTED,{request:he}),x.load({request:he,success:function(ge,Ie,ee){if(!W)return;let V,j,X;if(ee&&ee!==re?(j=C.parseBaseUrl(ee),V=ee):(C.isRelative(re)&&(re=C.resolve(re,window.location.href)),j=C.parseBaseUrl(re)),Ie!="No Content")if(Y===null&&(Y=function(pe){let Ae=null;return pe.indexOf("SmoothStreamingMedia")>-1?(N&&(Ae=N.createMssParser(),N.createMssFragmentProcessor(),N.registerEvents()),Ae):pe.indexOf("MPD")>-1||pe.indexOf("Patch")>-1?ih(b).create({debug:T}):Ae}(ge)),Y!==null){W.setParser(Y);try{X=Y.parse(ge)}catch{return void k.trigger(D.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${re}`)})}if(X){if(X.url=V||re,X.originalUrl||(X.originalUrl=X.url),S&&S.get().streaming.enableManifestDurationMismatchFix&&X.mediaPresentationDuration&&X.Period.length>1){const pe=X.Period.reduce((Ae,be)=>Ae+be.duration,0);!isNaN(pe)&&X.mediaPresentationDuration>pe&&(H.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),X.mediaPresentationDuration=pe)}X.baseUri=j,X.loadedTime=new Date,W.resolveManifestOnLoad(X),k.trigger(D.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:ge})}else k.trigger(D.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${re}`)})}else k.trigger(D.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${re}`)});else k.trigger(D.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(ge,Ie,ee){k.trigger(D.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(Q.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${re}, ${ee}`)})}})},reset:function(){k.off(D.default.XLINK_READY,G,$),N&&N.reset(),W&&(W.reset(),W=null),x&&(x.abort(),x=null)}},H=T.getLogger($),k.on(D.default.XLINK_READY,G,$),x=Eu(b).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,urlUtils:C,constants:L.default,dashConstants:w.default,errors:Q,requestTimeout:_.settings.get().streaming.manifestRequestTimeout}),W=Jd(b).create({errHandler:z,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,settings:_.settings}),Y=null,$}Mg.__dashjs_factory_name="ManifestLoader";var to=ve.default.getClassFactory(Mg);function tc(){let _;const b=this.context,T=(0,oe.default)(b).getInstance();return _={error:function(S){T.trigger(D.default.ERROR,{error:S})}},_}tc.__dashjs_factory_name="ErrorHandler";var Og=ve.default.getSingletonFactory(tc),Fg=t(559);function qy(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k,C,$,H,x;function W(G,re,le){const de=N(G,re,le);return k.isCodecSupportedBasedOnTestedConfigurations(de,G)}function Y(G,re,le,de,se){const he=N(G,re,le),ge=JSON.stringify(he);de.has(ge)||(de.add(ge),se.push(he))}function N(G,re,le){let de=null;switch(G){case L.default.VIDEO:de=function(se,he){let ge={codec:he,width:se.width||null,height:se.height||null,framerate:S.getFramerate(se)||null,bitrate:se.bandwidth||null,isSupported:!0};C.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&Object.assign(ge,function(V){let j={colorGamut:null,transferFunction:null,isSupported:!0};for(const X of V.EssentialProperty||[])X.schemeIdUri===L.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(X.value.toString())?j.colorGamut=L.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:X.schemeIdUri===L.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(X.value.toString())?j.colorGamut=L.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:X.schemeIdUri===L.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(X.value.toString())?j.colorGamut=L.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:X.schemeIdUri===L.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(X.value.toString())?j.colorGamut=null:X.schemeIdUri===L.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(j.isSupported=!1),X.schemeIdUri===L.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(X.value.toString())?j.transferFunction=L.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:X.schemeIdUri===L.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(X.value.toString())?j.transferFunction=L.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:X.schemeIdUri===L.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(X.value.toString())?j.transferFunction=L.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:X.schemeIdUri===L.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(X.value.toString())?j.transferFunction=null:X.schemeIdUri===L.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(j.isSupported=!1);return j}(se));let Ie=ge.isSupported;C.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&Object.assign(ge,function(V){let j={isSupported:!0,hdrMetadataType:null};for(const X of V.EssentialProperty||[])X.schemeIdUri===L.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&X.value===L.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?j.hdrMetadataType=L.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:X.schemeIdUri===L.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&X.value===L.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?j.hdrMetadataType=L.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:X.schemeIdUri===L.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&X.value===L.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?j.hdrMetadataType=L.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:X.schemeIdUri===L.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(j.isSupported=!1);return j}(se));let ee=ge.isSupported;return Ie&&ee||(ge.isSupported=!1),ge}(re,le);break;case L.default.AUDIO:de=function(se,he){const ge=se.audioSamplingRate||null;return{codec:he,bitrate:se.bandwidth||null,samplerate:ge,isSupported:!0}}(re,le);break;default:return de}return function(se,he){return se&&se[w.default.CONTENT_PROTECTION]&&se[w.default.CONTENT_PROTECTION].length>0&&(he.keySystemsMetadata=H.getSupportedKeySystemMetadataFromContentProtection(se[w.default.CONTENT_PROTECTION])),he}(re,de)}function z(G){if(!G||G.length===0)return!0;let re=0;for(;re<G.length;){if(!k.supportsEssentialProperty(G[re]))return x.debug("[Stream] EssentialProperty not supported: "+G[re].schemeIdUri),!1;re+=1}return!0}return T={setConfig:function(G){G&&(G.adapter&&(S=G.adapter),G.capabilities&&(k=G.capabilities),G.settings&&(C=G.settings),G.protectionController&&(H=G.protectionController),G.customParametersModel&&($=G.customParametersModel))},filterUnsupportedFeatures:function(G){return new Promise(re=>{const le=[L.default.VIDEO,L.default.AUDIO],de=[];le.forEach(se=>{(function(ge,Ie){if(!ge||!ge.Period||ge.Period.length===0)return[];const ee=new Set,V=[];return ge.Period.forEach(j=>{j.AdaptationSet.forEach(X=>{S.getIsTypeOf(X,Ie)&&X.Representation.forEach((pe,Ae)=>{const be=S.getCodec(X,Ae,!1);Y(Ie,pe,be,ee,V);const Se=S.getSupplementalCodecs(pe);Se.length>0&&Y(Ie,pe,Se[0],ee,V)})})}),V})(G,se).forEach(ge=>{de.push(k.runCodecSupportCheck(ge,se))})}),Promise.allSettled(de).then(()=>(le.forEach(se=>{(function(he,ge){ge&&ge.Period&&ge.Period.length!==0&&ge.Period.forEach(Ie=>{(function(ee,V){ee&&ee.AdaptationSet&&ee.AdaptationSet.length!==0&&(ee.AdaptationSet=ee.AdaptationSet.filter(j=>{S.getIsTypeOf(j,V)&&function(pe,Ae){pe.Representation&&pe.Representation.length!==0&&(pe.Representation=pe.Representation.filter((be,Se)=>{const Me=S.getCodec(pe,Se,!1),Fe=W(Ae,be,Me);let Z=function(ne,we){let _e=!1;const ae=S.getSupplementalCodecs(ne);return ae.length>0&&(ae.length>1&&x.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),_e=W(we,ne,ae[0])),_e}(be,Ae);return Z&&(x.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${be.id}`),be.codecs=be[w.default.SUPPLEMENTAL_CODECS]),Fe||Z||x.warn(`[CapabilitiesFilter] Codec ${Me} not supported. Removing Representation with ID ${be.id}`),Fe||Z}))}(j,V);const X=j.Representation&&j.Representation.length>0;return X||(b.trigger(D.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:j}),x.warn(`[CapabilitiesFilter] AdaptationSet with ID ${j.id?j.id:"undefined"} and codec ${j.codecs?j.codecs:"undefined"} has been removed because of no supported Representation`)),X}))})(Ie,he)})})(se,G)}),C.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(se){se&&se.Period&&se.Period.length!==0&&se.Period.forEach(he=>{he.AdaptationSet=he.AdaptationSet.filter(ge=>!ge.Representation||ge.Representation.length===0||!!z(S.getEssentialPropertiesForAdaptationSet(ge))&&(ge.Representation=ge.Representation.filter(Ie=>z(S.getEssentialPropertiesForRepresentation(Ie))),ge.Representation&&ge.Representation.length>0))})}(G),function(se){if(!se||!se.Period||se.Period.length===0)return Promise.resolve();const he=[];return se.Period.forEach(ge=>{he.push(function(Ie){return new Promise(ee=>{if(!Ie||!Ie.AdaptationSet||Ie.AdaptationSet.length===0)return void ee();const V=[];Ie.AdaptationSet.forEach(j=>{V.push(function(X){return new Promise(pe=>{if(!X.Representation||X.Representation.length===0)return void pe();const Ae=[];X.Representation.forEach(be=>{Ae.push(function(Se){const Me=[],Fe=$.getCustomCapabilitiesFilters();return Fe&&Fe.length!==0?Fe.forEach(Z=>{Me.push(new Promise(ne=>ne(Z(Se))))}):Me.push(Promise.resolve(!0)),Promise.all(Me)}(be))}),Promise.all(Ae).then(be=>{X.Representation=X.Representation.filter((Se,Me)=>{let Fe=be[Me].every(Z=>Z);return Fe||x.debug("[Stream] Representation "+Se.id+" has been removed because of unsupported CustomFilter"),Fe}),pe()}).catch(be=>{x.warn("[Stream] at least one promise rejected in CustomFilter with error: ",be),pe()})})}(j))}),Promise.all(V).then(()=>{Ie.AdaptationSet=Ie.AdaptationSet.filter(j=>j.Representation&&j.Representation.length>0),ee()}).catch(()=>{ee()})})}(ge))}),Promise.all(he)}(G))).then(()=>{re()}).catch(se=>{x.error(se),re()})})}},x=(0,Le.default)(_).getInstance().getLogger(T),T}qy.__dashjs_factory_name="CapabilitiesFilter";var Mo=ve.default.getSingletonFactory(qy),Lu=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function Nl(){let _,b;return _={initialize:function(T){if(b=new Lu,!T)return null;const S=T.indexOf("#");if(S!==-1){const k=T.substr(S+1).split("&");for(let C=0,$=k.length;C<$;++C){const H=k[C],x=H.indexOf("=");if(x!==-1){const W=H.substring(0,x);b.hasOwnProperty(W)&&(b[W]=H.substr(x+1))}}}},getURIFragmentData:function(){return b}},_}Nl.__dashjs_factory_name="URIFragmentModel";var ah=ve.default.getSingletonFactory(Nl);function nc(){let _,b,T=this.context,S=(0,oe.default)(T).getInstance();return _={getValue:function(){return b},setValue:function(k){b=k,k&&S.trigger(D.default.MANIFEST_LOADED,{data:k})}},_}nc.__dashjs_factory_name="ManifestModel";var Wa=ve.default.getSingletonFactory(nc);function $a(){let _,b,T,S;const k=this.context,C=(0,J.default)(k).getInstance();function $(N,z){return isNaN(N)?0:N>0?(z&&b.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):N<-.5?(z&&b.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):N}function H(N,z){return isNaN(N)?0:N<0?(z&&b.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):N>1?(z&&b.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):N}function x(){const N=W(),z=T.getLiveDelay();return!isNaN(z)&&z>0?Math.min(N,z):N}function W(){return C.get().streaming.buffer.bufferTimeDefault>0?C.get().streaming.buffer.bufferTimeDefault:Y()?20:12}function Y(){return C.get().streaming.buffer.fastSwitchEnabled!==null?C.get().streaming.buffer.fastSwitchEnabled:!T.getLowLatencyModeEnabled()}return _={getCatchupMaxDrift:function(){if(!isNaN(C.get().streaming.liveCatchup.maxDrift)&&C.get().streaming.liveCatchup.maxDrift>=0)return C.get().streaming.liveCatchup.maxDrift;const N=S.getServiceDescriptionSettings();return N&&N.liveCatchup&&!isNaN(N.liveCatchup.maxDrift)&&N.liveCatchup.maxDrift>=0?N.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return C.get().streaming.liveCatchup.enabled!==null?C.get().streaming.liveCatchup.enabled:T.getInitialCatchupModeActivated()},getBufferTimeDefault:x,getBufferTimeDefaultUnadjusted:W,getFastSwitchEnabled:Y,getInitialBufferLevel:function(){const N=C.get().streaming.buffer.initialBufferLevel;return isNaN(N)||N<0?0:Math.min(x(),N)},getRetryAttemptsForType:function(N){const z=isNaN(C.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:C.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return T.getLowLatencyModeEnabled()?C.get().streaming.retryAttempts[N]*z:C.get().streaming.retryAttempts[N]},getRetryIntervalsForType:function(N){const z=isNaN(C.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:C.get().streaming.retryIntervals.lowLatencyReductionFactor;return T.getLowLatencyModeEnabled()?C.get().streaming.retryIntervals[N]/z:C.get().streaming.retryIntervals[N]},getCatchupPlaybackRates:function(N){const z=C.get().streaming.liveCatchup.playbackRate;if(!isNaN(z.min)||!isNaN(z.max))return{min:$(z.min,N),max:H(z.max,N)};const G=S.getServiceDescriptionSettings();if(G&&G.liveCatchup&&(!isNaN(G.liveCatchup.playbackRate.min)||!isNaN(G.liveCatchup.playbackRate.max))){const re=G.liveCatchup.playbackRate;return{min:$(re.min,N),max:H(re.max,N)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(N,z){try{const G=C.get().streaming.abr[N][z];if(!isNaN(G)&&G!==-1)return G;const re=S.getServiceDescriptionSettings();return re&&re[N]&&!isNaN(re[N][z])?re[N][z]:-1}catch{return-1}},setConfig:function(N){N.playbackController&&(T=N.playbackController),N.serviceDescriptionController&&(S=N.serviceDescriptionController)},reset:function(){}},b=(0,Le.default)(k).getInstance().getLogger(_),_}$a.__dashjs_factory_name="MediaPlayerModel";var Pl=ve.default.getSingletonFactory($a);const ja={DEFAULT:.5,STRONG:1,WEAK:0};function hs(_,b,T,S){let k,C,$,H,x;return C=_===void 0?null:_,$=function(W){let Y=ja.DEFAULT;return W!==ja.DEFAULT&&W!==ja.STRONG&&W!==ja.WEAK||(Y=W),Y}(T),H=b===void 0?null:b,x=S===void 0?null:S,k={representation:C,reason:H,rule:x,priority:$},k}hs.__dashjs_factory_name="SwitchRequest";const Ds=ve.default.getClassFactory(hs);Ds.NO_CHANGE=null,Ds.PRIORITY=ja,ve.default.updateClassFactory(hs.__dashjs_factory_name,Ds);var Dr=Ds;function sh(_){_=_||{};const b=this.context,T=_.dashMetrics;let S,k;return S={getSwitchRequest:function(C){try{const $=Dr(b).create();$.rule=this.getClassName();const H=C.getMediaInfo(),x=C.getMediaType(),W=T.getCurrentBufferState(x),Y=C.getScheduleController(),N=C.getAbrController(),z=C.getStreamInfo(),G=z?z.id:null,re=z&&z.manifestInfo?z.manifestInfo.isDynamic:null,le=C.getThroughputController(),de=le.getSafeAverageThroughput(x),se=le.getAverageLatency(x);return isNaN(de)||!W||N.getAbandonmentStateFor(G,x)===O.ALLOW_LOAD&&(W.state===O.BUFFER_LOADED||re)&&($.representation=N.getOptimalRepresentationForBitrate(H,de,!0),$.reason={throughput:de,latency:se,message:`[ThroughputRule]: Switching to Representation with bitrate ${$.representation?$.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${de}`},Y.setTimeToLoadDelay(0)),$}catch($){return k.error($),Dr(b).create()}},reset:function(){}},k=(0,Le.default)(b).getInstance().getLogger(S),S}sh.__dashjs_factory_name="ThroughputRule";var oh=ve.default.getClassFactory(sh);function Ca(_){_=_||{};const b=this.context,T=(0,oe.default)(b).getInstance(),S=_.dashMetrics,k=(0,J.default)(b).getInstance();let C,$,H;function x(){const N=k.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;H={},H[L.default.VIDEO]={ignoreCount:N},H[L.default.AUDIO]={ignoreCount:N}}function W(){x()}function Y(N){isNaN(N.startTime)||N.mediaType!==L.default.AUDIO&&N.mediaType!==L.default.VIDEO||H[N.mediaType].ignoreCount>0&&H[N.mediaType].ignoreCount--}return C={getSwitchRequest:function(N){const z=Dr(b).create();if(z.rule=this.getClassName(),!N||!N.hasOwnProperty("getMediaType"))return z;const G=N.getMediaType(),re=S.getCurrentBufferState(G),le=N.getRepresentation().fragmentDuration;if(!function(he,ge,Ie){return!he.getLowLatencyModeEnabled()&&H[ge].ignoreCount<=0&&Ie}(N.getScheduleController().getPlaybackController(),G,le))return z;const de=N.getMediaInfo(),se=N.getAbrController();if(re&&re.state===O.BUFFER_EMPTY)$.debug("["+G+"] Switch to index 0; buffer is empty."),z.representation=se.getOptimalRepresentationForBitrate(de,0,!0),z.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const he=N.getThroughputController(),ge=S.getCurrentBufferLevel(G),Ie=he.getAverageThroughput(G,null,NaN)*k.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*ge/le;if(isNaN(Ie)||Ie<=0)return z;z.representation=se.getOptimalRepresentationForBitrate(de,Ie,!0),z.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:Ie}}return z},reset:function(){x(),T.off(te.default.PLAYBACK_SEEKING,W,C),T.off(D.default.BYTES_APPENDED_END_FRAGMENT,Y,C)}},$=(0,Le.default)(b).getInstance().getLogger(C),x(),T.on(te.default.PLAYBACK_SEEKING,W,C),T.on(D.default.BYTES_APPENDED_END_FRAGMENT,Y,C),C}Ca.__dashjs_factory_name="InsufficientBufferRule";var qa=ve.default.getClassFactory(Ca);function li(_){const b=(_=_||{}).mediaPlayerModel,T=_.dashMetrics,S=this.context,k=(0,J.default)(S).getInstance();let C,$,H;function x(){H={}}return C={shouldAbandon:function(W){const Y=Dr(S).create();Y.rule=this.getClassName();try{if(!W)return Y;const N=W.getCurrentRequest();if(!isNaN(N.index)){if(N.firstByteDate===null||H.hasOwnProperty(N.index))return Y;const z=b.getBufferTimeDefault(),G=W.getMediaType();if(T.getCurrentBufferLevel(G)>z)return Y;const re=Date.now()-N.firstByteDate.getTime();if(N.traces.length>=k.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&re>k.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&N.bytesLoaded<N.bytesTotal)return function(le,de,se){const he=le.getMediaInfo(),ge=le.getMediaType(),Ie=de.traces.reduce((Ae,be)=>Ae+be.b[0],0)-de.traces[0].b[0],ee=Math.max(de.traces.reduce((Ae,be)=>Ae+be.d,0)-de.traces[0].d,1),V=Math.round(8*Ie/ee),j=Number(8*de.bytesTotal/V/1e3).toFixed(2),X=le.getRepresentation(),pe=le.getAbrController();if(j<de.duration*k.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||pe.isPlayingAtLowestQuality(X))return se;if(!H.hasOwnProperty(de.index)){const Ae=le.getAbrController(),be=de.bytesTotal-de.bytesLoaded,Se=Ae.getOptimalRepresentationForBitrate(he,V,!0),Me=de.representation;be>de.bytesTotal*Se.bitrateInKbit/Me.bitrateInKbit&&(se.representation=Se,se.reason={throughputInKbit:V,message:`[AbandonRequestRule][${ge} is asking to abandon and switch to quality to ${Se.absoluteIndex}. The measured bandwidth was ${V} kbit/s`},H[de.index]=!0)}return se}(W,N,Y)}return Y}catch(N){return $.error(N),Y}},reset:x},$=(0,Le.default)(S).getInstance().getLogger(C),x(),C}li.__dashjs_factory_name="AbandonRequestsRule";var ms=ve.default.getClassFactory(li);function Ug(){const _=this.context,b=(0,J.default)(_).getInstance();let T;return T={getSwitchRequest:function(S){const k=Dr(_).create();if(k.rule=this.getClassName(),!S||!S.hasOwnProperty("getDroppedFramesHistory"))return k;const C=S.getDroppedFramesHistory();if(!C)return k;const $=S.getStreamInfo().id,H=S.getMediaInfo(),x=S.getAbrController(),W=C.getFrameHistory($);if(!W||Object.keys(W).length===0)return k;let Y=0,N=0;const z=x.getPossibleVoRepresentationsFilteredBySettings(H,!0);let G=null;for(let re=1;re<z.length;re++){const le=z[re];if(le&&W[le.id]&&(Y=W[le.id].droppedVideoFrames,N=W[le.id].totalVideoFrames,N>b.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&Y/N>b.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){G=z[re-1];break}}return G&&(k.representation=G,k.reason={droppedFrames:Y,message:`[DroppedFramesRule]: Switching to index ${G.absoluteIndex}. Dropped Frames: ${Y}, Total Frames: ${N}`}),k}},T}Ug.__dashjs_factory_name="DroppedFramesRule";var Hy=ve.default.getClassFactory(Ug);function lh(){const _=this.context,b=(0,J.default)(_).getInstance();let T;return T={getSwitchRequest:function(S){const k=Dr(_).create();if(k.rule=this.getClassName(),!S)return k;const C=S.getStreamInfo().id,$=S.getMediaType(),H=S?S.getSwitchRequestHistory():null,x=H?H.getSwitchRequests(C,$):{},W=S.getAbrController(),Y=S.getMediaInfo(),N=W.getPossibleVoRepresentationsFilteredBySettings(Y,!0);let z=0,G=0;for(let re=0;re<N.length;re++){const le=N[re];if(le&&x[le.id]&&(z+=x[le.id].drops,G+=x[le.id].noDrops,z+G>=b.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&z/G>b.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){k.representation=re>0&&x[le.id].drops>0?N[re-1]:le,k.reason={drops:z,noDrops:G,message:`[SwitchHistoryRule]: Switch to index: ${k.representation.absoluteIndex} samples: ${z+G} drops:  ${z}`};break}}return k}},T}lh.__dashjs_factory_name="SwitchHistoryRule";var zg=ve.default.getClassFactory(lh);const no="BOLA_STATE_ONE_BITRATE",Ml="BOLA_STATE_STARTUP",uh="BOLA_STATE_STEADY",gs=10;function dh(_){_=_||{};const b=this.context,T=_.dashMetrics,S=_.mediaPlayerModel,k=(0,oe.default)(b).getInstance(),C=Gg(b).getInstance();let $,H,x;function W(j){const X=j.mediaType,pe=j.streamId,Ae=X===L.default.AUDIO?[L.default.AUDIO]:x[pe];for(const be in Ae)x[pe]&&x[pe].hasOwnProperty(be)&&x[pe][be].state===uh&&(x[pe][be].placeholderBuffer=0)}function Y(j){const X=j.streamId;for(const pe in x[X])if(x[X].hasOwnProperty(pe)){const Ae=x[X][pe];Ae.state!==no&&(Ae.state=Ml,N(Ae))}}function N(j){j.placeholderBuffer=0,j.mostAdvancedSegmentStart=NaN,j.lastSegmentWasReplacement=!1,j.lastSegmentStart=NaN,j.lastSegmentDurationS=NaN,j.lastSegmentRequestTimeMs=NaN,j.lastSegmentFinishTimeMs=NaN}function z(j){try{if(j&&j.metric===O.HTTP_REQUEST&&j.value&&j.value.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE&&j.value.trace&&j.value.trace.length){const X=x[j.value._streamId]&&x[j.value._streamId][j.mediaType]?x[j.value._streamId][j.mediaType]:null;X&&X.state!==no&&(X.lastSegmentRequestTimeMs=j.value.trequest.getTime(),X.lastSegmentFinishTimeMs=j.value._tfinish.getTime(),G(X,j.mediaType))}}catch(X){H.error(X)}}function G(j,X){if(!isNaN(j.lastSegmentStart)&&!isNaN(j.lastSegmentRequestTimeMs)&&!isNaN(j.placeholderBuffer)){if(j.placeholderBuffer*=.99,!isNaN(j.lastSegmentFinishTimeMs)){const pe=T.getCurrentBufferLevel(X)+.001*(j.lastSegmentFinishTimeMs-j.lastSegmentRequestTimeMs),Ae=se(j,j.currentRepresentation),be=Math.max(0,Ae-pe);j.placeholderBuffer=Math.min(be,j.placeholderBuffer)}j.lastSegmentWasReplacement&&!isNaN(j.lastSegmentDurationS)&&(j.placeholderBuffer+=j.lastSegmentDurationS),j.lastSegmentStart=NaN,j.lastSegmentRequestTimeMs=NaN}}function re(j){if(j&&x[j.streamId]&&x[j.streamId][j.mediaType]){const X=x[j.streamId][j.mediaType];X&&X.state!==no&&(X.currentRepresentation=j.newRepresentation)}}function le(j,X,pe){const Ae=pe.reduce((Me,Fe,Z)=>Fe>pe[Me]?Z:Me,0);if(Ae===0)return null;const be=Math.max(j,gs+2*X.length),Se=(pe[Ae]-1)/(be/gs-1);return{gp:Se,Vp:gs/Se}}function de(j,X){const pe=S.getBufferTimeDefault();if(j.bufferTimeDefault!==pe){const Ae=le(pe,j.representations,j.utilities);if(Ae.Vp!==j.Vp||Ae.gp!==j.gp){const be=T.getCurrentBufferLevel(X);let Se=be+j.placeholderBuffer;Se-=gs,Se*=Ae.Vp/j.Vp,Se+=gs,j.bufferTimeDefault=pe,j.Vp=Ae.Vp,j.gp=Ae.gp,j.placeholderBuffer=Math.max(0,Se-be)}}}function se(j,X){return j.Vp*(j.utilities[X.absoluteIndex]+j.gp)}function he(j){if(j&&j.chunk&&j.chunk.representation.mediaInfo&&x[j.streamId]){const X=x[j.streamId][j.chunk.representation.mediaInfo.type];if(X&&X.state!==no){const pe=j.chunk.start;isNaN(X.mostAdvancedSegmentStart)||pe>X.mostAdvancedSegmentStart?(X.mostAdvancedSegmentStart=pe,X.lastSegmentWasReplacement=!1):X.lastSegmentWasReplacement=!0,X.lastSegmentStart=pe,X.lastSegmentDurationS=j.chunk.duration,X.currentRepresentation=j.chunk.representation,G(X,j.chunk.representation.mediaInfo.type)}}}function ge(){V()}function Ie(j,X){const pe=X.absoluteIndex,Ae=X.bandwidth,be=j.utilities[pe];let Se=0;for(let Me=pe-1;Me>=0;--Me)if(j.utilities[Me]<j.utilities[pe]){const Fe=j.representations[Me].bandwidth,Z=j.utilities[Me],ne=j.Vp*(j.gp+(Ae*Z-Fe*be)/(Ae-Fe));Se=Math.max(Se,ne)}return Se}function ee(j){if(j&&x[j.streamId]){const X=x[j.streamId][j.mediaType];if(X&&X.state!==no){const pe=T.getCurrentBufferLevel(j.mediaType);let Ae;Ae=X.currentRepresentation.absoluteIndex>0?Ie(X,X.currentRepresentation):gs;const be=Math.max(0,Ae-pe);X.placeholderBuffer=Math.min(X.placeholderBuffer,be)}}}function V(){x={}}return $={getSwitchRequest:function(j){try{const X=Dr(b).create();j.getScheduleController().setTimeToLoadDelay(0),X.rule=this.getClassName(),X.reason=X.reason||{};const pe=function(Ae){const be=Ae.getMediaType(),Se=Ae.getStreamInfo().id;x[Se]||(x={},x[Se]={});let Me=x[Se][be];return Me?Me.state!==no&&de(Me,be):(Me=function(Fe){const Z={},ne=Fe.getMediaInfo(),we=C.getPossibleVoRepresentationsFilteredBySettings(ne,!0);let _e=we.map(ye=>ye.bandwidth).map(ye=>Math.log(ye));_e=_e.map(ye=>ye-_e[0]+1);const ae=S.getBufferTimeDefault(),me=le(ae,we,_e);return me?(Z.state=Ml,Z.representations=we,Z.utilities=_e,Z.bufferTimeDefault=ae,Z.Vp=me.Vp,Z.gp=me.gp,Z.currentRepresentation=null,N(Z)):Z.state=no,Z}(Ae),x[Se][be]=Me),Me}(j);switch(X.reason.state=pe.state,pe.state){case no:break;case Ml:(function(Ae,be,Se){const Me=be.getMediaType(),Fe=be.getThroughputController().getSafeAverageThroughput(Me);if(isNaN(Fe))return;const Z=be.getMediaInfo(),ne=C.getOptimalRepresentationForBitrate(Z,Fe,!0),we=T.getCurrentBufferLevel(Me);Ae.representation=ne,Ae.reason.throughput=Fe,Se.placeholderBuffer=Math.max(0,Ie(Se,ne)-we),Se.currentRepresentation=ne,!isNaN(Se.lastSegmentDurationS)&&we>=Se.lastSegmentDurationS&&(Se.state=uh)})(X,j,pe);break;case uh:(function(Ae,be,Se){const Me=be.getMediaType(),Fe=be.getThroughputController(),Z=be.getMediaInfo(),ne=Fe.getSafeAverageThroughput(Me),we=be.getScheduleController();(function(fe,ke){const xe=Date.now();if(isNaN(fe.lastSegmentFinishTimeMs)){if(!isNaN(fe.lastCallTimeMs)){const je=.001*(xe-fe.lastCallTimeMs);fe.placeholderBuffer+=Math.max(0,je)}}else{const je=.001*(xe-fe.lastSegmentFinishTimeMs);fe.placeholderBuffer+=Math.max(0,je)}fe.lastCallTimeMs=xe,fe.lastSegmentStart=NaN,fe.lastSegmentRequestTimeMs=NaN,fe.lastSegmentFinishTimeMs=NaN,de(fe,ke)})(Se,Me);const _e=T.getCurrentBufferLevel(Me);let ae=function(fe,ke){const xe=fe.representations.length;let je=NaN,Ge=NaN;for(let nt=0;nt<xe;++nt){let ft=(fe.Vp*(fe.utilities[nt]-1+fe.gp)-ke)/fe.representations[nt].bandwidth;(isNaN(Ge)||ft>=Ge)&&(Ge=ft,je=nt)}return fe.representations[je]}(Se,_e+Se.placeholderBuffer);const me=C.getOptimalRepresentationForBitrate(Z,ne,!0);ae.absoluteIndex>Se.currentRepresentation.absoluteIndex&&ae.absoluteIndex>me.absoluteIndex&&(ae=me.absoluteIndex>Se.currentRepresentation.absoluteIndex?me:Se.currentRepresentation);let ye=Math.max(0,_e+Se.placeholderBuffer-se(Se,ae));ye<=Se.placeholderBuffer?(Se.placeholderBuffer-=ye,ye=0):(ye-=Se.placeholderBuffer,Se.placeholderBuffer=0,C.isPlayingAtTopQuality(ae)?ye=0:we.setTimeToLoadDelay(1e3*ye)),Ae.representation=ae,Ae.reason.throughput=ne,Ae.reason.bufferLevel=_e,Ae.reason.placeholderBuffer=Se.placeholderBuffer,Ae.reason.delay=ye,Se.currentRepresentation=ae})(X,j,pe);break;default:(function(Ae,be,Se){H.debug("BOLA ABR rule invoked in bad state.");const Me=be.getMediaInfo(),Fe=be.getMediaType(),Z=be.getThroughputController().getSafeAverageThroughput(Fe);Ae.representation=C.getOptimalRepresentationForBitrate(Me,Z,!0),Ae.reason.state=Se.state,Ae.reason.throughput=Z,Se.state=Ml,N(Se)})(X,j,pe)}return X}catch(X){return H.error(X),Dr(b).create()}},handleNewMediaInfo:function(j){j&&j.streamInfo&&j.type&&x[j.streamInfo.id]&&x[j.streamInfo.id][j.type]&&delete x[j.streamInfo.id][j.type]},reset:function(){V(),k.off(te.default.BUFFER_EMPTY,W,$),k.off(te.default.PLAYBACK_SEEKING,Y,$),k.off(te.default.METRIC_ADDED,z,$),k.off(te.default.QUALITY_CHANGE_REQUESTED,re,$),k.off(te.default.FRAGMENT_LOADING_ABANDONED,ee,$),k.off(D.default.MEDIA_FRAGMENT_LOADED,he,$),k.off(D.default.SETTING_UPDATED_MAX_BITRATE,ge,$),k.off(D.default.SETTING_UPDATED_MIN_BITRATE,ge,$)}},H=(0,Le.default)(b).getInstance().getLogger($),V(),k.on(te.default.BUFFER_EMPTY,W,$),k.on(te.default.PLAYBACK_SEEKING,Y,$),k.on(te.default.METRIC_ADDED,z,$),k.on(te.default.QUALITY_CHANGE_REQUESTED,re,$),k.on(te.default.FRAGMENT_LOADING_ABANDONED,ee,$),k.on(D.default.MEDIA_FRAGMENT_LOADED,he,$),k.on(D.default.SETTING_UPDATED_MAX_BITRATE,ge,$),k.on(D.default.SETTING_UPDATED_MIN_BITRATE,ge,$),$}dh.__dashjs_factory_name="BolaRule";var Gy=ve.default.getClassFactory(dh);const La="L2A_STATE_ONE_BITRATE",Ol="L2A_STATE_STARTUP",rc="L2A_STATE_STEADY",ro=Math.pow(4,.99);function ch(_){_=_||{};const b=this.context,T=_.dashMetrics,S=(0,oe.default)(b).getInstance();let k,C,$,H;function x(le){le.placeholderBuffer=0,le.mostAdvancedSegmentStart=NaN,le.lastSegmentWasReplacement=!1,le.lastSegmentStart=NaN,le.lastSegmentDurationS=NaN,le.lastSegmentRequestTimeMs=NaN,le.lastSegmentFinishTimeMs=NaN,le.lastSegmentUrl=""}function W(){for(const le in C)if(C.hasOwnProperty(le)){const de=C[le];de.state!==La&&(de.state=Ol,x(de))}}function Y(le){if(le&&le.chunk&&le.chunk.representation&&le.chunk.representation.mediaInfo){const de=C[le.chunk.representation.mediaInfo.type],se=$[le.chunk.representation.mediaInfo.type];if(de&&de.state!==La){const he=le.chunk.start;isNaN(de.mostAdvancedSegmentStart)||he>de.mostAdvancedSegmentStart?(de.mostAdvancedSegmentStart=he,de.lastSegmentWasReplacement=!1):de.lastSegmentWasReplacement=!0,de.lastSegmentStart=he,de.lastSegmentDurationS=le.chunk.duration,de.currentRepresentation=le.chunk.representation,z(de,se)}}}function N(le){if(le&&le.metric===O.HTTP_REQUEST&&le.value&&le.value.type===Re.HTTPRequest.MEDIA_SEGMENT_TYPE&&le.value.trace&&le.value.trace.length){const de=C[le.mediaType],se=$[le.mediaType];de&&de.state!==La&&(de.lastSegmentRequestTimeMs=le.value.trequest.getTime(),de.lastSegmentFinishTimeMs=le.value._tfinish.getTime(),z(de,se))}}function z(le,de){isNaN(le.lastSegmentStart)||isNaN(le.lastSegmentRequestTimeMs)||(de.segment_request_start_s=.001*le.lastSegmentRequestTimeMs,de.segment_download_finish_s=.001*le.lastSegmentFinishTimeMs,le.lastSegmentStart=NaN,le.lastSegmentRequestTimeMs=NaN)}function G(le,de){if(le.length!==de.length)return-1;let se=0;for(let he=0;he<le.length;he++)se+=le[he]*de[he];return se}function re(){C={},$={}}return k={getSwitchRequest:function(le){try{const de=Dr(b).create();de.rule=this.getClassName();const se=le.getMediaType(),he=le.getScheduleController();if(de.reason=de.reason||{},se===L.default.AUDIO)return de;he.setTimeToLoadDelay(0);const ge=function(Ie){const ee=Ie.getMediaType();let V=C[ee];return V||(V=function(j){const X={},pe=j.getMediaInfo();return X.state=Ol,X.currentRepresentation=null,function(Ae){Ae&&Ae.type&&($[Ae.type]={},$[Ae.type].w=[],$[Ae.type].prev_w=[],$[Ae.type].Q=0,$[Ae.type].segment_request_start_s=0,$[Ae.type].segment_download_finish_s=0,$[Ae.type].B_target=1.5)}(pe),x(X),X}(Ie),C[ee]=V),V}(le);if(!$[se])return de;switch(de.reason.state=ge.state,ge.state){case La:break;case Ol:(function(Ie,ee,V){const j=Ie.getMediaInfo(),X=Ie.getMediaType(),pe=Ie.getThroughputController().getSafeAverageThroughput(X);if(isNaN(pe))return ee;const Ae=Ie.getAbrController(),be=Ae.getOptimalRepresentationForBitrate(j,pe,!0),Se=T.getCurrentBufferLevel(X,!0),Me=$[X],Fe=Ae.getPossibleVoRepresentationsFilteredBySettings(j,!0);if(ee.representation=be,ee.reason.throughput=pe,V.currentRepresentation=be,!isNaN(V.lastSegmentDurationS)&&Se>=Me.B_target){V.state=rc,Me.Q=ro;for(let Z=0;Z<Fe.length;++Z)Fe[Z].id===V.currentRepresentation.id?Me.prev_w[Z]=1:Me.prev_w[Z]=0}})(le,de,ge);break;case rc:(function(Ie,ee,V){let j=[];const X=Ie.getThroughputController(),pe=Ie.getMediaType();let Ae=X.getAverageThroughput(pe,L.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),be=T.getCurrentHttpRequest(pe),Se=null;const Me=$[pe];if(Ae<1&&(Ae=1),be.url===V.lastSegmentUrl||be.type===Re.HTTPRequest.INIT_SEGMENT_TYPE)Se=V.currentRepresentation;else{let Fe=V.lastSegmentDurationS,Z=1;const ne=Ie.getAbrController(),we=Ie.getMediaInfo(),_e=ne.getPossibleVoRepresentationsFilteredBySettings(we,!0);let ae=Ie.getVideoModel().getPlaybackRate();const me=Math.max(Math.pow(4,1),ro*Math.sqrt(4));for(let xe=0;xe<_e.length;++xe){const je=_e[xe];ae*je.bitrateInKbit>Ae&&(Z=-1),Me.w[xe]=Me.prev_w[xe]+Z*(Fe/(2*me))*((Me.Q+ro)*(ae*je.bitrateInKbit/Ae))}Me.w=function(xe){const je=xe.length;let Ge=!1,nt=[];for(let mn=0;mn<je;++mn)nt[mn]=xe[mn];let ft=xe.sort(function(mn,Nn){return Nn-mn}),bt=0,qt=0,Yt=[];for(let mn=0;mn<je-1;++mn)if(bt+=ft[mn],qt=(bt-1)/(mn+1),qt>=ft[mn+1]){Ge=!0;break}Ge||(qt=(bt+ft[je-1]-1)/je);for(let mn=0;mn<je;++mn)Yt[mn]=Math.max(nt[mn]-qt,0);return Yt}(Me.w);for(let xe=0;xe<_e.length;++xe)j[xe]=Me.w[xe]-Me.prev_w[xe],Me.prev_w[xe]=Me.w[xe];const ye=_e.map(xe=>xe.bandwidth);Me.Q=Math.max(0,Me.Q-Fe+Fe*ae*((G(ye,Me.prev_w)+G(ye,j))/Ae));let fe=[];for(let xe=0;xe<ye.length;++xe)fe[xe]=Math.abs(ye[xe]-G(Me.w,ye));const ke=fe.indexOf(Math.min(...fe));Se=ne.getRepresentationByAbsoluteIndex(ke,we,!0),Se.absoluteIndex>V.currentRepresentation.absoluteIndex&&ye[V.currentRepresentation.absoluteIndex+1]<=Ae&&(Se=ne.getRepresentationByAbsoluteIndex(V.currentRepresentation.absoluteIndex+1,we,!0)),Se.bitrateInKbit>=Ae&&(Me.Q=2*Math.max(ro,Me.Q)),V.lastSegmentUrl=be.url}ee.representation=Se,V.currentRepresentation=ee.representation})(le,de,ge);break;default:(function(Ie,ee,V){const j=Ie.getAbrController(),X=Ie.getMediaInfo(),pe=Ie.getMediaType(),Ae=Ie.getThroughputController().getSafeAverageThroughput(pe);ee.representation=j.getOptimalRepresentationForBitrate(X,Ae,!0),ee.reason.throughput=Ae,V.state=Ol,x(V)})(le,de,ge)}return de}catch(de){return H.error(de),Dr(b).create()}},reset:function(){re(),S.off(D.default.PLAYBACK_SEEKING,W,k),S.off(D.default.MEDIA_FRAGMENT_LOADED,Y,k),S.off(D.default.METRIC_ADDED,N,k)}},H=(0,Le.default)(b).getInstance().getLogger(k),re(),S.on(D.default.PLAYBACK_SEEKING,W,k),S.on(D.default.MEDIA_FRAGMENT_LOADED,Y,k),S.on(D.default.METRIC_ADDED,N,k),k}ch.__dashjs_factory_name="L2ARule";var Bg=ve.default.getClassFactory(ch);function fh(){const _=this.context;let b,T,S,k,C,$,H,x,W;function Y(){S=null,k=1,C=100,$=0,H=null,x=null,W="dynamic_weight_selection"}function N(){let de=0;if(S)for(let se=0;se<S.length;se++){let he=S[se];he.state.throughput>de&&(de=he.state.throughput)}return de}function z(de,se,he){let ge=de.map((Ie,ee)=>he[ee]*Math.pow(Ie-se[ee],2)).reduce((Ie,ee)=>Ie+ee);return(ge<0?-1:1)*Math.sqrt(Math.abs(ge))}function G(de,se){return z([de.state.throughput,de.state.latency,de.state.rebuffer,de.state.switch],[se.state.throughput,se.state.latency,se.state.rebuffer,se.state.switch],[1,1,1,1])}function re(de,se){for(let he=0;he<S.length;he++){let ge=S[he],Ie=.1;const ee=G(ge,de);le(ge,se,Math.exp(-1*Math.pow(ee,2)/(2*Math.pow(Ie,2))))}}function le(de,se,he){let ge=de.state,Ie=[.01,.01,.01,.01];ge.throughput=ge.throughput+(se[0]-ge.throughput)*Ie[0]*he,ge.latency=ge.latency+(se[1]-ge.latency)*Ie[1]*he,ge.rebuffer=ge.rebuffer+(se[2]-ge.rebuffer)*Ie[2]*he,ge.switch=ge.switch+(se[3]-ge.switch)*Ie[3]*he}return b={getNextQuality:function(de,se,he,ge,Ie,ee,V,j){let X=ge,pe=he;(function(_e,ae){if(!S){S=[];const me=ae.getPossibleVoRepresentationsFilteredBySettings(_e,!0),ye=me.map(fe=>fe.bandwidth);$=Math.min(...ye),k=function(fe){const ke=fe.map(xe=>Math.pow(xe,2)).reduce((xe,je)=>xe+je);return Math.sqrt(ke)}(ye),me.forEach(fe=>{let ke={representation:fe,state:{throughput:fe.bandwidth/k,latency:0,rebuffer:0,switch:0}};S.push(ke)}),x=function(fe){let ke=[],xe=function(bt){let qt=[];for(let Yt=0;Yt<bt;Yt++){let mn=[Math.random()*N(),Math.random(),Math.random(),Math.random()];qt.push(mn)}return qt}(Math.pow(fe.length,2));ke.push(xe[0]);let je=[1,1,1,1];for(let bt=1;bt<fe.length;bt++){let qt=null,Yt=null;for(let mn=0;mn<xe.length;mn++){let Nn=xe[mn],Ft=null;for(let gn=0;gn<ke.length;gn++){let Sn=z(Nn,ke[gn],je);(Ft===null||Sn<Ft)&&(Ft=Sn)}(Yt===null||Ft>Yt)&&(qt=Nn,Yt=Ft)}ke.push(qt)}let Ge=null,nt=null;for(let bt=0;bt<ke.length;bt++){let qt=0;for(let Yt=0;Yt<ke.length;Yt++)bt!==Yt&&(qt+=z(ke[bt],ke[Yt],je));(Ge===null||qt>Ge)&&(Ge=qt,nt=bt)}let ft=[];for(ft.push(ke[nt]),ke.splice(nt,1);ke.length>0;){let bt=null,qt=null;for(let Yt=0;Yt<ke.length;Yt++){let mn=z(ft[0],ke[Yt],je);(bt===null||mn<bt)&&(bt=mn,qt=Yt)}ft.push(ke[qt]),ke.splice(qt,1)}return ft}(S)}})(se,de);let Ae=he/k;Ae>1&&(Ae=N()),ge/=C;let be=S.find(_e=>_e.representation.id===V.id),Se=be.representation.bandwidth*j.getSegmentDuration()/pe,Me=Math.max(0,Se-Ie);if(Ie-Se<j.getMinBuffer())return T.debug(`Buffer is low for bitrate= ${be.representation.bandwidth} downloadTime=${Se} currentBuffer=${Ie} rebuffer=${Me}`),function(_e,ae){let me=0,ye=_e;if(S)for(let fe=0;fe<S.length;fe++){let ke=S[fe];ke.representation.bandwidth<_e.representation.bandwidth&&ke.representation.bandwidth>me&&ae>ke.representation.bandwidth&&(me=ke.representation.bandwidth,ye=ke)}return ye}(be,pe).representation;switch(W){case"manual_weight_selection":H=[.4,.4,.4,.4];break;case"random_weight_selection":H=function(_e){let ae=[],me=Math.sqrt(2/_e);for(let ye=0;ye<4;ye++)ae.push(Math.random()*me);return H=ae,H}(S.length);break;default:(function(_e,ae,me,ye,fe,ke){H||(H=x[x.length-1]);let xe=_e.findWeightVector(S,ae,me,ye,fe,ke);xe!==null&&xe!==-1&&(H=xe)})(j,X,Ie,Me,pe,ee)}let Fe=null,Z=null,ne=null;for(let _e=0;_e<S.length;_e++){let ae=S[_e],me=ae.state,ye=[me.throughput,me.latency,me.rebuffer,me.switch],fe=H.slice(),ke=j.getNextBufferWithBitrate(ae.representation.bandwidth,Ie,pe),xe=ke<j.getMinBuffer();xe&&T.debug(`Buffer is low for bitrate=${ae.representation.bandwidth} downloadTime=${Se} currentBuffer=${Ie} nextBuffer=${ke}`),(ae.representation.bandwidth>he-1e4||xe)&&ae.representation.bandwidth!==$&&(fe[0]=100);let je=z(ye,[Ae,0,0,0],fe);(Fe===null||je<Fe)&&(Fe=je,Z=ae.representation,ne=ae)}let we=Math.abs(be.representation.bandwidth-ne.representation.bandwidth)/k;return re(be,[Ae,ge,Me,we]),re(ne,[Ae,0,0,we]),Z},reset:function(){Y()}},T=(0,Le.default)(_).getInstance().getLogger(b),Y(),b}fh.__dashjs_factory_name="LearningAbrController";var $g=ve.default.getClassFactory(fh),Du=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function Ha(){let _,b,T,S,k;function C(){b=null,T=null,S=null,k=null}function $(x,W,Y,N){let z=new Du;return z.type=x,z.weights.bitrateReward=W||1,z.weights.bitrateSwitchPenalty=1,z.weights.rebufferPenalty=Y||1e3,z.weights.latencyPenalty=[],z.weights.latencyPenalty.push({threshold:1.1,penalty:.05*N}),z.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),z.weights.playbackSpeedPenalty=N||200,z}function H(x,W,Y,N,z){z.bitrateWSum+=z.weights.bitrateReward*x,z.lastBitrate&&(z.bitrateSwitchWSum+=z.weights.bitrateSwitchPenalty*Math.abs(x-z.lastBitrate)),z.lastBitrate=x,z.rebufferWSum+=z.weights.rebufferPenalty*W;for(let G=0;G<z.weights.latencyPenalty.length;G++){let re=z.weights.latencyPenalty[G];if(Y<=re.threshold){z.latencyWSum+=re.penalty*Y;break}}z.playbackSpeedWSum+=z.weights.playbackSpeedPenalty*Math.abs(1-N),z.totalQoe=z.bitrateWSum-z.bitrateSwitchWSum-z.rebufferWSum-z.latencyWSum-z.playbackSpeedWSum}return _={setupPerSegmentQoe:function(x,W,Y){b=$("segment",x,W,Y),T=x,S=W,k=Y},logSegmentMetrics:function(x,W,Y,N){b&&H(x,W,Y,N,b)},getPerSegmentQoe:function(){return b},calculateSingleUseQoe:function(x,W,Y,N){let z=null;return T&&S&&k&&(z=$("segment",T,S,k)),z?(H(x,W,Y,N,z),z.totalQoe):0},reset:function(){C()}},C(),_}Ha.__dashjs_factory_name="LoLpQoeEvaluator";var Fl=ve.default.getClassFactory(Ha);function hh(_){let b,T,S,k,C=_.targetLatency,$=_.bufferMin,H=_.segmentDuration,x=_.qoeEvaluator;function W(){return H}function Y(N,z){const G=W();let re;return re=z>G?N-G:N+G-z,re}return b={getMinBuffer:function(){return $},getSegmentDuration:W,getNextBufferWithBitrate:function(N,z,G){return Y(z,N*H/G)},getNextBuffer:Y,findWeightVector:function(N,z,G,re,le,de){let se=null,he=null,ge=null,Ie=Math.abs(z-k);return N.forEach(ee=>{S.forEach(V=>{V[0];let j,X=V[1],pe=V[2],Ae=(V[3],ee.representation.bandwidth*H/le),be=Y(G,Ae);j=pe===0?10:1/pe;let Se=j*Math.max(1e-5,Ae-be);j=X===0?10:1/X;let Me=j*ee.state.latency,Fe=x.calculateSingleUseQoe(ee.representation.bandwidth,Se,Me,de);(se===null||Fe>se)&&function(Z,ne,we){return!(Z>C+we)&&ne>=$}(z,be,Ie)&&(se=Fe,he=V,ge=ee.representation.bandwidth)})}),he===null&&ge===null&&(he=-1),k=z,he}},T=[.2,.4,.6,.8,1],S=function(N){let z=N.map(function(re){return[re]}),G=function(re,le,de){if(de===le)return re;let se=re.length;for(let he=0;he<se;he++){let ge=re.shift();for(let Ie=0;Ie<N.length;Ie++)re.push(ge.concat(N[Ie]))}return G(re,le,de+1)};return G(z,4,1)}(T),k=0,b}hh.__dashjs_factory_name="LoLpWeightSelector";var Vy=ve.default.getClassFactory(hh);function Ns(_){let b,T,S,k,C=(_=_||{}).dashMetrics,$=this.context;return T={getSwitchRequest:function(H){try{let x=Dr($).create();x.rule=this.getClassName();let W=H.getMediaInfo().type,Y=H.getAbrController();const N=H.getStreamInfo();let z=H.getRepresentation();const G=H.getMediaInfo(),re=C.getCurrentBufferState(W),le=H.getScheduleController(),de=C.getCurrentBufferLevel(W,!0),se=le.getPlaybackController();let he=se.getCurrentLiveLatency();if(W===L.default.AUDIO)return x;he||(he=0);const ge=se.getPlaybackRate(),Ie=H.getThroughputController().getSafeAverageThroughput(W);if(b.debug(`Throughput ${Math.round(Ie)} kbps`),isNaN(Ie)||!re||Y.getAbandonmentStateFor(N.id,W)===O.ABANDON_LOAD)return x;let ee=Y.getPossibleVoRepresentationsFilteredBySettings(G,!0).map(Fe=>Fe.bandwidth),V=H.getRepresentation().fragmentDuration,j=Math.min(...ee)/1e3,X=Math.max(...ee)/1e3,pe=z.bandwidth/1e3,Ae=C.getCurrentHttpRequest(W,!0),be=(Ae.tresponse.getTime()-Ae.trequest.getTime())/1e3,Se=be>V?be-V:0;k.setupPerSegmentQoe(V,X,j),k.logSegmentMetrics(pe,Se,he,ge);let Me=Vy($).create({targetLatency:1.5,bufferMin:.3,segmentDuration:V,qoeEvaluator:k});return x.representation=S.getNextQuality(Y,G,1e3*Ie,he,de,ge,z,Me),x.reason={throughput:Ie,latency:he},x.priority=Dr.PRIORITY.STRONG,le.setTimeToLoadDelay(0),x}catch(x){throw x}},reset:function(){S.reset(),k.reset()}},b=(0,Le.default)($).getInstance().getLogger(T),S=$g($).create(),k=Fl($).create(),T}Ns.__dashjs_factory_name="LoLPRule";var Oo=ve.default.getClassFactory(Ns);function ic(_){_=_||{};const b=this.context,T=_.mediaPlayerModel,S=_.customParametersModel,k=_.dashMetrics,C=_.settings,$=(0,oe.default)(b).getInstance();let H,x,W,Y;function N(){Object.values(L.default.QUALITY_SWITCH_RULES).forEach(de=>{x=z(de,x)}),Object.values(L.default.ABANDON_FRAGMENT_RULES).forEach(de=>{W=z(de,W)}),S.getAbrCustomRules().forEach(function(de){de.type===L.default.RULES_TYPES.QUALITY_SWITCH_RULES&&x.push(de.rule(b).create()),de.type===L.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&W.push(de.rule(b).create())}),x.length===0&&(x.push(Gy(b).create({dashMetrics:k,mediaPlayerModel:T,settings:C})),x.push(oh(b).create({dashMetrics:k})))}function z(de,se){const he=de.charAt(0).toLowerCase()+de.slice(1);return C.get().streaming.abr.rules[he].active&&!function(ge,Ie){return ge.filter(ee=>ee.getClassName()===Ie).length>0}(se,de)?(se.push(function(ge){switch(ge){case L.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Gy(b).create({dashMetrics:k,mediaPlayerModel:T,settings:C});case L.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return oh(b).create({dashMetrics:k});case L.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return qa(b).create({dashMetrics:k,settings:C});case L.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return zg(b).create();case L.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return Hy(b).create();case L.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return Bg(b).create({dashMetrics:k,settings:C});case L.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Oo(b).create({dashMetrics:k});case L.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return ms(b).create({dashMetrics:k,mediaPlayerModel:T,settings:C})}}(de)),se):C.get().streaming.abr.rules[he].active?se:function(ge,Ie){return ge.filter(ee=>ee.getClassName()!==Ie)}(se,de)}function G(de){return de.filter(se=>se.representation!==Dr.NO_CHANGE)}function re(de){const se={};let he,ge,Ie,ee=null;if(de.length!==0){for(se[Dr.PRIORITY.STRONG]=null,se[Dr.PRIORITY.WEAK]=null,se[Dr.PRIORITY.DEFAULT]=null,he=0,ge=de.length;he<ge;he+=1)Ie=de[he],Ie.representation!==Dr.NO_CHANGE&&(se[Ie.priority]===null||se[Ie.priority].representation!==Dr.NO_CHANGE&&Ie.representation.bitrateInKbit<se[Ie.priority].representation.bitrateInKbit)&&(se[Ie.priority]=Ie);return se[Dr.PRIORITY.WEAK]&&se[Dr.PRIORITY.WEAK].representation!==Dr.NO_CHANGE&&(ee=se[Dr.PRIORITY.WEAK]),se[Dr.PRIORITY.DEFAULT]&&se[Dr.PRIORITY.DEFAULT].representation!==Dr.NO_CHANGE&&(ee=se[Dr.PRIORITY.DEFAULT]),se[Dr.PRIORITY.STRONG]&&se[Dr.PRIORITY.STRONG].representation!==Dr.NO_CHANGE&&(ee=se[Dr.PRIORITY.STRONG]),ee}}function le(){N()}return H={clearDataForStream:function(de){[x,W].forEach(se=>{se&&se.length&&se.forEach(he=>he.clearDataForStream&&typeof he.clearDataForStream=="function"&&he.clearDataForStream(de))})},getAbandonFragmentRules:function(){return W},getBestPossibleSwitchRequest:function(de){return de&&re(G(x.filter(se=>{const he=se.getClassName();if(he!==L.default.QUALITY_SWITCH_RULES.BOLA_RULE&&he!==L.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const ge=de.getMediaType();return Y[ge]&&he===L.default.QUALITY_SWITCH_RULES.BOLA_RULE||!Y[ge]&&he===L.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE}).map(se=>se.getSwitchRequest(de))))||Dr(b).create()},getBolaState:function(de){return Y[de]},getMinSwitchRequest:re,getQualitySwitchRules:function(){return x},handleNewMediaInfo:function(de){x.forEach(se=>se.handleNewMediaInfo&&se.handleNewMediaInfo(de)),W.forEach(se=>se.handleNewMediaInfo&&se.handleNewMediaInfo(de))},initialize:function(){x=[],W=[],Y={},N(),$.on(D.default.SETTING_UPDATED_ABR_ACTIVE_RULES,le,H)},reset:function(){[x,W].forEach(de=>{de&&de.length&&de.forEach(se=>se.reset&&se.reset())}),x=[],W=[],Y={},$.off(D.default.SETTING_UPDATED_ABR_ACTIVE_RULES,le,H)},setBolaState:function(de,se){Y[de]=se},shouldAbandonFragment:function(de){if(!de)return Dr(b).create();const se=re(G(W.map(he=>he.shouldAbandon(de))));return se&&(se.reason.forceAbandon=!0),se||Dr(b).create()}},H}ic.__dashjs_factory_name="ABRRulesCollection";const jg=ve.default.getClassFactory(ic);ve.default.updateSingletonFactory(ic.__dashjs_factory_name,jg);var io=jg;function ao(_){let b;const T=(_=_||{}).abrController,S=_.throughputController,k=_.switchRequestHistory,C=_.droppedFramesHistory,$=_.currentRequest,H=_.streamProcessor?_.streamProcessor.getScheduleController():null,x=_.streamProcessor?_.streamProcessor.getRepresentation():null,W=_.videoModel?_.videoModel:null;function Y(){return x?x.mediaInfo:null}return b={getAbrController:function(){return T},getCurrentRequest:function(){return $},getDroppedFramesHistory:function(){return C},getMediaInfo:Y,getMediaType:function(){const N=Y();return N?N.type:null},getRepresentation:function(){return x},getScheduleController:function(){return H},getStreamInfo:function(){const N=Y();return N?N.streamInfo:null},getSwitchRequestHistory:function(){return k},getThroughputController:function(){return S},getVideoModel:function(){return W}},b}ao.__dashjs_factory_name="RulesContext";var ac=ve.default.getClassFactory(ao);function qg(){let _={},b={};const T=this.context,S=(0,J.default)(T).getInstance();return{clearForStream:function(k){delete _[k],delete b[k]},getSwitchRequests:function(k,C){return k!=null&&C!=null&&_[k]&&_[k][C]?_[k][C]:{}},push:function(k){const C=k.currentRepresentation,$=k.newRepresentation;if(C.mediaInfo.streamInfo.id!==$.mediaInfo.streamInfo.id||$.mediaInfo.id!==C.mediaInfo.id)return;const H=C.mediaInfo.streamInfo.id;_[H]||function(le){_[le]={},b[le]={}}(H);const x=C.mediaInfo.type;_[H][x]||function(le,de){_[le][de]={},b[le][de]=[]}(H,x);const W=k.currentRepresentation.id;_[H][x][W]||function(le,de,se){_[le][de][se]={noDrops:0,drops:0,dropSize:0}}(H,x,W);let Y=k.newRepresentation.absoluteIndex-k.currentRepresentation.absoluteIndex,N=Y<0?1:0,z=N?-Y:0,G=N?0:1;_[H][x][k.currentRepresentation.id].drops+=N,_[H][x][k.currentRepresentation.id].dropSize+=z,_[H][x][k.currentRepresentation.id].noDrops+=G,b[H][x].push({id:k.currentRepresentation.id,noDrop:G,drop:N,dropSize:z});const re=function(le,de){return b[le][de].length>S.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?b[le][de].shift():null}(H,x);re&&function(le,de,se){_[le][de][se.id].drops-=se.drop,_[le][de][se.id].dropSize-=se.dropSize,_[le][de][se.id].noDrops-=se.noDrop}(H,x,re)},reset:function(){_={},b={}}}}qg.__dashjs_factory_name="SwitchRequestHistory";var mh=ve.default.getClassFactory(qg);function Hg(){let _={},b={},T={};return{clearForStream:function(S){delete _[S],delete b[S],delete T[S]},getFrameHistory:function(S){return _[S]},push:function(S,k,C){if(!k)return;_[S]||function(N){_[N]=[],b[N]=0,T[N]=0}(S);let $=C&&C.droppedVideoFrames?C.droppedVideoFrames:0,H=C&&C.totalVideoFrames?C.totalVideoFrames:0,x=$-b[S];b[S]=$;let W=H-T[S];T[S]=H;const Y=_[S];Y[k]?(Y[k].droppedVideoFrames+=x,Y[k].totalVideoFrames+=W):Y[k]={droppedVideoFrames:x,totalVideoFrames:W}},reset:function(){_={},b={},T={}}}}Hg.__dashjs_factory_name="DroppedFramesHistory";var Ky=ve.default.getClassFactory(Hg);function sc(){const _=this.context,b=(0,Le.default)(_).getInstance(),T=(0,oe.default)(_).getInstance();let S,k,C,$,H,x,W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V;function j(){W={},x={},ge&&ge.reset(),he&&he.reset(),se=void 0,ge=void 0,he=void 0,clearTimeout(Y),Y=null}function X(ne){let we=pe(ne,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]);return we=function(_e){try{return function(ae){try{if(!V.get().streaming.cmsd.enabled||!V.get().streaming.cmsd.abr.applyMb)return ae;const me=ae.filter(ye=>{const fe=ye.mediaInfo.type;let ke=le.getMaxBitrate(fe);if(fe!==L.default.VIDEO||ke<0)return!0;const xe=ye.mediaInfo.streamInfo.id;return ke-=x[xe][L.default.AUDIO].getRepresentation().bitrateInKbit||0,ye.bitrateInKbit<=ke});return me.length>0?me:ae}catch(me){return k.error(me),ae}}(_e=function(ae){try{if(!V.get().streaming.abr.limitBitrateByPortal)return ae;const{elementWidth:me}=z.getVideoElementSize(),ye=ae.filter(fe=>fe.mediaInfo.type!==L.default.VIDEO||fe.width<=me);return ye.length>0?ye:ae}catch(me){return k.error(me),ae}}(_e=function(ae){try{const me=ae.filter(ye=>{const fe=ye.mediaInfo.type,ke=ye.bitrateInKbit,xe=G.getAbrBitrateParameter("maxBitrate",fe),je=G.getAbrBitrateParameter("minBitrate",fe);return!(xe>-1&&ke>xe||je>-1&&ke<je)});return me.length>0?me:ae}catch(me){return k.error(me),ae}}(_e)))}catch(ae){return k.error(ae),_e}}(we),we}function pe(ne,we){let _e=[];return ne&&(function(me){try{const ye=[];if(me&&ye.push(me),!V.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!me.adaptationSetSwitchingCompatibleIds||me.adaptationSetSwitchingCompatibleIds.length===0)return ye;const fe=x[me.streamInfo.id][me.type].getAllMediaInfos().filter(ke=>me.adaptationSetSwitchingCompatibleIds.includes(ke.id));return ye.concat(fe)}catch{return[me]}}(ne).forEach(me=>{let ye=N.getVoRepresentations(me);ye&&ye.length>0&&(_e=_e.concat(ye))}),_e=function(me){return me=function(ye){let fe=null;return ye.filter(ke=>(fe||(fe=ke.mediaInfo),!isNaN(ke.qualityRanking)&&N.areMediaInfosEqual(fe,ke.mediaInfo))).length===ye.length}(me)?function(ye){return ye.sort((fe,ke)=>ke.qualityRanking-fe.qualityRanking),ye}(me):function(ye){return ye.sort((fe,ke)=>N.areMediaInfosEqual(fe.mediaInfo,ke.mediaInfo)?isNaN(fe.pixelsPerSecond)||isNaN(ke.pixelsPerSecond)||fe.pixelsPerSecond===ke.pixelsPerSecond?fe.bandwidth-ke.bandwidth:fe.pixelsPerSecond-ke.pixelsPerSecond:isNaN(fe.pixelsPerSecond)||isNaN(ke.pixelsPerSecond)||fe.pixelsPerSecond===ke.pixelsPerSecond?isNaN(fe.bitsPerPixel)||isNaN(ke.bitsPerPixel)?fe.bandwidth-ke.bandwidth:ke.bitsPerPixel-fe.bitsPerPixel:fe.pixelsPerSecond-ke.pixelsPerSecond),ye}(me)}(_e),_e.forEach((me,ye)=>{me.absoluteIndex=ye}),_e=_e.filter(me=>{const ye=!!we||N.areMediaInfosEqual(me.mediaInfo,ne),fe=!me||!me.mediaInfo||H.areKeyIdsUsable(me.mediaInfo);return ye&&fe})),_e}function Ae(ne){const we=ne.request.mediaType,_e=ne.streamId;if(!(we&&_e&&x[_e]&&V.get().streaming.abr.autoSwitchBitrate[we]))return;const ae=x[_e][we];if(!ae)return;const me=ac(_).create({abrController:S,streamProcessor:ae,currentRequest:ne.request,throughputController:Ie,adapter:N,videoModel:z}),ye=C.shouldAbandonFragment(me);ye&&ye.representation!==Dr.NO_CHANGE&&function(fe,ke,xe,je,Ge){if(je.getFragmentModel().getRequests({state:jt.FRAGMENT_MODEL_LOADING,index:fe.request.index})[0]){const nt=function(ft,bt){return W[ft]&&W[ft][bt]?W[ft][bt]:null}(ke,xe);nt&&(nt.state=O.ABANDON_LOAD),he.reset(),Me(xe,$.getActiveStreamInfo(),Ge.representation,Ge.reason),clearTimeout(Y),Y=setTimeout(()=>{nt&&(W[ke][xe].state=O.ALLOW_LOAD),Y=null},V.get().streaming.abandonLoadTimeout)}}(ne,_e,we,ae,ye)}function be(ne){ne.mediaType===L.default.VIDEO&&(se!==void 0&&ge.push(ne.streamId,se,z.getPlaybackQuality()),se=ne.newRepresentation.id)}function Se(ne){!Z()||ne.metric!==O.BUFFER_LEVEL||ne.mediaType!==L.default.AUDIO&&ne.mediaType!==L.default.VIDEO||function(we,_e){try{const ae=G.getBufferTimeDefault(),me=ae,ye=.5*ae,fe=C.getBolaState(we),ke=_e>=(fe?ye:me);C.setBolaState(we,ke),ke!==fe&&(ke?k.info("["+we+"] switching from throughput to buffer occupancy ABR rule (buffer: "+_e.toFixed(3)+")."):k.info("["+we+"] switching from buffer occupancy to throughput ABR rule (buffer: "+_e.toFixed(3)+")."))}catch(ae){k.error(ae)}}(ne.mediaType,.001*ne.value.level)}function Me(ne,we,_e){let ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!(we&&we.id&&ne&&x&&x[we.id]&&x[we.id][ne]&&_e))return;const me=x[we.id][ne].getRepresentation();me&&_e.id===me.id||Fe(me,_e,ae)}function Fe(ne,we,_e){const ae=we.mediaInfo.streamInfo.id,me=we.mediaInfo.type;if(me&&x[ae]&&x[ae][me]){const ye=x[ae][me].getStreamInfo(),fe=ee.getCurrentBufferLevel(me),ke=ne!==null&&!N.areMediaInfosEqual(ne.mediaInfo,we.mediaInfo),xe=ne?ne.bitrateInKbit:0;k.info(`[AbrController]: Switching quality in period ${ae} for media type ${me}. Switch from bitrate ${xe} to bitrate ${we.bitrateInKbit}. Current buffer level: ${fe}. Reason:`+(_e?JSON.stringify(_e):"/")),T.trigger(D.default.QUALITY_CHANGE_REQUESTED,{oldRepresentation:ne,newRepresentation:we,reason:_e,streamInfo:ye,mediaType:me,isAdaptationSetSwitch:ke},{streamId:ye.id,mediaType:me});const je=Ie.getAverageThroughput(me);isNaN(je)||de.setSavedBitrateSettings(me,je)}}function Z(){return V.get().streaming.abr.rules.bolaRule.active&&V.get().streaming.abr.rules.throughputRule.active}return S={checkPlaybackQuality:function(ne,we){try{if(!(ne&&x&&x[we]&&x[we][ne]))return!1;if(ge){const ke=z.getPlaybackQuality();ke&&ge.push(we,se,ke)}if(!V.get().streaming.abr.autoSwitchBitrate[ne])return!1;const _e=x[we][ne],ae=_e.getRepresentation(),me=ac(_).create({abrController:S,throughputController:Ie,switchRequestHistory:he,droppedFramesHistory:ge,streamProcessor:_e,adapter:N,videoModel:z}),ye=C.getBestPossibleSwitchRequest(me);if(!ye||!ye.representation)return!1;let fe=ye.representation;return he.push({currentRepresentation:ae,newRepresentation:fe}),fe.id!==ae.id&&(W[we][ne].state===O.ALLOW_LOAD||fe.absoluteIndex<ae.absoluteIndex)&&(Fe(ae,fe,ye.reason),!0)}catch(_e){return k.error(_e),!1}},clearDataForStream:function(ne){ge&&ge.clearForStream(ne),x[ne]&&delete x[ne],he&&he.clearForStream(ne),W[ne]&&delete W[ne],C.clearDataForStream(ne)},getAbandonmentStateFor:function(ne,we){return W[ne]&&W[ne][we]?W[ne][we].state:null},getInitialBitrateFor:function(ne){if(ne===L.default.TEXT)return NaN;let we=G.getAbrBitrateParameter("initialBitrate",ne);if(we>0)return we;let _e=NaN;if(de&&de.hasOwnProperty("getSavedBitrateSettings")&&(_e=de.getSavedBitrateSettings(ne)),!isNaN(_e))return _e;const ae=Ie.getAverageThroughput(ne);return!isNaN(ae)&&ae>0?ae:ne===L.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(ne,we){const _e=X(ne,!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]);if(!_e||_e.length===0)return null;const ae=_e.reduce((ye,fe)=>ye.bandwidth<fe.bandwidth?ye:fe);if(we<=0)return ae;const me=_e.filter(ye=>ye.bitrateInKbit<=we);return me&&me.length!==0?me.reduce((ye,fe)=>fe.absoluteIndex>ye.absoluteIndex?fe:ye):ae},getPossibleVoRepresentations:function(ne){return pe(ne,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])},getPossibleVoRepresentationsFilteredBySettings:X,getRepresentationByAbsoluteIndex:function(ne,we){let _e=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return isNaN(ne)||ne<0?null:X(we,_e).find(ae=>ae.absoluteIndex===ne)},handleNewMediaInfo:function(ne){C.handleNewMediaInfo(ne)},initialize:function(){ge=Ky(_).create(),he=mh(_).create(),C=io(_).create({dashMetrics:ee,customParametersModel:re,mediaPlayerModel:G,settings:V}),C.initialize(),T.on(te.default.QUALITY_CHANGE_RENDERED,be,S),T.on(te.default.METRIC_ADDED,Se,S),T.on(D.default.LOADING_PROGRESS,Ae,S)},isPlayingAtLowestQuality:function(ne){return X(ne.mediaInfo,!0)[0].id===ne.id},isPlayingAtTopQuality:function(ne){if(!ne)return!0;const we=X(ne.mediaInfo,!0);return we[we.length-1].id===ne.id},registerStreamType:function(ne,we){const _e=we.getStreamInfo().id;x[_e]||(x[_e]={}),x[_e][ne]=we,W[_e]||(W[_e]={}),W[_e][ne]={},W[_e][ne].state=O.ALLOW_LOAD,C.getBolaState(ne)===void 0&&C.setBolaState(ne,V.get().streaming.abr.rules.bolaRule.active&&!Z())},reset:function(){j(),T.off(te.default.QUALITY_CHANGE_RENDERED,be,S),T.off(te.default.METRIC_ADDED,Se,S),T.off(D.default.LOADING_PROGRESS,Ae,S),C&&C.reset()},setConfig:function(ne){ne&&(ne.streamController&&($=ne.streamController),ne.throughputController&&(Ie=ne.throughputController),ne.domStorage&&(de=ne.domStorage),ne.mediaPlayerModel&&(G=ne.mediaPlayerModel),ne.customParametersModel&&(re=ne.customParametersModel),ne.cmsdModel&&(le=ne.cmsdModel),ne.dashMetrics&&(ee=ne.dashMetrics),ne.adapter&&(N=ne.adapter),ne.videoModel&&(z=ne.videoModel),ne.settings&&(V=ne.settings),ne.capabilities&&(H=ne.capabilities))},setPlaybackQuality:Me,setWindowResizeEventCalled:function(ne){},unRegisterStreamType:function(ne,we){try{x[ne]&&x[ne][we]&&delete x[ne][we],W[ne]&&W[ne][we]&&delete W[ne][we]}catch{}}},k=b.getLogger(S),j(),S}sc.__dashjs_factory_name="AbrController";const oc=ve.default.getSingletonFactory(sc);ve.default.updateSingletonFactory(sc.__dashjs_factory_name,oc);var Gg=oc;const Yy=new Map([[L.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[L.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[L.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[L.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Vg(){let _,b,T,S,k,C,$,H,x,W,Y;const N=this.context,z=(0,oe.default)(N).getInstance(),G=[];function re(Ae){S&&(arguments.length>1&&arguments[1]!==void 0&&arguments[1]?S.playbackRate=Ae:pe(L.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,()=>{S.playbackRate=Ae}))}function le(){return G.length>0}function de(Ae){let be=G.indexOf(Ae);if(Ae!==null&&(be!==-1&&G.splice(be,1),T.get().streaming.buffer.syntheticStallEvents.enabled&&S&&!le())){const Se=()=>{if(re(W||1,T.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!S.paused){const Me=document.createEvent("Event");Me.initEvent("playing",!0,!1),S.dispatchEvent(Me)}};T.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?Se():($&&$.func&&$.event&&ge($.event,$.func),$=pe(L.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,Se))}}function se(){if(S&&le()&&S.playbackRate===0){const Ae=document.createEvent("Event");Ae.initEvent("waiting",!0,!1),S.dispatchEvent(Ae)}}function he(Ae,be){S&&S.addEventListener(Ae,be)}function ge(Ae,be){S&&S.removeEventListener(Ae,be)}function Ie(){return S?S.readyState:NaN}function ee(){return S?S.buffered:null}function V(){return S?S.clientWidth:NaN}function j(){return S?S.clientHeight:NaN}function X(Ae,be,Se,Me,Fe){if(S){for(let Z=0;Z<S.textTracks.length;Z++)if(S.textTracks[Z].kind===Ae&&(!be||S.textTracks[Z].label==be)&&S.textTracks[Z].language===Se&&S.textTracks[Z].isTTML===Me&&S.textTracks[Z].isEmbedded===Fe)return S.textTracks[Z]}return null}function pe(Ae,be){return Ae===L.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ie()>=Ae?(be(),null):function(Se,Me){const Fe=()=>{ge(Se,Fe),Me(Se)};return he(Se,Fe),{func:Fe,event:Se}}(Yy.get(Ae),be)}return _={addEventListener:he,addTextTrack:function(Ae,be,Se,Me,Fe){if(!S)return null;let Z=X(Ae,be,Se,Me,Fe);return Z||(Z=S.addTextTrack(Ae,be,Se),Z.isEmbedded=Fe,Z.isTTML=Me),Z},appendChild:function(Ae){S&&(S.appendChild(Ae),Ae.isTTML!==void 0&&(S.textTracks[S.textTracks.length-1].isTTML=Ae.isTTML,S.textTracks[S.textTracks.length-1].isEmbedded=Ae.isEmbedded))},getBufferRange:ee,getClientHeight:j,getClientWidth:V,getElement:function(){return S},getEnded:function(){return S?S.ended:null},getPlaybackQuality:function(){if(!S)return null;let Ae="webkitDroppedFrameCount"in S&&"webkitDecodedFrameCount"in S,be=null;return"getVideoPlaybackQuality"in S?be=S.getVideoPlaybackQuality():Ae&&(be={droppedVideoFrames:S.webkitDroppedFrameCount,totalVideoFrames:S.webkitDroppedFrameCount+S.webkitDecodedFrameCount,creationTime:new Date}),be},getPlaybackRate:function(){return S?S.playbackRate:null},getPlayedRanges:function(){return S?S.played:null},getReadyState:Ie,getSource:function(){return S?S.src:null},getTTMLRenderingDiv:function(){return H},getTextTrack:X,getTextTracks:function(){return S?S.textTracks:[]},getTime:function(){return S?isNaN(k)?S.currentTime:k:null},getVideoElementSize:function(){const Ae=T.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:V()*Ae,elementHeight:j()*Ae}},getVideoHeight:function(){return S?S.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(S){const Ae=S.parentNode.host||S.parentNode;return Ae?S.getBoundingClientRect().left-Ae.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(S){const Ae=S.parentNode.host||S.parentNode;return Ae?S.getBoundingClientRect().top-Ae.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return S?S.videoWidth:NaN},getVttRenderingDiv:function(){return x},initialize:function(){z.on(D.default.PLAYBACK_PLAYING,se,this)},isPaused:function(){return S?S.paused:null},isSeeking:function(){return S?S.seeking||!isNaN(k):null},isStalled:le,pause:function(){S&&(S.pause(),S.autoplay=!1)},play:function(){if(S){S.autoplay=!0;const Ae=S.play();Ae&&Ae.catch&&typeof Promise<"u"&&Ae.catch(be=>{be.name==="NotAllowedError"&&z.trigger(D.default.PLAYBACK_NOT_ALLOWED),b.warn(`Caught pending play exception - continuing (${be})`)})}},removeChild:function(Ae){S&&S.removeChild(Ae)},removeEventListener:ge,reset:function(){clearTimeout(Y),z.off(D.default.PLAYBACK_PLAYING,se,this),G.length=0},setConfig:function(Ae){Ae&&Ae.settings&&(T=Ae.settings)},setCurrentTime:function(Ae,be){S&&(C&&C.func&&C.event&&ge(C.event,C.func),k=Ae,C=pe(L.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{if(S)if(S.currentTime!==k)try{k=be?function(Se){const Me=ee();let Fe=Se,Z=9999999999;if(Me)for(let ne=0;ne<Me.length;ne++){const we=Me.start(ne),_e=Me.end(ne),ae=Math.abs(we-Se),me=Math.abs(_e-Se);if(Se>=we&&Se<=_e)return Se;ae<Z&&(Z=ae,Fe=we),me<Z&&(Z=me,Fe=_e)}return Fe}(k):k,isNaN(k)||(S.currentTime=k),k=NaN}catch(Se){S.readyState===0&&Se.code===Se.INVALID_STATE_ERR&&(Y=setTimeout(function(){S.currentTime=k,k=NaN},400))}else k=NaN}))},setDisableRemotePlayback:function(Ae){S&&(S.disableRemotePlayback=Ae)},setElement:function(Ae){if(!(Ae==null||Ae&&/^(VIDEO|AUDIO)$/i.test(Ae.nodeName)))throw"element is not video or audio DOM type!";S=Ae,S&&(S.preload="auto")},setPlaybackRate:re,setSource:function(Ae){S&&(Ae?S.src=Ae:(S.removeAttribute("src"),S.load()))},setStallState:function(Ae,be){(function(Se,Me){Me?function(Fe){if(Fe!==null&&S&&!S.seeking&&G.indexOf(Fe)===-1&&(G.push(Fe),T.get().streaming.buffer.syntheticStallEvents.enabled&&S&&G.length===1&&(T.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||Ie()>=L.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){W=S.playbackRate,re(0,!0);const Z=document.createEvent("Event");Z.initEvent("waiting",!0,!1),S.dispatchEvent(Z)}}(Se):de(Se)})(Ae,be)},setTTMLRenderingDiv:function(Ae){H=Ae,H.style.position="absolute",H.style.display="flex",H.style.overflow="hidden",H.style.pointerEvents="none",H.style.top=0,H.style.left=0},setVttRenderingDiv:function(Ae){x=Ae},waitForReadyState:pe},b=(0,Le.default)(N).getInstance().getLogger(_),T=(0,J.default)(N).getInstance(),k=NaN,_}Vg.__dashjs_factory_name="VideoModel";var Kg=ve.default.getSingletonFactory(Vg);const lc=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],uc="dashjs_?_bitrate",Yg="dashjs_?_settings",Ul="localStorage",zl="lastBitrate",Wg="lastMediaSettings";function Nu(_){_=_||{};const b=this.context,T=_.settings;let S,k,C;function $(Y){if(C!==void 0)return C;let N;C=!1;try{typeof window<"u"&&(N=window[Y])}catch(z){return k.warn("DOMStorage access denied: "+z.message),C}if(!N||Y!==Ul)return C;try{N.setItem("1","1"),N.removeItem("1"),C=!0}catch(z){k.warn("DOMStorage is supported, but cannot be used: "+z.message)}return C}function H(){return Math.round(new Date().getTime()/6e5)*6e5}function x(Y,N){return $(Y)&&T.get().streaming[N+"CachingInfo"].enabled}function W(){if(!T)throw new Error(L.default.MISSING_CONFIG_ERROR)}return S={getSavedBitrateSettings:function(Y){if(W(),!T.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let N=NaN;if(x(Ul,zl)){const z=uc.replace(/\?/,Y);try{const G=JSON.parse(localStorage.getItem(z))||{},re=new Date().getTime()-parseInt(G.timestamp,10)>=T.get().streaming.lastBitrateCachingInfo.ttl||!1,le=parseFloat(G.bitrate);isNaN(le)||re?re&&localStorage.removeItem(z):(N=le,k.debug("Last saved bitrate for "+Y+" was "+le))}catch{return null}}return N},setSavedBitrateSettings:function(Y,N){if(x(Ul,zl)&&N){const z=uc.replace(/\?/,Y);try{localStorage.setItem(z,JSON.stringify({bitrate:N.toFixed(3),timestamp:H()}))}catch(G){k.error(G.message)}}},getSavedMediaSettings:function(Y){if(W(),!T.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let N=null;if(x(Ul,Wg)){const z=Yg.replace(/\?/,Y);try{const G=JSON.parse(localStorage.getItem(z))||{},re=new Date().getTime()-parseInt(G.timestamp,10)>=T.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;N=G.settings,re&&(localStorage.removeItem(z),N=null)}catch{return null}}return N},setSavedMediaSettings:function(Y,N){if(x(Ul,Wg)){const z=Yg.replace(/\?/,Y);try{localStorage.setItem(z,JSON.stringify({settings:N,timestamp:H()}))}catch(G){k.error(G.message)}}}},k=(0,Le.default)(b).getInstance().getLogger(S),$(Ul)&&lc.forEach(Y=>{const N=localStorage.getItem(Y.oldKey);if(N){localStorage.removeItem(Y.oldKey);try{localStorage.setItem(Y.newKey,N)}catch(z){k.error(z.message)}}}),S}Nu.__dashjs_factory_name="DOMStorage";var Ps=ve.default.getSingletonFactory(Nu),dc=t(8986);function Pu(){const _=this.context;let b,T,S,k,C,$,H,x,W,Y,N,z;function G(se,he,ge,Ie){let ee=null;const V=se?z.resolve(se.path):null,j=Ie||{init:!0,url:V?V.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:he,representation:se};T.debug("Start searching for initialization.");const X=de(j);H.load({request:X,success:function(pe){if(j.bytesLoaded=j.range.end,ee=k.findInitRange(pe),!ee)return j.range.end=j.bytesLoaded+j.bytesToLoad,G(se,he,ge,j);se.range=ee,ge(se)},error:function(){ge(se)}}),T.debug("Perform init search: "+j.url)}function re(se,he,ge,Ie,ee,V){if(ge&&(ge.start===void 0||ge.end===void 0)){const Me=ge?ge.toString().split("-"):null;ge=Me?{start:parseFloat(Me[0]),end:parseFloat(Me[1])}:null}ee=ee||le;let j=null,X=null;const pe=!!ge,Ae=se?z.resolve(se.path):null,be={init:!1,url:Ae?Ae.url:void 0,range:pe?ge:{start:0,end:1500},searching:!pe,bytesLoaded:V?V.bytesLoaded:0,bytesToLoad:1500,mediaType:he,representation:se},Se=de(be);H.load({request:Se,success:function(Me){const Fe=be.bytesToLoad,Z=Me.byteLength;if(be.bytesLoaded=be.range.end-be.range.start,j=k.parse(Me),X=j.getBox("sidx"),X&&X.isComplete){const ne=X.references;let we,_e;if(ne!=null&&ne.length>0&&(we=ne[0].reference_type===1),we){let ae,me,ye,fe,ke;T.debug("Initiate multiple SIDX load."),be.range.end=be.range.start+X.size;let xe=[],je=0,Ge=(X.offset||be.range.start)+X.size;const nt=function(ft){ft?(xe=xe.concat(ft),je++,je>=me&&(xe.sort(function(bt,qt){return bt.startTime-qt.startTime<0?-1:0}),ee(xe,se,Ie))):ee(null,se,Ie)};for(ae=0,me=ne.length;ae<me;ae++)ye=Ge,fe=Ge+ne[ae].referenced_size-1,Ge+=ne[ae].referenced_size,ke={start:ye,end:fe},re(se,he,ke,Ie,nt,be)}else T.debug("Parsing segments from SIDX. representation "+he+" - id: "+se.id+" for range : "+be.range.start+" - "+be.range.end),_e=function(ae,me){const ye=ae.references,fe=ye.length,ke=ae.timescale;let xe=ae.earliest_presentation_time,je=me.range.start+ae.offset+ae.first_offset+ae.size;const Ge=[];let nt,ft,bt,qt;for(let Yt=0;Yt<fe;Yt++)bt=ye[Yt].subsegment_duration,qt=ye[Yt].referenced_size,nt=new Ht,nt.duration=bt,nt.startTime=xe,nt.timescale=ke,ft=je+qt-1,nt.mediaRange=je+"-"+ft,Ge.push(nt),xe+=bt,je+=qt;return Ge}(X,be),ee(_e,se,Ie)}else{if(X)be.range.start=X.offset||be.range.start,be.range.end=be.range.start+(X.size||Fe);else{if(Z<be.bytesLoaded)return void ee(null,se,Ie);{const ne=j.getLastBox();ne&&ne.size?(be.range.start=ne.offset+ne.size,be.range.end=be.range.start+Fe):be.range.end+=Fe}}re(se,he,be.range,Ie,null,be)}},error:function(){ee(null,se,Ie)}}),T.debug(`Perform SIDX load for type ${he} : ${be.url} with range ${be.range.start} - ${be.range.end}`)}function le(se,he,ge){ge({segments:se,representation:he,error:se?void 0:new Pe.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function de(se){if(!se.url)return;const he=new Ye;return he.setInfo(se),he}return b={setConfig:function(se){se.baseURLController&&(z=se.baseURLController),se.dashMetrics&&(C=se.dashMetrics),se.mediaPlayerModel&&($=se.mediaPlayerModel),se.errHandler&&(S=se.errHandler),se.boxParser&&(k=se.boxParser),se.debug&&(T=se.debug.getLogger(b)),se.errors&&(x=se.errors),se.urlUtils&&(N=se.urlUtils),se.constants&&(W=se.constants),se.dashConstants&&(Y=se.dashConstants)},initialize:function(){H=Eu(_).create({errHandler:S,dashMetrics:C,mediaPlayerModel:$,boxParser:k,errors:x,urlUtils:N,constants:W,dashConstants:Y})},loadInitialization:function(se,he){return new Promise(ge=>{G(se,he,ge)})},loadSegments:function(se,he,ge){return new Promise(Ie=>{re(se,he,ge,Ie)})},reset:function(){H&&(H.abort(),H=null)}},b}Pu.__dashjs_factory_name="SegmentBaseLoader";var Bl=ve.default.getSingletonFactory(Pu);function gh(_){let b;_=_||{};let T=new DataView(_.data),S=0;function k($,H){let x,W,Y=!0,N=0;if(H===void 0&&(H=!1),$.tag>16777215?(T.getUint32(S)!==$.tag&&(Y=!1),N=4):$.tag>65535?(x=T.getUint16(S),W=T.getUint8(S+2),256*x+W!==$.tag&&(Y=!1),N=3):$.tag>255?(T.getUint16(S)!==$.tag&&(Y=!1),N=2):(T.getUint8(S)!==$.tag&&(Y=!1),N=1),!Y&&$.required&&!H)throw new Error("required tag not found");return Y&&(S+=N),Y}function C($){let H=1,x=128,W=-1,Y=0,N=T.getUint8(S),z=0;for(z=0;z<8;z+=1){if((N&x)===x){Y=$===void 0?N&~x:N,W=z;break}x>>=1}for(z=0;z<W;z+=1,H+=1)Y=Y<<8|255&T.getUint8(S+H);return S+=H,Y}return b={getPos:function(){return S},setPos:function($){S=$},consumeTag:k,consumeTagAndSize:function($,H){let x=k($,H);return x&&C(),x},parseTag:function($){let H;return k($),H=C(),b[$.parse](H)},skipOverElement:function($,H){let x,W=k($,H);return W&&(x=C(),S+=x),W},getMatroskaCodedNum:C,getMatroskaFloat:function($){let H;switch($){case 4:H=T.getFloat32(S),S+=4;break;case 8:H=T.getFloat64(S),S+=8}return H},getMatroskaUint:function($){if($>4)return function(x){const W=Math.floor(Number.MAX_SAFE_INTEGER/256);let Y=0;for(let N=0;N<x;N+=1){if(Y>W)throw new Error("Value exceeds safe integer limit");Y*=256;const z=T.getUint8(S+N);if(Y>Number.MAX_SAFE_INTEGER-z)throw new Error("Value exceeds safe integer limit");Y+=z}return S+=x,Y}($);let H=0;for(let x=0;x<$;x+=1)H<<=8,H|=255&T.getUint8(S+x);return S+=$,H>>>0},moreData:function(){return S<T.byteLength}},b}gh.__dashjs_factory_name="EBMLParser";var $l=ve.default.getClassFactory(gh);function Qg(){const _=this.context;let b,T,S,k,C,$,H,x,W;function Y(N){const z=new Ye;return z.setInfo(N),z}return b={setConfig:function(N){if(!(N.baseURLController&&N.dashMetrics&&N.mediaPlayerModel&&N.errHandler))throw new Error(L.default.MISSING_CONFIG_ERROR);W=N.baseURLController,C=N.dashMetrics,$=N.mediaPlayerModel,k=N.errHandler,x=N.errors,T=N.debug.getLogger(b)},initialize:function(){H=Eu(_).create({errHandler:k,dashMetrics:C,mediaPlayerModel:$,errors:x})},loadInitialization:function(N,z){return new Promise(G=>{let re=null,le=N?W.resolve(N.path):null,de=N?N.range.split("-"):null,se={range:{start:de?parseFloat(de[0]):null,end:de?parseFloat(de[1]):null},request:re,url:le?le.url:void 0,init:!0,mediaType:z};T.info("Start loading initialization."),re=Y(se),H.load({request:re,success:function(){G(N)},error:function(){G(N)}}),T.debug("Perform init load: "+se.url)})},loadSegments:function(N,z,G){return new Promise(re=>{let le=null,de=N?W.resolve(N.path):null,se=de?de.url:void 0;le=Y({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:le,url:se,init:!1,mediaType:z,representation:N}),T.debug("Parsing ebml header"),H.load({request:le,success:function(he){(function(ge,Ie,ee,V){if(!ge||ge.byteLength===0)return void V(null);let j,X,pe,Ae,be=$l(_).create({data:ge}),Se=ee?ee.split("-"):null,Me=null,Fe={url:Ie,range:{start:Se?parseFloat(Se[0]):null,end:Se?parseFloat(Se[1]):null},request:Me};for(T.debug("Parse EBML header: "+Fe.url),be.skipOverElement(S.EBML),be.consumeTag(S.Segment),pe=be.getMatroskaCodedNum(),pe+=be.getPos(),Ae=be.getPos();be.moreData()&&!be.consumeTagAndSize(S.Segment.Info,!0);)if(!(be.skipOverElement(S.Segment.SeekHead,!0)||be.skipOverElement(S.Segment.Tracks,!0)||be.skipOverElement(S.Segment.Cues,!0)||be.skipOverElement(S.Void,!0)))throw new Error("no valid top level element found");for(;j===void 0;){let Z=be.getMatroskaCodedNum(!0),ne=be.getMatroskaCodedNum();Z===S.Segment.Info.Duration.tag?j=be[S.Segment.Info.Duration.parse](ne):be.setPos(be.getPos()+ne)}Me=Y(Fe),H.load({request:Me,success:function(Z){X=function(ne,we,_e,ae){let me,ye,fe,ke,xe,je,Ge,nt;for(ye=function(ft){let bt,qt,Yt=[],mn=$l(_).create({data:ft});for(mn.consumeTagAndSize(S.Segment.Cues);mn.moreData()&&mn.consumeTagAndSize(S.Segment.Cues.CuePoint,!0);){for(bt={},bt.CueTime=mn.parseTag(S.Segment.Cues.CuePoint.CueTime),bt.CueTracks=[];mn.moreData()&&mn.consumeTag(S.Segment.Cues.CuePoint.CueTrackPositions,!0);){const Nn=mn.getMatroskaCodedNum(),Ft=mn.getPos();if(qt={},qt.Track=mn.parseTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),qt.Track===0)throw new Error("Cue track cannot be 0");qt.ClusterPosition=mn.parseTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),bt.CueTracks.push(qt),mn.setPos(Ft+Nn)}if(bt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Yt.push(bt)}if(Yt.length===0)throw new Error("mandatory cuepoint not found");return Yt}(ne),fe=[],xe=0,je=ye.length;xe<je;xe+=1)ke=new Ht,me=0,me=xe<ye.length-1?ye[xe+1].CueTime-ye[xe].CueTime:ae-ye[xe].CueTime,ke.duration=me,ke.startTime=ye[xe].CueTime,ke.timescale=1e3,Ge=ye[xe].CueTracks[0].ClusterPosition+we,nt=xe<ye.length-1?ye[xe+1].CueTracks[0].ClusterPosition+we-1:_e-1,ke.mediaRange=Ge+"-"+nt,fe.push(ke);return T.debug("Parsed cues: "+fe.length+" cues."),fe}(Z,Ae,pe,j),V(X)},error:function(){T.error("Download Error: Cues "+Fe.url),V(null)}}),T.debug("Perform cues load: "+Fe.url+" bytes="+Fe.range.start+"-"+Fe.range.end)})(he,se,G,function(ge){re({segments:ge,representation:N,error:ge?void 0:new Pe.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){re({representation:N,error:new Pe.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){H&&(H.abort(),H=null)}},S={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},b}Qg.__dashjs_factory_name="WebmSegmentBaseLoader";var Xg=ve.default.getSingletonFactory(Qg);function gi(_){_=_||{};const b=this.context,T=_.eventBus,S=_.events,k=_.dashMetrics,C=_.mediaPlayerModel,$=_.errHandler,H=_.baseURLController,x=_.debug,W=_.boxParser,Y=_.errors;let N,z,G;function re(le){return(le?le.split("/")[1]:"").toLowerCase()==="webm"}return N={initialize:function(){z.initialize(),G.initialize()},getSegmentBaseInitSegment:function(le){return re(le.representation.mimeType)?G.loadInitialization(le.representation,le.mediaType):z.loadInitialization(le.representation,le.mediaType)},getSegmentList:function(le){return re(le.mimeType)?G.loadSegments(le.representation,le.mediaType,le.representation?le.representation.indexRange:null):z.loadSegments(le.representation,le.mediaType,le.representation?le.representation.indexRange:null)},reset:function(){z.reset(),G.reset()}},z=Bl(b).getInstance(),G=Xg(b).getInstance(),z.setConfig({baseURLController:H,dashMetrics:k,mediaPlayerModel:C,errHandler:$,eventBus:T,events:S,errors:Y,debug:x,boxParser:W}),G.setConfig({baseURLController:H,dashMetrics:k,mediaPlayerModel:C,errHandler:$,eventBus:T,events:S,errors:Y,debug:x}),N}gi.__dashjs_factory_name="SegmentBaseController";var ph=ve.default.getSingletonFactory(gi),cc=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},vh=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},yh=class{constructor(){this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},Zg=class{constructor(_){this.valid=_[0]=="/",this.path=_.split("/").filter(b=>b.length!==0).map(b=>{let T={name:b},S=b.indexOf("[");if(S!=-1){T.name=b.substring(0,S);let k=b.substring(S+1,b.length-1);this.valid=this.valid&&k.indexOf("[")==-1;let C=k.indexOf("=");C!=-1?(T.attribute={name:k.substring(1,C),value:k.substring(C+1)},["'",'"'].indexOf(T.attribute.value[0])!=-1&&(T.attribute.value=T.attribute.value.substring(1,T.attribute.value.length-1))):T.position=parseInt(k,10)-1}return T})}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(_,b){let T=null,S=_,k=1,C="MPD";for(;k<this.path.length&&S!==null;){T=S;let $=this.path[k];if(C=$.name,k!==this.path.length-1||!C.startsWith("@")&&C!=="text()"){let H=T[C]||[];if(H.length===0&&T[C]&&H.push(T[C]),$.position)S=H[$.position]||null;else if($.attribute){let x=$.attribute;S=H.filter(W=>W[x.name]==x.value)[0]||null}else S=Array.isArray(H)?H[0]:H}k++}return S===null?null:C.startsWith("@")?{name:C.substring(1),leaf:S,target:S}:C==="text()"?{name:"__text",leaf:S,target:S}:{name:C,leaf:S,target:b?T:S}}},jl=class{constructor(_,b,T){this.action=_,this.xpath=b,this.value=T,this.position=null}getMpdTarget(_){let b=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(_,b)}};function pi(){let _,b;const T=this.context;return _={getIsPatch:function(S){return S&&S.hasOwnProperty(w.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(S){return S&&S[w.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(S){return S&&S.hasOwnProperty(w.default.ORIGINAL_PUBLISH_TIME)?new Date(S[w.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(S){return S?(S.__children||[]).map(k=>{const C=k.tagName;if(C!=="add"&&C!=="remove"&&C!=="replace")return b.warn(`Ignoring node of invalid action: ${C}`),null;let $=k.sel;if(C==="add"&&k.type){if(!k.type.startsWith("@"))return b.warn(`Ignoring add action for prefixed namespace declaration: ${k.type}=${k.__text}`),null;$=`${$}/${k.type}`}let H=new Zg($);if(!H.isValid())return b.warn(`Ignoring action with invalid selector: ${C} - ${$}`),null;let x=null;H.findsAttribute()||H.findsTextReplace()?x=k.__text||"":C!=="remove"&&(x=k.__children.reduce((Y,N)=>{let z=N.tagName;return z!=="#text"&&(Y[z]=Y[z]||[],Y[z].push(N)),Y},{}));let W=new jl(C,H,x);return C==="add"&&(W.position=k.pos),W}).filter(k=>!!k):[]},getPublishTime:function(S){return S&&S.hasOwnProperty(w.default.PUBLISH_TIME)?new Date(S[w.default.PUBLISH_TIME]):null}},b=(0,Le.default)(T).getInstance().getLogger(_),_}pi.__dashjs_factory_name="PatchManifestModel";var Bi=ve.default.getSingletonFactory(pi);function ei(_){let b=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof TextDecoder<"u"){const x=new TextDecoder("utf-8").decode(_);if(b){const W=x.indexOf("\0");return W!==-1?x.substring(0,W):x}return x.replace(/\0/g,"")}const T=_.length;let S,k,C,$="",H=0;for(;H<T;){if(S=_[H++],S===0&&b)return $;if(S!==0&&S!==3)switch(S>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:$+=String.fromCharCode(S);break;case 12:case 13:k=_[H++],$+=String.fromCharCode((31&S)<<6|63&k);break;case 14:k=_[H++],C=_[H++],$+=String.fromCharCode((15&S)<<12|(63&k)<<6|63&C)}}return $}function Mu(_){return function(b,T,S,k){const C=($=b)instanceof ArrayBuffer?$:$.buffer;var $;let H=1;"BYTES_PER_ELEMENT"in k&&(H=k.BYTES_PER_ELEMENT);const x=(z=b)&&z.buffer instanceof ArrayBuffer&&z.byteLength!==void 0&&z.byteOffset!==void 0?b.byteOffset:0,W=(x+b.byteLength)/H,Y=(x+T)/H,N=Math.floor(Math.max(0,Math.min(Y,W)));var z;return new k(C,N,Math.floor(Math.min(N+Math.max(S,0),W))-N)}(_,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,Uint8Array)}function fc(_){return _.type==="PRIV"?function(b){if(b.size<2)return;const T=ei(b.data,!0),S=new Uint8Array(b.data.subarray(T.length+1));return{key:b.type,info:T,data:S.buffer}}(_):_.type[0]==="W"?function(b){if(b.type==="WXXX"){if(b.size<2)return;let S=1;const k=ei(b.data.subarray(S),!0);S+=k.length+1;const C=ei(b.data.subarray(S));return{key:b.type,info:k,data:C}}const T=ei(b.data);return{key:b.type,info:"",data:T}}(_):_.type==="APIC"?function(b){const T={key:b.type,description:"",data:"",mimeType:null,pictureType:null};if(b.size<2)return;if(b.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const S=b.data.subarray(1).indexOf(0);if(S===-1)return;const k=ei(Mu(b.data,1,S)),C=b.data[2+S],$=b.data.subarray(3+S).indexOf(0);if($===-1)return;const H=ei(Mu(b.data,3+S,$));let x;return x=k==="-->"?ei(Mu(b.data,4+S+$)):(W=b.data.subarray(4+S+$))instanceof ArrayBuffer?W:W.byteOffset==0&&W.byteLength==W.buffer.byteLength?W.buffer:new Uint8Array(W).buffer,T.mimeType=k,T.pictureType=C,T.description=H,T.data=x,T;var W}(_):function(b){if(b.size<2)return;if(b.type==="TXXX"){let S=1;const k=ei(b.data.subarray(S),!0);S+=k.length+1;const C=ei(b.data.subarray(S));return{key:b.type,info:k,data:C}}const T=ei(b.data.subarray(1));return{key:b.type,info:"",data:T}}(_)}function Ou(_,b){let T=0;return T=(127&_[b])<<21,T|=(127&_[b+1])<<14,T|=(127&_[b+2])<<7,T|=127&_[b+3],T}function o_(_){const b=String.fromCharCode(_[0],_[1],_[2],_[3]),T=Ou(_,4);return{type:b,size:T,data:_.subarray(10,10+T)}}function ca(_,b){return b+10<=_.length&&_[b]===51&&_[b+1]===68&&_[b+2]===73&&_[b+3]<255&&_[b+4]<255&&_[b+6]<128&&_[b+7]<128&&_[b+8]<128&&_[b+9]<128}function Jg(_,b){return b+10<=_.length&&_[b]===73&&_[b+1]===68&&_[b+2]===51&&_[b+3]<255&&_[b+4]<255&&_[b+6]<128&&_[b+7]<128&&_[b+8]<128&&_[b+9]<128}function Eh(){let _,b,T,S,k,C;const $=this.context;function H(ee,V){const j=V?V.index:0,X=b.getAdaptationsForType(S[j].mpd.manifest,j,ee);if(!X||X.length===0)return null;if(X.length>1&&V){for(let Ae=0,be=X.length;Ae<be;Ae++)if(pe=X[Ae],b.getRolesForAdaptation(pe).filter(function(Se){return Se.schemeIdUri===L.default.DASH_ROLE_SCHEME_ID&&Se.value===w.default.MAIN})[0])return X[Ae]}var pe;return X[0]}function x(ee,V,j,X,pe,Ae){let be,Se,Me,Fe,Z,ne,we=[];if(!X||X.length===0)return[];const _e=b.getAdaptationsForPeriod(V);for(Fe=0,ne=X.length;Fe<ne;Fe++)if(be=X[Fe],Me=b.getIndexForAdaptation(be,ee,j.index),Se=le(_e[Me]),Ae){let ae=Se.accessibility.length;for(Z=0;Z<ae;Z++){if(!Se)continue;let me=Se.accessibility[Z];if(me.schemeIdUri===k.ACCESSIBILITY_CEA608_SCHEME)if(me.value&&me.value!==""){let ye=me.value.split(";");if(ye[0].substring(0,2)==="CC")for(Z=0;Z<ye.length;Z++)Se||(Se=le.call(this,_e[Me])),de(Se,ye[Z].substring(0,3),ye[Z].substring(4)),we.push(Se),Se=null;else for(Z=0;Z<ye.length;Z++)Se||(Se=le.call(this,_e[Me])),de(Se,"CC"+(Z+1),ye[Z]),we.push(Se),Se=null}else de(Se,k.CC1,"eng"),we.push(Se),Se=null}}else pe===k.IMAGE?(Se.type=k.IMAGE,we.push(Se),Se=null):Se&&we.push(Se);return we}function W(ee){const V=Y(ee);return b.getRegularPeriods(V)}function Y(ee){const V=z(ee);return b.getMpd(V)}function N(){S=[]}function z(ee){return ee||(S.length>0?S[0].mpd.manifest:null)}function G(ee){try{const V=re(ee.streamInfo,S),j=b.getAdaptationsForPeriod(V);return ee&&ee.streamInfo&&ee.streamInfo.id!==void 0&&j?j[ee.index]:null}catch{return null}}function re(ee,V){const j=V.length;for(let X=0;X<j;X++){let pe=V[X];if(ee&&ee.id===pe.id)return pe}return null}function le(ee){if(!ee)return null;let V=new cc;const j=ee.period.mpd.manifest.Period[ee.period.index].AdaptationSet[ee.index];return V.id=ee.id,V.index=ee.index,V.type=ee.type,V.streamInfo=se(ee.period),V.representationCount=b.getRepresentationCount(j),V.labels=b.getLabelsForAdaptation(j),V.lang=b.getLanguageForAdaptation(j),V.segmentAlignment=b.getSegmentAlignment(j),V.subSegmentAlignment=b.getSubSegmentAlignment(j),V.viewpoint=b.getViewpointForAdaptation(j),V.accessibility=b.getAccessibilityForAdaptation(j),V.accessibility.filter(function(X){if(X.schemeIdUri&&X.schemeIdUri.search("cea-608")>=0&&C!==void 0)return!0})[0]&&(V.embeddedCaptions=!0),V.audioChannelConfiguration=b.getAudioChannelConfigurationForAdaptation(j),V.audioChannelConfiguration.length===0&&j.Representation&&j.Representation.length>0&&(V.audioChannelConfiguration=b.getAudioChannelConfigurationForRepresentation(j.Representation[0])),V.roles=b.getRolesForAdaptation(j),V.codec=b.getCodec(j),V.mimeType=b.getMimeType(j),V.contentProtection=b.getContentProtectionByAdaptation(j),V.bitrateList=b.getBitrateListForAdaptation(j),V.selectionPriority=b.getSelectionPriority(j),V.contentProtection&&V.contentProtection.length>0&&(V.contentProtection=function(X,pe){if(!X||!X.length||!pe)return X;const Ae=b.getContentProtectionByManifest(pe);if(!Ae||!Ae.length)return X;const be=Ae.reduce((Se,Me)=>(Me.refId&&Se.set(Me.refId,Me),Se),new Map);return X.map(Se=>{if(Se.ref){const Me=be.get(Se.ref);Me&&Se.mergeAttributesFromReference(Me)}return Se})}(V.contentProtection,ee.period.mpd.manifest),V.contentProtection=function(X){const pe=X.map(Ae=>Ae.cencDefaultKid).filter(Ae=>Ae!==null);if(pe.length){const Ae=pe[0];X.forEach(be=>{be.keyId=Ae})}return X}(V.contentProtection),V.normalizedKeyIds=function(X){const pe=new Set;return X.forEach(Ae=>{Ae.cencDefaultKid&&typeof Ae.cencDefaultKid=="string"&&pe.add(Ae.cencDefaultKid.replace(/-/g,"").toLowerCase())}),pe}(V.contentProtection)),V.isText=b.getIsText(j),V.essentialProperties=b.getCombinedEssentialPropertiesForAdaptationSet(j),V.supplementalProperties=b.getCombinedSupplementalPropertiesForAdaptationSet(j),V.isFragmented=b.getIsFragmented(j),V.isEmbedded=!1,V.adaptationSetSwitchingCompatibleIds=function(X){if(!X||!X.supplementalProperties)return[];let pe=[];const Ae=X.supplementalProperties.filter(be=>be.schemeIdUri===w.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI);return Ae&&Ae.length>0&&(pe=Ae[0].value.toString().split(",").map(be=>be)),pe}(V),V}function de(ee,V,j){ee.id=V,ee.index=100+parseInt(V.substring(2,3)),ee.type=k.TEXT,ee.codec="cea-608-in-SEI",ee.isEmbedded=!0,ee.isFragmented=!1,ee.lang=Kd(j),ee.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function se(ee){let V=new vh;return V.id=ee.id,V.index=ee.index,V.start=ee.start,V.duration=ee.duration,V.manifestInfo=function(j){let X=new yh;return X.dvrWindowSize=j.timeShiftBufferDepth,X.loadedTime=j.manifest.loadedTime,X.availableFrom=j.availabilityStartTime,X.minBufferTime=j.manifest.minBufferTime,X.maxFragmentDuration=j.maxSegmentDuration,X.duration=b.getDuration(j.manifest),X.isDynamic=b.getIsDynamic(j.manifest),X.serviceDescriptions=b.getServiceDescriptions(j.manifest),X.protocol=j.manifest.protocol,X}(ee.mpd),V.isLast=ee.mpd.manifest.Period.length===1||Math.abs(V.start+V.duration-V.manifestInfo.duration)<1,V.isEncrypted=ee.isEncrypted,V}function he(){if(!k)throw new Error("setConfig function has to be called previously")}function ge(ee){return S.length>0?S[0].mpd.manifest.Period[ee]:null}function Ie(ee,V,j){let X,pe,Ae,be,Se,Me;if(ee){for(pe=ee.AdaptationSet,Se=0;Se<pe.length;Se+=1)for(X=pe[Se],be=X.Representation,Me=0;Me<be.length;Me+=1)if(Ae=be[Me],V===Ae.id)return j?Me:Ae}return null}return _={applyPatchToManifest:function(ee,V){T.getPatchOperations(V).forEach(j=>{let X=j.getMpdTarget(ee);if(X===null)return;let{name:pe,target:Ae,leaf:be}=X;if(j.xpath.findsAttribute()||pe==="__text"){switch(j.action){case"add":case"replace":Ae[pe]=j.value;break;case"remove":delete Ae[pe]}return}let Se=(Ae[pe]||[]).indexOf(be),Me=j.position==="prepend"||j.position==="before";if(j.action==="remove"||j.action==="replace")if(Array.isArray(Ae[pe])){if(Se!=-1){let Fe=Ae[pe];Fe.splice(Se,1),Fe.length>0?Ae[pe]=Fe:delete Ae[pe]}}else delete Ae[pe];j.action!=="add"&&j.action!=="replace"||Object.keys(j.value).forEach(Fe=>{let Z=j.value[Fe],ne=Ae[Fe]||[];if(ne.length===0&&Ae[Fe]&&ne.push(Ae[Fe]),ne.length===0)ne=Z;else{let we=ne.length;we=Fe==pe&&Se!=-1?Se+(Me?0:1)+(j.action==="replace"?-1:0):Me?0:ne.length,ne.splice.apply(ne,[we,0].concat(Z))}Ae[Fe]=ne})})},areMediaInfosEqual:function(ee,V){if(!ee||!V)return!1;const j=ee.id===V.id,X=ee.codec===V.codec,pe=JSON.stringify(ee.viewpoint)===JSON.stringify(V.viewpoint),Ae=ee.lang===V.lang,be=JSON.stringify(ee.roles)===JSON.stringify(V.roles),Se=JSON.stringify(ee.accessibility)===JSON.stringify(V.accessibility),Me=JSON.stringify(ee.audioChannelConfiguration)===JSON.stringify(V.audioChannelConfiguration);return j&&X&&pe&&Ae&&be&&Se&&Me},getAllMediaInfoForType:function(ee,V,j){let X=S,pe=j,Ae=[];if(pe)he(),X=W(pe);else{if(!(S.length>0))return Ae;pe=S[0].mpd.manifest}const be=re(ee,X);let Se=b.getAdaptationsForType(pe,ee?ee.index:null,V);return Ae=x(pe,be,ee,Se,V),V===k.TEXT&&(Se=b.getAdaptationsForType(pe,ee?ee.index:null,k.VIDEO),Ae=Ae.concat(x(pe,be,ee,Se,V,!0))),Ae},getAvailabilityStartTime:function(ee){const V=Y(ee);return b.getAvailabilityStartTime(V)},getBandwidthForRepresentation:function(ee,V){let j;return j=Ie(ge(V),ee),j?j.bandwidth:null},getBaseURLsFromElement:function(ee){return b.getBaseURLsFromElement(ee)},getCodec:function(ee,V,j){return b.getCodec(ee,V,j)},getContentSteering:function(ee){return b.getContentSteering(ee)},getDuration:function(ee){const V=z(ee);return b.getDuration(V)},getEssentialPropertiesForAdaptationSet:function(ee){try{return b.getEssentialPropertiesForRepresentation(ee)}catch{return[]}},getEssentialPropertiesForRepresentation:function(ee){try{return b.getEssentialPropertiesForRepresentation(ee)}catch{return[]}},getEvent:function(ee,V,j,X){try{if(!ee||!V||isNaN(j)||!X)return null;const pe=ee.scheme_id_uri,Ae=ee.value;if(!V[pe+"/"+Ae])return null;const be=new Io,Se=ee.timescale||1,Me=X.adaptation.period.start,Fe=V[pe+"/"+Ae],Z=isNaN(X.presentationTimeOffset)?isNaN(Fe.presentationTimeOffset)?0:Fe.presentationTimeOffset:X.presentationTimeOffset;let ne,we=ee.presentation_time_delta/Se;ne=ee.version===0?Me+j-Z+we:Me-Z+we;const _e=ee.event_duration/Se,ae=ee.id,me=ee.message_data;return be.eventStream=Fe,be.eventStream.value=Ae,be.eventStream.timescale=Se,be.duration=_e,be.id=ae,be.calculatedPresentationTime=ne,be.messageData=me,be.presentationTimeDelta=we,be.parsedMessageData=pe===L.default.ID3_SCHEME_ID_URI?function(ye){let fe=0;const ke=[];for(;Jg(ye,fe);){const xe=Ou(ye,fe+6);ye[fe+5]>>6&1&&(fe+=10),fe+=10;const je=fe+xe;for(;fe+10<je;){const Ge=o_(ye.subarray(fe)),nt=fc(Ge);nt&&ke.push(nt),fe+=Ge.size+10}ca(ye,fe)&&(fe+=10)}return ke}(me):null,be}catch{return null}},getEventsFor:function(ee,V,j){let X=[];if(S.length>0){const pe=S[0].mpd.manifest;if(ee instanceof vh){const Ae=re(ee,S);X=b.getEventsForPeriod(Ae)}else if(ee instanceof cc){const Ae=re(j,S);X=b.getEventStreamForAdaptationSet(pe,G(ee),Ae)}else if(ee instanceof kr){const Ae=re(j,S);X=b.getEventStreamForRepresentation(pe,V,Ae)}}return X},getFramerate:function(ee){return b.getFramerate(ee)},getIndexForRepresentation:function(ee,V){return function(j,X){const pe=Ie(j,X,!0);return pe!==null?pe:-1}(ge(V),ee)},getIsDVB:function(ee){return b.hasProfile(ee,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(ee){const V=z(ee);return b.getIsDynamic(V)},getIsPatch:function(ee){return T.getIsPatch(ee)},getIsTextTrack:function(ee){return b.getIsText(ee)},getIsTypeOf:function(ee,V){return b.getIsTypeOf(ee,V)},getLocation:function(ee){return b.getLocation(ee)},getMainAdaptationForType:H,getManifestUpdatePeriod:function(ee){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return b.getManifestUpdatePeriod(ee,V)},getMediaInfoForType:function(ee,V){if(S.length===0||!ee)return null;let j=re(ee,S);if(!j)return null;const X=b.getAdaptationsForPeriod(j);let pe=H(V,ee);return pe?le(X[b.getIndexForAdaptation(pe,S[0].mpd.manifest,ee.index)]):null},getMpd:Y,getPatchLocation:function(ee){const V=b.getPatchLocation(ee),j=b.getPublishTime(ee);return V&&V.length!==0&&j?V.filter(X=>isNaN(X.ttl)||j.getTime()+X.ttl>new Date().getTime()):[]},getPeriodById:function(ee){if(!ee||S.length===0)return null;const V=S.filter(j=>j.id===ee);return V&&V.length>0?V[0]:null},getProducerReferenceTimes:function(ee,V){let j,X;const pe=re(ee,S);return j=V?V.id:null,S.length>0&&pe&&(X=j?b.getAdaptationForId(j,S[0].mpd.manifest,pe.index):b.getAdaptationForIndex(V?V.index:null,S[0].mpd.manifest,pe.index)),X?b.getProducerReferenceTimesForAdaptation(X):[]},getPublishTime:function(ee){return b.getPublishTime(ee)},getRealAdaptation:function(ee,V){let j,X;const pe=re(ee,S);return j=V?V.id:null,S.length>0&&pe&&(X=j?b.getAdaptationForId(j,S[0].mpd.manifest,pe.index):b.getAdaptationForIndex(V?V.index:null,S[0].mpd.manifest,pe.index)),X},getRealPeriodByIndex:function(ee){return b.getRealPeriodForIndex(ee,S[0].mpd.manifest)},getRegularPeriods:W,getRepresentationSortFunction:function(){return b.getRepresentationSortFunction()},getStreamsInfo:function(ee,V){const j=[];let X=S;if(ee&&(he(),X=W(ee)),X.length>0){(!V||V>X.length)&&(V=X.length);for(let pe=0;pe<V;pe++)j.push(se(X[pe]))}return j},getSuggestedPresentationDelay:function(){const ee=S.length>0?S[0].mpd:null;return b.getSuggestedPresentationDelay(ee)},getSupplementalCodecs:function(ee){const V=ee[w.default.SUPPLEMENTAL_CODECS];return V?V.split(" ").map(j=>ee.mimeType+';codecs="'+j+'"'):[]},getUTCTimingSources:function(){const ee=z();return b.getUTCTimingSources(ee)},getVoRepresentations:function(ee){let V;const j=G(ee);return V=b.getRepresentationsForAdaptation(j,ee),V},isPatchValid:function(ee,V){let j=b.getId(ee),X=T.getMpdId(V),pe=b.getPublishTime(ee),Ae=T.getPublishTime(V),be=T.getOriginalPublishTime(V);return!!(j&&X&&j==X&&pe&&be&&pe.getTime()==be.getTime()&&Ae&&pe.getTime()<Ae.getTime())},reset:N,setConfig:function(ee){ee&&(ee.constants&&(k=ee.constants),ee.cea608parser&&(C=ee.cea608parser),ee.errHandler&&b.setConfig({errHandler:ee.errHandler}),ee.BASE64&&b.setConfig({BASE64:ee.BASE64}))},updatePeriods:function(ee){if(!ee)return null;he(),S=W(ee)}},b=Mr($).getInstance(),T=Bi($).getInstance(),N(),_}Eh.__dashjs_factory_name="DashAdapter";var ep=ve.default.getSingletonFactory(Eh);class Ms{static round10(b,T){return function(S,k,C){return C===void 0||+C==0?Math[S](k):(C=+C,(k=+k)===null||isNaN(k)||typeof C!="number"||C%1!=0?NaN:(k=k.toString().split("e"),+((k=(k=Math[S](+(k[0]+"e"+(k[1]?+k[1]-C:-C)))).toString().split("e"))[0]+"e"+(k[1]?+k[1]+C:C))))}("round",b,T)}}var Qa=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},hc=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},tp=class{constructor(){this.t=null,this.level=null}},np=class{constructor(){this.target=null,this.state=O.BUFFER_EMPTY}},Wy=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},Qy=class{constructor(){this.time=null,this.droppedFrames=null}};class Xy{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class Zy{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class Jy{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var eE=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},tE=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function rp(_){const b=(_=_||{}).settings;let T,S,k=this.context,C=(0,oe.default)(k).getInstance();function $(){C.trigger(D.default.METRICS_CHANGED)}function H(G){C.trigger(D.default.METRIC_CHANGED,{mediaType:G}),$()}function x(G,re,le){C.trigger(D.default.METRIC_UPDATED,{mediaType:G,metric:re,value:le}),H(G)}function W(G,re,le){C.trigger(D.default.METRIC_ADDED,{mediaType:G,metric:re,value:le}),H(G)}function Y(G,re){let le=null;return G&&(S.hasOwnProperty(G)?le=S[G]:re||(le=new Qa,S[G]=le)),le}function N(G,re,le){let de=Y(G);de!==null&&(de[re].push(le),de[re].length>b.get().streaming.metrics.maxListDepth&&de[re].shift())}function z(G,re,le){N(G,re,le),W(G,re,le)}return T={addBufferLevel:function(G,re,le){let de=new tp;de.t=re,de.level=le,z(G,O.BUFFER_LEVEL,de)},addBufferState:function(G,re,le){let de=new np;de.target=le,de.state=re,z(G,O.BUFFER_STATE,de)},addDVBErrors:function(G){z(L.default.STREAM,O.DVB_ERRORS,G)},addDVRInfo:function(G,re,le,de){let se=new Wy;se.time=re,se.range=de,se.manifestInfo=le,z(G,O.DVR_INFO,se)},addDroppedFrames:function(G,re){let le=new Qy,de=Y(G).DroppedFrames;re&&(le.time=re.creationTime,le.droppedFrames=re.droppedVideoFrames,de.length>0&&de[de.length-1]==le||z(G,O.DROPPED_FRAMES,le))},addHttpRequest:function G(re,le,de,se){let he=new Re.HTTPRequest;le.url&&le.url!==re.url&&(G({mediaType:re.mediaType,type:re.type,url:re.url,serviceLocation:null,range:re.range,startDate:re.startDate,firstByteDate:null,endDate:null,duration:re.duration,fileLoaderType:re.fileLoaderType,resourceTimingValues:re.resourceTimingValues},{url:null,status:null,headers:null},null,se),he.actualurl=le.url),he.tcpid=null,he.type=re.type,he.url=re.url,he.range=re.range||null,he.trequest=re.startDate,he.tresponse=re.firstByteDate,he.responsecode=le.status,he.cmsd=se,he._tfinish=re.endDate,he._stream=re.mediaType,he._mediaduration=re.duration,he._responseHeaders="";for(const ge in le.headers)he._responseHeaders+=ge+": "+le.headers[ge]+`\r
`;he._serviceLocation=re.serviceLocation||null,he._fileLoaderType=re.fileLoaderType,he._resourceTimingValues=re.resourceTimingValues,he._streamId=re&&re.representation&&re.representation.mediaInfo&&re.representation.mediaInfo.streamInfo?re.representation.mediaInfo.streamInfo.id:null,de?de.forEach(ge=>{(function(Ie,ee,V,j){let X=new Re.HTTPRequestTrace;X.s=ee,X.d=V,X.b=j,Ie.trace.push(X),Ie.interval||(Ie.interval=0),Ie.interval+=V})(he,ge.s,ge.d,ge.b,ge.t)}):(delete he.interval,delete he.trace),z(re.mediaType,O.HTTP_REQUEST,he)},addManifestUpdate:function(G,re,le,de){let se=new Xy;se.mediaType=G,se.type=re,se.requestTime=le,se.fetchTime=de,N(L.default.STREAM,O.MANIFEST_UPDATE,se),W(G,O.MANIFEST_UPDATE,se)},addManifestUpdateRepresentationInfo:function(G,re,le){if(G&&G.representationInfo){const de=new Jy;de.id=re?re.id:null,de.index=re?re.index:null,de.mediaType=le,de.startNumber=re?re.startNumber:null,de.presentationTimeOffset=re?re.presentationTimeOffset:null,G.representationInfo.push(de),x(G.mediaType,O.MANIFEST_UPDATE_TRACK_INFO,G)}},addManifestUpdateStreamInfo:function(G,re,le,de,se){if(G){let he=new Zy;he.id=re,he.index=le,he.start=de,he.duration=se,G.streamInfo.push(he),x(G.mediaType,O.MANIFEST_UPDATE_STREAM_INFO,G)}},addPlayList:function(G){G.trace&&Array.isArray(G.trace)?G.trace.forEach(re=>{re.hasOwnProperty("subreplevel")&&!re.subreplevel&&delete re.subreplevel}):delete G.trace,z(L.default.STREAM,O.PLAY_LIST,G)},addRepresentationSwitch:function(G,re,le,de,se){let he=new hc;he.t=re,he.mt=le,he.to=de,se?he.lto=se:delete he.lto,z(G,O.TRACK_SWITCH,he)},addRequestsQueue:function(G,re,le){let de=new tE;de.loadingRequests=re,de.executedRequests=le,Y(G).RequestsQueue=de,W(G,O.REQUESTS_QUEUE,de)},addSchedulingInfo:function(G,re,le,de,se,he,ge,Ie,ee){let V=new eE;V.mediaType=G,V.t=re,V.type=le,V.startTime=de,V.availabilityStartTime=se,V.duration=he,V.bandwidth=ge,V.range=Ie,V.state=ee,z(G,O.SCHEDULING_INFO,V)},clearAllCurrentMetrics:function(){S={},$()},clearCurrentMetricsForType:function(G){delete S[G],H(G)},getMetricsFor:Y,updateManifestUpdateInfo:function(G,re){if(G){for(let le in re)G[le]=re[le];x(G.mediaType,O.MANIFEST_UPDATE,G)}}},S={},T}rp.__dashjs_factory_name="MetricsModel";var mc=ve.default.getSingletonFactory(rp);function ip(_){_=_||{};const b=this.context;let T,S,k,C,$=_.metricsModel;function H(Y){const N=$.getMetricsFor(Y,!0);if(!N)return null;const z=N.HttpList;let G,re=null;if(!z||z.length<=0)return null;for(G=z.length-1;G>=0;){if(z[G].responsecode){re=z[G];break}G--}return re}function x(Y){const N=$.getMetricsFor(Y,!0);return N&&N.HttpList?N.HttpList:[]}function W(Y,N){if(!Y)return null;const z=Y[N];return z&&z.length!==0?z[z.length-1]:null}return T={getCurrentRepresentationSwitch:function(Y){return W($.getMetricsFor(Y,!0),O.TRACK_SWITCH)},getCurrentBufferState:function(Y){return W($.getMetricsFor(Y,!0),O.BUFFER_STATE)},getCurrentBufferLevel:function(Y){const N=W($.getMetricsFor(Y,!0),O.BUFFER_LEVEL);return N?Ms.round10(N.level/1e3,-3):0},getCurrentHttpRequest:H,getHttpRequests:x,getCurrentDroppedFrames:function(){return W($.getMetricsFor(L.default.VIDEO,!0),O.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Y){return W($.getMetricsFor(Y,!0),O.SCHEDULING_INFO)},getCurrentDVRInfo:function(Y){return W(Y?$.getMetricsFor(Y,!0):$.getMetricsFor(L.default.VIDEO,!0)||$.getMetricsFor(L.default.AUDIO,!0),O.DVR_INFO)},getCurrentManifestUpdate:function(){return W($.getMetricsFor(L.default.STREAM),O.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Y,N){if(!N)return null;let z={},G=H(Y);G&&(z=_r.default.parseHttpHeaders(G._responseHeaders));const re=z[N.toLowerCase()];return re===void 0?null:re},getLatestMPDRequestHeaderValueByID:function(Y){if(!Y)return null;let N,z,G,re={};for(N=x(L.default.STREAM),G=N.length-1;G>=0;G--)if(z=N[G],z.type===Re.HTTPRequest.MPD_TYPE){re=_r.default.parseHttpHeaders(z._responseHeaders);break}const le=re[Y.toLowerCase()];return le===void 0?null:le},addRepresentationSwitch:function(Y,N,z,G,re){$.addRepresentationSwitch(Y,N,z,G,re)},addDVRInfo:function(Y,N,z,G){$.addDVRInfo(Y,N,z,G)},updateManifestUpdateInfo:function(Y){const N=this.getCurrentManifestUpdate();$.updateManifestUpdateInfo(N,Y)},addManifestUpdateStreamInfo:function(Y){if(Y){const N=this.getCurrentManifestUpdate();$.addManifestUpdateStreamInfo(N,Y.id,Y.index,Y.start,Y.duration)}},addManifestUpdateRepresentationInfo:function(Y,N){if(Y){const z=this.getCurrentManifestUpdate();$.addManifestUpdateRepresentationInfo(z,Y,N)}},addManifestUpdate:function(Y){$.addManifestUpdate(L.default.STREAM,Y.type,Y.startDate,Y.endDate)},addHttpRequest:function(Y,N,z,G,re,le){const de={status:z,headers:G,url:N};$.addHttpRequest(Y,de,re,le)},addSchedulingInfo:function(Y,N){$.addSchedulingInfo(Y.mediaType,new Date,Y.type,Y.startTime,Y.availabilityStartTime,Y.duration,Y.bandwidth,Y.range,N)},addRequestsQueue:function(Y,N,z){$.addRequestsQueue(Y,N,z)},addBufferLevel:function(Y,N,z){$.addBufferLevel(Y,N,z)},addBufferState:function(Y,N,z){$.addBufferState(Y,N,z)},addDroppedFrames:function(Y){$.addDroppedFrames(L.default.VIDEO,Y)},addPlayList:function(){C&&($.addPlayList(C),C=null)},addDVBErrors:function(Y){$.addDVBErrors(Y)},createPlaylistMetrics:function(Y,N){C=new Ot,C.start=new Date,C.mstart=Y,C.starttype=N},createPlaylistTraceMetrics:function(Y,N,z){S===!0&&(S=!1,k=new Mt,k.representationid=Y,k.start=new Date,k.mstart=N,k.playbackspeed=z!==null?z.toString():null)},updatePlayListTraceMetrics:function(Y){if(k)for(let N in k)k[N]=Y[N]},pushPlayListTraceMetrics:function(Y,N){if(S===!1&&C&&k&&k.start){const z=k.start;k.duration=Y.getTime()-z.getTime(),k.stopreason=N,C.trace.push(k),S=!0}},clearAllCurrentMetrics:function(){$.clearAllCurrentMetrics()}},$=$||mc(b).getInstance({settings:_.settings}),S=!0,k=null,C=null,T}ip.__dashjs_factory_name="DashMetrics";var bh=ve.default.getSingletonFactory(ip);function gc(){const _=this.context,b=(0,oe.default)(_).getInstance(),T=(0,J.default)(_).getInstance();let S,k,C,$;function H(se){$=se}function x(se,he,ge,Ie){let ee,V=he.adaptation.period.mpd;const j=V.availabilityStartTime;if(Ie)ee=ge&&V.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(j.getTime()+1e3*(se+V.timeShiftBufferDepth)):V.availabilityEndTime;else if(ge){const X=he.availabilityTimeOffset;ee=new Date(j.getTime()+1e3*(se-X))}else ee=j;return ee}function W(se,he){return(se.getTime()-he.mpd.availabilityStartTime.getTime()+1e3*$)/1e3}function Y(se,he){return se+(he.adaptation.period.start-he.presentationTimeOffset)}function N(se){const he={start:NaN,end:NaN},ge=se[0].getAdapter().getRegularPeriods()[0],Ie=W(new Date,ge);if(!se||se.length===0)return{range:he,now:Ie};se.forEach(V=>{let j=V.getCurrentRepresentationForType(L.default.VIDEO);if(j||(j=V.getCurrentRepresentationForType(L.default.AUDIO)),!j){const pe=V.getAdapter(),Ae=pe.getMediaInfoForType(V.getStreamInfo(),L.default.VIDEO)||pe.getMediaInfoForType(V.getStreamInfo(),L.default.AUDIO);j=pe.getVoRepresentations(Ae)[0]}let X={start:NaN,end:NaN};if(j)if(j.segmentInfoType===w.default.SEGMENT_TIMELINE)X=function(pe){const Ae=pe.adaptation.period.mpd.manifest.Period[pe.adaptation.period.index].AdaptationSet[pe.adaptation.index],be=k.getRepresentationFor(pe.index,Ae),Se=be.SegmentTemplate||be.SegmentList,Me=Se.SegmentTimeline,Fe=Se.timescale,Z=Me.S,ne={start:0,end:0},we=Z[0].t,_e=!isNaN(we),ae=_e?we:0;let me,ye,fe,ke,xe=0;for(_e&&(ne.start=Y(ae/Fe,pe)),fe=0,ke=Z.length;fe<ke;fe++)me=Z[fe],ye=0,me.hasOwnProperty("r")&&(ye=me.r),xe+=me.d*(1+ye);return ne.end=Y((ae+xe)/Fe,pe),ne}(j);else{const pe=j.adaptation.period;X.start=pe.start,X.end=Math.max(Ie,pe.start+pe.duration)}!isNaN(X.start)&&(isNaN(he.start)||he.start>X.start)&&(he.start=X.start),!isNaN(X.end)&&(isNaN(he.end)||he.end<X.end)&&(he.end=X.end)}),he.end=Math.min(Ie,he.end);const ee=G(se,he.end,!0);return he.end=isNaN(ee)?he.end:ee,he.start=ge&&ge.mpd&&ge.mpd.timeShiftBufferDepth&&!isNaN(ge.mpd.timeShiftBufferDepth)&&!isNaN(he.end)?Math.max(he.end-ge.mpd.timeShiftBufferDepth,he.start):he.start,he.start=G(se,he.start),{range:he,now:Ie}}function z(se,he){C=se-he.end}function G(se,he){let ge=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let Ie=0,ee=!1,V=NaN;for(;!ee&&Ie<se.length;){const j=se[Ie].getStreamInfo();j.start<=he&&(!isFinite(j.duration)||j.start+j.duration>=he)?(V=he,ee=!0):!ge&&j.start>he&&(isNaN(V)||j.start<V)?V=j.start:ge&&j.start+j.duration<he&&(isNaN(V)||j.start+j.duration>V)&&(V=j.start+j.duration),Ie+=1}return V}catch{return he}}function re(se){se.offset===void 0||isNaN(se.offset)||H(se.offset/1e3)}function le(){$=0,C=0}function de(){b.off(D.default.UPDATE_TIME_SYNC_OFFSET,re,this),le()}return S={initialize:function(){le(),b.on(D.default.UPDATE_TIME_SYNC_OFFSET,re,this)},getClientTimeOffset:function(){return $},setClientTimeOffset:H,getClientReferenceTime:function(){return Date.now()-1e3*C+1e3*$},calcAvailabilityStartTimeFromPresentationTime:function(se,he,ge){return x(se,he,ge)},calcAvailabilityEndTimeFromPresentationTime:function(se,he,ge){return x(se,he,ge,!0)},calcPresentationTimeFromWallTime:W,calcPresentationTimeFromMediaTime:Y,calcPeriodRelativeTimeFromMpdRelativeTime:function(se,he){return he-se.adaptation.period.start},calcMediaTimeFromPresentationTime:function(se,he){return se-he.adaptation.period.start+he.presentationTimeOffset},calcWallTimeForSegment:function(se,he){let ge,Ie,ee;return he&&(ge=se.representation.adaptation.period.mpd.suggestedPresentationDelay,Ie=se.presentationStartTime+ge,ee=new Date(se.availabilityStartTime.getTime()+1e3*Ie)),ee},calcTimeShiftBufferWindow:function(se,he){if(!he)return function(ge){const Ie={start:NaN,end:NaN};let ee=0,V=NaN;return ge.forEach(j=>{const X=j.getStreamInfo();ee+=X.duration,(isNaN(V)||X.start<V)&&(V=X.start)}),Ie.start=V,Ie.end=V+ee,Ie}(se);if(T.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const ge=N(se);return z(ge.now,ge.range),ge.range}return function(ge){const Ie={start:NaN,end:NaN};if(!ge||ge.length===0)return Ie;const ee=ge[0].getAdapter().getRegularPeriods()[0],V=W(new Date,ee),j=ee.mpd.timeShiftBufferDepth,X=isNaN(j)?0:V-j;if(Ie.start=G(ge,X),Ie.end=!isNaN(Ie.start)&&V<Ie.start?V:G(ge,V,!0),!isNaN(j)&&Ie.end<V-j&&(Ie.end=NaN),T.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const pe=N(ge);if(pe.range.end<Ie.start)return b.trigger(te.default.CONFORMANCE_VIOLATION,{level:Cs.LEVELS.WARNING,event:Cs.EVENTS.INVALID_DVR_WINDOW}),z(pe.now,pe.range),pe.range}return Ie}(se)},reset:de},k=Mr(_).getInstance(),de(),S}gc.__dashjs_factory_name="TimelineConverter";var Xa,pc,Fu,vc,Th,nE=ve.default.getSingletonFactory(gc),ap=function(_){for(var b=[],T=0;T<_.length;++T){var S=_.charCodeAt(T);S<128?b.push(S):S<2048?(b.push(192|S>>6),b.push(128|63&S)):S<65536?(b.push(224|S>>12),b.push(128|63&S>>6),b.push(128|63&S)):(b.push(240|S>>18),b.push(128|63&S>>12),b.push(128|63&S>>6),b.push(128|63&S))}return b},rE=function(_){for(var b=[],T=0;T<_.length;){var S=_[T++];S<128||(S<224?(S=(31&S)<<6,S|=63&_[T++]):S<240?(S=(15&S)<<12,S|=(63&_[T++])<<6,S|=63&_[T++]):(S=(7&S)<<18,S|=(63&_[T++])<<12,S|=(63&_[T++])<<6,S|=63&_[T++])),b.push(String.fromCharCode(S))}return b.join("")},ps={};Xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pc=function(_){for(var b=0,T=[],S=0|_.length/3;0<S--;){var k=(_[b]<<16)+(_[b+1]<<8)+_[b+2];b+=3,T.push(Xa.charAt(63&k>>18)),T.push(Xa.charAt(63&k>>12)),T.push(Xa.charAt(63&k>>6)),T.push(Xa.charAt(63&k))}return _.length-b==2?(k=(_[b]<<16)+(_[b+1]<<8),T.push(Xa.charAt(63&k>>18)),T.push(Xa.charAt(63&k>>12)),T.push(Xa.charAt(63&k>>6)),T.push("=")):_.length-b==1&&(k=_[b]<<16,T.push(Xa.charAt(63&k>>18)),T.push(Xa.charAt(63&k>>12)),T.push("==")),T.join("")},Fu=function(){for(var _=[],b=0;b<64;++b)_[Xa.charCodeAt(b)]=b;return _[61]=0,_}(),vc=function(_){for(var b=0,T=[],S=0|_.length/4;0<S--;){var k=(Fu[_.charCodeAt(b)]<<18)+(Fu[_.charCodeAt(b+1)]<<12)+(Fu[_.charCodeAt(b+2)]<<6)+Fu[_.charCodeAt(b+3)];T.push(255&k>>16),T.push(255&k>>8),T.push(255&k),b+=4}return T&&(_.charAt(b-2)=="="?(T.pop(),T.pop()):_.charAt(b-1)=="="&&T.pop()),T},Th={encode:function(_){for(var b=[],T=0;T<_.length;++T)b.push(_.charCodeAt(T));return b},decode:function(_){for(var b=0;b<s.length;++b)a[b]=String.fromCharCode(a[b]);return a.join("")}},ps.decodeArray=function(_){var b=vc(_);return new Uint8Array(b)},ps.encodeASCII=function(_){var b=Th.encode(_);return pc(b)},ps.decodeASCII=function(_){var b=vc(_);return Th.decode(b)},ps.encode=function(_){var b=ap(_);return pc(b)},ps.decode=function(_){var b=vc(_);return rE(b)},typeof exports<"u"&&(exports.decode=ps.decode,exports.decodeArray=ps.decodeArray,exports.encode=ps.encode,exports.encodeASCII=ps.encodeASCII);var _h=ps,l_=class extends cc{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},iE=t(7377);function aE(){let _,b=0;function T(x){let W="";for(let Y=0;Y<x.length;++Y)W+=x[Y].uchar;return W.length-W.replace(/^\s+/,"").length}function S(x){return"left: "+3.125*x.x+"%; top: "+6.66*x.y1+"%; width: "+(100-3.125*x.x)+"%; height: "+6.66*Math.max(x.y2-1-x.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function k(x){return x==="red"?"rgb(255, 0, 0)":x==="green"?"rgb(0, 255, 0)":x==="blue"?"rgb(0, 0, 255)":x==="cyan"?"rgb(0, 255, 255)":x==="magenta"?"rgb(255, 0, 255)":x==="yellow"?"rgb(255, 255, 0)":x==="white"?"rgb(255, 255, 255)":x==="black"?"rgb(0, 0, 0)":x}function C(x,W){const Y=x.videoHeight/15;return W?"font-size: "+Y+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(W.foreground?k(W.foreground):"rgb(255, 255, 255)")+"; font-style: "+(W.italics?"italic":"normal")+"; text-decoration: "+(W.underline?"underline":"none")+"; white-space: pre; background-color: "+(W.background?k(W.background):"transparent")+";":"font-size: "+Y+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function $(x){return x.replace(/^\s+/g,"")}function H(x){return x.replace(/\s+$/g,"")}return _={createHTMLCaptionsFromScreen:function(x,W,Y,N){let z=null,G=null,re=!1,le=-1,de={start:W,end:Y,spans:[]},se="style_cea608_white_black";const he={},ge={},Ie=[];let ee,V;for(ee=0;ee<15;++ee){const X=N.rows[ee];let pe="",Ae=null;if(X.isEmpty()===!1){const be=T(X.chars);z===null&&(z={x:be,y1:ee,y2:ee+1,p:[]}),be!==le&&re&&(z.p.push(de),de={start:W,end:Y,spans:[]},z.y2=ee,z.name="region_"+z.x+"_"+z.y1+"_"+z.y2,he.hasOwnProperty(z.name)===!1?(Ie.push(z),he[z.name]=z):(G=he[z.name],G.p.contat(z.p)),z={x:be,y1:ee,y2:ee+1,p:[]});for(let Se=0;Se<X.chars.length;++Se){const Me=X.chars[Se],Fe=Me.penState;if(Ae===null||!Fe.equals(Ae)){pe.trim().length>0&&(de.spans.push({name:se,line:pe,row:ee}),pe="");let Z="style_cea608_"+Fe.foreground+"_"+Fe.background;Fe.underline&&(Z+="_underline"),Fe.italics&&(Z+="_italics"),ge.hasOwnProperty(Z)||(ge[Z]=JSON.parse(JSON.stringify(Fe))),Ae=Fe,se=Z}pe+=Me.uchar}pe.trim().length>0&&de.spans.push({name:se,line:pe,row:ee}),re=!0,le=be}else re=!1,le=-1,z&&(z.p.push(de),de={start:W,end:Y,spans:[]},z.y2=ee,z.name="region_"+z.x+"_"+z.y1+"_"+z.y2,he.hasOwnProperty(z.name)===!1?(Ie.push(z),he[z.name]=z):(G=he[z.name],G.p.contat(z.p)),z=null)}z&&(z.p.push(de),z.y2=ee+1,z.name="region_"+z.x+"_"+z.y1+"_"+z.y2,he.hasOwnProperty(z.name)===!1?(Ie.push(z),he[z.name]=z):(G=he[z.name],G.p.contat(z.p)),z=null);const j=[];for(ee=0;ee<Ie.length;++ee){const X=Ie[ee],pe="sub_cea608_"+b++,Ae=document.createElement("div");Ae.id=pe;const be=S(X);Ae.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+be;const Se=document.createElement("div");Se.className="paragraph bodyStyle",Se.style.cssText=C(x);const Me=document.createElement("div");Me.className="cueUniWrapper",Me.style.cssText="unicode-bidi: normal; direction: ltr;";for(let Z=0;Z<X.p.length;++Z){const ne=X.p[Z];let we=0;for(V=0;V<ne.spans.length;++V){let _e=ne.spans[V];if(_e.line.length>0){if(V!==0&&we!=_e.row){const fe=document.createElement("br");fe.className="lineBreak",Me.appendChild(fe)}let ae=!1;we===_e.row&&(ae=!0),we=_e.row;const me=ge[_e.name],ye=document.createElement("span");ye.className="spanPadding "+_e.name+" customSpanColor",ye.style.cssText=C(x,me),V!==0&&ae?V===ne.spans.length-1?ye.textContent=H(_e.line):ye.textContent=_e.line:ne.spans.length>1&&V<ne.spans.length-1&&_e.row===ne.spans[V+1].row?ye.textContent=$(_e.line):ye.textContent=_e.line.trim(),Me.appendChild(ye)}}}Se.appendChild(Me),Ae.appendChild(Se);const Fe={bodyStyle:["%",90]};for(const Z in ge)ge.hasOwnProperty(Z)&&(Fe[Z]=["%",90]);j.push({type:"html",start:W,end:Y,cueHTMLElement:Ae,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:Fe,lineHeight:{},linePadding:{}})}return j}},_}aE.__dashjs_factory_name="EmbeddedTextHtmlRender";var u_=ve.default.getSingletonFactory(aE);function sE(_,b,T){const S=[];for(let k=b;k<T;k++)k+2<T&&_.getUint8(k)===0&&_.getUint8(k+1)===0&&_.getUint8(k+2)===3?(S.push(0),S.push(0),k+=2):S.push(_.getUint8(k));return new DataView(new Uint8Array(S).buffer)}function oE(_,b,T,S){return!(_!==4||b<8)&&T.getUint8(S)===181&&T.getUint16(S+1)===49&&T.getUint32(S+3)===1195456820&&T.getUint8(S+7)===3}function lE(_,b){return(127&_)>0||(127&b)>0}function Sh(_,b){let T=0;for(;T<_.byteLength;){let k,C=0,$=0;do C+=k=_.getUint8(T++);while(k===255);do $+=k=_.getUint8(T++);while(k===255);if(oE(C,$,_,T)){const H=T+10,x=H+3*(31&_.getUint8(H-2));for(let W=H;W<x;W+=3){const Y=_.getUint8(W);if(4&Y){const N=3&Y;if((S=N)===0||S===1){const z=_.getUint8(W+1),G=_.getUint8(W+2);lE(z,G)&&b[N].push(z,G)}}}}T+=$}var S}function d_(_,b,T){let S=0,k=0;const C=[[],[]];for(let $=b;$<b+T-5&&(S=_.getUint32($),k=31&_.getUint8($+4),!($+5+S>b+T));$++)k===6&&$+5+S<=_.byteLength&&Sh(sE(_,$+5,$+5+S),C),$+=S+3;return C}function uE(_){const b=_.errHandler,T=_.manifestModel,S=_.mediaController,k=_.videoModel,C=_.textTracks,$=_.vttParser,H=_.vttCustomRenderingParser,x=_.ttmlParser,W=_.streamInfo,Y=_.settings,N=this.context,z=(0,oe.default)(N).getInstance();let G,re,le,de,se,he,ge,Ie,ee,V,j,X,pe,Ae,be,Se,Me,Fe=!1;function Z(){he=null,Ie=NaN,ee=[],V=null,ge=!1,se=[],de=null}function ne(je){const Ge={};Ge[w.default.SUBTITLE]="subtitles",Ge[w.default.CAPTION]="captions",Ge[w.default.FORCED_SUBTITLE]="subtitles";const nt=new l_;for(let ft in je)nt[ft]=je[ft];nt.defaultTrack=function(ft){let bt=!1;return X.length>1&&ft.isEmbedded?bt=ft.id&&ft.id===L.default.CC1:X.length===1?ft.id&&typeof ft.id=="string"&&ft.id.substring(0,2)==="CC"&&(bt=!0):X.length===0&&(bt=ft.index===se[0].index),bt}(je),nt.isTTML=function(ft){return ft.codec&&ft.codec.search(L.default.STPP)>=0||ft.mimeType&&ft.mimeType.search(L.default.TTML)>=0}(je),nt.kind=function(ft,bt){let qt=ft.roles&&ft.roles.length>0?bt[ft.roles[0].value]:bt.caption;return qt=Object.values(bt).includes(qt)?qt:bt.caption,qt}(je,Ge),C.addTextTrackInfo(nt)}function we(je){const Ge=je.chunk;Ge.representation.mediaInfo.embeddedCaptions&&ae(Ge.bytes,Ge)}function _e(je){j=je}function ae(je,Ge){const nt=Ge.representation.mediaInfo,ft=nt.type,bt=nt.mimeType,qt=nt.codec||bt;qt?nt.codec.indexOf("application/mp4")!==-1?function(Yt,mn,Nn){let Ft,gn;if(mn.segmentType==="InitializationSegment")ge=!0,Ie=le.getMediaTimescaleFromMoov(Yt);else{if(!ge)return;gn=le.getSamplesInfo(Yt),Ft=gn.sampleList,Ft.length>0&&(V=Ft[0].cts-mn.start*Ie),Nn.search(L.default.STPP)>=0?function(Sn,wn,On){let We,ht;for(de=de!==null?de:fe(On),We=0;We<wn.length;We++){const ct=wn[We],_t=ct.cts,Gt=ye(),In=Gt+_t/Ie,mt=In+ct.duration/Ie;G.buffered.add(In,mt);const Qt=new DataView(Sn,ct.offset,ct.subSizes[0]);let ln=Tu.Utils.dataViewToString(Qt,L.default.UTF8);const en=[];let Wt=ct.offset+ct.subSizes[0];for(ht=1;ht<ct.subSizes.length;ht++){const rt=new Uint8Array(Sn,Wt,ct.subSizes[ht]),Ct=String.fromCharCode.apply(null,rt);en.push(Ct),Wt+=ct.subSizes[ht]}try{const rt=T.getValue().ttmlTimeIsRelative?_t/Ie:0,Ct=de.parse(ln,rt,_t/Ie,(_t+ct.duration)/Ie,en);C.addCaptions(j,Gt,Ct)}catch(rt){he.removeExecutedRequestsBeforeTime(),ke(),re.error("TTML parser error: "+rt)}}}(Yt,Ft,Nn):function(Sn,wn){let On,We,ht;const ct=[];for(On=0;On<wn.length;On++){const _t=wn[On];_t.cts-=V;const Gt=ye()+_t.cts/Ie,In=Gt+_t.duration/Ie;G.buffered.add(Gt,In);const mt=Sn.slice(_t.offset,_t.offset+_t.size),Qt=Tu.parseBuffer(mt);for(We=0;We<Qt.boxes.length;We++){const ln=Qt.boxes[We];if(re.debug("VTT box1: "+ln.type),ln.type!=="vtte"&&ln.type==="vttc"){re.debug("VTT vttc boxes.length = "+ln.boxes.length);let en={styles:{}};for(ht=0;ht<ln.boxes.length;ht++){const Wt=ln.boxes[ht];if(re.debug("VTT box2: "+Wt.type),Wt.type==="payl")en.start=_t.cts/Ie,en.end=(_t.cts+_t.duration)/Ie,en.data=Wt.cue_text;else if(Wt.type==="sttg"&&Wt.settings&&Wt.settings!=="")try{const rt=Wt.settings.split(" ");en.styles=$.getCaptionStyles(rt)}catch{}}en&&en.data&&(ct.push(en),re.debug(`VTT  ${en.start} - ${en.end} :  ${en.data}`))}}}ct.length>0&&C.addCaptions(j,0,ct)}(Yt,Ft)}}(je,Ge,qt):ft===L.default.VIDEO?function(Yt,mn){let Nn,Ft;if(mn.segmentType===Re.HTTPRequest.INIT_SEGMENT_TYPE)pe===0&&(pe=le.getMediaTimescaleFromMoov(Yt));else if(mn.segmentType===Re.HTTPRequest.MEDIA_SEGMENT_TYPE){if(pe===0)return void re.warn("CEA-608: No timescale for embeddedTextTrack yet");Ft=le.getSamplesInfo(Yt);const gn=Ft.lastSequenceNumber,Sn=Math.trunc(mn.start),wn=Math.trunc(mn.end);if(Se[0]||Se[1]||function(){let On;for(let We=0;We<X.length;We++){if(On=C.getTrackIdxForId(X[We].id),On===-1)return void re.warn("CEA-608: data before track is ready.");const ht=me(On);Se[We]=new ie(We+1,{newCue:ht},null)}}(),pe){if(function(We,ht,ct,_t,Gt){return We!==null&&ht!==null&&_t!==null&&Gt!==null&&(ht===We?_t!==Gt:ht!==We+ct)}(Ae,gn,Ft.numSequences,be,Sn))for(Nn=0;Nn<Se.length;Nn++)Se[Nn]&&Se[Nn].reset();const On=function(We,ht){if(ht.length===0)return null;const ct={splits:[],fields:[[],[]]},_t=new DataView(We);for(let Gt=0;Gt<ht.length;Gt++){const In=ht[Gt],mt=d_(_t,In.offset,In.size);let Qt=null,ln=0;for(let en=0;en<2;en++)if(mt[en].length>0){In.cts!==Qt?ln=0:ln+=1;const Wt=ye();ct.fields[en].push([In.cts+Wt*pe,mt[en],ln]),Qt=In.cts}}return ct.fields.forEach(function(Gt){Gt.sort(function(In,mt){return In[0]===mt[0]?In[2]-mt[2]:In[0]-mt[0]})}),ct}(Yt,Ft.sampleList);for(let We=0;We<Se.length;We++){const ht=On.fields[We],ct=Se[We];if(ct)for(Nn=0;Nn<ht.length;Nn++)ct.addData(ht[Nn][0]/pe,ht[Nn][1])}Ae=gn,be=wn}}}(je,Ge):function(Yt,mn,Nn){let Ft,gn;const Sn=new DataView(Yt,0,Yt.byteLength);gn=Tu.Utils.dataViewToString(Sn,L.default.UTF8);try{Ft=fe(Nn).parse(gn,0),C.addCaptions(C.getCurrentTrackIdx(),0,Ft),G.buffered&&G.buffered.add(mn.start,mn.end)}catch(wn){b.error(new Pe.default(Q.TIMED_TEXT_ERROR_ID_PARSE_CODE,Q.TIMED_TEXT_ERROR_MESSAGE_PARSE+wn.message,gn))}}(je,Ge,qt):re.error("No text type defined")}function me(je){return function(Ge,nt,ft){let bt;bt=k.getTTMLRenderingDiv()?Me.createHTMLCaptionsFromScreen(k.getElement(),Ge,nt,ft):[{start:Ge,end:nt,data:ft.getDisplayText(),styles:{}}],bt&&C.addCaptions(je,0,bt)}}function ye(){return isNaN(G.timestampOffset)?0:G.timestampOffset}function fe(je){let Ge;return je.search(L.default.VTT)>=0?Ge=Y.get().streaming.text.webvtt.customRenderingEnabled&&H?H:$:(je.search(L.default.TTML)>=0||je.search(L.default.STPP)>=0)&&(Ge=x),Ge}function ke(je,Ge){je===void 0&&je===Ge&&(je=G.buffered.start(0),Ge=G.buffered.end(G.buffered.length-1)),G.buffered.remove(je,Ge),C.deleteCuesFromTrackIdx(j,je,Ge)}function xe(je){X.forEach(function(Ge){const nt=C.getTrackIdxForId(Ge.id);nt>=0&&C.deleteCuesFromTrackIdx(nt,je.from,je.to)})}return G={initialize:function(){Fe||(X=[],j=null,pe=0,Se=[],Ae=null,be=null,Fe=!0,Me=u_(N).getInstance(),z.on(D.default.VIDEO_CHUNK_RECEIVED,we,G),z.on(D.default.BUFFER_CLEARED,xe,G))},addMediaInfos:function(je,Ge,nt){if(se=se.concat(Ge),je===L.default.TEXT&&Ge[0].isFragmented&&!Ge[0].isEmbedded){he=nt,G.buffered=(0,iE.default)(N).create(),ee=S.getTracksFor(L.default.TEXT,W.id).filter(bt=>bt.isFragmented);const ft=S.getCurrentTrackFor(L.default.TEXT,W.id);for(let bt=0;bt<ee.length;bt++)if(ee[bt]===ft){_e(bt);break}}for(let ft=0;ft<Ge.length;ft++)ne(Ge[ft])},resetMediaInfos:function(){se=[]},getStreamId:function(){return W.id},append:ae,abort:function(){},addEmbeddedTrack:function(je){if(Fe&&je)if(je.id===L.default.CC1||je.id===L.default.CC3){for(let Ge=0;Ge<X.length;Ge++)if(X[Ge].id===je.id)return;X.push(je)}else re.warn("Embedded track "+je.id+" not supported!")},resetEmbedded:function(){z.off(D.default.VIDEO_CHUNK_RECEIVED,we,G),z.off(D.default.BUFFER_CLEARED,xe,G),C&&C.deleteAllTextTracks(),Fe=!1,X=[],Se=[null,null],Ae=null,be=null},getConfig:function(){return{fragmentModel:he,fragmentedTracks:ee,videoModel:k}},setCurrentFragmentedTrackIdx:_e,remove:ke,reset:function(){Z(),se=[],le=null}},re=(0,Le.default)(N).getInstance().getLogger(G),le=Hd(N).getInstance(),Z(),G}uE.__dashjs_factory_name="TextSourceBuffer";var c_=ve.default.getClassFactory(uE);class Uu{constructor(b){if(this.cues=new Map,b)for(const T of b)this.addCue(T)}hasCue(b){const T=this.cues.get(b.startTime);return T&&T.some(S=>{return C=b,(k=S).startTime===C.startTime&&k.endTime===C.endTime&&k instanceof VTTCue&&C instanceof VTTCue&&k.text===C.text;var k,C})}addCue(b){const T=this.cues.get(b.startTime);T?this.hasCue(b)||T.push(b):this.cues.set(b.startTime,[b])}}var yc=t(7640);const sp=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function dE(_){const b=this.context,T=(0,oe.default)(b).getInstance(),S=_.videoModel,k=_.streamInfo,C=_.settings;let $,H,x,W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V,j,X,pe;function Ae(We){const ht=We.kind,ct=We.id!==void 0?We.id:We.lang,_t=We.lang,Gt=We.isTTML,In=We.isEmbedded;return S.addTextTrack(ht,ct,_t,Gt,In)}function be(We,ht,ct,_t,Gt,In){let mt=0,Qt=0;We/ht>ct/_t?(Qt=ht,mt=Qt/_t*ct):(mt=We,Qt=mt/ct*_t);let ln=0,en=0,Wt=0,rt=0;return mt/Qt>Gt?(rt=Qt,Wt=Qt*Gt):(Wt=mt,rt=mt/Gt),ln=(We-Wt)/2,en=(ht-rt)/2,In?{x:ln+.1*Wt,y:en+.1*rt,w:.8*Wt,h:.8*rt}:{x:ln,y:en,w:Wt,h:rt}}function Se(We,ht){const ct=S.getClientWidth(),_t=S.getClientHeight(),Gt=S.getVideoWidth(),In=S.getVideoHeight(),mt=S.getVideoRelativeOffsetTop(),Qt=S.getVideoRelativeOffsetLeft();if(Gt!==0&&In!==0){let ln=Gt/In,en=!1;We.isFromCEA608&&(ln=3.5/3,en=!0);const Wt=be.call(this,ct,_t,Gt,In,ln,en),rt=Wt.w,Ct=Wt.h,Zt=Wt.x,rn=Wt.y;if(rt!=re||Ct!=le||Zt!=z||rn!=G||ht){if(z=Zt+Qt,G=rn+mt,re=rt,le=Ct,de){const Ce=de.style;Ce&&(Ce.left=z+"px",Ce.top=G+"px",Ce.width=re+"px",Ce.height=le+"px",Ce.zIndex=ge&&document[ge]||Ie?V:null,T.trigger(te.default.CAPTION_CONTAINER_RESIZE))}const pt=We.activeCues;if(pt){const Ce=pt.length;for(let et=0;et<Ce;++et){const yt=pt[et];yt.scaleCue(yt)}}}}}function Me(We){const ht=re,ct=le;let _t,Gt,In,mt,Qt;if(We.cellResolution){const ln=[ht/We.cellResolution[0],ct/We.cellResolution[1]];if(We.linePadding){for(_t in We.linePadding)if(We.linePadding.hasOwnProperty(_t)){Gt=(We.linePadding[_t]*ln[0]).toString();const en=document.getElementsByClassName("spanPadding");for(let Wt=0;Wt<en.length;Wt++)en[Wt].style.cssText=en[Wt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt),en[Wt].style.cssText=en[Wt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}if(We.fontSize){for(_t in We.fontSize)if(We.fontSize.hasOwnProperty(_t)){We.fontSize[_t][0]==="%"?In=We.fontSize[_t][1]/100:We.fontSize[_t][0]==="c"&&(In=We.fontSize[_t][1]),Gt=(In*ln[1]).toString(),Qt=_t!=="defaultFontSize"?document.getElementsByClassName(_t):document.getElementsByClassName("paragraph");for(let en=0;en<Qt.length;en++)Qt[en].style.cssText=Qt[en].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}if(We.lineHeight){for(_t in We.lineHeight)if(We.lineHeight.hasOwnProperty(_t)){We.lineHeight[_t][0]==="%"?mt=We.lineHeight[_t][1]/100:We.fontSize[_t][0]==="c"&&(mt=We.lineHeight[_t][1]),Gt=(mt*ln[1]).toString(),Qt=document.getElementsByClassName(_t);for(let en=0;en<Qt.length;en++)Qt[en].style.cssText=Qt[en].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}}}if(We.isd){let ln=document.getElementById(We.cueID);ln&&de.removeChild(ln),Z(We)}}function Fe(We,ht){const ct=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,_t=/^#(.*)$/;if(ct.test(ht)){const Gt=ct.exec(ht),In=parseInt(Gt[4],10)-1;return"data:image/png;base64,"+btoa(We.images[In])}if(_t.test(ht)){const Gt=_t.exec(ht)[1];return"data:image/png;base64,"+We.embeddedImages[Gt]}return ht}function Z(We){if(de){On.call(this);const ht=document.createElement("div");de.appendChild(ht),ee=(0,yc.renderHTML)(We.isd,ht,function(ct){return Fe(We,ct)},de.clientHeight,de.clientWidth,C.get().streaming.text.imsc.displayForcedOnlyMode,function(ct){H.info("renderCaption :",ct)},ee,C.get().streaming.text.imsc.enableRollUp),ht.id=We.cueID,T.trigger(te.default.CAPTION_RENDERED,{captionDiv:ht,currentTrackIdx:N})}}function ne(We,ht){return!!ht&&ht.endTime>=We.startTime}function we(We,ht){return!!C.get().streaming.text.extendSegmentedCues&&!!function(ct,_t,Gt){for(let In=0;In<Gt.length;In++){const mt=Gt[In];if(JSON.stringify(ct[mt])!==JSON.stringify(_t[mt]))return!1}return!0}(ht,We,sp)&&(ht.endTime=Math.max(ht.endTime,We.endTime),!0)}function _e(We,ht){ht&&ht.forEach(ct=>{ct.kind&&ct.kind==="image"&&(ct.src=Fe(We,ct.src)),_e(We,ct.contents)})}function ae(We,ht,ct){const _t=bt(We),Gt=C.get().streaming.text.dispatchForManualRendering;if(!_t||!Array.isArray(ct)||ct.length===0)return;const In=new Uu(_t.cues);for(let mt=0;mt<ct.length;mt++){let Qt=null;const ln=ct[mt];_t.cellResolution=ln.cellResolution,_t.isFromCEA608=ln.isFromCEA608,isNaN(ln.start)||isNaN(ln.end)||(Gt?Qt=me(ln,ht):je(ln)&&de?Qt=ke(ln,ht,_t):ln.data&&(Qt=xe(ln,ht,_t)));try{if(Qt){if(!In.hasCue(Qt))if(In.addCue(Qt),C.get().streaming.text.webvtt.customRenderingEnabled)_t.manualCueList||(_t.manualCueList=[]),_t.manualCueList.push(Qt);else{let Wt;_t.cues&&_t.cues.length!==0&&(Wt=_t.cues[_t.cues.length-1]),ne(Qt,Wt)?we(Qt,Wt)||(Wt.isd&&(Wt.onexit=function(){}),_t.mode!==L.default.TEXT_DISABLED&&_t.addCue(Qt)):_t.mode!==L.default.TEXT_DISABLED&&_t.addCue(Qt)}const en=C.get().streaming.buffer.bufferToKeep;Nn(_t,0,S.getTime()-en)}else H.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(en){throw Ft(_t),_t.addCue(Qt),en}}}function me(We,ht){let ct=Ge(We,ht);return ct.onenter=function(){je(We)&&pe&&pe.cueID!==ct.cueID&&fe(pe),delete ct.type,pe=ct,ye(ct)},ct.onexit=function(){fe(ct),pe=null},ct}function ye(We){T.trigger(te.default.CUE_ENTER,We)}function fe(We){T.trigger(te.default.CUE_EXIT,{cueID:We.cueID})}function ke(We,ht,ct){const _t=this;let Gt=Ge(We,ht);return de.style.left=z+"px",de.style.top=G+"px",de.style.width=re+"px",de.style.height=le+"px",Gt.onenter=function(){ct.mode===L.default.TEXT_SHOWING&&(this.isd?(X?requestAnimationFrame(()=>Z(this)):Z(this),H.debug("Cue enter id:"+this.cueID)):(de.appendChild(this.cueHTMLElement),Me.call(_t,this),T.trigger(te.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:N})))},Gt.onexit=function(){if(de){const In=de.childNodes;for(let mt=0;mt<In.length;++mt)In[mt].id===this.cueID&&(H.debug("Cue exit id:"+In[mt].id),de.removeChild(In[mt]),--mt)}},Gt}function xe(We,ht,ct){let _t=Ge(We,ht);if(_t.isActive=!1,We.styles)try{We.styles.align!==void 0&&"align"in _t&&(_t.align=We.styles.align),We.styles.line!==void 0&&"line"in _t&&(_t.line=We.styles.line),We.styles.lineAlign!==void 0&&(_t.lineAlign=We.styles.lineAlign),We.styles.snapToLines!==void 0&&"snapToLines"in _t&&(_t.snapToLines=We.styles.snapToLines),We.styles.position!==void 0&&"position"in _t&&(_t.position=We.styles.position),We.styles.positionAlign!==void 0&&(_t.positionAlign=We.styles.positionAlign),We.styles.size!==void 0&&"size"in _t&&(_t.size=We.styles.size)}catch(Gt){H.error(Gt)}return _t.onenter=function(){ct.mode===L.default.TEXT_SHOWING&&T.trigger(te.default.CAPTION_RENDERED,{currentTrackIdx:N})},_t}function je(We){return We.type==="html"}function Ge(We,ht){return je(We)?function(ct,_t){let Gt=new x(ct.start+_t,ct.end+_t,"");return Gt.cueHTMLElement=ct.cueHTMLElement,Gt.isd=ct.isd,Gt.images=ct.images,Gt.embeddedImages=ct.embeddedImages,Gt.cueID=ct.cueID,Gt.scaleCue=Me.bind(self),Gt.cellResolution=ct.cellResolution,Gt.lineHeight=ct.lineHeight,Gt.linePadding=ct.linePadding,Gt.fontSize=ct.fontSize,Gt.isd&&_e(Gt,Gt.isd.contents),Gt}(We,ht):function(ct,_t){let Gt=new x(ct.start-_t,ct.end-_t,ct.data);return Gt.cueID=_r.default.generateUuid(),Gt}(We,ht)}function nt(We){if(se){const ht=se.childNodes;for(let ct=0;ct<ht.length;++ct)ht[ct].id===We.cueID&&(se.removeChild(ht[ct]),--ct)}}function ft(){const We=S.getTextTracks(),ht=[];for(const ct of We)ct.manualMode===L.default.TEXT_SHOWING&&ht.push(ct);return ht}function bt(We){return We>=0&&W[We]?S.getTextTrack(W[We].kind,W[We].id,W[We].lang,W[We].isTTML,W[We].isEmbedded):null}function qt(We){if(We===N)return;N=We;const ht=bt(N);Yt.call(this,ht),he&&(clearInterval(he),he=null),ht&&ht.renderingType==="html"&&(Se.call(this,ht,!0),window.ResizeObserver?(j=new window.ResizeObserver(()=>{Se.call(this,ht,!0)}),j.observe(S.getElement())):he=setInterval(Se.bind(this,ht),500))}function Yt(We){On.call(this),We&&We.renderingType==="html"?Sn.call(this):wn.call(this)}function mn(We,ht,ct){let _t=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!We&&(isNaN(ht)||(_t?We.startTime:We.endTime)>=ht)&&(isNaN(ct)||(_t?We.endTime:We.startTime)<=ct)}function Nn(We,ht,ct){if(!(ct<ht)&&We&&(We.cues||We.manualCueList)){const _t=We.cues&&We.cues.length>0?"native":"custom",Gt=_t==="native"?We.cues:We.manualCueList;if(!Gt||Gt.length===0)return;for(let In=Gt.length-1;In>=0;In--)mn(Gt[In],ht,ct,!0)&&!gn(Gt[In])&&(_t==="native"?We.removeCue(Gt[In]):(nt(Gt[In]),delete We.manualCueList[In]))}}function Ft(We,ht,ct){let _t=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(We&&(We.cues||We.manualCueList)){const Gt=We.cues&&We.cues.length>0?"native":"custom",In=Gt==="native"?We.cues:We.manualCueList;if(!In||In.length===0)return;for(let mt=In.length-1;mt>=0;mt--)mn(In[mt],ht,ct,_t)&&(Gt==="native"?(In[mt].onexit&&In[mt].onexit(),We.removeCue(In[mt])):(nt(In[mt]),delete We.manualCueList[mt]))}}function gn(We){const ht=S.getTime();return ht>=We.startTime&&ht<=We.endTime}function Sn(){let We=document.getElementById("native-cue-style");if(We)return;We=document.createElement("style"),We.id="native-cue-style",document.head.appendChild(We);const ht=We.sheet,ct=S.getElement();try{ct&&(ct.id?ht.insertRule("#"+ct.id+"::cue {background: transparent}",0):ct.classList.length!==0?ht.insertRule("."+ct.className+"::cue {background: transparent}",0):ht.insertRule("video::cue {background: transparent}",0))}catch(_t){H.info(""+_t.message)}}function wn(){const We=document.getElementById("native-cue-style");We&&document.head.removeChild(We)}function On(){if(de)for(;de.firstChild;)de.removeChild(de.firstChild)}return $={addCaptions:ae,addTextTrackInfo:function(We){W.push(We)},createTracks:function(){W.sort(function(ht,ct){return ht.index-ct.index}),de=S.getTTMLRenderingDiv(),se=S.getVttRenderingDiv();let We=-1;for(let ht=0;ht<W.length;ht++){const ct=Ae(W[ht]);Y.push(ct),W[ht].defaultTrack&&(ct.default=!0,We=ht);const _t=bt(ht);_t&&(_t.mode=L.default.TEXT_SHOWING,de&&(W[ht].isTTML||W[ht].isEmbedded)?_t.renderingType="html":_t.renderingType="default"),ae(ht,0,W[ht].captionData),T.trigger(te.default.TEXT_TRACK_ADDED)}if(qt.call(this,We),We>=0){let ht=function(){const ct=bt(We);ct&&ct.renderingType==="html"&&Se.call(this,ct,!0),T.off(te.default.PLAYBACK_METADATA_LOADED,ht,this)};T.on(te.default.PLAYBACK_METADATA_LOADED,ht,this);for(let ct=0;ct<W.length;ct++){const _t=bt(ct);if(_t){const Gt=C.get().streaming.text.dispatchForManualRendering;_t.mode=ct!==We||Gt?L.default.TEXT_HIDDEN:L.default.TEXT_SHOWING,_t.manualMode=ct===We?L.default.TEXT_SHOWING:L.default.TEXT_HIDDEN}}}T.trigger(D.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:N,tracks:W,streamId:k.id})},deleteAllTextTracks:function(){const We=Y?Y.length:0;for(let ht=0;ht<We;ht++){const ct=bt(ht);ct&&Ft.call(this,ct,k.start,k.start+k.duration,!1)}Y=[],W=[],he&&(clearInterval(he),he=null),j&&S&&(j.unobserve(S.getElement()),j=null),N=-1,On.call(this)},deleteCuesFromTrackIdx:function(We,ht,ct){const _t=bt(We);_t&&Ft(_t,ht,ct)},disableManualTracks:function(){const We=ft();if(We&&We.length>0){const ht=We[0].manualCueList;ht&&ht.length>0&&ht.forEach(ct=>{if(ct.isActive){if(ct.isActive=!1,C.get().streaming.text.dispatchForManualRendering)fe(ct);else if(se){const _t=se.childNodes;for(let Gt=0;Gt<_t.length;++Gt)_t[Gt].id===ct.cueID&&(se.removeChild(_t[Gt]),--Gt)}}})}},getCurrentTrackIdx:function(){return N},getCurrentTextTrackInfo:function(){return W[N]},getStreamId:function(){return k.id},getTextTrackInfos:function(){return W},getTrackIdxForId:function(We){let ht=-1;for(let ct=0;ct<W.length;ct++)if(W[ct].id===We){ht=ct;break}return ht},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(x=window.VTTCue||window.TextTrackCue,W=[],Y=[],N=-1,z=0,G=0,re=0,le=0,de=null,se=null,he=null,Ie=!1,V=2147483647,ee=null,X="requestAnimationFrame"in window,document.fullscreenElement!==void 0?ge="fullscreenElement":document.webkitIsFullScreen!==void 0?ge="webkitIsFullScreen":document.msFullscreenElement?ge="msFullscreenElement":document.mozFullScreen&&(ge="mozFullScreen"))},manualCueProcessing:function(We){const ht=ft();if(ht&&ht.length>0){const ct=ht[0].manualCueList;ct&&ct.length>0&&ct.forEach(_t=>{_t.startTime<=We&&_t.endTime>=We&&!_t.isActive?(_t.isActive=!0,C.get().streaming.text.dispatchForManualRendering?ye(_t):WebVTT.processCues(window,[_t],se,_t.cueID)):_t.isActive&&(_t.startTime>We||_t.endTime<We)&&(_t.isActive=!1,C.get().streaming.text.dispatchForManualRendering?fe(_t):nt(_t))})}},setCurrentTrackIdx:qt,setModeForTrackIdx:function(We,ht){const ct=bt(We);ct&&ct.mode!==ht&&(ct.mode=ht),ct&&ct.manualMode!==ht&&(ct.manualMode=ht)}},H=(0,Le.default)(b).getInstance().getLogger($),$}dE.__dashjs_factory_name="TextTracks";var cE=ve.default.getClassFactory(dE);function op(){const _=this.context;let b,T,S,k,C,$;function H(N){const z=N.split(":"),G=z.length-1;return N=60*parseInt(z[G-1],10)+parseFloat(z[G]),G===2&&(N+=3600*parseInt(z[0],10)),N}function x(N){const z=N.split(k),G=z[1].split($);return G.shift(),z[1]=G[0],G.shift(),{cuePoints:z,styles:W(G)}}function W(N){const z={};return N.forEach(function(G){const re=G.split(":");if(re.length>1){const[le,de]=re;switch(le){case"align":case"A":z.align=de;break;case"line":case"L":const[se,he]=de.split(","),ge=se.endsWith("%");z.line=se==="auto"?se:parseInt(se,10),ge&&(z.snapToLines=!1),he&&(z.lineAlign=he);break;case"position":case"P":const[Ie,ee]=de.split(",");z.position=parseInt(Ie,10),ee&&(z.positionAlign=ee);break;case"size":case"S":z.size=parseInt(de,10)}}}),z}function Y(N,z){let G,re=z,le="",de="";for(;N[re]!==""&&re<N.length;)re++;if(G=re-z,G>1)for(let se=0;se<G;se++){if(de=N[z+se],de.match(k)){le="";break}le+=de,se!==G-1&&(le+=`
`)}else de=N[z],de.match(k)||(le=de);return le}return b={parse:function(N){const z=[];let G,re;if(!N)return z;G=(N=N.split(S)).length,re=-1;for(let le=0;le<G;le++){let de=N[le];if(de.length>0&&de!=="WEBVTT"&&de.match(k)){const se=x(de),he=se.cuePoints,ge=se.styles,Ie=Y(N,le+1),ee=H(he[0].replace(C,"")),V=H(he[1].replace(C,""));!isNaN(ee)&&!isNaN(V)&&ee>=re&&V>ee?Ie!==""?(re=ee,z.push({start:ee,end:V,data:Ie,styles:ge})):T.error("Skipping cue due to empty/malformed cue text"):T.error("Skipping cue due to incorrect cue timing")}}return z},getCaptionStyles:W},T=(0,Le.default)(_).getInstance().getLogger(b),S=/(?:\r\n|\r|\n)/gm,k=/-->/,C=/(^[\s]+|[\s]+$)/g,$=/\s\b/g,b}op.__dashjs_factory_name="VTTParser";var fE=ve.default.getSingletonFactory(op);function lp(){let _,b;return _={parse:function(T){let S=[];return b.oncue=function(k){k.start=k.startTime,k.end=k.endTime,k.data=k.text,k.styles={align:k.align,line:k.line,position:k.position,size:k.size},S.push(k)},b.parse(T),S}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(b=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),_}lp.__dashjs_factory_name="VttCustomRenderingParser";var hE=ve.default.getSingletonFactory(lp);function mE(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k=0;function C(){const $="cue_TTML_"+k;return k++,$}return T={parse:function($,H,x,W,Y){let N="";const z=[];let G,re,le;const de={},se={};let he="",ge="",Ie={onOpenTag:function(j,X,pe){if(pe[" imagetype"]&&!pe[" imageType"]&&(b.trigger(te.default.CONFORMANCE_VIOLATION,{level:Cs.LEVELS.ERROR,event:Cs.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),pe[" imageType"]=pe[" imagetype"]),X==="image"&&(j==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||j==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!pe[" imageType"]||pe[" imageType"].value!=="PNG")return void S.warn("smpte-tt imageType != PNG. Discarded");he=pe["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){he&&(se[he]=ge.trim()),ge="",he=""},onText:function(j){he&&(ge+=j)}};if(!$)throw N="no ttml data to parse",new Error(N);de.data=$,b.trigger(D.default.TTML_TO_PARSE,de);let ee=(0,yc.fromXML)(de.data,function(j){N=j},Ie);b.trigger(D.default.TTML_PARSED,{ttmlString:de.data,ttmlDoc:ee});const V=ee.getMediaTimeEvents();for(le=0;le<V.length;le++){let j=(0,yc.generateISD)(ee,V[le],function(X){N=X});j.contents.some(X=>X.contents.length)&&(G=V[le]+H,re=V[le+1]+H,G<re&&z.push({start:G,end:re,type:"html",cueID:C(),isd:j,images:Y,embeddedImages:se}))}if(N!=="")throw S.error(N),new Error(N);return z}},S=(0,Le.default)(_).getInstance().getLogger(T),T}mE.__dashjs_factory_name="TTMLParser";var Da=ve.default.getSingletonFactory(mE);function fa(_){let b=this.context;const T=(0,oe.default)(b).getInstance(),S=hn(b).getInstance(),k=_.adapter,C=_.baseURLController,$="error",H="loaded",x="unloaded";let W,Y,N;function z(le,de){let se,he,ge=!1;if(C.resolve()){const V=k.getVoRepresentations(le);V&&V.length>0&&(se=C.resolve(V[0].path).url)}const Ie=le.essentialProperties.filter(V=>V.schemeIdUri&&V.schemeIdUri===L.default.FONT_DOWNLOAD_DVB_SCHEME),ee=le.supplementalProperties.filter(V=>V.schemeIdUri&&V.schemeIdUri===L.default.FONT_DOWNLOAD_DVB_SCHEME);Ie.length>0?(ge=!0,he=Ie):he=ee,he.forEach(V=>{if(function(pe){return!(!(pe.value&&parseInt(pe.value)===1&&pe.dvbUrl&&pe.dvbUrl.length>0&&pe.dvbFontFamily&&pe.dvbFontFamily.length>0&&pe.dvbMimeType)||pe.dvbMimeType!==L.default.OFF_MIMETYPE&&pe.dvbMimeType!==L.default.WOFF_MIMETYPE)}(V)){let pe=(j=V.dvbUrl,X=se,S.isPathAbsolute(j)?j:S.isRelative(j)?X?S.resolve(j,X):S.resolve(j):j);N.push({fontFamily:V.dvbFontFamily,url:pe,mimeType:V.dvbMimeType,trackId:le.id,streamId:de,isEssential:ge,status:x,fontFace:new FontFace(V.dvbFontFamily,`url(${pe})`,{display:"swap"})})}var j,X})}function G(le,de){const se=N[le];N[le]={...se,status:de}}function re(){N=[]}return W={addFontsFromTracks:function(le,de){if(le&&Array.isArray(le)&&de)for(let se=0;se<le.length;se++)z(le[se],de)},downloadFonts:function(){for(let le=0;le<N.length;le++){let de=N[le];document.fonts.add(de.fontFace),T.trigger(te.default.DVB_FONT_DOWNLOAD_ADDED,de),de.fontFace.load().then(()=>{G(le,H),T.trigger(te.default.DVB_FONT_DOWNLOAD_COMPLETE,de)},se=>{G(le,$),Y.debug("Font download error: ",se),T.trigger(te.default.DVB_FONT_DOWNLOAD_FAILED,de)})}},getFonts:function(){return N},getFontsForTrackId:function(le){return N.filter(de=>de.trackId&&de.trackId===le)},reset:function(){(function(){for(const le of N){let de=document.fonts.delete(le.fontFace);Y.debug(`Removal of fontFamily: ${le.fontFamily} was ${de?"successful":"unsuccessful"}`)}})(),re()}},Y=(0,Le.default)(b).getInstance().getLogger(W),re(),W}fa.__dashjs_factory_name="DVBFonts";var gE=ve.default.getClassFactory(fa);function up(_){let b=this.context;const T=_.adapter,S=_.errHandler,k=_.manifestModel,C=_.mediaController,$=_.baseURLController,H=_.videoModel,x=_.settings;let W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V;function j(ae){if(V.error(`Could not download ${ae.isEssential?"an essential":"a"} font - fontFamily: ${ae.fontFamily}, url: ${ae.url}`),ae.isEssential){let me=z[ae.streamId].getTrackIdxForId(ae.trackId);z[ae.streamId].setModeForTrackIdx(me,L.default.TEXT_DISABLED)}}function X(ae){if(V.debug(`Successfully downloaded ${ae.isEssential?"an essential":"a"} font - fontFamily: ${ae.fontFamily}, url: ${ae.url}`),ae.isEssential){let me=z[ae.streamId].getTrackIdxForId(ae.trackId);me===z[ae.streamId].getCurrentTrackIdx()?z[ae.streamId].setModeForTrackIdx(me,L.default.TEXT_SHOWING):z[ae.streamId].setModeForTrackIdx(me,L.default.TEXT_HIDDEN)}}function pe(ae){let me=ae.tracks,ye=ae.index;const fe=ae.streamId;if(x.get().streaming.text.defaultEnabled===!1&&!Me()||Ie)Fe(fe,-1);else{const ke=C.getCurrentTrackFor(L.default.TEXT,fe);if(ke){const xe={lang:ke.lang,role:ke.roles[0],index:ke.index,codec:ke.codec,accessibility:ke.accessibility[0]};me.some((je,Ge)=>{if(C.matchSettings(xe,je))return Fe(fe,Ge),ye=Ge,!0})}se=!1}Y[fe].lastEnabledIndex=ye,de.trigger(te.default.TEXT_TRACKS_ADDED,{enabled:Me(),index:ye,tracks:me,streamId:fe}),ge=!0,ee.addFontsFromTracks(me,fe),ee.getFonts().forEach(ke=>{if(ke.isEssential){let xe=z[ke.streamId].getTrackIdxForId(ke.trackId);z[ke.streamId].setModeForTrackIdx(xe,L.default.TEXT_DISABLED)}}),ee.downloadFonts()}function Ae(ae){try{const me=ae.streamId;if(!z[me]||isNaN(ae.time))return;z[me].manualCueProcessing(ae.time)}catch{}}function be(ae){try{const me=ae.streamId;if(!z[me])return;z[me].disableManualTracks()}catch{}}function Se(ae){try{if(!ae||!ae.mediaType||ae.mediaType!==L.default.AUDIO||!ae.currentMediaInfo)return;const me=z[ae.streamId].getCurrentTextTrackInfo();let ye=NaN;se?ye=Z(ae.streamId):ne(me)&&ae.currentMediaInfo.lang&&ae.currentMediaInfo.lang!==me.lang&&(ye=Z(ae.streamId),isNaN(ye)&&(ye=-1)),isNaN(ye)||Fe(ae.streamId,ye)}catch(me){V.error(me)}}function Me(){let ae=!0;return se&&!he&&(ae=!1),ae}function Fe(ae,me){se=me===-1,se&&C&&C.saveTextSettingsDisabled();let ye=we(ae);if(ye===me||!z[ae])return;z[ae].disableManualTracks();let fe=z[ae].getCurrentTextTrackInfo(),ke=fe?H.getTextTrack(fe.kind,fe.id,fe.lang,fe.isTTML,fe.isEmbedded):null;ke&&ke.mode!==L.default.TEXT_DISABLED&&z[ae].setModeForTrackIdx(ye,L.default.TEXT_HIDDEN),z[ae].setCurrentTrackIdx(me),fe=z[ae].getCurrentTextTrackInfo();const xe=x.get().streaming.text.dispatchForManualRendering;if(fe&&!xe&&fe.mode!==L.default.TEXT_DISABLED&&z[ae].setModeForTrackIdx(me,L.default.TEXT_SHOWING),fe&&fe.isFragmented&&!fe.isEmbedded)(function(je,Ge,nt){if(!N[je])return;let ft=N[je].getConfig().fragmentedTracks;for(let bt=0;bt<ft.length;bt++){let qt=ft[bt];if(Ge.lang===qt.lang&&(qt.id?Ge.id===qt.id:Ge.index===qt.index)){let Yt=C.getCurrentTrackFor(L.default.TEXT,je);(qt.id?Yt.id!==qt.id:Yt.index!==qt.index)?(z[je].deleteCuesFromTrackIdx(nt),N[je].setCurrentFragmentedTrackIdx(bt)):nt===-1&&de.trigger(D.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:je,mediaType:L.default.TEXT})}}})(ae,fe,ye);else if(fe&&!fe.isFragmented)(function(je,Ge){de.trigger(D.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Ge},{streamId:je,mediaType:L.default.TEXT})})(ae,fe);else if(!fe&&se){const je=Z(ae);return void(isNaN(je)||Fe(ae,je))}C.setTrack(fe)}function Z(ae){const me=function(ke){return z[ke].getTextTrackInfos().filter((xe,je)=>(xe._indexToSelect=je,!!(xe&&xe.roles&&xe.roles.length>0)&&ne(xe)))}(ae);if(!me||me.length<=0)return NaN;const ye=C.getCurrentTrackFor(L.default.AUDIO,ae);if(!ye)return NaN;const fe=me.find(ke=>ye.lang===ke.lang);return fe?fe._indexToSelect:NaN}function ne(ae){return!(!ae||!ae.roles||ae.roles.length===0)&&ae.roles.some(me=>me.schemeIdUri===L.default.DASH_ROLE_SCHEME_ID&&me.value===w.default.FORCED_SUBTITLE)}function we(ae){return z[ae].getCurrentTrackIdx()}function _e(){N={},z={},Y={},se=!0,ge=!1,Ie=!1}return W={addEmbeddedTrack:function(ae,me){const ye=ae.id;N[ye]&&N[ye].addEmbeddedTrack(me)},addMediaInfosToBuffer:function(ae,me,ye){let fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const ke=ae.id;N[ke]&&N[ke].addMediaInfos(me,ye,fe)},createTracks:function(ae){const me=ae.id;z[me]&&z[me].createTracks()},deactivateStream:function(ae){if(!ae)return;const me=ae.id;N[me]&&N[me].resetMediaInfos(),z[me]&&z[me].deleteAllTextTracks()},enableForcedTextStreaming:function(ae){return(0,Bt.checkParameterType)(ae,"boolean"),he=ae,!0},enableText:function(ae,me){return(0,Bt.checkParameterType)(me,"boolean"),Me()!==me&&(me&&Fe(ae,Y[ae].lastEnabledIndex),me||(Y[ae].lastEnabledIndex=we(ae),ge?Fe(ae,-1):Ie=!0)),!0},getAllTracksAreDisabled:function(){return se},getCurrentTrackIdx:we,getTextSourceBuffer:function(ae){const me=ae.id;if(N&&N[me])return N[me]},initialize:function(){ee=gE(b).create({adapter:T,baseURLController:$}),de.on(D.default.TEXT_TRACKS_QUEUE_INITIALIZED,pe,W),de.on(D.default.DVB_FONT_DOWNLOAD_FAILED,j,W),de.on(D.default.DVB_FONT_DOWNLOAD_COMPLETE,X,W),de.on(D.default.MEDIAINFO_UPDATED,Se,W),x.get().streaming.text.webvtt.customRenderingEnabled&&(de.on(D.default.PLAYBACK_TIME_UPDATED,Ae,W),de.on(D.default.PLAYBACK_SEEKING,be,W))},initializeForStream:function(ae){const me=ae.id,ye=cE(b).create({videoModel:H,settings:x,streamInfo:ae});ye.initialize(),z[me]=ye;const fe=c_(b).create({errHandler:S,adapter:T,dvbFonts:ee,manifestModel:k,mediaController:C,videoModel:H,textTracks:ye,vttParser:G,vttCustomRenderingParser:re,ttmlParser:le,streamInfo:ae,settings:x});fe.initialize(),N[me]=fe,Y[me]={},Y[me].lastEnabledIndex=-1},isTextEnabled:Me,reset:function(){Object.keys(N).forEach(ae=>{N[ae].resetEmbedded(),N[ae].reset()}),ee.reset(),_e(),de.off(D.default.TEXT_TRACKS_QUEUE_INITIALIZED,pe,W),de.off(D.default.DVB_FONT_DOWNLOAD_FAILED,j,W),de.off(D.default.DVB_FONT_DOWNLOAD_COMPLETE,X,W),de.off(D.default.MEDIAINFO_UPDATED,Se,W),x.get().streaming.text.webvtt.customRenderingEnabled&&(de.off(D.default.PLAYBACK_TIME_UPDATED,Ae,W),de.off(D.default.PLAYBACK_SEEKING,be,W))},setTextTrack:Fe,clearDataForStream:function(ae){N[ae]&&(N[ae].resetEmbedded(),N[ae].reset(),delete N[ae]),z[ae]&&(z[ae].deleteAllTextTracks(),delete z[ae]),Y[ae]&&delete Y[ae]}},he=!1,ge=!1,Ie=!1,G=fE(b).getInstance(),re=hE(b).getInstance(),le=Da(b).getInstance(),de=(0,oe.default)(b).getInstance(),V=(0,Le.default)(b).getInstance().getLogger(W),_e(),W}up.__dashjs_factory_name="TextController";var pE=ve.default.getClassFactory(up);function dp(_){_=_||{};const b=this.context,T=(0,Le.default)(b).getInstance(),S=_.settings,k=(0,oe.default)(b).getInstance();let C,$,H,x,W,Y;function N(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function z(le,de,se,he){const ge=Math.pow(.5,se/he.fast);le.fastEstimate=(1-ge)*de+ge*le.fastEstimate;const Ie=Math.pow(.5,se/he.slow);le.slowEstimate=(1-Ie)*de+Ie*le.slowEstimate,le.totalWeight+=se}function G(){C={},$={},H={},x={}}const re={addEntry:function(le,de){try{if(!(le&&de&&de.trace&&de.trace.length))return;(function(ge){C[ge]=C[ge]||[],$[ge]=$[ge]||[],H[ge]=H[ge]||{fastEstimate:0,slowEstimate:0,totalWeight:0},x[ge]=x[ge]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(le);const se=de.tresponse.getTime()-de.trequest.getTime()||1;let he=function(ge,Ie){return ge._fileLoaderType&&ge._fileLoaderType===L.default.FILE_LOADER_TYPES.FETCH?function(ee){const V=ee.trace.reduce((pe,Ae)=>pe+Ae.b[0],0),j=ee.trace.reduce((pe,Ae)=>pe+Ae.d,0);let X=NaN;return S.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(X=N()),isNaN(X)&&(X=Math.round(8*V/j)),{downloadedBytes:V,value:X,downloadTimeInMs:j}}(ge):function(ee,V){let j=NaN,X=NaN,pe=!1;if(S.get().streaming.abr.throughput.useResourceTimingApi&&ee._resourceTimingValues)j=ee._resourceTimingValues.transferSize,X=ee._resourceTimingValues.responseEnd-ee._resourceTimingValues.responseStart,pe=!0;else{if(ee.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};j=ee.trace.reduce((be,Se)=>be+Se.b[0],0)-ee.trace[0].b[0],X=Math.max(ee.trace.reduce((be,Se)=>be+Se.d,0)-ee.trace[0].d,1)}let Ae=NaN;if(!pe&&S.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(Ae=N()),isNaN(Ae)){const be=S.get().streaming.abr.throughput.useDeadTimeLatency?X:X+V;Ae=Math.round(8*j/be)}return{downloadedBytes:j,value:Ae,downloadTimeInMs:X}}(ge,Ie)}(de,se);if(he.latencyInMs=se,isNaN(he.value)||!isFinite(he.value))return;if(de.cmsd){const ge=de.cmsd.dynamic&&de.cmsd.dynamic.etp?de.cmsd.dynamic.etp:null;if(ge){const Ie=S.get().streaming.cmsd.abr.etpWeightRatio;Ie>0&&Ie<=1&&(he.value=he.value*(1-Ie)+ge*Ie)}}if(function(ge,Ie,ee){return S.get().streaming.abr.throughput.useResourceTimingApi&&ee._resourceTimingValues?ee._resourceTimingValues.transferSize===0&&ee._resourceTimingValues.decodedBodySize>0:!isNaN(Ie)&&(ge===L.default.VIDEO?Ie<S.get().streaming.cacheLoadThresholds[L.default.VIDEO]:ge===L.default.AUDIO?Ie<S.get().streaming.cacheLoadThresholds[L.default.AUDIO]:void 0)}(le,de._tfinish.getTime()-de.trequest.getTime(),de))return void Y.debug(`${le} Assuming segment ${de.url} came from cache, ignoring it for throughput calculation`);Y.debug(`Added throughput entry for ${le}: ${he.value} kbit/s`),he.serviceLocation=de._serviceLocation,C[le].push(he),$[le].push({value:se}),function(ge){C[ge].length>S.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&C[ge].shift(),$[ge].length>S.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&$[ge].shift()}(le),k.trigger(te.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:he}),de.type!==Re.HTTPRequest.MPD_TYPE&&(z(H[le],he.value,S.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*he.downloadTimeInMs,W.bandwidthHalfLife),z(x[le],se,1,W.latencyHalfLife))}catch(se){Y.error(se)}},getThroughputDict:function(le){return le?C[le]:C},getEwmaThroughputDict:function(le){return le?H[le]:H},getEwmaLatencyDict:function(le){return le?x[le]:x},getEwmaHalfLife:function(){return W},getLatencyDict:function(le){return le?$[le]:$},reset:G};return Y=T.getLogger(re),W={bandwidthHalfLife:{fast:S.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:S.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:S.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:S.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},G(),re}dp.__dashjs_factory_name="ThroughputModel";var vE=ve.default.getClassFactory(dp);function Ah(){const _=this.context,b=(0,oe.default)(_).getInstance();let T,S,k;function C(){performance.clearResourceTimings()}function $(ge){ge.metric!==O.HTTP_REQUEST||!ge.value||ge.value.type!==Re.HTTPRequest.MPD_TYPE&&(ge.value.type!==Re.HTTPRequest.MEDIA_SEGMENT_TYPE||ge.mediaType!==L.default.AUDIO&&ge.mediaType!==L.default.VIDEO)||T.addEntry(ge.mediaType,ge.value)}function H(ge,Ie){let ee,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN,X=null,pe=T.getEwmaHalfLife(),Ae=null,be=!0;switch(V||(V=k.get().streaming.abr.throughput.averageCalculationMode),ge){case L.default.THROUGHPUT_TYPES.BANDWIDTH:X=V===L.default.THROUGHPUT_CALCULATION_MODES.EWMA?T.getEwmaThroughputDict(Ie):T.getThroughputDict(Ie),Ae=pe.bandwidthHalfLife,be=!0,j=isNaN(j)?S.getIsDynamic()?k.get().streaming.abr.throughput.sampleSettings.live:k.get().streaming.abr.throughput.sampleSettings.vod:j;break;case L.default.THROUGHPUT_TYPES.LATENCY:X=V===L.default.THROUGHPUT_CALCULATION_MODES.EWMA?T.getEwmaLatencyDict(Ie):T.getLatencyDict(Ie),Ae=pe.latencyHalfLife,be=!1,j=isNaN(j)?k.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:j}if(!X||X.length===0)return NaN;switch(V){case L.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return ee=x(X,j,ge),W(X,ee);case L.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return ee=x(X,j,ge),Y(X,ee);case L.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return ee=x(X,j,ge),N(X,ee);case L.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return ee=x(X,j,ge),z(X,ee);case L.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return ee=x(X,j,ge),G(X,ee);case L.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return ee=x(X,j,ge),re(X,ee);case L.default.THROUGHPUT_CALCULATION_MODES.EWMA:return le(X,Ae,be);case L.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return ee=x(X,j,ge),de(X,ee)}}function x(ge,Ie,ee){if(ge){if(Ie>=ge.length)Ie=ge.length;else if(ee===L.default.THROUGHPUT_TYPES.BANDWIDTH&&k.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let V=1;V<Ie;++V){const j=ge[ge.length-V].value/ge[ge.length-V-1].value;if((j>=k.get().streaming.abr.throughput.sampleSettings.increaseScale||j<=k.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(Ie+=1)===ge.length)break}}else Ie=0;return Ie}function W(ge,Ie){let ee=ge;return Ie!==0&&ee&&ee.length!==0?(ee=ee.slice(-Ie),ee.reduce((V,j)=>V+j.value,0)/ee.length):NaN}function Y(ge,Ie){let ee=ge;if(Ie===0||!ee||ee.length===0)return NaN;ee=ee.slice(-Ie);let V=0;return ee.reduce((j,X)=>{let pe=Math.sqrt(X.downloadedBytes);return V+=pe,j+X.value*pe},0)/V}function N(ge,Ie){let ee=ge;if(Ie===0||!ee||ee.length===0)return NaN;ee=ee.slice(-Ie);let V=0;return ee.reduce((j,X,pe)=>{let Ae=pe+1;return V+=Ae,j+X.value*Ae},0)/V}function z(ge,Ie){let ee=ge;if(Ie===0||!ee||ee.length===0)return NaN;ee=ee.slice(-Ie);const V=ee.reduce((j,X)=>j+1/X.value,0);return ee.length/V}function G(ge,Ie){let ee=ge;if(Ie===0||!ee||ee.length===0)return NaN;ee=ee.slice(-Ie);let V=0;const j=ee.reduce((X,pe)=>{let Ae=Math.sqrt(pe.downloadedBytes);return V+=Ae,X+1/pe.value*Ae},0);return V/j}function re(ge,Ie){let ee=ge;if(Ie===0||!ee||ee.length===0)return NaN;ee=ee.slice(-Ie);let V=0;const j=ee.reduce((X,pe,Ae)=>{let be=Ae+1;return V+=be,X+1/pe.value*be},0);return V/j}function le(ge,Ie){let ee=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(!ge||ge.totalWeight<=0)return NaN;const V=ge.fastEstimate/(1-Math.pow(.5,ge.totalWeight/Ie.fast)),j=ge.slowEstimate/(1-Math.pow(.5,ge.totalWeight/Ie.slow));return ee?Math.min(V,j):Math.max(V,j)}function de(ge,Ie){if(Ie===0||!ge||ge.length===0)return NaN;let ee=ge.slice(-Ie).map(pe=>pe.value),V=2/(ee.length+1),j=ee[ee.length-1],X=ee[ee.length-1];for(let pe=0;pe<ee.length;pe++)j=V*ee[pe]+(1-V)*j,X=V*j+(1-V)*X;return X}function se(ge){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const V=H(L.default.THROUGHPUT_TYPES.BANDWIDTH,ge,Ie,ee);return Math.round(V)}const he={getArithmeticMean:W,getAverageLatency:function(ge){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const V=H(L.default.THROUGHPUT_TYPES.LATENCY,ge,Ie,ee);return Math.round(V)},getAverageThroughput:se,getByteSizeWeightedArithmeticMean:Y,getByteSizeWeightedHarmonicMean:G,getDateWeightedArithmeticMean:N,getDateWeightedHarmonicMean:re,getEwma:le,getHarmonicMean:z,getRawThroughputData:function(ge){return ge?T.getThroughputDict(ge):[]},getSafeAverageThroughput:function(ge){let Ie=se(ge,arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN);return isNaN(Ie)||(Ie*=k.get().streaming.abr.throughput.bandwidthSafetyFactor),Ie},getZlema:de,initialize:function(){T=vE(_).create({settings:k}),b.on(te.default.METRIC_ADDED,$,he),performance&&performance.addEventListener("resourcetimingbufferfull",C)},reset:function(){T.reset(),b.off(te.default.METRIC_ADDED,$,he),performance&&performance.removeEventListener("resourcetimingbufferfull",C)},setConfig:function(ge){ge.settings&&(k=ge.settings),ge.playbackController&&(S=ge.playbackController)}};return he}Ah.__dashjs_factory_name="ThroughputController";var yE=ve.default.getSingletonFactory(Ah);function Ec(){const _="You must first call initialize() and set a source before calling this method",b="You must first call initialize() and set a valid source and view before calling this method",T="You must first call attachView() to set the video element before calling this method",S="You must first call attachSource() with a valid source before calling this method",k="MediaPlayer not initialized!",C=this.context,$=(0,oe.default)(C).getInstance();let H=(0,J.default)(C).getInstance();const x=(0,Le.default)(C).getInstance({settings:H});let W,Y,N,z,G,re,le,de,se,he,ge,Ie,ee,V,j,X,pe,Ae,be,Se,Me,Fe,Z,ne,we,_e,ae,me,ye,fe,ke,xe,je,Ge,nt,ft,bt,qt,Yt,mn,Nn;function Ft(){en(null),Qt(null),z=null,j&&(j.reset(),j=null),X&&(X.reset(),X=null),Me&&Me.reset(),H.reset(),Ae&&(Ae.reset(),Ae=null)}function gn(){return!!N&&!!bt.getElement()}function Sn(){return(0,dc.getVersionString)()}function wn(){if(!le)throw b;return ye.isPaused()}function On(){if(!le)throw b;return ye.getIsDynamic()}function We(Ce){const et=_e&&_e.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO;let yt=je.getCurrentDVRInfo(et);return yt?ht(yt.range.start+Ce,yt):0}function ht(Ce,et){let yt=ye.getOriginalLiveDelay();return Ce>et.range.end-yt&&(Ce=et.range.end-yt),Ce}function ct(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!le)throw b;let et=mt().currentTime;return Ce!==""&&(et=_e.getTimeRelativeToStreamId(et,Ce)),et}function _t(Ce){(0,Bt.checkParameterType)(Ce,"boolean"),de=Ce}function Gt(){Me.restoreDefaultUTCTimingSources()}function In(){return je}function mt(){if(!bt.getElement())throw T;return bt.getElement()}function Qt(Ce){if(!G)throw k;bt.setElement(Ce),Ce&&(Zt(),function(){if(X||typeof dashjs>"u")return;let et=dashjs.MetricsReporting;typeof et=="function"&&(X=et(C).create().createMetricsReporting({debug:x,eventBus:$,mediaElement:mt(),adapter:be,dashMetrics:je,mediaPlayerModel:Se,events:D.default,constants:L.default,metricsConstants:O}))}(),function(){if(pe||typeof dashjs>"u")return;let et=dashjs.MssHandler;typeof et=="function"&&(Q.extend(et.errors),pe=et(C).create({eventBus:$,mediaPlayerModel:Se,dashMetrics:je,manifestModel:Ge,playbackController:ye,streamController:_e,protectionController:j,baseURLController:Z,errHandler:Fe,events:D.default,constants:L.default,debug:x,initSegmentType:Re.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:_h,ISOBoxer:Tu,settings:H}))}(),_e&&_e.switchToVideoElement(se)),le&&rt(),pt(se)}function ln(Ce){if(!re)throw _;let et=_e.getActiveStreamInfo();return et?V.getTracksFor(Ce,et.id).filter(yt=>!j||j.areKeyIdsUsable(yt.normalizedKeyIds)):[]}function en(Ce){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!G)throw k;typeof Ce=="string"&&qt.initialize(Ce),et==null&&(et=NaN),isNaN(et)||(et=Math.max(0,et)),se=et,N=Ce,(re||le)&&rt(),gn()&&pt(se)}function Wt(){if(!re)throw _;let Ce=_e.getActiveStreamInfo();return Ce?_e.getStreamById(Ce.id):null}function rt(){le=!1,re=!1,be.reset(),_e.reset(),me.reset(),xe.reset(),ye.reset(),fe.reset(),ke.reset(),he.reset(),ge.reset(),V.reset(),mn.reset(),j&&(H.get().streaming.protection.keepProtectionMediaKeys?j.stop():(j.reset(),j=null,Zt())),ae.reset(),nt.reset(),ft.reset()}function Ct(){return to(C).create({debug:x,errHandler:Fe,dashMetrics:je,mediaPlayerModel:Se,mssHandler:pe,settings:H})}function Zt(){if(j)return j;if(typeof dashjs>"u")return null;let Ce=dashjs.Protection;if(typeof Ce=="function"){let et=Ce(C).create();return D.default.extend(Ce.events),te.default.extend(Ce.events,{publicOnly:!0}),Q.extend(Ce.errors),j=et.createProtectionSystem({debug:x,errHandler:Fe,videoModel:bt,customParametersModel:Me,capabilities:ne,eventBus:$,events:D.default,BASE64:_h,constants:L.default,cmcdModel:nt,settings:H}),ne||(ne=(0,Fg.default)(C).getInstance()),ne.setProtectionController(j),j}return null}function rn(){if(!G)throw k;if(Ae)return Ae;if(typeof dashjs>"u")return null;let Ce=dashjs.OfflineController;if(typeof Ce=="function"){D.default.extend(Ce.events),te.default.extend(Ce.events,{publicOnly:!0}),Q.extend(Ce.errors);const et=Ct(),yt=Eg(C).create();return yt.setConfig({manifestModel:Ge,adapter:be,manifestLoader:et,errHandler:Fe,contentSteeringController:ke}),Ae=Ce(C).create({debug:x,manifestUpdater:yt,baseURLController:Z,manifestLoader:et,manifestModel:Ge,mediaPlayerModel:Se,abrController:he,playbackController:ye,adapter:be,errHandler:Fe,dashMetrics:je,timelineConverter:ee,segmentBaseController:mn,schemeLoaderFactory:Ie,eventBus:$,events:D.default,errors:Q,constants:L.default,settings:H,dashConstants:w.default,urlUtils:hn(C).getInstance()}),Ae}return null}function pt(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ae&&Ae.resetRecords(),!re&&N&&(re=!0,Y.info("Streaming Initialized"),function(){const et=Ct();_e||(_e=Ag(C).getInstance()),ae||(ae=pE(C).create({errHandler:Fe,manifestModel:Ge,adapter:be,mediaController:V,baseURLController:Z,videoModel:bt,settings:H})),we.setConfig({capabilities:ne,customParametersModel:Me,adapter:be,settings:H,protectionController:j,manifestModel:Ge,errHandler:Fe}),_e.setConfig({capabilities:ne,capabilitiesFilter:we,manifestLoader:et,manifestModel:Ge,mediaPlayerModel:Se,customParametersModel:Me,protectionController:j,textController:ae,adapter:be,dashMetrics:je,errHandler:Fe,timelineConverter:ee,videoModel:bt,playbackController:ye,serviceDescriptionController:fe,contentSteeringController:ke,abrController:he,throughputController:ge,mediaController:V,settings:H,baseURLController:Z,uriFragmentModel:qt,segmentBaseController:mn}),me.setConfig({settings:H,playbackController:ye,streamController:_e,videoModel:bt,timelineConverter:ee,adapter:be}),ye.setConfig({streamController:_e,serviceDescriptionController:fe,dashMetrics:je,adapter:be,videoModel:bt,timelineConverter:ee,settings:H}),xe.setConfig({streamController:_e,playbackController:ye,mediaPlayerModel:Se,videoModel:bt,settings:H}),ge.setConfig({settings:H,playbackController:ye}),he.setConfig({streamController:_e,capabilities:ne,domStorage:Yt,mediaPlayerModel:Se,customParametersModel:Me,throughputController:ge,cmsdModel:ft,dashMetrics:je,adapter:be,videoModel:bt,settings:H}),nt.setConfig({abrController:he,dashMetrics:je,playbackController:ye,serviceDescriptionController:fe,throughputController:ge}),Nn.setConfig({serviceDescriptionController:fe}),ft.setConfig({}),V.initialize(),ge.initialize(),he.initialize(),_e.initialize(de,z),ae.initialize(),me.initialize(),xe.initialize(),nt.initialize(de),ft.initialize(),ke.initialize(),mn.initialize()}(),typeof N=="string"?_e.load(N,Ce):_e.loadWithManifest(N,Ce)),!le&&gn()&&(le=!0,$.trigger(te.default.PLAYBACK_INITIALIZED),Y.info("Playback Initialized"))}return W={addABRCustomRule:function(Ce,et,yt){Me.addAbrCustomRule(Ce,et,yt)},addRequestInterceptor:function(Ce){Me.addRequestInterceptor(Ce)},addResponseInterceptor:function(Ce){Me.addResponseInterceptor(Ce)},addUTCTimingSource:function(Ce,et){Me.addUTCTimingSource(Ce,et)},attachProtectionController:function(Ce){j=Ce},attachSource:en,attachTTMLRenderingDiv:function(Ce){if(!bt.getElement())throw T;bt.setTTMLRenderingDiv(Ce)},attachView:Qt,attachVttRenderingDiv:function(Ce){if(!bt.getElement())throw T;bt.setVttRenderingDiv(Ce)},clearDefaultUTCTimingSources:function(){Me.clearDefaultUTCTimingSources()},convertToTimeCode:function(Ce){Ce=Math.max(Ce,0);let et=Math.floor(Ce/3600),yt=Math.floor(Ce%3600/60),tt=Math.floor(Ce%3600%60);return(et===0?"":et<10?"0"+et.toString()+":":et.toString()+":")+(yt<10?"0"+yt.toString():yt.toString())+":"+(tt<10?"0"+tt.toString():tt.toString())},destroy:function(){Ft(),ve.default.deleteSingletonInstances(C)},duration:function(){if(!le)throw b;let Ce=mt().duration;if(ye.getIsDynamic()){const et=_e&&_e.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO;let yt=je.getCurrentDVRInfo(et);Ce=yt?yt.range.end-yt.range.start:0}return Ce},enableForcedTextStreaming:function(Ce){return!(!_e.getActiveStreamInfo()||!ae)&&ae.enableForcedTextStreaming(Ce)},enableText:function(Ce){const et=_e.getActiveStreamInfo();return!(!et||!ae)&&ae.enableText(et.id,Ce)},extend:function(Ce,et,yt){ve.default.extend(Ce,et,yt,C)},formatUTC:function(Ce,et,yt){let tt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];const zt=new Date(1e3*Ce),Jt=zt.toLocaleDateString(et),kn=zt.toLocaleTimeString(et,{hour12:yt});return tt?kn+" "+Jt:kn},getABRCustomRules:function(){return Me.getAbrCustomRules()},getActiveStream:Wt,getAutoPlay:function(){return de},getAvailableBaseUrls:function(){const Ce=Ge.getValue();return Ce?Z.getBaseUrls(Ce):[]},getAvailableLocations:function(){const Ce=Ge.getValue();if(!Ce)return[];const et=be.getLocation(Ce),yt=ke.getSynthesizedLocationElements(et);return et.concat(yt)},getAverageLatency:function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L.default.VIDEO,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return ge?ge.getAverageLatency(Ce,et,yt):0},getAverageThroughput:function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L.default.VIDEO,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return ge?ge.getAverageThroughput(Ce,et,yt):0},getBufferLength:function(Ce){const et=[L.default.VIDEO,L.default.AUDIO,L.default.TEXT];if(Ce)return et.indexOf(Ce)!==-1?In().getCurrentBufferLevel(Ce)||NaN:(Y.warn("getBufferLength requested for invalid type"),NaN);{const yt=et.map(tt=>ln(tt).length>0?In().getCurrentBufferLevel(tt):Number.MAX_VALUE).reduce((tt,zt)=>Math.min(tt,zt));return yt===Number.MAX_VALUE?NaN:yt}},getCurrentLiveLatency:function(){if(!G)throw k;return le?ye.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(Ce){if(!re)throw _;if(Ce!==L.default.IMAGE&&Ce!==L.default.VIDEO&&Ce!==L.default.AUDIO)return null;const et=Wt();if(!et)return null;if(Ce===L.default.IMAGE){const yt=et.getThumbnailController();return yt?yt.getCurrentTrack():-1}return et.getCurrentRepresentationForType(Ce)},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let Ce=NaN;const et=_e.getActiveStreamInfo();if(et&&ae)return Ce=ae.getCurrentTrackIdx(et.id),Ce},getCurrentTrackFor:function(Ce){if(!re)throw _;let et=_e.getActiveStreamInfo();return et?V.getCurrentTrackFor(Ce,et.id):null},getDashAdapter:function(){return be},getDashMetrics:In,getDebug:function(){return x},getDvrSeekOffset:We,getDvrWindow:function(){if(!le)throw b;const Ce=_e&&_e.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO;let et=je.getCurrentDVRInfo(Ce);if(!et)return{};let yt=0;const tt=ye.getIsDynamic();return tt&&(yt=et.manifestInfo.availableFrom.getTime()/1e3),{start:et.range.start,end:et.range.end,startAsUtc:tt?yt+et.range.start:NaN,endAsUtc:tt?yt+et.range.end:NaN,size:et.range.end-et.range.start}},getInitialMediaSettingsFor:function(Ce){if(!G)throw k;return V.getInitialSettings(Ce)},getLowLatencyModeEnabled:function(){if(!le)throw b;return ye.getLowLatencyModeEnabled()},getManifest:function(){return Ge.getValue()},getOfflineController:function(){return rn()},getPlaybackRate:function(){return mt().playbackRate},getProtectionController:function(){return Zt()},getRawThroughputData:function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L.default.VIDEO;return ge?ge.getRawThroughputData(Ce):[]},getRepresentationsByType:function(Ce){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!re)throw _;let yt=et?_e.getStreamById(et):Wt();return yt?yt.getRepresentationsByType(Ce):[]},getSafeAverageThroughput:function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L.default.VIDEO,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return ge?ge.getSafeAverageThroughput(Ce,et,yt):0},getSettings:function(){return H.get()},getSource:function(){if(!N)throw S;return N},getStreamsFromManifest:function(Ce){if(!re)throw _;return be.getStreamsInfo(Ce)},getTTMLRenderingDiv:function(){return bt?bt.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!le)throw b;return ye.getOriginalLiveDelay()},getTracksFor:ln,getTracksForTypeFromManifest:function(Ce,et,yt){if(!re)throw _;return(yt=yt||be.getStreamsInfo(et,1)[0])?be.getAllMediaInfoForType(yt,Ce,et):[]},getVersion:Sn,getVideoElement:mt,getVolume:function(){return mt().volume},getXHRWithCredentialsForType:function(Ce){return Me.getXHRWithCredentialsForType(Ce)},initialize:function(Ce,et,yt){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;ne||(ne=(0,Fg.default)(C).getInstance(),ne.setConfig({settings:H,protectionController:j})),Fe||(Fe=Og(C).getInstance()),ne.supportsMediaSource()?(G||(G=!0,ee=nE(C).getInstance(),ge||(ge=yE(C).getInstance()),he||(he=Gg(C).getInstance()),Ie||(Ie=yy(C).getInstance()),ye||(ye=Ue(C).getInstance()),V||(V=Iu(C).getInstance()),_e||(_e=Ag(C).getInstance()),me||(me=a_(C).getInstance()),xe||(xe=Au(C).getInstance()),fe||(fe=Vf(C).getInstance()),ke||(ke=$f(C).getInstance()),we||(we=Mo(C).getInstance()),be=ep(C).getInstance(),Ge=Wa(C).getInstance(),nt=$d(C).getInstance(),ft=fy(C).getInstance(),Nn=gy(C).getInstance(),je=bh(C).getInstance({settings:H}),Yt=Ps(C).getInstance({settings:H}),be.setConfig({constants:L.default,cea608parser:new ie,errHandler:Fe,BASE64:_h}),Z||(Z=s_(C).create()),Z.setConfig({adapter:be,contentSteeringController:ke}),fe.setConfig({adapter:be}),mn||(mn=ph(C).getInstance({dashMetrics:je,mediaPlayerModel:Se,errHandler:Fe,baseURLController:Z,events:D.default,eventBus:$,debug:x,boxParser:Hd(C).getInstance(),errors:Q})),V.setConfig({domStorage:Yt,settings:H,mediaPlayerModel:Se,customParametersModel:Me,videoModel:bt}),Se.setConfig({playbackController:ye,serviceDescriptionController:fe}),ke.setConfig({adapter:be,errHandler:Fe,dashMetrics:je,mediaPlayerModel:Se,manifestModel:Ge,serviceDescriptionController:fe,throughputController:ge,eventBus:$}),Gt(),_t(yt===void 0||yt),rn()),Ce&&Qt(Ce),et&&en(et,tt),Y.info("[dash.js "+Sn()+"] MediaPlayer has been initialized")):Fe.error(new Pe.default(Q.CAPABILITY_MEDIASOURCE_ERROR_CODE,Q.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:On,isMuted:function(){return mt().muted},isPaused:wn,isReady:gn,isSeeking:function(){if(!le)throw b;return ye.isSeeking()},isTextEnabled:function(){const Ce=_e.getActiveStreamInfo();return!(!Ce||!ae)&&ae.isTextEnabled(Ce)},off:function(Ce,et,yt){$.off(Ce,et,yt)},on:function(Ce,et,yt,tt){$.on(Ce,et,yt,tt)},pause:function(){if(!le)throw b;ye.pause()},play:function(){if(!le)throw b;(!de||wn()&&le)&&ye.play(!0)},preload:function(){if(!bt.getElement()&&!re){if(!N)throw S;pt(se)}},provideThumbnail:function(Ce,et){if(typeof et!="function")return;if(Ce<0)return void et(null);const yt=ye.getIsDynamic()?We(Ce):Ce,tt=_e.getStreamForTime(yt);if(tt===null)return void et(null);const zt=tt.getThumbnailController();if(zt)return zt.provide(yt,et);et(null)},refreshManifest:function(Ce){if(!G)throw k;if(!gn())return Ce(null,S);let et=this;if(typeof Ce=="function"){const yt=function(tt){$.off(D.default.INTERNAL_MANIFEST_LOADED,yt,et),tt.error?Ce(null,tt.error):Ce(tt.manifest)};$.on(D.default.INTERNAL_MANIFEST_LOADED,yt,et)}_e.refreshManifest()},registerCustomCapabilitiesFilter:function(Ce){Me.registerCustomCapabilitiesFilter(Ce)},registerLicenseRequestFilter:function(Ce){Me.registerLicenseRequestFilter(Ce)},registerLicenseResponseFilter:function(Ce){Me.registerLicenseResponseFilter(Ce)},removeABRCustomRule:function(Ce){Me.removeAbrCustomRule(Ce)},removeAllABRCustomRule:function(){Me.removeAllAbrCustomRule()},removeRequestInterceptor:function(Ce){Me.removeRequestInterceptor(Ce)},removeResponseInterceptor:function(Ce){Me.removeResponseInterceptor(Ce)},removeUTCTimingSource:function(Ce,et){Me.removeUTCTimingSource(Ce,et)},reset:Ft,resetCustomInitialTrackSelectionFunction:function(){Me.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){H.reset()},restoreDefaultUTCTimingSources:Gt,retrieveManifest:function(Ce,et){let yt=Ct(),tt=this;const zt=function(Jt){Jt.error?et(null,Jt.error):et(Jt.manifest),$.off(D.default.INTERNAL_MANIFEST_LOADED,zt,tt),yt.reset()};$.on(D.default.INTERNAL_MANIFEST_LOADED,zt,tt),qt.initialize(Ce),yt.load(Ce)},seek:function(Ce){if(!le)throw b;if((0,Bt.checkParameterType)(Ce,"number"),isNaN(Ce))throw L.default.BAD_ARGUMENT_ERROR;Ce<0&&(Ce=0);let et=ye.getIsDynamic()?We(Ce):Ce;const yt=mt();!ye.getIsDynamic()&&yt.duration&&(et=Math.min(yt.duration,et)),ye.seek(et,!1,!1,!0)},seekToOriginalLive:function(){le&&On()&&ye.seekToOriginalLive()},seekToPresentationTime:function(Ce){if(!le)throw b;if((0,Bt.checkParameterType)(Ce,"number"),isNaN(Ce))throw L.default.BAD_ARGUMENT_ERROR;Ce<0&&(Ce=0);const et=mt();if(!ye.getIsDynamic()&&et.duration&&(Ce=Math.min(et.duration,Ce)),ye.getIsDynamic()){const yt=_e&&_e.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO;let tt=je.getCurrentDVRInfo(yt);if(!tt)return;(Ce=ht(Ce,tt))<tt.range.start&&(Ce=tt.range.start)}ye.seek(Ce,!1,!1,!0)},setAutoPlay:_t,setConfig:function(Ce){Ce&&(Ce.capabilities&&(ne=Ce.capabilities),Ce.capabilitiesFilter&&(we=Ce.capabilitiesFilter),Ce.streamController&&(_e=Ce.streamController),Ce.textController&&(ae=Ce.textController),Ce.gapController&&(me=Ce.gapController),Ce.throughputController&&(ge=Ce.throughputController),Ce.playbackController&&(ye=Ce.playbackController),Ce.serviceDescriptionController&&(fe=Ce.serviceDescriptionController),Ce.contentSteeringController&&(ke=Ce.contentSteeringController),Ce.clientDataReportingController&&(Nn=Ce.clientDataReportingController),Ce.catchupController&&(xe=Ce.catchupController),Ce.mediaPlayerModel&&(Se=Ce.mediaPlayerModel),Ce.customParametersModel&&(Me=Ce.customParametersModel),Ce.abrController&&(he=Ce.abrController),Ce.schemeLoaderFactory&&(Ie=Ce.schemeLoaderFactory),Ce.mediaController&&(V=Ce.mediaController),Ce.settings&&(H=Ce.settings),Ce.dashMetrics&&(je=Ce.dashMetrics))},setCurrentTrack:function(Ce){let et=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!re)throw _;!j||j.areKeyIdsUsable(Ce.normalizedKeyIds)?V.setTrack(Ce,{noSettingsSave:et}):Y.error(`Can not switch to track with index ${Ce.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(Ce){Me.setCustomInitialTrackSelectionFunction(Ce)},setInitialMediaSettingsFor:function(Ce,et){if(!G)throw k;let yt=function(tt){const zt=H.get().streaming.defaultSchemeIdUri;let Jt={};function kn(jn,xn,Tr){let zr={};if(xn){if(xn instanceof Array)throw"Array type not supported for settings!";return xn instanceof Object?(zr.schemeIdUri=xn.schemeIdUri?xn.schemeIdUri:"",zr.value=xn.value?xn.value:""):(zr.schemeIdUri=Tr,zr.value=xn,Y.warn("No schemeIdUri provided for "+jn+', using default "'+Tr+'"')),zr}return null}return tt.id!==void 0&&(Jt.id=tt.id),tt.lang!==void 0&&(Jt.lang=tt.lang),isNaN(tt.index)||(Jt.index=tt.index),tt.viewpoint!==void 0&&(Jt.viewpoint=kn("viewpoint",tt.viewpoint,zt.viewpoint)),tt.audioChannelConfiguration!==void 0&&(Jt.audioChannelConfiguration=kn("audioChannelConfiguration",tt.audioChannelConfiguration,zt.audioChannelConfiguration)),tt.role!==void 0&&(Jt.role=kn("role",tt.role,zt.role),Jt.role.schemeIdUri===L.default.DASH_ROLE_SCHEME_ID&&Jt.role.value==="Main"&&(Jt.role.value=w.default.MAIN)),tt.accessibility!==void 0&&(Jt.accessibility=kn("accessibility",tt.accessibility,zt.accessibility)),Jt}(et);V.setInitialSettings(Ce,yt)},setMute:function(Ce){(0,Bt.checkParameterType)(Ce,"boolean"),mt().muted=Ce},setPlaybackRate:function(Ce){mt().playbackRate=Ce},setProtectionData:function(Ce){z=Ce,_e&&_e.setProtectionData(z)},setRepresentationForTypeById:function(Ce,et){let yt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Ce!==L.default.IMAGE&&Ce!==L.default.VIDEO&&Ce!==L.default.AUDIO)return;if(!re)throw _;const tt=Wt();if(tt)if(Ce===L.default.IMAGE){const zt=tt.getThumbnailController();zt&&zt.setTrackById(et)}else{const zt=tt.getRepresentationForTypeById(Ce,et);zt&&he.setPlaybackQuality(Ce,_e.getActiveStreamInfo(),zt,{forceReplace:yt})}},setRepresentationForTypeByIndex:function(Ce,et){let yt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Ce!==L.default.IMAGE&&Ce!==L.default.VIDEO&&Ce!==L.default.AUDIO)return;if(!re)throw _;const tt=Wt();if(tt)if(Ce===L.default.IMAGE){const zt=tt.getThumbnailController();zt&&zt.setTrackByIndex(et)}else{const zt=tt.getRepresentationForTypeByIndex(Ce,et);zt&&he.setPlaybackQuality(Ce,_e.getActiveStreamInfo(),zt,{forceReplace:yt})}},setTextTrack:function(Ce){if(!le)throw b;const et=_e.getActiveStreamInfo();et&&ae&&ae.setTextTrack(et.id,Ce)},setVolume:function(Ce){if(typeof Ce!="number"||isNaN(Ce)||Ce<0||Ce>1)throw L.default.BAD_ARGUMENT_ERROR;mt().volume=Ce},setXHRWithCredentialsForType:function(Ce,et){Me.setXHRWithCredentialsForType(Ce,et)},time:ct,timeAsUTC:function(){if(!le)throw b;if(!ye.getIsDynamic()||ct()<0)return NaN;const Ce=_e&&_e.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO;let et,yt,tt=je.getCurrentDVRInfo(Ce);return tt?(et=tt.manifestInfo.availableFrom.getTime()/1e3,yt=et+ct(),yt):0},timeInDvrWindow:function(){if(!le)throw b;if(!ye.getIsDynamic())return ct();let Ce=mt().currentTime;const et=_e&&_e.hasVideoTrack()?L.default.VIDEO:L.default.AUDIO;let yt=je.getCurrentDVRInfo(et);return Ce=yt===null||Ce===0?0:Math.max(0,Ce-yt.range.start),Ce},trigger:function(Ce,et,yt){$.trigger(Ce,et,yt)},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(Ce){Me.unregisterCustomCapabilitiesFilter(Ce)},unregisterLicenseRequestFilter:function(Ce){Me.unregisterLicenseRequestFilter(Ce)},unregisterLicenseResponseFilter:function(Ce){Me.unregisterLicenseResponseFilter(Ce)},updateSettings:function(Ce){H.update(Ce)},updateSource:function(Ce){N=Ce,_e.load(N)}},Y=x.getLogger(W),G=!1,le=!1,re=!1,de=!0,se=NaN,j=null,Ae=null,z=null,be=null,mn=null,D.default.extend(te.default),Se=Pl(C).getInstance(),Me=(0,Of.default)(C).getInstance(),bt=Kg(C).getInstance(),qt=ah(C).getInstance(),W}Ec.__dashjs_factory_name="MediaPlayer";const bc=ve.default.getClassFactory(Ec);bc.events=te.default,bc.errors=Q,ve.default.updateClassFactory(Ec.__dashjs_factory_name,bc);var EE=bc},1191:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let o=new i;e.default=o},5212:function(n,e,t){t.r(e),e.default={STREAM:"stream",VIDEO:"video",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(n,e,t){t.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(n,e,t){t.r(e),t.d(e,{default:function(){return K}});class r{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00";var i=r,o=t(913),l=t(138);function d(Ee){let ce,He;const ut=(Ee=Ee||{}).eventBus,Ve=Ee.dashMetrics,Je=Ee.metricsConstants,Ke=Ee.events;function it(fn){let Ht=new i;if(He){for(const nr in fn)fn.hasOwnProperty(nr)&&(Ht[nr]=fn[nr]);Ht.mpdurl||(Ht.mpdurl=He.originalUrl||He.url),Ht.terror||(Ht.terror=new Date),Ve.addDVBErrors(Ht)}}function Et(fn){fn.error||(He=fn.manifest)}function ot(fn){it({errorcode:i.BASE_URL_CHANGED,servicelocation:fn.entry})}function xt(){it({errorcode:i.BECAME_REPORTER})}function En(fn){var Ht;fn.metric===Je.HTTP_REQUEST&&((Ht=fn.value).responsecode===0||Ht.responsecode==null||Ht.responsecode>=400||Ht.responsecode<100||Ht.responsecode>=600)&&it({errorcode:Ht.responsecode||i.CONNECTION_ERROR,url:Ht.url,terror:Ht.tresponse,servicelocation:Ht._serviceLocation})}function tn(fn){let Ht;switch(fn.error?fn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Ht=i.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Ht=i.CORRUPT_MEDIA_OTHER;break;default:return}it({errorcode:Ht})}return ce={initialize:function(){ut.on(Ke.MANIFEST_UPDATED,Et,ce),ut.on(Ke.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ot,ce),ut.on(Ke.METRIC_ADDED,En,ce),ut.on(Ke.METRIC_UPDATED,En,ce),ut.on(Ke.PLAYBACK_ERROR,tn,ce),ut.on(o.default.BECAME_REPORTING_PLAYER,xt,ce)},reset:function(){ut.off(Ke.MANIFEST_UPDATED,Et,ce),ut.off(Ke.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ot,ce),ut.off(Ke.METRIC_ADDED,En,ce),ut.off(Ke.METRIC_UPDATED,En,ce),ut.off(Ke.PLAYBACK_ERROR,tn,ce),ut.off(o.default.BECAME_REPORTING_PLAYER,xt,ce)}},ce}d.__dashjs_factory_name="DVBErrorsTranslator";var c=l.default.getSingletonFactory(d),f=t(7377);function m(Ee){Ee=Ee||{};let ce,He,ut=!1,Ve=this.context,Je=Ee.mediaElement;return ce={initialize:function(Ke){Ke&&Ke.length&&(Ke.forEach(it=>{let Et=it.starttime,ot=Et+it.duration;He.add(Et,ot)}),ut=!!Ke[0]._useWallClockTime)},reset:function(){He.clear()},isEnabled:function(){let Ke,it=He.length;if(!it)return!0;Ke=ut?new Date().getTime()/1e3:Je.currentTime;for(let Et=0;Et<it;Et+=1){let ot=He.start(Et),xt=He.end(Et);if(ot<=Ke&&Ke<xt)return!0}return!1}},He=(0,f.default)(Ve).create(),ce}m.__dashjs_factory_name="RangeController";var g=l.default.getClassFactory(m);function p(){return{serialise:function Ee(ce){let He,ut,Ve=[],Je=[];for(He in ce)if(ce.hasOwnProperty(He)&&He.indexOf("_")!==0){if(ut=ce[He],ut==null&&(ut=""),Array.isArray(ut)){if(!ut.length)continue;Je=[],ut.forEach(function(Ke){let it=Object.prototype.toString.call(Ke).slice(8,-1)!=="Object";Je.push(it?Ke:Ee(Ke))}),ut=Je.map(encodeURIComponent).join(",")}else typeof ut=="string"?ut=encodeURIComponent(ut):ut instanceof Date?ut=ut.toISOString():typeof ut=="number"&&(ut=Math.round(ut));Ve.push(He+"="+ut)}return Ve.join("&")}}}p.__dashjs_factory_name="MetricSerialiser";var y=l.default.getSingletonFactory(p);function v(){let Ee,ce,He,ut=window.crypto||window.msCrypto,Ve=Uint32Array,Je=Math.pow(2,8*Ve.BYTES_PER_ELEMENT)-1;function Ke(){ut&&(Ee||(Ee=new Ve(10)),ut.getRandomValues(Ee),ce=0)}return He={random:function(it,Et){let ot;return it||(it=0),Et||(Et=1),ut?(ce===Ee.length&&Ke(),ot=Ee[ce]/Je,ce+=1):ot=Math.random(),ot*(Et-it)+it}},Ke(),He}v.__dashjs_factory_name="RNG";var A=l.default.getSingletonFactory(v),I=t(1926);function P(Ee){let ce;Ee=Ee||{};let He,ut,Ve,Je,Ke,it,Et,ot=this.context,xt=[];const En=Ee.metricsConstants;function tn(){Je=!1,Ke=!1,it=null,Et=null}return ce={report:function(fn,Ht){Array.isArray(Ht)||(Ht=[Ht]),Ke&&Et.isEnabled()&&Ht.forEach(function(nr){let vr=He.serialise(nr);fn!==En.DVB_ERRORS&&(vr=`metricname=${fn}&${vr}`),vr=`${it}?${vr}`,function(Fr,Lr,mr){let ki=new XMLHttpRequest;ki.withCredentials=ut.getXHRWithCredentialsForType(En.HTTP_REQUEST_DVB_REPORTING_TYPE);const $t=function(){let Bt=xt.indexOf(ki);Bt!==-1&&(xt.splice(Bt,1),!(ki.status>=200&&ki.status<300)&&mr&&mr())};xt.push(ki);try{ki.open("GET",Fr),ki.onloadend=$t,ki.onerror=$t,ki.send()}catch{ki.onerror()}}(vr,0,function(){Ke=!1})})},initialize:function(fn,Ht){let nr;if(Et=Ht,it=fn.dvbReportingUrl,!it)throw new Error("required parameter missing (dvb:reportingUrl)");Je||(nr=fn.dvbProbability,nr&&(nr===1e3||nr/1e3>=Ve.random())&&(Ke=!0),Je=!0)},reset:function(){tn()}},He=y(ot).getInstance(),Ve=A(ot).getInstance(),ut=(0,I.default)(ot).getInstance(),tn(),ce}P.__dashjs_factory_name="DVBReporting";var U=l.default.getClassFactory(P);function M(Ee){Ee=Ee||{};const ce={"urn:dvb:dash:reporting:2014":U},He=this.context;let ut;const Ve=Ee.debug?Ee.debug.getLogger(ut):{},Je=Ee.metricsConstants,Ke=Ee.mediaPlayerModel||{};return ut={create:function(it,Et){let ot;try{ot=ce[it.schemeIdUri](He).create({metricsConstants:Je,mediaPlayerModel:Ke}),ot.initialize(it,Et)}catch(xt){ot=null,Ve.error(`ReportingFactory: could not create Reporting with schemeIdUri ${it.schemeIdUri} (${xt.message})`)}return ot},register:function(it,Et){ce[it]=Et},unregister:function(it){delete ce[it]}},ut}M.__dashjs_factory_name="ReportingFactory";var B=l.default.getSingletonFactory(M);function ie(Ee){let ce,He=[];const ut=B(this.context).getInstance(Ee);return ce={initialize:function(Ve,Je){Ve.some(Ke=>{let it=ut.create(Ke,Je);if(it)return He.push(it),!0})},reset:function(){He.forEach(Ve=>Ve.reset()),He=[]},report:function(Ve,Je){He.forEach(Ke=>Ke.report(Ve,Je))}},ce}ie.__dashjs_factory_name="ReportingController";var L=l.default.getClassFactory(ie);function w(){return{reconstructFullMetricName:function(Ee,ce,He){let ut=Ee;return ce&&(ut+="("+ce,He&&He.length&&(ut+=","+He),ut+=")"),ut},validateN:function(Ee){if(!Ee)throw new Error("missing n");if(isNaN(Ee))throw new Error("n is NaN");if(Ee<0)throw new Error("n must be positive");return Ee}}}w.__dashjs_factory_name="HandlerHelpers";var O=l.default.getSingletonFactory(w);function oe(Ee){let ce,He,ut,Ve,Je,Ke;Ee=Ee||{};let it=this.context,Et=O(it).getInstance(),ot=[];const xt=Ee.metricsConstants;function En(){let tn=function(){try{return Object.keys(ot).map(fn=>ot[fn]).reduce((fn,Ht)=>fn.level<Ht.level?fn:Ht)}catch{return}}();tn&&Ke!==tn.t&&(Ke=tn.t,He.report(Ve,tn))}return ce={initialize:function(tn,fn,Ht){fn&&(ut=Et.validateN(Ht),He=fn,Ve=Et.reconstructFullMetricName(tn,Ht),Je=setInterval(En,ut))},reset:function(){clearInterval(Je),Je=null,ut=0,He=null,Ke=null},handleNewMetric:function(tn,fn,Ht){tn===xt.BUFFER_LEVEL&&(ot[Ht]=fn)}},ce}oe.__dashjs_factory_name="BufferLevelHandler";var D=l.default.getClassFactory(oe),ve=l.default.getClassFactory(function(Ee){let ce,He,ut=(Ee=Ee||{}).eventBus;const Ve=Ee.metricsConstants;function Je(){ut.off(o.default.METRICS_INITIALISATION_COMPLETE,Je,this),ut.trigger(o.default.BECAME_REPORTING_PLAYER)}return ce={initialize:function(Ke,it){it&&(He=it,ut.on(o.default.METRICS_INITIALISATION_COMPLETE,Je,this))},reset:function(){He=null},handleNewMetric:function(Ke,it){Ke===Ve.DVB_ERRORS&&He&&He.report(Ke,it)}},ce});function Le(Ee){let ce,He,ut,Ve,Je,Ke;Ee=Ee||{};let it=[],Et=O(this.context).getInstance();const ot=Ee.metricsConstants;function xt(){var En=it;En.length&&He&&He.report(Je,En),it=[]}return ce={initialize:function(En,tn,fn,Ht){tn&&(ut=Et.validateN(fn),He=tn,Ht&&Ht.length&&(Ve=Ht),Je=Et.reconstructFullMetricName(En,fn,Ht),Ke=setInterval(xt,ut))},reset:function(){clearInterval(Ke),Ke=null,ut=null,Ve=null,it=[],He=null},handleNewMetric:function(En,tn){En===ot.HTTP_REQUEST&&(Ve&&Ve!==tn.type||it.push(tn))}},ce}Le.__dashjs_factory_name="HttpListHandler";var te=l.default.getClassFactory(Le);function $e(){let Ee,ce,He;return Ee={initialize:function(ut,Ve){ce=ut,He=Ve},reset:function(){He=null,ce=void 0},handleNewMetric:function(ut,Ve){ut===ce&&He&&He.report(ce,Ve)}},Ee}$e.__dashjs_factory_name="GenericMetricHandler";var Ue=l.default.getClassFactory($e);function Re(Ee){let ce;const He=(Ee=Ee||{}).debug?Ee.debug.getLogger(ce):{};let ut=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const Ve=this.context;let Je={BufferLevel:D,DVBErrors:ve,HttpList:te,PlayList:Ue,RepSwitchList:Ue,TcpList:Ue};return ce={create:function(Ke,it){var Et,ot=Ke.match(ut);if(ot){try{(Et=Je[ot[1]](Ve).create({eventBus:Ee.eventBus,metricsConstants:Ee.metricsConstants})).initialize(ot[1],it,ot[3],ot[5])}catch(xt){Et=null,He.error(`MetricsHandlerFactory: Could not create handler for type ${ot[1]} with args ${ot[3]}, ${ot[5]} (${xt.message})`)}return Et}},register:function(Ke,it){Je[Ke]=it},unregister:function(Ke){delete Je[Ke]}},ce}Re.__dashjs_factory_name="MetricsHandlerFactory";var Xe=l.default.getSingletonFactory(Re);function Ye(Ee){Ee=Ee||{};let ce,He=[];const ut=this.context,Ve=Ee.eventBus,Je=Ee.events;let Ke=Xe(ut).getInstance({debug:Ee.debug,eventBus:Ee.eventBus,metricsConstants:Ee.metricsConstants});function it(Et){He.forEach(ot=>{ot.handleNewMetric(Et.metric,Et.value,Et.mediaType)})}return ce={initialize:function(Et,ot){Et.split(",").forEach((xt,En,tn)=>{let fn;if(xt.indexOf("(")!==-1&&xt.indexOf(")")===-1){let Ht=tn[En+1];Ht&&Ht.indexOf("(")===-1&&Ht.indexOf(")")!==-1&&(xt+=","+Ht,delete tn[En+1])}fn=Ke.create(xt,ot),fn&&He.push(fn)}),Ve.on(Je.METRIC_ADDED,it,ce),Ve.on(Je.METRIC_UPDATED,it,ce)},reset:function(){Ve.off(Je.METRIC_ADDED,it,ce),Ve.off(Je.METRIC_UPDATED,it,ce),He.forEach(Et=>Et.reset()),He=[]}},ce}Ye.__dashjs_factory_name="MetricsHandlersController";var Ze=l.default.getClassFactory(Ye);function Ne(Ee){let ce,He,ut,Ve;Ee=Ee||{};let Je=this.context;function Ke(){ce&&ce.reset(),He&&He.reset(),ut&&ut.reset()}return Ve={initialize:function(it){try{ut=g(Je).create({mediaElement:Ee.mediaElement}),ut.initialize(it.Range),He=L(Je).create({debug:Ee.debug,metricsConstants:Ee.metricsConstants,mediaPlayerModel:Ee.mediaPlayerModel}),He.initialize(it.Reporting,ut),ce=Ze(Je).create({debug:Ee.debug,eventBus:Ee.eventBus,metricsConstants:Ee.metricsConstants,events:Ee.events}),ce.initialize(it.metrics,He)}catch(Et){throw Ke(),Et}},reset:Ke},Ve}Ne.__dashjs_factory_name="MetricsController";var ze=l.default.getClassFactory(Ne),st=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},Rt=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},jt=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function Pe(Ee){let ce,He=(Ee=Ee||{}).adapter;const ut=Ee.constants;return ce={getMetrics:function(Ve){let Je=[];return Ve&&Ve.Metrics&&Ve.Metrics.forEach(Ke=>{var it=new st,Et=He.getIsDynamic(Ve);Ke.hasOwnProperty("metrics")&&(it.metrics=Ke.metrics,Ke.Range&&Ke.Range.forEach(ot=>{var xt=new Rt;xt.starttime=function(En,tn,fn){let Ht,nr,vr=0;return tn?vr=He.getAvailabilityStartTime(En)/1e3:(Ht=He.getRegularPeriods(En),Ht.length&&(vr=Ht[0].start)),nr=vr,fn&&fn.hasOwnProperty(ut.START_TIME)&&(nr+=fn.starttime),nr}(Ve,Et,ot),ot.hasOwnProperty("duration")?xt.duration=ot.duration:xt.duration=He.getDuration(Ve),xt._useWallClockTime=Et,it.Range.push(xt)}),Ke.Reporting&&(Ke.Reporting.forEach(ot=>{var xt=new jt;ot.hasOwnProperty(ut.SCHEME_ID_URI)&&(xt.schemeIdUri=ot.schemeIdUri,ot.hasOwnProperty("value")&&(xt.value=ot.value),ot.hasOwnProperty(ut.DVB_REPORTING_URL)&&(xt.dvbReportingUrl=ot[ut.DVB_REPORTING_URL]),ot.hasOwnProperty(ut.DVB_PROBABILITY)&&(xt.dvbProbability=ot[ut.DVB_PROBABILITY]),it.Reporting.push(xt))}),Je.push(it)))}),Je}},ce}Pe.__dashjs_factory_name="ManifestParsing";var Oe=l.default.getSingletonFactory(Pe);function gt(Ee){let ce;Ee=Ee||{};let He={},ut=this.context,Ve=Ee.eventBus;const Je=Ee.events;function Ke(Et){if(Et.error)return;let ot=Object.keys(He);Oe(ut).getInstance({adapter:Ee.adapter,constants:Ee.constants}).getMetrics(Et.manifest).forEach(xt=>{const En=JSON.stringify(xt);if(He.hasOwnProperty(En))ot.splice(En,1);else try{let tn=ze(ut).create(Ee);tn.initialize(xt),He[En]=tn}catch{}}),ot.forEach(xt=>{He[xt].reset(),delete He[xt]}),Ve.trigger(o.default.METRICS_INITIALISATION_COMPLETE)}function it(){Object.keys(He).forEach(Et=>{He[Et].reset()}),He={}}return ce={reset:function(){Ve.off(Je.MANIFEST_UPDATED,Ke,ce),Ve.off(Je.STREAM_TEARDOWN_COMPLETE,it,ce)}},Ve.on(Je.MANIFEST_UPDATED,Ke,ce),Ve.on(Je.STREAM_TEARDOWN_COMPLETE,it,ce),ce}gt.__dashjs_factory_name="MetricsCollectionController";var Q=l.default.getClassFactory(gt);function J(){let Ee,ce,He=this.context;return Ee={createMetricsReporting:function(ut){return ce=c(He).getInstance({eventBus:ut.eventBus,dashMetrics:ut.dashMetrics,metricsConstants:ut.metricsConstants,events:ut.events}),ce.initialize(),Q(He).create(ut)},getReportingFactory:function(){return B(He).getInstance()},getMetricsHandlerFactory:function(){return Xe(He).getInstance()}},Ee}J.__dashjs_factory_name="MetricsReporting";const F=dashjs.FactoryMaker.getClassFactory(J);F.events=o.default,dashjs.FactoryMaker.updateClassFactory(J.__dashjs_factory_name,F);var K=F},913:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let o=new i;e.default=o},1926:function(n,e,t){t.r(e);var r=t(5717),i=t(138),o=t(8261),l=t(656),d=t(5212);function c(){let f,m,g,p,y,v,A,I,P,U;const M=this.context,B=(0,o.default)(M).getInstance();function ie(){p=[],y=[],v=[],A=[],I=[],U=[],P=null,m=[]}function L(D,ve){let Le=-1;D.some((te,$e)=>{if(te===ve)return Le=$e,!0}),Le<0||D.splice(Le,1)}function w(D){let ve;for(ve=0;ve<U.length;ve++)if(U[ve].rulename===D)return ve;return-1}function O(D,ve){oe(D,ve);let Le=new r.default;Le.schemeIdUri=D,Le.value=ve,m.push(Le)}function oe(D,ve){(0,l.checkParameterType)(D,"string"),(0,l.checkParameterType)(ve,"string"),m.forEach(function(Le,te){Le.schemeIdUri===D&&Le.value===ve&&m.splice(te,1)})}return f={addAbrCustomRule:function(D,ve,Le){if(typeof D!="string"||D!==d.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&D!==d.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof ve!="string")throw d.default.BAD_ARGUMENT_ERROR;let te=w(ve);te===-1?U.push({type:D,rulename:ve,rule:Le}):(U[te].type=D,U[te].rule=Le)},addRequestInterceptor:function(D){p.push(D)},addResponseInterceptor:function(D){y.push(D)},addUTCTimingSource:O,clearDefaultUTCTimingSources:function(){m=[]},getAbrCustomRules:function(){return U},getCustomCapabilitiesFilters:function(){return I},getCustomInitialTrackSelectionFunction:function(){return P},getLicenseRequestFilters:function(){return v},getLicenseResponseFilters:function(){return A},getRequestInterceptors:function(){return p},getResponseInterceptors:function(){return y},getUTCTimingSources:function(){return m},getXHRWithCredentialsForType:function(D){const ve=g[D];return ve===void 0?g.default:ve},registerCustomCapabilitiesFilter:function(D){I.push(D)},registerLicenseRequestFilter:function(D){v.push(D)},registerLicenseResponseFilter:function(D){A.push(D)},removeAbrCustomRule:function(D){if(D){let ve=w(D);ve!==-1&&U.splice(ve,1)}else U=[]},removeAllAbrCustomRule:function(){U=[]},removeRequestInterceptor:function(D){L(p,D)},removeResponseInterceptor:function(D){L(y,D)},removeUTCTimingSource:oe,reset:function(){ie()},resetCustomInitialTrackSelectionFunction:function(){P=null},restoreDefaultUTCTimingSources:function(){let D=B.get().streaming.utcSynchronization.defaultTimingSource;O(D.scheme,D.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(D){P=D},setXHRWithCredentialsForType:function D(ve,Le){ve?g[ve]=!!Le:Object.keys(g).forEach(te=>{D(te,Le)})},unregisterCustomCapabilitiesFilter:function(D){L(I,D)},unregisterLicenseRequestFilter:function(D){L(v,D)},unregisterLicenseResponseFilter:function(D){L(A,D)}},g={default:!1},ie(),f}c.__dashjs_factory_name="CustomParametersModel",e.default=i.default.getSingletonFactory(c)},3888:function(n,e,t){t.r(e),t.d(e,{default:function(){return ki}});var r=t(8854),i=t(2861);const o={prefixes:["clearkey","dashif","ck"]};class l{static findMp4ProtectionElement(Bt){let Pt=null;for(let kt=0;kt<Bt.length;++kt){let an=Bt[kt];an.schemeIdUri&&an.schemeIdUri.toLowerCase()===r.default.MP4_PROTECTION_SCHEME&&an.value&&(an.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CENC||an.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CBCS)&&(Pt=an)}return Pt}static getPSSHData(Bt){let Pt=8,kt=new DataView(Bt),an=kt.getUint8(Pt);return Pt+=20,an>0&&(Pt+=4+16*kt.getUint32(Pt)),Pt+=4,Bt.slice(Pt)}static getPSSHForKeySystem(Bt,Pt){let kt=l.parsePSSHList(Pt);return Bt&&kt.hasOwnProperty(Bt.uuid.toLowerCase())?kt[Bt.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(Bt,Pt){return"pssh"in Bt&&Bt.pssh?(Bt.pssh.__text=Bt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Pt.decodeArray(Bt.pssh.__text).buffer):null}static parsePSSHList(Bt){if(Bt==null)return[];let Pt=new DataView(Bt.buffer||Bt),kt={},an=0;for(;;){let sn,un,hn,Ot,Mt,dn,ar=an;if(an>=Pt.buffer.byteLength)break;if(sn=Pt.getUint32(an),un=an+sn,an+=4,Pt.getUint32(an)===1886614376)if(an+=4,hn=Pt.getUint8(an),hn===0||hn===1){for(an++,an+=3,Ot="",Mt=0;Mt<4;Mt++)dn=Pt.getUint8(an+Mt).toString(16),Ot+=dn.length===1?"0"+dn:dn;for(an+=4,Ot+="-",Mt=0;Mt<2;Mt++)dn=Pt.getUint8(an+Mt).toString(16),Ot+=dn.length===1?"0"+dn:dn;for(an+=2,Ot+="-",Mt=0;Mt<2;Mt++)dn=Pt.getUint8(an+Mt).toString(16),Ot+=dn.length===1?"0"+dn:dn;for(an+=2,Ot+="-",Mt=0;Mt<2;Mt++)dn=Pt.getUint8(an+Mt).toString(16),Ot+=dn.length===1?"0"+dn:dn;for(an+=2,Ot+="-",Mt=0;Mt<6;Mt++)dn=Pt.getUint8(an+Mt).toString(16),Ot+=dn.length===1?"0"+dn:dn;an+=6,Ot=Ot.toLowerCase(),an+=4,kt[Ot]=Pt.buffer.slice(ar,un),an=un}else an=un;else an=un}return kt}static getLicenseServerUrlFromMediaInfo(Bt,Pt){try{if(!Bt||Bt.length===0)return null;let kt=0,an=null;for(;kt<Bt.length&&!an;){const sn=Bt[kt];if(sn&&sn.contentProtection&&sn.contentProtection.length>0){const un=sn.contentProtection.filter(hn=>hn.schemeIdUri&&hn.schemeIdUri===Pt);if(un&&un.length>0){let hn=0;for(;hn<un.length&&!an;){const Ot=un[hn];Ot.laUrl&&Ot.laUrl.__prefix&&o.prefixes.includes(Ot.laUrl.__prefix)&&Ot.laUrl.__text&&(an=Ot.laUrl.__text),hn+=1}}}kt+=1}return an}catch{return null}}static hexKidToBufferSource(Bt){const Pt=Bt.replace(/-/g,"");return new Uint8Array(Pt.match(/[\da-f]{2}/gi).map(function(kt){return parseInt(kt,16)})).buffer}}var d=l,c=class{constructor($t,Bt){this.contentType=$t,this.robustness=Bt}},f=class{constructor($t,Bt,Pt,kt,an,sn){this.initDataTypes=sn&&sn.length>0?sn:[i.default.INITIALIZATION_DATA_TYPE_CENC],$t&&$t.length&&(this.audioCapabilities=$t),Bt&&Bt.length&&(this.videoCapabilities=Bt),this.distinctiveIdentifier=Pt,this.persistentState=kt,this.sessionTypes=an}},m=t(1923),g=t(1944),p=class{constructor($t,Bt,Pt,kt,an,sn,un,hn){this.url=$t,this.method=Bt,this.responseType=Pt,this.headers=kt,this.withCredentials=an,this.messageType=sn,this.sessionId=un,this.data=hn}},y=class{constructor($t,Bt,Pt){this.url=$t,this.headers=Bt,this.data=Pt}},v=t(7568),A=t(7263),I=t(5212),P=t(138);function U($t){const Bt=($t=$t||{}).BASE64,Pt=$t.cmcdModel,kt=$t.constants,an=$t.customParametersModel,sn=$t.debug,un=$t.eventBus,hn=$t.events,Ot=$t.protectionKeyController,Mt=$t.settings;let dn,ar,Xt,Pn,Jn,$n,Yn,gr,Cn,Nt,vt,on,pn=$t.protectionModel,Hn=[];function yr(){if(!(un&&un.hasOwnProperty("on")&&Ot&&Ot.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function Ur(Kt,An){vt||Pn?vt&&_r():function(Gn,Er){if(Pn)return;var lr;Pn=!0;const Ri=function(kr){const Rr=[];for(let Ar=0;Ar<kr.length;Ar++){const Mr=Wr(kr[Ar]);Rr.push({ks:kr[Ar].ks,configs:[Mr],protData:kr[Ar].protData})}return Rr}(Gn=(lr=Gn).sort((kr,Rr)=>(dn&&dn[kr.ks.systemString]&&dn[kr.ks.systemString].priority>=0?dn[kr.ks.systemString].priority:lr.length)-(dn&&dn[Rr.ks.systemString]&&dn[Rr.ks.systemString].priority>=0?dn[Rr.ks.systemString].priority:lr.length)));let Sr;pn.requestKeySystemAccess(Ri).then(kr=>(Sr=kr.data,function(Rr){let Ar=Rr&&Rr.selectedSystemString?Rr.selectedSystemString:Rr.keySystem.systemString;return Yn.info("DRM: KeySystem Access Granted for system string ("+Ar+")!  Selecting key system..."),pn.selectKeySystem(Rr)}(Sr))).then(kr=>{(function(Rr,Ar){vt=Rr,Pn=!1,un.trigger(hn.KEY_SYSTEM_SELECTED,{data:Ar});const Mr=Ua(vt);Mr&&Mr.serverCertificate&&Mr.serverCertificate.length>0&&pn.setServerCertificate(Bt.decodeArray(Mr.serverCertificate).buffer),_r()})(kr,Sr)}).catch(kr=>{(function(Rr,Ar){vt=null,Pn=!1,Ar||un.trigger(hn.KEY_SYSTEM_SELECTED,{data:null,error:new g.default(m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Rr.error)})})(kr,Er)})}(Kt,An)}function _r(){let Kt;for(let Gn=0;Gn<Cn.length;Gn++)for(Kt=0;Kt<Cn[Gn].length;Kt++)if(vt===Cn[Gn][Kt].ks){An=Cn[Gn][Kt],Ot.isClearKey(vt)&&function(Er){if(Er.protData&&Er.protData.hasOwnProperty("clearkeys")&&Object.keys(Er.protData.clearkeys).length!==0){const lr={kids:Object.keys(Er.protData.clearkeys)};Er.initData=new TextEncoder().encode(JSON.stringify(lr))}}(An),An.sessionId?Zr(An):An.initData!==null&&ri(An);break}var An;Cn=[]}function Wr(Kt){const An=Kt.protData,Gn=[],Er=[],lr=An&&An.initDataTypes&&An.initDataTypes.length>0?An.initDataTypes:[i.default.INITIALIZATION_DATA_TYPE_CENC],Ri=An&&An.audioRobustness&&An.audioRobustness.length>0?An.audioRobustness:Nt,Sr=An&&An.videoRobustness&&An.videoRobustness.length>0?An.videoRobustness:Nt,kr=Kt.sessionType,Rr=An&&An.distinctiveIdentifier?An.distinctiveIdentifier:"optional",Ar=An&&An.persistentState?An.persistentState:kr==="temporary"?"optional":"required";return gr.forEach(Mr=>{Mr.type===kt.AUDIO?Gn.push(new c(Mr.codec,Ri)):Mr.type===kt.VIDEO&&Er.push(new c(Mr.codec,Sr))}),new f(Gn,Er,Rr,Ar,[kr],lr)}function Zr(Kt){yr(),pn.loadKeySession(Kt)}function ri(Kt){if(Kt&&function(Gn){if(!Gn)return!1;try{const Er=pn.getSessionTokens();for(let lr=0;lr<Er.length;lr++)if(Er[lr].getKeyId()===Gn)return!0;return!1}catch{return!1}}(Kt.keyId))return;const An=d.getPSSHForKeySystem(vt,Kt?Kt.initData:null);if(An){if(za(An))return;try{Kt.initData=An,pn.createKeySession(Kt)}catch(Gn){un.trigger(hn.KEY_SESSION_CREATED,{data:null,error:new g.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Gn.message)})}}else Kt&&Kt.initData?pn.createKeySession(Kt):un.trigger(hn.KEY_SESSION_CREATED,{data:null,error:new g.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(vt?vt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Ua(Kt){if(Kt){const An=Kt.systemString;if(dn)return An in dn?dn[An]:null}return null}function za(Kt){if(!Kt)return!1;try{const An=pn.getAllInitData();for(let Gn=0;Gn<An.length;Gn++)if(Ot.initDataEquals(Kt,An[Gn]))return Yn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function ks(Kt){yr(),Kt?(pn.setMediaElement(Kt),un.on(hn.NEED_KEY,Io,ar)):Kt===null&&(pn.setMediaElement(Kt),un.off(hn.NEED_KEY,Io,ar))}function Ui(Kt){Yn.debug("DRM: onKeyMessage");const An=Kt.data;un.trigger(hn.KEY_MESSAGE,{data:An});const Gn=An.messageType?An.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,Er=An.message,lr=An.sessionToken,Ri=Ua(vt),Sr=Ot.getLicenseServerModelInstance(vt,Ri,Gn),kr={sessionToken:lr,messageType:Gn};if(Er&&Er.byteLength!==0){if(!Sr)return Yn.debug("DRM: License server request not required for this message (type = "+Kt.data.messageType+").  Session ID = "+lr.getSessionId()),void na(kr);if(Ot.isClearKey(vt)){const Rr=Ot.processClearKeyLicenseRequest(vt,Ri,Er);if(Rr&&Rr.keyPairs&&Rr.keyPairs.length>0)return Yn.debug("DRM: ClearKey license request handled by application!"),na(kr),void pn.updateKeySession(lr,Rr)}(function(Rr,Ar,Mr){const Ba=Rr.sessionToken,xi=Rr.messageType?Rr.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,ss={sessionToken:Ba,messageType:xi},ko=vt?vt.systemString:null;let Rf=function(qr,xs,qi,Ta,os){let Hi=null;const Co=Ta.message;if(qr&&qr.serverURL){const zi=qr.serverURL;typeof zi=="string"&&zi!==""?Hi=zi:typeof zi=="object"&&zi.hasOwnProperty(xs)&&(Hi=zi[xs])}else if(qr&&qr.laURL&&qr.laURL!=="")Hi=qr.laURL;else if(Hi=d.getLicenseServerUrlFromMediaInfo(gr,vt.schemeIdURI),!Hi&&!Ot.isClearKey(vt)){const zi=d.getPSSHData(qi.initData);Hi=vt.getLicenseServerURLFromInitData(zi),Hi||(Hi=Ta.laURL)}return Hi=os.getServerURLFromMessage(Hi,Co,xs),Hi}(Mr,xi,Ba,Rr,Ar);if(!Rf)return void na(ss,new g.default(m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const Ro={};let Ra=!1;Mr&&If(Ro,Mr.httpRequestHeaders);const Rs=Rr.message;If(Ro,vt.getRequestHeadersFromMessage(Rs)),Object.keys(Ro).forEach(qr=>{qr.toLowerCase()==="authorization"&&(Ra=!0)}),Mr&&typeof Mr.withCredentials=="boolean"&&(Ra=Mr.withCredentials);const xo=function(qr){if(pn)if(qr.status>=200&&qr.status<=299){const xs=A.default.parseHttpHeaders(qr.getAllResponseHeaders?qr.getAllResponseHeaders():null);let qi=new y(qr.responseURL,xs,qr.response);kf(an.getLicenseResponseFilters(),qi).then(()=>{const Ta=Ar.getLicenseMessage(qi.data,ko,xi);Ta!==null?(na(ss),pn.updateKeySession(Ba,Ta)):mi(qr,ss,ko,xi,Ar)})}else mi(qr,ss,ko,xi,Ar)},Ka=function(qr){na(ss,new g.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ko+' update, XHR aborted. status is "'+qr.statusText+'" ('+qr.status+"), readyState is "+qr.readyState))},hu=function(qr){na(ss,new g.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ko+' update, XHR error. status is "'+qr.statusText+'" ('+qr.status+"), readyState is "+qr.readyState))},Or=vt.getLicenseRequestFromMessage(Rs),mu=Ar.getHTTPMethod(xi),gu=Ar.getResponseType(ko,xi),pu=Mr&&!isNaN(Mr.httpTimeout)?Mr.httpTimeout:8e3,Fd=Ba.getSessionId()||null;let vu=new p(Rf,mu,gu,Ro,Ra,xi,Fd,Or);const Ud=isNaN(Mt.get().streaming.retryAttempts[v.HTTPRequest.LICENSE])?3:Mt.get().streaming.retryAttempts[v.HTTPRequest.LICENSE];kf(an.getLicenseRequestFilters(),vu).then(()=>{ji(vu,Ud,pu,xo,Ka,hu)})})(An,Sr,Ri)}else na(kr,new g.default(m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function na(Kt){let An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;un.trigger(hn.LICENSE_REQUEST_COMPLETE,{data:Kt,error:An})}function ji(Kt,An,Gn,Er,lr,Ri){const Sr=new XMLHttpRequest,kr=Pt.getCmcdParametersFromManifest();if(Pt.isCmcdEnabled()&&(kr.mode?kr.mode:Mt.get().streaming.cmcd.mode)===I.default.CMCD_MODE_QUERY){const Ar=Pt.getQueryParameter({url:Kt.url,type:v.HTTPRequest.LICENSE});Ar&&(Kt.url=A.default.addAdditionalQueryParameterToUrl(Kt.url,[Ar]))}Sr.open(Kt.method,Kt.url,!0),Sr.responseType=Kt.responseType,Sr.withCredentials=Kt.withCredentials,Gn>0&&(Sr.timeout=Gn);for(const Ar in Kt.headers)Sr.setRequestHeader(Ar,Kt.headers[Ar]);if(Pt.isCmcdEnabled()&&(kr.mode?kr.mode:Mt.get().streaming.cmcd.mode)===I.default.CMCD_MODE_HEADER){const Ar=Pt.getHeaderParameters({url:Kt.url,type:v.HTTPRequest.LICENSE});if(Ar)for(const Mr in Ar){let Ba=Ar[Mr];Ba&&Sr.setRequestHeader(Mr,Ba)}}const Rr=function(){An--;const Ar=isNaN(Mt.get().streaming.retryIntervals[v.HTTPRequest.LICENSE])?1e3:Mt.get().streaming.retryIntervals[v.HTTPRequest.LICENSE];Jn=setTimeout(function(){ji(Kt,An,Gn,Er,lr,Ri)},Ar)};Sr.onload=function(){$n=null,this.status>=200&&this.status<=299||An<=0?Er(this):(Yn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+An),Rr())},Sr.ontimeout=Sr.onerror=function(){$n=null,An<=0?Ri(this):(Yn.warn("License request network request failed . Retrying it... Pending retries: "+An),Rr())},Sr.onabort=function(){lr(this)},un.trigger(hn.LICENSE_REQUEST_SENDING,{url:Kt.url,headers:Kt.headers,payload:Kt.data,sessionId:Kt.sessionId}),$n=Sr,Sr.send(Kt.data)}function wf(){$n&&($n.onloadend=$n.onerror=$n.onprogress=void 0,$n.abort(),$n=null),Jn&&(clearTimeout(Jn),Jn=null)}function If(Kt,An){if(An)for(const Gn in An)Kt[Gn]=An[Gn]}function mi(Kt,An,Gn,Er,lr){let Ri="NONE",Sr=null;Kt.response&&(Ri=lr.getErrorResponse(Kt.response,Gn,Er),Sr={serverResponse:Kt.response||null,responseCode:Kt.status||null,responseText:Kt.statusText||null}),na(An,new g.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Gn+' update, XHR complete. status is "'+Kt.statusText+'" ('+Kt.status+"), readyState is "+Kt.readyState+".  Response is "+Ri,Sr))}function kf(Kt,An){return Kt?Kt.reduce((Gn,Er)=>Gn.then(()=>Er(An)),Promise.resolve()):Promise.resolve()}function Io(Kt,An){if(Mt.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(Yn.debug("DRM: onNeedKey"),Kt.key.initDataType!==i.default.INITIALIZATION_DATA_TYPE_CENC)return void Yn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Kt.key.initDataType);if(gr.length===0&&(Yn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(An=An===void 0?1:An+1)<5))return void Hn.push(setTimeout(()=>{Io(Kt,An)},500));let Gn=Kt.key.initData;if(ArrayBuffer.isView(Gn)&&(Gn=Gn.buffer),vt){const lr=d.getPSSHForKeySystem(vt,Gn);if(lr&&za(lr))return}Yn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Gn)));const Er=Ot.getSupportedKeySystemMetadataFromSegmentPssh(Gn,dn,on);Er.length!==0?function(lr){Cn.push(lr),Ur(lr,!1)}(Er):Yn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function fu(Kt,An){if(Kt.size<=0)return!1;if(An.size>0&&[...Kt].every(Er=>{const lr=An.get(Er);return lr!==void 0&&lr!==""}))return!0;const Gn=pn.getSessionTokens();if(Gn&&Gn.length>0){const Er=Gn.filter(lr=>[...Kt].includes(lr.normalizedKeyId));if(Er.some(lr=>!lr.hasTriggeredKeyStatusMapUpdate)||Er.length===0)return!1}return!Mt.get().streaming.protection.ignoreKeyStatuses&&Kt&&Kt.size>0&&An&&An.size>0}return ar={areKeyIdsExpired:function(Kt){try{return!!fu(Kt,Xt)&&[...Kt].every(An=>Xt.get(An)===i.default.MEDIA_KEY_STATUSES.EXPIRED)}catch(An){return Yn.error(An),!1}},areKeyIdsUsable:function(Kt){try{return!fu(Kt,Xt)||[...Kt].some(An=>{const Gn=Xt.get(An);return Gn&&Gn!==i.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&Gn!==i.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED})}catch(An){return Yn.error(An),!0}},clearMediaInfoArray:function(){gr=[]},closeKeySession:function(Kt){yr(),pn.closeKeySession(Kt)},createKeySession:ri,getKeySystems:function(){return Ot?Ot.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(Kt){return yr(),Ot.getSupportedKeySystemMetadataFromContentProtection(Kt,dn,on)},handleKeySystemFromManifest:function(){if(!gr||gr.length===0)return;let Kt=[];gr.forEach(An=>{const Gn=Ot.getSupportedKeySystemMetadataFromContentProtection(An.contentProtection,dn,on);Gn.length>0&&(Kt.length===0&&(Kt=Gn),Cn.push(Gn))}),Kt&&Kt.length>0&&Ur(Kt,!0)},initializeForMedia:function(Kt){if(!Kt)throw new Error("mediaInfo can not be null or undefined");yr(),gr.push(Kt)},loadKeySession:Zr,removeKeySession:function(Kt){yr(),pn.removeKeySession(Kt)},reset:function(){un.off(hn.INTERNAL_KEY_MESSAGE,Ui,ar),yr(),wf(),ks(null),vt=null,Pn=!1,Xt=new Map,pn&&(pn.reset(),pn=null),Hn.forEach(Kt=>clearTimeout(Kt)),Hn=[],gr=[],Cn=[]},setKeySystems:function(Kt){Ot&&Ot.setKeySystems(Kt)},setMediaElement:ks,setProtectionData:function(Kt){dn=Kt,Ot.setProtectionData(Kt)},setRobustnessLevel:function(Kt){Nt=Kt},setServerCertificate:function(Kt){yr(),pn.setServerCertificate(Kt)},setSessionType:function(Kt){on=Kt},stop:function(){wf(),pn&&pn.stop()},updateKeyStatusesMap:function(Kt){try{if(!Kt||!Kt.sessionToken||!Kt.parsedKeyStatuses)return;Kt.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const An=Kt.parsedKeyStatuses,Gn=A.default.parseUserAgent(),Er=Gn&&Gn.browser&&Gn.browser.name&&Gn.browser.name.toLowerCase()==="edge";An.forEach(lr=>{Er&&vt.uuid===i.default.PLAYREADY_UUID&&lr.keyId&&lr.keyId.byteLength===16&&function(Sr){const kr=A.default.bufferSourceToDataView(Sr),Rr=kr.getUint32(0,!0),Ar=kr.getUint16(4,!0),Mr=kr.getUint16(6,!0);kr.setUint32(0,Rr,!1),kr.setUint16(4,Ar,!1),kr.setUint16(6,Mr,!1)}(lr.keyId);const Ri=A.default.bufferSourceToHex(lr.keyId).slice(0,32);Ri&&Ri!==""&&Xt.set(Ri,lr.status)}),un.trigger(hn.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:Xt})}catch(An){Yn.error(An)}}},Yn=sn.getLogger(ar),Cn=[],gr=[],on="temporary",Nt="",$n=null,Jn=null,Xt=new Map,un.on(hn.INTERNAL_KEY_MESSAGE,Ui,ar),ar}U.__dashjs_factory_name="ProtectionController";var M=P.default.getClassFactory(U),B=class{constructor($t,Bt){this.keyID=$t,this.key=Bt}},ie=class{constructor($t,Bt){if(Bt&&Bt!=="persistent"&&Bt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=$t,this.type=Bt}toJWK(){let $t,Bt=this.keyPairs.length,Pt={keys:[]};for($t=0;$t<Bt;$t++){let hn={kty:"oct",alg:"A128KW",kid:this.keyPairs[$t].keyID,k:this.keyPairs[$t].key};Pt.keys.push(hn)}this.type&&(Pt.type=this.type);let kt=JSON.stringify(Pt);const an=kt.length;let sn=new ArrayBuffer(an),un=new Uint8Array(sn);for($t=0;$t<an;$t++)un[$t]=kt.charCodeAt($t);return sn}};const L=i.default.CLEARKEY_UUID,w=i.default.CLEARKEY_KEYSTEM_STRING,O="urn:uuid:"+L;function oe($t){let Bt;const Pt=($t=$t||{}).BASE64;return Bt={uuid:L,schemeIdURI:O,systemString:w,getInitData:function(kt,an){try{let sn=d.parseInitDataFromContentProtection(kt,Pt);if(!sn&&an){const un={kids:[function(hn){try{let Ot=hn.replace(/-/g,"");return Ot=btoa(Ot.match(/\w{2}/g).map(Mt=>String.fromCharCode(parseInt(Mt,16))).join("")),Ot.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(an.cencDefaultKid)]};sn=new TextEncoder().encode(JSON.stringify(un))}return sn}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(kt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(kt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(kt,an){let sn=null;if(kt){const un=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))),hn=[];for(let Ot=0;Ot<un.kids.length;Ot++){const Mt=un.kids[Ot],dn=kt.clearkeys&&kt.clearkeys.hasOwnProperty(Mt)?kt.clearkeys[Mt]:null;if(!dn)throw new Error("DRM: ClearKey keyID ("+Mt+") is not known!");hn.push(new B(Mt,dn))}sn=new ie(hn)}return sn}},Bt}oe.__dashjs_factory_name="KeySystemClearKey";var D=P.default.getSingletonFactory(oe);const ve=i.default.W3C_CLEARKEY_UUID,Le=i.default.CLEARKEY_KEYSTEM_STRING,te="urn:uuid:"+ve;function $e($t){let Bt;const Pt=$t.BASE64,kt=$t.debug.getLogger(Bt);return Bt={uuid:ve,schemeIdURI:te,systemString:Le,getInitData:function(an){return d.parseInitDataFromContentProtection(an,Pt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,sn){let un=null;if(an){const hn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(sn))),Ot=[];for(let Mt=0;Mt<hn.kids.length;Mt++){const dn=hn.kids[Mt],ar=an.clearkeys&&an.clearkeys.hasOwnProperty(dn)?an.clearkeys[dn]:null;if(!ar)throw new Error("DRM: ClearKey keyID ("+dn+") is not known!");Ot.push(new B(dn,ar))}un=new ie(Ot),kt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return un}},Bt}$e.__dashjs_factory_name="KeySystemW3CClearKey";var Ue=P.default.getSingletonFactory($e);const Re=i.default.WIDEVINE_UUID,Xe=i.default.WIDEVINE_KEYSTEM_STRING,Ye="urn:uuid:"+Re;function Ze($t){let Bt;const Pt=($t=$t||{}).BASE64;return Bt={uuid:Re,schemeIdURI:Ye,systemString:Xe,getInitData:function(kt){return d.parseInitDataFromContentProtection(kt,Pt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(kt){return new Uint8Array(kt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},Bt}Ze.__dashjs_factory_name="KeySystemWidevine";var Ne=P.default.getSingletonFactory(Ze);const ze=i.default.PLAYREADY_UUID,st=i.default.PLAYREADY_KEYSTEM_STRING,Rt="urn:uuid:"+ze;function jt($t){let Bt,Pt="utf-16";const kt=($t=$t||{}).BASE64,an=$t.settings;function sn(){if(!kt||!kt.hasOwnProperty("decodeArray")||!kt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return Bt={uuid:ze,schemeIdURI:Rt,systemString:st,getInitData:function(un){const hn=new Uint8Array([112,115,115,104,0,0,0,0]),Ot=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let Mt,dn,ar,Xt,Pn,Jn=0,$n=null;if(sn(),!un)return null;if("pssh"in un&&un.pssh)return d.parseInitDataFromContentProtection(un,kt);if("pro"in un&&un.pro)$n=kt.decodeArray(un.pro.__text);else{if(!("prheader"in un)||!un.prheader)return null;$n=kt.decodeArray(un.prheader.__text)}return Mt=$n.length,dn=4+hn.length+Ot.length+4+Mt,ar=new ArrayBuffer(dn),Xt=new Uint8Array(ar),Pn=new DataView(ar),Pn.setUint32(Jn,dn),Jn+=4,Xt.set(hn,Jn),Jn+=hn.length,Xt.set(Ot,Jn),Jn+=Ot.length,Pn.setUint32(Jn,Mt),Jn+=4,Xt.set($n,Jn),Jn+=Mt,Xt.buffer},getRequestHeadersFromMessage:function(un){let hn,Ot;const Mt={},dn=new DOMParser;if(an&&an.get().streaming.protection.detectPlayreadyMessageFormat&&Pt==="utf-16"&&un&&un.byteLength%2==1)return Mt["Content-Type"]="text/xml; charset=utf-8",Mt;const ar=Pt==="utf-16"?new Uint16Array(un):new Uint8Array(un);hn=String.fromCharCode.apply(null,ar),Ot=dn.parseFromString(hn,"application/xml");const Xt=Ot.getElementsByTagName("name"),Pn=Ot.getElementsByTagName("value");for(let Jn=0;Jn<Xt.length;Jn++)Mt[Xt[Jn].childNodes[0].nodeValue]=Pn[Jn].childNodes[0].nodeValue;return Mt.hasOwnProperty("Content")&&(Mt["Content-Type"]=Mt.Content,delete Mt.Content),Mt.hasOwnProperty("Content-Type")||(Mt["Content-Type"]="text/xml; charset=utf-8"),Mt},getLicenseRequestFromMessage:function(un){let hn=null;const Ot=new DOMParser;if(an&&an.get().streaming.protection.detectPlayreadyMessageFormat&&Pt==="utf-16"&&un&&un.byteLength%2==1)return un;const Mt=Pt==="utf-16"?new Uint16Array(un):new Uint8Array(un);sn();const dn=String.fromCharCode.apply(null,Mt),ar=Ot.parseFromString(dn,"application/xml");if(!ar.getElementsByTagName("PlayReadyKeyMessage")[0])return un;{const Xt=ar.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;Xt&&(hn=kt.decode(Xt))}return hn},getLicenseServerURLFromInitData:function(un){if(un){const hn=new DataView(un),Ot=hn.getUint16(4,!0);let Mt=6;const dn=new DOMParser;for(let ar=0;ar<Ot;ar++){const Xt=hn.getUint16(Mt,!0);Mt+=2;const Pn=hn.getUint16(Mt,!0);if(Mt+=2,Xt!==1){Mt+=Pn;continue}const Jn=un.slice(Mt,Mt+Pn),$n=String.fromCharCode.apply(null,new Uint16Array(Jn)),Yn=dn.parseFromString($n,"application/xml");if(Yn.getElementsByTagName("LA_URL")[0]){const gr=Yn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(gr)return gr}if(Yn.getElementsByTagName("LUI_URL")[0]){const gr=Yn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(gr)return gr}}}return null},getCDMData:function(un){let hn,Ot,Mt,dn;if(sn(),!un)return null;for(hn=[],dn=0;dn<un.length;++dn)hn.push(un.charCodeAt(dn)),hn.push(0);for(hn=String.fromCharCode.apply(null,hn),hn=kt.encode(hn),Ot='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",hn),Mt=[],dn=0;dn<Ot.length;++dn)Mt.push(Ot.charCodeAt(dn)),Mt.push(0);return new Uint8Array(Mt).buffer},setPlayReadyMessageFormat:function(un){if(un!=="utf-8"&&un!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');Pt=un}},Bt}jt.__dashjs_factory_name="KeySystemPlayReady";var Pe=P.default.getSingletonFactory(jt);function Oe($t){const Bt=($t=$t||{}).BASE64,Pt={};let kt;return Pt[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(an){return Bt.decodeArray(an.license)},getErrorResponse:function(an){return an}},Pt[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(an){return an},getErrorResponse:function(an){return String.fromCharCode.apply(null,new Uint8Array(an))}},kt={getServerURLFromMessage:function(an){return an},getHTTPMethod:function(){return"POST"},getResponseType:function(an){return Pt[an].responseType},getLicenseMessage:function(an,sn){return function(){if(!Bt||!Bt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),Pt[sn].getLicenseMessage(an)},getErrorResponse:function(an,sn){return Pt[sn].getErrorResponse(an)}},kt}Oe.__dashjs_factory_name="DRMToday";var gt=P.default.getSingletonFactory(Oe);function Q(){let $t;const Bt="http://schemas.xmlsoap.org/soap/envelope/";function Pt(sn){const un=String.fromCharCode.apply(null,new Uint8Array(sn));return decodeURIComponent(escape(un))}function kt(sn){if(window.DOMParser){const un=Pt(sn),hn=new window.DOMParser().parseFromString(un,"text/xml"),Ot=hn?hn.getElementsByTagNameNS(Bt,"Envelope")[0]:null,Mt=Ot?Ot.getElementsByTagNameNS(Bt,"Body")[0]:null;if(Mt&&Mt.getElementsByTagNameNS(Bt,"Fault")[0])return null}return sn}function an(sn){let un="",hn="",Ot="",Mt=-1,dn=-1;if(window.DOMParser){const Xt=Pt(sn),Pn=new window.DOMParser().parseFromString(Xt,"text/xml"),Jn=Pn?Pn.getElementsByTagNameNS(Bt,"Envelope")[0]:null,$n=Jn?Jn.getElementsByTagNameNS(Bt,"Body")[0]:null,Yn=$n?$n.getElementsByTagNameNS(Bt,"Fault")[0]:null,gr=Yn?Yn.getElementsByTagName("detail")[0]:null,Cn=gr?gr.getElementsByTagName("Exception")[0]:null;let Nt=null;if(Yn===null)return Xt;Nt=Yn.getElementsByTagName("faultstring")[0].firstChild,un=Nt?Nt.nodeValue:null,Cn!==null&&(Nt=Cn.getElementsByTagName("StatusCode")[0],hn=Nt?Nt.firstChild.nodeValue:null,Nt=Cn.getElementsByTagName("Message")[0],Ot=Nt?Nt.firstChild.nodeValue:null,Mt=Ot?Ot.lastIndexOf("[")+1:-1,dn=Ot?Ot.indexOf("]"):-1,Ot=Ot?Ot.substring(Mt,dn):"")}let ar=`code: ${hn}, name: ${un}`;return Ot&&(ar+=`, message: ${Ot}`),ar}return $t={getServerURLFromMessage:function(sn){return sn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(sn){return kt.call(this,sn)},getErrorResponse:function(sn){return an.call(this,sn)}},$t}Q.__dashjs_factory_name="PlayReady";var J=P.default.getSingletonFactory(Q);function F(){let $t;return $t={getServerURLFromMessage:function(Bt){return Bt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Bt){return Bt},getErrorResponse:function(Bt){return String.fromCharCode.apply(null,new Uint8Array(Bt))}},$t}F.__dashjs_factory_name="Widevine";var K=P.default.getSingletonFactory(F);function Ee(){let $t;return $t={getServerURLFromMessage:function(Bt){return Bt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(Bt){if(!Bt.hasOwnProperty("keys"))return null;let Pt=[];for(let kt=0;kt<Bt.keys.length;kt++){let an=Bt.keys[kt],sn=an.kid.replace(/=/g,""),un=an.k.replace(/=/g,"");Pt.push(new B(sn,un))}return new ie(Pt)},getErrorResponse:function(Bt){return String.fromCharCode.apply(null,new Uint8Array(Bt))}},$t}Ee.__dashjs_factory_name="ClearKey";var ce=P.default.getSingletonFactory(Ee),He=class{constructor($t){this.ks=$t.ks,this.keyId=$t.keyId,this.initData=$t.initData,this.protData=$t.protData,this.cdmData=$t.cdmData,this.sessionId=$t.sessionId,this.sessionType=$t.sessionType}};function ut(){let $t,Bt,Pt,kt,an,sn,un,hn,Ot=this.context;function Mt(Xt,Pn){return Pn&&Xt in Pn?Pn[Xt]:null}function dn(Xt,Pn){return Xt&&Xt.sessionId?Xt.sessionId:Pn&&Pn.sessionId?Pn.sessionId:null}function ar(Xt,Pn){return Xt&&Xt.sessionType?Xt.sessionType:Pn}return $t={getKeySystemBySystemString:function(Xt){for(let Pn=0;Pn<kt.length;Pn++)if(kt[Pn].systemString===Xt)return kt[Pn];return null},getKeySystems:function(){return kt},getLicenseServerModelInstance:function(Xt,Pn,Jn){if(Jn===i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||Jn===i.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let $n=null;return Pn&&Pn.hasOwnProperty("drmtoday")?$n=gt(Ot).getInstance({BASE64:an}):Xt.systemString===i.default.WIDEVINE_KEYSTEM_STRING?$n=K(Ot).getInstance():Xt.systemString===i.default.PLAYREADY_KEYSTEM_STRING?$n=J(Ot).getInstance():Xt.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&($n=ce(Ot).getInstance()),$n},getSupportedKeySystemMetadataFromContentProtection:function(Xt,Pn,Jn){let $n,Yn,gr,Cn,Nt=[];if(!Xt||!Xt.length)return Nt;const vt=d.findMp4ProtectionElement(Xt);for(gr=0;gr<kt.length;gr++){Yn=kt[gr];const on=Mt(Yn.systemString,Pn);for(Cn=0;Cn<Xt.length;Cn++)if($n=Xt[Cn],$n.schemeIdUri.toLowerCase()===Yn.schemeIdURI){let pn=Yn.getInitData($n,vt);const Hn=new He({ks:kt[gr],keyId:$n.keyId,initData:pn,protData:on,cdmData:Yn.getCDMData(on?on.cdmData:null),sessionId:dn(on,$n),sessionType:ar(on,Jn)});on?Nt.unshift(Hn):Nt.push(Hn)}}return Nt},getSupportedKeySystemMetadataFromSegmentPssh:function(Xt,Pn,Jn){let $n,Yn,gr=[],Cn=d.parsePSSHList(Xt);for(let Nt=0;Nt<kt.length;++Nt){$n=kt[Nt],Yn=$n.systemString;const vt=Mt(Yn,Pn);$n.uuid in Cn&&gr.push({ks:$n,initData:Cn[$n.uuid],protData:vt,cdmData:$n.getCDMData(vt?vt.cdmData:null),sessionId:dn(vt),sessionType:ar(vt,Jn)})}return gr},initDataEquals:function(Xt,Pn){if(Xt.byteLength===Pn.byteLength){let Jn=new Uint8Array(Xt),$n=new Uint8Array(Pn);for(let Yn=0;Yn<Jn.length;Yn++)if(Jn[Yn]!==$n[Yn])return!1;return!0}return!1},initialize:function(){let Xt;kt=[],Xt=Pe(Ot).getInstance({BASE64:an,settings:sn}),kt.push(Xt),Xt=Ne(Ot).getInstance({BASE64:an}),kt.push(Xt),Xt=D(Ot).getInstance({BASE64:an}),kt.push(Xt),un=Xt,Xt=Ue(Ot).getInstance({BASE64:an,debug:Bt}),kt.push(Xt),hn=Xt},isClearKey:function(Xt){return Xt===un||Xt===hn},processClearKeyLicenseRequest:function(Xt,Pn,Jn){try{return Xt.getClearKeysFromProtectionData(Pn,Jn)}catch{return Pt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(Xt){Xt&&(Xt.debug&&(Bt=Xt.debug,Pt=Bt.getLogger($t)),Xt.BASE64&&(an=Xt.BASE64),Xt.settings&&(sn=Xt.settings))},setKeySystems:function(Xt){kt=Xt},setProtectionData:function(Xt){for(var Pn,Jn,$n=0;$n<kt.length;$n++){var Yn=kt[$n];Yn.hasOwnProperty("init")&&Yn.init((Pn=Yn.systemString,Jn=void 0,Jn=null,Xt&&(Jn=Pn in Xt?Xt[Pn]:null),Jn))}}},$t}ut.__dashjs_factory_name="ProtectionKeyController";var Ve=P.default.getSingletonFactory(ut),Je=t(445),Ke=class{constructor($t,Bt){this.initData=$t,this.initDataType=Bt}},it=class{constructor($t,Bt,Pt,kt){this.sessionToken=$t,this.message=Bt,this.defaultURL=Pt,this.messageType=kt||i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},Et=class{constructor($t,Bt){this.keySystem=$t,this.ksConfiguration=Bt,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const ot={};function xt($t){$t=$t||{};const Bt=this.context,Pt=$t.eventBus,kt=$t.events,an=$t.debug;let sn,un,hn,Ot,Mt,dn,ar,Xt;function Pn(Nt,vt,on,pn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const Wr="Insecure origins are not allowed";return Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Wr}),void pn({error:Wr})}const Hn=Nt[vt].protData&&Nt[vt].protData.systemStringPriority?Nt[vt].protData.systemStringPriority:null,yr=Nt[vt].configs,Ur=Nt[vt].ks;let _r=Ur.systemString;(function(Wr,Zr){return new Promise((ri,Ua)=>{Jn(Wr,Zr,0,ri,Ua)})})(Hn||(ot[_r]?ot[_r]:[_r]),yr).then(Wr=>{const Zr=Wr&&Wr.nativeMediaKeySystemAccessObject&&typeof Wr.nativeMediaKeySystemAccessObject.getConfiguration=="function"?Wr.nativeMediaKeySystemAccessObject.getConfiguration():null,ri=new Et(Ur,Zr);ri.selectedSystemString=Wr.selectedSystemString,ri.nativeMediaKeySystemAccessObject=Wr.nativeMediaKeySystemAccessObject,Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ri}),on({data:ri})}).catch(Wr=>{if(vt+1<Nt.length)Pn(Nt,vt+1,on,pn);else{const Zr="Key system access denied! ";Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Zr+Wr.message}),pn({error:Zr+Wr.message})}})}function Jn(Nt,vt,on,pn,Hn){const yr=Nt[on];un.debug(`Requesting key system access for system string ${yr}`),navigator.requestMediaKeySystemAccess(yr,vt).then(Ur=>{pn({nativeMediaKeySystemAccessObject:Ur,selectedSystemString:yr})}).catch(Ur=>{on+1<Nt.length?Jn(Nt,vt,on+1,pn,Hn):Hn(Ur)})}function $n(Nt){if(!Nt||!Nt.session)return Promise.resolve;const vt=Nt.session;return vt.removeEventListener("keystatuseschange",Nt),vt.removeEventListener("message",Nt),vt.close()}function Yn(Nt){for(let vt=0;vt<dn.length;vt++)if(dn[vt]===Nt){dn.splice(vt,1);break}}function gr(Nt,vt){const on={session:Nt,keyId:vt.keyId,normalizedKeyId:vt&&vt.keyId&&typeof vt.keyId=="string"?vt.keyId.replace(/-/g,"").toLowerCase():"",initData:vt.initData,sessionId:vt.sessionId,sessionType:vt.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(pn){switch(pn.type){case"keystatuseschange":this._onKeyStatusesChange(pn);break;case"message":this._onKeyMessage(pn)}},_onKeyStatusesChange:function(pn){Pt.trigger(kt.KEY_STATUSES_CHANGED,{data:this});const Hn=[];pn.target.keyStatuses.forEach(function(){Hn.push(Cn(arguments))}),Pt.trigger(kt.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:Hn,sessionToken:on})},_onKeyMessage:function(pn){let Hn=ArrayBuffer.isView(pn.message)?pn.message.buffer:pn.message;Pt.trigger(kt.INTERNAL_KEY_MESSAGE,{data:new it(this,Hn,void 0,pn.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return Nt.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return Nt.expiration},getKeyStatuses:function(){return Nt.keyStatuses},getUsable:function(){let pn=!1;return Nt.keyStatuses.forEach(function(){Cn(arguments).status===i.default.MEDIA_KEY_STATUSES.USABLE&&(pn=!0)}),pn}};return Nt.addEventListener("keystatuseschange",on),Nt.addEventListener("message",on),Nt.closed.then(()=>{Yn(on),un.debug("DRM: Session closed.  SessionID = "+on.getSessionId()),Pt.trigger(kt.KEY_SESSION_CLOSED,{data:on.getSessionId()})}),dn.push(on),on}function Cn(Nt){let vt,on;return Nt&&Nt.length>0&&(Nt[0]&&(typeof Nt[0]=="string"?vt=Nt[0]:on=Nt[0]),Nt[1]&&(typeof Nt[1]=="string"?vt=Nt[1]:on=Nt[1])),{status:vt,keyId:on}}return sn={closeKeySession:function(Nt){$n(Nt).catch(function(vt){Yn(Nt),Pt.trigger(kt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Nt.getSessionId()+") "+vt.name})})},createKeySession:function(Nt){if(!hn||!Mt)throw new Error("Can not create sessions until you have selected a key system");const vt=Mt.createSession(Nt.sessionType),on=gr(vt,Nt),pn=hn.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(Nt.initData||Nt.protData&&Nt.protData.clearkeys)?i.default.INITIALIZATION_DATA_TYPE_KEYIDS:i.default.INITIALIZATION_DATA_TYPE_CENC;vt.generateRequest(pn,Nt.initData).then(function(){un.debug("DRM: Session created.  SessionID = "+on.getSessionId()),Pt.trigger(kt.KEY_SESSION_CREATED,{data:on})}).catch(function(Hn){Yn(on),Pt.trigger(kt.KEY_SESSION_CREATED,{data:null,error:new g.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+Hn.name)})})},getAllInitData:function(){const Nt=[];for(let vt=0;vt<dn.length;vt++)dn[vt].initData&&Nt.push(dn[vt].initData);return Nt},getSessionTokens:function(){return dn},loadKeySession:function(Nt){if(!hn||!Mt)throw new Error("Can not load sessions until you have selected a key system");const vt=Nt.sessionId;for(let Hn=0;Hn<dn.length;Hn++)if(vt===dn[Hn].sessionId)return void un.warn("DRM: Ignoring session ID because we have already seen it!");const on=Mt.createSession(Nt.sessionType),pn=gr(on,Nt);pn.hasTriggeredKeyStatusMapUpdate=!0,on.load(vt).then(function(Hn){Hn?(un.debug("DRM: Session loaded.  SessionID = "+pn.getSessionId()),Pt.trigger(kt.KEY_SESSION_CREATED,{data:pn})):(Yn(pn),Pt.trigger(kt.KEY_SESSION_CREATED,{data:null,error:new g.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+vt+")")}))}).catch(function(Hn){Yn(pn),Pt.trigger(kt.KEY_SESSION_CREATED,{data:null,error:new g.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+vt+")! "+Hn.name)})})},removeKeySession:function(Nt){Nt.session.remove().then(function(){un.debug("DRM: Session removed.  SessionID = "+Nt.getSessionId()),Pt.trigger(kt.KEY_SESSION_REMOVED,{data:Nt.getSessionId()})},function(vt){Pt.trigger(kt.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+Nt.getSessionId()+"). "+vt.name})})},requestKeySystemAccess:function(Nt){return new Promise((vt,on)=>{Pn(Nt,0,vt,on)})},reset:function(){const Nt=dn.length;let vt;if(Nt!==0){const on=function(pn){Yn(pn),dn.length===0&&(Ot?(Ot.removeEventListener("encrypted",ar),Ot.setMediaKeys(null).then(function(){Pt.trigger(kt.TEARDOWN_COMPLETE)})):Pt.trigger(kt.TEARDOWN_COMPLETE))};for(let pn=0;pn<Nt;pn++)vt=dn[pn],function(Hn){$n(vt),on(Hn)}(vt)}else Pt.trigger(kt.TEARDOWN_COMPLETE)},selectKeySystem:function(Nt){return new Promise((vt,on)=>{Nt.nativeMediaKeySystemAccessObject.createMediaKeys().then(pn=>(hn=Nt.keySystem,Mt=pn,Ot?Ot.setMediaKeys(Mt):Promise.resolve())).then(()=>{vt(hn)}).catch(function(){on({error:"Error selecting keys system ("+Nt.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(Nt){Ot!==Nt&&(Ot&&(Ot.removeEventListener("encrypted",ar),Ot.setMediaKeys&&Ot.setMediaKeys(null)),Ot=Nt,Ot&&(Ot.addEventListener("encrypted",ar),Ot.setMediaKeys&&Mt&&Ot.setMediaKeys(Mt)))},setServerCertificate:function(Nt){return new Promise((vt,on)=>{Mt.setServerCertificate(Nt).then(function(){un.info("DRM: License server certificate successfully updated."),Pt.trigger(kt.SERVER_CERTIFICATE_UPDATED),vt()}).catch(pn=>{on(pn),Pt.trigger(kt.SERVER_CERTIFICATE_UPDATED,{error:new g.default(m.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,m.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+pn.name)})})})},stop:function(){let Nt;for(let vt=0;vt<dn.length;vt++)Nt=dn[vt],Nt.getUsable()||($n(Nt),Yn(Nt))},updateKeySession:function(Nt,vt){const on=Nt.session;Xt.isClearKey(hn)&&(vt=vt.toJWK()),on.update(vt).then(()=>{Pt.trigger(kt.KEY_SESSION_UPDATED)}).catch(function(pn){Pt.trigger(kt.KEY_ERROR,{error:new g.default(m.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+pn.name,Nt)})})}},un=an.getLogger(sn),hn=null,Ot=null,Mt=null,dn=[],Xt=Ve(Bt).getInstance(),ar={handleEvent:function(Nt){if(Nt.type==="encrypted"&&Nt.initData){let vt=ArrayBuffer.isView(Nt.initData)?Nt.initData.buffer:Nt.initData;Pt.trigger(kt.NEED_KEY,{key:new Ke(vt,Nt.initDataType)})}}},sn}ot[i.default.PLAYREADY_KEYSTEM_STRING]=[i.default.PLAYREADY_KEYSTEM_STRING,i.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],ot[i.default.WIDEVINE_KEYSTEM_STRING]=[i.default.WIDEVINE_KEYSTEM_STRING],ot[i.default.CLEARKEY_KEYSTEM_STRING]=[i.default.CLEARKEY_KEYSTEM_STRING],xt.__dashjs_factory_name="DefaultProtectionModel";var En=P.default.getClassFactory(xt);function tn($t){$t=$t||{};const Bt=this.context,Pt=$t.eventBus,kt=$t.events,an=$t.debug,sn=$t.api;let un,hn,Ot,Mt,dn,ar,Xt,Pn,Jn;function $n(){try{for(let Cn=0;Cn<Xt.length;Cn++)Yn(Xt[Cn]);Ot&&Ot.removeEventListener(sn.needkey,Pn),Pt.trigger(kt.TEARDOWN_COMPLETE)}catch(Cn){Pt.trigger(kt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Cn.message})}}function Yn(Cn){const Nt=Cn.session;Nt.removeEventListener(sn.error,Cn),Nt.removeEventListener(sn.message,Cn),Nt.removeEventListener(sn.ready,Cn),Nt.removeEventListener(sn.close,Cn);for(let vt=0;vt<Xt.length;vt++)if(Xt[vt]===Cn){Xt.splice(vt,1);break}Nt[sn.release]()}function gr(){let Cn=null;const Nt=function(){Ot.removeEventListener("loadedmetadata",Cn),Ot[sn.setMediaKeys](dn),Pt.trigger(kt.VIDEO_ELEMENT_SELECTED)};Ot.readyState>=1?Nt():(Cn=Nt.bind(this),Ot.addEventListener("loadedmetadata",Cn))}return un={getAllInitData:function(){const Cn=[];for(let Nt=0;Nt<Xt.length;Nt++)Cn.push(Xt[Nt].initData);return Cn},getSessionTokens:function(){return Xt},requestKeySystemAccess:function(Cn){return new Promise((Nt,vt)=>{let on=!1;for(let pn=0;pn<Cn.length;pn++){const Hn=Cn[pn].ks.systemString,yr=Cn[pn].configs;let Ur=null,_r=null;for(let Wr=0;Wr<yr.length;Wr++){const Zr=yr[Wr].audioCapabilities,ri=yr[Wr].videoCapabilities;if(Zr&&Zr.length!==0){Ur=[];for(let Ui=0;Ui<Zr.length;Ui++)window[sn.MediaKeys].isTypeSupported(Hn,Zr[Ui].contentType)&&Ur.push(Zr[Ui])}if(ri&&ri.length!==0){_r=[];for(let Ui=0;Ui<ri.length;Ui++)window[sn.MediaKeys].isTypeSupported(Hn,ri[Ui].contentType)&&_r.push(ri[Ui])}if(!Ur&&!_r||Ur&&Ur.length===0||_r&&_r.length===0)continue;on=!0;const Ua=new f(Ur,_r),za=Jn.getKeySystemBySystemString(Hn),ks=new Et(za,Ua);Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ks}),Nt({data:ks});break}}if(!on){const pn="Key system access denied! -- No valid audio/video content configurations detected!";Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:pn}),vt({error:pn})}})},selectKeySystem:function(Cn){return new Promise((Nt,vt)=>{try{dn=Cn.mediaKeys=new window[sn.MediaKeys](Cn.keySystem.systemString),Mt=Cn.keySystem,ar=Cn,Ot&&gr(),Nt(Mt)}catch{vt({error:"Error selecting keys system ("+Mt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Cn){Ot!==Cn&&(Ot&&Ot.removeEventListener(sn.needkey,Pn),Ot=Cn,Ot&&(Ot.addEventListener(sn.needkey,Pn),dn&&gr()))},createKeySession:function(Cn){if(!Mt||!dn||!ar)throw new Error("Can not create sessions until you have selected a key system");let Nt=null;if(ar.ksConfiguration.videoCapabilities&&ar.ksConfiguration.videoCapabilities.length>0&&(Nt=ar.ksConfiguration.videoCapabilities[0]),Nt===null&&ar.ksConfiguration.audioCapabilities&&ar.ksConfiguration.audioCapabilities.length>0&&(Nt=ar.ksConfiguration.audioCapabilities[0]),Nt===null)throw new Error("Can not create sessions for unknown content types.");const vt=Nt.contentType,on=dn.createSession(vt,new Uint8Array(Cn.initData),Cn.cdmData?new Uint8Array(Cn.cdmData):null),pn=function(Hn,yr){return{session:Hn,keyId:yr.keyId,normalizedKeyId:yr&&yr.keyId&&typeof yr.keyId=="string"?yr.keyId.replace(/-/g,"").toLowerCase():"",initData:yr.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(Ur){switch(Ur.type){case sn.error:let _r="KeyError";Pt.trigger(kt.KEY_ERROR,{error:new g.default(m.default.MEDIA_KEYERR_CODE,_r,this)});break;case sn.message:let Wr=ArrayBuffer.isView(Ur.message)?Ur.message.buffer:Ur.message;Pt.trigger(kt.INTERNAL_KEY_MESSAGE,{data:new it(this,Wr,Ur.destinationURL)});break;case sn.ready:hn.debug("DRM: Key added."),Pt.trigger(kt.KEY_ADDED);break;case sn.close:hn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Pt.trigger(kt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(on,Cn);on.addEventListener(sn.error,pn),on.addEventListener(sn.message,pn),on.addEventListener(sn.ready,pn),on.addEventListener(sn.close,pn),Xt.push(pn),hn.debug("DRM: Session created.  SessionID = "+pn.getSessionId()),Pt.trigger(kt.KEY_SESSION_CREATED,{data:pn})},updateKeySession:function(Cn,Nt){const vt=Cn.session;Jn.isClearKey(Mt)?vt.update(new Uint8Array(Nt.toJWK())):vt.update(new Uint8Array(Nt)),Pt.trigger(kt.KEY_SESSION_UPDATED)},closeKeySession:Yn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:$n,reset:$n},hn=an.getLogger(un),Ot=null,Mt=null,dn=null,ar=null,Xt=[],Jn=Ve(Bt).getInstance(),Pn={handleEvent:function(Cn){if(Cn.type===sn.needkey&&Cn.initData){const Nt=ArrayBuffer.isView(Cn.initData)?Cn.initData.buffer:Cn.initData;Pt.trigger(kt.NEED_KEY,{key:new Ke(Nt,i.default.INITIALIZATION_DATA_TYPE_CENC)})}}},un}tn.__dashjs_factory_name="ProtectionModel_3Feb2014";var fn=P.default.getClassFactory(tn);function Ht($t){$t=$t||{};const Bt=this.context,Pt=$t.eventBus,kt=$t.events,an=$t.debug,sn=$t.api,un=$t.errHandler;let hn,Ot,Mt,dn,ar,Xt,Pn,Jn,$n;function Yn(){Mt&&Nt();for(let vt=0;vt<Pn.length;vt++)gr(Pn[vt]);Pt.trigger(kt.TEARDOWN_COMPLETE)}function gr(vt){try{Mt[sn.cancelKeyRequest](dn.systemString,vt.sessionId)}catch(on){Pt.trigger(kt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+vt.sessionId+") "+on.message})}}function Cn(vt,on){if(on&&vt){const pn=vt.length;for(let Hn=0;Hn<pn;Hn++)if(vt[Hn].sessionId==on)return vt[Hn];return null}return null}function Nt(){Mt.removeEventListener(sn.keyerror,$n),Mt.removeEventListener(sn.needkey,$n),Mt.removeEventListener(sn.keymessage,$n),Mt.removeEventListener(sn.keyadded,$n)}return hn={getAllInitData:function(){const vt=[];for(let on=0;on<Xt.length;on++)vt.push(Xt[on].initData);for(let on=0;on<Pn.length;on++)vt.push(Pn[on].initData);return vt},getSessionTokens:function(){return Pn.concat(Xt)},requestKeySystemAccess:function(vt){return new Promise((on,pn)=>{let Hn=Mt;Hn||(Hn=document.createElement("video"));let yr=!1;for(let Ur=0;Ur<vt.length;Ur++){const _r=vt[Ur].ks.systemString,Wr=vt[Ur].configs;let Zr=null,ri=null;for(let Ua=0;Ua<Wr.length;Ua++){const za=Wr[Ua].videoCapabilities;if(za&&za.length!==0){ri=[];for(let ji=0;ji<za.length;ji++)Hn.canPlayType(za[ji].contentType,_r)!==""&&ri.push(za[ji])}if(!ri||Zr||ri&&ri.length===0)continue;yr=!0;const ks=new f(Zr,ri),Ui=ar.getKeySystemBySystemString(_r),na=new Et(Ui,ks);Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{data:na}),on({data:na});break}}if(!yr){const Ur="Key system access denied! -- No valid audio/video content configurations detected!";Pt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ur}),pn({error:Ur})}})},selectKeySystem:function(vt){return dn=vt.keySystem,Promise.resolve(dn)},setMediaElement:function(vt){if(Mt!==vt){if(Mt){Nt();for(var on=0;on<Pn.length;on++)gr(Pn[on]);Pn=[]}Mt=vt,Mt&&(Mt.addEventListener(sn.keyerror,$n),Mt.addEventListener(sn.needkey,$n),Mt.addEventListener(sn.keymessage,$n),Mt.addEventListener(sn.keyadded,$n),Pt.trigger(kt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(vt){if(!dn)throw new Error("Can not create sessions until you have selected a key system");if(Jn||Pn.length===0){const on={sessionId:null,keyId:vt.keyId,normalizedKeyId:vt&&vt.keyId&&typeof vt.keyId=="string"?vt.keyId.replace(/-/g,"").toLowerCase():"",initData:vt.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return Xt.push(on),Mt[sn.generateKeyRequest](dn.systemString,new Uint8Array(vt.initData)),on}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(vt,on){const pn=vt.sessionId;if(ar.isClearKey(dn))for(let Hn=0;Hn<on.keyPairs.length;Hn++)Mt[sn.addKey](dn.systemString,on.keyPairs[Hn].key,on.keyPairs[Hn].keyID,pn);else Mt[sn.addKey](dn.systemString,new Uint8Array(on),new Uint8Array(vt.initData),pn);Pt.trigger(kt.KEY_SESSION_UPDATED)},closeKeySession:gr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Yn,reset:Yn},Ot=an.getLogger(hn),Mt=null,dn=null,Xt=[],Pn=[],ar=Ve(Bt).getInstance(),$n={handleEvent:function(vt){let on=null;switch(vt.type){case sn.needkey:let pn=ArrayBuffer.isView(vt.initData)?vt.initData.buffer:vt.initData;Pt.trigger(kt.NEED_KEY,{key:new Ke(pn,i.default.INITIALIZATION_DATA_TYPE_CENC)});break;case sn.keyerror:if(on=Cn(Pn,vt.sessionId),on||(on=Cn(Xt,vt.sessionId)),on){let Hn=m.default.MEDIA_KEYERR_CODE,yr="";switch(vt.errorCode.code){case 1:Hn=m.default.MEDIA_KEYERR_UNKNOWN_CODE,yr+="MEDIA_KEYERR_UNKNOWN - "+m.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:Hn=m.default.MEDIA_KEYERR_CLIENT_CODE,yr+="MEDIA_KEYERR_CLIENT - "+m.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:Hn=m.default.MEDIA_KEYERR_SERVICE_CODE,yr+="MEDIA_KEYERR_SERVICE - "+m.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:Hn=m.default.MEDIA_KEYERR_OUTPUT_CODE,yr+="MEDIA_KEYERR_OUTPUT - "+m.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:Hn=m.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,yr+="MEDIA_KEYERR_HARDWARECHANGE - "+m.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:Hn=m.default.MEDIA_KEYERR_DOMAIN_CODE,yr+="MEDIA_KEYERR_DOMAIN - "+m.default.MEDIA_KEYERR_DOMAIN_MESSAGE}yr+="  System Code = "+vt.systemCode,Pt.trigger(kt.KEY_ERROR,{error:new g.default(Hn,yr,on)})}else Ot.error("No session token found for key error");break;case sn.keyadded:on=Cn(Pn,vt.sessionId),on||(on=Cn(Xt,vt.sessionId)),on?(Ot.debug("DRM: Key added."),Pt.trigger(kt.KEY_ADDED,{data:on})):Ot.debug("No session token found for key added");break;case sn.keymessage:if(Jn=vt.sessionId!==null&&vt.sessionId!==void 0,Jn?(on=Cn(Pn,vt.sessionId),!on&&Xt.length>0&&(on=Xt.shift(),Pn.push(on),on.sessionId=vt.sessionId,Pt.trigger(kt.KEY_SESSION_CREATED,{data:on}))):Xt.length>0&&(on=Xt.shift(),Pn.push(on),Xt.length!==0&&un.error(new g.default(m.default.MEDIA_KEY_MESSAGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),on){let Hn=ArrayBuffer.isView(vt.message)?vt.message.buffer:vt.message;on.keyMessage=Hn,Pt.trigger(kt.INTERNAL_KEY_MESSAGE,{data:new it(on,Hn,vt.defaultURL)})}else Ot.warn("No session token found for key message")}}},hn}Ht.__dashjs_factory_name="ProtectionModel_01b";var nr=P.default.getClassFactory(Ht);const vr=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Fr=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Lr(){let $t;const Bt=this.context;function Pt(kt,an){for(let sn=0;sn<an.length;sn++){const un=an[sn];if(typeof kt[un[Object.keys(un)[0]]]=="function")return un}return null}return $t={createProtectionSystem:function(kt){let an=null;const sn=Ve(Bt).getInstance();sn.setConfig({debug:kt.debug,BASE64:kt.BASE64,settings:kt.settings}),sn.initialize();let un=function(hn){const Ot=hn.debug,Mt=Ot.getLogger($t),dn=hn.eventBus,ar=hn.errHandler,Xt=hn.videoModel?hn.videoModel.getElement():null;return Xt&&Xt.onencrypted===void 0||Xt&&Xt.mediaKeys===void 0?Pt(Xt,Fr)?(Mt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),fn(Bt).create({debug:Ot,eventBus:dn,events:hn.events,api:Pt(Xt,Fr)})):Pt(Xt,vr)?(Mt.info("EME detected on this user agent! (ProtectionModel_01b)"),nr(Bt).create({debug:Ot,eventBus:dn,errHandler:ar,events:hn.events,api:Pt(Xt,vr)})):(Mt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Mt.info("EME detected on this user agent! (DefaultProtectionModel"),En(Bt).create({debug:Ot,eventBus:dn,events:hn.events}))}(kt);return un&&(an=M(Bt).create({BASE64:kt.BASE64,cmcdModel:kt.cmcdModel,constants:kt.constants,customParametersModel:kt.customParametersModel,debug:kt.debug,eventBus:kt.eventBus,events:kt.events,protectionKeyController:sn,protectionModel:un,settings:kt.settings}),kt.capabilities.setEncryptedMediaSupported(!0)),an}},$t}Lr.__dashjs_factory_name="Protection";const mr=dashjs.FactoryMaker.getClassFactory(Lr);mr.events=Je.default,mr.errors=m.default,dashjs.FactoryMaker.updateClassFactory(Lr.__dashjs_factory_name,mr);var ki=mr},445:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let o=new i;e.default=o},1923:function(n,e,t){t.r(e);var r=t(8748);class i extends r.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let o=new i;e.default=o},559:function(n,e,t){t.r(e),t.d(e,{supportsMediaSource:function(){return c}});var r=t(138),i=t(5212),o=t(2861),l=t(7393),d=t(649);function c(){let m="ManagedMediaSource"in window,g="WebKitMediaSource"in window,p="MediaSource"in window;return m||g||p}function f(){let m,g,p,y,v,A;const I=this.context,P=(0,l.default)(I).getInstance();function U(L,w){let O;w===i.default.VIDEO?O=function(D){const ve={video:{}};return D&&(D.width&&(ve.video.width=D.width),D.height&&(ve.video.height=D.height),D.framerate&&(ve.video.framerate=parseFloat(D.framerate)),D.hdrMetadataType&&(ve.video.hdrMetadataType=D.hdrMetadataType),D.colorGamut&&(ve.video.colorGamut=D.colorGamut),D.transferFunction&&(ve.video.transferFunction=D.transferFunction)),ve}(L):w===i.default.AUDIO&&(O=function(D){const ve={audio:{}};return D.samplerate&&(ve.audio.samplerate=D.samplerate),ve}(L)),O[w].contentType=L.codec,O[w].bitrate=parseInt(L.bitrate),O.type="media-source";let oe=L.codec;return L.width&&L.height&&(oe+=';width="'+L.width+'";height="'+L.height+'"'),O.mediaSourceCodecString=oe,function(D,ve,Le){return ve&&ve.keySystemsMetadata&&ve.keySystemsMetadata.length!==0?ve.keySystemsMetadata.map(te=>{const $e={...D};if(te.ks){$e.keySystemConfiguration={},te.ks.systemString&&($e.keySystemConfiguration.keySystem=te.ks.systemString);let Ue="";te.ks.systemString===o.default.WIDEVINE_KEYSTEM_STRING&&(Ue=o.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const Re=te.protData,Xe=Re&&Re.audioRobustness&&Re.audioRobustness.length>0?Re.audioRobustness:Ue,Ye=Re&&Re.videoRobustness&&Re.videoRobustness.length>0?Re.videoRobustness:Ue;Le===i.default.AUDIO?$e.keySystemConfiguration[Le]={robustness:Xe}:Le===i.default.VIDEO&&($e.keySystemConfiguration[Le]={robustness:Ye})}return $e}):[D]}(O,L,w)}function M(L){if(y&&y.length!==0&&L)return y.find(w=>{const O=B(L,w,i.default.AUDIO),oe=B(L,w,i.default.VIDEO),D=B(L,w,"keySystemConfiguration");return O&&oe&&D})}function B(L,w,O){return!L[O]&&!w[O]||!(!L[O]||!w[O])&&P.areEqual(L[O],w[O])}function ie(L,w){return(L=L.filter(O=>!(O.schemeIdUri&&w.some(oe=>oe.schemeIdUri===O.schemeIdUri)))).push(...w),L}return m={areKeyIdsExpired:function(L){return!!(p&&L&&L.normalizedKeyIds&&L.normalizedKeyIds.size!==0)&&p.areKeyIdsExpired(L.normalizedKeyIds)},areKeyIdsUsable:function(L){return!(p&&L&&L.normalizedKeyIds&&L.normalizedKeyIds.size!==0)||p.areKeyIdsUsable(L.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(L,w){if(!L||!L.codec||L.isSupported===!1)return!1;const O=U(L,w).map(oe=>M(oe)).filter(oe=>oe!=null);return!(O&&O.length>0)||function(oe){return oe.some(D=>D&&D.decodingInfo&&D.decodingInfo.supported)}(O)},isProtectionCompatible:function(L,w){return!w||!(!L.isEncrypted&&w.isEncrypted)},runCodecSupportCheck:function(L,w){if(w!==i.default.AUDIO&&w!==i.default.VIDEO)return Promise.resolve();const O=U(L,w);return function(oe,D){return g.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(oe.codec&&D===i.default.AUDIO||D===i.default.VIDEO&&oe.codec&&oe.width&&oe.height&&oe.bitrate&&oe.framerate)}(L,w)?function(oe){return new Promise(D=>{if(!oe||oe.length===0)return void D();const ve=oe.map(Le=>function(te){return new Promise($e=>{M(te)?$e():navigator.mediaCapabilities.decodingInfo(te).then(Ue=>{te.decodingInfo=Ue,y.push(te),$e()}).catch(Ue=>{te.decodingInfo={supported:!1},y.push(te),A.error(Ue),$e()})})}(Le));Promise.allSettled(ve).then(()=>{D()}).catch(Le=>{A.error(Le),D()})})}(O):(function(oe){if(!oe||!oe.length)return;const D=oe[0];if(M(D))return;let ve={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(D.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(D.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(D.mediaSourceCodecString))&&(ve.supported=!0),D.decodingInfo=ve,y.push(D)}(O),Promise.resolve())},setConfig:function(L){L&&(L.settings&&(g=L.settings),L.protectionController&&(p=L.protectionController))},setEncryptedMediaSupported:function(L){v=L},setProtectionController:function(L){p=L},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return v},supportsEssentialProperty:function(L){let w=g.get().streaming.capabilities.supportedEssentialProperties;g.get().streaming.capabilities.useMediaCapabilitiesApi&&g.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(w=ie(w,[{schemeIdUri:i.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:i.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:i.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),g.get().streaming.capabilities.useMediaCapabilitiesApi&&g.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(w=ie(w,[{schemeIdUri:i.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return L.inArray(w)}catch{return!0}},supportsMediaSource:c},v=!1,y=[],A=(0,d.default)(I).getInstance().getLogger(m),m}f.__dashjs_factory_name="Capabilities",e.default=r.default.getSingletonFactory(f)},7377:function(n,e,t){t.r(e);var r=t(138),i=t(656);function o(){return{customTimeRangeArray:[],length:0,add:function(l,d){let c;for(c=0;c<this.customTimeRangeArray.length&&l>this.customTimeRangeArray[c].start;c++);for(this.customTimeRangeArray.splice(c,0,{start:l,end:d}),c=0;c<this.customTimeRangeArray.length-1;c++)this.mergeRanges(c,c+1)&&c--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(l,d){for(let c=0;c<this.customTimeRangeArray.length;c++)if(l<=this.customTimeRangeArray[c].start&&d>=this.customTimeRangeArray[c].end)this.customTimeRangeArray.splice(c,1),c--;else{if(l>this.customTimeRangeArray[c].start&&d<this.customTimeRangeArray[c].end){this.customTimeRangeArray.splice(c+1,0,{start:d,end:this.customTimeRangeArray[c].end}),this.customTimeRangeArray[c].end=l;break}l>this.customTimeRangeArray[c].start&&l<this.customTimeRangeArray[c].end?this.customTimeRangeArray[c].end=l:d>this.customTimeRangeArray[c].start&&d<this.customTimeRangeArray[c].end&&(this.customTimeRangeArray[c].start=d)}this.length=this.customTimeRangeArray.length},mergeRanges:function(l,d){let c=this.customTimeRangeArray[l],f=this.customTimeRangeArray[d];return c.start<=f.start&&f.start<=c.end&&c.end<=f.end?(c.end=f.end,this.customTimeRangeArray.splice(d,1),!0):f.start<=c.start&&c.start<=f.end&&f.end<=c.end?(c.start=f.start,this.customTimeRangeArray.splice(d,1),!0):f.start<=c.start&&c.start<=f.end&&c.end<=f.end?(this.customTimeRangeArray.splice(l,1),!0):c.start<=f.start&&f.start<=c.end&&f.end<=c.end&&(this.customTimeRangeArray.splice(d,1),!0)},start:function(l){return(0,i.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].start},end:function(l){return(0,i.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].end}}}o.__dashjs_factory_name="CustomTimeRanges",e.default=r.default.getClassFactory(o)},7393:function(n,e,t){t.r(e);var r=t(138),i=t(7316);function o(){let l;return l={areEqual:function(d,c){return i(d,c)}},l}o.__dashjs_factory_name="ObjectUtils",e.default=r.default.getSingletonFactory(o)},656:function(n,e,t){t.r(e),t.d(e,{checkInteger:function(){return o},checkIsVideoOrAudioType:function(){return d},checkParameterType:function(){return i},checkRange:function(){return l}});var r=t(5212);function i(c,f){if(typeof c!==f)throw r.default.BAD_ARGUMENT_ERROR}function o(c){if(c===null||isNaN(c)||c%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function l(c,f,m){if(c<f||c>m)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function d(c){if(typeof c!="string"||c!==r.default.AUDIO&&c!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},1944:function(n,e,t){t.r(e),e.default=class{constructor(r,i,o){this.code=r||null,this.message=i||null,this.data=o||null}}},7568:function(n,e,t){t.r(e),t.d(e,{HTTPRequest:function(){return r},HTTPRequestTrace:function(){return i}});class r{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class i{constructor(){this.s=null,this.d=null,this.b=[]}}r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",r.DVB_REPORTING_TYPE="DVBReporting",r.LICENSE="license",r.CONTENT_STEERING_TYPE="ContentSteering",r.OTHER_TYPE="other"}},bC={};function Ia(n){var e=bC[n];if(e!==void 0)return e.exports;var t=bC[n]={exports:{}};return k7[n].call(t.exports,t,t.exports,Ia),t.exports}Ia.amdO={},Ia.d=function(n,e){for(var t in e)Ia.o(e,t)&&!Ia.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},Ia.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ia.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},Ia.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var So={};Ia.r(So),Ia.d(So,{Constants:function(){return aO.default},Debug:function(){return iO.default},MediaPlayer:function(){return R7.MediaPlayer},MediaPlayerFactory:function(){return rO},MetricsReporting:function(){return tO.default},Protection:function(){return nO.default},default:function(){return C7},supportsMediaSource:function(){return sO.supportsMediaSource}});var R7=Ia(5393),tO=Ia(4469),nO=Ia(3888),x7=Ia(255);let TC,w0=function(){const n="application/dash+xml";let e;function t(i,o,l){if(!i||!/^VIDEO$/i.test(i.nodeName))return null;if(i._dashjs_player)return i._dashjs_player;let d,c=i.id||i.name||"video element";if(!(o=o||[].slice.call(i.querySelectorAll("source")).filter(function(f){return f.type==n})[0])&&i.src)(o=document.createElement("source")).src=i.src;else if(!o&&!i.src)return null;return l=l||{},d=(0,x7.default)(l).create(),d.initialize(i,o.src,i.autoplay),e||(e=d.getDebug().getLogger()),e.debug("Converted "+c+" to dash.js player and added content: "+o.src),i._dashjs_player=d,d}function r(i){return/^VIDEO$/i.test(i.nodeName)?i:r(i.parentNode)}return{create:t,createAll:function(i,o){let l=[];i=i||"[data-dashjs-player]";let d=(o=o||document).querySelectorAll(i);for(let f=0;f<d.length;f++){let m=t(d[f],null);l.push(m)}let c=o.querySelectorAll('source[type="'+n+'"]');for(let f=0;f<c.length;f++){let m=t(r(c[f]),null);l.push(m)}return l}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?w0.createAll():TC=window.setInterval(function(){window.dashjs&&(window.clearInterval(TC),w0.createAll())},500):window.addEventListener("load",function n(){window.removeEventListener("load",n),w0.createAll()}));var rO=w0,iO=Ia(649),aO=Ia(5212),sO=Ia(559);dashjs.Protection=nO.default,dashjs.MetricsReporting=tO.default,dashjs.MediaPlayerFactory=rO,dashjs.Debug=iO.default,dashjs.supportsMediaSource=sO.supportsMediaSource,dashjs.Constants=aO.default;var C7=dashjs,L7=(So=So.default).Constants,D7=So.Debug,N7=So.MediaPlayer,P7=So.MediaPlayerFactory,M7=So.MetricsReporting,O7=So.Protection,F7=So.default,U7=So.supportsMediaSource;const z7=Object.freeze(Object.defineProperty({__proto__:null,Constants:L7,Debug:D7,MediaPlayer:N7,MediaPlayerFactory:P7,MetricsReporting:M7,Protection:O7,default:F7,supportsMediaSource:U7},Symbol.toStringTag,{value:"Module"}));export{H7 as F,j7 as c,$7 as j,bi as r,q7 as s};
